[{"id":24464651,"iid":14738,"project_id":278964,"title":"Follow-up from \"Expose epic_iid in issues API\"","description":"The following discussions from !15998 should be addressed:\n\n- [ ] @winh started a [discussion](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/15998#note_211152221): \n\n    \u003e loading epic eagerly will be done in https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/15886\n\n- [ ] @winh started a [discussion](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/15998#note_211228436): \n\n    \u003e CE-backport: https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/32544","state":"closed","created_at":"2019-09-04T14:43:11.304Z","updated_at":"2019-09-10T12:26:05.377Z","closed_at":"2019-09-10T12:26:05.326Z","closed_by":{"id":273486,"username":"jameslopez","name":"James Lopez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/273486/avatar.png","web_url":"https://gitlab.com/jameslopez"},"labels":["backend","backstage [DEPRECATED]","database","devops::plan","issues","workflow::in review"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"}],"author":{"id":444,"username":"dzaporozhets","name":"Dmytro Zaporozhets (DZ)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/444/avatar.png","web_url":"https://gitlab.com/dzaporozhets"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14738","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14738","notes":"https://gitlab.com/api/v4/projects/278964/issues/14738/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14738/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14738","relative":"#14738","full":"gitlab-org/gitlab#14738"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24727319,"iid":31564,"project_id":278964,"title":"ESCALATED: Decompression Bomb","description":"**[HackerOne report #687730](https://hackerone.com/reports/687730)** by `u3mur4` on 2019-09-04, assigned to `jmatos_bgtvf`:\n\n## Summary\n\nA decompression bomb is a file designed to crash or render useless the program or system reading it, i.e. a denial of service. \n\nAn attacker can create a carefully crafted *tar.gz* file and upload it using the *Import an exported GitLab project* functionality. When the file is unpacked its contents are exploded and it fills the drive.\n\n## Steps to reproduce\n\n- Download the ![100gb.tar.gz](https://h1.sec.gitlab.net/a/4e33f435-37b5-47bd-b4fa-fa5fca7afeb9/100gb.tar.gz) file (100MB)  \n- Sign in to a GitLab instance   \n- Create (Import) a New Project using the *Import an exported GitLab project*  \n- Set the *GitLab project export file* form field to the previously download  ![100gb.tar.gz](https://h1.sec.gitlab.net/a/4e33f435-37b5-47bd-b4fa-fa5fca7afeb9/100gb.tar.gz) file  \n- Click to *Import Project*  and wait until it's finished  \n- Repeat this process until the disk is full  \n- When the disk is full multiple functionality becomes unavailable (See Video and Impact)\n\nVideo version:  \n![bomb.mp4](https://h1.sec.gitlab.net/a/46eb4a59-b3bb-46be-9a0e-bca7d625d178/bomb.mp4)\n\n## How to create the decompression bomb file\n\nYou can create the compressed file yourself using couples of bash commands  \n```bash  \nfallocate -l 100G 100gb.zeros  \ntar cvf - 100gb.zeros | gzip -9 - \u003e 100gb.tar.gz  \n```\n\nI created a short *go* program ![main.go](https://h1.sec.gitlab.net/a/511671ea-e732-4ca4-803c-e6749d065c15/main.go) to create the compressed file without any intermediate file. The program also sets the modification time inside the tar file to a future date because of the following bug/behavior:\n\nThe `ImportExportProjectCleanupWorker` runs every hour and deletes the uncompressed files where the modification time is older than 1 day. Because we set the modification time to a future date inside the tar archive the uncompressed data will be *never* deleted.  \n``` bash  \nstat -c '%y' big_file  \n2020-09-03 21:44:51.000000000 +0200  \n```\n\n## Impact\n\n- Random 500 errors  \n- Unable to create/import new projects  \n- Unable to create issues  \n- Unable to push git changes  \n- Unable to upload any file: file avatar, project avatar  \n- Unable to access the whole site  \n- etc...\n\n## What is the current *bug* behavior?\n\n- no size check before decompression  \n- tar sets the modification time of the file\n\n## What is the expected *correct* behavior?\n\n- Limit the maximum file size (`gzip -l 100gb.tar.gz` to get the uncompressed size)  \n- Use the *-m, --touch* flag to don't extract file modified time\n\n####  GitLab version info\n\nomnibus-gitlab package: GitLab Community Edition 12.2.4  \ngitlab-development-kit: GitLab Community Edition 12.3.0-pre gitlab-ce@f4e40c532b5582f47a0dd9bf7054112fc9ec6085  \ngitlab.com: not tested because of dos\n\n## Impact\n\n- Random 500 errors  \n- Unable to create/import new projects  \n- Unable to create issues  \n- Unable to push git changes  \n- Unable to upload any file: file avatar, project avatar  \n- Unable to access the whole site  \n- etc...\n\n## Attachments\n**Warning:** Attachments received through HackerOne, please exercise caution!\n* [bomb.mp4](https://h1.sec.gitlab.net/a/46eb4a59-b3bb-46be-9a0e-bca7d625d178/bomb.mp4)\n* [main.go](https://h1.sec.gitlab.net/a/511671ea-e732-4ca4-803c-e6749d065c15/main.go)\n* [100gb.tar.gz](https://h1.sec.gitlab.net/a/4e33f435-37b5-47bd-b4fa-fa5fca7afeb9/100gb.tar.gz)","state":"closed","created_at":"2019-09-04T13:14:59.461Z","updated_at":"2021-12-20T23:54:29.095Z","closed_at":"2020-09-16T23:58:40.139Z","closed_by":{"id":5616676,"username":"rchan-gitlab","name":"Ron Chan","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5616676/avatar.png","web_url":"https://gitlab.com/rchan-gitlab"},"labels":["Category:Importers","Deliverable","HackerOne","Importer:Project Export/Import","devops::manage","estimation::completed","group::import","milestone::p3","priority::3","section::dev","security","security-backlog::closed","severity::3","workflow::in review"],"milestone":{"id":1112145,"iid":47,"group_id":9970,"title":"13.1","description":"","state":"closed","created_at":"2020-01-03T12:28:30.160Z","updated_at":"2020-10-08T12:01:07.361Z","due_date":"2020-06-17","start_date":"2020-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/47"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":34,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":"2019-11-22","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31564","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31564","notes":"https://gitlab.com/api/v4/projects/278964/issues/31564/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31564/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31564","relative":"#31564","full":"gitlab-org/gitlab#31564"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2959,"epic":{"id":34392,"iid":2959,"title":"Project Export/Import","url":"/groups/gitlab-org/-/epics/2959","group_id":9970},"iteration":null,"health_status":null},{"id":24457810,"iid":14733,"project_id":278964,"title":"License Compliance view - documentation","description":"We're creating a new page https://gitlab.com/gitlab-org/gitlab-ee/issues/13582 and it should be described in the documentation:\n\n* [ ] Add new page in docs\n* [ ] Add mention of this page on https://docs.gitlab.com/ee/user/application_security/license_compliance/index.html\n* [ ] Update permission list with new permissions","state":"closed","created_at":"2019-09-04T11:27:13.337Z","updated_at":"2020-01-18T07:09:02.795Z","closed_at":"2019-12-24T09:10:08.271Z","closed_by":{"id":3585,"username":"axil","name":"Achilleas Pipinellis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3585/avatar.png","web_url":"https://gitlab.com/axil"},"labels":["Category:License Compliance","Deliverable","Enterprise Edition","backend","devops::secure","documentation","group::composition analysis","missed-deliverable","missed:12.4","missed:12.5","missed:12.6","sub-issue","type::feature","workflow::in review"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"}],"author":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"type":"ISSUE","assignee":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"user_notes_count":6,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14733","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14733","notes":"https://gitlab.com/api/v4/projects/278964/issues/14733/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14733/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14733","relative":"#14733","full":"gitlab-org/gitlab#14733"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24457694,"iid":14732,"project_id":278964,"title":"License Compliance view - backend","description":"backend issue for https://gitlab.com/gitlab-org/gitlab-ee/issues/13582\n\n1. Permissions for the page https://gitlab.com/gitlab-org/gitlab/merge_requests/17481\n2. Parse `License scanning` report and merge Dependency scanning info. https://gitlab.com/gitlab-org/gitlab/merge_requests/18281\n3. present information in the eligible format. https://gitlab.com/gitlab-org/gitlab/merge_requests/17851\n3. Create endpoint that response with needed data. https://gitlab.com/gitlab-org/gitlab/merge_requests/17889 and https://gitlab.com/gitlab-org/gitlab/merge_requests/17755\n4. Usage ping https://gitlab.com/gitlab-org/gitlab/merge_requests/17925\n\n\n### Endpoint response\n\n`GET /projects/:id/security/licenses.json`\n\n```json\n{\n  \"licenses\": [\n    {\n       \"name\": \"MIT\",\n       \"url\": \"https://mit.org/idontknowwhatido\",\n       \"components\": [\n          {\n             \"name\": \"acme-client\",\n             \"blob_path\": \"https://staging.gitlab.com/secure-team-test/dependency-list-test/blob/e9a4f09eb631acc39ff1122261e16b81b92bf33c/yarn.lock\"\n          }\n          ...\n        ]\n     }\n   ...\n  ],\n  \"report\":\n  {\n    \"status\": \"some_status\",\n    \"job_path\": \"some path to ci build\",\n    \"generated_at\": \"2019-08-16T16:16:52.273Z\"\n  }    \n}\n```\n\n### Notes\n\n* `report.generated_at` - timestamp in UTC\n* `report.status` - status that we need in case if we want to display any error, like job is not set up.\n* Endpoint will support standart GitLab pagination\n\n### Possible statuses\n\nI'm using same statuses as for ~\"dependency list\" We can elaborate them.\n\n| Status | Meaning |\n|--------|---------|\n| `\"ok\"` | Everything is OK and we have a list of licenses |\n| `\"job_not_set_up\"` | `License scanning` job hasn't ran in this project, :grey_question: ask user to set up this job |\n| `\"job_failed\"` | `License scanning` failed, no licences to show :grey_question: Show user warning |","state":"closed","created_at":"2019-09-04T11:22:41.935Z","updated_at":"2019-10-18T12:23:15.231Z","closed_at":"2019-10-16T11:36:41.025Z","closed_by":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"labels":["Category:License Compliance","Deliverable","Enterprise Edition","backend","devops::secure","group::composition analysis","sub-issue","type::feature","workflow::in review"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"}],"author":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"type":"ISSUE","assignee":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14732","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14732","notes":"https://gitlab.com/api/v4/projects/278964/issues/14732/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14732/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14732","relative":"#14732","full":"gitlab-org/gitlab#14732"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24457455,"iid":14731,"project_id":278964,"title":"Auditor users cannot access public and internal projects when files access is limited to project members","description":"### Summary\n\nAuditor users cannot access public and internal projects when `View and edit files in this project` setting is set to `Only Project Members`.\n\n[Docs](https://docs.gitlab.com/ee/administration/auditor_users.html), on the other hand, state:\n\u003e Auditor users are given read-only access to all projects, groups, and other resources on the GitLab instance.\n\n### Steps to reproduce\n\n1. Create public or internal project.\n1. Change the `View and edit files in this project` setting to `Only Project Members`.\n1. Impersonate auditor user and navigate to that project.\n1. Issue is that you cannot see the code in there.\n\n### What is the current *bug* behavior?\n\nCode is not accessible.\n\n### What is the expected *correct* behavior?\n\nCode is accessible. Auditors should have access to everything minus settings/admin.\n\n## Issue readiness\n\n* [x]  Product: issue description is accurate with an acceptable proposal for an MVC\n* [ ]  Engineering: issue is implementable with few remaining questions, is sufficiently broken down, and is able to be estimated","state":"closed","created_at":"2019-09-04T11:14:37.187Z","updated_at":"2020-10-01T02:33:03.021Z","closed_at":"2020-07-14T20:34:05.829Z","closed_by":{"id":13356,"username":"dblessing","name":"Drew Blessing","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b5bf44866b4eeafa2d8114bfe15da02f?s=80\u0026d=identicon","web_url":"https://gitlab.com/dblessing"},"labels":["Category:Authentication and Authorization","Next Up","customer","devops::manage","group::authentication and authorization","permissions","type::bug","workflow::verification"],"milestone":{"id":1233746,"iid":49,"group_id":9970,"title":"13.2","description":"https://about.gitlab.com/releases/2020/07/22/gitlab-13-2-released/","state":"closed","created_at":"2020-04-09T17:28:01.032Z","updated_at":"2022-04-13T14:48:24.167Z","due_date":"2020-07-17","start_date":"2020-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/49"},"assignees":[{"id":13356,"username":"dblessing","name":"Drew Blessing","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b5bf44866b4eeafa2d8114bfe15da02f?s=80\u0026d=identicon","web_url":"https://gitlab.com/dblessing"}],"author":{"id":2539756,"username":"mhuseinbasic","name":"Muhamed Huseinbašić","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cf5abf6ef3e7c2048502203b310d3226?s=80\u0026d=identicon","web_url":"https://gitlab.com/mhuseinbasic"},"type":"ISSUE","assignee":{"id":13356,"username":"dblessing","name":"Drew Blessing","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b5bf44866b4eeafa2d8114bfe15da02f?s=80\u0026d=identicon","web_url":"https://gitlab.com/dblessing"},"user_notes_count":14,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14731","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":1},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14731","notes":"https://gitlab.com/api/v4/projects/278964/issues/14731/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14731/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14731","relative":"#14731","full":"gitlab-org/gitlab#14731"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24454603,"iid":14729,"project_id":278964,"title":"Group Deploy Keys","description":"\u003c!-- The first four sections: \"Problem to solve\", \"Intended users\", \"User experience goal\", and \"Proposal\", are strongly recommended, while the rest of the sections can be filled out during the problem validation or breakdown phase. However, keep in mind that providing complete and relevant information early helps our product team validate the problem and start working on a solution. --\u003e\n\n### Problem to solve \n\n\u003c!-- What problem do we solve? Try to define the who/what/why of the opportunity as a user story. For example, \"As a (who), I want (what), so I can (why/value).\" --\u003e\n\nYou need to add a deploy key to every project manually in order to use GitLab CI with the same deploy keys across projects. This is so the runner will get permission to clone/fetch other repositories that are internal or private. \n\nThis is not very effective, especially if you need to update your key or add a new one.\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\n\nPersonas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/\n\n* [Cameron (Compliance Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#cameron-compliance-manager)\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n* [Rachel (Release Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#rachel-release-manager) \n* [Alex (Security Operations Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#alex-security-operations-engineer)\n* [Simone (Software Engineer in Test)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#simone-software-engineer-in-test)\n* [Allison (Application Ops)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#allison-application-ops) \n* [Priyanka (Platform Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#priyanka-platform-engineer)\n* [Dana (Data Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#dana-data-analyst)\n--\u003e\n\nEveryone working with GitLab CI and using the repo tool:\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n\n### User experience goal\n\n\u003c!-- What is the single user experience workflow this problem addresses? \nFor example, \"The user should be able to use the UI/API/.gitlab-ci.yml with GitLab to \u003cperform a specific task\u003e\"\nhttps://about.gitlab.com/handbook/engineering/ux/ux-research-training/user-story-mapping/ --\u003e \n\n- The user should be able to configure deploy keys on the group level so they will be accessible in any child project. - Users should find it easy to locate the group deploy keys in a group.\n- Ideally, users should be knowledgable about group deploy keys when being in a project context\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\n* Add a menu option `Repository` under the group sidebar `Settings` menu\n* Add a section `Deploy keys`\n* Group Deploy keys allow read-only or read-write (if enabled) access to your project repositories within the group. \n  * **Note** Group deploy keys do not support protected branches unless https://gitlab.com/gitlab-org/gitlab/-/issues/30769#note_337230547 is implemented.\n* Deploy keys can be used for access to environments. You can create a group deploy key or add an existing one.\n  * **Note** Group deploy keys do not support protected environments unless https://gitlab.com/gitlab-org/gitlab/-/issues/223748 is implemented\n* Project deploy keys are unique within the same instance. This means they can't be both be added in User settings \u003e SSH keys and in a group's or project's deploy keys section.\n  * This is shown with an error message similar as for project deploy keys (depicted at https://gitlab.com/gitlab-org/gitlab/-/issues/14729#note_387842401)\n* Group deploy keys inherit the same read/write access given to the key to the entire group.\n* Group deploy keys are shown the same way as instance level deploy keys within a project's deploy keys context.\n\n#### UI layout of `Deploy keys` section:\n\nSimilar to the project settings section at `/settings/repository` to begin with. This should ideally be moved to a similar creation flow as variables with a modal containing the creation flow.\n\n```\n#### Deploy Keys\n\nDeploy keys allow read-only or read-write (if enabled) access to your group's repositories. Deploy keys can be used for CI, staging, or production servers. You can create a deploy key or add an existing one.\n\nCreate a new deploy key for this group.\n\nTitle\n\n[FIELD]\n\nKey\n\n[FIELD]\n\nPaste a machine public key here. Read more about how to generate it [here](https://gitlab.com/help/ssh/README).\n\n* [ ] Write access allowed\n      Allow this key to push to __all of this group's repositories__ as well? (Default only allows pull access.)\n```\n\nDeploy keys table:\n\n```\n[TAB][Enabled deploy keys][NUM] [TAB][Privately accessible deploy keys][NUM] [TAB][Publicly accessible deploy keys][NUM]\n\n[HEADER][Deploy key]       [HEADER][Project usage]                                      [HEADER][Created]\n\n[ROW]{Title}{Fingerprint}  [BADGE per Project]{Project reference}{Access level icon}    [Date]{icon:calendar}{time ago}         [ACTIONS]{Enable}{Disable}{Remove}{Edit}\n\n```\n\n### Further details\n\n\u003c!-- Include use cases, benefits, goals, or any other details that will help us understand the problem better. --\u003e\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?\nConsider adding checkboxes and expectations of users with certain levels of membership https://docs.gitlab.com/ee/user/permissions.html\n* [ ] Add expected impact to members with no access (0)\n* [ ] Add expected impact to Guest (10) members\n* [ ] Add expected impact to Reporter (20) members\n* [ ] Add expected impact to Developer (30) members \n* [ ] Add expected impact to Maintainer (40) members\n* [ ] Add expected impact to Owner (50) members --\u003e\n\nEveryone who has access to Group \u003e Settings \u003e CI / CD should be able to add Group Deploy Keys/Tokens.\n* [ ] Add expected impact to Maintainer (40) members\n* [ ] Add expected impact to Owner (50) members\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/workflow.html#for-a-product-change\n\n* Add all known Documentation Requirements in this section. See https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements\n* If this feature requires changing permissions, update the permissions document. See https://docs.gitlab.com/ee/user/permissions.html --\u003e\n\n### Availability \u0026 Testing\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n### What is the type of buyer?\n\n\u003c!-- What is the buyer persona for this feature? See https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/buyer-persona/\nIn which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\n\nCore or Starter\n\n### Is this a cross-stage feature?\n\n\u003c!-- Communicate if this change will affect multiple Stage Groups or product areas. We recommend always start with the assumption that a feature request will have an impact into another Group. Loop in the most relevant PM and Product Designer from that Group to provide strategic support to help align the Group's broader plan and vision, as well as to avoid UX and technical debt. https://about.gitlab.com/handbook/product/#cross-stage-features --\u003e\n\n### Links / references","state":"closed","created_at":"2019-09-04T09:52:11.118Z","updated_at":"2022-08-08T18:06:51.175Z","closed_at":"2020-08-14T00:09:17.704Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["Category:Authentication and Authorization","Category:Continuous Delivery","Release::P1","backend","backend-weight::3","cicd::active","customer","devops::release","direction","frontend","frontend-weight::2","group::release","release post item::in review","settings","type::feature","workflow::in review"],"milestone":{"id":1233752,"iid":50,"group_id":9970,"title":"13.3","description":"https://about.gitlab.com/releases/2020/08/22/gitlab-13-3-released/","state":"closed","created_at":"2020-04-09T17:39:21.090Z","updated_at":"2022-04-13T14:50:18.976Z","due_date":"2020-08-17","start_date":"2020-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/50"},"assignees":[{"id":489558,"username":"dimitrieh","name":"Dimitrie Hoekstra","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/489558/avatar.png","web_url":"https://gitlab.com/dimitrieh"},{"id":4192493,"username":"ebaque","name":"Etienne Baqué","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"}],"author":{"id":4445407,"username":"acdgruppe","name":"Frederik T.","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0aad0eee47f45e02361f7852a73f7d44?s=80\u0026d=identicon","web_url":"https://gitlab.com/acdgruppe"},"type":"ISSUE","assignee":{"id":489558,"username":"dimitrieh","name":"Dimitrie Hoekstra","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/489558/avatar.png","web_url":"https://gitlab.com/dimitrieh"},"user_notes_count":107,"merge_requests_count":2,"upvotes":45,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14729","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":9,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 9 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14729","notes":"https://gitlab.com/api/v4/projects/278964/issues/14729/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14729/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14729","relative":"#14729","full":"gitlab-org/gitlab#14729"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24450479,"iid":14727,"project_id":278964,"title":"Update License Management's release process doc, mention Python 2 jobs","description":"### Problem to solve\n\nIn [license-management!56](https://gitlab.com/gitlab-org/security-products/license-management/merge_requests/56),\nthe pipeline of\n[license-management](https://gitlab.com/gitlab-org/security-products/license-management)\nhas significantly changed in order to build Docker images where Python 2 is the default.\nThe [release process documentation](https://gitlab.com/gitlab-org/security-products/release/blob/master/docs/release_process.md)\ndoes not reflect these changes.\n\nAlso, [license-management!55](https://gitlab.com/gitlab-org/security-products/license-management/merge_requests/55) introduced dotenv files that set the default values of other environment variables, like `FEATURE_RUBY_REPORT` and `LM_REPORT_VERSION`.\n\n### Proposal\n\nUpdate the [release process documentation](https://gitlab.com/gitlab-org/security-products/release/blob/master/docs/release_process.md) to explain how `version 2` jobs build Docker images where Python 2 is the default.\n\nAlternatively, add this to the [project README](https://gitlab.com/gitlab-org/security-products/license-management).\n\n### Who can address the issue\n\nAny backend developer working on the ~\"devops::secure\" stage.\n\n### Other links/references\n\nhttps://gitlab.com/gitlab-org/gitlab-ee/issues/12032\n\n/cc @xlgmokha @gonzoyumo","state":"closed","created_at":"2019-09-04T08:02:43.168Z","updated_at":"2019-10-21T20:37:29.613Z","closed_at":"2019-10-21T20:37:29.564Z","closed_by":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"labels":["Category:License Compliance","Enterprise Edition","Stretch","backend","backstage [DEPRECATED]","devops::secure","documentation","group::composition analysis","missed:12.4","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"}],"author":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"type":"ISSUE","assignee":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14727","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14727","notes":"https://gitlab.com/api/v4/projects/278964/issues/14727/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14727/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14727","relative":"#14727","full":"gitlab-org/gitlab#14727"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24727292,"iid":31547,"project_id":278964,"title":"Update registry tag delete popup message","description":"### Problem to solve\ngitlab-ce#21405 addresses a problem where deleting one image/tag from the container registry would delete all images/tags with the same image ID. However, the modal still warns the user about that behavior. In addition, when a user removes an image/tag from the GitLab Container Registry, there may be a delay of several seconds before it is removed. \n\n\u003c!-- What problem do we solve? --\u003e\n\n### Intended users\n* [Systems Administrator](https://design.gitlab.com/getting-started/personas#persona-sidney)\n* [DevOps Engineer](https://design.gitlab.com/getting-started/personas#persona-devon)\n* [Software Developer](https://design.gitlab.com/getting-started/personas#persona-sasha)\n\n### Further details\n\n#### Copy\n* For a single image: `You are about to remove \u003cb\u003e%{title}\u003c/b\u003e. Are you sure?`\n* For multiple images: `You are about to remove \u003cb\u003e%{count}\u003c/b\u003e tags. Are you sure?`\n\n### Proposal\nWe will correct the modal with a new message that warns the user that they are about to remove \u003cn\u003e number of images/tags and that it may take a few seconds. \n\n","state":"closed","created_at":"2019-09-04T00:46:54.537Z","updated_at":"2021-04-03T08:30:53.687Z","closed_at":"2019-10-04T21:06:43.964Z","closed_by":{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"},"labels":["Category:Container Registry","Deliverable","UX","UX debt","backend","devops::package","frontend","group::package registry"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"}],"author":{"id":4262651,"username":"ggelatti","name":"Giorgenes Gelatti","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4262651/avatar.png","web_url":"https://gitlab.com/ggelatti"},"type":"ISSUE","assignee":{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"user_notes_count":20,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31547","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31547","notes":"https://gitlab.com/api/v4/projects/278964/issues/31547/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31547/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31547","relative":"#31547","full":"gitlab-org/gitlab#31547"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":434,"epic":{"id":1253,"iid":434,"title":"Lower the cost of the registry by improving storage management","url":"/groups/gitlab-org/-/epics/434","group_id":9970,"human_readable_end_date":"Mar 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24438108,"iid":14714,"project_id":278964,"title":"[UX \u0026 Design] Communicating prorated charges for seats added to a paid group","description":"# Problem\n\nWe currently do not charge customers when they add users to a group on GitLab.com. This means we are hosting users for free, missing out on revenue and some customers are confused as to how they pay us for those users, whilst other customers are not paying for them at all and abusing the system by removing users prior to their renewal date. If customers add a user and don't pay for the user, we are hosting those users for free, which costs GitLab money (in addition to the loss in revenue of them not paying for their user). Customers do not currently get billed fairly in their yearly true-up and are charged at 100% for their users even though they may have only added them for one day prior to their renewal date.\n\nBilling for users _after_ they add they are added to a group for GitLab.com is problematic from a user experience perspective (as we have to bill them each time we make an amendment to their subscription in Zuora), which means each time they add a user they get a new invoice to pay.\n\n# Proposal\n\n### Iteration 1 (MVC): Better communication to users\n\nHere are the issues for the implementation of the MVC:\n* [MVC for SaaS](https://gitlab.com/gitlab-org/gitlab/issues/35683) \n* [MVC for self-managed instances](https://gitlab.com/gitlab-org/gitlab/issues/35677)\n\n| What problem are we solving? | Proposed solution |\n| --- | --- |\n| Subscription seat information is only accessible to group owners/admins, but other user roles can also add users to paid seats, impacting billing. | Add subscription seat information on the members page for the instance/group and its subgroups, visible to all users who can add members to paid groups. \u003cbr\u003e ![SaaS___Group_members_page__at_seat_count](/uploads/fa5d2dbafff48f39fbcc1afea82d3a0b/SaaS___Group_members_page__at_seat_count.png) |\n| When a user is added to a paid group/instance that would put the group/instance over its seat count, it is not clear that adding that user will incur charges. | When a user is being added and it would increase the subscription's `Seats owed`/`Users over license` number, show a modal and ask the user to confirm that they would like to add a seat to their subscription. \u003cbr\u003e![SaaS___Group_members_page__add_seat_modal](/uploads/ca745c8d3ac9f33d3e268d04466d870d/SaaS___Group_members_page__add_seat_modal.png)  |\n\nSee the [full flow](https://app.mural.co/t/gitlab2474/m/gitlab2474/1573480963676/f17d79d1ebc4131998796114a940fb09e8764536) documented in Mural.\n\n\n### Iteration 2: Proration\n\nHere is the issue for iteration 2:\n* [Initiate pro-rated charges when a .com customer exceeds the users in their subscription](https://gitlab.com/gitlab-org/customers-gitlab-com/issues/998)\n\n| What problem are we solving? | Proposed solution |\n| --- | --- |\n| When a seat is added with only a few months left on the subscription term, customers are not thrilled about having to pay for that seat for the entire year. | When a customer adds a seat above their subscription seat count, ask them to approve a prorated amount for that seat based on the amount of time left in the subscription. They will be billed for all seats added at the end of their subscription term. \u003cbr\u003e ![Screen_Shot_2019-12-16_at_12.22.30_PM](/uploads/0dc03d1c3b4edee188bd680206e00a3a/Screen_Shot_2019-12-16_at_12.22.30_PM.png)|\n| Since users other than admins/owners can add paid users to groups/instances, the admin/owner is not always aware that additional users have been added beyond the subscription seat count. | Send a monthly email to owners/admins detailing the subscription changes that month. \u003cbr\u003e ![Screen_Shot_2019-12-16_at_12.23.24_PM](/uploads/3e41f25a9769e58de81d00224372de84/Screen_Shot_2019-12-16_at_12.23.24_PM.png) |\n| When admins/owners receive a true-up bill for additional seats added over the subscription term, they do not have visibility into when those seats were added and what charges were incurred. | In the customer portal, add a detailed cost breakdown of additional charges incurred over the course of the subscription term. \u003cbr\u003e ![Screen_Shot_2019-12-16_at_12.23.15_PM](/uploads/876ce4b8e01f53bf103a33a2703fecfa/Screen_Shot_2019-12-16_at_12.23.15_PM.png)|\n| GitLab is missing out on revenue by not charging for users added above the subscription seat count. | At the end of the customer's subscription term, manually generate an invoice for the prorated charges incurred over the course of the year. (We will automate this process in a later iteration.) |\n\nSee the [full flow](https://app.mural.co/t/gitlab2474/m/gitlab2474/1573480963676/f17d79d1ebc4131998796114a940fb09e8764536) documented in Mural.\n\n\n**Designs**\n\n* [Wireframes / user flows for each iteration](https://app.mural.co/t/gitlab2474/m/gitlab2474/1573480963676/f17d79d1ebc4131998796114a940fb09e8764536)\n* High-fidelity designs in this issue's [Design tab](https://gitlab.com/gitlab-org/gitlab/issues/14714/designs)\n\n# Next steps\n\n@esybrant does the plan/schedule below work for you? The dates aren't rigid, but I'd like to keep some sort of momentum going on this and have this ready for engineering for 12.6 if possible.\n\n* [x] @esybrant create v1 design mockups by 1st Nov\n* [x] @esybrant, @tipyn, @eileenux, \u0026 @timnoah to review mockups together on 5th Nov \n* [x] @esybrant to iterate towards v2 mockups based on feedback by 11th Nov\n* [x] @esybrant, @tipyn, @eileenux, \u0026 @timnoah to review mockups together on 11th Nov \n* [x] Group review with engineering on 14th Nov\n* [x] @esybrant iterate towards v3 (final designs) ready for 18th Nov (12.6).\n\nOther tasks:\n\n* [ ] @rdickenson update handbook: https://about.gitlab.com/handbook/ceo/pricing/#true-up-pricing\n* [ ] @rdickenson update customer documentation\n* [ ] @williamchia @mkarampalas @esybrant work on internal and customer facing messaging plan\n\n# Later iteration\n\nUnderstand how we can help customers pre-pay for users via invoice. See: https://gitlab.com/groups/gitlab-org/-/epics/1898","state":"closed","created_at":"2019-09-03T19:53:29.345Z","updated_at":"2021-12-11T01:03:43.938Z","closed_at":"2020-02-06T22:44:02.696Z","closed_by":{"id":4377833,"username":"esybrant","name":"Emily Sybrant","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4377833/avatar.png","web_url":"https://gitlab.com/esybrant"},"labels":["Deliverable","UX","UX solution validation","devops::fulfillment","direction","frontend","gitlab.com","group::purchase","missed-deliverable","missed:12.5","missed:12.7","priority::1","retention","section::fulfillment","workflow::solution validation"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":4377833,"username":"esybrant","name":"Emily Sybrant","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4377833/avatar.png","web_url":"https://gitlab.com/esybrant"}],"author":{"id":1903246,"username":"tipyn","name":"Luca Kisielius","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1903246/avatar.png","web_url":"https://gitlab.com/tipyn"},"type":"ISSUE","assignee":{"id":4377833,"username":"esybrant","name":"Emily Sybrant","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4377833/avatar.png","web_url":"https://gitlab.com/esybrant"},"user_notes_count":60,"merge_requests_count":0,"upvotes":4,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14714","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":9,"completed_count":6},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 9 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14714","notes":"https://gitlab.com/api/v4/projects/278964/issues/14714/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14714/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14714","relative":"#14714","full":"gitlab-org/gitlab#14714"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2062,"epic":{"id":13837,"iid":2062,"title":"Charge customers properly when they add new users to a group on GitLab.com","url":"/groups/gitlab-org/-/epics/2062","group_id":9970,"human_readable_end_date":"Feb 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24434888,"iid":14709,"project_id":278964,"title":"Make the \"new purchase\" experience clearer to customers when buying a .com Plan","description":"# Problem\n\nIf a customer wants to make a new purchase, it's unclear why they have been routed to another website to do so. This is confusing and frustrating to new customers, and could mean a difference between someone buying GitLab and not buying GitLab.\n\nNote: All of these flows are if you click this link: \n\n![Screen_Shot_2019-09-03_at_12.12.24_PM](/uploads/1aabb634b55a90d4fde8986bcd0bb861/Screen_Shot_2019-09-03_at_12.12.24_PM.png)\n\n### Sign in vs Register (without pre-existing GitLab.com account)\n\n| Step 1 | Step 2 | Step 3 | Step 4 | Step 5 |\n| ------ | ------ | ------ | ------ | ------ |\n| ![Screen_Shot_2019-09-03_at_11.53.28_AM](/uploads/54933af8018a4610ef38b229c921438e/Screen_Shot_2019-09-03_at_11.53.28_AM.png) | ![Screen_Shot_2019-09-03_at_11.53.44_AM](/uploads/3f9a3c71e16882ea4d5967206345df6c/Screen_Shot_2019-09-03_at_11.53.44_AM.png) | ![Screen_Shot_2019-09-03_at_11.54.29_AM](/uploads/9979a3e616e72eec94bcb8c1ee299923/Screen_Shot_2019-09-03_at_11.54.29_AM.png) | ![Screen_Shot_2019-09-03_at_11.56.01_AM](/uploads/044ed613944b2ccdaa5e0933a7242cb5/Screen_Shot_2019-09-03_at_11.56.01_AM.png) | ![Screen_Shot_2019-09-03_at_11.57.58_AM](/uploads/2c14d728e3babf354a027051bbfe2a3d/Screen_Shot_2019-09-03_at_11.57.58_AM.png) |\n\n### Sign in vs Register (with pre-existing GitLab.com account)\n\n| Step 1 | Step 2 | Step 3 | Step 4 | \n| ------ | ------ | ------ | ------ | \n| ![Screen_Shot_2019-09-03_at_11.53.28_AM](/uploads/54933af8018a4610ef38b229c921438e/Screen_Shot_2019-09-03_at_11.53.28_AM.png) | ![Screen_Shot_2019-09-03_at_11.53.44_AM](/uploads/3f9a3c71e16882ea4d5967206345df6c/Screen_Shot_2019-09-03_at_11.53.44_AM.png) | ![Screen_Shot_2019-09-03_at_11.54.29_AM](/uploads/9979a3e616e72eec94bcb8c1ee299923/Screen_Shot_2019-09-03_at_11.54.29_AM.png) | ![Screen_Shot_2019-09-03_at_12.10.36_PM](/uploads/b98d8960ce2c933ac7f8bb9db8e22f63/Screen_Shot_2019-09-03_at_12.10.36_PM.png) | \n\n### Register vs Sign in\n\nNote: This will likely be the most common route for self-managed customers. It's not clear where self-managed customers enter from as returning customers other than about.gitlab.com/pricing, which is more geared towards new customers. We don't seem to prioritise repeat customers.\n\n| Step 1 | Step 2 | Step 3 | Step 4 | Step 5 | Step 6 | Step 7 | Step 8 |\n| ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |\n| ![Screen_Shot_2019-09-03_at_11.53.28_AM](/uploads/54933af8018a4610ef38b229c921438e/Screen_Shot_2019-09-03_at_11.53.28_AM.png) | ![Screen_Shot_2019-09-03_at_11.53.44_AM](/uploads/3f9a3c71e16882ea4d5967206345df6c/Screen_Shot_2019-09-03_at_11.53.44_AM.png) | ![Screen_Shot_2019-09-03_at_12.07.53_PM](/uploads/ed4293c560a33113803743e90c56763e/Screen_Shot_2019-09-03_at_12.07.53_PM.png) | ![Screen_Shot_2019-09-03_at_12.02.51_PM](/uploads/9950de61a89ad5624503c0c9114d5b57/Screen_Shot_2019-09-03_at_12.02.51_PM.png) | ![Screen_Shot_2019-09-03_at_12.03.56_PM](/uploads/9f89a377f1b464029811d41910380b61/Screen_Shot_2019-09-03_at_12.03.56_PM.png) | ![Screen_Shot_2019-09-03_at_12.04.58_PM](/uploads/43987d731279c5cc21552f93614860cd/Screen_Shot_2019-09-03_at_12.04.58_PM.png) | ![Screen_Shot_2019-09-03_at_12.05.57_PM](/uploads/a91c0b08047cabc6316eaee58d9cf892/Screen_Shot_2019-09-03_at_12.05.57_PM.png) | ![Screen_Shot_2019-09-03_at_12.07.10_PM](/uploads/f51517eb800f2f6505fffd1fd1c1f966/Screen_Shot_2019-09-03_at_12.07.10_PM.png)| \n\n# Proposal\n\nMake the following things clear very early in the purchase process for new customers:\n\n1. That they have been routed to a new place to make a purchase that may require you to login to a new service.\n2. Why they have been routed there\n3. What the portal is and what it's used for\n4. Make it easy for them to contact sales if they need to?\n5. Further suggestions welcome...\n\n# Result\n\nA clearer and more efficient user experience in the meantime as we work on https://gitlab.com/gitlab-org/gitlab/issues/31472 and other larger improvements.\n\n# Metrics\n\n1. Purchases made via the portal\n2. Can we track how folks are using the portal today and compare? Google Analytics or something on the portal to show user behaviour while we wait for Pendo?\n\ncc @mkarampalas @s_awezec @esybrant @timnoah","state":"closed","created_at":"2019-09-03T17:23:01.100Z","updated_at":"2020-10-06T13:59:50.571Z","closed_at":"2019-11-02T00:04:41.055Z","closed_by":{"id":1903246,"username":"tipyn","name":"Luca Kisielius","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1903246/avatar.png","web_url":"https://gitlab.com/tipyn"},"labels":["Deliverable","UX","[deprecated] 🍎","devops::fulfillment","direction","frontend","gitlab.com","group::purchase","missed-deliverable","missed:12.4","priority::2","section::fulfillment","wontfix","workflow::blocked"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"}],"author":{"id":1903246,"username":"tipyn","name":"Luca Kisielius","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1903246/avatar.png","web_url":"https://gitlab.com/tipyn"},"type":"ISSUE","assignee":{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"},"user_notes_count":33,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14709","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14709","notes":"https://gitlab.com/api/v4/projects/278964/issues/14709/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14709/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14709","relative":"#14709","full":"gitlab-org/gitlab#14709"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1835,"epic":{"id":11595,"iid":1835,"title":"MVC Purchase Improvements","url":"/groups/gitlab-org/-/epics/1835","group_id":9970,"human_readable_end_date":"Nov 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24432331,"iid":14708,"project_id":278964,"title":"License Compliance Approvals in Merge Request MVC - refresh license approval checks when a compliance rules change after a merge request is opened.","description":"Sub issue for https://gitlab.com/gitlab-org/gitlab-ee/issues/13067\n\nImplementation Plan:\n\n* [x] refresh license approval when a new blacklisted license is added after a merge request is opened. `SoftwareLicensePolicies::CreateService`\n* [x] refresh license approval when a license is removed from the blacklist after a merge request is opened.\n* [x] refresh license approval when a blacklisted license is edited and becomes approved after a merge request is opened. `SoftwareLicensePolicies::UpdateService`\n* [x] refresh license approval rule when a `License-Check` approval rule is created after a merge request was opened.","state":"closed","created_at":"2019-09-03T17:04:53.870Z","updated_at":"2019-10-01T18:43:15.456Z","closed_at":"2019-09-23T20:25:44.487Z","closed_by":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"labels":["Category:License Compliance","backend","devops::secure","group::composition analysis","sub-issue","type::feature","workflow::production"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"}],"author":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"type":"ISSUE","assignee":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14708","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14708","notes":"https://gitlab.com/api/v4/projects/278964/issues/14708/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14708/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14708","relative":"#14708","full":"gitlab-org/gitlab#14708"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24430851,"iid":14707,"project_id":278964,"title":"WAF statistics reporting","description":"### Problem to solve\n\n\u003c!-- What problem do we solve? --\u003e\nUsers who have enabled the WAF do not easily know what the WAF is blocking, allowing, or how much traffic it processes. This lack of visibility means it is more difficult to determine how to configure, tune, and evaluate the WAF.\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\nPersonas can be found at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\n1. Users will view this after initially creating a cluster and installing the WAF, to confirm they are seeing traffic\n1. Security team members will view this to see what the distribution of blocked vs. allowed traffic is\n\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\nReporting statistics and information about the WAF's behavior could be a very deep experience if we invested a lot of time in it. For this iteration, I'd like us to view it as an MVC and find a way to provide visibility with a minimal amount of product changes. Then we can get feedback on what is useful or missing and then build out a deeper experience in future iterations.\n\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\n#### Minimal \nDisplay to users with the WAF how frequently the WAF:\n1. Identifies Anomalous traffic\n1. Identifies Total amount of traffic\n\nDefault time frame is 30 days.\n\n* - [ ] Proposal that we put this in the security tab as a set of text boxes, similar to how we have # of vulns in the security dashboard. Would like input from others on this.\n\n#### Next steps\n1. Table with detailed event listings\n1. View raw logs themselves in the pod logs\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)? --\u003e\nUsers should be required to have the same permissions as they would for the security dashboard to view.\n\n\u003c!-- ### Documentation --\u003e\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements --\u003e\n\n\u003c!-- ### Testing --\u003e\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n1. Of all users who have the WAF installed, at least 75% view the provided information at least once within 30 days.\n2. Of all users who have the WAF installed, at least 90% view the provided information within 90 days.\n\n* This demonstrates that the users who are using the WAF actually are looking at the results and not just installing it and ignoring it.\n\n### Documentation\n1. Explain how to access the statistics.\n1. Explain what the statistics are showing.\n1. Explain what different results could be indicating.\n\n### What is the type of buyer? \n\n\u003c!-- Which leads to: in which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\n~\"GitLab Ultimate\" \n\n### Links / references\n1. [Documentation link to how to view WAF logs](https://docs.gitlab.com/ee/user/clusters/applications.html#modsecurity-application-firewall)\n\n/label ~feature\n\n### Implementation Plan\n\n#### Status\n\n - [x] ~backend Add logging sidecar to expose modsec logs to ElasticSearch !19600 \n - [x] ~frontend Add Threat Monitoring skeleton page !19074, !20910 \n - [x] ~frontend Add filter bar and associated store updates !21689\n - [x] ~frontend Persist alert dismissal !22117\n - [x] ~backend Add WAF anomaly summary endpoint https://gitlab.com/gitlab-org/gitlab/merge_requests/22736\n - [x] ~backend Enable filebeat prospector to parse modsec logs as JSON https://gitlab.com/gitlab-org/gitlab/-/merge_requests/24836\n - [x] ~backend Add WAF anomaly summary service - modsec aggregate query https://gitlab.com/gitlab-org/gitlab/-/merge_requests/24837\n - [x] ~backend Add WAF anomaly summary service - nginx aggregate query https://gitlab.com/gitlab-org/gitlab/-/merge_requests/25273\n - [x] ~backend Pass nginx request_id to modsecurity to correlate ingresses to transaction logs https://gitlab.com/gitlab-org/charts/auto-deploy-app/merge_requests/36\n - [x] ~frontend Fetch and render anomaly summary within GitLab UI !21916 \n - [x] ~frontend Add \"Show last\" filter dropdown https://gitlab.com/gitlab-org/gitlab/merge_requests/22487\n - [x] ~frontend Align UI to latest designs (alert variant/copy, popover in header) (partially done in !21689, !21916)\n - [x] ~frontend Handle 204s (polling) and 404s (no data) from backend !22778\n - [x] ~documentation Add docs for new page, and enable feature by default !22911, including limitation around CI-based ES installations\n\n#### Decisions\n\n - Show only `Anomalous traffic`. Do not differentiate blocking vs logging https://gitlab.com/gitlab-org/gitlab/issues/14707#note_258358254\n\n#### Final Designs\nSee Designs tab","state":"closed","created_at":"2019-09-03T16:13:08.844Z","updated_at":"2021-04-03T08:33:51.916Z","closed_at":"2020-03-18T00:32:20.537Z","closed_by":{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"},"labels":["Category:WAF","Deliverable","GitLab Ultimate","UI text","UX","backend","devops::govern","direction","documentation","frontend","group::security policies","missed-deliverable","missed:12.5","missed:12.6","missed:12.7","missed:12.8","type::feature","workflow::verification"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"},{"id":553096,"username":"markrian","name":"Mark Florian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/553096/avatar.png","web_url":"https://gitlab.com/markrian"},{"id":4415483,"username":"beckalippert","name":"Becka Lippert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4415483/avatar.png","web_url":"https://gitlab.com/beckalippert"}],"author":{"id":4376883,"username":"stkerr","name":"Sam Kerr","state":"active","avatar_url":"https://secure.gravatar.com/avatar/591c8b969464f7b4fb97b6f2f654f11a?s=80\u0026d=identicon","web_url":"https://gitlab.com/stkerr"},"type":"ISSUE","assignee":{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"},"user_notes_count":141,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14707","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":15,"completed_count":14},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"14 of 15 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14707","notes":"https://gitlab.com/api/v4/projects/278964/issues/14707/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14707/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14707","relative":"#14707","full":"gitlab-org/gitlab#14707"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1650,"epic":{"id":10124,"iid":1650,"title":"Web Application Firewall - Minimal to Viable","url":"/groups/gitlab-org/-/epics/1650","group_id":9970,"human_readable_end_date":"Jul 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24430199,"iid":14705,"project_id":278964,"title":"Dependency List is not up-to-date - backend","description":"Backend issue for https://gitlab.com/gitlab-org/gitlab-ee/issues/12190\n\n**Proposal**\n\n~backend will return new `report.generated_at`. It will be timestamp from the database, so it will be in UTC in the ​format \"2019-09-03T15:48:20.597Z\".","state":"closed","created_at":"2019-09-03T15:50:24.872Z","updated_at":"2019-10-18T12:23:15.274Z","closed_at":"2019-10-03T12:48:29.197Z","closed_by":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"labels":["Deliverable","Enterprise Edition","backend","dependency list","devops::secure","group::composition analysis","sub-issue","type::feature","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"}],"author":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"type":"ISSUE","assignee":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"user_notes_count":2,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14705","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14705","notes":"https://gitlab.com/api/v4/projects/278964/issues/14705/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14705/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14705","relative":"#14705","full":"gitlab-org/gitlab#14705"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24427830,"iid":14701,"project_id":278964,"title":"[BE] Code Hotspots: Re-factor timeframe validation","description":"Discovery Issue: https://gitlab.com/gitlab-org/gitlab-ee/issues/12683\n\nThis is a follow-up from an MR review comment: https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14719#note_203753264\n\nThe timeframe selection for user could evolve later. It might be easier to use `Xdays` and re-use code from Productivity Analytics. The idea is to re-factor this separately from the above MR.","state":"closed","created_at":"2019-09-03T14:38:06.133Z","updated_at":"2019-09-18T10:05:55.296Z","closed_at":"2019-09-18T09:40:59.474Z","closed_by":{"id":4158075,"username":"aakriti.gupta","name":"Aakriti Gupta","state":"active","avatar_url":"https://secure.gravatar.com/avatar/992a080bc7d9f8c22ff7186db1c76dbd?s=80\u0026d=identicon","web_url":"https://gitlab.com/aakriti.gupta"},"labels":["Category:Code Analytics","Enterprise Edition","GitLab Premium","analytics","backend","devops::manage","group::optimize","mr refactor","workflow::ready for development"],"milestone":null,"assignees":[{"id":4158075,"username":"aakriti.gupta","name":"Aakriti Gupta","state":"active","avatar_url":"https://secure.gravatar.com/avatar/992a080bc7d9f8c22ff7186db1c76dbd?s=80\u0026d=identicon","web_url":"https://gitlab.com/aakriti.gupta"}],"author":{"id":4158075,"username":"aakriti.gupta","name":"Aakriti Gupta","state":"active","avatar_url":"https://secure.gravatar.com/avatar/992a080bc7d9f8c22ff7186db1c76dbd?s=80\u0026d=identicon","web_url":"https://gitlab.com/aakriti.gupta"},"type":"ISSUE","assignee":{"id":4158075,"username":"aakriti.gupta","name":"Aakriti Gupta","state":"active","avatar_url":"https://secure.gravatar.com/avatar/992a080bc7d9f8c22ff7186db1c76dbd?s=80\u0026d=identicon","web_url":"https://gitlab.com/aakriti.gupta"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14701","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14701","notes":"https://gitlab.com/api/v4/projects/278964/issues/14701/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14701/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14701","relative":"#14701","full":"gitlab-org/gitlab#14701"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24727265,"iid":31536,"project_id":278964,"title":"stored xss via group name and user full name","description":"**[HackerOne report #686795](https://hackerone.com/reports/686795)** by `constructor2019` on 2019-09-03, assigned to `gitlab_cmaxim`:\n\nHi There,\n\n### Summary\n\nI found Stored XSS via group name \u0026 user full name  in issues pages.\n\n=================================\n\n### Steps to reproduce\n\n(Step-by-step guide to reproduce the issue, including:)\n\n(1. login to your gitlab account and change your full name to this payload:  \n`\"\u003e\u003cimg src=x onerror=alert(87)\u003e \"\u0026gt;\u0026lt;img src=x onerror=alert(1)\u0026gt;`\n\nLike this:  \n![Ashampoo_Snap_2019.09.03_12h02m48s_004_.png](https://h1.sec.gitlab.net/a/cfdcfd76-6cd8-43b7-98a5-3bb1d8f72d20/Ashampoo_Snap_2019.09.03_12h02m48s_004_.png)\n\n-------------\n\n(2. The create a new group with name as payload:  \n`vvvvvvvvv\"\u003e\u003cimg src=x onerror=alert(5434)\u003e`\n\nLike this:  \n![Ashampoo_Snap_2019.09.03_12h03m29s_005_.png](https://h1.sec.gitlab.net/a/3a01a3ba-2567-4504-b287-44abf0f0667d/Ashampoo_Snap_2019.09.03_12h03m29s_005_.png)\n\n-------------------------\n\n(3. Open your project and Start a new issue\n\n----------------------------\n\n(4. Assign labels to the issue  \n![Ashampoo_Snap_2019.09.03_12h25m24s_007_.png](https://h1.sec.gitlab.net/a/311da716-2108-487a-b786-ec81c95d42ef/Ashampoo_Snap_2019.09.03_12h25m24s_007_.png)\n\n--------------------------------\n\n(5.Then move the issue to group that we start it in the step 2  \n![Ashampoo_Snap_2019.09.03_12h25m52s_008_.png](https://h1.sec.gitlab.net/a/b56576e3-7b6b-4a87-92d1-7f2598f8ec03/Ashampoo_Snap_2019.09.03_12h25m52s_008_.png)\n\n-----------------------------------\n\n(6. reload your page and you will get alert message from group name \u0026 user full name  in issues page\n\nA-Alert message come's out from the user full name  \n![Ashampoo_Snap_2019.09.03_12h01m12s_001_.png](https://h1.sec.gitlab.net/a/77e01253-1c0c-43b1-9c18-bd2a4d27faea/Ashampoo_Snap_2019.09.03_12h01m12s_001_.png)\n\nB-Alert message come's our from group name  \n![Ashampoo_Snap_2019.09.03_12h02m16s_003_.png](https://h1.sec.gitlab.net/a/87ff8206-0e5d-4634-9c0a-1c9b5f2ce0d2/Ashampoo_Snap_2019.09.03_12h02m16s_003_.png)\n\n----------------------------------\n\n\n\n### Impact\n\nThe attacker can use this issue to execute malicious script code in the victim user browser\n\nTested on:  \nGoogle Chrome Version 76.0.3809.100 (Official Build) (64-bit)\n\n### Examples\n\nI have create account with a poc to see this issue:  \nsite: https://gitlab.com  \nemail: bana2313@gmail.com  \npassword: hackeronegitlab\n\nafter login please open this site:\n\nPOC:  \nA-Alert message come's our from group name  \nhttps://gitlab.com/test12344321/dfsfdfsdfsdfsdfsdfdsf/issues/5\n\nB- Alert message come's out from the user full name  \nhttps://gitlab.com/vvvvrrrr434vvvvv/5555/issues/8\n\nNote: i can see you the issue via above links without login but i have created a private group in order to keep this stored xss issue private.\n\n\n### What is the current *bug* behavior?\n\nstored xss happen after adding the label name to the issue and move the issue to group alert message show up form unfiltered group name and user full name as we see in the photos above in the steps.\n\nThe place of the issue right here:  \n![Ashampoo_Snap_2019.09.03_12h17m13s_006_.png](https://h1.sec.gitlab.net/a/43a82810-7cd0-45bb-bfbc-86eccb6dac4e/Ashampoo_Snap_2019.09.03_12h17m13s_006_.png)\n\n### What is the expected *correct* behavior?\n\nthe group name and user full name should be filtered in issues activity comment.\n\n## Impact\n\nStored xss for every gitlab users who open the attacker page issue.\n\n## Attachments\n**Warning:** Attachments received through HackerOne, please exercise caution!\n* [Ashampoo_Snap_2019.09.03_12h01m12s_001_.png](https://h1.sec.gitlab.net/a/77e01253-1c0c-43b1-9c18-bd2a4d27faea/Ashampoo_Snap_2019.09.03_12h01m12s_001_.png)\n* [Ashampoo_Snap_2019.09.03_12h02m16s_003_.png](https://h1.sec.gitlab.net/a/87ff8206-0e5d-4634-9c0a-1c9b5f2ce0d2/Ashampoo_Snap_2019.09.03_12h02m16s_003_.png)\n* [Ashampoo_Snap_2019.09.03_12h02m48s_004_.png](https://h1.sec.gitlab.net/a/cfdcfd76-6cd8-43b7-98a5-3bb1d8f72d20/Ashampoo_Snap_2019.09.03_12h02m48s_004_.png)\n* [Ashampoo_Snap_2019.09.03_12h03m29s_005_.png](https://h1.sec.gitlab.net/a/3a01a3ba-2567-4504-b287-44abf0f0667d/Ashampoo_Snap_2019.09.03_12h03m29s_005_.png)\n* [Ashampoo_Snap_2019.09.03_12h17m13s_006_.png](https://h1.sec.gitlab.net/a/43a82810-7cd0-45bb-bfbc-86eccb6dac4e/Ashampoo_Snap_2019.09.03_12h17m13s_006_.png)\n* [Ashampoo_Snap_2019.09.03_12h25m52s_008_.png](https://h1.sec.gitlab.net/a/b56576e3-7b6b-4a87-92d1-7f2598f8ec03/Ashampoo_Snap_2019.09.03_12h25m52s_008_.png)\n* [Ashampoo_Snap_2019.09.03_12h25m24s_007_.png](https://h1.sec.gitlab.net/a/311da716-2108-487a-b786-ec81c95d42ef/Ashampoo_Snap_2019.09.03_12h25m24s_007_.png)\n\n## Links\n\nDev issue: https://dev.gitlab.org/gitlab/gitlabhq/issues/2941","state":"closed","created_at":"2019-09-03T13:42:43.873Z","updated_at":"2020-01-30T22:18:23.266Z","closed_at":"2019-11-27T22:33:22.175Z","closed_by":{"id":4226366,"username":"ankelly","name":"Andrew Kelly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4226366/avatar.png","web_url":"https://gitlab.com/ankelly"},"labels":["Deliverable","HackerOne","backend","devops::plan","group::project management","priority::2","security","severity::2","workflow::in review"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-11-28","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31536","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31536","notes":"https://gitlab.com/api/v4/projects/278964/issues/31536/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31536/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31536","relative":"#31536","full":"gitlab-org/gitlab#31536"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24424854,"iid":14698,"project_id":278964,"title":"Duplicated strings in gitlab.pot","description":"[gitlab.pot#L8404](locale/gitlab.pot#L8404) seems to be a duplicate of [gitlab.pot#L8413](locale/gitlab.pot#L8413) and should be deleted accordingly.\n\nBased on [this search](https://gitlab.com/search?utf8=%E2%9C%93\u0026snippets=\u0026scope=\u0026repository_ref=master\u0026search=IssuesAnalytics+%7C+Issues+created\u0026project_id=278964)","state":"closed","created_at":"2019-09-03T13:38:57.815Z","updated_at":"2019-09-04T15:15:17.262Z","closed_at":"2019-09-04T15:15:17.208Z","closed_by":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"labels":["Category:Internationalization","Quality","backstage [DEPRECATED]","frontend","severity::4","type::bug"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":3628882,"username":"Tobi406","name":"Tobias","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3628882/avatar.png","web_url":"https://gitlab.com/Tobi406"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":3,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14698","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14698","notes":"https://gitlab.com/api/v4/projects/278964/issues/14698/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14698/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14698","relative":"#14698","full":"gitlab-org/gitlab#14698"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24727255,"iid":31528,"project_id":278964,"title":"500 is raised on pipelines/charts due to query timeout","description":"### Summary\n\n/gitlab-org/gitlab-ce/pipelines/charts pages causes `500` to be raised due to\n\n```\nActiveRecord::QueryCanceled: PG::QueryCanceled: ERROR: canceling statement due to statement timeout :\n\nSELECT COUNT(\"ci_pipelines\".\"created_at\") AS count_created_at, DATE(ci_pipelines.created_at) AS date_ci_pipelines_created_at \nFROM \"ci_pipelines\" WHERE \"ci_pipelines\".\"project_id\" = 13083 AND ('2019-09-03 23:59:59.999999' \u003e ci_pipelines.created_at AND \nci_pipelines.created_at \u003e '2019-08-27 00:00:00') GROUP BY DATE(ci_pipelines.created_at)\n```\n\nThe query indeed seems ineffective:\n\nQuery Plan:\nhttps://explain.depesz.com/s/Vtb2\n\n### Steps to reproduce\n\nVisit https://gitlab.com/gitlab-org/gitlab-ce/pipelines/charts multiple times, the error is raised from time to time\n\n### Proposal\n\nThere are two database query triggered by [`Gitlab::Ci::Charts::YearChart.new(project)`](https://gitlab.com/gitlab-org/gitlab/-/blob/20c4464c75eb9e2426aeefc24f7e27e5fa088ac0/app/controllers/projects/pipelines_controller.rb#L171):\n- [`totals_count  = grouped_count(query)`](https://gitlab.com/gitlab-org/gitlab/-/blob/20c4464c75eb9e2426aeefc24f7e27e5fa088ac0/lib/gitlab/ci/charts.rb#L54)   SQL query and plan: https://explain.depesz.com/s/qlab\n- [`success_count = grouped_count(query.success)`](https://gitlab.com/gitlab-org/gitlab/-/blob/20c4464c75eb9e2426aeefc24f7e27e5fa088ac0/lib/gitlab/ci/charts.rb#L55) SQL query and plan: https://explain.depesz.com/s/knyC\n\n```plaintext\nSummary:\nTime: 3.373 min\n  - planning: 0.297 ms\n  - execution: 3.373 min\n    - I/O read: 3.338 min\n    - I/O write: 0.000 ms\n\nShared buffers:\n  - hits: 14050 (~109.80 MiB) from the buffer pool\n  - reads: 160734 (~1.20 GiB) from the OS file cache, including disk I/O\n  - dirtied: 289 (~2.30 MiB)\n  - writes: 0\n```\n\nBoth of them use the index added in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/38226, but the execution for the second one is quite bad.\n\nA possible two step solution:\n\n- Include the `status` column in the [`index_ci_pipelines_on_project_id_and_created_at`](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/38226/diffs) index, like `add_concurrent_index :ci_pipelines, [:project_id, :created_at, :status]`. This should speed up the second query.\n- Split the date range and query the data monthly. This might have a bit higher execution time, it's unlikely that we hit the `statement_timeout`.\n\n### Example Project\n\nhttps://gitlab.com/gitlab-org/gitlab-ce/pipelines/charts\n\n### What is the current *bug* behavior?\n\nRaises `500` from time to time\n\n### What is the expected *correct* behavior?\n\nThe page is responsive all the time","state":"closed","created_at":"2019-09-03T12:02:40.667Z","updated_at":"2020-11-18T07:10:01.498Z","closed_at":"2020-11-12T19:04:00.955Z","closed_by":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"labels":["Category:Continuous Integration","Deliverable","backend","bug::performance","devops::verify","gitlab.com","group::pipeline execution","internal customer","missed-SLO","missed-deliverable","missed:13.5","missed:13.6","pipeline analytics","priority::2","section::ops","severity::2","type::bug","workflow::verification"],"milestone":{"id":1233755,"iid":53,"group_id":9970,"title":"13.6","description":"https://about.gitlab.com/releases/2020/11/22/gitlab-13-6-released/","state":"closed","created_at":"2020-04-09T17:39:22.328Z","updated_at":"2022-04-13T14:51:04.376Z","due_date":"2020-11-17","start_date":"2020-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/53"},"assignees":[{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"}],"author":{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"},"type":"ISSUE","assignee":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"user_notes_count":48,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31528","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31528","notes":"https://gitlab.com/api/v4/projects/278964/issues/31528/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31528/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31528","relative":"#31528","full":"gitlab-org/gitlab#31528"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"needs_attention"},{"id":24420260,"iid":14697,"project_id":278964,"title":"Convert package registry file table and rows into dedicated components","description":"As per the !15574 MR, it was suggested that the package registry file table and rows be converted into dedicated components. This will benefit the reworking on this page and feed into #8248.","state":"closed","created_at":"2019-09-03T11:45:55.231Z","updated_at":"2019-09-20T12:13:24.414Z","closed_at":"2019-09-20T12:13:24.379Z","closed_by":{"id":1149402,"username":"timzallmann","name":"Tim Zallmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1149402/avatar.png","web_url":"https://gitlab.com/timzallmann"},"labels":["Category:Package Registry","UX","backstage [DEPRECATED]","devops::package","frontend","group::package registry"],"milestone":null,"assignees":[{"id":4087042,"username":"nkipling","name":"Nick Kipling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087042/avatar.png","web_url":"https://gitlab.com/nkipling"}],"author":{"id":4087042,"username":"nkipling","name":"Nick Kipling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087042/avatar.png","web_url":"https://gitlab.com/nkipling"},"type":"ISSUE","assignee":{"id":4087042,"username":"nkipling","name":"Nick Kipling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087042/avatar.png","web_url":"https://gitlab.com/nkipling"},"user_notes_count":2,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14697","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14697","notes":"https://gitlab.com/api/v4/projects/278964/issues/14697/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14697/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14697","relative":"#14697","full":"gitlab-org/gitlab#14697"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24727251,"iid":31526,"project_id":278964,"title":"A job with needs keyword is run even if needed job is skipped","description":"### Summary\n\nWhen using the keyword `needs`, a skipped job trigger execution of those which need it.\n\n### Steps to reproduce\n\nUse the following CI configuration:\n\n```yaml\nstages:\n  - check\n  - build\n  - test\n\nlint:\n  stage: check\n  script:\n    - echo \"static check on code\"\n    - exit 1\n\ndocker_ci_image:\n  stage: build\n  script:\n    - echo \"build \u0026 push docker image\"\n\nunittest:\n  stage: test\n  script:\n    - echo \"run test using docker image\"\n  needs:\n    - docker_ci_image\n```\n\nIn a general way, it happen if a job in a previous stage of a needed one fail, leading it to be marked as skipped.\n\n### Example Project\n\nhttps://gitlab.com/Tassatux/ci-test\n\nAn example of failing pipeline: https://gitlab.com/Tassatux/ci-test/pipelines/79899004\n\n### What is the current *bug* behavior?\n\nWhen a job mentioned with `needs` keyword is skipped (`docker_ci_image` in previous example) due to a previous failing stage for instance, all jobs that need it are run.\n\n### What is the expected *correct* behavior?\n\nJobs that need the skipped one (`unittest` in previous example) should be skipped too, as they will in traditional stage-based pipeline.\n\n### Relevant logs and/or screenshots\n\n![image](/uploads/1b296525632782d999d620f94ef9b4af/image.png)\n\n\n![image](/uploads/b4aebb7e782058e06b789c2685235b8b/image.png)\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n\n\n----\n\nI'm not sure this should be considered as a bug, but it's the behavior I excepted when reading the DAG documentation.\n\nThere no really a big impact on my use case, as the Docker image I except in later jobs didn't exist so the job fail early, I have multiple failed jobs instead of one and others skipped in classical pipeline.","state":"closed","created_at":"2019-09-03T09:31:20.270Z","updated_at":"2022-11-28T15:03:33.199Z","closed_at":"2020-02-18T08:43:03.261Z","closed_by":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"labels":["Category:Continuous Integration","UX","Verify::P1","backend","customer","devops::verify","group::pipeline execution","internal customer","missed-SLO","pipeline","popular proposal","priority::2","severity::2","type::bug","workflow::production"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":90128,"username":"Tassatux","name":"Aurélien Dunand","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/90128/avatar.png","web_url":"https://gitlab.com/Tassatux"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":47,"merge_requests_count":1,"upvotes":99,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31526","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31526","notes":"https://gitlab.com/api/v4/projects/278964/issues/31526/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31526/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31526","relative":"#31526","full":"gitlab-org/gitlab#31526"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24727250,"iid":31525,"project_id":278964,"title":"Group Maintainers can Update/Delete group runners using API","description":"**[HackerOne report #685239](https://hackerone.com/reports/685239)** by `ashish_r_padelkar` on 2019-08-30, assigned to `jmatos_bgtvf`:\n\n### Summary  \nHello,\n\nThis report #566515 is fixed but there are couple of endpoints in API which allows Group Maintainers to update and even delete the group runners.\n\n### Steps to reproduce\n\n1. As a group maintainer, obtain your personal access token  \n2. Run the following API endpoints to update/delete\n\n\n**Update**  \n```  \ncurl --request PUT --header \"PRIVATE-TOKEN: \u003cYourTokenHere\u003e\" \"https://gitlab.com/api/v4/runners/\u003cGroupRunnerID\u003e\" --form \"description=test-1-20150125-test\" --form \"tag_list=ruby,mysql,tag1,tag2\"  \n```\n\n**Delete**\n\n```  \ncurl --request DELETE --header \"PRIVATE-TOKEN: \u003cYourTokenHere\u003e\" \"https://gitlab.com/api/v4/runners/\u003cGroupRunnerID\u003e\" --form \"description=test-1-20150125-test\" --form \"tag_list=ruby,mysql,tag1,tag2\"  \n```\n\n`GroupRunnerID` can be easily obtained using projects ci/cd settings where ID is displayed in UI\n\n\n### What is the current *bug* behavior?\n\nGroup  Maintainers are allowed  to update/delete group runners using API\n\n### What is the expected *correct* behavior?  \nGroup Maintainers should not be able to do this \n\n\n\n### Output of checks\n\n This bug happens on GitLab.com and possibly on omnibus installations too\n\nRegards,  \nAshish\n\n## Impact\n\nGroup Maintainers are allowed to update/delete group runners using API","state":"closed","created_at":"2019-09-03T09:12:30.297Z","updated_at":"2021-09-22T18:18:33.795Z","closed_at":"2020-01-02T16:45:00.692Z","closed_by":{"id":5054702,"username":"vdesousa","name":"Vitor Meireles De Sousa","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f44d19f10d5b0c54a02e79c13812ff77?s=80\u0026d=identicon","web_url":"https://gitlab.com/vdesousa"},"labels":["Category:Continuous Integration","HackerOne","backend","devops::verify","group::pipeline execution","priority::3","security","severity::3","workflow::ready for development"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":722076,"username":"matteeyah","name":"Matija Čupić","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8bc04cc15e0adba406cf56fecd9d910a?s=80\u0026d=identicon","web_url":"https://gitlab.com/matteeyah"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":722076,"username":"matteeyah","name":"Matija Čupić","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8bc04cc15e0adba406cf56fecd9d910a?s=80\u0026d=identicon","web_url":"https://gitlab.com/matteeyah"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-11-22","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31525","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31525","notes":"https://gitlab.com/api/v4/projects/278964/issues/31525/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31525/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31525","relative":"#31525","full":"gitlab-org/gitlab#31525"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24727244,"iid":31523,"project_id":278964,"title":"Wrong number of commits","description":"| 7 Commits | 6 Commits |\n|:------:|:------:|\n| ![image](/uploads/8465fc9db5b9976373095607c7e7da5f/image.png) | ![image](/uploads/147b63c5d05a673bddca60194d3dc5b2/image.png) |\n\n---\n\n| 4 Commits | 3 Commits |\n| ------ | ------ |\n| ![image](/uploads/a339e5a2cf54c8f659e9e97b2bf89b0a/image.png) | ![image](/uploads/e50b1de882be71f66efaa2cdf308eb7c/image.png) |","state":"closed","created_at":"2019-09-03T08:42:00.877Z","updated_at":"2022-12-05T03:05:57.619Z","closed_at":"2022-12-05T03:05:57.488Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"🤖 GitLab Bot 🤖","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["[deprecated] Accepting merge requests","auto closed","devops::create","group::source code","priority::3","repository","section::dev","severity::3","stale","type::bug","vintage"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":4198,"username":"lichao","name":"lichao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4198/avatar.png","web_url":"https://gitlab.com/lichao"},"type":"ISSUE","assignee":null,"user_notes_count":10,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31523","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31523","notes":"https://gitlab.com/api/v4/projects/278964/issues/31523/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31523/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31523","relative":"#31523","full":"gitlab-org/gitlab#31523"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24727240,"iid":31520,"project_id":278964,"title":"Remove method alias `parent`","description":"On some models we use `parent` convenient method to get either project or group where the resource belongs to. The problem is that `parent` name is not ideal because it clashes with `parent` attribute used for resources which use parent-child hierarchy (especially Epics).\n\nFor this reason https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/15649 added `resource_parent` name but kept method aliases for `parent` method. Instead of keeping this alias, we should rename `parent` calls to `resource_parent` calls.","state":"closed","created_at":"2019-09-03T07:48:23.648Z","updated_at":"2019-11-07T08:04:20.547Z","closed_at":"2019-11-07T08:04:20.491Z","closed_by":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"labels":["backend","devops::plan","group::product planning","maintenance::refactor","missed:12.3","missed:12.4","workflow::verification"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"}],"author":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"type":"ISSUE","assignee":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"user_notes_count":7,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31520","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31520","notes":"https://gitlab.com/api/v4/projects/278964/issues/31520/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31520/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31520","relative":"#31520","full":"gitlab-org/gitlab#31520"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24727230,"iid":31518,"project_id":278964,"title":"Use `delete_all` instead of `destroy` when deleting events","description":"The following discussion from gitlab-ee!15649 should be addressed:\n\n- [ ] @jprovaznik started a [discussion](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/15649#note_209151814): \n\n    \u003e In this case we can't rely on DB constraint and we have to add `dependent: ...` because it's a polymorphic association.\n    \u003e \n    \u003e Surprisingly other eventable resources use `dependent: :destroy` which I think is not necessary because we don't use any callbacks on Event model. So perhaps these should be changed to `delete_all` to in a follow-up.","state":"closed","created_at":"2019-09-03T07:40:16.512Z","updated_at":"2019-09-18T13:07:19.758Z","closed_at":"2019-09-18T13:07:19.660Z","closed_by":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"labels":["backend","bug::performance","devops::plan","maintenance::refactor","type::bug","workflow::in review"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"}],"author":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"type":"ISSUE","assignee":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31518","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31518","notes":"https://gitlab.com/api/v4/projects/278964/issues/31518/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31518/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31518","relative":"#31518","full":"gitlab-org/gitlab#31518"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24727213,"iid":31509,"project_id":278964,"title":"Rate limit email blast from Admin area","description":"### Summary\n\nAs per @manojmj's comment in https://gitlab.com/gitlab-org/manage/issues/62#note_206297931\n\nAdmins can send an email blast to users from the admin area. Currently, there are no limits to this. Although admins are assumed to be good actors, even with good intent, sending an email blast to a lot of users can hold up the job queues and cause delays in other jobs. Do you think this feature should also have rate-limiting?\n\n### Proposal\n\nRate limit the frequency of sending instance-wide emails from the admin panel (`/admin/email`). \n* I think this is UI only and there's no relevant GitLab API for this.\n\nProposed rate limit: 1x every 10 minutes.\n* Present an error banner to the user when this limit is violated, displaying the number of minutes remaining until they're able to send another blast.\n\n### Ideas\n\n* We could consider rate-limiting this action, preferably not on the number of emails, because there could be a genuine case to send emails to all users, but on the frequency of the action itself (as an example: email blasts can be sent by admin only once in 30 minutes, irrespective of the number of users)\n* If we decide we don't want to expose limits, we can still help the admin a lot - e.g. by showing a warning that such action might have adverse effects on instance performance.\n\nThe issue is marked as confidential as the lack of limits could *potentially* be abused.\n\n## Issue readiness\n\n* [x]  Product: issue description is accurate with an acceptable proposal for an MVC\n* [x]  Engineering: issue is implementable with few remaining questions, is sufficiently broken down, and is able to be estimated","state":"closed","created_at":"2019-09-02T15:58:06.315Z","updated_at":"2021-01-22T09:12:16.637Z","closed_at":"2020-05-13T16:46:07.628Z","closed_by":{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"},"labels":["Category:Authentication and Authorization","backend","bug::availability","bug::performance","devops::manage","group::authentication and authorization","priority::1","security","severity::2","type::feature"],"milestone":{"id":991112,"iid":42,"group_id":9970,"title":"13.0","description":"","state":"closed","created_at":"2019-09-04T15:20:39.024Z","updated_at":"2020-10-08T12:00:55.725Z","due_date":"2020-05-17","start_date":"2020-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/42"},"assignees":[{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"}],"author":{"id":2629166,"username":"lmcandrew","name":"Liam McAndrew","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5801f5e2fd21127836c0be61ec71f06b?s=80\u0026d=identicon","web_url":"https://gitlab.com/lmcandrew"},"type":"ISSUE","assignee":{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"},"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31509","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31509","notes":"https://gitlab.com/api/v4/projects/278964/issues/31509/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31509/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31509","relative":"#31509","full":"gitlab-org/gitlab#31509"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1748,"epic":{"id":10725,"iid":1748,"title":"Application limits: Manage","url":"/groups/gitlab-org/-/epics/1748","group_id":9970,"human_readable_end_date":"Nov 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24727194,"iid":31501,"project_id":278964,"title":"The absolute path for files uploaded sent through webhook gives me a 404.","description":"### Summary\n\n(Summarize the bug encountered concisely)\n\nThe absolute path for files uploaded sent through webhook gives me a 404. \n\n### Steps to reproduce\n\nSetup a webhook to a wiki edit. Upload an image to the wiki page. The url to the image sent in the webhook is not accessible. It returns a 404.\n\n### Example Project\n\nhttps://gitlab.com/charuru2009/public-test/wikis/test-uploads\n\n### What is the current *bug* behavior?\n\nPath returns 404.\n\n### What is the expected *correct* behavior?\n\nPath returns image.\n\nI would actually highly prefer if the path is not related to gitlab at all and instead gives me the url of the underlying s3 item.\n\n### Relevant logs and/or screenshots\n\nhttps://gitlab.com/charuru2009/public-test/wikis/test-uploads\n\nAdded by `@phikai`: Relevant Webhook body:\n\n```javascript\n{\n  \"object_kind\": \"wiki_page\",\n  \"user\": {\n    \"name\": \"Administrator\",\n    \"username\": \"root\",\n    \"avatar_url\": \"https://www.gravatar.com/avatar/e64c7d89f26bd1972efa854d13d7dd61?s=80\\u0026d=identicon\"\n  },\n  \"project\": {\n    \"id\":1,\n    \"name\":\"Gitlab Test\",\n    \"description\":\"Maxime repellendus rem quo odit molestias.\",\n    \"web_url\":\"http://localhost:3001/gitlab-org/gitlab-test\",\n    \"avatar_url\":null,\n    \"git_ssh_url\":\"ssh://phikai@localhost:2222/gitlab-org/gitlab-test.git\",\n    \"git_http_url\":\"http://localhost:3001/gitlab-org/gitlab-test.git\",\n    \"namespace\":\"Gitlab Org\",\n    \"visibility_level\":20,\n    \"path_with_namespace\":\"gitlab-org/gitlab-test\",\n    \"default_branch\":\"master\",\n    \"ci_config_path\":null,\n    \"homepage\":\"http://localhost:3001/gitlab-org/gitlab-test\",\n    \"url\":\"ssh://phikai@localhost:2222/gitlab-org/gitlab-test.git\",\n    \"ssh_url\":\"ssh://phikai@localhost:2222/gitlab-org/gitlab-test.git\",\n    \"http_url\":\"http://localhost:3001/gitlab-org/gitlab-test.git\"\n  },\n  \"wiki\":{\n    \"web_url\":\"http://localhost:3001/gitlab-org/gitlab-test/wikis/home\",\n    \"git_ssh_url\":\"ssh://phikai@localhost:2222/gitlab-org/gitlab-test.wiki.git\",\n    \"git_http_url\":\"http://localhost:3001/gitlab-org/gitlab-test.wiki.git\",\n    \"path_with_namespace\":\"gitlab-org/gitlab-test.wiki\",\n    \"default_branch\":\"master\"\n  },\n  \"object_attributes\": {\n    \"content\":\"![Screenshot_2019-09-10_08.15.05](http://localhost:3001/uploads/b62e8bd0ea964644cc365641b716f4b7/Screenshot_2019-09-10_08.15.05.png)\",\n    \"format\":\"markdown\",\n    \"message\":\"Create extra image page\",\n    \"title\":\"extra image page\",\n    \"slug\":\"extra-image-page\",\n    \"url\":\"http://localhost:3001/gitlab-org/gitlab-test/wikis/extra-image-page\",\n    \"action\":\"create\"\n  }\n}\n```\n\n### Output of checks\n\nThis bug happens on GitLab.com TOO.","state":"closed","created_at":"2019-09-02T12:31:54.417Z","updated_at":"2022-03-21T03:03:22.063Z","closed_at":"2022-03-21T03:03:22.044Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"🤖 GitLab Bot 🤖","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["Category:Wiki","[deprecated] Accepting merge requests","auto closed","backend","component:file-uploader","devops::create","group::editor","priority::3","section::dev","severity::3","stale","type::bug","vintage","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":257960,"username":"charuru2009","name":"Charuru Charuru","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b330a7a5152c451c712887a1c6a2a21e?s=80\u0026d=identicon","web_url":"https://gitlab.com/charuru2009"},"type":"ISSUE","assignee":null,"user_notes_count":18,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31501","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31501","notes":"https://gitlab.com/api/v4/projects/278964/issues/31501/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31501/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31501","relative":"#31501","full":"gitlab-org/gitlab#31501"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24379012,"iid":14673,"project_id":278964,"title":"Refactor all Design Management mutations to have `errors` field","description":"## Summary\n\nCurrently, in Design Management application we only handle top-level GraphQL errors. However, as discussed in https://gitlab.com/gitlab-org/gitlab-ee/issues/13375 and https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/31622 we should be able to handle errors while they're sent as data.\n\nThis requires adding an `errors` field to every single mutation and adding an error handler to components where mutations are called.\n\n## Improvements\n\nAs a result, we will be able to display recoverable mutations to user even when `data` is sent.","state":"closed","created_at":"2019-09-02T10:07:16.400Z","updated_at":"2020-12-10T18:59:59.813Z","closed_at":"2020-03-26T06:12:11.274Z","closed_by":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"labels":["Category:Design Management","GraphQL","backstage [DEPRECATED]","devops::plan","frontend","group::product planning","workflow::production"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"}],"author":{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"},"type":"ISSUE","assignee":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14673","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14673","notes":"https://gitlab.com/api/v4/projects/278964/issues/14673/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14673/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14673","relative":"#14673","full":"gitlab-org/gitlab#14673"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24376705,"iid":14672,"project_id":278964,"title":"[BE] Add feature flag check for code analytics","description":"Discovery Issue: https://gitlab.com/gitlab-org/gitlab-ee/issues/12683\n\nFeature flags introduced in https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/16102","state":"closed","created_at":"2019-09-02T09:01:11.956Z","updated_at":"2019-10-16T16:13:19.629Z","closed_at":"2019-10-16T16:13:19.567Z","closed_by":{"id":3511154,"username":"valexieva","name":"Virjinia Alexieva","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/bc036fa2e7b6fa926a175324a948169f?s=80\u0026d=identicon","web_url":"https://gitlab.com/valexieva"},"labels":["Category:Code Analytics","Enterprise Edition","GitLab Premium","analytics","backend","devops::manage","group::optimize","missed:12.3","type::feature","workflow::in review"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"}],"author":{"id":4158075,"username":"aakriti.gupta","name":"Aakriti Gupta","state":"active","avatar_url":"https://secure.gravatar.com/avatar/992a080bc7d9f8c22ff7186db1c76dbd?s=80\u0026d=identicon","web_url":"https://gitlab.com/aakriti.gupta"},"type":"ISSUE","assignee":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14672","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14672","notes":"https://gitlab.com/api/v4/projects/278964/issues/14672/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14672/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14672","relative":"#14672","full":"gitlab-org/gitlab#14672"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24375755,"iid":14671,"project_id":278964,"title":"Fix feature flag for cycle analytics / productivity analytics","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n(Summarize the bug encountered concisely)\n\nWe should have a feature flag for each feature we are releasing:\n\nProductivity analytics should be enabled by 'analytics' and 'productivity analytics'. Currently, enabling 'analytics', enables 'productivity analytics' and 'cycle analytics'. Because of that we cannot currently enable cycle analytics. This should be fixed so that the 2 features are independent and since we refer to this in the docs. This is fixed in the productivity analytics MR, but it has been in review for 4 weeks, so we need to ship the fix faster.\n\nLet's have an independent flag for 'productivity analytics' and another one for 'cycle analytics' on top of the 'analytics' workspace.\n\nhttps://docs.gitlab.com/ee/user/analytics/index.html\n\nhttps://gitlab.slack.com/archives/CBFCUM0RX/p1566207498239500\n\n### Steps to reproduce\n\n(How one can reproduce the issue - this is very important)\n\n### Example Project\n\n(If possible, please create an example project here on GitLab.com that exhibits the problematic behavior, and link to it here in the bug report)\n\n(If you are using an older version of GitLab, this will also determine whether the bug is fixed in a more recent version)\n\n### What is the current *bug* behavior?\n\n(What actually happens)\n\n### What is the expected *correct* behavior?\n\n(What you should see instead)\n\n### Relevant logs and/or screenshots\n\n(Paste any relevant logs - please use code blocks (```) to format console output,\nlogs, and code as it's tough to read otherwise.)\n\n### Output of checks\n\n(If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com)\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n(If you can, link to the line of code that might be responsible for the problem)","state":"closed","created_at":"2019-09-02T08:32:03.610Z","updated_at":"2020-03-02T22:28:37.970Z","closed_at":"2019-09-11T20:40:40.066Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["Enterprise Edition","GitLab Premium","Persona: Development Team Lead","analytics","backend","devops::manage","group::optimize","priority::1","type::bug","type::feature"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"}],"author":{"id":3511154,"username":"valexieva","name":"Virjinia Alexieva","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/bc036fa2e7b6fa926a175324a948169f?s=80\u0026d=identicon","web_url":"https://gitlab.com/valexieva"},"type":"ISSUE","assignee":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"user_notes_count":8,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14671","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14671","notes":"https://gitlab.com/api/v4/projects/278964/issues/14671/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14671/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14671","relative":"#14671","full":"gitlab-org/gitlab#14671"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24339519,"iid":14630,"project_id":278964,"title":"Make Gemnasium analyzer use gemnasium-db repo instead of Gemnasium API","description":"### Problem to solve\n\nGemnasium relies on a client/server architecture that has important limitations, operational costs, and maintenance costs. To summarize, this architecture makes it difficult and expensive to maintain the Gemnasium vulnerability database, and impossible to create a large number of new vulnerabilities - these are currently pending, and cannot be published. Though in theory it's possible to improve/fix the existing architecture to remove these blockers, the cost seems prohibitive. See https://gitlab.com/gitlab-org/gitlab-ee/issues/12930#further-details.\n\n### Intended users\n\n~\"group::composition analysis\" \n\n### Proposal\n\nMake the [Gemnasium Analyzer](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium) use the YAML files of the [gemnasium-db repository](https://gitlab.com/gitlab-org/security-products/gemnasium-db) instead of the API served on https://deps.sec.gitlab.com.\n\n[gemnasium-db](https://gitlab.com/gitlab-org/security-products/gemnasium-db) becomes the Single Source of Truth, and security advisories are published as soon as their YAML files are merged into the `master` branch of [gemnasium-db repository](https://gitlab.com/gitlab-org/security-products/gemnasium-db). The Gemnasium server (API, relational DB and services) is no longer needed.\n\nIn this new architecture, the [Gemnasium Analyzer](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium) evaluates the range of affected versions to tell if a dependency is affected: it extracts the [`affected_range`](https://gitlab.com/gitlab-org/security-products/gemnasium-db#yaml-schema) and check if the installed package version is in range, using [semver](https://gitlab.com/gitlab-org/security-products/gemnasium/semver) or any other tool to do that. It may delegate to a Ruby script to evaluate Rubygem versions, to a PHP script to evaluate PHP Composer versions, and so on.\n\nThe [gemnasium](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium) Docker image ships with a clone of [gemnasium-db](https://gitlab.com/gitlab-org/security-products/gemnasium-db); it's self-contained and can scan a project without Internet connection. In a way that's similar to bundler-audit, the Gemnasium CLI exposes a `--update` that triggers the update of the embedded [gemnasium-db](https://gitlab.com/gitlab-org/security-products/gemnasium-db), using git to do so. As a consequence, environment variable `DS_DISABLE_REMOTE_CHECKS` becomes irrelevant and should be deprecated.\n\nThe Secure reports generated by the Gemnasium analyzers no longer contain links to `https://deps.sec.gitlab.com`, but instead contain links to the YAML files of the gemnasium-db repo. The UUIDs are unchanged to avoid loosing user feedback on vulnerability (create issue or dismiss).\n  \nThe [dependency-scanning](https://gitlab.com/gitlab-org/security-products/dependency-scanning) project is unchanged.\n\n### Permissions and Security\n\nNo change.\n\n### Documentation\n\nupdate GitLab documentation https://gitlab.com/gitlab-org/gitlab/merge_requests/17577\n- remove [Remote checks](https://docs.gitlab.com/ee/user/application_security/dependency_scanning/index.html#remote-checks) section\n- remove `DS_DISABLE_REMOTE_CHECKS` from [Available variables](https://docs.gitlab.com/ee/user/application_security/dependency_scanning/index.html#available-variables)\n\nupdate gemnasium-db documentation https://gitlab.com/gitlab-org/security-products/gemnasium-db/merge_requests/102\n- update the [introduction](https://gitlab.com/gitlab-org/security-products/gemnasium-db#gemnasium-db) and remove `It's not the Gemnasium DB itself but can be considered as a single source of truth: this is where new advisories are submitted so it's always in sync with the Gemnasium DB.`\n- revisit the [publishing](https://gitlab.com/gitlab-org/security-products/gemnasium-db#publishing) section, even though we may eventually keep it the way it is\n- remove the `uuid` field from the [YAML schema](https://gitlab.com/gitlab-org/security-products/gemnasium-db#yaml-schema) and the [contributing guide](https://gitlab.com/gitlab-org/security-products/gemnasium-db/blob/master/CONTRIBUTING.md#contribute-a-yaml-file), or simply say that it's been deprecated\n- remove paragraph saying that [Gemnasium also performs checks](https://gitlab.com/gitlab-org/security-products/gemnasium-db/blob/master/CONTRIBUTING.md#contribute-a-yaml-file)\n\n### Testing\n\nNo change.\n\n### Implementation plan\n\n- [x] Update Gemnasium, all MRs are merged into [gemnasium!25](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium/merge_requests/25) once reviewed\n  - [x] Refactor code\n    https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium/merge_requests/27\n  - [x] Add package to manipulate gemnasium-db repo\n    https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium/merge_requests/28\n  - [x] Resolve affected range\n    https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium/merge_requests/31\n  - [x] Add gemnasium-db repo to Docker image\n  - [x] Release new version \n- [x] Update gemnasium-maven\n  https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-maven/merge_requests/15\n  - [x] Update gemnasium dependency and use new `scanner` package\n  - [x] Add gemnasium-db repo to Docker image\n  - [x] Add vrange compatible CLI\n  - [x] Release new version\n- [x] Update gemnasium-python\n  https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python/merge_requests/29\n  - [x] Update gemnasium dependency and use new `scanner` package\n  - [x] Add gemnasium-db repo to Docker image\n  - [x] Add vrange compatible CLI\n  - [x] Release new version\n- [x] Update documentation (ready but not merged)\n  - Remove \"remote checks\" from GitLab doc\n    https://gitlab.com/gitlab-org/gitlab/merge_requests/17577\n  - Remove Gemnasium Server from gemnasium-db doc\n    https://gitlab.com/gitlab-org/security-products/gemnasium-db/merge_requests/102\n\n### What does success look like, and how can we measure that?\n\n- Security advisories are published/updated as soon as their YAML are added to/updated in\n  [gemnasium-db](https://gitlab.com/gitlab-org/security-products/gemnasium-db).\n- Gemnasium is shipped as a self-contained Docker image that doesn't need Internet connection.\n- Gemnasium can be synced with [gemnasium-db](https://gitlab.com/gitlab-org/security-products/gemnasium-db)\n  at run-time, when running the `gemnasium` Docker image.\n\nThe following issues are solved and can be closed:\n\n- Gemnasium not in sync with packagist.org #11823\n\nThe following issues become irrelevant and can be closed:\n\n- Embed Gemnasium server in omnibus #5475 \n- Add Access Token auth to Gemnasium API #12140\n- Gemnasium API endpoint to patch an advisory #11844\n- Add authentication endpoint for Gemnasium #14680\n\nThe following issues are partially solved (gemnasium):\n\n- Support air-gapped (offline) Dependency Scanning for on-prem instances #12726 \n\nAlso, it drastically reduces the cost of implementing these issues:\n\n- Make Dependency Scanning compatible with private registries #6464\n- Add Severity level to Gemnasium vulnerabilities #8213\n- Dependency Scanning for nuget #8102\n- Interpreter and compiler support for Dependency Scanning #10588\n\n### Links / references\n\nhttps://gitlab.com/gitlab-org/gitlab-ee/issues/12930","state":"closed","created_at":"2019-08-30T20:45:21.048Z","updated_at":"2022-04-18T19:23:50.434Z","closed_at":"2019-10-30T14:10:48.062Z","closed_by":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","backend","backstage [DEPRECATED]","customer","devops::secure","group::composition analysis","missed-deliverable","missed:12.4","workflow::production"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"}],"author":{"id":3913516,"username":"NicoleSchwartz","name":"Nicole Schwartz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3913516/avatar.png","web_url":"https://gitlab.com/NicoleSchwartz"},"type":"ISSUE","assignee":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"user_notes_count":51,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14630","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":17,"completed_count":17},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"17 of 17 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14630","notes":"https://gitlab.com/api/v4/projects/278964/issues/14630/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14630/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14630","relative":"#14630","full":"gitlab-org/gitlab#14630"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1914,"epic":{"id":12353,"iid":1914,"title":"Drop Gemnasium server side architecture","url":"/groups/gitlab-org/-/epics/1914","group_id":9970,"human_readable_end_date":"Dec 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24339481,"iid":14629,"project_id":278964,"title":"Add periodic Geo health checks to geo-logcursor","description":"- [ ] Add Geo health checks to geo-logcursor health checks https://gitlab.com/gitlab-org/gitlab-ee/issues/14627\n- [ ] If possible during refactoring, make it easy to add Geo health checks to the health check endpoints: https://docs.gitlab.com/ee/user/admin_area/monitoring/health_check.html. Note that the existing `Gitlab::Geo::HealthCheck` is used in `rake gitlab:geo:check` as well as the `HealthCheck` initializer.\n\n","state":"closed","created_at":"2019-08-30T20:42:09.157Z","updated_at":"2019-12-11T19:42:34.958Z","closed_at":"2019-09-11T21:02:37.885Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["Category:Cloud Native Installation","devops::systems","group::geo","workflow::ready for development"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14629","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14629","notes":"https://gitlab.com/api/v4/projects/278964/issues/14629/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14629/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14629","relative":"#14629","full":"gitlab-org/gitlab#14629"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24339394,"iid":14627,"project_id":278964,"title":"geo-logcursor never exits, for any reason","description":"### Problem\n\nAs-is, geo-logcursor rescues all `StandardError`s when it attempts to take an exclusive lease. Therefore, pretty much any failure occurring inside that block will not cause geo-logcursor to stop.\n\nIf running geo-logcursor in a container, it will basically never stop, even when serious problems are occurring.\n\nWe can't remove this rescue outright since there are all kinds of errors that can happen when processing a single Geo event, and we don't want to logcursor to die all the time.\n\n### Solution\n\nI am working on https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/15248 which will add periodic (every minute ATM) health checks to geo-logcursor. After 5 minutes of consecutive failures, it will exit.\n\nIn the first iteration, it will run all liveness health checks listed here: https://docs.gitlab.com/ee/user/admin_area/monitoring/health_check.html#liveness\n\nIn a follow up issue https://gitlab.com/gitlab-org/gitlab-ee/issues/14629, Geo-specific health checks will be added. Unfortunately the existing Geo health check code does not \"look like\" other health checks.\n\nIf we need a configurable health check rate or maximum consecutive failures, that could be added in a follow up (but if we can, let's choose good-enough defaults).\n\n@WarheadsSE Would this be sufficient to continue with https://gitlab.com/charts/gitlab/issues/1211?\n\n### Additional solution\n\nIf the above is insufficient, what if we added:\n\n- Exit after a maximum number or duration of consecutive errors =\u003e https://gitlab.com/gitlab-org/gitlab-ee/issues/14944\n\ncc @ashmckenzie","state":"closed","created_at":"2019-08-30T20:35:47.280Z","updated_at":"2019-12-11T19:42:35.780Z","closed_at":"2019-09-11T20:19:59.674Z","closed_by":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"labels":["Category:Cloud Native Installation","devops::systems"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"user_notes_count":4,"merge_requests_count":2,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14627","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14627","notes":"https://gitlab.com/api/v4/projects/278964/issues/14627/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14627/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14627","relative":"#14627","full":"gitlab-org/gitlab#14627"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24337595,"iid":14625,"project_id":278964,"title":"Extend License Compliance entity for Pipelines and MR view","description":"Currently the License Compliance entity returns data of this format:\n\n![](https://gitlab.com/gitlab-org/gitlab-ee/uploads/e0740c2fc5ae245ff7b13d192840b516/image.png)\n\nThe Frontend needs more information to be able to render this, currently we match the data from the report and the Managed License API (License approval status). https://docs.gitlab.com/ee/api/managed_licenses.html\n\nIt would be good if the Backend could combine both in the new Backend endpoints introduced with https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/8032 and https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14723:\n\n## Current Schema\n\n```js\n{\n  name: String,\n  dependencies: Array[String],\n  count: Integer,\n};\n```\n\n## Proposed Schema\n\n```js\n{\n  id: Integer || null, // ID from https://docs.gitlab.com/ee/api/managed_licenses.html. ID null for undecided licenses\n  name: String,\n  dependencies: Array[String],\n  count: Integer,\n  url: String || null, // Link to license link\n  // Unclassified is for licenses where we haven't made a decision yet:\n  status: \"approved\" || \"blacklisted\" || \"unclassified\", \n};\n\n```\n\nAt the moment the Frontend sorts the found licenses alphabetically by `name`.\n\nFrontend logic at the moment: https://gitlab.com/gitlab-org/gitlab-ee/blob/bd2a47abad79edd27ff42624/ee/app/assets/javascripts/vue_shared/license_management/store/utils.js#L80-125","state":"closed","created_at":"2019-08-30T19:20:25.892Z","updated_at":"2019-09-30T14:50:43.983Z","closed_at":"2019-09-16T18:20:21.529Z","closed_by":{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"},"labels":["Category:License Compliance","Deliverable","Enterprise Edition","backend","backstage [DEPRECATED]","bug::performance","devops::secure","frontend","group::composition analysis","maintenance::refactor","missed-deliverable","missed:12.2","workflow::production"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"}],"author":{"id":181229,"username":"leipert","name":"Lukas 'Eipi' Eipert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/19a1f1260fa70323f35bc508927921a2?s=80\u0026d=identicon","web_url":"https://gitlab.com/leipert"},"type":"ISSUE","assignee":{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14625","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14625","notes":"https://gitlab.com/api/v4/projects/278964/issues/14625/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14625/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14625","relative":"#14625","full":"gitlab-org/gitlab#14625"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24333580,"iid":14622,"project_id":278964,"title":"\"Add alert\" in monitoring dashboard yields \"Error creating alert\"","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nIn the monitoring dashboard (metrics), it is not possible to add a new alert.\n\n\"Add alert\" in monitoring dashboard yields \"Error creating alert\"\n\n![image](/uploads/4889ca1c50241d8f04019f99ed9a784b/image.png)\n\n### Steps to reproduce\n\n- (Disabled [feature flag](https://docs.google.com/spreadsheets/d/1oNY3NibGDXhnA-GJ6TD4Q6fuRs1p-v3AZNljupkg8pI/edit#gid=0) `prometheus_computed_alerts`)\n- Visit the dashboard for a project. e.g. `\u003cproject\u003e/environments/29/metrics`\n- Select a metric three dots button.\n- In the pop-up select any data and click on \"Add\" \n\n### Example Project\n\nhttps://gitlab.com/sarahwaldner/waldner_demo\n\n- https://gitlab.com/sarahwaldner/waldner_demo/environments/836846/metrics\n\n### What is the current *bug* behavior?\n\n\"Error creating alert\" notice appears.\n\n### What is the expected *correct* behavior?\n\nAlert is added.\n\n### Relevant logs and/or screenshots\n\nIssue is manifested by constraint violation in the db:\n\n```\n11:52:07 postgresql.1            | 2019-08-30 11:52:07.774 -05 [4438] ERROR:  null value in column \"operator\" violates not-null constraint\n11:52:07 postgresql.1            | 2019-08-30 11:52:07.774 -05 [4438] DETAIL:  Failing row contains (1, 2019-08-30 16:52:07.773174+00, 2019-08-30 16:52:07.773174+00, 1, null, 29, 19, 19).\n11:52:07 postgresql.1            | 2019-08-30 11:52:07.774 -05 [4438] STATEMENT:  INSERT INTO \"prometheus_alerts\" (\"created_at\", \"updated_at\", \"threshold\", \"environment_id\", \"project_id\", \"prometheus_metric_id\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"\n```\n\nFull stack trace by gdk:\n\n```\nPG::NotNullViolation at /root/autodevops-deploy/prometheus/alerts.json\n======================================================================\n\n\u003e ERROR:  null value in column \"operator\" violates not-null constraint\nDETAIL:  Failing row contains (1, 2019-08-30 16:52:07.773174+00, 2019-08-30 16:52:07.773174+00, 1, null, 29, 19, 19).\n\n\nee/app/services/projects/prometheus/alerts/create_service.rb, line 10\n---------------------------------------------------------------------\n\n``` ruby\n    5       module Alerts\n    6         class CreateService \u003c BaseService\n    7           include AlertParams\n    8   \n    9           def execute\n\u003e  10             project.prometheus_alerts.create(alert_params)\n   11           end\n   12         end\n   13       end\n   14     end\n   15   end\n```\n\nApp backtrace\n-------------\n\n - ee/app/services/projects/prometheus/alerts/create_service.rb:10:in `execute'\n - ee/app/controllers/projects/prometheus/alerts_controller.rb:36:in `create'\n - ee/lib/gitlab/ip_address_state.rb:10:in `with'\n - ee/app/controllers/ee/application_controller.rb:39:in `set_current_ip_address'\n - lib/gitlab/session.rb:11:in `with_session'\n - app/controllers/application_controller.rb:450:in `set_session_storage'\n - lib/gitlab/i18n.rb:55:in `with_locale'\n - lib/gitlab/i18n.rb:61:in `with_user_locale'\n - app/controllers/application_controller.rb:444:in `set_locale'\n - lib/gitlab/middleware/rails_queue_duration.rb:27:in `call'\n - lib/gitlab/metrics/rack_middleware.rb:17:in `block in call'\n - lib/gitlab/metrics/transaction.rb:57:in `run'\n - lib/gitlab/metrics/rack_middleware.rb:17:in `call'\n - lib/gitlab/middleware/multipart.rb:103:in `call'\n - lib/gitlab/request_profiler/middleware.rb:17:in `call'\n - lib/gitlab/query_limiting/middleware.rb:17:in `block in call'\n - lib/gitlab/query_limiting/transaction.rb:39:in `run'\n - lib/gitlab/query_limiting/middleware.rb:16:in `call'\n - ee/lib/gitlab/jira/middleware.rb:17:in `call'\n - lib/gitlab/middleware/go.rb:20:in `call'\n - lib/gitlab/etag_caching/middleware.rb:13:in `call'\n - lib/gitlab/middleware/correlation_id.rb:16:in `block in call'\n - lib/gitlab/middleware/correlation_id.rb:15:in `call'\n - lib/gitlab/middleware/read_only/controller.rb:42:in `call'\n - lib/gitlab/middleware/read_only.rb:18:in `call'\n - lib/gitlab/middleware/basic_health_check.rb:25:in `call'\n - lib/gitlab/request_context.rb:26:in `call'\n - lib/gitlab/middleware/static.rb:11:in `call'\n - lib/gitlab/webpack/dev_server_middleware.rb:27:in `perform_request'\n - lib/gitlab/metrics/requests_rack_middleware.rb:29:in `call'\n - lib/gitlab/middleware/release_env.rb:12:in `call'\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n### Possible fixes\n\n- ...","state":"closed","created_at":"2019-08-30T17:03:41.205Z","updated_at":"2020-11-16T12:55:38.720Z","closed_at":"2019-12-13T06:23:43.318Z","closed_by":{"id":1607849,"username":"mrincon","name":"Miguel Rincon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1607849/avatar.png","web_url":"https://gitlab.com/mrincon"},"labels":["database","devops::monitor","frontend","group::respond","missed-SLO","missed:12.3","missed:12.4","missed:12.5","priority::2","severity::2","type::bug"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":1607849,"username":"mrincon","name":"Miguel Rincon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1607849/avatar.png","web_url":"https://gitlab.com/mrincon"}],"author":{"id":1607849,"username":"mrincon","name":"Miguel Rincon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1607849/avatar.png","web_url":"https://gitlab.com/mrincon"},"type":"ISSUE","assignee":{"id":1607849,"username":"mrincon","name":"Miguel Rincon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1607849/avatar.png","web_url":"https://gitlab.com/mrincon"},"user_notes_count":26,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14622","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14622","notes":"https://gitlab.com/api/v4/projects/278964/issues/14622/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14622/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14622","relative":"#14622","full":"gitlab-org/gitlab#14622"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24708367,"iid":31418,"project_id":278964,"title":"Move filtering from API::Groups#find_group_projects into GroupProjectsFinder","description":"Move filtering and ordering done on https://gitlab.com/gitlab-org/gitlab-ce/blob/master/lib/api/groups.rb#L76 into `GroupProjectsFinder`.  \n\nThe following statements should me moved into `GroupProjectsFinder`\n\n``` ruby\n        projects = projects.with_issues_available_for_user(current_user) if params[:with_issues_enabled]\n        projects = projects.with_merge_requests_enabled if params[:with_merge_requests_enabled]\n        projects = projects.visible_to_user_and_access_level(current_user, params[:min_access_level]) if params[:min_access_level]\n        projects = reorder_projects(projects)\n```\n\nThe following discussion from gitlab-ce!29866 should be addressed:\n\n- [ ] @felipe_artur started a [discussion](https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/29866#note_209905702):  (+1 comment)\n\n    \u003e Open follow up gitlab-ce~3011693 issue to move this filtering and ordering into `GroupProjectsFinder`?","state":"closed","created_at":"2019-08-30T16:43:04.634Z","updated_at":"2020-06-30T18:37:06.022Z","closed_at":"2020-06-30T18:37:05.969Z","closed_by":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"labels":["api","backend","backstage [DEPRECATED]","devops::plan","group::project management","maintenance::refactor","missed-deliverable","missed:12.6"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":5781996,"username":"ravishankar2kool","name":"Ravishankar Gnanaprakasam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5781996/avatar.png","web_url":"https://gitlab.com/ravishankar2kool"}],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":{"id":5781996,"username":"ravishankar2kool","name":"Ravishankar Gnanaprakasam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5781996/avatar.png","web_url":"https://gitlab.com/ravishankar2kool"},"user_notes_count":2,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31418","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31418","notes":"https://gitlab.com/api/v4/projects/278964/issues/31418/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31418/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31418","relative":"#31418","full":"gitlab-org/gitlab#31418"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24330654,"iid":14618,"project_id":278964,"title":"Add development documentation on service properties migration","description":"In https://gitlab.com/gitlab-org/gitlab-ce/issues/43942#note_147395448, I mentioned:\n\n\u003e\u003e\u003e\n1. Plan will migrate the issue tracker services (including Jira) to their own tables in 11.10.\n1. We'll create issues based on service type for other teams to take after 12.0.\n1. Our work will be as reusable as possible.\n1. We'll hopefully be done in 11.11 or 12.0 (as these involve background migrations, they aren't 'done' until at least one release after they are introduced).\n\u003e\u003e\u003e\n\nObviously I was too optimistic in the timeframe. So we should add development documentation to explain the state to other engineers, so that people know not to add too much complication to existing services. (A new field is generally fine as it would need to be migrated anyway, but a change to field handling in general is a harder case to make.)\n\nThis documentation should say:\n\n1. Why we're doing this.\n2. How to do this for your service.\n3. How to handle encrypted fields.","state":"closed","created_at":"2019-08-30T15:42:37.570Z","updated_at":"2022-02-24T14:52:12.985Z","closed_at":"2022-02-24T14:52:12.344Z","closed_by":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"labels":["[deprecated] Accepting merge requests","backend","devops::plan","documentation","group::product planning","section::dev","type::maintenance"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"}],"author":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"type":"ISSUE","assignee":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"user_notes_count":8,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14618","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14618","notes":"https://gitlab.com/api/v4/projects/278964/issues/14618/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14618/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14618","relative":"#14618","full":"gitlab-org/gitlab#14618"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1443,"epic":{"id":8202,"iid":1443,"title":"Extract fields in Issue Tracker Project Services to a separate table","url":"/groups/gitlab-org/-/epics/1443","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24708357,"iid":31411,"project_id":278964,"title":"Add loading indicator when connecting to error tracking server","description":"![2019-08-30_09.26.45](/uploads/39b38a12433e4b9ec45b5c6f85db831d/2019-08-30_09.26.45.gif)\n\nAlthough it seems like my browser was able to authenticate fairly quickly with the server, I think we should add a loading indicator when connecting to error tracking server. This would be especially valuable on slow internet connections","state":"closed","created_at":"2019-08-30T14:28:13.081Z","updated_at":"2019-11-22T16:55:41.610Z","closed_at":"2019-11-22T16:55:41.540Z","closed_by":{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"},"labels":["Category:Error Tracking","devops::monitor","frontend","group::respond","workflow::verification"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"}],"author":{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"},"type":"ISSUE","assignee":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31411","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31411","notes":"https://gitlab.com/api/v4/projects/278964/issues/31411/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31411/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31411","relative":"#31411","full":"gitlab-org/gitlab#31411"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24327835,"iid":14062,"project_id":278964,"title":"Todos on designs are not removed after membership changes","description":"**[HackerOne report #682748](https://hackerone.com/reports/682748)** by `xanbanx` on 2019-08-27:\n\nHi GitLab security team,\n\n### Summary\n\nGitLab has the feature of design management, where developers can share and iterate on designs, which is part of an issue. On a design, developers can create notes, and by referencing other people, todos for them are created. However, when a member, who has access is removed, and does not have access to the project anymore, the associated todos for designs persist and are not removed. \n\nI know that GitLab implemented a 1 hour grace period before todos are removed. However, here the todos remain even after this period.\n\n### Steps to reproduce\n\nThis requires a project/group which supports the design management feature.\n\n1. Create a public group and inside a private project  \n2. Add a second member to with developer rights to the group, for now on denoted as `user_b`  \n3. In the private project create an issue and upload a design  \n4. On the design, create a note and mention `user_b` --\u003e creates a todo fo user `user_b`  \n5. Remove `user_b` from the group  \n6. Wait for the one hour grace period for removing todos when the membership changes  \n7. As `user_b`, visit the todos and see that the todo for the design is still there and not yet removed\n\n### Impact\n\nThis gives users without access to the project still access to the designs todo.\n\n### What is the current *bug* behavior?\n\nTodos on designs are note removed after the membership changes, even not after the grace period.\n\n### What is the expected *correct* behavior?\n\nTodos on designs should be removed if the membership changes after the grace period.\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\nBest,  \nXanbanx\n\n## Impact\n\nSee above.","state":"closed","created_at":"2019-08-30T14:24:39.043Z","updated_at":"2020-12-10T19:00:01.120Z","closed_at":"2020-01-10T08:51:58.221Z","closed_by":{"id":4086191,"username":"cmaxim","name":"Costel Maxim","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4086191/avatar.png","web_url":"https://gitlab.com/cmaxim"},"labels":["Category:Design Management","HackerOne","backend","devops::plan","group::product planning","priority::3","severity::3","type::bug","workflow::ready for development"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14062","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14062","notes":"https://gitlab.com/api/v4/projects/278964/issues/14062/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14062/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14062","relative":"#14062","full":"gitlab-org/gitlab#14062"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24326797,"iid":14060,"project_id":278964,"title":"Code Owners from group is not listed in the eligible approvers MR widget","description":"### Summary\n\nCode Owners from group are not listed in the \"View eligible approvers\" dropdown.\n\n### Steps to reproduce\n\n1. Add a group to `CODEOWNERS` file, example:\n   ```\n   # This project is maintained by:\n   * @apptus/frontend\n   ```\n2. Fill in merge request approvals like this:\n   ![image](/uploads/f012f04aa03b1cc6d0b78b41f58cf3f4/image.png)\n3. Create a new merge request\n4. The Code Owners section shows `* None`\n\n### Example Project\n\nhttps://gitlab.com/csvn-temp/code-owners-approvers-reproduction/merge_requests/2\n\nThe group in `CODEOWNERS` has 2 members, but none is shown in the MR in the \"View eligible approvers\" tab\n\n### What is the current *bug* behavior?\n\nMR widget for approvers shows `* None`\n\n### What is the expected *correct* behavior?\n\nMR widget for approvers shows `* \u003cGroup members\u003e`\n\n### Relevant logs and/or screenshots\n\n![image](/uploads/28e46de7fb3909f01af5713d6d277c6d/image.png)\n\n### Output of checks\n\nThis bug happens on GitLab.com  \n12.3.0-pre 7ff5d9cd64b\n\n#### Results of GitLab environment info\n\n\n\n#### Results of GitLab application Check\n\n\n\n### Possible fixes","state":"closed","created_at":"2019-08-30T13:45:06.711Z","updated_at":"2021-10-22T22:20:51.430Z","closed_at":"2020-01-24T19:04:35.890Z","closed_by":{"id":4554599,"username":"m_gill","name":"Michelle Gill","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4554599/avatar.png","web_url":"https://gitlab.com/m_gill"},"labels":["[deprecated] Accepting merge requests","customer","devops::create","group::source code","priority::3","severity::3","type::bug"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":718822,"username":"csvn","name":"Christian Svensson","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5e27f232d1519866ee664c4165470db8?s=80\u0026d=identicon","web_url":"https://gitlab.com/csvn"},"type":"ISSUE","assignee":null,"user_notes_count":14,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14060","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14060","notes":"https://gitlab.com/api/v4/projects/278964/issues/14060/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14060/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":"https://gitlab.com/api/v4/projects/278964/issues/32432"},"references":{"short":"#14060","relative":"#14060","full":"gitlab-org/gitlab#14060"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24326370,"iid":14059,"project_id":278964,"title":"Discovery: How do we MVC an MR / commit for Auto Remediation patch without needing human involvement","description":"For MVC please research and find out how we best create an MR (use the MRs we create for Yarn if possible) and automatically, without human intervention apply, run that MR, and if it's green push it.\n\nIdeally this should be generic to any scan or solution that proposes an MR solution.\n\n### Problem to solve\n\nAuto Remediation is able to create a new merge request if a fix is available for a given vulnerability.\n\nChanges should by automatically merged into the original branch if the two following conditions are met:\n1. the pipeline is green (patch is not introducing errors)\n1. the vulnerability has been fixed by the change (via security reports feedback)\n\n### Target audience\n\n- Sasha, Software Developer\n- Sam, Security Analyst\n\n### Proposal - Discovery should answer\n\n1. How a user (maintainer level makes sense if in project and group settings area?) will enable this feature. Note in the future user can set parameters (feel free to consider now if you want but don't go too deep as they are outside MVC) such as only for high, or only for License Compliance, or only for combination LC + High, and they should be able to set this at group and project levels eventually (where group allows minimum vs default). Note: I left it slightly open on the scanner as I want it to work for any finding with a suggested MR, if BE says they need one to start we start with whichever is easiest in their opinion.\n1. how do they turn it off\n1. should they be able to pause it but keep settings (if any)\n1. How will a user be notified this occurred? At a minimum / in addition we should post a comment in the original merge request (if any).\n1. how do we actually run it, and decide it's OK, and push it?\n1. what user will be used / responsible?  (bot/maintainer, have we discussed having a security bot) Note: this should NOT override if they require a review, at this time (mvc) if they require a review it will need to wait on review (future i think that also should be a setting - but a real user like the maintainer would need to be the i take responsibility i think?)\n1. ideas about where to push/promote it in UI (to get people to turn it on)\n\nmajor issue how are we able to tell there is one vuln in multiple locations vs multiple vulns. (maybe do one at a . time and then re-scan? open to short term and long term ideas.)\n\nIssues:\n1. We can leverage the auto-merge on green pipeline functionality, but this flow will not give us feedback about the vulnerability itself. There is no reason to merge if the patch is not solving the original problem.\n\nIn order to check that the vulnerability has been fixed, we should:\n1. identify the original vulnerability we are targeting\n1. check if it is still present in the new report\n\nSince we are creating the new branch from the vulnerable one, we could leverage the \"fixed\" information in the security report to spot if the change is effective.\n\nThe pipeline should be automatically merged only if this check is green.\n\n### What does success look like, and how can we measure that?\n\nPlan (set of issues) to deliver MVC\n\nOne of which is likely to be a modified [Automatic merge for Auto Remediation patches](https://gitlab.com/gitlab-org/gitlab-ee/issues/9381)\n\n### Links / references\n\nhttps://gitlab.com/groups/gitlab-org/-/epics/759\n\n## Discovery conclusion, outcome issues, and next steps\n\n:movie_camera: **Don't want to read?** [view conclusion walkthrough](https://youtu.be/pbRhf0LHgq8)\n* 0:00 - 1:26, context and current UX\n* 1:26 - 12:12, MVC review\n* 12:12 - end, resulting issues and next steps\n\n#### 1. Implementation MVC\n* Issue: https://gitlab.com/gitlab-org/gitlab/issues/36500\n* Will reach out to our technical writers to help tighten up UI copy\n\n#### 2. UX research issue to look at MVC ~\"UX solution validation\" and provide insights for future iterations\n* Issue: https://gitlab.com/gitlab-org/ux-research/issues/530\n* tentatively scheduled for %12.6, that means findings could inform/influence changes to implementation issue https://gitlab.com/gitlab-org/gitlab/issues/36500\n\n#### 3. Discovery focused on `auto-merging of auto-created MRs`. \n* https://gitlab.com/gitlab-org/gitlab/issues/36503 \n* Will also include looking into: 1) filtering by auto-fix section, 2) re-evaluate auto-created MR author alternative, 3) getting closer to out-of-box UX  \n\n#### 4. Follow up UX research issue on results of https://gitlab.com/gitlab-org/gitlab/issues/36503; ~\"UX solution validation\" and identifying insights for future iterations\n* https://gitlab.com/gitlab-org/ux-research/issues/531\n\n\u003chr\u003e\n\n### Proposed MVC ([iteration III](https://gitlab.com/gitlab-org/gitlab/issues/14059#note_245374632))\n\nSimilar/close to [design iteration II](https://gitlab.com/gitlab-org/gitlab/issues/14059#note_240956001), but are revised and include trade-offs highlighted in the designs and annotations below. Per feedback from discovery conclusion sync UX/BE/FE ([view notes](https://docs.google.com/document/d/19Nri7G5qdQrBagU2R9fkK9MapYdPszypOW56yOAp2Lk/edit?usp=sharing))  \n\n| **A. Activating feature:** the UX aimed for the feature to be working/opt-in by default. This would require a ghost user or bot to auto-create the MR. There has in the past been a similar ghost user/trigger, but this has since been deprecated (https://docs.gitlab.com/ee/ci/triggers/#legacy-triggers). We will continue to explore other options in the next discovery (https://gitlab.com/gitlab-org/gitlab/issues/36503). Given this constraint, a maintainer or above will need to opt-in to the feature. In the proposed MVC, the user that enables the feature will be the MR author by default. An alternative explored is that the user selects the author, but there are two issues here: 1) additional required configuration, 2) audit log implications, since one user selects another.  | \n| ------ | \n| ![1_](/uploads/eeef627a2d7917e307bf04580834067b/1_.png) | \n\n\n\n| **B. Discoverability of solutions:** there are two cases to cover when displaying available solutions in the MR. 1) when a solution is available, and 2) when an auto-created MR was created.  | \n| ------ |\n| ![2](/uploads/8b3ac467415aff95da173c525a677a4c/2.png) | \n\n\n| **C. Findability of auto-created MRs:** we initially looked at having the auto-created MRs filtered by category in the MR list, seen in [annotation **iii** in design iteration II](https://gitlab.com/gitlab-org/gitlab/issues/14059#note_240956001). Per BE feedback, we minimized this since it would add a lot more implementation work; so in the below MVC the alternative is that the `auto-created` MRs will be created with a label assigned by the system, such as `vulnerability-auto-fix`. The downside to this is the possibility of this is the edge case when the customer creates a label with the same name. As we continue to grow capabilities we’ll work toward the dedicated filter in the MR list in future iterations.  | \n| ------ |\n| ![3](/uploads/b2efcabdae19f44fef72ecf0d7c105f7/3.png) | \n\n| **D. User flows from dashboard:**  | \n| ------ |\n| ![4](/uploads/1a76cbc8974b0f138e5309d3ec01b650/4.png) | \n\n| **D. User awarness display:** when there are MRs created, this messaging is shown on the dashboard. This additionally could help with learnability, as it will take the user to the MR list page with label applied.  | \n| ------ |\n| ![5](/uploads/67c8b6a5fab0d2c3d4b2974b1a17e09c/5.png) | \n\n#### :notebook: [iteration II](https://gitlab.com/gitlab-org/gitlab/issues/14059#note_240956001)\n\n\n#### :notebook: [iteration I](https://gitlab.com/gitlab-org/gitlab/issues/14059#note_227616774)\n","state":"closed","created_at":"2019-08-30T13:31:00.433Z","updated_at":"2021-04-03T08:32:50.953Z","closed_at":"2019-11-15T16:30:55.863Z","closed_by":{"id":3614383,"username":"kmann","name":"Kyle Mann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614383/avatar.png","web_url":"https://gitlab.com/kmann"},"labels":["Deliverable","Enterprise Edition","UX","auto remediation","backend","devops::secure","frontend","group::composition analysis","missed-deliverable","missed:12.4","product discovery [DEPRECATED]","type::feature","workflow::in dev"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":1125848,"username":"samdbeckham","name":"Sam Beckham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1125848/avatar.png","web_url":"https://gitlab.com/samdbeckham"},{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},{"id":3614383,"username":"kmann","name":"Kyle Mann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614383/avatar.png","web_url":"https://gitlab.com/kmann"}],"author":{"id":3913516,"username":"NicoleSchwartz","name":"Nicole Schwartz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3913516/avatar.png","web_url":"https://gitlab.com/NicoleSchwartz"},"type":"ISSUE","assignee":{"id":1125848,"username":"samdbeckham","name":"Sam Beckham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1125848/avatar.png","web_url":"https://gitlab.com/samdbeckham"},"user_notes_count":38,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14059","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14059","notes":"https://gitlab.com/api/v4/projects/278964/issues/14059/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14059/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14059","relative":"#14059","full":"gitlab-org/gitlab#14059"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2460,"epic":{"id":18044,"iid":2460,"title":"Auto Remediation - User Experience for any scanner - Minimal to Viable","url":"/groups/gitlab-org/-/epics/2460","group_id":9970,"human_readable_end_date":"Apr 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24708348,"iid":31406,"project_id":278964,"title":"Render MR widget info asynchronously","description":"Currently, mr-widget info is serialized during the page load: https://gitlab.com/gitlab-org/gitlab-ce/blob/b76bc2762a245c61089fae486e61c9fd83d45f95/app/views/projects/merge_requests/show.html.haml#L23. According to my local tests this serialization takes 250-400ms, it would be cool to load this data asynchronously.\n\n- This would improve the performance of the initial page loading\n- Potentially we could e-tag-cache the data after mr-widget auto-refresh caching is fully implemented and becomes mature\n\nThis MR and the list of points are the good places to start from: https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/32190#note_210298780","state":"closed","created_at":"2019-08-30T09:42:45.395Z","updated_at":"2020-12-07T17:01:52.558Z","closed_at":"2019-12-05T13:21:44.411Z","closed_by":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"labels":["Category:Code Review Workflow","Deliverable","bug::performance","devops::create","frontend","group::code review","type::feature","workflow::in review"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":7,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31406","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31406","notes":"https://gitlab.com/api/v4/projects/278964/issues/31406/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31406/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31406","relative":"#31406","full":"gitlab-org/gitlab#31406"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24319181,"iid":14053,"project_id":278964,"title":"Migrate DAST tool to the common report format","description":"### Problem to solve\n\nDAST tool doesn't use our [`common` library](https://gitlab.com/gitlab-org/security-products/analyzers/common/) JSON report format but uses [ZAProxy](https://github.com/zaproxy/zaproxy) JSON report format. This prevents us:\n\n- from [utilizing a generic API](https://gitlab.com/gitlab-org/gitlab-ee/issues/11024) to the report contents in our UI\n- from [properly documenting the report format for DAST](https://gitlab.com/gitlab-org/gitlab-ee/issues/12371) in a way that is consistent with other tools of ours\n\n### Intended users\n\nAny user of the [Security Products within GitLab](https://docs.gitlab.com/ee/user/application_security/)\n\n### Further details\n\nThe DAST tool is migrating from a custom ZAProxy format to use the Common Report Format. This will enable the Secure team to reuse key parts of our codebase.\n\nThe migration has three stages:\n\n1. DAST will create a `gl-dast-report.json` report containing the legacy ZAProxy fields and the Common Report Fields. https://gitlab.com/gitlab-org/gitlab/issues/14053\n1. The GitLab Rails codebase will use the Common Report Format for DAST instead of the ZAProxy fields. https://gitlab.com/gitlab-org/gitlab/issues/33913\n1. DAST will remove the legacy ZAProxy fields from the report. https://gitlab.com/gitlab-org/gitlab/issues/33915\n\nThis issue represents step 1. of the migration.\n\n### Proposal\nNote: The [DAST Architecture Migration](https://gitlab.com/groups/gitlab-org/-/epics/810) has recently been updated to create the Common Report Format in Python, as opposed to using the [Common Project](https://gitlab.com/gitlab-org/security-products/analyzers/common).\n\nThe `gl-dast-report.json` report produced by DAST has the following top level fields:\n\n```json\n{\n  \"@version\":   \"D-2019-09-23\",\n  \"@generated\": \"Tue, 1 Oct 2019 04:16:28\",\n  \"site\":       [...],\n  \"spider\":     {...}\n}\n```\n\nThe Common Report Format has the following top level fields:\n```json\n{\n  \"version\":         \"2.2\",\n  \"target_url\":      \"http://...\",\n  \"vulnerabilities\": [...],\n  \"scanned_urls\":    {...},\n  \"io_error_urls\":   {...}\n}\n```\n\nProducing a file that contains both these fields will allow DAST to be upgraded to use the Common Report Format and give the GitLab codebase time to transition away from the Legacy DAST format.\n\nSpecifically, this issue should\n- Using Python, map ZAP output to the Common Report Format (see below),\n- Add these values with the normal ZAP output to the `gl-dast-report.json`\n- Convert the `ee/spec/fixtures/security_reports/master/gl-dast-report.json` in the GitLab codebase to include the added extra fields. Run tests, ensure the added fields don't break GitLab.com.\n\n#### An example: current DAST output\n```json\n{\n    \"@version\":   \"D-2019-09-23\",\n    \"@generated\": \"Tue, 1 Oct 2019 04:16:28\",\n    \"site\":       [\n      {\n        \"@name\":  \"http://nginx\",\n        \"@host\":  \"nginx\",\n        \"@port\":  \"80\",\n        \"@ssl\":   \"false\",\n        \"alerts\": [\n          {\n            \"pluginid\":   \"10016\",\n            \"alert\":      \"Web Browser XSS Protection Not Enabled\",\n            \"name\":       \"Web Browser XSS Protection Not Enabled\",\n            \"riskcode\":   \"1\",\n            \"confidence\": \"2\",\n            \"riskdesc\":   \"Low (Medium)\",\n            \"desc\":       \"\u003cp\u003eWeb Browser XSS Protection is not enabled, or is disabled by the configuration of the 'X-XSS-Protection' HTTP response header on the web server\u003c/p\u003e\",\n            \"instances\":  [\n              {\n                \"uri\":    \"http://nginx/\",\n                \"method\": \"GET\",\n                \"param\":  \"X-XSS-Protection\"\n              }\n            ],\n            \"count\":      \"6\",\n            \"solution\":   \"\u003cp\u003eEnsure that the web browser's XSS filter is enabled...\u003c/p\u003e\",\n            \"otherinfo\":  \"\u003cp\u003eThe X-XSS-Protection HTTP response header allows...\u003c/p\u003e\",\n            \"reference\":  \"\u003cp\u003ehttps://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet\u003c/p\u003e\u003cp\u003e...\u003c/p\u003e\",\n            \"cweid\":      \"933\",\n            \"wascid\":     \"14\",\n            \"sourceid\":   \"3\"\n          }\n        ]\n      }\n    ],\n    \"spider\":     {\n      \"progress\": \"100\",\n      \"state\":    \"FINISHED\",\n      \"result\":   {\n        \"urlsInScope\":    [\n          {\n            \"processed\":          \"true\",\n            \"statusReason\":       \"OK\",\n            \"method\":             \"GET\",\n            \"reasonNotProcessed\": \"\",\n            \"url\":                \"http://nginx/\",\n            \"statusCode\":         \"200\"\n          }\n        ],\n        \"urlsOutOfScope\": [],\n        \"urlsIoError\":    []\n      }\n    }\n  }\n  ```\n\n#### Mapping to the Common Report Format\nThe following shows the current Common Report Format, and the mapping to this from the ZAP output. Note that every instance of an alert ends up as a separate Common Report Format vulnerability.\n\n```json\n{\n  \"version\": \"#latest version of Common Report Format at time of building\",\n  \"vulnerabilities\": [\n    {\n      \"category\": \"dast\",\n      \"confidence\": \"#vulnerability[].confidence, mapped\",\n      \"cve\": \"#vulnerability[].pluginid\",\n      \"description\": \"#vulnerability[].desc, html removed\",\n      \"identifiers\": [\n        {\n          \"name\": \"#vulnerability[].name\",\n          \"type\": \"ZAProxy_PluginId\",\n          \"url\": \"https://github.com/zaproxy/zaproxy/blob/w2019-01-14/docs/scanners.md\",\n          \"value\": \"#vulnerability[].pluginid\"\n        },\n        {\n          \"name\": \"CWE-#vulnerability.cweid, this object only present if cweid exists\",\n          \"type\": \"CWE\",\n          \"url\": \"https://cwe.mitre.org/data/definitions/#vulnerability.cweid.html\",\n          \"value\": \"#vulnerability.cweid\"\n        },\n        {\n          \"name\": \"WASC-#vulnerability.wascid, this object only present if wascid exists\",\n          \"type\": \"WASC\",\n          \"url\": \"http://projects.webappsec.org/w/page/13246974/Threat%20Classification%20Reference%20Grid, subpage, mapped based on #vulnerability.wascid\",\n          \"value\": \"#vulnerability.wascid\"\n        }\n      ],\n      \"links\": [{\n        \"url\": \"#vulnerability[].references[].url, html removed\"\n      }],\n      \"location\": {\n        \"param\": \"#vulnerability[].instances[].param\",\n        \"method\": \"#vulnerability[].instances[].method\",\n        \"hostname\": \"#vulnerability[].instances[].uri, only scheme://userinfo@hostname:port portion\",\n        \"path\": \"#vulnerability[].instances[].uri, only /path?query#fragment portion\"\n      },\n      \"message\": \"#vulnerability[].name\",\n      \"scanner\": {\n        \"id\": \"zaproxy\",\n        \"name\": \"ZAProxy\"\n      },\n      \"severity\": \"#vulnerability[].riskcode, mapped\",\n      \"solution\": \"#vulnerability[].solution, html removed\"\n    }\n  ]\n}\n```\n\n### Out of scope\nThe fields for `evidence/request/response` are part of a larger discussion, so have been removed from the scope of this story. See #37027, #36332.\n\nThe fields for representing `scanned_urls` are part of a larger discussion about whether or not to include a `scan/scans` element in the Common Report Format, hence are also out of scope. See #11024.\n\n### Documentation\nResolving this issue will unlock [the documenting of the DAST report format](https://gitlab.com/gitlab-org/gitlab-ee/issues/12371).\n\n### Testing\n[Integration tests' fixtures for DAST project](https://gitlab.com/gitlab-org/security-products/dast/tree/25b4ffebed72c0c7bd1c363864d8b88f34f0bb41/test/expect) will have to be updated according to the new report format.\n\n### What does success look like, and how can we measure that?\nDAST tool emits a report file in both the `common` library JSON report format and the DAST ZAProxy format\n\n### What is the type of buyer? \n~\"GitLab Ultimate\" users\n\n### Links / references\nIssues related to moving DAST reports logic to the backend: they define places in the codebase that will require an update to consume `common` reports format in for DAST reports.\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues/11976\n- https://gitlab.com/gitlab-org/gitlab-ee/issues/12003\n- https://gitlab.com/gitlab-org/gitlab-ee/issues/13496","state":"closed","created_at":"2019-08-30T09:28:49.921Z","updated_at":"2020-11-20T22:18:31.189Z","closed_at":"2019-12-11T16:45:17.972Z","closed_by":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"labels":["Category:DAST","Deliverable","backend","backend-weight::5","devops::secure","group::dynamic analysis","missed-deliverable","missed:12.3","security reports integration","type::feature","workflow::in review"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"}],"author":{"id":3337413,"username":"vzagorodny","name":"Victor Zagorodny","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/56410d67aa18e03b13e1585d436bf313?s=80\u0026d=identicon","web_url":"https://gitlab.com/vzagorodny"},"type":"ISSUE","assignee":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"user_notes_count":66,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14053","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14053","notes":"https://gitlab.com/api/v4/projects/278964/issues/14053/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14053/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14053","relative":"#14053","full":"gitlab-org/gitlab#14053"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2117,"epic":{"id":14413,"iid":2117,"title":"Support all security report types for 3rd party integrations","url":"/groups/gitlab-org/-/epics/2117","group_id":9970,"human_readable_end_date":"Jan 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24708344,"iid":31403,"project_id":278964,"title":"Add ability to filter projects when using GitHub importer","description":"### Problem to solve\nCurrently, the GitHub Importer has an “Import all projects”, but for customers with a lot of projects, it might cause issues to import all the projects due to performance, or automatic namespace creation, among other things.\n\nThis issue is similar to one for Bitbucket Server importing. https://gitlab.com/gitlab-org/gitlab-ce/issues/51260 \n\n### Proposal\nFilter the projects import page by a string.\nOnly list the projects that match a portion of the string. The user can then click \"Import\" next to the desired projects.","state":"closed","created_at":"2019-08-30T09:13:01.698Z","updated_at":"2019-09-26T02:28:26.532Z","closed_at":"2019-09-25T08:47:57.170Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["DEPRECATED_project import","devops::manage","group::import","type::feature"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31403","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31403","notes":"https://gitlab.com/api/v4/projects/278964/issues/31403/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31403/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31403","relative":"#31403","full":"gitlab-org/gitlab#31403"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24708343,"iid":31402,"project_id":278964,"title":"Add ability to filter projects when using BitBucket Cloud importer","description":"### Problem to solve\nCurrently, the Bitbucket Cloud Importer has an “Import all projects”, but for customers with a lot of projects, it might cause issues to import all the projects due to performance, or automatic namespace creation, among other things.\n\nThis issue is similar to one for Bitbucket Server importing. https://gitlab.com/gitlab-org/gitlab-ce/issues/51260 \n\n### Proposal\nFilter the projects import page by a string.\nOnly list the projects that match a portion of the string. The user can then click \"Import\" next to the desired projects.\n","state":"closed","created_at":"2019-08-30T08:40:45.021Z","updated_at":"2019-10-02T18:57:32.969Z","closed_at":"2019-10-02T18:57:26.079Z","closed_by":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"labels":["DEPRECATED_project import","backend","devops::manage","group::import","type::feature"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31402","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31402","notes":"https://gitlab.com/api/v4/projects/278964/issues/31402/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31402/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31402","relative":"#31402","full":"gitlab-org/gitlab#31402"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24708330,"iid":31393,"project_id":278964,"title":"When adding labels in a Merge Request, adds them out of order until refresh page.","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nWhen adding a label in a Merge Request, the label being added is out of order until page refresh.\n\n### Steps to reproduce\n\nGo to an MR, add a label, notice its order, then refresh the page. Notice the order change.\n\n### Example Project\n\n(If possible, please create an example project here on GitLab.com that exhibits the problematic behavior, and link to it here in the bug report)\n\n(If you are using an older version of GitLab, this will also determine whether the bug is fixed in a more recent version)\n\n### What is the current *bug* behavior?\n\n(What actually happens)\n\n### What is the expected *correct* behavior?\n\nI expect the labels to be added in the correct order.\n\n### Relevant logs and/or screenshots\n\n![2019-08-29_15.32.15](/uploads/adde15d54e8232fc1a45cd3a5f1b30af/2019-08-29_15.32.15.gif)\n\n### Output of checks\n\n(If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com)\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n(If you can, link to the line of code that might be responsible for the problem)","state":"closed","created_at":"2019-08-29T22:33:33.375Z","updated_at":"2019-09-26T17:41:32.925Z","closed_at":"2019-09-26T17:41:32.883Z","closed_by":{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"},"labels":["devops::plan","frontend","group::project management","labels","missed:12.3","severity::3","type::bug","workflow::in review"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":4446737,"username":"jakeburden","name":"Jake Burden","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4446737/avatar.png","web_url":"https://gitlab.com/jakeburden"}],"author":{"id":4447636,"username":"sstern","name":"Scott Stern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4447636/avatar.png","web_url":"https://gitlab.com/sstern"},"type":"ISSUE","assignee":{"id":4446737,"username":"jakeburden","name":"Jake Burden","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4446737/avatar.png","web_url":"https://gitlab.com/jakeburden"},"user_notes_count":5,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31393","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31393","notes":"https://gitlab.com/api/v4/projects/278964/issues/31393/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31393/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31393","relative":"#31393","full":"gitlab-org/gitlab#31393"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24708328,"iid":31391,"project_id":278964,"title":"Improve sparkline chart in MR widget deployment","description":"In light of our new sparkline charts being introduced to gitlab through https://gitlab.com/gitlab-org/gitlab-ui/issues/366, I'd like us to update our sparkline chart found in the MR widget deployment section.\n\n![Gifox_2019-08-29_17-15-32_2x](/uploads/45e0131f4664709c724e5de93b6d6136/Gifox_2019-08-29_17-15-32_2x.png)\n\nViewable in https://gitlab.com/gitlab-org/gitlab-services/design.gitlab.com/merge_requests/1474","state":"closed","created_at":"2019-08-29T22:23:23.470Z","updated_at":"2019-11-25T09:51:05.203Z","closed_at":"2019-11-25T09:51:05.162Z","closed_by":{"id":4339707,"username":"ohoral","name":"Olena Horal-Koretska","state":"active","avatar_url":"https://secure.gravatar.com/avatar/42796a7332b4608eb9785986719e7215?s=80\u0026d=identicon","web_url":"https://gitlab.com/ohoral"},"labels":["UX","devops::monitor","frontend","group::respond","merge requests","missed:12.5","type::feature","workflow::verification"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":4339707,"username":"ohoral","name":"Olena Horal-Koretska","state":"active","avatar_url":"https://secure.gravatar.com/avatar/42796a7332b4608eb9785986719e7215?s=80\u0026d=identicon","web_url":"https://gitlab.com/ohoral"}],"author":{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"},"type":"ISSUE","assignee":{"id":4339707,"username":"ohoral","name":"Olena Horal-Koretska","state":"active","avatar_url":"https://secure.gravatar.com/avatar/42796a7332b4608eb9785986719e7215?s=80\u0026d=identicon","web_url":"https://gitlab.com/ohoral"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31391","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31391","notes":"https://gitlab.com/api/v4/projects/278964/issues/31391/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31391/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31391","relative":"#31391","full":"gitlab-org/gitlab#31391"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24306772,"iid":14044,"project_id":278964,"title":"Engineering Discovery: What needs to be done to best support third party integrations?","description":"### Problem to be solved\nEngineering Research: What needs to be done to best support third party integrations?\n\nIn order for partners to pull and push data to replace one of our scanners, or for us to be able to easily swap our scanner choices, what webhooks and apis or other items need to be done? The outcome should be a list of items needed, and the teams that the asks should be discussed with.\n\n\n### Current state\n\n1. **Push data**\n\nAny compatible JSON report can be pushed as a `report artifact`. \n\nE.g. for Dependency Scanning we document [the report format](https://docs.gitlab.com/ee/user/application_security/dependency_scanning/index.html#reports-json-format) and the job configuration to define [a report artifact](https://docs.gitlab.com/ee/ci/yaml/README.html#artifactsreportsdependency_scanning-ultimate)). \n\nThe main issue with this approach is the complexity of the constraints on that report to ensure unique identification of a vulnerability occurrence. This is mandatory for both MR widget (to compare security reports between branches) and for storing vulnerabilities in DB (default_branch only) to display them in the project and group dashboards and use the upcoming first-class vulnerabilities. To make it even harder, these constraints are specific to each report type (with some overlap). This is what prevented us to promote that approach as an official API so far.\n\n2. **Pull data**\n\nWe currently have [a vulnerability API](https://docs.gitlab.com/ee/api/vulnerabilities.html) which provide data for a given project (returns the vulnerability Occurrences stored in our DB from the latest pipeline of the `default_branch`). It was recently improved to also [allow to fetch them for any given pipeline](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14376) (so by parsing artifact on demand, no DB storage here) and there is also an upcoming improvement to do it [at group level](https://gitlab.com/gitlab-org/gitlab-ee/issues/11570).\n\n### Proposal\n\nLeverage the existing [JSON Report artifacts](https://docs.gitlab.com/ee/ci/yaml/README.html#artifactsreports) or ~~look for possible HTTP API to directly create first-class vulnerabilities~~ EDIT: this is not achievable as per the engineering discovery ([see details below](https://gitlab.com/gitlab-org/gitlab/issues/14044#note_210160452)).\n\n### Conclusions\n\nIntegrate using [JSON Report artifacts](https://docs.gitlab.com/ee/ci/yaml/README.html#artifactsreports) following the common format as this allows to seamlessly support all our features (Dashboards + MR and Pipeline workflows).\n\n1. keep moving all security features to the common format that support semantic versioning ([DAST migration](https://gitlab.com/groups/gitlab-org/-/epics/810), [Container Scanning migration](https://gitlab.com/groups/gitlab-org/-/epics/808))\n1. better document the current format: explicit mandatory properties and explain identification scheme (identifiers, location) for each report type. Maybe dedicated documentation would make sense here?\n1. improve format validation with JSON schema (existing issue to find and link here)\n1. possibly start announcing 3rd party integration for SAST since it's architecture migration is the most advanced (stable format, DinD removal done)","state":"closed","created_at":"2019-08-29T22:20:14.485Z","updated_at":"2021-04-03T08:31:02.898Z","closed_at":"2019-10-22T00:57:48.599Z","closed_by":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"labels":["Deliverable","Enterprise Edition","backend","backstage [DEPRECATED]","devops::secure","group::composition analysis","product discovery [DEPRECATED]","security reports integration"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"}],"author":{"id":3913516,"username":"NicoleSchwartz","name":"Nicole Schwartz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3913516/avatar.png","web_url":"https://gitlab.com/NicoleSchwartz"},"type":"ISSUE","assignee":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"user_notes_count":10,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14044","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14044","notes":"https://gitlab.com/api/v4/projects/278964/issues/14044/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14044/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14044","relative":"#14044","full":"gitlab-org/gitlab#14044"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2115,"epic":{"id":14411,"iid":2115,"title":"Enable 3rd-party integrations: MVC (Minimal)","url":"/groups/gitlab-org/-/epics/2115","group_id":9970,"human_readable_end_date":"Mar 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24708327,"iid":31390,"project_id":278964,"title":"Clicking on sparkline chart in MR widget deployment doesn't do anything","description":"### Summary\n\nClicking on sparkline chart in MR widget deployment doesn't do anything\n\n![2019-08-29_17.16.11](/uploads/de3619485fb190b9e387066e310c6a7b/2019-08-29_17.16.11.gif)\n\n### Steps to reproduce\n\n1. Go to https://gitlab.com/gitlab-org/gitlab-services/design.gitlab.com/merge_requests/1474\n\n### What is the current *bug* behavior?\n\nCursor implies that the chart is clickable\n\n### What is the expected *correct* behavior?\n\nEither removing the click cursor or making the click go to somewhere useful (eg. the metrics dashboard)","state":"closed","created_at":"2019-08-29T22:18:25.018Z","updated_at":"2019-10-29T09:31:00.602Z","closed_at":"2019-10-29T09:31:00.498Z","closed_by":{"id":4339707,"username":"ohoral","name":"Olena Horal-Koretska","state":"active","avatar_url":"https://secure.gravatar.com/avatar/42796a7332b4608eb9785986719e7215?s=80\u0026d=identicon","web_url":"https://gitlab.com/ohoral"},"labels":["devops::monitor","frontend","group::respond","merge requests","missed:12.4","priority::4","severity::4","type::bug"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":4339707,"username":"ohoral","name":"Olena Horal-Koretska","state":"active","avatar_url":"https://secure.gravatar.com/avatar/42796a7332b4608eb9785986719e7215?s=80\u0026d=identicon","web_url":"https://gitlab.com/ohoral"}],"author":{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"},"type":"ISSUE","assignee":{"id":4339707,"username":"ohoral","name":"Olena Horal-Koretska","state":"active","avatar_url":"https://secure.gravatar.com/avatar/42796a7332b4608eb9785986719e7215?s=80\u0026d=identicon","web_url":"https://gitlab.com/ohoral"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31390","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31390","notes":"https://gitlab.com/api/v4/projects/278964/issues/31390/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31390/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31390","relative":"#31390","full":"gitlab-org/gitlab#31390"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24708316,"iid":31380,"project_id":278964,"title":"Page \"Application\" uses only English language, even when translation exists","description":"### Summary\n\nI set the Russian language in my profile. And when I open https://url/profile/applications page, lang of this page is English for all strings. This problem is reproducible with any language.\n\n### Steps to reproduce\n\n1. Go to the settings -\u003e Preferences.\n2. Change your language from English to any other language\n3. Save and open any other page to see changes. Everything works\n4. Open settings -\u003e Applications \n5. The whole page is in English\n\n### Example Project\n\nYou can reproduce it also on gitlab.com by yourself\n\n### What is the current *bug* behavior?\n\nWhen you open settings -\u003e Applications, it shows the page in English even after you change it into another language\n\n### What is the expected *correct* behavior?\n\nPage \"Applications\" in Profile Settings should use the language you chose in settings","state":"closed","created_at":"2019-08-29T18:59:48.222Z","updated_at":"2022-03-28T19:12:53.790Z","closed_at":"2020-07-06T16:18:17.411Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Internationalization","Deliverable","backend","devops::manage","estimation::completed","group::import","milestone::p2","type::bug","user profile","workflow::production"],"milestone":{"id":1233746,"iid":49,"group_id":9970,"title":"13.2","description":"https://about.gitlab.com/releases/2020/07/22/gitlab-13-2-released/","state":"closed","created_at":"2020-04-09T17:28:01.032Z","updated_at":"2022-04-13T14:48:24.167Z","due_date":"2020-07-17","start_date":"2020-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/49"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":2872195,"username":"Sandzhaj","name":"Mark Minakou","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2872195/avatar.png","web_url":"https://gitlab.com/Sandzhaj"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31380","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31380","notes":"https://gitlab.com/api/v4/projects/278964/issues/31380/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31380/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31380","relative":"#31380","full":"gitlab-org/gitlab#31380"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2722,"epic":{"id":23515,"iid":2722,"title":"Category:Internationalization Strategy","url":"/groups/gitlab-org/-/epics/2722","group_id":9970},"iteration":null,"health_status":null},{"id":24708304,"iid":31374,"project_id":278964,"title":"Permalink button drops the `#LXX` URL parameter if the \"link\" icon is clicked instead of the line number","description":"### Summary\n\nWhen viewing a file, clicking the \"Permalink\" button will cause the previously-selected line reference (e.g. `#L32`) to be dropped from the URL. This happens when the user selects a line by clicking the \"link\" icon instead of the actual line number.\n\n### Steps to reproduce\n\n1. Navigate to a file view, i.e. https://gitlab.com/gitlab-org/gitlab-ce/blob/master/app/views/shared/milestones/_sidebar.html.haml\n1. Select a specific line by clicking on the link icon next to the line number.  Notice that a URL parameter like `#LXX` has been appended to the current URL in your browser's address bar.\n1. Click the \"Permalink\" button\n\n### What is the current *bug* behavior?\n\nThe new URL no longer includes the `#LXX` parameter.\n\n### What is the expected *correct* behavior?\n\nThe new URL should still contain the `#LXX` parameter that existed before the \"Permalink\" button was clicked, regardless if the line was selected by clicking the \"link\" icon or the actual line number.\n\n### GIF\n\n![2020-01-20_08.49.47](/uploads/8a1dcb2b7bf53343ec35ec03548c148a/2020-01-20_08.49.47.gif)\n\n### Output of checks\n\nThis bug happens on GitLab.com.","state":"closed","created_at":"2019-08-29T16:41:41.356Z","updated_at":"2020-01-28T09:21:07.721Z","closed_at":"2020-01-28T09:21:07.678Z","closed_by":{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"},"labels":["Stuff that should Just Work","[deprecated] Accepting merge requests","devops::create","internal customer","severity::4","type::bug"],"milestone":null,"assignees":[],"author":{"id":493585,"username":"nfriend","name":"Nathan Friend","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cd23f74a33fc7d8dfe081948696551a5?s=80\u0026d=identicon","web_url":"https://gitlab.com/nfriend"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31374","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31374","notes":"https://gitlab.com/api/v4/projects/278964/issues/31374/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31374/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31374","relative":"#31374","full":"gitlab-org/gitlab#31374"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24708297,"iid":31368,"project_id":278964,"title":"Repository mirroring seems to keep pushing tags for blocked users","description":"Today (2019-08-29) there was an incident in which a mirror of chromium seemingly continued pushing tags after the user got blocked. This is surprising considering that `:access_git` is disabled for blocked users.\n\nLink to a point in the thread: https://gitlab.slack.com/archives/CB7P5CJS1/p1567081960010100\n\n# Steps to reproduce\n\n- Create a public test repository\n- In GDK (or on any instance where you have the ability to block users), with a test user, create a mirror of the test repo\n- Block the test user\n- Create a tag on the test repository\n- Trigger a mirror update\n\n## Expected results\n\n**To be defined**. Given that \n\n1. the push is created in the name of the user, and\n1. blocked users are not supposed to be able to access git\n\nit would seem that mirroring should be disabled if the user who created the mirror gets blocked\n\n## Actual results\n\n- Tags keep getting created on the mirror\n\n# See also\n\nSimilar issues about blocked users:\n- https://gitlab.com/gitlab-org/gitlab-ce/issues/58801\n- https://gitlab.com/gitlab-org/gitlab-ce/issues/59355\n- https://gitlab.com/gitlab-org/gitlab-ce/issues/46103","state":"closed","created_at":"2019-08-29T14:38:40.734Z","updated_at":"2020-01-30T22:12:49.096Z","closed_at":"2019-11-27T11:02:33.289Z","closed_by":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"labels":["Deliverable","backend","devops::create","group::source code","priority::3","repository","security","severity::3","type::bug","workflow::in review"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"}],"author":{"id":4088036,"username":"hfyngvason","name":"Hordur Freyr Yngvason","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4088036/avatar.png","web_url":"https://gitlab.com/hfyngvason"},"type":"ISSUE","assignee":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"user_notes_count":9,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":"2019-11-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31368","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31368","notes":"https://gitlab.com/api/v4/projects/278964/issues/31368/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31368/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31368","relative":"#31368","full":"gitlab-org/gitlab#31368"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24708293,"iid":31364,"project_id":278964,"title":"Error 502 when viewing  billing page after trial ends","description":"Received error when attempting to view Group Billing page of a GitLab.com account. \n\n\nThere are two errors occurring here:\n1. Whenever a trial ends and a user goes to a group or personal billing page, a regression occurs\n2. The group not found errors are also reported as part of this issue, and will be investigated separately\n\nhttps://sentry.gitlab.net/gitlab/gitlabcom/issues/914258/\n\n```\nNoMethodError: undefined method `members' for nil:NilClass\n  admin/groups_controller.rb:19:in `show'\n    @group.members.order(\"access_level DESC\").page(params[:members_page]))\n  action_controller/metal/basic_implicit_render.rb:6:in `send_action'\n    super.tap { default_render unless performed? }\n  abstract_controller/base.rb:194:in `process_action'\n    send_action(method_name, *args)\n  action_controller/metal/rendering.rb:30:in `process_action'\n    super\n  abstract_controller/callbacks.rb:42:in `block in process_action'\n    super\n...\n(117 additional frame(s) were not displayed)\n\nNoMethodError: undefined method `members' for nil:NilClass\n```\n\n\n### Reports of same problem:\n\n1. https://gitlab.zendesk.com/agent/tickets/132659\n1. https://gitlab.zendesk.com/agent/tickets/130825\n1. https://gitlab.zendesk.com/agent/tickets/131181\n1. https://gitlab.zendesk.com/agent/tickets/131444\n1. https://gitlab.com/gitlab-com/support/dotcom/dotcom-internal/issues/824\n1. https://gitlab.zendesk.com/agent/tickets/131591\n1. https://gitlab.zendesk.com/agent/tickets/134432\n1. https://gitlab.zendesk.com/agent/tickets/134438\n1. https://gitlab.zendesk.com/agent/tickets/136651","state":"closed","created_at":"2019-08-29T13:54:36.139Z","updated_at":"2019-12-19T09:20:14.416Z","closed_at":"2019-11-01T17:28:16.210Z","closed_by":{"id":4413992,"username":"s_awezec","name":"Sam Awezec","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4413992/avatar.png","web_url":"https://gitlab.com/s_awezec"},"labels":["Deliverable","customer","devops::growth","frontend","group::acquisition","missed-deliverable","missed:12.4","priority::1","severity::2","type::bug"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"}],"author":{"id":402401,"username":"jobbot","name":"Bot","state":"active","avatar_url":"https://secure.gravatar.com/avatar/aaa6738f1ebf25404010884af511b0e7?s=80\u0026d=identicon","web_url":"https://gitlab.com/jobbot"},"type":"ISSUE","assignee":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"user_notes_count":24,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31364","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31364","notes":"https://gitlab.com/api/v4/projects/278964/issues/31364/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31364/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31364","relative":"#31364","full":"gitlab-org/gitlab#31364"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24290699,"iid":14029,"project_id":278964,"title":"Refresh packages_size on project_statistics table","description":"### Problem to solve\nThe GitLab Package Registry allows users to build, publish and share packages across a variety of formats. Packages can be built and pushed to the users registry using the command line or their pipelines. \n\nIn order to provide visibility into how storage is being used in a given project, we provide a dashboard which displays storage usage for each package manager format. However, packages deleted before #12583 are not reflected in `ProjectStatistics#packages_size`.\n\n### Intended users\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n\n### Proposal\n- Write a background migration that refreshes this table.\n\n### Further details\n\n#### Implementation details\n- We already have a similar migration in [db/post_migrate/20190418132125_populate_project_statistics_packages_size.rb](https://gitlab.com/gitlab-org/gitlab-ce/blob/v12.2.0/db/post_migrate/20190418132125_populate_project_statistics_packages_size.rb), \nbut it needs a new on SQL on [line 32](https://gitlab.com/gitlab-org/gitlab-ce/blob/v12.2.0/db/post_migrate/20190418132125_populate_project_statistics_packages_size.rb#L32) and in the corresponding `down` method.\n\n```ruby\n# on line 32 and 39\nstorage_size = Arel.sql('(repository_size + lfs_objects_size + build_artifacts_size + packages_size + COALESCE(wiki_size, 0))')\n```","state":"closed","created_at":"2019-08-29T13:06:34.236Z","updated_at":"2021-07-13T15:14:32.810Z","closed_at":"2021-07-13T15:14:32.780Z","closed_by":{"id":4763342,"username":"svistas","name":"Sofia Vistas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4763342/avatar.png","web_url":"https://gitlab.com/svistas"},"labels":["Category:Package Registry","Enterprise Edition","[deprecated] Accepting merge requests","backend","devops::package","group::package registry","priority::3","section::ops","severity::3","type::bug"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":376774,"username":"nolith","name":"Alessio Caiazza","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/376774/avatar.png","web_url":"https://gitlab.com/nolith"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14029","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14029","notes":"https://gitlab.com/api/v4/projects/278964/issues/14029/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14029/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14029","relative":"#14029","full":"gitlab-org/gitlab#14029"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4524,"epic":{"id":119852,"iid":4524,"title":"Expand the Packages data model and api","url":"/groups/gitlab-org/-/epics/4524","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24289429,"iid":14025,"project_id":278964,"title":"Replace vue-resource with axios in drafts_service.js","description":"This is part of https://gitlab.com/groups/gitlab-org/-/epics/1281.\n\nWe want to get rid of vue-resource in [ee/app/assets/javascripts/batch_comments/services/drafts_service.js](ee/app/assets/javascripts/batch_comments/services/drafts_service.js) (any occurrence of Vue.http / this.$http needs to be replaced with axios).","state":"closed","created_at":"2019-08-29T12:28:32.632Z","updated_at":"2019-09-04T17:27:37.413Z","closed_at":"2019-09-04T17:27:37.373Z","closed_by":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"labels":["Community contribution","backstage [DEPRECATED]","devops::plan","frontend"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},{"id":1933526,"username":"leetickett","name":"Lee Tickett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1933526/avatar.png","web_url":"https://gitlab.com/leetickett"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14025","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14025","notes":"https://gitlab.com/api/v4/projects/278964/issues/14025/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14025/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14025","relative":"#14025","full":"gitlab-org/gitlab#14025"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1281,"epic":{"id":6829,"iid":1281,"title":"Replace vue-resource calls with Axios","url":"/groups/gitlab-org/-/epics/1281","group_id":9970,"human_readable_end_date":"Sep 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24289428,"iid":14024,"project_id":278964,"title":"Replace vue-resource with axios in related_issues_service.js","description":"This is part of https://gitlab.com/groups/gitlab-org/-/epics/1281.\n\nWe want to get rid of vue-resource in [ee/app/assets/javascripts/related_issues/services/related_issues_service.js](ee/app/assets/javascripts/related_issues/services/related_issues_service.js) (any occurrence of Vue.http / this.$http needs to be replaced with axios).","state":"closed","created_at":"2019-08-29T12:28:32.041Z","updated_at":"2019-09-10T15:48:54.501Z","closed_at":"2019-09-10T15:48:54.450Z","closed_by":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"labels":["Community contribution","backstage [DEPRECATED]","devops::plan","frontend","workflow::in review"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},{"id":1933526,"username":"leetickett","name":"Lee Tickett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1933526/avatar.png","web_url":"https://gitlab.com/leetickett"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14024","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14024","notes":"https://gitlab.com/api/v4/projects/278964/issues/14024/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14024/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14024","relative":"#14024","full":"gitlab-org/gitlab#14024"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1281,"epic":{"id":6829,"iid":1281,"title":"Replace vue-resource calls with Axios","url":"/groups/gitlab-org/-/epics/1281","group_id":9970,"human_readable_end_date":"Sep 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24289427,"iid":14023,"project_id":278964,"title":"Replace vue-resource with axios in service_desk_service.js","description":"This is part of https://gitlab.com/groups/gitlab-org/-/epics/1281.\n\nWe want to get rid of vue-resource in [ee/app/assets/javascripts/projects/settings_service_desk/services/service_desk_service.js](ee/app/assets/javascripts/projects/settings_service_desk/services/service_desk_service.js) (any occurrence of Vue.http / this.$http needs to be replaced with axios).","state":"closed","created_at":"2019-08-29T12:28:30.561Z","updated_at":"2019-09-04T15:56:48.614Z","closed_at":"2019-09-04T15:56:48.571Z","closed_by":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"labels":["Community contribution","backstage [DEPRECATED]","devops::plan","frontend"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},{"id":1933526,"username":"leetickett","name":"Lee Tickett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1933526/avatar.png","web_url":"https://gitlab.com/leetickett"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14023","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14023","notes":"https://gitlab.com/api/v4/projects/278964/issues/14023/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14023/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14023","relative":"#14023","full":"gitlab-org/gitlab#14023"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1281,"epic":{"id":6829,"iid":1281,"title":"Replace vue-resource calls with Axios","url":"/groups/gitlab-org/-/epics/1281","group_id":9970,"human_readable_end_date":"Sep 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24708290,"iid":31361,"project_id":278964,"title":"Replace vue-resource with axios in vue_resource_interceptor.js","description":"This is part of https://gitlab.com/groups/gitlab-org/-/epics/1281.\n\nWe want to get rid of vue-resource in [app/assets/javascripts/vue_shared/vue_resource_interceptor.js](app/assets/javascripts/vue_shared/vue_resource_interceptor.js) (any occurrence of Vue.http / this.$http needs to be replaced with axios).","state":"closed","created_at":"2019-08-29T12:24:07.062Z","updated_at":"2019-09-19T09:16:07.957Z","closed_at":"2019-09-19T09:16:07.900Z","closed_by":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"labels":["backstage [DEPRECATED]","devops::plan","frontend","workflow::in review"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":1,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31361","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31361","notes":"https://gitlab.com/api/v4/projects/278964/issues/31361/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31361/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31361","relative":"#31361","full":"gitlab-org/gitlab#31361"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1281,"epic":{"id":6829,"iid":1281,"title":"Replace vue-resource calls with Axios","url":"/groups/gitlab-org/-/epics/1281","group_id":9970,"human_readable_end_date":"Sep 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24708289,"iid":31360,"project_id":278964,"title":"Replace vue-resource with axios in performance_bar_service.js","description":"This is part of https://gitlab.com/groups/gitlab-org/-/epics/1281.\n\nWe want to get rid of vue-resource in [app/assets/javascripts/performance_bar/services/performance_bar_service.js](app/assets/javascripts/performance_bar/services/performance_bar_service.js) (any occurrence of Vue.http / this.$http needs to be replaced with axios).","state":"closed","created_at":"2019-08-29T12:24:03.416Z","updated_at":"2019-09-16T19:41:25.138Z","closed_at":"2019-09-16T19:41:24.809Z","closed_by":{"id":636429,"username":"mikegreiling","name":"Mike Greiling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/636429/avatar.png","web_url":"https://gitlab.com/mikegreiling"},"labels":["Community contribution","backstage [DEPRECATED]","devops::monitor","frontend","workflow::in review"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":2,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31360","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31360","notes":"https://gitlab.com/api/v4/projects/278964/issues/31360/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31360/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31360","relative":"#31360","full":"gitlab-org/gitlab#31360"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1281,"epic":{"id":6829,"iid":1281,"title":"Replace vue-resource calls with Axios","url":"/groups/gitlab-org/-/epics/1281","group_id":9970,"human_readable_end_date":"Sep 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24708287,"iid":31359,"project_id":278964,"title":"Replace vue-resource with axios in notes_service.js","description":"This is part of https://gitlab.com/groups/gitlab-org/-/epics/1281.\n\nWe want to get rid of vue-resource in [app/assets/javascripts/notes/services/notes_service.js](app/assets/javascripts/notes/services/notes_service.js) (any occurrence of Vue.http / this.$http needs to be replaced with axios).","state":"closed","created_at":"2019-08-29T12:24:02.724Z","updated_at":"2019-11-12T19:52:07.423Z","closed_at":"2019-09-13T22:14:21.855Z","closed_by":{"id":636429,"username":"mikegreiling","name":"Mike Greiling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/636429/avatar.png","web_url":"https://gitlab.com/mikegreiling"},"labels":["Community contribution","backstage [DEPRECATED]","frontend","workflow::in review"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},{"id":1933526,"username":"leetickett","name":"Lee Tickett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1933526/avatar.png","web_url":"https://gitlab.com/leetickett"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":6,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31359","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31359","notes":"https://gitlab.com/api/v4/projects/278964/issues/31359/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31359/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31359","relative":"#31359","full":"gitlab-org/gitlab#31359"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1281,"epic":{"id":6829,"iid":1281,"title":"Replace vue-resource calls with Axios","url":"/groups/gitlab-org/-/epics/1281","group_id":9970,"human_readable_end_date":"Sep 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24708284,"iid":31356,"project_id":278964,"title":"Some suggestions don't include the button to apply changes","description":"### Summary\n\nSome suggestions don't include the button to apply changes. Suggestions were made to the same diff which means this is not related to https://gitlab.com/gitlab-org/gitlab-ce/issues/65651. This is also visible\n\n### Example Project\n\nFor example, see suggestions in https://gitlab.com/gitlab-org/gitlab-services/design.gitlab.com/merge_requests/1529 and https://gitlab.com/gitlab-org/gitlab-services/design.gitlab.com/merge_requests/1521.\n\n| https://gitlab.com/gitlab-org/gitlab-services/design.gitlab.com/merge_requests/1529 | https://gitlab.com/gitlab-org/gitlab-services/design.gitlab.com/merge_requests/1521|\n| ------ | ------ |\n| ![gitlab.com_gitlab-org_gitlab-services_design.gitlab.com_merge_requests_1529](/uploads/fa3a40b04889399078e4ad96026b923f/gitlab.com_gitlab-org_gitlab-services_design.gitlab.com_merge_requests_1529.png) | ![gitlab.com_gitlab-org_gitlab-services_design.gitlab.com_merge_requests_1521](/uploads/d890dd10f8bd6c56fdd8396857e987b4/gitlab.com_gitlab-org_gitlab-services_design.gitlab.com_merge_requests_1521.png) |","state":"closed","created_at":"2019-08-29T10:57:50.008Z","updated_at":"2020-12-07T16:48:40.314Z","closed_at":"2019-10-01T18:08:27.860Z","closed_by":{"id":11493,"username":"oswaldo","name":"Oswaldo Ferreira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11493/avatar.png","web_url":"https://gitlab.com/oswaldo"},"labels":["Category:Code Review Workflow","Deliverable","backend","devops::create","group::code review","internal customer","merge requests","needs investigation","priority::2","severity::3","type::bug","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":11493,"username":"oswaldo","name":"Oswaldo Ferreira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11493/avatar.png","web_url":"https://gitlab.com/oswaldo"}],"author":{"id":1474048,"username":"gtsiolis","name":"George Tsiolis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1474048/avatar.png","web_url":"https://gitlab.com/gtsiolis"},"type":"ISSUE","assignee":{"id":11493,"username":"oswaldo","name":"Oswaldo Ferreira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11493/avatar.png","web_url":"https://gitlab.com/oswaldo"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31356","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31356","notes":"https://gitlab.com/api/v4/projects/278964/issues/31356/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31356/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31356","relative":"#31356","full":"gitlab-org/gitlab#31356"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24267449,"iid":14010,"project_id":278964,"title":"MVC: Install a default NetworkPolicy object into GitLab-managed Kubernetes clusters (Container network security)","description":"# Problem to solve \u0026 Use Cases\nKubernetes clusters orchestrate many containers at once across different pods and nodes. These containers and pods can be configured to accept traffic from other containers and pods but by default, this means that they will accept traffic from _any_ other pod or container inside the cluster, without regards for which specific pod or container that traffic is coming from.\n\nAs a result, a pod inside the same cluster could connect to another application's pod, even if it had nothing to do with the application itself and potentially attack the app. This could happen if the cluster is shared between multiple different users or if an attacker had somehow been able to escalate their permissions in the cluster.\n\nPreventing this requires that additional logic and security controls be added at the application layer by developers or at the cluster level by operators to mitigate potential attacks. This is both time-consuming and difficult to do correctly.\n\n## Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\nPersonas can be found at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\n* [Devon](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n* [Sidney](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n   1. Operators who are responsible for creating and managing Kubernetes clusters\n* [Sam](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n   1. Security team members who are responsible for ensuring that controls are put in place to prevent abuse\n\n# Proposal\nAs the first MVC for container network security, we should start by letting users enable our chosen container network security solution.  Keeping with our [listen and record first, then act](https://about.gitlab.com/direction/defend/#listen-and-record-first-then-act) principle, we should not enforce any default policy that could potentially impact any deployed cluster. \n\nWe cannot know all existing use cases for our users' deployed applications so we must therefore initially make no enforcement the default.  We can offer a suggested `NetworkPolicy` either via documentation, commented out in a configuration, or both.  However, it will ultimately be up to the user to define the desired policy for this MVC.\n\n*Previous Proposal:*\n\u003e As the first MVC for container network security, we should set a default set of policies designed to only let an application's pods accept network traffic from other pods in the application (and external traffic through an Ingress controller), but not any other pods in the cluster.\n\u003e \n\u003e Do this by adding a default `NetworkPolicy` item inside the Kubernetes cluster designed to provide basic isolation for the deployed application and its containers and pods.\n\n## Minimal\n1. Integrate a `NetworkPolicy` provider with the Kubernetes cluster GitLab provisions for users. \n   * This is needed since Kubernetes can _parse_ `NetworkPolicy` object files, but [does not provide a back-end for supporting them](https://kubernetes.io/docs/concepts/services-networking/network-policies/#prerequisites) out of the box\n   * Allow users to install a [cluster application](https://docs.gitlab.com/ee/user/clusters/applications.html) for the network provider that GitLab chooses\n   * [X] Confirm the specific technology to use.  Two options I found:\n      * [Cilium](https://github.com/cilium/cilium) is now the chosen option based on [2019-12-02 discussion](https://docs.google.com/document/d/1NZdlRM11fgF7B6-fgEWEMhdOYW-KhGritfDZ3g4UCSQ/edit?ts=5de56e0a#)\n      * ~~[Project Calico](http://www.projectcalico.org) was chosen. Discussion is in the comments below.~~\n         * Logging appears to be a paid feature\n    * Should focus on GCP as the cloud provider first. AWS should be second if possible during the MVC.\n1. Provide users a way to configure `NetworkPolicy` objects but **do not** apply any policy by default.  It is acceptable to include a sane, permissive suggested policy (like outlined above and below) in the configuration if it is disabled/commented out by default. ~~Provide users a way to disable the installation of default `NetworkPolicy` objects~~\n    * Consider how we approached this with WAF and if a similar approach makes sense to do here\n1. ~~For AutoDevOps and clusters that have a valid network provider installed, apply a default set of `NetworkPolicy` objects when deploying the application~~\n   * ~~[ ] Get input from team on contents for the default policy.~~\n   * ~~Initial proposal: All pods from the deployed app can communicate with each other and external traffic through an Ingress controller, but no other pods in the cluster can talk to those pods.~~\n      * ~~It must be possible to use other GitLab Managed Apps, such as Prometheus or Jupyter, when the default `NetworkPolicy` object has been applied. We will see many users who want to use `NetworkPolicy` support also using the other GitLab Managed Apps and we shouldn't make it an either/or decision of which to use.~~\n      * ~~(Solution idea) What about using a label for pods to determine if they should be allowed access? What about using namespaces?~~ **This will be post-MVC**\n1. Log traffic that *would have been blocked* (audit mode) and display it to users\n   - At a minimum, this should be visible as text\n   - **Note**: this requires feasibility investigation as Cilium provides drop-only logging OOTB.\n1. Documentation and information for users \n   1. Explain the problem we're solving\n   1. Explain how to enable \u0026 disable the functionality.\n   1. Explain how to consume the results.\n1. ~~Usage analytics added~~ - **moved to** https://gitlab.com/gitlab-org/gitlab/issues/199071\n   1. ~~Report when the support has been installed~~\n   1. ~~Report when the support has been uninstalled~~\n\n## Next steps / post-MVC\n1. Externally expose/publish the `NetworkPolicy` objects that we're applying so users can copy \u0026 paste the objects if their project does not use AutoDevOps.\n1. Ability to specify custom `NetworkPolicy` objects\n1. Ability to import pre-defined `NetworkPolicy` objects from other projects or from a URL\n1. Ability to create a `Finding` or `Vulnerability` when traffic has been blocked/dropped.\n1. Richer and more robust ways to display data \u0026 integrate with dashboards\n1. Allow `NetworkPolicy` objects to work with serverless deployments. #32701\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n1. % of users who create GitLab-managed Kuberenetes cluster within 30 days of release who install the `NetworkPolicy` support. Target =\u003e 50%\n   * Measure adoption of the capability by our target users.\n1. % of users who keep using the `NetworkPolicy` support without uninstalling it for at least 90 days. Target =\u003e 80%\n   * Measure if users install and then keep using the capability. If they uninstall it, that indicates it is not providing enough value, is introducing problems, or something else - in all cases, it is an indicator to investigate more to understand why it was uninstalled.\n\n### What is the type of buyer? \n\n\u003c!-- Which leads to: in which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\n\n~\"GitLab Ultimate\" \n\n# Questions\n1. What is a good `NetworkPolicy` provider to start with? Some options include\n   1. [Project Calico](http://www.projectcalico.org)\n      - Logging appears to be a paid capability\n   1. ~~[Cilium](https://github.com/cilium/cilium)~~\n1. What is a good set of default rules to use for the `NetworkPolicy`?\n   1. Is there a best practice set of defaults we can use instead of writing our own? If there is, we can install them by default then make the `NetworkPolicy` support opt-out instead of opt-in.\n1. What is the data retention policy for logs in terms of time and size?\n\n# Decisions\n\n1. [Cilium](https://github.com/cilium/cilium) is now the chosen option based on [2019-12-02 discussion](https://docs.google.com/document/d/1NZdlRM11fgF7B6-fgEWEMhdOYW-KhGritfDZ3g4UCSQ/edit?ts=5de56e0a#)\n\n# Links / References \n1. [Kubernetes Documentation](https://kubernetes.io/docs/concepts/services-networking/network-policies/)\n1. [Project Calico](https://www.projectcalico.org/)\n1. [Cilium](https://github.com/cilium/cilium)\n1. [A collection of NetworkPolicy examples](https://github.com/ahmetb/kubernetes-network-policy-recipes)","state":"closed","created_at":"2019-08-28T20:56:22.807Z","updated_at":"2021-04-03T08:32:10.162Z","closed_at":"2020-01-27T22:46:41.916Z","closed_by":{"id":4825543,"username":"aevstifeev","name":"Arthur Evstifeev","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4825543/avatar.png","web_url":"https://gitlab.com/aevstifeev"},"labels":["Category:Container Network Security","GitLab Ultimate","UX","backend","backend-weight::3","devops::govern","direction","documentation","group::security policies","missed:12.7","type::feature","workflow::production"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":4825543,"username":"aevstifeev","name":"Arthur Evstifeev","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4825543/avatar.png","web_url":"https://gitlab.com/aevstifeev"},{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},{"id":5292351,"username":"sam.white","name":"Sam White","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d467fb024d1858d279e6a36e028436ac?s=80\u0026d=identicon","web_url":"https://gitlab.com/sam.white"}],"author":{"id":4376883,"username":"stkerr","name":"Sam Kerr","state":"active","avatar_url":"https://secure.gravatar.com/avatar/591c8b969464f7b4fb97b6f2f654f11a?s=80\u0026d=identicon","web_url":"https://gitlab.com/stkerr"},"type":"ISSUE","assignee":{"id":4825543,"username":"aevstifeev","name":"Arthur Evstifeev","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4825543/avatar.png","web_url":"https://gitlab.com/aevstifeev"},"user_notes_count":82,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14010","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14010","notes":"https://gitlab.com/api/v4/projects/278964/issues/14010/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14010/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14010","relative":"#14010","full":"gitlab-org/gitlab#14010"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1821,"epic":{"id":11451,"iid":1821,"title":"Container Network Security - Planned to Minimal","url":"/groups/gitlab-org/-/epics/1821","group_id":9970,"human_readable_end_date":"Feb 22, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24263752,"iid":14007,"project_id":278964,"title":"Improve error handling in PipelineVulnerabilitiesFinder#execute","description":"In `PipelineVulnerabilitiesFinder#execute` we have `rescue NoMethodError =\u003e _ # propagate error for CompareReportsBaseService` ([code](https://gitlab.com/gitlab-org/gitlab-ee/blob/4da230c438c14ec640f37973741faa90cd2e2ebc/ee/app/finders/security/pipeline_vulnerabilities_finder.rb#L37)) that handles nils, but we should improve this design.\n\nThe following discussions from !15531 should be addressed:\n\n- [ ] @godfat started a [discussion](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/15531#note_209407563):  (+3 comments)\n\n    \u003e This is actually the same as before. Without mentioning anything, it's `StandardError`. Could we be more specific? A StandardError can be anything.","state":"closed","created_at":"2019-08-28T17:26:12.351Z","updated_at":"2019-10-18T12:23:15.314Z","closed_at":"2019-10-04T16:59:11.474Z","closed_by":{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"},"labels":["Deliverable","Enterprise Edition","backend","backstage [DEPRECATED]","devops::secure","group::composition analysis","security reports","workflow::production"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"}],"author":{"id":32707,"username":"rossfuhrman","name":"rossfuhrman","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/32707/avatar.png","web_url":"https://gitlab.com/rossfuhrman"},"type":"ISSUE","assignee":{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14007","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14007","notes":"https://gitlab.com/api/v4/projects/278964/issues/14007/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14007/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14007","relative":"#14007","full":"gitlab-org/gitlab#14007"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24708257,"iid":31336,"project_id":278964,"title":"Add wording to explain additional minutes denominator change","description":"### Problem to solve\n\nClarify for users how the denominator is calculated for additional pipeline minutes.\n\n### Intended users\n\nAll .com users/groups who purchase additional minutes\n\n### Further details\n\nEach month (when pipeline minutes are reset), the denominator of the additional minutes will change based on a calculation. The \"total\" now available will be: purchased + unused additional (from previous months)\n\n### Proposal\n\nAdd a brief explanation to the [appropriate customer docs section](https://docs.gitlab.com/ee/subscriptions/#extra-shared-runners-pipeline-minutes), and a link to the doc.\n\nNext to the base usage minutes, we have a little `?` icon that links to the relevant documentation. We could do something similar for additional minutes.\n\n![image](/uploads/d0bc740f33053fd4cf2293df2a437d06/image.png)\n\n\n### What does success look like, and how can we measure that?\n\nCustomers are no longer confused about why the denominator of the additional minutes change.","state":"closed","created_at":"2019-08-28T16:58:55.207Z","updated_at":"2020-10-06T13:59:51.101Z","closed_at":"2019-09-23T22:42:16.102Z","closed_by":{"id":3658061,"username":"rdickenson","name":"Russell Dickenson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3658061/avatar.png","web_url":"https://gitlab.com/rdickenson"},"labels":["Deliverable","UX","[deprecated] 🍎","devops::fulfillment","documentation","feature::enhancement","frontend","group::purchase","priority::4","section::fulfillment","severity::3","workflow::in review"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":2683848,"username":"eread","name":"Evan Read","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2683848/avatar.png","web_url":"https://gitlab.com/eread"}],"author":{"id":2454149,"username":"cynthia","name":"Cynthia \"Arty\" Ng","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2454149/avatar.png","web_url":"https://gitlab.com/cynthia"},"type":"ISSUE","assignee":{"id":2683848,"username":"eread","name":"Evan Read","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2683848/avatar.png","web_url":"https://gitlab.com/eread"},"user_notes_count":15,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31336","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31336","notes":"https://gitlab.com/api/v4/projects/278964/issues/31336/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31336/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31336","relative":"#31336","full":"gitlab-org/gitlab#31336"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1871,"epic":{"id":11942,"iid":1871,"title":"Growth Documentation","url":"/groups/gitlab-org/-/epics/1871","group_id":9970,"human_readable_end_date":"Mar 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24260578,"iid":14004,"project_id":278964,"title":"ESCALATED: Projects are allowed to add members with different domain email address despite restricting in group settings","description":"**[HackerOne report #679567](https://hackerone.com/reports/679567)** by `ashish_r_padelkar` on 2019-08-22, assigned to `gitlab_cmaxim`:\n\n### Summary\n\nHello,\n\nIn new feature `https://gitlab.com/help/user/group/index#allowed-domain-restriction-premium-only` , it is mentioned that `You can restrict access to groups and their underlying projects by  \nallowing only users with email addresses in particular domains to be added to the group`\n\nHowever, this restriction only works at group level and not projects underneath it.\n\n### Steps to reproduce\n\n1. Go to group settings at `/-/edit#js-permissions-settings` and put `gitlab.com` under `Restrict membership by email`.\n\n2. Now try to add members at group membership with different email and it wont allow you to do.\n\n3. Now as a maintainer ,go to projects underneath it and add the email with different domain and it will successfully adds the member.\n\n\n\n### What is the current *bug* behavior?\n\nAllows adding email of different domains at project level despite setting it to group level\n\n### What is the expected *correct* behavior?\n\nThe settings should be applied at all levels as per documentation.\n\n\n### Output of checks\n\nThis bug happens on GitLab.com and probably on omnibus installations too\n\nRegards,  \nAshish\n\n## Impact\n\nAllows adding members with different domain email addresses at project level despite group level settings.","state":"closed","created_at":"2019-08-28T15:27:41.016Z","updated_at":"2022-06-21T18:15:47.709Z","closed_at":"2021-08-03T20:21:56.350Z","closed_by":{"id":4992072,"username":"dcouture","name":"Dominic Couture","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4992072/avatar.png","web_url":"https://gitlab.com/dcouture"},"labels":["Category:Authentication and Authorization","HackerOne","candidate::14.1","customer","devops::manage","group::authentication and authorization","quad-planning::complete-no-action","section::dev","security","security-backlog::reclassified","type::feature","workflow::ready for development"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":2982208,"username":"mksionek","name":"Gosia Ksionek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2982208/avatar.png","web_url":"https://gitlab.com/mksionek"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":2982208,"username":"mksionek","name":"Gosia Ksionek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2982208/avatar.png","web_url":"https://gitlab.com/mksionek"},"user_notes_count":34,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":"2019-11-26","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14004","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14004","notes":"https://gitlab.com/api/v4/projects/278964/issues/14004/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14004/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14004","relative":"#14004","full":"gitlab-org/gitlab#14004"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24253836,"iid":14000,"project_id":278964,"title":"Geo: Some questions on the order of running commands in zero-downtime upgrades","description":"@fzimmer The plot, it finally thickens... :thinking: \n\n![Plot](https://2eu.funnyjunk.com/gifs/The+plot+thickens+a+very+bold+move+indeed_3f86e0_4788290.gif)\n\nIn https://gitlab.com/gitlab-org/gitlab-ee/issues/12625 we didn't fully understand why we needed to run `gitlab-rake db:migrate` on the primary. But after reading the [multi-node / HA deployment instructions](https://docs.gitlab.com/omnibus/update/README.html#multi-node--ha-deployment) again I understand why: :soon: \n\nBecause the user was asked to add `gitlab_rails['auto_migrate'] = false` to `/etc/gitlab/gitlab.rb`. :bulb:\n\nBut I do not understand why this is needed in the first place? :confused: \n\nTo understand this, let's do analysis by looking what happens with HA setups :microscope: \n\n#### In multi-node / HA deployment\n\nYou pick one deploy node. This node is used to decide _when_ migrations run. :crown:\n\nOn that deploy node, you have to create `/etc/gitlab/skip-auto-reconfigure` to make sure during `apt upgrade gitlab` the migrations are not run (indirectly through `gitlab-ctl reconfigure`). :heavy_check_mark: \n\nOn the other nodes, you need to set `gitlab_rails['auto_migrate'] = false` in `/etc/gitlab/gitlab.rb`. From migrations point-of-view this has the same effect, migrations do not run automatically on `apt upgrade gitlab`. :heavy_check_mark: \n\nNext you run `apt upgrade gitlab` and `SKIP_POST_DEPLOYMENT_MIGRATIONS=true sudo gitlab-ctl reconfigure` on the deploy node, this triggers only the pre-deployment migrations. :thumbsup: \n\nThen upgrade all the other nodes with `apt upgrade gitlab`. These nodes run `gitlab-ctl reconfigure` (not sure why the command needs to be triggered manually), but do **not** perform any migrations. :no_mouth: \n\nThe last step is doing post-deployment migrations on the deploy node. :checkered_flag: \n\n#### In Geo (single-machine) deployment\n\nOne can think of Geo as a sort of HA setup. So you need a deploy node: the Geo Primary node. :earth_americas:\n\nI understand you do not want the migrations to run automatically on `apt upgrade gitlab`, but IMHO only doing **one** of both is needed: :control_knobs: \n\n- [ ] Create `/etc/gitlab/skip-auto-reconfigure`\n- [ ] Set `gitlab_rails['auto_migrate'] = false` in `/etc/gitlab/gitlab.rb`\n\nSince the primary node is considered the equivalent as a deploy node, I'd say only the former. :crown: \n\nOn the secondary nodes, you could think they need to add `gitlab_rails['auto_migrate'] = false` in `/etc/gitlab/gitlab.rb`, but no, Omnibus already knows it's a Geo secondary, so that setting is implied. :crystal_ball: \n\n### Questions\n\n#### Why does `/etc/gitlab/skip-auto-reconfigure` exist anyway?\n\nOn the deploy node we could also:\n\n1. Set `gitlab_rails['auto_migrate'] = false` in `/etc/gitlab/gitlab.rb`\n1. Run `apt upgrade gitlab`\n1. Run `SKIP_POST_DEPLOYMENT_MIGRATIONS=true gitlab-rake db:migrate` (instead of `SKIP_POST_DEPLOYMENT_MIGRATIONS=true sudo gitlab-ctl reconfigure`)\n\nSeems an equal amount of steps? It might be related to when `gitlab-ctl reconfigure` stops the `unicorn` and `sidekiq` processes, but I'm not sure. :octopus: \n\nIf  `/etc/gitlab/skip-auto-reconfigure` is the way to go for HA, Geo should do the same. :100: \n\n#### Why hot reload `unicorn` and `sidekiq` _after_ post-deployment migrations and not _before_?\n\nIn my understanding, pre-deployment migrations can be done while the old code is still running. And post-deployment migrations are done while the new code is running.\n\nFor example, looking at the documentation on [dropping columns](https://docs.gitlab.com/ce/development/what_requires_downtime.html#dropping-columns). In step one we add `ignore_column` column to make sure the code will not look at the column, and at the same time a post-deployment migration is added to actually `DROP` the column. But in my understanding that means the code with the `ignore_column` statement needs to be running while the post-deploy migration is dropping the column. And by doing `sudo gitlab-ctl hup unicorn` **after** running the post-deployment migrations, that is **not** the case.\n\n### Proposed actions\n\n- [x] Remove `gitlab_rails['auto_migrate'] = false` from the Geo instructions\n- [x] Only ask the user to run `SKIP_POST_DEPLOYMENT_MIGRATIONS=true sudo gitlab-ctl reconfigure` on the primary, `gitlab-rake db:migrate` is **not** needed","state":"closed","created_at":"2019-08-28T14:11:22.812Z","updated_at":"2019-09-30T11:24:20.934Z","closed_at":"2019-09-30T08:21:15.415Z","closed_by":{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"},"labels":["Enterprise Edition","devops::systems","group::geo"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"}],"author":{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"},"type":"ISSUE","assignee":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"user_notes_count":26,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/14000","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":2},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/14000","notes":"https://gitlab.com/api/v4/projects/278964/issues/14000/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/14000/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#14000","relative":"#14000","full":"gitlab-org/gitlab#14000"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1935,"epic":{"id":12494,"iid":1935,"title":"Geo: Improved Geo upgrade documentation","url":"/groups/gitlab-org/-/epics/1935","group_id":9970,"human_readable_end_date":"Nov 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24708254,"iid":31333,"project_id":278964,"title":"Webhooks should send a X-Gitlab-Instance header","description":"### Problem to solve\n\nAs a webhook developper,\n\nI would like a \"X-Gitlab-Instance\" header added to webhooks events (eg: \"X-Gitlab-Instance: gitlab.com\", \"X-Gitlab-Instance: gitlab.example.com\")\n\nIn order to process requests differently if the webhook server is configured to handle different instances.\n\n### Intended users\n\nWebhook developpers\n\n### Links / references\n\nhttps://docs.gitlab.com/ee/user/project/integrations/webhooks.html#overview","state":"closed","created_at":"2019-08-28T13:54:53.668Z","updated_at":"2022-11-24T18:23:56.895Z","closed_at":"2022-10-06T01:31:49.423Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["Category:API","Category:Integrations","Category:Webhooks","Stretch","devops::manage","feature::addition","group::integrations","priority::3","section::dev","type::feature","workflow::verification"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":224408,"username":"julien-lecomte","name":"Julien Lecomte","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/224408/avatar.png","web_url":"https://gitlab.com/julien-lecomte"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":18,"merge_requests_count":0,"upvotes":4,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31333","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31333","notes":"https://gitlab.com/api/v4/projects/278964/issues/31333/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31333/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31333","relative":"#31333","full":"gitlab-org/gitlab#31333"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2318,"epic":{"id":16059,"iid":2318,"title":"Expanding and Improving Webhooks","url":"/groups/gitlab-org/-/epics/2318","group_id":9970},"iteration":null,"health_status":null},{"id":24253761,"iid":13999,"project_id":278964,"title":"When filling out the Trial license request form,  no email is received","description":"### Summary\n\nWhen [free trial](https://about.gitlab.com/free-trial/self-managed/) form is filled out and submitted the message states that the email will be sent out to your inbox with further instructions, however, there is no email received into the inbox. I have tested with my own email and checked the Spam folder etc. Still, no email is received.\n\nZD tickets:\n\nhttps://gitlab.zendesk.com/agent/tickets/130577\u003cbr\u003e\nhttps://gitlab.zendesk.com/agent/tickets/130392\n\n@jameslopez @tipyn","state":"closed","created_at":"2019-08-28T12:45:48.416Z","updated_at":"2019-10-22T02:00:44.249Z","closed_at":"2019-09-18T19:37:51.862Z","closed_by":{"id":1903246,"username":"tipyn","name":"Luca Kisielius","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1903246/avatar.png","web_url":"https://gitlab.com/tipyn"},"labels":["Deliverable","Unplanned","[deprecated] 🍎","backend","customer","devops::fulfillment","devops::growth","priority::1","self-managed","severity::2","trials","type::bug"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":640570,"username":"jjcordz","name":"Jennifer \"JJ\" Cordz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/640570/avatar.png","web_url":"https://gitlab.com/jjcordz"}],"author":{"id":1917618,"username":"mrjkc","name":"Julius Kvedaras","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d3e584486e9fd2c0db555061566b18c8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mrjkc"},"type":"ISSUE","assignee":{"id":640570,"username":"jjcordz","name":"Jennifer \"JJ\" Cordz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/640570/avatar.png","web_url":"https://gitlab.com/jjcordz"},"user_notes_count":30,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13999","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13999","notes":"https://gitlab.com/api/v4/projects/278964/issues/13999/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13999/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13999","relative":"#13999","full":"gitlab-org/gitlab#13999"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1464,"epic":{"id":8336,"iid":1464,"title":"🐞 Trial Bug Fixes","url":"/groups/gitlab-org/-/epics/1464","group_id":9970,"human_readable_end_date":"Sep 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24231072,"iid":13990,"project_id":278964,"title":"Create an event on epic actions","description":"Currently when an epic os open/closed/reopened/commented, no event is created for this action (except when commenting an epic, but in this case the event is created without group reference, so it's not very usable). We should start creating these events if we want to show them on group/dashboard activity lists (related to comment https://gitlab.com/gitlab-org/gitlab-ee/issues/7385#note_207997970)\n\nThis is needed for issue https://gitlab.com/gitlab-org/gitlab-ee/issues/7385.","state":"closed","created_at":"2019-08-28T07:14:21.200Z","updated_at":"2019-10-16T06:41:56.970Z","closed_at":"2019-09-18T13:07:43.848Z","closed_by":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"labels":["backend","devops::plan","group::product planning","type::feature","workflow::in review"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"}],"author":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"type":"ISSUE","assignee":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13990","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13990","notes":"https://gitlab.com/api/v4/projects/278964/issues/13990/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13990/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13990","relative":"#13990","full":"gitlab-org/gitlab#13990"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24225563,"iid":13988,"project_id":278964,"title":"Follow-up from \"Rename dev, org and com env detection helper\"","description":"The following discussion from !15543 should be addressed:\n\n- [ ] @ashmckenzie started a [discussion](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/15543#note_208956303): \n\n    \u003e We have a few occurrences of stubbing `Rails.env` now, so I feel we should create a `RailsHelpers` module at `spec/support/helpers/rails_helpers.rb` with:\n    \u003e \n    \u003e ```ruby\n    \u003e module RailsHelpers\n    \u003e   def stub_rails_env(env_name)\n    \u003e     allow(Rails).to receive(:env).and_return(ActiveSupport::StringInquirer.new(env_name))\n    \u003e   end\n    \u003e end\n    \u003e ```","state":"closed","created_at":"2019-08-28T01:28:30.916Z","updated_at":"2019-08-28T02:05:54.681Z","closed_at":"2019-08-28T01:31:20.928Z","closed_by":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"labels":["backstage [DEPRECATED]","maintenance::refactor","unit testing"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"}],"author":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"type":"ISSUE","assignee":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13988","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13988","notes":"https://gitlab.com/api/v4/projects/278964/issues/13988/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13988/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13988","relative":"#13988","full":"gitlab-org/gitlab#13988"},"severity":"UNKNOWN","moved_to_id":24225585,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24222028,"iid":13985,"project_id":278964,"title":"Rename `security` approval_rule report_type to `vulnerability`.","description":"## Summary\n\nThe `ApprovalMergeRequestRule` has an enum named `report_type` with an item named `security`. I propose that we rename this item to `vulnerability`. At the moment, the `security` report type is used to describe the `Vulnerability-Check` merge request approval rule. The name `security` is a little ambiguous and could be made more explicit by renaming to something like `vulnerability`.\n\n## Improvements\n\nThe main benefit of this change is readability. It ensures that future authors of the report approval rules understand that the `security` report type represents the vulnerability report produced from dependency scanning.\n\n## Risks\n\nIn order to complete this change we will need to rename `security` to `vulnerability` in code. The database column uses fixed numeric identifiers so a data migration is not necessary.\n\n## Involved components\n\n* https://gitlab.com/gitlab-org/gitlab-ee/blob/4f6c4758c0e2c1075a295336bdfea0d43b12b488/ee/app/models/approval_merge_request_rule.rb#L50\n* https://gitlab.com/gitlab-org/gitlab-ee/blob/4f6c4758c0e2c1075a295336bdfea0d43b12b488/ee/app/models/approval_merge_request_rule.rb#L56\n* https://gitlab.com/gitlab-org/gitlab-ee/blob/4f6c4758c0e2c1075a295336bdfea0d43b12b488/ee/spec/factories/approval_rules.rb#L19\n* https://gitlab.com/gitlab-org/gitlab-ee/tree/master/ee/app/services/security\n\n## Optional: Intended side effects\n\nImproved readability.\n\n\n## Optional: Missing test coverage\n\nN/A\n\n## Technical Notes\n\nThe enum and `security_report` scope is introduced in a5649ee08ef8be4eb2bd1a98c34b280538a4fdb1 which can be checked to understand the scope of changes required.","state":"closed","created_at":"2019-08-27T21:29:07.775Z","updated_at":"2020-11-18T10:23:34.327Z","closed_at":"2020-11-18T10:23:34.280Z","closed_by":{"id":5721376,"username":"minac","name":"Mehmet Emin INAC","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d8bdee790902422e3554e411a173c7c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/minac"},"labels":["Category:Vulnerability Management","approvals","backend","devops::secure","group::threat insights","maintenance::refactor","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":1233755,"iid":53,"group_id":9970,"title":"13.6","description":"https://about.gitlab.com/releases/2020/11/22/gitlab-13-6-released/","state":"closed","created_at":"2020-04-09T17:39:22.328Z","updated_at":"2022-04-13T14:51:04.376Z","due_date":"2020-11-17","start_date":"2020-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/53"},"assignees":[{"id":5721376,"username":"minac","name":"Mehmet Emin INAC","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d8bdee790902422e3554e411a173c7c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/minac"}],"author":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"type":"ISSUE","assignee":{"id":5721376,"username":"minac","name":"Mehmet Emin INAC","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d8bdee790902422e3554e411a173c7c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/minac"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13985","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13985","notes":"https://gitlab.com/api/v4/projects/278964/issues/13985/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13985/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13985","relative":"#13985","full":"gitlab-org/gitlab#13985"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24220082,"iid":13984,"project_id":278964,"title":"Use the built-in GraphQL authorization code","description":"## Summary\n\nIn `1.8.x`, the [graphql-ruby](https://github.com/rmosolgo/graphql-ruby) gem added authorization code (based on their Pro version) into the main gem.  It continues to be integrated in `1.9.x`.\n\nWe have written our own authorization code.  During upgrading our gem, there were some overlaps.  We should consider whether we can replace our own version with the built in version.\n\nhttps://graphql-ruby.org/authorization/overview\n\n## Improvements\n\nThis would move a complicated chunk of our code into the gem , that gets used and enhanced and supported by the wider community.\n\nFuture gem upgrades should be easier and with fewer conflicts\n\n## Risks\n\nDepending how different the two methodologies are, it could be significant rework\n\n## Involved components\n\nAll graphql files","state":"closed","created_at":"2019-08-27T20:38:27.837Z","updated_at":"2022-03-15T21:05:30.184Z","closed_at":"2021-03-19T14:19:31.607Z","closed_by":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"labels":["Deliverable","Dogfooding::Build in GitLab","GraphQL","authorization","backend","bug::performance","devops::create","maintenance::refactor","missed-deliverable","missed:13.10","missed:13.2","missed:13.5","missed:13.6","missed:13.7","missed:13.8","missed:13.9","section::dev","workflow::production"],"milestone":{"id":1406669,"iid":59,"group_id":9970,"title":"13.11","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-08-13T14:23:09.688Z","updated_at":"2022-04-21T07:22:08.835Z","due_date":"2021-04-17","start_date":"2021-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/59"},"assignees":[{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"}],"author":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"type":"ISSUE","assignee":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"user_notes_count":47,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13984","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13984","notes":"https://gitlab.com/api/v4/projects/278964/issues/13984/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13984/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13984","relative":"#13984","full":"gitlab-org/gitlab#13984"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3485,"epic":{"id":61938,"iid":3485,"title":"Q2 Plan:Portfolio Management/Certify BE Performance Focus: Roadmap View","url":"/groups/gitlab-org/-/epics/3485","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24214033,"iid":13981,"project_id":278964,"title":"Automatically verify Packages on secondaries","description":"### Problem to solve\n\n\u003c!-- What problem do we solve? --\u003e\n\nPackageFiles are checksummed on the primary: https://gitlab.com/gitlab-org/gitlab/-/issues/13839. And blob data types are checksummed on the secondary after download, compared with the primary, and the download is failed if checksums mismatch. But:\n\n- PackageFile verification state on secondaries is not persisted\n- Some new PackageFiles are not verified on transfer. E.g. because the file was too large to get checksummed synchronously on the primary. Or e.g. because there are many existing PackageFiles that are not yet checksummed on the primary that are being backfilled.\n\nWe need secondaries to \"backfill\" verification states in PackageFileRegistry.\n\n### Intended users\n\n- System administrators\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\n- Reuse Gitlab::Geo::VerificationState on PackageFileRegistry\n- Update VerifiableReplicator#verify_batch and VerifiableReplicator#verify to work on secondaries (especially, they need to compare the calculated checksum with the primary)\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)? --\u003e\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements --\u003e\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\n- Unit and feature tests for new code\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n- Backfill verification for all PackageFiles.\n- Automatically run verification for new PackageFiles that were not verified on transfer (e.g. because the file was too large to get checksummed synchronously on the primary).\n\n### What is the type of buyer? \n\n\u003c!-- Which leads to: in which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\n\n- Premium\n- Ultimate\n\n### Links / references","state":"closed","created_at":"2019-08-27T18:11:30.210Z","updated_at":"2021-01-26T19:59:54.064Z","closed_at":"2021-01-26T18:04:57.757Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["Deliverable","Enterprise Edition","devops::systems","group::geo","missed-deliverable","missed:12.5","missed:13.4","missed:13.5","missed:13.8","section::enablement","type::feature","workflow::in review"],"milestone":{"id":1233760,"iid":56,"group_id":9970,"title":"13.9","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.334Z","updated_at":"2022-04-21T07:21:28.468Z","due_date":"2021-02-17","start_date":"2021-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/56"},"assignees":[{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13981","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13981","notes":"https://gitlab.com/api/v4/projects/278964/issues/13981/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13981/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13981","relative":"#13981","full":"gitlab-org/gitlab#13981"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1817,"epic":{"id":11333,"iid":1817,"title":"Geo: Self Service Framework - Package File verification","url":"/groups/gitlab-org/-/epics/1817","group_id":9970,"human_readable_end_date":"Feb 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24212602,"iid":13980,"project_id":278964,"title":"Geo Framework: Display verification progress in Admin UI and rake tasks","description":"### Problem to solve\n\nSystem administrators should be able to see current Package file verification metrics in UI (web UI and `rake geo:status` etc).\n\n### Intended users\n\n- Systems administrators\n\n### Proposal\n\nSimilar to Project checksum and verification progress bars in `Admin Area \u003e Geo \u003e Nodes`:\n\n- [x] In `Admin Area \u003e Geo \u003e Nodes`, the primary node should display a Package File checksum progress bar using the new GeoNodeStatus data from https://gitlab.com/gitlab-org/gitlab-ee/issues/13840\n- [x] In `Admin Area \u003e Geo \u003e Nodes`, each secondary node should display a Package File verification progress bar using the new GeoNodeStatus data from https://gitlab.com/gitlab-org/gitlab-ee/issues/13841\n- [x] Output SSF verification data where appropriate in Rake tasks\n  - [x] `GeoNodeStatusCheck#print_status` should output SSF verification data\n  - [x] `GeoNodeStatusCheck#print_replication_verification_status` should output SSF verification data\n  - [x] `GeoNodeStatusCheck#replication_verification_complete?` should account for SSF verification data\n\n### Permissions and Security\n\nN/A\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements --\u003e\n\n- [x] Update doc/administration/geo/replication/img/geo_node_dashboard.png?\n- [x] Update doc/administration/geo/replication/img/geo_node_healthcheck.png?\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\n- Needs the usual ~frontend tests\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\nSimilar to Project checksum and verification progress bars in `Admin Area \u003e Geo \u003e Nodes`:\n\n- [x] In `Admin Area \u003e Geo \u003e Nodes`, the primary node should display a Package File checksum progress bar using the new GeoNodeStatus data from https://gitlab.com/gitlab-org/gitlab-ee/issues/13840\n- [x] In `Admin Area \u003e Geo \u003e Nodes`, each secondary node should display a Package File verification progress bar using the new GeoNodeStatus data from https://gitlab.com/gitlab-org/gitlab-ee/issues/13841\n\n### What is the type of buyer? \n\n- Premium\n- Ultimate\n\n### Links / references","state":"closed","created_at":"2019-08-27T17:26:44.543Z","updated_at":"2021-02-05T08:57:55.173Z","closed_at":"2021-01-27T16:27:28.694Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["Deliverable","Enterprise Edition","devops::systems","frontend","group::geo","missed-deliverable","missed:12.4","missed:12.5","missed:13.4","missed:13.5","missed:13.6","missed:13.8","quad-planning::complete-no-action","section::enablement","type::feature","workflow::in review"],"milestone":{"id":1233760,"iid":56,"group_id":9970,"title":"13.9","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.334Z","updated_at":"2022-04-21T07:21:28.468Z","due_date":"2021-02-17","start_date":"2021-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/56"},"assignees":[{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"user_notes_count":9,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13980","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":10,"completed_count":10},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"10 of 10 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13980","notes":"https://gitlab.com/api/v4/projects/278964/issues/13980/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13980/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13980","relative":"#13980","full":"gitlab-org/gitlab#13980"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1817,"epic":{"id":11333,"iid":1817,"title":"Geo: Self Service Framework - Package File verification","url":"/groups/gitlab-org/-/epics/1817","group_id":9970,"human_readable_end_date":"Feb 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24207423,"iid":13857,"project_id":278964,"title":"Vulnerabilities API always gives empty blob_path","description":"### Summary\n\nThe [vulnerabilities API](https://docs.gitlab.com/ee/api/vulnerabilities.html) seems to always return empty `blob_path` properties on the vulnerabilities in its response, whereas it should not be empty (at least, not in all cases).\n\nThe `blob_path` is used by consuming applications (e.g., [pipeline Security Dashboard](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/15682)) to generate a link to the exact file which contains the vulnerability.\n\n### Steps to reproduce\n\n1. Create a project with vulnerabilities in it - for instance, by cloning https://staging.gitlab.com/secure-team-test/dependency-list-test.\n1. Access the vulnerabilities API, e.g., `GET https://staging.gitlab.com/api/v4/projects/4392789/vulnerabilities?pipeline_id=12642579\u0026scope=all`.\n1. Observe that all returned vulnerabilities have `\"blob_path\": \"\"`\n\n### Example Project\n\nhttps://staging.gitlab.com/secure-team-test/dependency-list-test\n\n### What is the current *bug* behavior?\n\n`blob_path` is the empty string on all vulnerabilities.\n\n### What is the expected *correct* behavior?\n\n`blob_path` is actually a path, when appropriate (always?)\n\n### Relevant logs and/or screenshots\n\nOutput of `GET https://staging.gitlab.com/api/v4/projects/4392789/vulnerabilities?pipeline_id=12642579\u0026scope=all` at the time of writing: [vulnerabilities.json](/uploads/0a9b3ab4629ece14458be2fc016c390f/vulnerabilities.json)\n\n### Previous discussion\n\n```\nrossfuhrman  5 days ago\nI'm guessing it has to do with the sha not being present\nhttps://gitlab.com/gitlab-org/gitlab-ee/blob/master/ee/app/presenters/vulnerabilities/occurrence_presenter.rb#L8-9\n\nrossfuhrman  5 days ago\nI haven't traced it all the way down, but the code in question may be calling for_pipelines, where calling for_pipelines_with_sha would include the sha which would populate the blob_path https://gitlab.com/gitlab-org/gitlab-ee/blob/master/ee/app/models/vulnerabilities/occurrence.rb#L90\n\nmarkrian  4 days ago\nDoes sha here refer to the commit sha the pipeline was run against? If so, why would there ever be a pipeline without one? (edited)\n\nrossfuhrman  4 days ago\nYes. You are correct, there should never be a pipeline without a sha (as far as I know). This is more a limitation of the queries we are running, and by default the queries for the vulnerabilities do not join into the pipeline in a way that brings back the sha\n\nrossfuhrman  4 days ago\nI'm thinking when the code in question was written, there was no need to access the sha, so for_pipelines was used. Or, it's possible it was written before for_pipelines_with_sha existed.\n```\n### Current Understanding of Problem\n\nThis how we initialize occurrences for the API:\nhttps://gitlab.com/gitlab-org/gitlab-ee/blob/a43ada893cbdcca81b47dfbf1a7adb0797b028ce/ee/app/finders/security/pipeline_vulnerabilities_finder.rb#L47\n\nWe were relying on this to expose `sha`. It is not exposed on occurrence otherwise.\nhttps://gitlab.com/gitlab-org/gitlab-ee/blob/a43ada893cbdcca81b47dfbf1a7adb0797b028ce/ee/app/models/vulnerabilities/occurrence.rb#L92-96\n\nIn the context of `ee/app/finders/security/pipeline_vulnerabilities_finder.rb`, `pipeline.security_reports.commit_hash` should get us the sha we need to build the blob_path. We need to change the code so that `occurrences` returned here have this exposed in order for the API to provide the `blob_path`.","state":"closed","created_at":"2019-08-27T15:10:32.007Z","updated_at":"2019-12-18T11:33:10.152Z","closed_at":"2019-11-19T20:45:29.573Z","closed_by":{"id":4825543,"username":"aevstifeev","name":"Arthur Evstifeev","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4825543/avatar.png","web_url":"https://gitlab.com/aevstifeev"},"labels":["Deliverable","backend","backend-weight::2","devops::govern","group::static analysis","missed-SLO","missed-deliverable","missed:12.5","priority::1","severity::3","type::bug","workflow::ready for development"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":4825543,"username":"aevstifeev","name":"Arthur Evstifeev","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4825543/avatar.png","web_url":"https://gitlab.com/aevstifeev"}],"author":{"id":553096,"username":"markrian","name":"Mark Florian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/553096/avatar.png","web_url":"https://gitlab.com/markrian"},"type":"ISSUE","assignee":{"id":4825543,"username":"aevstifeev","name":"Arthur Evstifeev","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4825543/avatar.png","web_url":"https://gitlab.com/aevstifeev"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13857","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13857","notes":"https://gitlab.com/api/v4/projects/278964/issues/13857/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13857/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13857","relative":"#13857","full":"gitlab-org/gitlab#13857"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24200154,"iid":13847,"project_id":278964,"title":"Add epic option while creating a new issue in UI","description":"Since we'll be adding the ability to ad issues directly from the epic page, it makes sense to add the `Epic` field here too:\n\n![Screen_Shot_2019-08-27_at_6.48.31_AM](https://gitlab.com/gitlab-org/gitlab/uploads/7547257c215208c6cab2fc8c2f40fab0/Screen_Shot_2019-08-27_at_6.48.31_AM.png)\n\nRelated: https://gitlab.com/gitlab-org/gitlab-ee/issues/13808\n\n## Proposal\n![New_issue_with_epic](https://gitlab.com/gitlab-org/gitlab/uploads/bf17352730d9db01e0b36a7b1dddc114/New_issue_with_epic.png)\n*  Add Epic option, under `Assignee`\n*  User can add an Epic similarly to how they would add an epic from the sidebar\n*  Push items \"down\" the list, therefor `weight` is now in the next column above `due date`\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2019-08-27T11:50:22.188Z","updated_at":"2021-11-08T16:56:21.327Z","closed_at":"2020-06-09T16:02:39.022Z","closed_by":{"id":444,"username":"dzaporozhets","name":"Dmytro Zaporozhets (DZ)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/444/avatar.png","web_url":"https://gitlab.com/dzaporozhets"},"labels":["Category:Portfolio Management","Dogfooding","Enterprise Edition","GitLab Premium","GitLab Ultimate","UX","backend","devops::plan","direction","documentation","epics","frontend","group::product planning","missed-deliverable","missed:12.10","missed:12.5","missed:12.7","missed:12.8","missed:12.9","type::feature","workflow::in dev"],"milestone":{"id":1112145,"iid":47,"group_id":9970,"title":"13.1","description":"","state":"closed","created_at":"2020-01-03T12:28:30.160Z","updated_at":"2020-10-08T12:01:07.361Z","due_date":"2020-06-17","start_date":"2020-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/47"},"assignees":[{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},{"id":3617348,"username":"uhlexsis","name":"Alexis Ginsberg","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3617348/avatar.png","web_url":"https://gitlab.com/uhlexsis"}],"author":{"id":201566,"username":"annabeldunstone","name":"Annabel Dunstone Gray","state":"active","avatar_url":"https://secure.gravatar.com/avatar/85c0203926134720f9a9aa8c6e264c78?s=80\u0026d=identicon","web_url":"https://gitlab.com/annabeldunstone"},"type":"ISSUE","assignee":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"user_notes_count":25,"merge_requests_count":1,"upvotes":7,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13847","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13847","notes":"https://gitlab.com/api/v4/projects/278964/issues/13847/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13847/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13847","relative":"#13847","full":"gitlab-org/gitlab#13847"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":134,"epic":{"id":247,"iid":134,"title":"Make easier to add/remove issues/epics to/from epics","url":"/groups/gitlab-org/-/epics/134","group_id":9970,"human_readable_end_date":"Feb 29, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"at_risk"},{"id":24198884,"iid":13843,"project_id":278964,"title":"Regularly reverify Packages on primary","description":"### Problem\n\nWe need to regularly re-verify data on the **primary** to protect against data corruption. In combination with https://gitlab.com/gitlab-org/gitlab-ee/issues/13842, this will ensure that packages are regularly re-verified on all **secondary** nodes as well.\n\n### Proposal\n\n- [x] Add e.g. `Geo::ReverificationWorker` which finds `verification_succeeded` records where `verified_at` is older than re-verification interval. Update them to `verification_pending` so they get picked up by `Geo::VerificationBatchWorker`\n- [x] Add a DB index if needed\n- [x] Enqueue `Geo::VerificationReverifyWorker` in `.trigger_background_verification` (this method is already conveniently called every minute) if Geo primary\n- [x] Smoke test","state":"closed","created_at":"2019-08-27T11:12:34.595Z","updated_at":"2021-02-16T22:12:37.632Z","closed_at":"2021-02-12T10:11:21.146Z","closed_by":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"labels":["Deliverable","Enterprise Edition","devops::systems","group::geo","maturity::viable","missed-deliverable","missed:12.4","missed:12.5","missed:13.4","missed:13.5","missed:13.6","missed:13.8","section::enablement","workflow::in review"],"milestone":{"id":1233760,"iid":56,"group_id":9970,"title":"13.9","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.334Z","updated_at":"2022-04-21T07:21:28.468Z","due_date":"2021-02-17","start_date":"2021-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/56"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"}],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13843","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13843","notes":"https://gitlab.com/api/v4/projects/278964/issues/13843/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13843/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13843","relative":"#13843","full":"gitlab-org/gitlab#13843"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1817,"epic":{"id":11333,"iid":1817,"title":"Geo: Self Service Framework - Package File verification","url":"/groups/gitlab-org/-/epics/1817","group_id":9970,"human_readable_end_date":"Feb 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24198822,"iid":13842,"project_id":278964,"title":"When a primary Package is checksummed, reset verification on secondaries","description":"### Problem\n\nWhen a resource is checksummed on the **primary**, we need to re-verify on the secondary. By resetting the verification fields on secondaries, the verification jobs will notice these are pending verification, and will then verify them.\n\nThis supports:\n\n- Reverification\n- Updates of mutable data types (e.g. snippet repos)\n\n### Proposal\n\nE.g.:\n\n- In `VerifiableReplicator`\n  - Define `event :checksum_succeeded`\n  - Define `def handle_after_checksum_succeeded` which `publish(:checksum_succeeded) if Geo.primary?` (see e.g. `handle_after_create_commit`)\n  - Define `def consume_event_checksum_succeeded` which transitions verification state of the registry to `verification_pending` so the batch worker picks it up.\n  - Call the hook `handle_after_checksum_succeeded` after checksum_succeeded and if primary. E.g. in `#verify` or some sub-method\n    - We can't use a `before_transition` since we want the event to be produced even if the checksum is not changed and the success state remains a success\n\n### Testing\n\nTBD","state":"closed","created_at":"2019-08-27T11:10:39.048Z","updated_at":"2021-02-16T22:12:43.353Z","closed_at":"2021-02-16T14:14:48.163Z","closed_by":{"id":4554077,"username":"nhxnguyen","name":"Nick Nguyen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4554077/avatar.png","web_url":"https://gitlab.com/nhxnguyen"},"labels":["Deliverable","Enterprise Edition","devops::systems","group::geo","maturity::viable","missed-deliverable","missed:12.4","missed:12.5","missed:13.4","missed:13.5","missed:13.6","section::enablement","workflow::in review"],"milestone":{"id":1233760,"iid":56,"group_id":9970,"title":"13.9","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.334Z","updated_at":"2022-04-21T07:21:28.468Z","due_date":"2021-02-17","start_date":"2021-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/56"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"}],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13842","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13842","notes":"https://gitlab.com/api/v4/projects/278964/issues/13842/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13842/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13842","relative":"#13842","full":"gitlab-org/gitlab#13842"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1817,"epic":{"id":11333,"iid":1817,"title":"Geo: Self Service Framework - Package File verification","url":"/groups/gitlab-org/-/epics/1817","group_id":9970,"human_readable_end_date":"Feb 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24198771,"iid":13841,"project_id":278964,"title":"Track secondary Packages verification counts","description":"### Proposal\n\n* Add to `geo_node_statuses` table:\n  * `package_verified_count`\n  * `package_verification_failed_count`\n  * `package_checksum_mismatch_count`\n  * `package_retrying_verification_count`\n* Add corresponding scopes/finders and make GeoNodeStatus use them\n\n### Testing\n\nTBD","state":"closed","created_at":"2019-08-27T11:08:13.228Z","updated_at":"2021-01-19T14:54:55.168Z","closed_at":"2021-01-06T18:11:50.711Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["Deliverable","Enterprise Edition","[deprecated] Accepting merge requests","devops::systems","group::geo","maturity::viable","missed-deliverable","missed:12.4","missed:12.5","missed:13.4","missed:13.5","missed:13.6","section::enablement","workflow::blocked"],"milestone":{"id":1233759,"iid":55,"group_id":9970,"title":"13.8","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:13.983Z","updated_at":"2022-04-13T14:51:23.220Z","due_date":"2021-01-17","start_date":"2020-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/55"},"assignees":[],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13841","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13841","notes":"https://gitlab.com/api/v4/projects/278964/issues/13841/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13841/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13841","relative":"#13841","full":"gitlab-org/gitlab#13841"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1817,"epic":{"id":11333,"iid":1817,"title":"Geo: Self Service Framework - Package File verification","url":"/groups/gitlab-org/-/epics/1817","group_id":9970,"human_readable_end_date":"Feb 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24198707,"iid":13840,"project_id":278964,"title":"Track primary package file checksum counts","description":"### Proposal\n\n* Add to `geo_node_statuses` table:\n  * `package_files_checksummed_count`\n  * `package_files_checksum_failed_count`\n* Add corresponding scopes/finders and make GeoNodeStatus use them\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\nTBD\n\n### Links / references\n\nOnly depends on https://gitlab.com/gitlab-org/gitlab/issues/13838","state":"closed","created_at":"2019-08-27T11:05:11.965Z","updated_at":"2020-04-29T08:03:42.697Z","closed_at":"2020-04-22T00:43:29.490Z","closed_by":{"id":3167938,"username":"tigerwnz","name":"Tiger Watson","state":"active","avatar_url":"https://secure.gravatar.com/avatar/eb2c062f746fe8a57d693ee307942aa5?s=80\u0026d=identicon","web_url":"https://gitlab.com/tigerwnz"},"labels":["Deliverable","Enterprise Edition","devops::systems","group::geo","maturity::viable","missed-deliverable","missed:12.10","missed:12.4","missed:12.5","workflow::in review"],"milestone":{"id":991112,"iid":42,"group_id":9970,"title":"13.0","description":"","state":"closed","created_at":"2019-09-04T15:20:39.024Z","updated_at":"2020-10-08T12:00:55.725Z","due_date":"2020-05-17","start_date":"2020-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/42"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"}],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":4,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13840","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13840","notes":"https://gitlab.com/api/v4/projects/278964/issues/13840/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13840/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13840","relative":"#13840","full":"gitlab-org/gitlab#13840"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1817,"epic":{"id":11333,"iid":1817,"title":"Geo: Self Service Framework - Package File verification","url":"/groups/gitlab-org/-/epics/1817","group_id":9970,"human_readable_end_date":"Feb 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24198657,"iid":13839,"project_id":278964,"title":"Ensure Package File checksum on primary","description":"### Problem to solve\n\n\u003c!-- What problem do we solve? --\u003e\n\nWe need the primary to ensure checksums are generated for all new and existing package files so that the secondary can check if its file matches.\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\nPersonas can be found at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\n* Systems administrators\n\n### To do\n\nI've been using https://gitlab.com/gitlab-org/gitlab/-/merge_requests/45962 as a dev MR.\n\n- [x] https://gitlab.com/gitlab-org/gitlab/-/merge_requests/45695\n- [x] https://gitlab.com/gitlab-org/gitlab/-/merge_requests/45964\n- [x] https://gitlab.com/gitlab-org/gitlab/-/merge_requests/46998\n- [x] https://gitlab.com/gitlab-org/gitlab/-/merge_requests/47361\n- [x] https://gitlab.com/gitlab-org/gitlab/-/merge_requests/47260\n- [x] https://gitlab.com/gitlab-org/gitlab/-/merge_requests/47372 Add background jobs to get things that need verification and backfill them up to verification capacity\n  - [x] Be careful to properly handle concurrency\n  - [x] Reuse [a component that was added recently by another team to manage backfill work](https://gitlab.com/gitlab-org/gitlab/-/blob/master/doc/development/sidekiq_style_guide.md#limited-capacity-worker)\n- [x] https://gitlab.com/gitlab-org/gitlab/-/merge_requests/47372 Add appropriate DB indexes\n  - already added index on `verification_state`, which should be a good base\n  - for queries used to find checksums that need to be backfilled\n  - for queries used to produce counts\n- [x] https://gitlab.com/gitlab-org/gitlab/-/merge_requests/48006 Recover rows that started X hours ago (set to failed) (open follow up issue if this is more than weight 1)\n- [x] https://gitlab.com/gitlab-org/gitlab/-/merge_requests/49146 Documentation\n\nNot a blocker for this issue:\n\n- https://gitlab.com/gitlab-org/gitlab/-/merge_requests/49292\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)? --\u003e\n\nN/A\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements --\u003e\n\nhttps://docs.gitlab.com/ee/administration/geo/replication/#limitations-on-replicationverification needs to be updated\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\nTBD\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n* Every Package file record on the primary will eventually have a checksum saved. \"Eventually\" depends on the hard-coded rate limit, how many unchecksummed Package files there are, and the rate of creation of new Package files that are too big to be checksummed synchronously.\n\n### What is the type of buyer?\n\n\u003c!-- Which leads to: in which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\n\n* Premium\n* Ultimate\n\n### Links / references","state":"closed","created_at":"2019-08-27T11:03:06.246Z","updated_at":"2020-12-15T19:59:12.512Z","closed_at":"2020-12-09T02:17:54.066Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["Deliverable","Enterprise Edition","backstage [DEPRECATED]","devops::systems","group::geo","missed-deliverable","missed:12.10","missed:12.4","missed:12.5","missed:13.4","missed:13.5","section::enablement","workflow::in review"],"milestone":{"id":1233757,"iid":54,"group_id":9970,"title":"13.7","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:43:14.893Z","updated_at":"2022-04-13T14:51:12.240Z","due_date":"2020-12-17","start_date":"2020-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/54"},"assignees":[{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"}],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13839","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":11,"completed_count":11},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"11 of 11 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13839","notes":"https://gitlab.com/api/v4/projects/278964/issues/13839/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13839/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13839","relative":"#13839","full":"gitlab-org/gitlab#13839"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1817,"epic":{"id":11333,"iid":1817,"title":"Geo: Self Service Framework - Package File verification","url":"/groups/gitlab-org/-/epics/1817","group_id":9970,"human_readable_end_date":"Feb 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24198581,"iid":13838,"project_id":278964,"title":"Add service to checksum PackageFiles on primary","description":"### Problem to solve\n\n\u003c!-- What problem do we solve? --\u003e\n\nhttps://gitlab.com/gitlab-org/gitlab-ee/issues/13839 is too big so this breaks out the first chunk of work for it.\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\nPersonas can be found at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\n* Systems administrators\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\n* Add to `packages` table (or a new associated table), similar to `project_repository_states`:\n  * `verification_failure`\n  * `verification_retry_at`\n  * `verification_retry_count`\n  * `last_verification_ran_at`\n* Modify `PackageFile.calculate_checksum!` so it updates the new fields\n* Add `Geo::PackageFileVerificationPrimaryService` (or repurpose `UploadChecksumWorker`) which takes a PackageFile\n  * Calls `PackageFile.calculate_checksum!` and saves\n  * In a later iteration, this will create a `Geo::ResetPackageFileChecksumEventStore`\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)? --\u003e\n\nN/A\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements --\u003e\n\nN/A\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\nTBD\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\nThere is a `Geo::PackageFileVerificationPrimaryService` (or repurpose `UploadChecksumWorker`) which saves a checksum on a primary, given a Package, and saves success/failure data.\n\n### What is the type of buyer? \n\n\u003c!-- Which leads to: in which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\n\n* Premium\n* Ultimate\n\n### Links / references","state":"closed","created_at":"2019-08-27T10:59:15.849Z","updated_at":"2020-03-31T17:58:58.551Z","closed_at":"2020-03-27T18:45:07.244Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["Enterprise Edition","backstage [DEPRECATED]","devops::systems","group::geo","maturity::viable","missed:12.8","workflow::in review"],"milestone":{"id":1104429,"iid":46,"group_id":9970,"title":"12.10","description":"https://about.gitlab.com/releases/2020/04/22/gitlab-12-10-released","state":"closed","created_at":"2019-12-20T15:15:53.243Z","updated_at":"2020-10-08T12:00:39.852Z","due_date":"2020-04-17","start_date":"2020-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/46"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"}],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":11,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13838","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13838","notes":"https://gitlab.com/api/v4/projects/278964/issues/13838/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13838/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13838","relative":"#13838","full":"gitlab-org/gitlab#13838"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1817,"epic":{"id":11333,"iid":1817,"title":"Geo: Self Service Framework - Package File verification","url":"/groups/gitlab-org/-/epics/1817","group_id":9970,"human_readable_end_date":"Feb 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24198519,"iid":13837,"project_id":278964,"title":"Add service to verify package files on secondaries","description":"### Problem to solve\n\n\u003c!-- What problem do we solve? --\u003e\n\nhttps://gitlab.com/gitlab-org/gitlab-ee/issues/13981 is too big so this breaks out the first chunk of work for it.\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\nPersonas can be found at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\n* Systems administrators\n\n### Proposal\n\n* Add to `package_file_registry` table similar to `project_registry`:\n  * `last_verification_failure` string\n  * `verification_checksum_sha` binary\n  * `checksum_mismatch` boolean\n  * `verification_checksum_mismatched` binary\n  * `last_verification_ran_at` datetime_with_timezone\n  * `verification_retry_count` integer\n  * `verification_retry_at` datetime_with_timezone\n* Add e.g. a `Geo::PackageFileVerificationSecondaryService` which takes a `Geo::PackageFileRegistry`, similar to `Geo::RepositoryVerificationSecondaryService`\n  * Calculate checksum\n  * Compare it with stored checksum\n  * Update `PackageFileRegistry`\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)? --\u003e\n\nN/A\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements --\u003e\n\nN/A\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\nTBD\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\nThere is a `Geo::PackageVerificationSecondaryService` which verifies a Package on a secondary, given a `Geo::FileRegistry`, and saves success/failure data.\n\n### What is the type of buyer? \n\n\u003c!-- Which leads to: in which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\n\n* Premium\n* Ultimate\n\n### Links / references","state":"closed","created_at":"2019-08-27T10:56:37.590Z","updated_at":"2020-05-12T23:03:35.413Z","closed_at":"2020-05-06T14:11:18.817Z","closed_by":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"labels":["Deliverable","Enterprise Edition","backstage [DEPRECATED]","devops::systems","group::geo","maturity::viable","missed-deliverable","missed:12.10","missed:12.4","missed:12.5","workflow::in review"],"milestone":{"id":991112,"iid":42,"group_id":9970,"title":"13.0","description":"","state":"closed","created_at":"2019-09-04T15:20:39.024Z","updated_at":"2020-10-08T12:00:55.725Z","due_date":"2020-05-17","start_date":"2020-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/42"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"}],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":7,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13837","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13837","notes":"https://gitlab.com/api/v4/projects/278964/issues/13837/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13837/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13837","relative":"#13837","full":"gitlab-org/gitlab#13837"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1817,"epic":{"id":11333,"iid":1817,"title":"Geo: Self Service Framework - Package File verification","url":"/groups/gitlab-org/-/epics/1817","group_id":9970,"human_readable_end_date":"Feb 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24708188,"iid":31286,"project_id":278964,"title":"Add monitoring for diff limits","description":"## Problem to solve\n\nThere are hard limits for how large a diff GitLab will show in the merge request, in total and by file, but we don't know how frequently these limits are being reached.\n\nWhen these limits are reached the user experience is degraded because significant portions of the merge request may be collapsed or hidden by default causing the user to click expand one by one on these files. It may be worse if the file count is too large causing the entire merge request diff to be truncated to the first 1000 files.\n\n## Further details\n\nWe want to know how often and which limits are being reached today.\n\nWe also want to make changes to the interface that improve the experience for users by loading data progressively, and ultimately on demand by introducing a file by file diff mode.\n\nKnowing which limits are being hit, and understanding change over time will help us prioritize and measure the impact of changes we make to improve usability.\n\n## Proposal\n\nWhen a diff limit is triggered, log the diff limit that was triggered so that we can monitor this in a dashboard over time.\n\n## Links / references","state":"closed","created_at":"2019-08-27T07:25:58.934Z","updated_at":"2022-10-23T09:54:15.330Z","closed_at":"2019-12-19T04:14:03.731Z","closed_by":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"labels":["Application Limits","Category:Code Review Workflow","backend","backstage [DEPRECATED]","devops::create","group::code review","merge requests","missed:12.5","repository"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"}],"author":{"id":1187333,"username":"jramsay-gitlab","name":"James Ramsay (ex-GitLab)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1187333/avatar.png","web_url":"https://gitlab.com/jramsay-gitlab"},"type":"ISSUE","assignee":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"user_notes_count":17,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31286","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31286","notes":"https://gitlab.com/api/v4/projects/278964/issues/31286/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31286/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31286","relative":"#31286","full":"gitlab-org/gitlab#31286"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4936,"epic":{"id":146095,"iid":4936,"title":"Code Review-related application limits","url":"/groups/gitlab-org/-/epics/4936","group_id":9970,"human_readable_end_date":"Sep 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24708187,"iid":31285,"project_id":278964,"title":"Usage of `ChronicDuration` is not thread-safe","description":"Time conversion values are stored as class variables and we're switching them in https://gitlab.com/gitlab-org/gitlab-ce/blob/master/lib/gitlab/time_tracking_formatter.rb#L27.\n\nThis could lead to problems when multiple threads are changing the same class variable.\n\nSince it looks like the gem is unmaintained and it's only a single class, it may be good to just copy this class over in `lib/` and change it. I think we can change this implementation to use an instance where we pass the config values in the constructor.","state":"closed","created_at":"2019-08-27T06:33:29.353Z","updated_at":"2022-05-31T12:54:11.126Z","closed_at":"2019-09-20T10:31:05.522Z","closed_by":{"id":4087087,"username":"alipniagov","name":"Aleksei Lipniagov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087087/avatar.png","web_url":"https://gitlab.com/alipniagov"},"labels":["Category:Team Planning","Deliverable","Multithreaded App Server","backend","blocker","devops::data_stores","group::application performance","priority::2","severity::3","time tracking","type::bug","upstream deps","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":4087087,"username":"alipniagov","name":"Aleksei Lipniagov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087087/avatar.png","web_url":"https://gitlab.com/alipniagov"}],"author":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"type":"ISSUE","assignee":{"id":4087087,"username":"alipniagov","name":"Aleksei Lipniagov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087087/avatar.png","web_url":"https://gitlab.com/alipniagov"},"user_notes_count":27,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31285","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31285","notes":"https://gitlab.com/api/v4/projects/278964/issues/31285/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31285/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31285","relative":"#31285","full":"gitlab-org/gitlab#31285"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":954,"epic":{"id":5233,"iid":954,"title":"Enable Puma Web Server for GitLab","url":"/groups/gitlab-org/-/epics/954","group_id":9970,"human_readable_end_date":"Jul 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24186535,"iid":13829,"project_id":278964,"title":"Create a new HealthCheckService class for running health checks","description":"The following discussion from !15248 should be addressed:\n\n- [ ] @mkozono started a [discussion](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/15248#note_204132875): \n\n    \u003e Probably should use a `HealthCheckService` to share logic with `HealthController`.","state":"closed","created_at":"2019-08-27T03:52:20.745Z","updated_at":"2019-09-11T21:04:20.958Z","closed_at":"2019-09-11T21:04:20.917Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["Enterprise Edition","group::geo","maintenance::refactor","workflow::in dev"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"}],"author":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"type":"ISSUE","assignee":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"user_notes_count":4,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13829","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13829","notes":"https://gitlab.com/api/v4/projects/278964/issues/13829/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13829/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13829","relative":"#13829","full":"gitlab-org/gitlab#13829"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24184599,"iid":13827,"project_id":278964,"title":"Dependency scanning node_modules file links lead 404","description":"### Summary\n\nThe report generated by Dependency Scanning's retire.js analyzer contains broken links to `node_modules` when the analyzer automatically runs `npm install` or `yarn install`.\n\nThis is a side-effect of https://gitlab.com/gitlab-org/security-products/analyzers/retire.js/merge_requests/9\n\n### Steps to reproduce\n\nCreate a JavaScript project using npm or yarn, configure Dependency Scanning, and run the analyzer. Make sure the scanned project contains no `node_modules` directory, only dependency files supported by npm or yarn.\n\n### Example Project\n\nSee https://gitlab.com/gitlab-org/gitlab-ee/-/jobs/280894064\n\nThe generate report contains a link to [node_modules/jquery.waitforimages/libs/jquery/jquery.js](https://gitlab.com/gitlab-org/gitlab-ce/blob/452b5d605c7ef88c8385cb62afcfc78f45ea2d4c/node_modules/jquery.waitforimages/libs/jquery/jquery.js), which does not exist in the repo.\n\n### What is the current *bug* behavior?\n\nThe link is broken because the file doesn't exist in the repo (HTTP 404).\n\n### What is the expected *correct* behavior?\n\nThe link points to the dependency file where the affected module is defined. Ideally, it points to the exact line causing the affected package version to be installed. Affected file is one of `yarn.lock`, `package.json`, or `npm-shrinkwrap.json`.\n\n## Screenshot\n\n![Screen_Shot_2019-08-26_at_16.42.31](/uploads/1f439cd0bc71c66bfa2c55a91a8b2a7f/Screen_Shot_2019-08-26_at_16.42.31.png)\n\n### Possible fixes\n\nUpdate the [retire.js analyzer](https://gitlab.com/gitlab-org/security-products/analyzers/retire.js) to distinguish when the file where a vulnerability is found is part of the repository or not:\n\n* if the vulnerability is found in a file which is part of the repository, then we use that file as the `location.file` property.\n* if there vulnerability is found in a file that is not part of the repository, then we use the `package.json` file as the `location.file` property.\n\n","state":"closed","created_at":"2019-08-26T23:50:28.653Z","updated_at":"2022-01-20T09:26:03.183Z","closed_at":"2020-01-09T19:35:41.565Z","closed_by":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"labels":["Category:Dependency Scanning","Enterprise Edition","backend","devops::secure","group::composition analysis","missed-SLO","missed-deliverable","missed:12.3","missed:12.5","missed:12.6","priority::1","severity::3","type::bug","workflow::production"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"}],"author":{"id":1895698,"username":"jritchey","name":"James Ritchey","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1895698/avatar.png","web_url":"https://gitlab.com/jritchey"},"type":"ISSUE","assignee":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"user_notes_count":29,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13827","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13827","notes":"https://gitlab.com/api/v4/projects/278964/issues/13827/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13827/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13827","relative":"#13827","full":"gitlab-org/gitlab#13827"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24184560,"iid":13825,"project_id":278964,"title":"Change the names of the ActiveRecord models involved in Design Management","description":"## Summary\n\nThis is an issue to discuss changing the ActiveRecord model names for the Design Management models.\n\nCreated out of a discussion from @alexkalderimis https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/15561#note_207277482 where he raised the idea.\n\n## Improvements\n\nModel names would more accurately reflect what they represent conceptually, and be easier to reason about when using.\n\n## Risks\n\nThere's a risk that branches will break when they are rebased with `master` after a change like this was merged. We should communicate to all developers working on Design Management branches to be aware of any changes that are pending.","state":"closed","created_at":"2019-08-26T23:43:58.471Z","updated_at":"2020-12-10T19:00:02.599Z","closed_at":"2019-09-27T03:49:26.538Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["Category:Design Management","Enterprise Edition","backstage [DEPRECATED]","devops::plan","group::product planning","missed:12.3"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13825","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13825","notes":"https://gitlab.com/api/v4/projects/278964/issues/13825/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13825/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13825","relative":"#13825","full":"gitlab-org/gitlab#13825"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24708164,"iid":31268,"project_id":278964,"title":"Manually renaming environments breaks future deployments","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nManually renaming a CI environment breaks all future deployments to that environment. Instead, each respective pipeline step shows the message `This job is an out-of-date deployment to .` Deleting the old, renamed environment did not fix the issue. \n\n### Steps to reproduce\n\n1. Create an environment from a CI pipeline step; I used `$PROJECT_NAMESPACE/$CI_PROJECT_NAME/$CI_COMMIT_REF_NAME` as a name.\n2. Manually rename the environment. I just shortened the name by a few characters. \n3. Run any CI step that re-creates/updates the environment\n4. `This job is an out-of-date deployment to .`\n\n### Example Project\nhttps://gitlab.com/FabianSperrle/deployment-renaming\n\n- Initial job: https://gitlab.com/FabianSperrle/deployment-renaming/-/jobs/280211792\n- then rename the environment.\n- Trigger pipeline again: https://gitlab.com/FabianSperrle/deployment-renaming/-/jobs/280213363\n\n### What is the current *bug* behavior?\n\nThe changed name of the original environment is correctly updated in the first pipeline. All other pipelines fail to update/re-populate any environment (with either the original or the changed name). \n\n### What is the expected *correct* behavior?\n\nRenaming an environment does not impact future (re-)creations of environments with the original name.\n\n### Relevant logs and/or screenshots\n\nSee example project + job links above. \n\n### Output of checks\n\nThis bug happens on GitLab.com. It also happens on our self-hosted gitlab ce instance.\n\n### Workaround\n\nRename the environment back to how it was called\n\n### Solution\nDisallow renaming environments.","state":"closed","created_at":"2019-08-26T14:05:06.064Z","updated_at":"2022-01-04T03:13:26.875Z","closed_at":"2021-08-30T08:24:47.625Z","closed_by":{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"},"labels":["Category:Release Orchestration","Deliverable","Release::P1","backend","devops::release","environments","group::release","pipeline","priority::3","section::ops","severity::3","type::bug","workflow::in dev"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"}],"author":{"id":138267,"username":"FabianSperrle","name":"Fabian Sperrle","state":"active","avatar_url":"https://secure.gravatar.com/avatar/aeb38124feced3d621e5c98e783ca334?s=80\u0026d=identicon","web_url":"https://gitlab.com/FabianSperrle"},"type":"ISSUE","assignee":{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"},"user_notes_count":31,"merge_requests_count":0,"upvotes":8,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31268","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31268","notes":"https://gitlab.com/api/v4/projects/278964/issues/31268/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31268/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31268","relative":"#31268","full":"gitlab-org/gitlab#31268"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3294,"epic":{"id":53415,"iid":3294,"title":"Environments: Bugs to Fix","url":"/groups/gitlab-org/-/epics/3294","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24167318,"iid":13816,"project_id":278964,"title":"[FE] Generate smaller versions of design images when new versions are uploaded","description":"This is a placeholder for ~frontend  related work for #12577","state":"closed","created_at":"2019-08-26T13:54:12.881Z","updated_at":"2020-12-10T19:00:03.212Z","closed_at":"2020-04-16T04:09:33.216Z","closed_by":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"labels":["Category:Design Management","Deliverable","Enterprise Edition","GitLab Premium","devops::plan","frontend","group::product planning","missed-deliverable","missed:12.7","missed:12.8","type::feature","workflow::production"],"milestone":{"id":1104429,"iid":46,"group_id":9970,"title":"12.10","description":"https://about.gitlab.com/releases/2020/04/22/gitlab-12-10-released","state":"closed","created_at":"2019-12-20T15:15:53.243Z","updated_at":"2020-10-08T12:00:39.852Z","due_date":"2020-04-17","start_date":"2020-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/46"},"assignees":[{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"}],"author":{"id":2935693,"username":"phikai","name":"Kai Armstrong","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2c5d6a63b41cbeb3ea4cccda82e758e1?s=80\u0026d=identicon","web_url":"https://gitlab.com/phikai"},"type":"ISSUE","assignee":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13816","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13816","notes":"https://gitlab.com/api/v4/projects/278964/issues/13816/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13816/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13816","relative":"#13816","full":"gitlab-org/gitlab#13816"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24167271,"iid":13815,"project_id":278964,"title":"[BE] Generate smaller versions of design images when new versions are uploaded","description":"This is a placeholder for ~backend related work for https://gitlab.com/gitlab-org/gitlab-ee/issues/12577","state":"closed","created_at":"2019-08-26T13:52:39.108Z","updated_at":"2020-12-10T19:00:04.394Z","closed_at":"2020-03-22T21:41:50.988Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["Category:Design Management","Deliverable","Enterprise Edition","GitLab Premium","backend","devops::plan","group::product planning","missed-deliverable","missed:12.7","type::feature","workflow::verification"],"milestone":{"id":1104429,"iid":46,"group_id":9970,"title":"12.10","description":"https://about.gitlab.com/releases/2020/04/22/gitlab-12-10-released","state":"closed","created_at":"2019-12-20T15:15:53.243Z","updated_at":"2020-10-08T12:00:39.852Z","due_date":"2020-04-17","start_date":"2020-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/46"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":2935693,"username":"phikai","name":"Kai Armstrong","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2c5d6a63b41cbeb3ea4cccda82e758e1?s=80\u0026d=identicon","web_url":"https://gitlab.com/phikai"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":13,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13815","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13815","notes":"https://gitlab.com/api/v4/projects/278964/issues/13815/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13815/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13815","relative":"#13815","full":"gitlab-org/gitlab#13815"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24166353,"iid":13814,"project_id":278964,"title":"Enforce rubocop cop migrations on ee/db/geo","description":"Currently, we don't verify DB files under `ee/db/geo` with Rubocop: [`MigrationHelpers#in_migration?`](https://gitlab.com/gitlab-org/gitlab-ee/blob/master/rubocop/migration_helpers.rb). \n\nWe should modify those methods to also enforce Rubocop migration cops under `ee/db/geo`","state":"closed","created_at":"2019-08-26T13:25:22.014Z","updated_at":"2019-09-23T14:08:54.791Z","closed_at":"2019-09-18T22:24:19.820Z","closed_by":{"id":33100,"username":"mayra-cabrera","name":"Mayra Cabrera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/33100/avatar.png","web_url":"https://gitlab.com/mayra-cabrera"},"labels":["Database tooling","Enterprise Edition","backend","backstage [DEPRECATED]","database","devops::systems","group::geo"],"milestone":null,"assignees":[{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"}],"author":{"id":33100,"username":"mayra-cabrera","name":"Mayra Cabrera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/33100/avatar.png","web_url":"https://gitlab.com/mayra-cabrera"},"type":"ISSUE","assignee":{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"},"user_notes_count":4,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13814","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13814","notes":"https://gitlab.com/api/v4/projects/278964/issues/13814/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13814/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13814","relative":"#13814","full":"gitlab-org/gitlab#13814"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24708162,"iid":31266,"project_id":278964,"title":"Project name isn't rendered in Mattermost pipeline notifications","description":"### Summary\n\nWe recently overhauled the look of pipeline chat notifications in https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/27683.  There are a couple of features that the new notifications rely on that are not yet supported by Mattermost, specifically:\n\n1. Footers, which display the project name and pipeline timestamp\n1. ~~“good”, “warning”, and “danger” values in the `color` parameter, which indicate the pipeline's status~~\n\n![image](/uploads/89f2adf0d80ff8d630b5c423cf570c9a/image.png)\n\n\u003cspan\u003e#\u003c/span\u003e1 is most important, since the project name was previously included in the notification's text; Mattermost users no longer can tell what project the notification is from just by glancing at the notification.\n\nMore info: https://docs.mattermost.com/developer/message-attachments.html?highlight=footer#known-issues\n\nThis issue was identified in this comment: https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/27683#note_208012212\n\n### Update\n\nIt appears that Mattermost _does_ support “good”, “warning”, and “danger” color values, despite what their documentation says.","state":"closed","created_at":"2019-08-26T13:10:21.445Z","updated_at":"2019-10-18T16:15:02.665Z","closed_at":"2019-10-17T12:20:22.858Z","closed_by":{"id":493585,"username":"nfriend","name":"Nathan Friend","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cd23f74a33fc7d8dfe081948696551a5?s=80\u0026d=identicon","web_url":"https://gitlab.com/nfriend"},"labels":["Category:Continuous Integration","[deprecated] Accepting merge requests","devops::verify","group::pipeline execution","notifications"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":493585,"username":"nfriend","name":"Nathan Friend","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cd23f74a33fc7d8dfe081948696551a5?s=80\u0026d=identicon","web_url":"https://gitlab.com/nfriend"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31266","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31266","notes":"https://gitlab.com/api/v4/projects/278964/issues/31266/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31266/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31266","relative":"#31266","full":"gitlab-org/gitlab#31266"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24155077,"iid":13813,"project_id":278964,"title":"Add section to DR documentation describing upgrade impact on secondary","description":"I have a question regarding instructions for \"disabling\" a **secondary** Geo node during the upgrade of the **primary**. If a **secondary** node is set up as a DR solution should we disable PostgreSQL replication and/or other syncing while the primary is upgraded?\n\nImagine a situation in which the primary node fails to upgrade (it could be an HA setup) and a **secondary** should be promoted to **primary** - what is the right process?\n\nPossible scenarios:\n\n#### Disable DR node\n1. \"Disconnect\" **secondary** DR node (state is now fixed at a point in time)\n2. Upgrade **primary** and remaining secondaries\n3. If successful, upgrade DR node and re-sync; else promote secondary\n\n#### All nodes are enabled, including DR node\n1. Upgrade **primary** and all **secondaries** without \"disconnecting\" a DR node\n2. If successful **primary** upgrade you are done; else promote **secondary**\n\nThe question is really: Is there any way that a failure in the primary upgrade can promote to the secondary which is designated for DR purposes?\n\nThis is not so important if Geo nodes are used purely for geo replication but highly relevant for DR applications.\n\n# Proposal\n1. Create a documentation entry in the DR section that describes the risks listed in the ticket\n1. Create instructions for stopping replication e.g\n```sh\nsudo gitlab-ctl stop postgresql\nsudo gitlab-ctl stop repmgrd  # if HA\n# ...\nsudo gitlab-ctl start repmgrd  # if HA\nsudo gitlab-ctl start postgresql\n```\n1. Crosslink to upgrade instructions.","state":"closed","created_at":"2019-08-26T11:26:08.076Z","updated_at":"2020-11-23T13:52:30.347Z","closed_at":"2020-11-23T13:52:30.184Z","closed_by":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"labels":["Enterprise Edition","[deprecated] Accepting merge requests","devops::systems","docs-only","documentation","group::geo","missed:12.10","missed:12.5","missed:12.8","missed:12.9","section::enablement"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":null,"user_notes_count":20,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13813","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13813","notes":"https://gitlab.com/api/v4/projects/278964/issues/13813/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13813/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13813","relative":"#13813","full":"gitlab-org/gitlab#13813"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":590,"epic":{"id":2264,"iid":590,"title":"Geo: Promotion, Demotion and Failover","url":"/groups/gitlab-org/-/epics/590","group_id":9970,"human_readable_end_date":"Dec 31, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24708160,"iid":31264,"project_id":278964,"title":"Pipeline doesn't succeed when manual jobs using new DAG dependency \"needs:\" are waiting for other \"when: manual\" jobs to succeed","description":"### Summary\n\nPipeline doesn't succeed when jobs with \"when:manual\" and using new DAG dependency \"needs:\" are waiting for other \"when: manual\" jobs to succeed\n\n\n\n### Additional explanation \n\n1. When a non-manual stage job is in the next stage of a manual job with `allow_failure: true` (which is a default setting of a manual job), the manual job is skipped and the normal job runs.\n1. When a non-manual stage job is in the next stage of a manual job with explicit `allow_failure: false`, the manual job blocks the next stage.\n1. When a DAG job **needs** a manual job, the manual job **blocks** the DAG job to run.\n   * However, the pipeline's status stays at `created` or `running`, because the manual job is actually skipped and not a blocker for regular jobs and the pipeline.\n1. When a DAG job **needs** a manual job with `allow_failure: false`, the manual job blocks the DAG job to run.\n\nThis bug describes the problem of scenario number 3\n\n### Proposal\n\nMark both the manual job and the DAG job that needs the manual job as skipped jobs, in case users would like to block the pipeline they can add allow_failure: false to the manual job\n\n## Screenshots (strongly suggested)\n\n\u003cdetails\u003e\n\u003csummary\u003eExample 1\u003c/summary\u003e\n\n**Config:**\n\n```yaml\ntest:\n  stage: test\n  when: manual\n  script: exit 0\n\ndeploy:\n  stage: deploy\n  script: exit 0\n  needs: [test]\n```\n\n**Before this MR:** ![Screen_Shot_2020-11-18_at_23.05.49](https://gitlab.com/gitlab-org/gitlab/uploads/11cf4a1ed9cf8e62c321066c4ce57a77/Screen_Shot_2020-11-18_at_23.05.49.png)\n\n![Screen_Shot_2020-11-18_at_23.05.56](https://gitlab.com/gitlab-org/gitlab/uploads/da36910c9b132e8873f6a170edadb9e7/Screen_Shot_2020-11-18_at_23.05.56.png)\n\n**After this MR:**\n\n![Screen_Shot_2021-02-05_at_15.19.11](https://gitlab.com/gitlab-org/gitlab/uploads/fb45528dff6131e8c6c40ca95227f3aa/Screen_Shot_2021-02-05_at_15.19.11.png)\n\n![Screen_Shot_2021-02-05_at_15.19.27](https://gitlab.com/gitlab-org/gitlab/uploads/31bcf52fa8c0dc5c5ac6ed84398da8b5/Screen_Shot_2021-02-05_at_15.19.27.png)\n\u003c/details\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExample 2\u003c/summary\u003e\n\n**Config:**\n\n```yaml\nbuild:\n  stage: build\n  script: exit 0\n\ntest:\n  stage: test\n  when: manual\n  script: exit 0\n\ndeploy:\n  stage: deploy\n  script: exit 0\n  needs: [build, test]\n```\n\n**Before this MR:**\n\n![Screen_Shot_2020-11-18_at_23.06.20](https://gitlab.com/gitlab-org/gitlab/uploads/80704553378607b62512a339788f5185/Screen_Shot_2020-11-18_at_23.06.20.png)\n\n![Screen_Shot_2020-11-18_at_23.06.27](https://gitlab.com/gitlab-org/gitlab/uploads/56c5fd3575018b4d7d93cb2180800e2a/Screen_Shot_2020-11-18_at_23.06.27.png)\n\n**After this MR:**\n\n![Screen_Shot_2021-02-05_at_15.20.39](https://gitlab.com/gitlab-org/gitlab/uploads/2c67f80108ebcc3b109b9603384c66a6/Screen_Shot_2021-02-05_at_15.20.39.png)\n\n![Screen_Shot_2021-02-05_at_15.20.46](https://gitlab.com/gitlab-org/gitlab/uploads/ea08cb8af85c204f29aaec27dec5f882/Screen_Shot_2021-02-05_at_15.20.46.png)\n\u003c/details\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExample 3\u003c/summary\u003e\n\u003c/details\u003e\n\n\n\n\n### Steps to reproduce\n\n1) Create 3 stages\n2) Add a regular job on the 1st stage\n3) Add manual jobs (with the \"when: manual\" keyword on *.gitlab-ci.yaml*) on the 2nd stage (with or without regular jobs)\n4) On the 3rd stage create either 1) an automatic job that has \"allow_failure: true\" and/or 2) a manual job\n5) Add a \"needs: \" tag on the jobs of the 3rd stage and make them depend on at least one manual job on the 2nd stage\n6) Run the flow and it will stay \"running\" forever while manual jobs aren't canceled.\n\n### What is the current *bug* behavior?\n\nPipeline stays in the \"running\" sate forever since all next stage's manual jobs that have dependencies are waiting for the previous stage's manual jobs to end, even if they are all allowed to fail.\n\nThis also affects the \"Merge\" button when merges are only allowed if a pipeline succeeds, since it stays disabled if a pipeline does not succeed.\nThe screenshots below depict a scenario where we expect that the pipeline success does not depend on QA jobs to finish, while taking advantage of the new DAG feature.\n\n### What is the expected *correct* behavior?\n\nOne should expect to see the pipeline marked as \"Passed\", either green or orange, when the pipeline is left with only manual jobs or automatic jobs that allows failure.\n\nAs a note, if one setups a set of manual jobs to run on a stage without having jobs depending on them with the \"needs:\" keyword, the pipeline ignores them to set the pipeline's success or not (this considering the default behavior of allowing them to fail).\n\n### Relevant logs and/or screenshots\n\n![Gitlab_manual_pipeline_failure](/uploads/73e7e1622ab629c716b65a8264d20037/Gitlab_manual_pipeline_failure.png)\n\n![Gitlab_manual_pipeline_failure_2](/uploads/5cbcef2650190142328073958450d09a/Gitlab_manual_pipeline_failure_2.png)\n\n### Output of checks\n\nThis bug happens on GitLab.com","state":"closed","created_at":"2019-08-26T10:31:25.997Z","updated_at":"2022-12-01T20:23:32.266Z","closed_at":"2021-04-15T08:29:46.800Z","closed_by":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"labels":["Category:Pipeline Authoring","DEPRECATE_pipeline dag","Deliverable","GitLab Core","backend","customer","devops::verify","direction","group::pipeline authoring","internal customer","missed-SLO","missed-deliverable","missed:12.10","missed:13.0","missed:13.1","missed:13.10","missed:13.2","priority::1","section::ops","severity::2","type::bug","workflow::production"],"milestone":{"id":1406669,"iid":59,"group_id":9970,"title":"13.11","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-08-13T14:23:09.688Z","updated_at":"2022-04-21T07:22:08.835Z","due_date":"2021-04-17","start_date":"2021-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/59"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":209866,"username":"OrDoS","name":"Samuel Cordeiro","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/209866/avatar.png","web_url":"https://gitlab.com/OrDoS"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":234,"merge_requests_count":0,"upvotes":170,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31264","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31264","notes":"https://gitlab.com/api/v4/projects/278964/issues/31264/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31264/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31264","relative":"#31264","full":"gitlab-org/gitlab#31264"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5138,"epic":{"id":176062,"iid":5138,"title":"Bugs: `:needs`","url":"/groups/gitlab-org/-/epics/5138","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":24147734,"iid":13808,"project_id":278964,"title":"Allow passing an epic when creating issue via API","description":"### Problem to solve\n\nSometimes you want to create a new issue and immediately it to an epic via the API (see https://gitlab.com/gitlab-org/gitlab-ee/issues/5419 for an example).\n\nCurrently we need two requests:\n\n1. Create the issue (https://docs.gitlab.com/ee/api/issues.html#new-issue)\n1. Add issue to epic (https://docs.gitlab.com/ee/api/epic_issues.html#assign-an-issue-to-the-epic)\n\nIf 1. succeeds but 2. fails, we end up with a newly created issue that is not linked to the epic. A consumer of the API would then need to delete the issue (which can fail, too) or retry creating the epic (which can fail again).\n\n### Intended users\n\n- mainly Developers\n- everybody who uses Epics indirectly\n\n### Proposal\n\nAdd an `epic_iid` parameter to https://docs.gitlab.com/ee/api/issues.html#new-issue. That way we only need one request for creating the issue.\n\n### Permissions and Security\n\nUsing the parameter requires permission to see the epic.\n\n### Documentation\n\nhttps://docs.gitlab.com/ee/api/issues.html#new-issue needs update\n\n### Testing\n\n`ee/spec/requests/api/issues_spec.rb` needs additional tests\n\n### What does success look like, and how can we measure that?\n\nIssue with epic can be created with only one request.\n\n### What is the type of buyer? \n\nEveryone who buys epics.\n\n### Links / references","state":"closed","created_at":"2019-08-26T07:56:32.024Z","updated_at":"2021-12-27T11:06:50.140Z","closed_at":"2019-10-28T15:01:14.779Z","closed_by":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"labels":["Enterprise Edition","api","backend","devops::plan","feature::enhancement","group::product planning","missed:12.4"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":24,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13808","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13808","notes":"https://gitlab.com/api/v4/projects/278964/issues/13808/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13808/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13808","relative":"#13808","full":"gitlab-org/gitlab#13808"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24702086,"iid":31236,"project_id":278964,"title":"Automatically update merge widget when new commits are pushed","description":"## Problem to solve\n\nWhen I am viewing a merge request and new commits are pushed, I can see a new push event appear in the discussions tab, but the merge-ability widget updates to show a warning that I need to reload.\n\nThis is a particular nuisance when I apply a suggestion to a merge request, and then want to merge. Instead I have to reload and then merge.\n\n| **Merge widget** after push |\n|---|\n| ![Screen_Shot_2019-08-25_at_2.13.55_PM](/uploads/3daecb41aedba9771769a7dd7c96630f/Screen_Shot_2019-08-25_at_2.13.55_PM.png) |\n\n## Further details\n\nThere are a number of situations where this is not only inconvenient, but frustrating:\n\n- as the final reviewer, opening a merge request that is otherwise approved apart from one or two suggestions that can simply be applied and then merged - I have to reload the page before I can merge\n- as the final reviewer, spotting a small typo that could be fixed with a few taps by creating a suggestion and applying it yourself - I have to reload the page before I can merge\n- as author / reviewer, noticing a CI test failure in a merge request, making the fix and pushing it – I have to reload the page before I can merge\n\nSmoothing these workflows provide polish, but are also a first step towards generally making the merge request interface more interactive and real-time. We should be embracing real-time feedback and queues for efficiency and collaboration.\n\n## Proposal\n\nWhen a new push event occurs, update the merge widget with latest merge-ability status so I know if there are new conflicts.\n\n| Mockup | Mockup |\n|---|---|\n| ![Screenshot_20190924T170421](/uploads/df969a4f582639c58cb101955aa8bf1f/Screenshot_20190924T170421.png) | ![Screenshot_20190924T165237](/uploads/a8df14aaa5e71f6cacfdf372938e086c/Screenshot_20190924T165237.png) |\n\nIn the worst case scenario, this could mean someone merges a different change to what they expected, but the timing window for this is very small. Importantly, merge request approvals and CI pipelines are still required, and cannot be bypassed by the last minute push.\n\n## Permissions and Security\n\nMerge controls like protected branches and approvals must still be enforced on both the frontend and backend.\n\n## Documentation\n\n## Testing\n\n## What does success look like, and how can we measure that?\n\nWe are measuring suggested changes adoption. Usage may increase marginally as it will make self-suggestion workflows easier.\n\n## Links / references","state":"closed","created_at":"2019-08-25T11:45:25.232Z","updated_at":"2020-12-07T16:48:54.263Z","closed_at":"2019-12-06T09:33:22.480Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Category:Code Review Workflow","Deliverable","UI text","UX","devops::create","direction","frontend","group::code review","internal customer","merge requests","missed-deliverable","missed:12.5","real-time","type::feature","workflow::in dev"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":1187333,"username":"jramsay-gitlab","name":"James Ramsay (ex-GitLab)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1187333/avatar.png","web_url":"https://gitlab.com/jramsay-gitlab"},"type":"ISSUE","assignee":{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},"user_notes_count":13,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31236","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31236","notes":"https://gitlab.com/api/v4/projects/278964/issues/31236/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31236/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31236","relative":"#31236","full":"gitlab-org/gitlab#31236"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1812,"epic":{"id":11294,"iid":1812,"title":"⚡️ Real-time merge request updates","url":"/groups/gitlab-org/-/epics/1812","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":24702067,"iid":31225,"project_id":278964,"title":"Add timeout to GraphQL queries","description":"### Summary\n\nThere is no timeout on GraphQL queries. The `graphql-ruby` library allows us to implement a timeout that returns a partial response if the timeout is triggered. The response contains the fields that had a chance to resolve, and anything unresolved is `nil`.\n\n### Potential solution\n\nWe can add [timeout middleware](https://graphql-ruby.org/api-doc/1.9.8/GraphQL/Schema/TimeoutMiddleware#stop-resolving-fields-after-2-seconds) quite easily using the `graphql-ruby` library. However, implementing this solution would have to take into account that the frontend must be able to properly handle partial responses.","state":"closed","created_at":"2019-08-24T01:29:35.258Z","updated_at":"2021-10-19T09:57:29.944Z","closed_at":"2020-01-02T16:46:05.531Z","closed_by":{"id":5054702,"username":"vdesousa","name":"Vitor Meireles De Sousa","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f44d19f10d5b0c54a02e79c13812ff77?s=80\u0026d=identicon","web_url":"https://gitlab.com/vdesousa"},"labels":["Deliverable","GraphQL","UX","backend","devops::plan","frontend","group::project management","priority::3","security","severity::3"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"}],"author":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"type":"ISSUE","assignee":{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-11-25","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/31225","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/31225","notes":"https://gitlab.com/api/v4/projects/278964/issues/31225/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/31225/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#31225","relative":"#31225","full":"gitlab-org/gitlab#31225"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24109850,"iid":13769,"project_id":278964,"title":"Can't mirror from public GitHub repository","description":"I created a new repository called \"mirror-test\", which has no commits in its repository.  I go to its `Settings -\u003e Repository` page and expand the \"Mirroring repositories\" section.  I enter the URL https://github.com/kenahoo/dotfiles.git in the \"Git repository URL\" box, and try to select \"Pull\" as the direction, but the dropdown menu for it is greyed out:\n\n![Screen_Shot_2019-08-23_at_5.49.44_PM](/uploads/1ba180334ef613da33b6ca5a8061619c/Screen_Shot_2019-08-23_at_5.49.44_PM.png)\n\nHow do I get that option enabled?\n\nI'm using GitLab Enterprise Edition 12.1.6-ee.","state":"closed","created_at":"2019-08-23T22:51:30.914Z","updated_at":"2020-04-03T05:54:58.763Z","closed_at":"2019-10-25T04:35:53.595Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["Enterprise Edition","backend","devops::create","group::source code","mirror","priority::2","severity::3","type::bug","workflow::in review"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":1187333,"username":"jramsay-gitlab","name":"James Ramsay (ex-GitLab)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1187333/avatar.png","web_url":"https://gitlab.com/jramsay-gitlab"}],"author":{"id":2478651,"username":"kenahoo","name":"Ken Williams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/94c9072a6b1ac6e02e735b3df640e277?s=80\u0026d=identicon","web_url":"https://gitlab.com/kenahoo"},"type":"ISSUE","assignee":{"id":1187333,"username":"jramsay-gitlab","name":"James Ramsay (ex-GitLab)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1187333/avatar.png","web_url":"https://gitlab.com/jramsay-gitlab"},"user_notes_count":29,"merge_requests_count":1,"upvotes":5,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13769","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13769","notes":"https://gitlab.com/api/v4/projects/278964/issues/13769/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13769/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13769","relative":"#13769","full":"gitlab-org/gitlab#13769"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24109412,"iid":13767,"project_id":278964,"title":"Recent update to bandit 1.6.2 in SAST breaks Python scans","description":"The update of bandit from the 1.5 series to 1.6.2 has resulted in bandit failing.  In my case, its scanning around 10K files of python (and that's a problem see below).\n\nSince SAST doesn't clean up containers, I was able to simply restart the container and run commands within it.\n\nWhen running bandit manually via `/usr/local/bin/python /usr/local/bin/bandit ...` the, container simply exits.  Here's the output from that (beginning from when I ran docker exec -ti \u003ccontainer ID\u003e bash):\n\n\u003e\u003e\u003e\nroot@97300742bf0a:/tmp/app# time /usr/local/bin/python /usr/local/bin/bandit -a vuln -x tests,build,deploy,docs,.tox -r .\n[main]  INFO    profile include tests: None\n[main]  INFO    profile exclude tests: None\n[main]  INFO    cli include tests: None\n[main]  INFO    cli exclude tests: None\n[main]  INFO    running on Python 3.7.4\n10572 [0.. 50.. 100.. 150.. 200.. 250.. 300.. 350.. 400.. 450.. 500.. 550.. 600.. 650.. 700.. 750.. 800.. 850.. 900.. 950.. 1000.. 1050.. 1100.. 1150.. 1200.. 1250.. 1300.. 1350.. 1400.. 1450.. 1500.. 1550.. 1600.. 1650.. 1700.. 1750.. 1800.. 1850.. 1900.. 1950.. 2000.. 2050.. 2100.. 2150.. 2200.. 2250.. 2300.. 2350.. 2400.. 2450.. [\n        ERROR   Bandit internal error running: hashlib_new on file ./.tox/dev/lib/python3.6/site-packages/glanceclient/v2/images.py at line 245: 'NoneType' object has no attribute 'lower'Traceback (most recent call last):\n  File \"/usr/local/lib/python3.7/site-packages/bandit/core/tester.py\", line 64, in run_tests\n    result = test(context)\n  File \"/usr/local/lib/python3.7/site-packages/bandit/plugins/hashlib_new_insecure_functions.py\", line 57, in hashlib_new\n    if name.lower() in ('md4', 'md5'):\nAttributeError: 'NoneType' object has no attribute 'lower'\n\n2500.. 2550.. 2600.. 2650.. 2700.. 2750.. 2800.. 2850.. 2900.. 2950.. 3000.. 3050.. 3100.. 3150.. 3200.. 3250.. 3300.. 3350.. 3400.. 3450.. 3500.. 3550.. 3600.. 3650.. 3700.. 3750.. 3800.. 3850.. 3900.. 3950.. 4000.. 4050.. 4100.. 4150.. 4200.. 4250.. 4300.. 4350.. 4400.. 4450.. 4500.. 4550.. 4600.. 4650.. 4700.. 4750.. 4800.. 4850.. 4900.. 4950.. 5000.. 5050.. 5100.. 5150.. 5200.. 5250.. 5300.. 5350.. 5400.. 5450.. 5500.. 5550.. 5600.. 5650.. 5700.. 5750.. 5800.. 5850.. 5900.. 5950.. 6000.. 6050.. 6100.. 6150.. 6200.. 6250.. 6300.. 6350.. 6400.. 6450.. 6500.. 6550.. 6600.. 6650.. 6700.. 6750.. 6800.. 6850.. 6900.. 6950.. 7000.. 7050.. 7100.. 7150.. 7200.. 7250.. 7300.. 7350.. 7400.. 7450.. 7500.. 7550.. 7600.. 7650.. 7700.. 7750.. 7800.. 7850.. 7900.. 7950.. 8000.. [tlevi@lfp-runner ~]$ docker ps -a\nCONTAINER ID        IMAGE                                                                     COMMAND                  CREATED             STATUS                      PORTS\n                                    NAMES\n97300742bf0a        registry.gitlab.com/gitlab-org/security-products/analyzers/bandit:2       \"/analyzer run\"          3 hours ago         Exited (0) 12 seconds ago\n                                    hungry_keldysh\n\u003e\u003e\u003e\n\nFrom the above, it only processed 8000 (or so) of the roughly 10K files it found.  Also, the container simply exited and kicked me to the shell.  The python exception in the output is a documented bug in bandit.\n\nWhen running bandit manually via /usr/local/bin/bandit within that same container (again after starting it and running docker exec -ti ...), it gets a bit further (around 9700) before exiting.  In both case, it seems to abort after around 20 minutes.  These same scans work perfectly using bandit 1.5.1 and in far, far less than 20 minutes - in fact they ran in about 2 minutes per SAST logs.  In those logs, the number of files scanned was 360 for the exact same project:\n\n\u003e\u003e\u003e\n...\n2019/08/21 12:11:08 [bandit] Starting analyzer...\n2: Pulling from gitlab-org/security-products/analyzers/bandit\nDigest: sha256:dfa240ec684c9f8f0d0d6bc675714a249f8b887e5e39331350c62e8b118963f6\nStatus: Image is up to date for registry.gitlab.com/gitlab-org/security-products/analyzers/bandit:2\nFound project in /tmp/app\n[main]\tINFO\tprofile include tests: None\n[main]\tINFO\tprofile exclude tests: None\n[main]\tINFO\tcli include tests: None\n[main]\tINFO\tcli exclude tests: None\n360 [0.. 50.. 100.. 150.. 200.. 250.. 300.. 350.. ]\n[json]\tINFO\tJSON output written to file: /tmp/bandit.json\n2019/08/21 12:13:27 [secrets] Detect project using plugin\n...\n\u003e\u003e\u003e\n\nSo this seem to be a problem where bandit no longer honors the exclude and, therefore, takes longer to process.  Here's one bug pointing at exactly that: https://github.com/PyCQA/bandit/issues/488.  The most common workaround is to pin back to 1.5.1.","state":"closed","created_at":"2019-08-23T20:13:13.209Z","updated_at":"2019-10-19T19:26:12.279Z","closed_at":"2019-10-10T20:50:54.407Z","closed_by":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"labels":["Category:SAST","Enterprise Edition","backend","backend-weight::1","customer","devops::secure","group::static analysis","type::bug","workflow::blocked"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"}],"author":{"id":351015,"username":"televi","name":"Todd Levi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/63865cd359b22d4a43cae2b3961d81fd?s=80\u0026d=identicon","web_url":"https://gitlab.com/televi"},"type":"ISSUE","assignee":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"user_notes_count":11,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13767","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13767","notes":"https://gitlab.com/api/v4/projects/278964/issues/13767/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13767/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13767","relative":"#13767","full":"gitlab-org/gitlab#13767"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24106322,"iid":13760,"project_id":278964,"title":"Container scanning and Dependency scanning report leaked to unauthorized users","description":"**[HackerOne report #676976](https://hackerone.com/reports/676976)** by `xanbanx` on 2019-08-19:\n\nHi GitLab Security team\n\n### Summary\n\nGitLab makes the container scanning and dependency scanning information available as part of a JSON endpoint for merge requests. These reports are output of the CI job and should only be displayed if the visiting user has access to CI. However, right now GitLab displays the the container scanning and dependency scanning reports regardless of this permission, making it available to whoever has access to the merge request.\n\nFor public projects, GitLab allows to restrict CI pipelines to project members only (public pipelines disabled). However, in this case, the merge request widget still renders the scanning reports result, which is the outcome of a CI pipeline.\n\n### Steps to reproduce\n\nThis is reproducible on gitlab.com. It requires at least a gold plan to have the container scanning and dependency scanning feature available.\n\n1. Create a public project, restrict CI pipeline access to project members, and disable public pipelines  \n2. Push a  new branch and add .gitlab-ci.yml file with the following content:\n\n```yml  \ntest:  \n  script: |  \n    echo '{\"image\": \"registry.gitlab.com/groulot/container-scanning-test/master:5f21de6956aee99ddb68ae49498662d9872f50ff\",\"unapproved\": [\"CVE-2017-18269\",\"CVE-2017-16997\",\"CVE-2018-1000001\",\"CVE-2016-10228\",\"CVE-2018-18520\",\"CVE-2010-4052\",\"CVE-2018-16869\",\"CVE-2018-18311\"],\"vulnerabilities\": [{ \"featurename\": \"glibc\", \"featureversion\": \"2.24-11+deb9u3\", \"vulnerability\": \"CVE-2017-18269\", \"namespace\": \"debian:9\", \"description\": \"SSE2-optimized memmove implementation problem.\", \"link\": \"https://security-tracker.debian.org/tracker/CVE-2017-18269\", \"severity\": \"Defcon1\", \"fixedby\": \"2.24-11+deb9u4\"},{ \"featurename\": \"glibc\", \"featureversion\": \"2.24-11+deb9u3\", \"vulnerability\": \"CVE-2017-16997\", \"namespace\": \"debian:9\", \"description\": \"elf/dl-load.c in the GNU C Library (aka glibc or libc6) 2.19 through 2.26 mishandles RPATH and RUNPATH containing $ORIGIN for a privileged (setuid or AT_SECURE) program, which allows local users to gain privileges via a Trojan horse library in the current working directory, related to the fillin_rpath and decompose_rpath functions. This is associated with misinterpretion of an empty RPATH/RUNPATH token as the \\\"./\\\" directory. NOTE: this configuration of RPATH/RUNPATH for a privileged program is apparently very uncommon; most likely, no such program is shipped with any common Linux distribution.\", \"link\": \"https://security-tracker.debian.org/tracker/CVE-2017-16997\", \"severity\": \"Critical\", \"fixedby\": \"\"},{ \"featurename\": \"glibc\", \"featureversion\": \"2.24-11+deb9u3\", \"vulnerability\": \"CVE-2018-1000001\", \"namespace\": \"debian:9\", \"description\": \"In glibc 2.26 and earlier there is confusion in the usage of getcwd() by realpath() which can be used to write before the destination buffer leading to a buffer underflow and potential code execution.\", \"link\": \"https://security-tracker.debian.org/tracker/CVE-2018-1000001\", \"severity\": \"High\", \"fixedby\": \"\"},{ \"featurename\": \"glibc\", \"featureversion\": \"2.24-11+deb9u3\", \"vulnerability\": \"CVE-2016-10228\", \"namespace\": \"debian:9\", \"description\": \"The iconv program in the GNU C Library (aka glibc or libc6) 2.25 and earlier, when invoked with the -c option, enters an infinite loop when processing invalid multi-byte input sequences, leading to a denial of service.\", \"link\": \"https://security-tracker.debian.org/tracker/CVE-2016-10228\", \"severity\": \"Medium\", \"fixedby\": \"\"},{ \"featurename\": \"elfutils\", \"featureversion\": \"0.168-1\", \"vulnerability\": \"CVE-2018-18520\", \"namespace\": \"debian:9\", \"description\": \"An Invalid Memory Address Dereference exists in the function elf_end in libelf in elfutils through v0.174. Although eu-size is intended to support ar files inside ar files, handle_ar in size.c closes the outer ar file before handling all inner entries. The vulnerability allows attackers to cause a denial of service (application crash) with a crafted ELF file.\", \"link\": \"https://security-tracker.debian.org/tracker/CVE-2018-18520\", \"severity\": \"Low\", \"fixedby\": \"\"},{ \"featurename\": \"glibc\", \"featureversion\": \"2.24-11+deb9u3\", \"vulnerability\": \"CVE-2010-4052\", \"namespace\": \"debian:9\", \"description\": \"Stack consumption vulnerability in the regcomp implementation in the GNU C Library (aka glibc or libc6) through 2.11.3, and 2.12.x through 2.12.2, allows context-dependent attackers to cause a denial of service (resource exhaustion) via a regular expression containing adjacent repetition operators, as demonstrated by a {10,}{10,}{10,}{10,} sequence in the proftpd.gnu.c exploit for ProFTPD.\", \"link\": \"https://security-tracker.debian.org/tracker/CVE-2010-4052\", \"severity\": \"Negligible\", \"fixedby\": \"\"},{ \"featurename\": \"nettle\", \"featureversion\": \"3.3-1\", \"vulnerability\": \"CVE-2018-16869\", \"namespace\": \"debian:9\", \"description\": \"A Bleichenbacher type side-channel based padding oracle attack was found in the way nettle handles endian conversion of RSA decrypted PKCS#1 v1.5 data. An attacker who is able to run a process on the same physical core as the victim process, could use this flaw extract plaintext or in some cases downgrade any TLS connections to a vulnerable server.\", \"link\": \"https://security-tracker.debian.org/tracker/CVE-2018-16869\", \"severity\": \"Unknown\", \"fixedby\": \"\"},{ \"featurename\": \"perl\", \"featureversion\": \"5.24.1-3+deb9u4\", \"vulnerability\": \"CVE-2018-18311\", \"namespace\": \"debian:9\", \"description\": \"Perl before 5.26.3 and 5.28.x before 5.28.1 has a buffer overflow via a crafted regular expression that triggers invalid write operations.\", \"link\": \"https://security-tracker.debian.org/tracker/CVE-2018-18311\", \"severity\": \"Unknown\", \"fixedby\": \"5.24.1-3+deb9u5\"},{ \"featurename\": \"foo\", \"featureversion\": \"1.3\", \"vulnerability\": \"CVE-2018-666\", \"namespace\": \"debian:9\", \"description\": \"Foo has a vulnerability nobody cares about and whitelist.\", \"link\": \"https://security-tracker.debian.org/tracker/CVE-2018-666\", \"severity\": \"Unknown\", \"fixedby\": \"1.4\"}]}' \u003e gl-container-scanning-report.json  \n    echo '{\"version\": \"1.3\",\"vulnerabilities\": [{\"category\": \"dependency_scanning\",\"name\": \"io.netty/netty - CVE-2014-3488\",\"message\": \"DoS by CPU exhaustion when using malicious SSL packets\",\"cve\": \"app/pom.xml:io.netty/netty@3.9.1.Final:CVE-2014-3488\",\"severity\": \"Unknown\",\"solution\": \"Upgrade to the latest version\",\"scanner\": {\"id\": \"gemnasium\",\"name\": \"Gemnasium\"},\"location\": {\"file\": \"app/pom.xml\",\"dependency\": {\"package\": {\"name\": \"io.netty/netty\"},\"version\": \"3.9.1.Final\"}},\"identifiers\": [{\"type\": \"gemnasium\",\"name\": \"Gemnasium-d1bf36d9-9f07-46cd-9cfc-8675338ada8f\",\"value\": \"d1bf36d9-9f07-46cd-9cfc-8675338ada8f\",\"url\": \"https://deps.sec.gitlab.com/packages/maven/io.netty/netty/versions/3.9.1.Final/advisories\"},{\"type\": \"cve\",\"name\": \"CVE-2014-3488\",\"value\": \"CVE-2014-3488\",\"url\": \"https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3488\"}],\"links\": [{\"url\": \"https://bugzilla.redhat.com/CVE-2014-3488\"},{\"url\": \"http://netty.io/news/2014/06/11/3.html\"},{\"url\": \"https://github.com/netty/netty/issues/2562\"}],\"priority\": \"Unknown\",\"file\": \"app/pom.xml\",\"url\": \"https://bugzilla.redhat.com/CVE-2014-3488\",\"tool\": \"gemnasium\"},{\"category\": \"dependency_scanning\",\"name\": \"Django - CVE-2017-12794\",\"message\": \"Possible XSS in traceback section of technical 500 debug page\",\"cve\": \"app/requirements.txt:Django@1.11.3:CVE-2017-12794\",\"severity\": \"Unknown\",\"solution\": \"Upgrade to latest version or apply patch.\",\"scanner\": {\"id\": \"gemnasium\",\"name\": \"Gemnasium\"},\"location\": {\"file\": \"app/requirements.txt\",\"dependency\": {\"package\": {\"name\": \"Django\"},\"version\": \"1.11.3\"}},\"identifiers\": [{\"type\": \"gemnasium\",\"name\": \"Gemnasium-6162a015-8635-4a15-8d7c-dc9321db366f\",\"value\": \"6162a015-8635-4a15-8d7c-dc9321db366f\",\"url\": \"https://deps.sec.gitlab.com/packages/pypi/Django/versions/1.11.3/advisories\"},{\"type\": \"cve\",\"name\": \"CVE-2017-12794\",\"value\": \"CVE-2017-12794\",\"url\": \"https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-12794\"}],\"links\": [{\"url\": \"https://www.djangoproject.com/weblog/2017/sep/05/security-releases/\"}],\"priority\": \"Unknown\",\"file\": \"app/requirements.txt\",\"url\": \"https://www.djangoproject.com/weblog/2017/sep/05/security-releases/\",\"tool\": \"gemnasium\"},{\"category\": \"dependency_scanning\",\"name\": \"nokogiri - USN-3424-1\",\"message\": \"Vulnerabilities in libxml2\",\"cve\": \"rails/Gemfile.lock:nokogiri@1.8.0:USN-3424-1\",\"severity\": \"Unknown\",\"solution\": \"Upgrade to latest version.\",\"scanner\": {\"id\": \"gemnasium\",\"name\": \"Gemnasium\"},\"location\": {\"file\": \"rails/Gemfile.lock\",\"dependency\": {\"package\": {\"name\": \"nokogiri\"},\"version\": \"1.8.0\"}},\"identifiers\": [{\"type\": \"gemnasium\",\"name\": \"Gemnasium-06565b64-486d-4326-b906-890d9915804d\",\"value\": \"06565b64-486d-4326-b906-890d9915804d\",\"url\": \"https://deps.sec.gitlab.com/packages/gem/nokogiri/versions/1.8.0/advisories\"},{\"type\": \"usn\",\"name\": \"USN-3424-1\",\"value\": \"USN-3424-1\",\"url\": \"https://usn.ubuntu.com/3424-1/\"}],\"links\": [{\"url\": \"https://github.com/sparklemotion/nokogiri/issues/1673\"}],\"priority\": \"Unknown\",\"file\": \"rails/Gemfile.lock\",\"url\": \"https://github.com/sparklemotion/nokogiri/issues/1673\",\"tool\": \"gemnasium\"},{\"category\": \"dependency_scanning\",\"name\": \"ffi - CVE-2018-1000201\",\"message\": \"ruby-ffi DDL loading issue on Windows OS\",\"cve\": \"ffi:1.9.18:CVE-2018-1000201\",\"severity\": \"High\",\"solution\": \"upgrade to \\u003e= 1.9.24\",\"scanner\": {\"id\": \"bundler_audit\",\"name\": \"bundler-audit\"},\"location\": {\"file\": \"sast-sample-rails/Gemfile.lock\",\"dependency\": {\"package\": {\"name\": \"ffi\"},\"version\": \"1.9.18\"}},\"identifiers\": [{\"type\": \"cve\",\"name\": \"CVE-2018-1000201\",\"value\": \"CVE-2018-1000201\",\"url\": \"https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-1000201\"}],\"links\": [{\"url\": \"https://github.com/ffi/ffi/releases/tag/1.9.24\"}],\"priority\": \"High\",\"file\": \"sast-sample-rails/Gemfile.lock\",\"url\": \"https://github.com/ffi/ffi/releases/tag/1.9.24\",\"tool\": \"bundler_audit\"}]}' \u003e gl-dependency-scanning-report.json  \n  artifacts:  \n    reports:  \n      container_scanning: gl-container-scanning-report.json  \n      dependency_scanning: gl-dependency-scanning-report.json\n\n```  \n3. Create a merge request with those changes  \n4. As an unauthorized user, visit the page `https://example.gitlab.com/\u003cnamespace\u003e/\u003cpublic-project-name\u003e/merge_requests/1/merge_requests/1/container_scanning_reports` and `https://example.gitlab.com/\u003cnamespace\u003e/\u003cpublic-project-name\u003e/merge_requests/1/merge_requests/1/dependency_scanning_reports`\n\nThese two endpoints are now leaking the container scanning dependency scanning information to unauthorized users, who do not have access to CI. \n\n### Impact\n\nUnauthorized users have access to critical information like the container scanning or dependency scanning report, thus have a lot of insight of an application. By knowing the found vulnerabilities (or still existing), they could attack the target application.\n\n### Examples\n\nThis happens on gitlab.com. I've setup a test project, where the CI pipeline access is restricted to project members. However, you can access the container scanning and dependency scanning report from CI via the following endpoints:\n\n* https://gitlab.com/test-group-wter/test-reports/merge_requests/1/container_scanning_reports  \n* https://gitlab.com/test-group-wter/test-reports/merge_requests/1/dependency_scanning_reports\n\n### What is the current *bug* behavior?\n\nContainer scanning and dependency scanning reports are leaked on merge requests endpoints. \n\n### What is the expected *correct* behavior?\n\nContainer scanning and dependency scanning report endpoints on merge requests require proper access control to avoid leaking it to unauthorized users.\n\nBest regards,  \nXanbanx\n\n## Impact\n\nSee above","state":"closed","created_at":"2019-08-23T19:26:01.293Z","updated_at":"2019-12-11T14:44:51.773Z","closed_at":"2019-11-06T15:55:46.842Z","closed_by":{"id":4056133,"username":"jeremymatos","name":"Jeremy Matos","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7c972d878793ca2302186e5d8c0c0dd8?s=80\u0026d=identicon","web_url":"https://gitlab.com/jeremymatos"},"labels":["Deliverable","Enterprise Edition","HackerOne","backend","devops::secure","group::composition analysis","priority::3","security","severity::3","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13760","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13760","notes":"https://gitlab.com/api/v4/projects/278964/issues/13760/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13760/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13760","relative":"#13760","full":"gitlab-org/gitlab#13760"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24101182,"iid":13756,"project_id":278964,"title":"Create a project template containing HIPAA audit protocol issues","description":"### Problem to solve\n\nSome workflows are highly repeatable, such as the HIPAA Audit Protocol. GitLab is capable of supporting these types of workflows natively as evidenced by [this script](https://gitlab.com/ltrbojevic/hipaa-audit-protocol-issue-generator) that uses the API to generate all of the necessary issues in the HIPAA Audit Protocol.\n\nThe goal of this issue is to use a real world use case to serve as the first proof of concept for generating multiple issues that map to a given workflow template without having to import a CSV every time.\n\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\nPersonas can be found at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\n- Compliance or Audit users who project manage an organization's compliance programs\n- Group Owners or Administrators who interface between GitLab's technical activities and the audit team\n\n### Further details\n\n#### Goals\n\n- Remove waste from highly repeatable, complex processes.\n- Reduce risk by generating all of the necessary artifacts for a given process programmatically (computers are more efficient than humans at this).\n- Increase the ability for individuals to collaborate on these kinds of processes. \n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\n- Create a HIPAA Audit Protocol project template that GitLab users can use when creating a new project.\n- This project template should contain the 180 issues that map to the HIPAA Audit Protocol pre-loaded at project creation\n\n\u003cdetails\u003e\n  \u003csummary\u003eOriginal proposal\u003c/summary\u003e\n- Expose a button in the GitLab UI to generate all the necessary artifacts for the HIPAA Audit Protocol.\n\u003c/details\u003e\n\n#### Things to figure out\n\n- [ ] How do we handle the creation or importing of issues for this project template?\n- [ ] Who would be using the button? (So we can figure out appropriate permissions)\n- [ ] How is the template updated / maintained? \n\n\u003cdetails\u003e\n  \u003csummary\u003eOriginal List\u003c/summary\u003e\n- [ ] Where would the button live. (Group level settings, Project level settings, etc.)\n- [ ] Who would be using the button. (So we can figure out appropriate permissions)\n- [ ] Where do all the generated artifacts go? (e.g. does this also create a new project within a target group, etc.)\n- [ ] How is the workflow template sourced? Are we scraping the Audit Protocol from [hhs.gov](https://www.hhs.gov/hipaa/for-professionals/compliance-enforcement/audit/protocol/index.html) on some sort of schedule? \n- [ ] How is the template updated / maintained? \n\n\u003c/details\u003e\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)? --\u003e\n\n- This will need to be determined during the validation and design phases. \n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements --\u003e\n\n- This will require updates to our documentation.\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\n#### Potential Risks\n\n- This will need to be identified as part of the solution design process. \n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n#### Success Metrics\n\n- Count of customers using the template\n- Count of audit protocols generated\n- Count of audit protocols completed \n\n#### Acceptance Criteria\n\n- [ ] Selecting a `HIPAA Audit Project` template will successfully create a new project with the 180 issues that map to the HIPAA audit protocol.\n\n\u003c!--\n- [ ] Clicking a `Generate HIPAA Audit Protocol` button will successfully create all necessary issues, labels, and relationships that map to the current version of the [protocol](https://www.hhs.gov/hipaa/for-professionals/compliance-enforcement/audit/protocol/index.html) --\u003e\n\n### What is the type of buyer? \n\n\u003c!-- Which leads to: in which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\n\n- Given this reduces risk with regards to compliance, ~\"GitLab Ultimate\" appears to be the best fit given what we know today.\n\n### Links / references\n\n- https://about.gitlab.com/2019/07/25/moving-workflows-to-gitlab-the-case-of-the-hipaa-audit-protocol/","state":"closed","created_at":"2019-08-23T16:05:49.553Z","updated_at":"2022-06-28T13:11:10.539Z","closed_at":"2020-04-13T05:06:54.239Z","closed_by":{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"},"labels":["Category:Compliance Management","Deliverable","Enterprise Edition","GitLab Ultimate","UX","backend","devops::manage","direction","group::compliance","type::feature"],"milestone":{"id":1104429,"iid":46,"group_id":9970,"title":"12.10","description":"https://about.gitlab.com/releases/2020/04/22/gitlab-12-10-released","state":"closed","created_at":"2019-12-20T15:15:53.243Z","updated_at":"2020-10-08T12:00:39.852Z","due_date":"2020-04-17","start_date":"2020-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/46"},"assignees":[{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"}],"author":{"id":4303289,"username":"gweaver","name":"Gabe Weaver","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303289/avatar.png","web_url":"https://gitlab.com/gweaver"},"type":"ISSUE","assignee":{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"},"user_notes_count":29,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13756","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":10,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 10 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13756","notes":"https://gitlab.com/api/v4/projects/278964/issues/13756/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13756/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13756","relative":"#13756","full":"gitlab-org/gitlab#13756"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3002,"epic":{"id":38075,"iid":3002,"title":"Enterprise Project Templates","url":"/groups/gitlab-org/-/epics/3002","group_id":9970,"human_readable_end_date":"Apr 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null}]