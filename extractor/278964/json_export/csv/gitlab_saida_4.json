[{"id":117186045,"iid":378428,"project_id":278964,"title":"Add Dependency Scanning support to Scan Execution Policies","description":"## Why are we doing this work\n\nWe want users to be able to require Dependency Scanning to run as part of a GitLab Scan Execution Security Policy.\n\nSimilar to the existing SAST scan action, the Dependency Scanning scan action will execute the [Jobs/Dependency-Scanning](https://gitlab.com/gitlab-org/gitlab-foss/-/blob/2b5469a93eb16d5a24c02105e2251e65a75ba915/lib/gitlab/ci/templates/Jobs/Dependency-Scanning.gitlab-ci.yml) template in a child pipeline.\n\n## Relevant links\n\n* https://gitlab.com/groups/gitlab-org/-/epics/7669\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation: [Scan execution policies](https://docs.gitlab.com/ee/user/application_security/policies/scan-execution-policies.html) is updated to reflect newly introduced `scan: dependency_scanning` action\n  * [`doc/user/application_security/policies/scan-execution-policies.md`](https://gitlab.com/gitlab-org/gitlab/-/blob/d8ecfccdd6aa1a4dc7eb134fe1e5a0e552f02ba0/doc/user/application_security/policies/scan-execution-policies.md)\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\n* ~backend Refer to the [`dependency-scanning-security-policy-support`](https://gitlab.com/gitlab-org/gitlab/-/commit/1c718e4976bff5ee9c4dbc185f35cefd58745639) branch for a PoC. The implementation will differ slightly once https://gitlab.com/gitlab-org/gitlab/-/merge_requests/100173 is merged.\n\n## Verification steps","state":"closed","created_at":"2022-10-19T15:45:05.809Z","updated_at":"2022-11-14T03:19:44.292Z","closed_at":"2022-11-11T16:21:29.565Z","closed_by":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"labels":["Category:Security Policy Management","devops::govern","feature::addition","group::security policies","section::sec","type::feature","workflow::verification"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"}],"author":{"id":9878214,"username":"bauerdominic","name":"Dominic Bauer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9878214/avatar.png","web_url":"https://gitlab.com/bauerdominic"},"type":"ISSUE","assignee":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378428","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378428","notes":"https://gitlab.com/api/v4/projects/278964/issues/378428/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378428/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378428","relative":"#378428","full":"gitlab-org/gitlab#378428"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7669,"epic":{"id":458831,"iid":7669,"title":"Dependency Scanning support for Scan Execution Policies","url":"/groups/gitlab-org/-/epics/7669","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":117182612,"iid":378420,"project_id":278964,"title":"UX: Storage project table MVC","description":"This is the UX issue for #375042","state":"closed","created_at":"2022-10-19T15:02:29.385Z","updated_at":"2023-01-05T15:14:02.784Z","closed_at":"2022-12-15T21:14:29.141Z","closed_by":{"id":5058729,"username":"mnearents","name":"Matthew Nearents","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5058729/avatar.png","web_url":"https://gitlab.com/mnearents"},"labels":["UX","[deprecated] Accepting merge requests","devops::fulfillment","group::utilization","missed:15.6","section::fulfillment","type::feature"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[],"author":{"id":5058729,"username":"mnearents","name":"Matthew Nearents","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5058729/avatar.png","web_url":"https://gitlab.com/mnearents"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378420","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378420","notes":"https://gitlab.com/api/v4/projects/278964/issues/378420/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378420/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378420","relative":"#378420","full":"gitlab-org/gitlab#378420"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8852,"epic":{"id":611391,"iid":8852,"title":"Namespace storage usage visibility requirements for Fulfillment","url":"/groups/gitlab-org/-/epics/8852","group_id":9970,"human_readable_end_date":"Dec 18, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":117167250,"iid":378407,"project_id":278964,"title":"License Scanning using License DB and SBOM components","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\nThe `LicenseScanning` service implemented in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/103574 needs to be changed in order to replace the License Scanning CI job, as captured by https://gitlab.com/groups/gitlab-org/-/epics/8072.\n- Legacy beahvior: It parses legacy License Scanning JSON artifacts.\n- New behavior: It matches SBOM components detected in the project branch with license data imported from the License DB.\n\n## Further details\n\nIn the new behavior, License Scanning does the following:\n 1. Get SBOM components for the given pipeline or the default branch.\n 1. Query the DB to fetch licenses of these components. https://gitlab.com/gitlab-org/gitlab/-/issues/373163 defines that data is stored.\n 1. Build a new `Report` using its methods, and return it.\n\nIt returns a `Report` model, just like the legacy behavior implemented in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/103574+.\n\nThe new behavior is behind a feature flag.\n\nAlso, License Scanning falls back to the legacy behavior when no SBOM data is available.\n\n### SBOM components\n\nIn order to get SBOM components of a branch or pipeline, the License Scanning service delegates to one of these:\n- if available, an existing finder implemented by ~\"group::threat insights\" as part of of https://gitlab.com/groups/gitlab-org/-/epics/8293+\n- a simplified finder implemented by ~\"group::composition analysis\", which uses ActiveRecord relations; it doesn't cover edge-cases, and it will be replaced by a complete implementation as ~\"group::threat insights\" moves forward with https://gitlab.com/groups/gitlab-org/-/epics/8293\n\nSee https://gitlab.com/groups/gitlab-org/-/epics/8532#note_1160236461 and following comments.\n\n### Names of licenses\n\nIn this new implementation, the `Report` model doesn't provide the names of the SPDX licenses that have been detected; `#license_names` returns nothing. However, this should be fully compatible with the current implementation of license policies. That's because the Managed API reuses existing records of `software_licenses`, and that table is in sync with the SPDX License List. See https://gitlab.com/gitlab-org/gitlab/-/issues/379137#note_1160165965\n \n## Relevant links\n\n- https://gitlab.com/gitlab-org/gitlab/-/issues/373163+\n- https://gitlab.com/groups/gitlab-org/-/epics/8532+\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\nThe following steps can be implemented in separate MRs:\n \n1. Create a finder that gets the [SBOM components](#SBOM-components).\n   - It takes a project branch or CI pipeline.\n   - It returns tuples of PURL type, package name, and package version..\n1. 1. Create a finder that gets licenses of package versions.\n   - It queries the DB tables implemented in https://gitlab.com/gitlab-org/gitlab/-/issues/373163+.\n   - It takes tuples of PURL type, package name, and package version.\n   - It returns the corresponding licenses.\n1. Create a new License Scanning service class that implements the new behavior. It uses the two aforementioned finders.\n1. Move the existing License Scanning service (legacy behavior), and change the existing License Scanning service to that it delegates to it, acting as a simple proxy.\n1. Change the License Scanning proxy to switch to new behavior when it's enabled by a Feature Flag.\n1. Change the License Scanning proxy to fallback to legacy behavior when project isn't compatible with new behavior, even though the FF enables the new behavior.\n\n## Verification steps\n\nCheck new behavior:\n1. Enable feature flag.\n2. Set up a project supported by SBOM generators, and using package types supported by License DB.\n3. Add corresponding SBOM generators to the CI config.\n4. Trigger a pipeline.\n5. Check licenses in `License Compliance` page.\n\nCheck fallback to legacy behavior:\n1. Enable feature flag.\n2. Set up a project supported by legacy License Scanning job.\n3. Include legacy CI template for License Scanning.\n4. Trigger a pipeline.\n5. Check licenses in `License Compliance` page.\n\n/cc @ifrenkel @hacks4oats","state":"closed","created_at":"2022-10-19T12:19:19.114Z","updated_at":"2022-12-14T21:34:07.399Z","closed_at":"2022-12-04T19:10:12.651Z","closed_by":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"labels":["Category:License Compliance","GitLab Ultimate","Stretch","backend","devops::secure","feature::addition","group::composition analysis","section::sec","type::feature","workflow::ready for development"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"}],"author":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"type":"ISSUE","assignee":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"user_notes_count":31,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378407","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":5,"blocking_issues_count":1,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378407","notes":"https://gitlab.com/api/v4/projects/278964/issues/378407/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378407/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378407","relative":"#378407","full":"gitlab-org/gitlab#378407"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8072,"epic":{"id":523613,"iid":8072,"title":"Replace license-finder","url":"/groups/gitlab-org/-/epics/8072","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":"on_track"},{"id":117162123,"iid":378396,"project_id":278964,"title":"Issue labels don't show in epics with mixed subepics and issues","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nWhen looking at an epic that contains both sub-epics and issues with the `show labels` feature switched on, only the labels of the sub-epics are shown. This works fine for epics that only contain issues. I have started to notice this on 2022-10-18, but am not sure if it happened earlier as well. \n\n### Steps to reproduce\n\nGo to an epic that contains both sub-epics and issues. You will see that the labels are not shown for issues. \n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\nhttps://gitlab.com/groups/gitlab-org/-/epics/7210+\n\n### What is the current *bug* behavior?\n\nThe `show labels` feature is not applied to issues in an epic that also contains sub-epics, and it only reacts to sub-epics. \n\n### What is the expected *correct* behavior?\n\nThe `show labels` feature also applies to issues in an epic that also contains sub-epics, just like it does for sub-epics. \n\n### Relevant logs and/or screenshots\n\n![Screenshot_2022-10-19_at_12.41.48](/uploads/9570841007b9fe102eed6fcbe376ebf3/Screenshot_2022-10-19_at_12.41.48.png)","state":"closed","created_at":"2022-10-19T10:43:18.023Z","updated_at":"2022-11-08T07:11:09.513Z","closed_at":"2022-11-08T07:11:09.471Z","closed_by":{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"},"labels":["GraphQL","Track Health Status","backend","devops::plan","epics","group::product planning","priority::3","section::dev","severity::3","type::bug","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"}],"author":{"id":11485419,"username":"lohrc","name":"Christina Lohr","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11485419/avatar.png","web_url":"https://gitlab.com/lohrc"},"type":"ISSUE","assignee":{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378396","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378396","notes":"https://gitlab.com/api/v4/projects/278964/issues/378396/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378396/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378396","relative":"#378396","full":"gitlab-org/gitlab#378396"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":117158081,"iid":378384,"project_id":278964,"title":"Record timestamp of status updates for container repositories","description":"## Context\n\nFollowup from https://gitlab.com/gitlab-org/gitlab/-/issues/217702#note_1141134506.\n\n## Problem\n\nRight now, the `ContainerRepository` model has a `status` attribute that can be set to `delete_scheduled` or `delete_failed` ([source](https://gitlab.com/gitlab-org/gitlab/-/blob/3612de75881d317fd0f778c1a02a27185af74954/app/models/container_repository.rb#L37)). This is set to `delete_scheduled` when the repository was scheduled for async deletion and set to `delete_failed` if that deletion fails.\n\nIn certain situations, it's useful to know when a repository was scheduled for deletion and possibly failed to be deleted. We cannot do this now because we're not recording the timestamp of the status updates.\n\n## Proposal\n\nAdd two new timestamp attributes to the `ContainerRepository` model and set the corresponding one whenever `status` changes:\n\n- `delete_scheduled_at`\n- `delete_failed_at`","state":"closed","created_at":"2022-10-19T09:32:50.130Z","updated_at":"2022-11-30T15:27:38.702Z","closed_at":"2022-11-30T15:27:38.633Z","closed_by":{"id":12191491,"username":"Ashvith","name":"Ashvith Shetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12191491/avatar.png","web_url":"https://gitlab.com/Ashvith"},"labels":["Category:Container Registry","Community contribution","backend","devops::package","good for new contributors","group::container registry","quick win","rails","section::ops","type::maintenance","workflow::in dev"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":12191491,"username":"Ashvith","name":"Ashvith Shetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12191491/avatar.png","web_url":"https://gitlab.com/Ashvith"}],"author":{"id":5054840,"username":"jdrpereira","name":"João Pereira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054840/avatar.png","web_url":"https://gitlab.com/jdrpereira"},"type":"ISSUE","assignee":{"id":12191491,"username":"Ashvith","name":"Ashvith Shetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12191491/avatar.png","web_url":"https://gitlab.com/Ashvith"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378384","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378384","notes":"https://gitlab.com/api/v4/projects/278964/issues/378384/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378384/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378384","relative":"#378384","full":"gitlab-org/gitlab#378384"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":117151778,"iid":378373,"project_id":278964,"title":"Exec Dashboards PoC: Separate comparative table MVC by groups/projects (multi-widgets view)","description":"### Overview\n\nOnce https://gitlab.com/gitlab-org/gitlab/-/issues/373006+ is completed, we need to add the missing [MVC](https://gitlab.com/gitlab-org/gitlab/-/issues/370887#note_1124788995) features to the Exec Dashboards PoC.\n\n[Problem to solve](https://gitlab.com/gitlab-org/gitlab/-/issues/373006#problem-to-solve)\n\n### Proposal\n\n1. Allow additional sub-groups / projects to be displayed by passing in URL parameters. \n2. For any sub-group - display a separated comparative widget.\n3. For any project - display a separated comparative widget.\n\n#### Acceptance criteria\n\nCompare DORA 4 metrics between these projects in one view: \n\n1. GitLab.org / GitLab FOSS\n2. GitLab.org / GitLab\n3. GitLab.org / GitLab Design\n4. GitLab.org / GitLab Docs","state":"closed","created_at":"2022-10-19T07:52:58.224Z","updated_at":"2023-01-09T13:36:20.067Z","closed_at":"2022-12-18T22:32:47.654Z","closed_by":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"labels":["Category:DORA Metrics","Category:DevOps Reports","Deliverable","devops::plan","documentation","frontend","group::optimize","priority::1","section::dev","type::feature","workflow::verification"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"}],"author":{"id":10879254,"username":"hsnir1","name":"Haim Snir","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10879254/avatar.png","web_url":"https://gitlab.com/hsnir1"},"type":"ISSUE","assignee":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"user_notes_count":52,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378373","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378373","notes":"https://gitlab.com/api/v4/projects/278964/issues/378373/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378373/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378373","relative":"#378373","full":"gitlab-org/gitlab#378373"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9159,"epic":{"id":645211,"iid":9159,"title":"Exec Dashboards: New page POC with \"Metrics comparative table\"","url":"/groups/gitlab-org/-/epics/9159","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":117149370,"iid":378368,"project_id":278964,"title":"Backend: Fix inclusion validation for CI entries","description":"As we realized in !101350;\n\n\u003e We have the \"inclusion\" validation for the `when` keyword but no validation for its type. So, the attribute also accepts an array as the value. The \"inclusion\" validation of `ActiveModel::Validations` also [accepts array values and compares each element](https://github.com/rails/rails/blob/v6.1.6.1/activemodel/lib/active_model/validations/clusivity.rb#L27-L31).\n\n```ruby\nclass MyTestClass\n  include ActiveModel::Validations\n\n  attr_accessor :title\n\n  validates_inclusion_of :title, in: %w[abc def]\nend\n\nt = MyTestClass.new\nt.title = 'abc'\nt.valid? # =\u003e true\n\nt.title = 'ghi'\nt.valid? # =\u003e false\n\nt.title = ['abc']\nt.valid? # =\u003e true\n```\n\nWe fixed that problem in that MR for the `Entry::Job` and `Entry::Bridge` entries. In this issue, we'll check other CI entries. For example; we have other `when` attributes for `Entry::Change` and `Entry::Artifacts`.\n\n## Implementation\n\n| ~backend | MR |\n| ------ | ------ |\n| Fix inclusion validation for CI entries (Fixed entries `Entry::Artifacts` and `Entry::Cache`) | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/105149 |","state":"closed","created_at":"2022-10-19T07:15:08.212Z","updated_at":"2022-12-14T11:24:01.588Z","closed_at":"2022-12-05T17:26:21.904Z","closed_by":{"id":9468400,"username":"marknuzzo","name":"Mark Nuzzo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9468400/avatar.png","web_url":"https://gitlab.com/marknuzzo"},"labels":["Category:Pipeline Authoring","backend","bug::transient","devops::verify","group::pipeline authoring","priority::2","section::ops","severity::2","type::bug","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":12867582,"username":"lma-git","name":"Leaminn Ma","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12867582/avatar.png","web_url":"https://gitlab.com/lma-git"}],"author":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"type":"ISSUE","assignee":{"id":12867582,"username":"lma-git","name":"Leaminn Ma","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12867582/avatar.png","web_url":"https://gitlab.com/lma-git"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378368","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378368","notes":"https://gitlab.com/api/v4/projects/278964/issues/378368/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378368/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378368","relative":"#378368","full":"gitlab-org/gitlab#378368"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":117145839,"iid":378364,"project_id":278964,"title":"[Feature flag] Rollout of `index_user_callback`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [indexing users into elasticsearch](https://gitlab.com/gitlab-org/gitlab/-/issues/359820) on production,\nthat is currently behind the `index_user_callback` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: Global Search\n- Most appropriate slack channel to reach out to: `#g_global_search`\n- Best individual to reach out to: @maddievn \n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\nEnabling the feature flag would include a module on users which would invoke a callback to index a user into Elasticsearch. \n\nThe eventual state is that [user search is using elasticsearch](https://gitlab.com/gitlab-org/gitlab/-/issues/377587).\n\nWe want to enable this feature flag on a user basis so that we can do a partial rollout and monitor the user index in production.\n\n### When is the feature viable?\n\n\u003c!-- What are the settings we need to configure in order to have this feature viable? --\u003e\n\n\u003c!-- \nExample below:\n \n1. Enable service ping collection\n   `ApplicationSetting.first.update(usage_ping_enabled: true)`\n--\u003e\n\nThe following conditions are required to reach eventual state:\n1. This feature flag (`index_user_callback`) is enabled for all users\n2. The elastic migration to backfill all users is completed `Elastic::DataMigrationService.migration_has_finished?(:create_user_index)`\n\n-\u003e `Feature.enabled?(:index_user_callback, user) \u0026\u0026 Elastic::DataMigrationService.migration_has_finished?(:create_user_index)`\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n_Consider mentioning checks for 5xx errors or other anomalies like an increase in redirects \n(302 HTTP response status)_\n\n### What can we check for monitoring production after rollouts?\n\n_Consider adding links to check for Sentry errors, Production logs for 5xx, 302s, etc._\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev --staging --staging-ref`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n      The best environment to validate the feature in is [staging-canary](https://about.gitlab.com/handbook/engineering/infrastructure/environments/#staging-canary)\n      as this is the first environment deployed to. Note you will need to make sure you are configured to use canary as outlined [here](https://about.gitlab.com/handbook/engineering/infrastructure/environments/canary-stage/)\n      when accessing the staging environment in order to make sure you are testing appropriately.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab,gitlab-org/gitlab-foss,gitlab-com/www-gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org,gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e \u003cfeature-flag-name\u003e true`\n- [x] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [ ] Set a milestone to the rollout issue to signal for enabling and removing the feature flag when it is stable.\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com. \n- [ ] Ensure that any breaking changes have been announced following the [release post process](https://about.gitlab.com/handbook/marketing/blog/release-posts/#deprecations-removals-and-breaking-changes) to ensure GitLab customers are aware.\n- [ ] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --random`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [x] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Consider cleaning up the feature flag from all environments by running these chatops command in `#production` channel. Otherwise these settings may override the default enabled.\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev --staging --staging-ref --production`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can [create a separate issue](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\nYou can either [create a follow-up issue for Feature Flag Cleanup](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) or use the checklist below in this same issue.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the cleanup MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [x] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] If not already done, clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev --staging --staging-ref --production`\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```\n\n\u003c!-- A feature flag can also be used for rolling out a bug fix or a maintenance work.\nIn this scenario, labels must be related to it, for example; ~\"type::feature\", ~\"type::bug\" or ~\"type::maintenance\".\nPlease use /copy_metadata to copy the labels from the issue you're rolling out. --\u003e","state":"closed","created_at":"2022-10-19T06:04:15.392Z","updated_at":"2022-11-22T06:26:13.646Z","closed_at":"2022-11-17T05:53:36.890Z","closed_by":{"id":12457737,"username":"maddievn","name":"Madelein van Niekerk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12457737/avatar.png","web_url":"https://gitlab.com/maddievn"},"labels":["Category:Global Search","devops::data_stores","feature flag","feature::addition","group::global search","section::enablement","type::feature"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":12457737,"username":"maddievn","name":"Madelein van Niekerk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12457737/avatar.png","web_url":"https://gitlab.com/maddievn"}],"author":{"id":12457737,"username":"maddievn","name":"Madelein van Niekerk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12457737/avatar.png","web_url":"https://gitlab.com/maddievn"},"type":"ISSUE","assignee":{"id":12457737,"username":"maddievn","name":"Madelein van Niekerk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12457737/avatar.png","web_url":"https://gitlab.com/maddievn"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-11-19","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378364","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":47,"completed_count":11},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"11 of 47 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378364","notes":"https://gitlab.com/api/v4/projects/278964/issues/378364/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378364/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378364","relative":"#378364","full":"gitlab-org/gitlab#378364"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8980,"epic":{"id":623415,"iid":8980,"title":"Improve User Search","url":"/groups/gitlab-org/-/epics/8980","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":117145193,"iid":378363,"project_id":278964,"title":"Enabling suggested reviewers when project access token's are disabled","description":"The following discussion from !101233 should be addressed:\n\n- [ ] @tle_gitlab started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/101233#note_1139009501):  (+5 comments)\n\n    \u003e **thought:** Since the project should belong to a namespace that allows creating resource access tokens, I wonder if we could just make sure the project is [permitted to do so](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/policies/ee/project_policy.rb#L498), instead of selectively picking out the right plans.","state":"closed","created_at":"2022-10-19T05:44:29.527Z","updated_at":"2022-12-05T05:04:34.407Z","closed_at":"2022-12-05T05:04:14.180Z","closed_by":{"id":11349374,"username":"tle_gitlab","name":"Tan Le","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4b00201b048762e086245e9c3c5b466?s=80\u0026d=identicon","web_url":"https://gitlab.com/tle_gitlab"},"labels":["ai assisted::reviewer-recommender","backend","bug::functional","devops::modelops","feature flag","frontend","group::ai assisted","missed:15.5","priority::4","section::data-science","severity::4","type::bug"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11349374,"username":"tle_gitlab","name":"Tan Le","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4b00201b048762e086245e9c3c5b466?s=80\u0026d=identicon","web_url":"https://gitlab.com/tle_gitlab"}],"author":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"type":"ISSUE","assignee":{"id":11349374,"username":"tle_gitlab","name":"Tan Le","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4b00201b048762e086245e9c3c5b466?s=80\u0026d=identicon","web_url":"https://gitlab.com/tle_gitlab"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378363","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378363","notes":"https://gitlab.com/api/v4/projects/278964/issues/378363/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378363/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378363","relative":"#378363","full":"gitlab-org/gitlab#378363"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":117140448,"iid":378356,"project_id":278964,"title":"Add Geo guidance and troubleshooting about SAML configuration","description":"## Problem\n\nConfiguring and troubleshooting Geo and SAML (and probably SSO generally) is difficult.\n\n## Proposal\n\n\u003e What if we could show the admins a message like this (somehow, maybe in `rake gitlab:geo:check`?):\n\u003e\n\u003e \u003e \"Gitlab is currently configured using SAML authentication. This can cause problems for transparent Geo request proxying. Please see the following document if you are having difficulties logging in to Geo sites via SAML: https://....\"\n\u003e\n\u003e The doc in question describes why SAML (and others?) can have issues with this configuration, and how to fix it (add the following ACS URLs to the SAML configuration).\n\n- Add a Geo document about configuring SAML (or maybe SSO generally)\n- Describe general guidance for configuration (for example, \"auth provider configuration on a secondary site is ignored\")\n- Add a Troubleshooting section\n  - One example to add is https://gitlab.com/gitlab-org/gitlab/-/issues/372490 for 15.1 through 15.5. On fix is to add the secondary site's external URL as an ACS URL in your SAML Identity Provider.\n- Cross-link between relevant docs https://docs.gitlab.com/ee/integration/saml.html, https://docs.gitlab.com/ee/user/group/saml_sso/troubleshooting.html, etc\n- Add a check to the Geo check rake task, which links to the doc if you have SAML configured =\u003e Follow up https://gitlab.com/gitlab-org/gitlab/-/issues/385677\n- Add a test to make sure that removing the `assertion_consumer_service_url` from your SAML provider gitlab.rb configuration continues to cause the desired behavior for Geo with separate URLs with proxying. =\u003e Follow up https://gitlab.com/gitlab-org/gitlab/-/issues/385678\n\n## References\n\nhttps://gitlab.com/gitlab-org/gitlab/-/issues/372490 has most of the historical context","state":"closed","created_at":"2022-10-19T01:51:13.212Z","updated_at":"2023-01-10T16:36:19.433Z","closed_at":"2023-01-06T18:32:18.553Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["devops::systems","feature::addition","group::geo","section::enablement","type::feature","workflow::in review"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378356","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378356","notes":"https://gitlab.com/api/v4/projects/278964/issues/378356/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378356/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378356","relative":"#378356","full":"gitlab-org/gitlab#378356"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":117134685,"iid":378344,"project_id":278964,"title":"Investigate why _OVERRIDES_CMD requires to specify current directory","description":"## Problem\n\nA customer reported an issue executing `override_cmd` in their pipeline. The report came from a question in \n[Reddit](https://old.reddit.com/r/gitlab/comments/xpffnm/security_dashboard_not_reporting_on_security_jobs/iqftfsb/), and then crossposted in [slack](https://gitlab.slack.com/archives/C02MK3RSLTB/p1666108035576489).\nThe issue was resolved in https://gitlab.com/gitlab-org/gitlab/-/issues/378328+, but in the same report, the customer mentioned that part of this troubleshooting process was to indicate the current directory when executing their custom command for `override_cmd`.\n\n\nThis issue is a follow-up on the comment about the need to specify the current directory. Investigate whether `_OVERRIDES_CMD` requires specifying the current directory to execute the command override command, and propose a possible solution.\n\nFor example,  a user plans using the command `renew_token.py`. The user expects to set the configuration variable: `FUZZAPI_OVERRIDES_CMD: renew_token.py`, but it has to specify the current directory to get it working `FUZZAPI_OVERRIDES_CMD: ./renew_token.py`.\n\n## Proposal\n\nAdd `.` add the end of the  `PATH` environmental variable when executing `override_cmd`. Hence command in the working directory should be found. Also, it should work for more complex scenarios such as:\n\n- `MY_APP_VARIABLE=foo my-command argument1`\n- `my-command argument1 my-argument2`\n- `cd directory; my-command;`\n\n## Remark\n- `worker-entry` and `scanner` have different current working directories, to ensure `override_cmd` uses the correct one it is set when calling `ProcessInfo.Start` to match the one used by `worker-entry`.","state":"closed","created_at":"2022-10-18T21:04:22.896Z","updated_at":"2022-12-16T14:50:28.614Z","closed_at":"2022-12-16T14:50:28.591Z","closed_by":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"labels":["Category:API Security","devops::secure","group::dynamic analysis","section::sec","type::bug","workflow::verification"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"}],"author":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"type":"ISSUE","assignee":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378344","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378344","notes":"https://gitlab.com/api/v4/projects/278964/issues/378344/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378344/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378344","relative":"#378344","full":"gitlab-org/gitlab#378344"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":117128730,"iid":378332,"project_id":278964,"title":"Frontend: Refactor CI/CD variables to have shared apollo structure between projects/groups/instances","description":"For the big CI/CD variable refactors, we now have 3 top components for Ci/CD variables, one for each category (project group and instance). However a lot of the logic is duplicated, so this issue is to extract the shared logic into its own child component and let the parent component handle passing down props to customize the component behaviour.","state":"closed","created_at":"2022-10-18T19:01:46.037Z","updated_at":"2022-11-18T13:20:09.301Z","closed_at":"2022-11-17T16:17:16.766Z","closed_by":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"labels":["Category:Pipeline Authoring","devops::verify","frontend","group::pipeline authoring","maintenance::refactor","section::ops","type::maintenance","workflow::verification"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"}],"author":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"type":"ISSUE","assignee":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378332","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378332","notes":"https://gitlab.com/api/v4/projects/278964/issues/378332/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378332/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378332","relative":"#378332","full":"gitlab-org/gitlab#378332"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":117126741,"iid":378328,"project_id":278964,"title":"API Security job failing when _OVERRIDE_CMD is provided due to missing _OVERRIDE_FILE","description":"## Problem\n\nDAST API and API Fuzzing allow supplying a script or program that will generate the an overrides file. This is commonly used for getting authentication tokens that are only good for a period of time or for tokens that change on each pipeline. During usage a user discovered that the file check was performed too early, prior to the provided command executing. This results in a failed scanning job.\n\n* Reported by a user via reddit [(slack thread).](https://gitlab.slack.com/archives/CKWJP0ZS7/p1666076519378959)\n* A sample project can be see here  https://gitlab.com/mikeeddington/dast-api-testing\n* This is a regression\n\n\u003cdetails\u003e\u003csummary\u003eSample of error \u003c/summary\u003e\n\n```log\n14:57:24.710 [DBG] \u003cPeach.Web.Runner.Services.Overrides\u003e Executing overrides command\n14:57:24.740 [INF] \u003cPeach.Web.Core.Services.OsPlatform\u003e [Process Id: 35] Started command: '\"bash -c ./renew_token.py\"'\n14:57:24.744 [DBG] \u003cPeach.Web.Runner.Services.Overrides\u003e Finished executing overrides command\n14:57:24.744 [ERR] \u003cPeach.Web.Core.Services.WebRunnerMachine\u003e Unexpected exception in WebRunnerMachine::Run()\nSystem.IO.FileNotFoundException: The overrides file was not found.\nFile name: '/builds/mikeeddington/dast-api-testing/overrides.json'\n   at Peach.Web.Runner.Services.Overrides.Start(IRunnerOptions runnerOptions) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/PeachWeb/Runner/Services/Overrides.cs:line 86\n   at Peach.Web.Runner.Services.RunnerService.Start(Job job, IRunnerOptions options) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/PeachWeb/Runner/Services/RunnerService.cs:line 61\n   at Peach.Web.Core.Services.WebRunnerMachine.Run(IRunnerOptions runnerOptions, CancellationToken token) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/PeachWeb/Core/Services/WebRunnerMachine.cs:line 322\n14:57:24.765 [WRN] \u003cPeach.Web.Core.Services.WebRunnerMachine\u003e * Session failed: An unexpected exception occurred: The overrides file was not found.\n14:57:24.786 [DBG] \u003cPeach.Web.Core.Services.OsPlatform\u003e [Process Id: 35] \"renew_token.py running! /builds/mikeeddington/dast-api-testing\"\n14:57:24.786 [DBG] \u003cPeach.Web.Core.Services.OsPlatform\u003e [Process Id: 35] \"File exists!\"\n14:57:24.796 [INF] \u003cPeach.Web.Core.Services.OsPlatform\u003e [Process Id: 35] Finished command. Exit Code: 0.\n14:57:24.811 [INF] \u003cPeach.Web.Core.Services.WebRunnerMachine\u003e Finished testing. Performed a total of 0 requests.\n```\n\n\u003c/details\u003e\n\n## Workaround\n\nA workaround exists for this issue. During configuration, supply the command with both `_PRE_SCRIPT` and also `_OVERRIDES_CMD`. This will make sure the script runs prior to the analyzer starting and checking.\n\nExample for DAST API:\n\n```yaml\ndast_api:\n  variables:\n    DAST_API_PRE_SCRIPT: ./get_token.py\n    DAST_API_OVERRIDES_CMD: ./get_token.py\n    DAST_API_OVERRIDES_FILE: overrides.json\n    DAST_API_OVERRIDES_INTERVAL: 300\n```\n\nExample for API Fuzzing:\n\n```yaml\napifuzzer_fuzz:\n  variables:\n    FUZZAPI_PRE_SCRIPT: ./get_token.py\n    FUZZAPI_OVERRIDES_CMD: ./get_token.py\n    FUZZAPI_OVERRIDES_FILE: overrides.json\n    FUZZAPI_OVERRIDES_INTERVAL: 300\n```\n\n\n\n## Proposal\n\n1. [ ] Add tests\n    1. [x] Unit test\n    1. [x] Int test\n    1. [x] e2e test \n1. [x] await for file creation during the override start process","state":"closed","created_at":"2022-10-18T18:20:11.876Z","updated_at":"2022-12-07T13:19:37.775Z","closed_at":"2022-10-21T16:27:40.588Z","closed_by":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"labels":["Category:API Security","Deliverable","bug::functional","devops::secure","group::dynamic analysis","milestone::p1","priority::3","section::sec","severity::3","type::bug","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"}],"author":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"type":"ISSUE","assignee":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378328","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":4},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378328","notes":"https://gitlab.com/api/v4/projects/278964/issues/378328/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378328/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378328","relative":"#378328","full":"gitlab-org/gitlab#378328"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":117125853,"iid":378326,"project_id":278964,"title":"Gitlab::GithubImport:ImportPullRequestMergedByWorker: Rescue the exception in execute method","description":"### Problem\nWe have noticed an increased number of failing jobs over the past 7 days (Oct., 11th - Oct., 18th):\n\n![image](/uploads/29aa8e6efbb79f77c475ff9bc7950b71/image.png)\n\nSource: https://log.gprd.gitlab.net/app/visualize#/create?type=table\u0026indexPattern=AWNABDRwNDuQHTm2tH6l\u0026_a=h@6df2a18\u0026_g=(time:(from:'now-7d',to:'now')\n\nAs for the failures related to `Gitlab::GithubImport:ImportPullRequestMergedByWorker`, we can see in [Kibana](https://log.gprd.gitlab.net/goto/3d2d7fb0-4ee6-11ed-8d37-e9a2f393ea2a) that there was a spike on Oct., 14th:\n\n![image](/uploads/32c78d664e2e8fd792ac0ff8b28bb6e2/image.png)\n\n`Octokit::Unauthorized`\n\nIt seems that the exception is raised in the `execute` method in https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/github_import/importer/pull_request_merged_by_importer.rb#L18\n\n### Proposal\n~~We should probably rescue the `Octokit::Unauthorized` in `PullRequestMergedByImporter` workers `execute` method.~~\n\nWe [decided](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/106266#note_1206170716) to rescue just the `Octokit::NotFound` since the `Octokit::Unauthorized` was most likely raised because the AccessToken of the user expired. Therefore, in this case, we shouldn't rescue the error and let it fail.","state":"closed","created_at":"2022-10-18T18:05:55.507Z","updated_at":"2022-12-21T12:04:09.719Z","closed_at":"2022-12-16T01:51:33.425Z","closed_by":{"id":11311967,"username":"cervols-ext","name":"Tetiana Zavediuk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11311967/avatar.png","web_url":"https://gitlab.com/cervols-ext"},"labels":["Category:Importers","Deliverable","Error Budget Improvement","Importer:GitHub","SoftServe::Import","[deprecated] Accepting merge requests","backend","devops::manage","group::import","quad-planning::complete-no-action","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":11311967,"username":"cervols-ext","name":"Tetiana Zavediuk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11311967/avatar.png","web_url":"https://gitlab.com/cervols-ext"}],"author":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"type":"ISSUE","assignee":{"id":11311967,"username":"cervols-ext","name":"Tetiana Zavediuk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11311967/avatar.png","web_url":"https://gitlab.com/cervols-ext"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378326","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378326","notes":"https://gitlab.com/api/v4/projects/278964/issues/378326/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378326/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378326","relative":"#378326","full":"gitlab-org/gitlab#378326"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":117124186,"iid":378324,"project_id":278964,"title":"Gitlab::GithubImport::ImportPullRequestWorker: Rescue PreReceiveError in create_source_branch_if_not_exists","description":"### Problem\nWe have noticed an increased number of failing jobs over the past 7 days (Oct., 11th - Oct., 18th):\n\n![image](/uploads/29aa8e6efbb79f77c475ff9bc7950b71/image.png)\n\nSource: https://log.gprd.gitlab.net/app/visualize#/create?type=table\u0026indexPattern=AWNABDRwNDuQHTm2tH6l\u0026_a=h@6df2a18\u0026_g=(time:(from:'now-7d',to:'now')\n\nAs for the failures related to `Gitlab::GithubImport::ImportPullRequestWorker`, we can see in [Kibana](https://log.gprd.gitlab.net/goto/7807d550-4ee5-11ed-b0ec-930003e0679c) that there was a spike on Oct., 17th:\n\n![image](/uploads/ad8b0b8d5aa7937e58c22bebb24d3346/image.png)\n\nIt seems that the exception is raised in the `create_source_branch_if_not_exists` method in https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/github_import/importer/pull_request_importer.rb#L95\n\n### Proposal\nWe should probably also rescue the `PreReceiveError` (in addition to `Gitlab::Git::CommandError`) in `create_source_branch_if_not_exists` and do nothing when it fails, but track the exception like for `Gitlab::Git::CommandError`.","state":"closed","created_at":"2022-10-18T17:38:36.807Z","updated_at":"2022-12-21T12:04:09.860Z","closed_at":"2022-12-16T02:00:20.514Z","closed_by":{"id":11311967,"username":"cervols-ext","name":"Tetiana Zavediuk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11311967/avatar.png","web_url":"https://gitlab.com/cervols-ext"},"labels":["Category:Importers","Deliverable","Error Budget Improvement","Importer:GitHub","SoftServe::Import","[deprecated] Accepting merge requests","backend","devops::manage","group::import","quad-planning::complete-no-action","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":11311967,"username":"cervols-ext","name":"Tetiana Zavediuk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11311967/avatar.png","web_url":"https://gitlab.com/cervols-ext"}],"author":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"type":"ISSUE","assignee":{"id":11311967,"username":"cervols-ext","name":"Tetiana Zavediuk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11311967/avatar.png","web_url":"https://gitlab.com/cervols-ext"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378324","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378324","notes":"https://gitlab.com/api/v4/projects/278964/issues/378324/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378324/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378324","relative":"#378324","full":"gitlab-org/gitlab#378324"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":117119702,"iid":378316,"project_id":278964,"title":"Exec Dashboards PoC: Add icons for trends to the comparative table MVC","description":"## Overview\n\nOnce https://gitlab.com/gitlab-org/gitlab/-/issues/373006+ is completed, we need to add the missing [MVC](https://gitlab.com/gitlab-org/gitlab/-/issues/370887#note_1124788995) features to the Exec Dashboards PoC.\n\n## Proposal\n\n1. In the case of a negative change, there will be a negative_icon near the % value. \n2. In the case of a negative change, the % value and icon will be red. \n3. In the case of a positive change, there will be a positive_icon near the % value. \n4. In the case of a positive change, the % value and icon will be green.\n5. In the case of no change show `0%` with no trend icon\n6. In the case of no data available stick to `-`","state":"closed","created_at":"2022-10-18T16:17:30.029Z","updated_at":"2022-11-17T09:04:29.898Z","closed_at":"2022-11-16T18:43:56.396Z","closed_by":{"id":12352378,"username":"apennells","name":"Alex Pennells","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12352378/avatar.png","web_url":"https://gitlab.com/apennells"},"labels":["Category:DevOps Reports","POC","devops::plan","documentation","frontend","group::optimize","priority::1","section::dev","type::feature","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":12352378,"username":"apennells","name":"Alex Pennells","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12352378/avatar.png","web_url":"https://gitlab.com/apennells"}],"author":{"id":10879254,"username":"hsnir1","name":"Haim Snir","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10879254/avatar.png","web_url":"https://gitlab.com/hsnir1"},"type":"ISSUE","assignee":{"id":12352378,"username":"apennells","name":"Alex Pennells","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12352378/avatar.png","web_url":"https://gitlab.com/apennells"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378316","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378316","notes":"https://gitlab.com/api/v4/projects/278964/issues/378316/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378316/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378316","relative":"#378316","full":"gitlab-org/gitlab#378316"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9159,"epic":{"id":645211,"iid":9159,"title":"Exec Dashboards: New page POC with \"Metrics comparative table\"","url":"/groups/gitlab-org/-/epics/9159","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":117115784,"iid":378307,"project_id":278964,"title":"Global Search Error Budget improvement: indexing SLO fix","description":"Currently, we have a lot of alerts from `SidekiqServiceGlobalSearchIndexingApdexSLOViolation` violations. Most likely this happens because we average out initial and incremental indexing, which have very different timings and a lot of variability.\n\nThe suggestion is to:\n- Start treating wikis as code (since code \u0026 wikis are both handled by `gitlab-elasticsearch-indexer`). [Line to update](https://gitlab.com/gitlab-org/gitlab/-/blob/521b700115939372ce82fcdaefec0a193b1f8015/ee/lib/gitlab/metrics/global_search_indexing_slis.rb#L30-32)\n- Bump up [`CODE_INDEXING_TARGET_S`](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/lib/gitlab/metrics/global_search_indexing_slis.rb#L14) to a higher number to account for those indexing peaks.\n\nThis can be our first iteration. A long term option can be to separate initial and incremental indexing (@john-mason 's idea) or possibly to calculate indexing throughput in bytes/second.\n\n@rzwambag @changzhengliu @terrichu @john-mason @maddievn @sdungarwal WDYT?","state":"closed","created_at":"2022-10-18T15:19:25.345Z","updated_at":"2022-12-21T12:11:13.206Z","closed_at":"2022-12-21T09:46:55.354Z","closed_by":{"id":5054237,"username":"dgruzd","name":"Dmitry Gruzd","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054237/avatar.png","web_url":"https://gitlab.com/dgruzd"},"labels":["Category:Global Search","Deliverable","alertmanager-silence","devops::data_stores","group::global search","maintenance::scalability","section::enablement","type::maintenance","workflow::verification"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"}],"author":{"id":5054237,"username":"dgruzd","name":"Dmitry Gruzd","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054237/avatar.png","web_url":"https://gitlab.com/dgruzd"},"type":"ISSUE","assignee":{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},"user_notes_count":12,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378307","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378307","notes":"https://gitlab.com/api/v4/projects/278964/issues/378307/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378307/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378307","relative":"#378307","full":"gitlab-org/gitlab#378307"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7892,"epic":{"id":498105,"iid":7892,"title":"Proposal: Error Budget Improvement for Global Search","url":"/groups/gitlab-org/-/epics/7892","group_id":9970,"human_readable_end_date":"Aug 22, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":117115233,"iid":378304,"project_id":278964,"title":"Exec Dashboards PoC: Add Month-to-date (MTD) and calendar months to the comparative table MVC","description":"## Overview\n\nOnce https://gitlab.com/gitlab-org/gitlab/-/issues/373006+ is completed, we need to add the missing [MVC](https://gitlab.com/gitlab-org/gitlab/-/issues/370887#note_1124788995) features to the Exec Dashboards PoC.\n\n## Proposal \n\n1. Period 1 - Add a column for MTD (month-to-date). \n\n- Display the metrics values `starting at the beginning of the current calendar month` and `ending at the current date`. (e.g. 2022-10-01 --\u003e 2022-10-18). \n- Column name - Month-to-date.\n2. Period 2 - Change the 'last 30 days' column to display the previous month metrics values.\n\n- Display the metric values `starting at the first day of prev month` and `ending at the last day of prev month` (e.g. 2022-09-01 --\u003e 2022-09-30).\n- Column name - month_name (e.g. September).\n3. Period 3 - Change the '30 before that' column to display the previous before_month metrics values.\n\n-  Display the metrics values `starting at the first day of before_month` and `ending at the last day of before_month` (e.g. 2022-08-01 --\u003e 2022-08-31).\n- Column name - month_name (e.g. August).","state":"closed","created_at":"2022-10-18T15:11:33.930Z","updated_at":"2022-11-07T19:13:44.606Z","closed_at":"2022-11-07T19:13:44.454Z","closed_by":{"id":12352378,"username":"apennells","name":"Alex Pennells","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12352378/avatar.png","web_url":"https://gitlab.com/apennells"},"labels":["Category:DevOps Reports","devops::plan","documentation","frontend","group::optimize","priority::1","section::dev","type::feature","workflow::in review"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":12352378,"username":"apennells","name":"Alex Pennells","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12352378/avatar.png","web_url":"https://gitlab.com/apennells"}],"author":{"id":10879254,"username":"hsnir1","name":"Haim Snir","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10879254/avatar.png","web_url":"https://gitlab.com/hsnir1"},"type":"ISSUE","assignee":{"id":12352378,"username":"apennells","name":"Alex Pennells","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12352378/avatar.png","web_url":"https://gitlab.com/apennells"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378304","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378304","notes":"https://gitlab.com/api/v4/projects/278964/issues/378304/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378304/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378304","relative":"#378304","full":"gitlab-org/gitlab#378304"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9159,"epic":{"id":645211,"iid":9159,"title":"Exec Dashboards: New page POC with \"Metrics comparative table\"","url":"/groups/gitlab-org/-/epics/9159","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":117112432,"iid":378298,"project_id":278964,"title":"GitLab Migration: Show error to the user when provided personal access token has insufficient scope","description":"Note: This is the ~frontend issue for https://gitlab.com/gitlab-org/gitlab/-/issues/375057+\n\n### Release notes\n\nSome migrations could fail in the middle of the process, because provided personal access token's scope was not sufficient. The check of the token's scope was done only after the migration has started. \nNow we perform the token's scope check at the moment you provide your token information and in case of insufficient scope, you will see an informative error message, so that you can provide a PAT with sufficient scope.\n\n### Problem\n\nCurrently, some migrations fail in the middle of the process, because provided personal access token's scope is not sufficient, and that scope is not checked before the migration begins.\n\n### Proposed solution \n\nWith the recent addition of an [API endpoint to view details of the provided token](https://gitlab.com/gitlab-org/gitlab/-/issues/373999) `/api/v4/personal_access_tokens/self` we can view the details of the provided personal access token to stop migration attempts early, if the provided token has insufficient scope. \n\n### Implementation\n\n1. Add an early migration check that validates provided personal access token against `/api/v4/personal_access_tokens/self` and do not start the migration if provided token doesn't have required `api` scope (we use GraphQL API which needs `api` scope).\n\n2. **Display an error in the UI after the user enters the url/token information**.\n \n3. Additionally, at the start of the migration, before creating anything, check the token's scope again and return an error if provided token doesn't have required `api` scope. It's a safe guard measure, if a user manages to bypass initial validation, we should check the scope again, once the migration has started. \n\nStore this error in `bulk_import_failures` table and **display in UI on Import History page** and in API response.","state":"closed","created_at":"2022-10-18T14:40:45.299Z","updated_at":"2023-01-10T00:27:19.254Z","closed_at":"2023-01-09T14:17:31.072Z","closed_by":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"labels":["Category:Importers","Importer:GitLab Migration","UX","devops::manage","frontend","group::import","release post item::in review","section::dev","type::feature","workflow::refinement"],"milestone":null,"assignees":[],"author":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"type":"ISSUE","assignee":null,"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378298","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378298","notes":"https://gitlab.com/api/v4/projects/278964/issues/378298/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378298/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378298","relative":"#378298","full":"gitlab-org/gitlab#378298"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8984,"epic":{"id":623970,"iid":8984,"title":"GitLab Migration - Transparency towards the user","url":"/groups/gitlab-org/-/epics/8984","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":117107148,"iid":378283,"project_id":278964,"title":"Show Renew button 3 month upfront for community programs","description":"**Problem:**\n\nWe show `Renew` button for community programs only 15 days upfront (instead of 3 months).\n\n![Screenshot_2022-10-18_at_11.58.28](/uploads/6640eb30073dc6ee1ddc391a02e09593/Screenshot_2022-10-18_at_11.58.28.png)\n\n**Proposal:**\n\nRemove 15 days check to show `Renew` button on `/billings` page. We already call GraphQL API and can rely on `inRenewalPeriod` to handle visibility.","state":"closed","created_at":"2022-10-18T13:37:35.888Z","updated_at":"2022-10-21T09:50:46.683Z","closed_at":"2022-10-21T09:48:48.745Z","closed_by":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"labels":["Category:Billing \u0026 Payments","Track Health Status","bug::functional","devops::fulfillment","frontend","group::billing and subscription management","section::fulfillment","type::bug","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"}],"author":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"type":"ISSUE","assignee":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378283","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378283","notes":"https://gitlab.com/api/v4/projects/278964/issues/378283/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378283/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378283","relative":"#378283","full":"gitlab-org/gitlab#378283"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5711,"epic":{"id":244557,"iid":5711,"title":"[Community Programs] Renewals","url":"/groups/gitlab-org/-/epics/5711","group_id":9970,"human_readable_end_date":"Nov 4, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":{"id":86629,"iid":150,"sequence":1,"group_id":9970,"title":null,"description":null,"state":3,"created_at":"2022-10-04T21:31:23.241Z","updated_at":"2022-11-03T00:05:04.111Z","start_date":"2022-10-18","due_date":"2022-11-02","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/86629"},"health_status":null},{"id":117105718,"iid":378279,"project_id":278964,"title":"Elastic::ProjectTransferWorker should handle missing namespace","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nA increased rate of errors have been reported from the Elastic:::ProjectTransferWorker recently\n\n[Kibana logs (internal only)](https://log.gprd.gitlab.net/goto/b41161f0-4e7d-11ed-b0ec-930003e0679c) show that there are repeated errors in looking up the old namespace\n\n```\nCouldn't find Namespace with 'id'=XXXXXX\n```\n\n\u003cdetails\u003e\u003csummary\u003eClick to expand backtrace\u003c/summary\u003e\n\n```\nee/app/workers/elastic/project_transfer_worker.rb:14:in `perform', lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:26:in `call', lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform', lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:58:in `perform', lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call', lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context', lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call', lib/gitlab/application_context.rb:113:in `block in use', lib/gitlab/application_context.rb:113:in `use', lib/gitlab/application_context.rb:54:in `with_context', lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call', lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call', lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call', lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call', lib/gitlab/database/query_analyzer.rb:37:in `within', lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call', lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call', lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call', lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call', lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call', lib/gitlab/sidekiq_middleware/request_store_middleware.rb:10:in `block in call', lib/gitlab/with_request_store.rb:17:in `enabling_request_store', lib/gitlab/with_request_store.rb:10:in `with_request_store', lib/gitlab/sidekiq_middleware/request_store_middleware.rb:9:in `call', lib/gitlab/sidekiq_middleware/server_metrics.rb:76:in `block in call', lib/gitlab/sidekiq_middleware/server_metrics.rb:103:in `block in instrument', lib/gitlab/metrics/background_transaction.rb:33:in `run', lib/gitlab/sidekiq_middleware/server_metrics.rb:103:in `instrument', lib/gitlab/sidekiq_middleware/server_metrics.rb:75:in `call', lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call', lib/gitlab/sidekiq_daemon/monitor.rb:49:in `within_job', lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call', lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call', lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'\n```\n\n\u003c/details\u003e\n\n### Steps to reproduce\n\nNot confirmed, but I think this could reproduce the error\n\n1. transfer a project from namespace A to namespace B\n2. quickly delete namespace A\n3. view sidekiq logs\n\n### Possible fixes\n\n[project_transfer_worker.rb](ee/app/workers/elastic/project_transfer_worker.rb): Gracefully handle if the old namespace is gone. I suspect the namespace was deleted after project transfer was reported successfully in the UI to the user, but before any background workers have ran or completed. \n\nIf the old_namespace is not found, the code should:\n\n* invalidate the elasticsearch indexing cache if elasticsearch_limit_indexing is enabled\n* perform the remaining work of indexing or deleting from the index once the cache is cleared\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2022-10-18T13:17:47.347Z","updated_at":"2022-12-21T12:11:13.314Z","closed_at":"2022-11-24T08:27:29.262Z","closed_by":{"id":12515079,"username":"sdungarwal","name":"Siddharth Dungarwal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12515079/avatar.png","web_url":"https://gitlab.com/sdungarwal"},"labels":["Category:Global Search","Deliverable","Next::1-3 releases","alertmanager-silence","backend","bug::functional","devops::data_stores","group::global search","priority::2","section::enablement","severity::2","type::bug","workflow::in review"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":12515079,"username":"sdungarwal","name":"Siddharth Dungarwal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12515079/avatar.png","web_url":"https://gitlab.com/sdungarwal"}],"author":{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},"type":"ISSUE","assignee":{"id":12515079,"username":"sdungarwal","name":"Siddharth Dungarwal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12515079/avatar.png","web_url":"https://gitlab.com/sdungarwal"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378279","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378279","notes":"https://gitlab.com/api/v4/projects/278964/issues/378279/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378279/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378279","relative":"#378279","full":"gitlab-org/gitlab#378279"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7978,"epic":{"id":512846,"iid":7978,"title":"Advanced Search: Come up with solution for index integrity","url":"/groups/gitlab-org/-/epics/7978","group_id":9970,"human_readable_end_date":"Aug 22, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":117103489,"iid":378277,"project_id":278964,"title":"Follow-up: Add loading state to customizable dashboards","description":"The following discussion from !98613 should be addressed:\n\n- [ ] @rob.hunt started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/98613#note_1136031088):  (+10 comments)\n\nThis recording highlights the eventual need for a loading state (recorded using the “slow 3G” network preset):\n\n![Screen_Recording_2022-10-18_at_13.42.29](https://gitlab.com/gitlab-org/gitlab/uploads/d6021b7491fa6ecd79092bd04641bb8f/Screen_Recording_2022-10-18_at_13.42.29.mov)\n\nA strong suggestion to make use of [`GlDashboardSkeleton`](https://gitlab-org.gitlab.io/gitlab-ui/?path=/story/regions-dashboard-skeleton--default) however we will probably need to move over the [animation](https://gitlab.com/gitlab-org/gitlab/blob/master/app/assets/stylesheets/page_bundles/operations.scss#L59) to the GitLab UI component as right now it's entirely static without that custom CSS:\n\n```scss\n.dashboard-card-skeleton-info {\n  border-radius: $gl-padding;\n  height: $gl-padding;\n  overflow: hidden;\n\n  \u0026::after {\n    content: ' ';\n    display: block;\n    animation: blockTextShine 1s linear infinite forwards;\n    background-repeat: no-repeat;\n    background-size: cover;\n    background-image: linear-gradient(to right,\n      var(--gray-50, $gray-50) 0%,\n      var(--gray-10, $gray-10) 20%,\n      var(--gray-50, $gray-50) 40%,\n      var(--gray-50, $gray-50) 100%);\n    border-radius: $gl-padding;\n    height: $gl-padding;\n    margin-top: -$gl-padding-8;\n  }\n}\n```","state":"closed","created_at":"2022-10-18T12:50:59.831Z","updated_at":"2022-11-22T01:31:58.143Z","closed_at":"2022-11-22T01:31:58.118Z","closed_by":{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"labels":["Category:Product Analytics","devops::analytics","frontend","group::product analytics","section::analytics","type::feature","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"}],"author":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"type":"ISSUE","assignee":{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378277","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378277","notes":"https://gitlab.com/api/v4/projects/278964/issues/378277/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378277/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378277","relative":"#378277","full":"gitlab-org/gitlab#378277"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8466,"epic":{"id":574531,"iid":8466,"title":"Product Analytics Internal Preview: Dashboards and visualizations","url":"/groups/gitlab-org/-/epics/8466","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":117100454,"iid":378272,"project_id":278964,"title":"Create alert messages for pre-scan verification drawer","description":"Pre-scan verification drawer displays the flow of pre-scan verification.\n\nShould any errors or warning happen user should see an alert message according to [existing design](https://www.figma.com/file/o6NoqgLnxv0KnK2y9Qum51/DAST-Configuration-UI?node-id=2740%3A167120)\n\n[Alert pajamas component](https://gitlab-org.gitlab.io/gitlab-ui/?path=/docs/base-alert--titled-warning) can be used for implementation\n\nUser should see an alert both in a drawer","state":"closed","created_at":"2022-10-18T12:04:08.374Z","updated_at":"2022-11-14T11:51:56.680Z","closed_at":"2022-11-13T22:50:12.134Z","closed_by":{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"},"labels":["Category:DAST","UX","devops::secure","frontend","group::dynamic analysis","section::sec","type::feature","workflow::scheduling"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"}],"author":{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"},"type":"ISSUE","assignee":{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378272","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378272","notes":"https://gitlab.com/api/v4/projects/278964/issues/378272/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378272/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378272","relative":"#378272","full":"gitlab-org/gitlab#378272"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7069,"epic":{"id":380891,"iid":7069,"title":"DAST Pre-scan verification","url":"/groups/gitlab-org/-/epics/7069","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":117097746,"iid":378266,"project_id":278964,"title":"Backend: Follow-up from \"Add logging for file variable expansion\"","description":"In this issue, we clean up the code with the new `project` parameter.\n\nThe following discussion from !101022 should be addressed:\n\n- [ ] @furkanayhan started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/101022#note_1135723765): \n\n    \u003e I'll create an issue and replace this message with the link if this approach is accepted.","state":"closed","created_at":"2022-10-18T11:15:04.838Z","updated_at":"2023-01-06T21:34:49.137Z","closed_at":"2023-01-02T15:35:05.054Z","closed_by":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"labels":["Category:Pipeline Authoring","backend","devops::verify","group::pipeline authoring","maintenance::refactor","section::ops","type::maintenance","workflow::production"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378266","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378266","notes":"https://gitlab.com/api/v4/projects/278964/issues/378266/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378266/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378266","relative":"#378266","full":"gitlab-org/gitlab#378266"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":117085888,"iid":378245,"project_id":278964,"title":"Rename note policies to use internal instead of confidential","description":"The following discussion from !98588 should be addressed:\n\n- @egrieff started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/98588#note_1137722550):  (+1 comment)\n\n    \u003e This policy was replicated at the issuable level so it would need to be updated there to match permissions:\n    \u003e \n    \u003e [issuable_and_epic_policy_update.patch](/uploads/7e4faf5d38336a6ff930a88f1db0bcfc/issuable_and_epic_policy_update.patch)\n\n- [ ] Felipe Artur `@felipe_artur` [commented](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/98588#note_1138702473):\n    \u003e Do we need a follow-up issue to rename `can_read_confidential` to `can_read_internal_note` and `mark_note_as_confidential` to `mark_note_as_internal`? Or do we have one already?","state":"closed","created_at":"2022-10-18T08:00:03.209Z","updated_at":"2023-01-02T11:42:13.542Z","closed_at":"2023-01-02T11:42:13.477Z","closed_by":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"labels":["Track Health Status","backend","devops::plan","group::product planning","maintenance::refactor","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378245","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378245","notes":"https://gitlab.com/api/v4/projects/278964/issues/378245/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378245/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378245","relative":"#378245","full":"gitlab-org/gitlab#378245"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8390,"epic":{"id":567440,"iid":8390,"title":"Internal Notes: Technical debt cleanup","url":"/groups/gitlab-org/-/epics/8390","group_id":9970,"human_readable_end_date":"May 17, 2023","human_readable_timestamp":"\u003cstrong\u003e4\u003c/strong\u003e months remaining"},"iteration":null,"health_status":"on_track"},{"id":117074420,"iid":378233,"project_id":278964,"title":"FE: Update security policies drawer for scan execution policy with agents/namespaces","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n- for scan execution policies with branches, the `Summary` of the policy drawer lists out all the branches in a readable way\n- for scan execution policies with agents or namespaces (as defined in the docs: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/96148+), the agents and namespaces are not listed out in a human-readable way in the policy drawer\n- users want to see their scan execution policy yaml containing agents and namespaces in a more readable way\n\n## Relevant links\n\nSample Yaml\n```yaml\ntype: scan_execution_policy\nname: Enforce CIS\ndescription: This policy is great!\nenabled: true\nrules:\n  - type: schedule\n    cadence: 0 * * * *\n    agents:\n      cis-agent:\n        namespaces:\n          - production\n  - type: schedule\n    agents:\n      staging-agent:\n        namespaces:\n          - staging\n    cadence: 0 * * * *\nactions:\n  - scan: container_scanning\n  - scan: sast\n```\n\n| Type | Policy | Policy Drawer | Current summary | Suggested summary |\n| - | - | - | - | - |\n| Policy with agents | ![image](/uploads/e9716ff0391d5e56e949f5298a285f97/image.png) | ![policy drawer](/uploads/8f249f80c9c46422046cc242e4d952e4/image.png) |  ![image](/uploads/4450a502fd622bec159de015df9884cc/image.png) | Scans to be performed by the cis-agent for the production namespace every hour, every day. Scans to be performed by the staging-agent agent for the staging namespace every hour, every day. |\n\nRelated to #346188\n\n## Implementation plan\n- [x] ~frontend update [policy_drawer/scan_execution_policy.vue](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/security_orchestration/components/policy_drawer/scan_execution_policy.vue) to show the `agents` and `namespaces`\n  - `Scans to be performed by the XXX agent for all namespaces every hour, every day.`\n  - `Scans to be performed by the XXX agent for the XXX namespaces every hour, every day.`\n\n\n## Verification steps\n1. Navigate to a project =\u003e Security \u0026 Compliance =\u003e Policies =\u003e New policy =\u003e Scan execution policy =\u003e yaml mode\n2. Enter in the above yaml and merge the MR\n3. Navigate to the project =\u003e Security \u0026 Compliance =\u003e Policies =\u003e Select the new policy\n4. View the drawer","state":"closed","created_at":"2022-10-18T04:24:43.708Z","updated_at":"2022-11-08T12:33:44.307Z","closed_at":"2022-11-07T19:49:51.250Z","closed_by":{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"},"labels":["Category:Security Policy Management","devops::govern","feature::addition","frontend","group::security policies","section::sec","type::feature","workflow::verification"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"}],"author":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"type":"ISSUE","assignee":{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"},"user_notes_count":13,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378233","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378233","notes":"https://gitlab.com/api/v4/projects/278964/issues/378233/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378233/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378233","relative":"#378233","full":"gitlab-org/gitlab#378233"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":117064746,"iid":378218,"project_id":278964,"title":"Slack App Integration - Warning banner for all users in Slack Integration","description":"### Description\n\nPer this [discussion](https://gitlab.com/gitlab-org/gitlab/-/issues/373321#note_1123009242), we will be implementing a warning banner alerting users once notifications are added to the Slack app that they need to update to the latest version of the Slack App integration to use the functionality.\n\n### Design\n\n:link: [Figma design](https://www.figma.com/file/TU7XWkuFMBX1ODckT89ryT/Slack-migration-flow?node-id=228%3A9330)\n\n![image](/uploads/73fe44741103de6c57e2fd38a9c87795/image.png)","state":"closed","created_at":"2022-10-17T22:42:48.262Z","updated_at":"2022-12-09T04:24:56.060Z","closed_at":"2022-11-15T11:34:50.965Z","closed_by":{"id":3199302,"username":"dmishunov","name":"Denys Mishunov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d85e45af29611ac2c1395e3c3d6ec5d6?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmishunov"},"labels":["Category:Integrations","Deliverable","SUS::Impacting","Technical Writing","UI text","automation:ux-missing-labels","devops::manage","frontend","group::integrations","section::dev","type::feature"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":3199302,"username":"dmishunov","name":"Denys Mishunov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d85e45af29611ac2c1395e3c3d6ec5d6?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmishunov"}],"author":{"id":10222550,"username":"g.hickman","name":"Grant Hickman","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10222550/avatar.png","web_url":"https://gitlab.com/g.hickman"},"type":"ISSUE","assignee":{"id":3199302,"username":"dmishunov","name":"Denys Mishunov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d85e45af29611ac2c1395e3c3d6ec5d6?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmishunov"},"user_notes_count":46,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378218","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378218","notes":"https://gitlab.com/api/v4/projects/278964/issues/378218/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378218/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378218","relative":"#378218","full":"gitlab-org/gitlab#378218"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8670,"epic":{"id":595009,"iid":8670,"title":"Extend Slack app to support notifications","url":"/groups/gitlab-org/-/epics/8670","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":117061649,"iid":378214,"project_id":278964,"title":"Cross-site scripting in Jira Integration affecting self-hosted instances without strict CSP","description":"**[HackerOne report #1727985](https://hackerone.com/reports/1727985)** by `ryotak` on 2022-10-10, assigned to `GitLab Team`:\n\n[Report](#report) | [Attachments](#attachments) | [How To Reproduce](#how-to-reproduce)\n\n## Report\n\n#####  Summary  \nDue to the incomplete fix for [CVE-2022-0283](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-0283), an attacker can execute arbitrary JavaScript on the self-hosted instances without strict CSP.\n\n#####  Description  \nThe following code was added to fix [CVE-2022-0283](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-0283).\n\n[`app/controllers/jira_connect/users_controller.rb` line 8-20](https://gitlab.com/gitlab-org/gitlab/-/blob/6bd4e44b8743239a83fa90a494e05242757f9324/app/controllers/jira_connect/users_controller.rb#L8-20)  \n``` ruby  \n  before_action :verify_return_to_url, only: [:show]  \n  [...]  \n  def verify_return_to_url  \n    return unless params[:return_to].present?\n\n    params.delete(:return_to) unless Integrations::Jira.valid_jira_cloud_url?(params[:return_to])  \n  end  \n```\n\n[`app/models/integrations/jira.rb` line 98-102](https://gitlab.com/gitlab-org/gitlab/-/blob/6bd4e44b8743239a83fa90a494e05242757f9324/app/models/integrations/jira.rb#L98-102)  \n``` ruby  \n    def self.valid_jira_cloud_url?(url)  \n      return false unless url.present?\n\n      !!URI(url).hostname\u0026.end_with?(JIRA_CLOUD_HOST)  \n    end  \n```\n\nHowever, as this fix aims to prevent the open redirect rather than an XSS, it's not validating the URL's scheme, allowing the `javascript:` scheme to be specified.\n\n#####  Steps to reproduce\n\n######  Self-hosted instance (with an alert)\n\n1. Set up your own GitLab instance.  \n2. Log in to the GitLab instance.  \n3. Open https://YOUR_OWN_INSTANCE/-/jira_connect/users?return_to=javascript://test.atlassian.net/%250dalert(document.domain)  \n4. Click `Return to GitLab for Jira`.  \n5. Confirm that `alert(document.domain)` has been executed.\n\n######  GitLab.com (with a CSP error message)\n\n1. Log in to GitLab.  \n2. Open https://gitlab.com/-/jira_connect/users?return_to=javascript://test.atlassian.net/%250dalert(document.domain)  \n3. Open DevTools.  \n4. Click `Return to GitLab for Jira`.  \n5. Confirm that CSP prevented the execution of JavaScript.\n\n#####  Examples\n\nhttps://gitlab.com/-/jira_connect/users?return_to=javascript://test.atlassian.net/%250dalert(document.domain)\n\n#####  What is the current *bug* behavior?\n\n`javascript:` scheme is allowed as a return URL.\n\n#####  What is the expected *correct* behavior?\n\nOnly `http` and `https` should be allowed as a scheme.\n\n#####  Relevant logs and/or screenshots\n\n![2022-10-10_13-02-36.mp4](https://h1.sec.gitlab.net/a/1e88d031-9119-4867-8973-8535fac27c2f/2022-10-10_13-02-36.mp4)\n\n######  Results of GitLab environment info\n\n```  \nSystem information  \nSystem:         Ubuntu 20.04  \nProxy:          no  \nCurrent User:   git  \nUsing RVM:      no  \nRuby Version:   2.7.5p203  \nGem Version:    3.1.6  \nBundler Version:2.3.15  \nRake Version:   13.0.6  \nRedis Version:  6.2.7  \nSidekiq Version:6.4.2  \nGo Version:     unknown\n\nGitLab information  \nVersion:        15.4.1-ee  \nRevision:       7b2ed8f038f  \nDirectory:      /opt/gitlab/embedded/service/gitlab-rails  \nDB Adapter:     PostgreSQL  \nDB Version:     13.6  \nURL:            https://gl.ryotak.me  \nHTTP Clone URL: https://gl.ryotak.me/some-group/some-project.git  \nSSH Clone URL:  git@gl.ryotak.me:some-group/some-project.git  \nElasticsearch:  no  \nGeo:            no  \nUsing LDAP:     no  \nUsing Omniauth: yes  \nOmniauth Providers:\n\nGitLab Shell  \nVersion:        14.10.0  \nRepository storage paths:  \n- default:      /var/opt/gitlab/git-data/repositories  \nGitLab Shell path:              /opt/gitlab/embedded/service/gitlab-shell  \n```\n\n####  Impact  \nAn attacker can execute arbitrary JavaScript on the victim's browser and do any actions on behalf of the user.\n\n## Attachments\n\n**Warning:** Attachments received through HackerOne, please exercise caution!\n\n* [2022-10-10_13-02-36.mp4](https://h1.sec.gitlab.net/a/1e88d031-9119-4867-8973-8535fac27c2f/2022-10-10_13-02-36.mp4)\n\n## How To Reproduce\n\nPlease add [reproducibility information] to this section:\n\n1.\n1.\n1.\n\n[reproducibility information]: https://about.gitlab.com/handbook/engineering/security/#reproducibility-on-security-issues","state":"closed","created_at":"2022-10-17T21:11:12.938Z","updated_at":"2023-01-06T13:41:40.030Z","closed_at":"2022-12-07T13:00:15.219Z","closed_by":{"id":5791466,"username":"ngeorge1","name":"Nikhil George","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5791466/avatar.png","web_url":"https://gitlab.com/ngeorge1"},"labels":["Category:Integrations","Deliverable","HackerOne","Weakness::CWE-79","[deprecated] Accepting merge requests","backend","bug::vulnerability","devops::manage","group::integrations","priority::3","section::dev","security","severity::3","type::bug","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-12-26","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378214","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378214","notes":"https://gitlab.com/api/v4/projects/278964/issues/378214/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378214/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378214","relative":"#378214","full":"gitlab-org/gitlab#378214"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":117057314,"iid":378202,"project_id":278964,"title":"Create take ownership mutation","description":"The HAML version of this feature uses a rails path `take_ownership_project_pipeline_schedule_path` for each schedule, giving a user the ability to take ownership of a schedule.\n\nThe ~frontend needs the ability to call a GraphQL mutation to be able to take ownership of a schedule. This should be completed before https://gitlab.com/gitlab-org/gitlab/-/issues/375797 where we hook up the old modal to the new refactor.","state":"closed","created_at":"2022-10-17T19:07:11.061Z","updated_at":"2022-10-28T11:45:29.412Z","closed_at":"2022-10-28T11:45:29.386Z","closed_by":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"labels":["Category:Continuous Integration","backend","devops::verify","group::pipeline execution","maintenance::refactor","section::ops","type::maintenance","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"}],"author":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"type":"ISSUE","assignee":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378202","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378202","notes":"https://gitlab.com/api/v4/projects/278964/issues/378202/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378202/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378202","relative":"#378202","full":"gitlab-org/gitlab#378202"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6189,"epic":{"id":289009,"iid":6189,"title":"Refactor pipeline schedules - Vue/GraphQL","url":"/groups/gitlab-org/-/epics/6189","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":117054579,"iid":378197,"project_id":278964,"title":"GitHub importer doesn't import all protected branches","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nWhen importing project with several protected branches from GitHub, only one of them is migrated.\n\n### Steps to reproduce\n\n1. Have a project with several branches on GitHub\n2. On GitHub create any branch protection rules for 2 non-default branches\n3. Import the project to GitLab\n4. Go to project -\u003e Settings -\u003e Repository -\u003e Protected branches\n5. Look at the list of protected branches\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\n### What is the current *bug* behavior?\n\nOnly one of the non-default protected on GitHub branches is displayed in the list.\n\n### What is the expected *correct* behavior?\n\nAll branches that were protected on GitHub are displayed in the list.\n\n### Relevant logs and/or screenshots\n\n**_Source Project Protected Branch Rules_** (on GitHub):\n\n![Screenshot_2022-10-17_at_19.36.07](/uploads/d22ddb98cc7e493b6f912c8619630282/Screenshot_2022-10-17_at_19.36.07.png)\n\n**_Destination Project Protected Branch Rules_** (on GitLab):\n\n![Screenshot_2022-10-17_at_19.36.45](/uploads/f63db79c63869cd5fb680ae095f8e68d/Screenshot_2022-10-17_at_19.36.45.png)\n\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, uncomment below --\u003e\n\n\u003c!-- This bug happens on GitLab.com --\u003e\n\u003c!-- /label ~\"reproduced on GitLab.com\" --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\nThe line of code that might be responsible for the problem - https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/github_import/importer/protected_branches_importer.rb#L22.","state":"closed","created_at":"2022-10-17T17:52:42.017Z","updated_at":"2022-11-13T14:03:42.110Z","closed_at":"2022-11-08T14:18:48.205Z","closed_by":{"id":11311967,"username":"cervols-ext","name":"Tetiana Zavediuk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11311967/avatar.png","web_url":"https://gitlab.com/cervols-ext"},"labels":["Category:Importers","Importer:GitHub","SoftServe::Import","backend","devops::manage","group::import","priority::2","section::dev","severity::2","type::bug","workflow::verification"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11311967,"username":"cervols-ext","name":"Tetiana Zavediuk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11311967/avatar.png","web_url":"https://gitlab.com/cervols-ext"}],"author":{"id":11311967,"username":"cervols-ext","name":"Tetiana Zavediuk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11311967/avatar.png","web_url":"https://gitlab.com/cervols-ext"},"type":"ISSUE","assignee":{"id":11311967,"username":"cervols-ext","name":"Tetiana Zavediuk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11311967/avatar.png","web_url":"https://gitlab.com/cervols-ext"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378197","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378197","notes":"https://gitlab.com/api/v4/projects/278964/issues/378197/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378197/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378197","relative":"#378197","full":"gitlab-org/gitlab#378197"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3050,"epic":{"id":39430,"iid":3050,"title":"🐞 GitHub Importer bugs","url":"/groups/gitlab-org/-/epics/3050","group_id":9970},"iteration":null,"health_status":null},{"id":117053830,"iid":378196,"project_id":278964,"title":"Add VueRouter to pipeline tabs","description":"With the new Vue pipeline tabs, we were using query params instead of routes to redirect the user to the right tab content. It was working fine, but it did made sharing urls (or refreshing) problematic as you would lose where you were. On top of that, users are accustomed to seeing the route change on changing tab in that section. \n\nThis MR introduce VueRouter on each of the existing route and we render the right component based on the route. It also removes all of the query param logic and the redirects inside the rails controller, which is a good riddance :smile:","state":"closed","created_at":"2022-10-17T17:35:21.017Z","updated_at":"2022-11-08T13:09:38.712Z","closed_at":"2022-11-07T14:05:22.658Z","closed_by":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"labels":["devops::verify","frontend","group::pipeline authoring","maintenance::refactor","section::ops","type::maintenance"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"}],"author":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"type":"ISSUE","assignee":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378196","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378196","notes":"https://gitlab.com/api/v4/projects/278964/issues/378196/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378196/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378196","relative":"#378196","full":"gitlab-org/gitlab#378196"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":{"id":74860,"iid":115,"sequence":28,"group_id":9970,"title":null,"description":null,"state":3,"created_at":"2022-08-08T00:05:02.221Z","updated_at":"2022-11-14T00:05:02.449Z","start_date":"2022-10-31","due_date":"2022-11-13","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/74860"},"health_status":null},{"id":117052473,"iid":378189,"project_id":278964,"title":"[Investigate] New Redis keys format","description":"Based on the discussion https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/763#note_1129510558.\n\n**Goal**\n\n* Decide on the new format of Redis keys\n* Define next steps to migrate to the new format","state":"closed","created_at":"2022-10-17T17:05:23.017Z","updated_at":"2022-12-21T12:02:13.300Z","closed_at":"2022-11-22T18:56:07.577Z","closed_by":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"labels":["Deliverable","backend","devops::create","group::source code","maintenance::performance","missed-deliverable","missed:15.6","quad-planning::complete-no-action","section::dev","spike","type::maintenance","workflow::in review"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"}],"author":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"type":"ISSUE","assignee":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"user_notes_count":21,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378189","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378189","notes":"https://gitlab.com/api/v4/projects/278964/issues/378189/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378189/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378189","relative":"#378189","full":"gitlab-org/gitlab#378189"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9313,"epic":{"id":661704,"iid":9313,"title":"Migrate Redis keys to the structured name format","url":"/groups/gitlab-org/-/epics/9313","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":"on_track"},{"id":117050189,"iid":378186,"project_id":278964,"title":"GitLab Version - Address Nested Links in Help Dropdown","description":"## What / Why\n\nFollow up from @eduardosanz thread here: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/100978#note_1137873160\n\nThe GitLab Version Badge located in the Help Dropdown actually renders as an `\u003ca\u003e` nested inside of an `\u003ca\u003e`.  This is incorrect markup and additionally may cause issues with the tracking events.\n\n## Proposal\n\n1. Implement an `actionable` prop to `GitlabVersionCheck`\n2. Only make `GlBadge` actionable if prop is true\n3. Set `GitlabVersionCheck` in help dropdown to `actionable: false`\n4. Add a separate tracking event when the version check help dropdown link itself is clicked (similar to the other help dropdown links).","state":"closed","created_at":"2022-10-17T16:26:44.477Z","updated_at":"2022-10-27T15:34:34.755Z","closed_at":"2022-10-27T15:34:34.685Z","closed_by":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"labels":["analytics","bug::functional","devops::systems","frontend","group::distribution","section::enablement","snowplow tracking events","type::bug","workflow::in review"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"}],"author":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"type":"ISSUE","assignee":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378186","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378186","notes":"https://gitlab.com/api/v4/projects/278964/issues/378186/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378186/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378186","relative":"#378186","full":"gitlab-org/gitlab#378186"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5180,"epic":{"id":179385,"iid":5180,"title":"Improve self-managed upgrade rate","url":"/groups/gitlab-org/-/epics/5180","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":117043580,"iid":378179,"project_id":278964,"title":"Allow system notes from cross-group epics","description":"In an epic page, when adding a child epic from a different group hierarchy the system notes are generated but not displayed when reloading the page.\n\nThis might be due to the [notes API](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/api/helpers/notes_helpers.rb#L92) using [`NotesFinder`](ee/app/finders/ee/notes_finder.rb:11) with `EpicsFinder` to find the target epic but this finder does not include cross-group epics.","state":"closed","created_at":"2022-10-17T15:09:50.909Z","updated_at":"2022-11-08T08:17:57.836Z","closed_at":"2022-11-08T08:17:57.785Z","closed_by":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"labels":["Cannot reproduce","[deprecated] Accepting merge requests","backend","devops::plan","epics","group::product planning","section::dev","workflow::problem validation"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378179","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378179","notes":"https://gitlab.com/api/v4/projects/278964/issues/378179/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378179/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378179","relative":"#378179","full":"gitlab-org/gitlab#378179"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8502,"epic":{"id":577585,"iid":8502,"title":"Epics can have child epics from different group hierarchies","url":"/groups/gitlab-org/-/epics/8502","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":117037262,"iid":378170,"project_id":278964,"title":"Add indexes to support filtering issues by last test report state","description":"* Create index to support filtering issues by issue_type, this could support\nqueries like the ones introduced by !100045.\n\n```\n issues (project_id, issue_type, created_at, id, state_id)\n```\n\n* Create index to support finding last assigned test report of an issue. More information at https://gitlab.com/gitlab-org/gitlab/-/merge_requests/100045#note_1139239125.  \n\n```\nrequirements_management_test_reports (issue_id, created_at, id)\n```\n\nThe following discussion from !100045 should be addressed:\n\n- [ ] @felipe_artur started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/100045#note_1136370545):  (+2 comments)\n\n    \u003e @dstull Can you do database review, please? I posted the details in the [MR description](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/100045#database-queries).","state":"closed","created_at":"2022-10-17T14:08:46.483Z","updated_at":"2022-12-06T18:32:00.349Z","closed_at":"2022-11-07T17:42:43.433Z","closed_by":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"labels":["Deliverable","Track Health Status","backend","devops::plan","group::certify","maintenance::performance","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"}],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378170","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378170","notes":"https://gitlab.com/api/v4/projects/278964/issues/378170/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378170/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378170","relative":"#378170","full":"gitlab-org/gitlab#378170"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":117033900,"iid":378162,"project_id":278964,"title":"Audit diffy gem for Ruby 3 compat","description":"","state":"closed","created_at":"2022-10-17T13:45:43.956Z","updated_at":"2022-11-21T12:01:45.252Z","closed_at":"2022-10-17T17:46:37.887Z","closed_by":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"labels":["Deliverable","backend","devops::create","group::code review","maintenance::dependency","section::dev","type::maintenance","workflow::in review"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"}],"author":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"type":"ISSUE","assignee":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378162","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378162","notes":"https://gitlab.com/api/v4/projects/278964/issues/378162/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378162/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378162","relative":"#378162","full":"gitlab-org/gitlab#378162"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8845,"epic":{"id":610254,"iid":8845,"title":"Audit and fix gitlab-rails dependencies for Ruby 3 compat","url":"/groups/gitlab-org/-/epics/8845","group_id":9970,"human_readable_end_date":"Jan 31, 2023","human_readable_timestamp":"\u003cstrong\u003e16\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":117019499,"iid":378096,"project_id":278964,"title":"Explore the feasibility and profits of rendering Diffs app in Web Workers","description":"Rendering Vue components in Web Workers opens up new possibilities to deliver excellent performance when working with large amounts of data. We should explore that area to better understand what blocks us from using it and what benefits we could have performance-wise.\n\nRendering in Web Workers goes coincide with [Streaming](https://gitlab.com/gitlab-org/frontend/rfcs/-/issues/101).\n\nThese questions should be answered regarding rendering Diffs app in Web Workers:\n\n1. What's blocking us? (Vue 3 compatibility, dompurify, etc)\n2. What's the data flow?\n    3. How do we get the data back into the app? Should it be concurrent (double the request rate) or transferred back from the worker?\n4. What's the hydration flow? Can we use concurrent hydration (i.e. hydrate on a file-by-file basis)?\n4. What are the performance gains?\n5. What adjustments do we need to make to backend?\n\n[gitlab-ui Vue 3 compatibility effort](https://gitlab.com/groups/gitlab-org/-/epics/7203).\n\n[Recent changes for Vue 3 compatibility](https://gitlab.com/gitlab-org/gitlab-ui/-/issues/1981).","state":"closed","created_at":"2022-10-17T12:05:53.087Z","updated_at":"2023-01-12T10:46:25.643Z","closed_at":"2023-01-12T10:46:25.617Z","closed_by":{"id":10539680,"username":"slashmanov","name":"Stanislav Lashmanov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10539680/avatar.png","web_url":"https://gitlab.com/slashmanov"},"labels":["Deliverable","Performance Round Tables::Code Review","devops::create","frontend","group::code review","maintenance::performance","missed-deliverable","missed:15.6","missed:15.7","section::dev","type::maintenance"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":10539680,"username":"slashmanov","name":"Stanislav Lashmanov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10539680/avatar.png","web_url":"https://gitlab.com/slashmanov"}],"author":{"id":10539680,"username":"slashmanov","name":"Stanislav Lashmanov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10539680/avatar.png","web_url":"https://gitlab.com/slashmanov"},"type":"ISSUE","assignee":{"id":10539680,"username":"slashmanov","name":"Stanislav Lashmanov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10539680/avatar.png","web_url":"https://gitlab.com/slashmanov"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378096","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378096","notes":"https://gitlab.com/api/v4/projects/278964/issues/378096/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378096/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378096","relative":"#378096","full":"gitlab-org/gitlab#378096"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":117005629,"iid":378087,"project_id":278964,"title":"Use License Scanning Service in Pipeline page","description":"## Why are we doing this work\n\nThe backend needs to be changed so that the `Licenses` tab of the Pipeline page uses the License Scanning Service. \n\n## Further details\n\nThe Licenses tab of the Pipeline page is handled by [`PipelinesController#licenses`](ee/app/controllers/ee/projects/pipelines_controller.rb#L36), which uses `Pipeline#expose_license_scanning_data?`, and `SCA::LicenseCompliance`.\n\n## Proposal\n\nSame as https://gitlab.com/gitlab-org/gitlab/-/issues/378085#proposal: `Pipeline#license_scanning_report` gets a `Ci::Reports::LicenseScanning::Report` from the `LicenseScanningService`.\n\nAlso, make `Pipeline#expose_license_scanning_data?` delegate to `LicenseScanningService`. This could either be a method or a class method – TBD.\n\n## Relevant links\n\nThe technical evaluation issue doesn't cover this specifically, but it might contain useful information: https://gitlab.com/gitlab-org/gitlab/-/issues/377688+\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated.\nThe plan can also call-out responsibilities for other team members or teams and\ncan be split into smaller MRs to simplify the code review process.\n\ne.g.:\n\n- MR 1: Part 1\n- [ ] ~frontend Step 1\n- [ ] ~frontend Step 2\n- MR 2: Part 2\n- [ ] ~backend Step 1\n- [ ] ~backend Step 2\n- MR 3: Part 3\n- [ ] ~frontend Step 1\n- [ ] ~frontend Step 2\n\n--\u003e\n\n- [x] Update the [pipelines controller](/ee/app/controllers/ee/projects/pipelines_controller.rb) so that it uses the license scanning scanner class.\n- [x] Remove the deprecated `expose_license_scanning_data` method now that it is no longer used.\n- [x] Remove the `ee/lib/gitlab/license_scanning/report.rb` file (and associated spec) now that the contained class is no longer used.\n\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e\n\n## Verification steps\n\u003c!--\nAdd verification steps to help GitLab team members test the implementation. This is particularly useful\nduring the MR review and the ~\"workflow::verification\" step. You may not know exactly what the\nverification steps should be during issue refinement, so you can always come back later to add\nthem.\n\n1. Check-out the corresponding branch\n1. ...\n1. Profit!\n--\u003e\n\n1. Set up a project with license scanning e.g. ruby project with dependencies in a `Gemfile.lock`\n2. Run the license scanning job and open the pipeline page\n3. Verify that the licenses tab displays the expected licenses for the declared dependencies","state":"closed","created_at":"2022-10-17T09:32:30.555Z","updated_at":"2023-01-11T17:24:47.027Z","closed_at":"2023-01-11T17:24:46.996Z","closed_by":{"id":11279441,"username":"hacks4oats","name":"Oscar Tovar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11279441/avatar.png","web_url":"https://gitlab.com/hacks4oats"},"labels":["Category:License Compliance","Deliverable","GitLab Ultimate","backend","devops::secure","documentation","feature::addition","group::composition analysis","missed-deliverable","missed:15.7","section::sec","type::feature","workflow::production"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"}],"author":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"type":"ISSUE","assignee":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378087","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":13,"completed_count":3},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 13 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378087","notes":"https://gitlab.com/api/v4/projects/278964/issues/378087/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378087/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378087","relative":"#378087","full":"gitlab-org/gitlab#378087"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8532,"epic":{"id":579756,"iid":8532,"title":"Use License Scanning service","url":"/groups/gitlab-org/-/epics/8532","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":"on_track"},{"id":117005604,"iid":378086,"project_id":278964,"title":"Use License Scanning Scanner in License Compliance MR widget","description":"## Why are we doing this work\n\nThe backend needs to be changed so that the License Compliance widget of the Merge Request page uses the License Scanning Service.\n\nNOTE: Refreshing the MR approvers is covered by https://gitlab.com/gitlab-org/gitlab/-/issues/377420+.\n\n## Further details\n\nThe License Compliance MR widget is handled by [`MergeRequestsController#license_scanning_reports`](https://gitlab.com/gitlab-org/gitlab/-/blob/4061c8731f216dcda6ec33ea20701b306651074c/ee/app/models/ee/merge_request.rb#L253-257) and [`MergeRequestsController#license_scanning_reports_collapsed`](https://gitlab.com/gitlab-org/gitlab/-/blob/4061c8731f216dcda6ec33ea20701b306651074c/ee/app/models/ee/merge_request.rb#L259-268). These rely on [`CompareLicenseScanningReportsService`](https://gitlab.com/gitlab-org/gitlab/-/blob/c076195107fca466bf525611d55c19b3988eb2d2/ee/app/services/ci/compare_license_scanning_reports_service.rb#L4), [`CompareLicenseScanningReportsCollapsedService`](https://gitlab.com/gitlab-org/gitlab/-/blob/5ec8762de697ca51e463d929368124f5e7bd03e3/ee/app/services/ci/compare_license_scanning_reports_collapsed_service.rb#L4), and [`Gitlab::Ci::Reports::LicenseScanning::ReportsComparer`](https://gitlab.com/gitlab-org/gitlab/-/blob/c076195107fca466bf525611d55c19b3988eb2d2/ee/lib/gitlab/ci/reports/license_scanning/reports_comparer.rb#L7). Ultimately they delegate to [`SCA::LicenseCompliance#diff_with`](sca::LicenseCompliance#diff_with \"https://gitlab.com/gitlab-org/gitlab/-/blob/5ec8762de697ca51e463d929368124f5e7bd03e3/ee/app/models/sca/license_compliance.rb#L46-57\"), which delegates to [`LicenseScanning::Report#diff_with`](licensescanning::Report#diff_with \"https://gitlab.com/gitlab-org/gitlab/-/blob/5ec8762de697ca51e463d929368124f5e7bd03e3/ee/lib/gitlab/ci/reports/license_scanning/report.rb#L71-80\").\n\n## Proposal\n\nSame as https://gitlab.com/gitlab-org/gitlab/-/issues/378085#proposal: `Pipeline#license_scanning_report` gets a `Ci::Reports::LicenseScanning::Report` from the `LicenseScanningService`.\n\n## Relevant links\n\nTechnical evaluation:\n\n- `MergeRequestsController`: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133112249\n- `LicenseScanning::ReportComparer`: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133305069\n- `#diff_with`: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133580426\n\n## Non-functional requirements\n\n* [ ] Documentation:\n* [ ] Feature flag:\n* [ ] Performance:\n* [x] Testing: See the [Testing](#testing) section.\n\n## Implementation plan\n\n* [x] Create a method in the new license scanning scanner interface: `#scan_completed?`\n  * [x] This will replace the direct usage of `pipeline.license_scan_completed?` in `MergeRequest` compare license scanning reports methods.\n* [x] Update `MergeRequest#has_denied_policies?` so that it calls this new method instead of `MergeRequests#has_license_scanning_reports?`. The previous method can also be removed since it is no longer in use.\n* [x] Update `MergeRequest#compare_license_scanning_reports` and `MergeRequest#compare_license_scanning_reports_collapsed` so that it calls the new `#scan_completed?` method.\n\n## Testing\n\n* [x] Add unit tests for the new `#has_data?` method\n* [x] Ensure that the existing spec for `MergeRequest` class passes.\n\n## Verification steps\n\n1. Set up a project with license scanning.\n2. Set up some allowed and denied policies for the project.\n3. Open an MR that introduces new dependencies in the project. The dependencies should include at least one allowed and one denied license. Once the license scanning job finishes, ensure the following:\n   - Ensure that the License Compliance MR Widget displays allowed policies\n   - Ensure that the License Compliance MR Widget displays denied policies","state":"closed","created_at":"2022-10-17T09:31:55.398Z","updated_at":"2023-01-09T20:51:35.776Z","closed_at":"2023-01-09T20:51:35.754Z","closed_by":{"id":11279441,"username":"hacks4oats","name":"Oscar Tovar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11279441/avatar.png","web_url":"https://gitlab.com/hacks4oats"},"labels":["Category:License Compliance","Deliverable","GitLab Ultimate","backend","devops::secure","documentation","feature::addition","group::composition analysis","missed-deliverable","missed:15.7","section::sec","type::feature","workflow::production"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":11279441,"username":"hacks4oats","name":"Oscar Tovar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11279441/avatar.png","web_url":"https://gitlab.com/hacks4oats"}],"author":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"type":"ISSUE","assignee":{"id":11279441,"username":"hacks4oats","name":"Oscar Tovar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11279441/avatar.png","web_url":"https://gitlab.com/hacks4oats"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378086","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":10,"completed_count":7},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"7 of 10 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378086","notes":"https://gitlab.com/api/v4/projects/278964/issues/378086/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378086/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378086","relative":"#378086","full":"gitlab-org/gitlab#378086"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8532,"epic":{"id":579756,"iid":8532,"title":"Use License Scanning service","url":"/groups/gitlab-org/-/epics/8532","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":"on_track"},{"id":117005579,"iid":378085,"project_id":278964,"title":"Use License Scanning Service in License Compliance page","description":"## Why are we doing this work\n\nThe backend needs to be changed so that the License Compliance page uses the License Scanning Service. \n\n## Further details\n\nLicense Compliance page is handled by [`LicensesController#index`](https://gitlab.com/gitlab-org/gitlab/-/blob/acd266839e36913e70b2a10d5e04cae2a3a6bf9a/ee/app/controllers/projects/licenses_controller.rb#22) which uses [`SCA::LicenseCompliance`](https://gitlab.com/gitlab-org/gitlab/-/blob/acd266839e36913e70b2a10d5e04cae2a3a6bf9a/ee/app/models/ee/project.rb#L838), and [`Pipeline#license_scanning_report`](https://gitlab.com/gitlab-org/gitlab/-/blob/d7d50154c7ec38f134abe70f982fa5b243fc9a09/ee/app/models/ee/ci/pipeline.rb#L122).\n\nThe other controller actions are used to create and update license policies, and they don't need to be updated.\n\n## Proposal 1 :white_check_mark:\n\nChange `Pipeline#license_scanning_report` so that it gets a `Ci::Reports::LicenseScanning::Report` using the `LicenseScanningService`. The `LicenseScanningService` is initialized with the pipeline and its project.\n\nAlso, change `Project#license_compliance` so that it no longer relies on `latest_pipeline_with_reports` to get the default value for its argument. Instead, make `LicenseScanningService` responsible for finding the latest pipeline that provides the data it needs.\n\n## Proposal 2 :x:\n\nUpdate `LicenseCompliance#license_scanning_report` so that it gets a `Ci::Reports::LicenseScanning::Report` using the `LicenseScanning::ExportReportService` class.\n\n1. Create an `ExportReportService` class inside `ee/app/services/license_scanning/export_report_service.rb`. The `ExportReportService` is initialized with the pipeline and its project.\n2. Update `SCA::LicenseCompliance#license_scanning_report` so that it fetches the report using `LicenseScanning::ExportService#execute`.\n\n## Relevant links\n\nTechnical evaluation: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133318031\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated.\nThe plan can also call-out responsibilities for other team members or teams and\ncan be split into smaller MRs to simplify the code review process.\n\ne.g.:\n\n- MR 1: Part 1\n- [ ] ~frontend Step 1\n- [ ] ~frontend Step 2\n- MR 2: Part 2\n- [ ] ~backend Step 1\n- [ ] ~backend Step 2\n- MR 3: Part 3\n- [ ] ~frontend Step 1\n- [ ] ~frontend Step 2\n\n--\u003e\n\n\n1. Update the [`Pipeline#license_scanning_report`](https://gitlab.com/gitlab-org/gitlab/-/blob/d7d50154c7ec38f134abe70f982fa5b243fc9a09/ee/app/models/ee/ci/pipeline.rb#L122) method so that it returns a `Ci::Reports::LicenseScanning::Report` using the `::Gitlab::LicenseScanning::ArtifactScanner` class.\n    - This will require a public method on the class - `#report` that will fetch the report.\n1. Change `Project#license_compliance` so that it no longer relies on `latest_pipeline_with_reports` to get the default value for its argument. Make the`::Gitlab::LicenseScanning::BaseScanner` interface responsible for finding the latest pipeline that provides the data it needs. This method should be named in a manner that omits `reports` e.g. `#latest_pipeline`.\n    - The name purposefully omits `reports` so that the data source is abstracted away since the data can come from either SBoM components licenses or an artifact.\n    - Using a method within the `::Gitlab::LicenseScanning::BaseScanner` interface gives the advantage of having the feature flag logic within one area.\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e\n\n## Verification steps\n\u003c!--\nAdd verification steps to help GitLab team members test the implementation. This is particularly useful\nduring the MR review and the ~\"workflow::verification\" step. You may not know exactly what the\nverification steps should be during issue refinement, so you can always come back later to add\nthem.\n\n1. Check-out the corresponding branch\n1. ...\n1. Profit!\n--\u003e\nSET to review existing E2E tests, update if required to functionally test, being mindful of shifting left if covered by lower level testing.","state":"closed","created_at":"2022-10-17T09:31:25.605Z","updated_at":"2023-01-09T03:17:31.211Z","closed_at":"2023-01-04T19:59:08.048Z","closed_by":{"id":11279441,"username":"hacks4oats","name":"Oscar Tovar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11279441/avatar.png","web_url":"https://gitlab.com/hacks4oats"},"labels":["Category:License Compliance","Deliverable","GitLab Ultimate","UX","backend","devops::secure","documentation","feature::addition","group::composition analysis","missed-deliverable","missed:15.6","missed:15.7","quad-planning::complete-action","section::sec","type::feature","workflow::production"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":11279441,"username":"hacks4oats","name":"Oscar Tovar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11279441/avatar.png","web_url":"https://gitlab.com/hacks4oats"}],"author":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"type":"ISSUE","assignee":{"id":11279441,"username":"hacks4oats","name":"Oscar Tovar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11279441/avatar.png","web_url":"https://gitlab.com/hacks4oats"},"user_notes_count":24,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378085","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":10,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 10 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378085","notes":"https://gitlab.com/api/v4/projects/278964/issues/378085/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378085/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378085","relative":"#378085","full":"gitlab-org/gitlab#378085"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8532,"epic":{"id":579756,"iid":8532,"title":"Use License Scanning service","url":"/groups/gitlab-org/-/epics/8532","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":"on_track"},{"id":117001522,"iid":378081,"project_id":278964,"title":"Out of range for ActiveModel::Type::Integer with limit 2 bytes","description":"## Description\n\nI've reviewed the Integrations error budgets and [found](https://gitlab.com/groups/gitlab-org/-/epics/6913#note_1137502012) a lot of errors. After checking Kibana logs, it looks like we could have a database problem.\n\nhttps://log.gprd.gitlab.net/goto/2f8f08b0-4df6-11ed-8d37-e9a2f393ea2a\n\n```\n32768 is out of range for ActiveModel::Type::Integer with limit 2 bytes\n```","state":"closed","created_at":"2022-10-17T08:40:33.129Z","updated_at":"2022-11-21T12:08:59.463Z","closed_at":"2022-10-21T12:08:15.480Z","closed_by":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"labels":["Category:Database","Category:Integrations","Category:Webhooks","Deliverable","Error Budget Improvement","backend","bug::availability","devops::manage","group::integrations","priority::2","regression","regression:15.5","section::dev","severity::3","type::bug","workflow::in review"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"}],"author":{"id":1315742,"username":"arturoherrero","name":"Arturo Herrero","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1315742/avatar.png","web_url":"https://gitlab.com/arturoherrero"},"type":"ISSUE","assignee":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378081","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378081","notes":"https://gitlab.com/api/v4/projects/278964/issues/378081/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378081/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378081","relative":"#378081","full":"gitlab-org/gitlab#378081"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6913,"epic":{"id":370101,"iid":6913,"title":"Integrations Error Budgets","url":"/groups/gitlab-org/-/epics/6913","group_id":9970},"iteration":null,"health_status":null},{"id":116993574,"iid":378078,"project_id":278964,"title":"Hide Preview tab when the toolbar with the preview icon is available","description":"Currently, when the SE toolbar is enabled for a user, they get both: the Live Preview button on the toolbar, and the standard \"Preview\" tab. Both work differently which makes it very confusing.\n\n![Screenshot_2022-10-25_at_12.30.02](/uploads/be8e214344e681cfec8bcbd2e58512ab/Screenshot_2022-10-25_at_12.30.02.png)\n\nIt is suggested to approach the issue in several steps:\n \n1. Connect the existing \"Preview\" tab to the live-preview functionality. The live-preview functionality of the SE has been tested for more than a year, and it should be safe to use as the main \"preview\" functionality. This will bring much better visibility to the feature as a side effect.\n2. Roll out the `source_editor_toolbar` feature flag and make the toolbar available for all users\n3. Completely remove the \"Preview\" tab. Since \"Write\" is going to be the only tab left then, we can drop both tabs in one go then.","state":"closed","created_at":"2022-10-17T07:30:22.996Z","updated_at":"2022-11-21T12:02:04.061Z","closed_at":"2022-10-26T03:38:14.555Z","closed_by":{"id":3199302,"username":"dmishunov","name":"Denys Mishunov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d85e45af29611ac2c1395e3c3d6ec5d6?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmishunov"},"labels":["Deliverable","Development Department","Source Editor","devops::create","frontend","group::editor","section::dev","type::maintenance","workflow::ready for development"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":3199302,"username":"dmishunov","name":"Denys Mishunov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d85e45af29611ac2c1395e3c3d6ec5d6?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmishunov"}],"author":{"id":3199302,"username":"dmishunov","name":"Denys Mishunov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d85e45af29611ac2c1395e3c3d6ec5d6?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmishunov"},"type":"ISSUE","assignee":{"id":3199302,"username":"dmishunov","name":"Denys Mishunov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d85e45af29611ac2c1395e3c3d6ec5d6?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmishunov"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378078","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378078","notes":"https://gitlab.com/api/v4/projects/278964/issues/378078/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378078/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378078","relative":"#378078","full":"gitlab-org/gitlab#378078"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4862,"epic":{"id":141956,"iid":4862,"title":"Toolbar for Source Editor","url":"/groups/gitlab-org/-/epics/4862","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":116987140,"iid":378074,"project_id":278964,"title":"Show billing page option to auditors in settings section in sidebar menu","description":"### Problem to solve\n\nIteration 3 of https://gitlab.com/gitlab-org/gitlab/-/issues/351601#implementation. \nWe need to make the `Billing` page option visible to auditors in the `Settings` section of sidebar menu.  \nRelated discussion: https://gitlab.com/gitlab-org/gitlab/-/issues/351601#note_1059124501\n\n### Expected behaviour\n\nAllow Auditor (in addition to Admin) to view `Billing` page option in `Settings` section of sidebar menu. This should be behind the `auditor_billing_page_access` flag. \n\n### Intended users\n\nSupport\n\n### Impact\n\nRequire less admin accounts on GitLab.com.\n\n### Implementation\n| Description | Issue | MR\n| ------ | ------ | ------ |\n| Make the page available at `/groups/\u003cgroup-name\u003e/-/billings` for auditors | #351601 | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/97430|\n| Show the page in read-only mode for auditors | https://gitlab.com/gitlab-org/gitlab/-/issues/372964 | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/101441 |\n| Show the `Settings -\u003e Billing` option for auditors | https://gitlab.com/gitlab-org/gitlab/-/issues/378074 | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/101949 |","state":"closed","created_at":"2022-10-17T06:22:08.339Z","updated_at":"2022-11-14T17:25:24.198Z","closed_at":"2022-10-27T10:53:40.189Z","closed_by":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"labels":["SUS::Impacting","Support Efficiency","Support Priority","Track Health Status","UX","[deprecated] Category:Billing and Subscription Management","backend","devops::fulfillment","frontend","gitlab.com","group::billing and subscription management","internal customer","missed-SLO","priority::2","section::fulfillment","severity::2","type::feature","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"}],"author":{"id":10590518,"username":"snachnolkar","name":"Sharmad Nachnolkar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10590518/avatar.png","web_url":"https://gitlab.com/snachnolkar"},"type":"ISSUE","assignee":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378074","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378074","notes":"https://gitlab.com/api/v4/projects/278964/issues/378074/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378074/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378074","relative":"#378074","full":"gitlab-org/gitlab#378074"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7469,"epic":{"id":432129,"iid":7469,"title":"Ensure Auditor permissions in UI follow docs","url":"/groups/gitlab-org/-/epics/7469","group_id":9970},"iteration":{"id":86629,"iid":150,"sequence":1,"group_id":9970,"title":null,"description":null,"state":3,"created_at":"2022-10-04T21:31:23.241Z","updated_at":"2022-11-03T00:05:04.111Z","start_date":"2022-10-18","due_date":"2022-11-02","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/86629"},"health_status":null},{"id":116923147,"iid":378028,"project_id":278964,"title":"Editing sidebar in Project or Group Wiki removes existing sidebar","description":"### Summary\n\nMy Wiki has an existing sidebar, with text. When I try to edit the sidebar the Wiki shows an empty editor and offers to `Create sidebar` as per the Commit Message.\n\n### Steps to reproduce\n\n1. Create a new Wiki (or have an old wiki with an existing sidebar under as-yet-to-be-determined conditions)\n2. Click `Edit Sidebar`\n3. Expect to see your existing sidebar content, however minimal\n4. Get a `Create new page` with title `_sidebar` that ignores any existing `_sidebar` content\n\n### Example Project\n\nhttps://gitlab.com/gitlab-gold/duncan/toc/-/wikis/home - Editing the Sidebar for this wiki will _not_ show the existing link to Home.\n\n### What is the current *bug* behavior?\n\nExisting sidebar is visible but non-editable\n\n### What is the expected *correct* behavior?\n\nThe sidebar editor should show existing content\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, uncomment below --\u003e\n\nThis bug happens on GitLab.com - GitLab Enterprise Edition 15.5.0-pre 1c11a119272\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2022-10-15T00:49:20.199Z","updated_at":"2022-12-06T19:47:53.185Z","closed_at":"2022-12-05T16:38:48.365Z","closed_by":{"id":5212466,"username":"ericschurter","name":"Eric Schurter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5212466/avatar.png","web_url":"https://gitlab.com/ericschurter"},"labels":["Category:Wiki","approaching-SLO","backend","bug::functional","devops::create","good for new contributors","group::editor","priority::4","reproduced on GitLab.com","section::dev","severity::2","type::bug","workflow::refinement"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":6239198,"username":"duncan_harris","name":"Duncan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6239198/avatar.png","web_url":"https://gitlab.com/duncan_harris"},"type":"ISSUE","assignee":null,"user_notes_count":12,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378028","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378028","notes":"https://gitlab.com/api/v4/projects/278964/issues/378028/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378028/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378028","relative":"#378028","full":"gitlab-org/gitlab#378028"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116917294,"iid":378012,"project_id":278964,"title":"Move SearchController to using presenter","description":"## Summary\n\nThe [SearchController](app/controllers/search_controller.rb) has a heavy reliance upon instance variables. There also exists a [`SearchServicePresenter`](app/presenters/search_service_presenter.rb) used in the view and [`SearchContext`](lib/gitlab/search_context.rb) used in the navbar. \n\n## Proposal\n\nGet controller/view off reliance upon instance variables. Use existing SearchServicePresenter and see if it can also replace SearchContext.","state":"closed","created_at":"2022-10-14T19:47:14.856Z","updated_at":"2023-01-06T18:56:28.558Z","closed_at":"2023-01-06T18:56:28.508Z","closed_by":{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},"labels":["Category:Global Search","Deliverable","Next::1-3 releases","backend","devops::data_stores","group::global search","maintenance::refactor","section::enablement","type::maintenance","workflow::verification"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"}],"author":{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},"type":"ISSUE","assignee":{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378012","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378012","notes":"https://gitlab.com/api/v4/projects/278964/issues/378012/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378012/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378012","relative":"#378012","full":"gitlab-org/gitlab#378012"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8997,"epic":{"id":624173,"iid":8997,"title":"Create new search gateway/engine","url":"/groups/gitlab-org/-/epics/8997","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":116913930,"iid":378001,"project_id":278964,"title":"Add monitoring for the size of MigrateRecordsToGhostUserInBatchesService queue","description":"As a follow up to https://gitlab.com/gitlab-org/gitlab/-/issues/358760 and since users deletion is a critical action that can also impact GDPR, add monitoring on the MigrateRecordsToGhostUserInBatchesService queue if it grows beyond a threshold","state":"closed","created_at":"2022-10-14T18:22:58.324Z","updated_at":"2022-11-21T12:02:21.125Z","closed_at":"2022-11-15T09:33:52.147Z","closed_by":{"id":1315784,"username":"ifarkas","name":"Imre Farkas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b4dcfa5185b8513751b447d76b069bf6?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifarkas"},"labels":["Deliverable","devops::manage","group::authentication and authorization","maintenance::performance","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":1315784,"username":"ifarkas","name":"Imre Farkas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b4dcfa5185b8513751b447d76b069bf6?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifarkas"}],"author":{"id":12519771,"username":"adil.farrukh","name":"Adil Farrukh","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12519771/avatar.png","web_url":"https://gitlab.com/adil.farrukh"},"type":"ISSUE","assignee":{"id":1315784,"username":"ifarkas","name":"Imre Farkas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b4dcfa5185b8513751b447d76b069bf6?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifarkas"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378001","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378001","notes":"https://gitlab.com/api/v4/projects/278964/issues/378001/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378001/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378001","relative":"#378001","full":"gitlab-org/gitlab#378001"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9022,"epic":{"id":626236,"iid":9022,"title":"User deletion workflow improvements","url":"/groups/gitlab-org/-/epics/9022","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116913751,"iid":378000,"project_id":278964,"title":"Trial registration tests are failing due to timing issues with ActionController::InvalidAuthenticityToken","description":"# Problem\n\nsee https://gitlab.com/gitlab-org/gitlab/-/issues/377980#note_1136421303\n\nexample\n\n```console\n❯ srspec ee/spec/features/registrations/saas/trial_flow_just_me_creating_project_spec.rb\nRunning via Spring preloader in process 27786\nwarning: parser/current is loading parser/ruby27, which recognizes2.7.6-compliant syntax, but you are running 2.7.5.\nPlease see https://github.com/whitequark/parser#compatibility-with-ruby-mri.\nRun options: include {:focus=\u003etrue}\n\nAll examples were filtered out; ignoring {:focus=\u003etrue}\n\nTest environment set up in 6.469792 seconds\nStarting the Capybara driver server...\nCapybara starting Puma...\n* Version 5.6.5 , codename: Birdie's Version\n* Min threads: 0, max threads: 4\n* Listening on unix:///var/folders/j2/bnr2f0xj68d586mtpcsyd87w0000gn/T/20221014-27786-l6b3kp\n2022-10-14 12:12:42 -0400 Rack app (\"PATCH /users/sign_up/welcome\" - (127.0.0.1)): #\u003cActionController::InvalidAuthenticityToken: ActionController::InvalidAuthenticityToken\u003e\nF  HTML screenshot: /Users/dstull/projects/gdk/gitlab/tmp/capybara/trial_flow_for_user_picking_just_me_and_creating_a_project_registers_the_user_and_creates_a_group_an.html\n  Image screenshot: /Users/dstull/projects/gdk/gitlab/tmp/capybara/trial_flow_for_user_picking_just_me_and_creating_a_project_registers_the_user_and_creates_a_group_an.png\n\n\nFailures:\n\n  1) Trial flow for user picking just me and creating a project registers the user and creates a group and project reaching onboarding\n     Got 0 failures and 2 other errors:\n\n     1.1) Failure/Error: return @app.call(env) unless rendering_memory_profiler?(request)\n\n          ActionController::InvalidAuthenticityToken:\n            ActionController::InvalidAuthenticityToken\n```\n\nall `ee/spec/features/registrations/saas/trial_flow` are victim to this","state":"closed","created_at":"2022-10-14T18:17:07.753Z","updated_at":"2022-10-18T13:56:25.258Z","closed_at":"2022-10-18T13:56:25.186Z","closed_by":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"labels":["Next Up","devops::growth","group::acquisition","maintenance::workflow","section::growth","type::maintenance","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"}],"author":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"type":"ISSUE","assignee":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/378000","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/378000","notes":"https://gitlab.com/api/v4/projects/278964/issues/378000/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/378000/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#378000","relative":"#378000","full":"gitlab-org/gitlab#378000"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116913601,"iid":377999,"project_id":278964,"title":"Increase maximum execution time limit for MigrateRecordsToGhostUserInBatchesService","description":"As a follow to https://gitlab.com/gitlab-org/gitlab/-/issues/358760, the `MigrateRecordsToGhostUserInBatchesService` worker may [timeout](https://gitlab.com/gitlab-org/gitlab/-/blob/ec47ade13f92fd20f2c2e63c4ab2881e50f85980/lib/gitlab/utils/execution_tracker.rb#L6) when trying to execute on a user that takes longer than 30s to complete. It'd make sense to bump that to a slightly higher value (60s) to account for users that take longer to process (e.g those with large number of issue/merge associations)","state":"closed","created_at":"2022-10-14T18:12:19.865Z","updated_at":"2022-11-21T12:02:21.194Z","closed_at":"2022-10-19T09:23:25.427Z","closed_by":{"id":1315784,"username":"ifarkas","name":"Imre Farkas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b4dcfa5185b8513751b447d76b069bf6?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifarkas"},"labels":["Deliverable","Track Health Status","devops::manage","group::authentication and authorization","maintenance::performance","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":1315784,"username":"ifarkas","name":"Imre Farkas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b4dcfa5185b8513751b447d76b069bf6?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifarkas"}],"author":{"id":12519771,"username":"adil.farrukh","name":"Adil Farrukh","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12519771/avatar.png","web_url":"https://gitlab.com/adil.farrukh"},"type":"ISSUE","assignee":{"id":1315784,"username":"ifarkas","name":"Imre Farkas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b4dcfa5185b8513751b447d76b069bf6?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifarkas"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377999","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377999","notes":"https://gitlab.com/api/v4/projects/278964/issues/377999/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377999/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377999","relative":"#377999","full":"gitlab-org/gitlab#377999"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9022,"epic":{"id":626236,"iid":9022,"title":"User deletion workflow improvements","url":"/groups/gitlab-org/-/epics/9022","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116912993,"iid":377996,"project_id":278964,"title":"Update MigrateRecordsToGhostUserInBatchesService retry logic to prevent from being blocked at one user","description":"As an additional update from the [issue](https://gitlab.com/gitlab-org/gitlab/-/issues/358760), we can update the retry logic for `MigrateRecordsToGhostUserInBatchesService` by story a retry attribute for each row/user to avoid getting blocked if that deletion fails for a reasons. @ahegyi recommended:\n\nWe can use the same pattern that we have for loose foreign keys.\n\n1. Add the `consume_after` column to the `ghost_user_migrations` table.\n1. Set the `consume_after` value to `created_at` by default (could be `NOW()` as well) when the `ghost_user_migrations` record is created.\n1. When a user deletion fails, catch the timeout error and update the `consume_after` with `Time.current + 30 minutes`.\n\nAdditionally, we should retrieve a batch by ordering the rows by `consume_after ASC`","state":"closed","created_at":"2022-10-14T17:54:07.152Z","updated_at":"2022-11-21T12:02:21.254Z","closed_at":"2022-11-03T13:30:41.861Z","closed_by":{"id":1315784,"username":"ifarkas","name":"Imre Farkas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b4dcfa5185b8513751b447d76b069bf6?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifarkas"},"labels":["Deliverable","Track Health Status","devops::manage","group::authentication and authorization","maintenance::performance","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":1315784,"username":"ifarkas","name":"Imre Farkas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b4dcfa5185b8513751b447d76b069bf6?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifarkas"}],"author":{"id":12519771,"username":"adil.farrukh","name":"Adil Farrukh","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12519771/avatar.png","web_url":"https://gitlab.com/adil.farrukh"},"type":"ISSUE","assignee":{"id":1315784,"username":"ifarkas","name":"Imre Farkas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b4dcfa5185b8513751b447d76b069bf6?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifarkas"},"user_notes_count":1,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377996","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377996","notes":"https://gitlab.com/api/v4/projects/278964/issues/377996/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377996/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377996","relative":"#377996","full":"gitlab-org/gitlab#377996"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9022,"epic":{"id":626236,"iid":9022,"title":"User deletion workflow improvements","url":"/groups/gitlab-org/-/epics/9022","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116906377,"iid":377981,"project_id":278964,"title":"Update metrics dictionary query to use new TD model","description":"### Context\n\nThe queries generated in the metrics dictionary are using `common_prep.prep_usage_ping`. This model now has a trusted data replacement and is going to be deprecated in the coming months.\n\n### Request\n\nUpdate the query to use a new TD model. \n\nExample new vs old query for `usage_activity_by_stage_monthly.manage.count_user_auth`:\n\n``` sql\n--new query\nSELECT\n  ping_created_at,\n  metrics_path,\n  metric_value,\n  has_timed_out --if metric timed out, the value will be set to 0\nFROM common.fct_ping_instance_metric_rolling_6_months --model limited to last 6 months for performance\nWHERE dim_instance_id = 'ea8bf810-1d6f-4a6a-b4fd-93e8cbd8b57f' --SaaS instance, both production and staging installations\n  AND metrics_path = 'usage_activity_by_stage_monthly.manage.count_user_auth' --set to metric of interest\nORDER BY ping_created_at DESC\nLIMIT 5\n;\n\n--old query\nSELECT \n  ping_created_at,\n  raw_usage_data_payload:usage_activity_by_stage_monthly:manage:count_user_auth AS count_user_auth\nFROM common_prep.prep_usage_ping\nWHERE dim_instance_id IN ('ea8bf810-1d6f-4a6a-b4fd-93e8cbd8b57f')\nORDER BY ping_created_at DESC\nLIMIT 5\n;\n\n```\n\n#### Other query notes\n\n* The table used in the example is limited to just the last 6 months for performance, but we could use a larger, unfiltered model (`common.fct_ping_instance_metric`), if needed.\n* If you wanted to keep the same methodology for pulling in the metric (ex: `raw_usage_data_payload:usage_activity_by_stage_monthly:manage:count_user_auth` vs `metrics_path = 'usage_activity_by_stage_monthly.manage.count_user_auth'`), then we can use a different model (`common.dim_ping_instance`). Please reach out if you want to go that direction and need any help.","state":"closed","created_at":"2022-10-14T15:41:25.952Z","updated_at":"2022-11-21T18:22:31.490Z","closed_at":"2022-11-21T08:57:26.672Z","closed_by":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"labels":["Metrics Dictionary","devops::analytics","group::product intelligence","section::analytics","type::maintenance","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"}],"author":{"id":8955743,"username":"cbraza","name":"Carolyn Braza","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8955743/avatar.png","web_url":"https://gitlab.com/cbraza"},"type":"ISSUE","assignee":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377981","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377981","notes":"https://gitlab.com/api/v4/projects/278964/issues/377981/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377981/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377981","relative":"#377981","full":"gitlab-org/gitlab#377981"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6522,"epic":{"id":321040,"iid":6522,"title":"Scalable Metrics Dictionary","url":"/groups/gitlab-org/-/epics/6522","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116906359,"iid":377980,"project_id":278964,"title":"Test failure ee/spec/features/registrations/saas/trial_flow_just_me_creating_project_spec.rb:6","description":"Job [#3175177267](https://gitlab.com/gitlab-org/gitlab/-/jobs/3175177267) failed for 38d844d6e62b5854e6f323ac79ee0f38e034bea0:\n\n```\nFailures:\n  1) Trial flow for user picking just me and creating a project registers the user and creates a group and project reaching onboarding\n     Got 1 failure and 1 other error:\n     1.1) Failure/Error: return yield unless new(admin).admin_mode?\n            #\u003cGitlabSubscriptions::Trials::ApplyTrialWorker (class)\u003e received :perform_async with unexpected arguments\n              expected: (375, {:gitlab_com_trial=\u003etrue, :glm_content=\u003e\"some_content\", :glm_source=\u003e\"some_source\", :namespace_id=\u003eanything, :sync_to_gl=\u003etrue})\n                   got: (375, {\"gitlab_com_trial\"=\u003etrue, \"namespace_id\"=\u003e528, \"sync_to_gl\"=\u003etrue})\n          # ./ee/app/services/registrations/base_namespace_create_service.rb:45:in `apply_trial'\n          # ./ee/app/services/registrations/base_namespace_create_service.rb:21:in `after_successful_group_creation'\n          # ./ee/app/services/registrations/standard_namespace_create_service.rb:31:in `create_with_new_group_flow'\n          # ./ee/app/services/registrations/standard_namespace_create_service.rb:7:in `execute'\n          # ./ee/app/controllers/registrations/groups_projects_controller.rb:34:in `create'\n```","state":"closed","created_at":"2022-10-14T15:41:17.290Z","updated_at":"2022-10-21T13:05:08.892Z","closed_at":"2022-10-14T18:01:03.705Z","closed_by":{"id":6290669,"username":"godfat-gitlab","name":"Lin Jen-Shin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6290669/avatar.png","web_url":"https://gitlab.com/godfat-gitlab"},"labels":["devops::growth","group::acquisition","master:broken","priority::1","section::growth","severity::1","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"}],"author":{"id":6290669,"username":"godfat-gitlab","name":"Lin Jen-Shin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6290669/avatar.png","web_url":"https://gitlab.com/godfat-gitlab"},"type":"ISSUE","assignee":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377980","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377980","notes":"https://gitlab.com/api/v4/projects/278964/issues/377980/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377980/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377980","relative":"#377980","full":"gitlab-org/gitlab#377980"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116903149,"iid":377972,"project_id":278964,"title":"HTTP 5xx for TooManyIps error should be HTTP 403","description":"## Summary\n\nWhile investigating an incident in GitLab Dedicated related to puma SLI violating the error rate SLO, it was discovered that when a user hits `TooManyIps`, all requests from this user will return HTTP 500.\n\n## Impact\nOver the last 24 hours the SRE on-call was paged multiple times. The customer affected also opened an issue because no clear error message was presented.\n\nDue to confidentiality, screenshots and logs are redacted and permalinks can't be provided.\n\nGrafana webservice Service Overview dashboard:\n\n![Screenshot_from_2022-10-14_16-32-04](/uploads/5109fc0a1169e344fa12e4384c02d231/Screenshot_from_2022-10-14_16-32-04.png)\n\nOpensearch query filter and selected fields:\n\n![Screenshot_from_2022-10-14_16-23-59](/uploads/bcc33c2a25df74837af5b26bf5778fc6/Screenshot_from_2022-10-14_16-23-59.png)\n\nResults:\n\n![Screenshot_from_2022-10-14_16-23-21](/uploads/d5368d8688ee30e20adc906d14783532/Screenshot_from_2022-10-14_16-23-21.png)\n\nFrom the logs, extracted from the customer's S3 bucket, the underlying error has been found:\n\n```\nzgrep -h \"User XXX from IP\" logs/today/*/*|jq -r .message|sort -u\nGitlab::Auth::TooManyIps (User XXX from IP: 111.xxx.xxx.xxx tried logging from too many ips: 11):\nGitlab::Auth::TooManyIps (User XXX from IP: 222.xxx.xxx.xxx tried logging from too many ips: 11):\nGitlab::Auth::TooManyIps (User XXX from IP: 333.xxx.xxx.xxx tried logging from too many ips: 11):\nGitlab::Auth::TooManyIps (User XXX from IP: 444.xxx.xxx.xxx tried logging from too many ips: 11):\n```\n\n## Recommendation\n`TooManyIps` should return HTTP 403 and the web front end and API should return a clear error message (like \"You/User XYZ tried logging in from too many IPs\") and probably point to the correct configuration settings.\n\n## Verification\n\nLogging in with one user from multiple public IPs should prove that the login will result in HTTP 500. In the `production.log` file the error `Gitlab::Auth::TooManyIps (User XXX from IP: xxx.xxx.xxx.xxx tried logging from too many ips:)` should be present.\n\nRequired settings:\n`unique_ips_limit_enabled` to be `true` and\n`unique_ips_limit_per_user` to be set to a reasonable value.","state":"closed","created_at":"2022-10-14T14:47:16.307Z","updated_at":"2022-12-21T12:03:16.538Z","closed_at":"2022-12-08T17:32:38.691Z","closed_by":{"id":13356,"username":"dblessing","name":"Drew Blessing","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b5bf44866b4eeafa2d8114bfe15da02f?s=80\u0026d=identicon","web_url":"https://gitlab.com/dblessing"},"labels":["Deliverable","[deprecated] Accepting merge requests","customer","devops::manage","group::authentication and authorization","infradev","priority::2","section::dev","severity::3","type::bug","workflow::verification"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":13356,"username":"dblessing","name":"Drew Blessing","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b5bf44866b4eeafa2d8114bfe15da02f?s=80\u0026d=identicon","web_url":"https://gitlab.com/dblessing"}],"author":{"id":10992199,"username":"sbreitrainer","name":"Stephan Breitrainer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10992199/avatar.png","web_url":"https://gitlab.com/sbreitrainer"},"type":"ISSUE","assignee":{"id":13356,"username":"dblessing","name":"Drew Blessing","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b5bf44866b4eeafa2d8114bfe15da02f?s=80\u0026d=identicon","web_url":"https://gitlab.com/dblessing"},"user_notes_count":13,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377972","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377972","notes":"https://gitlab.com/api/v4/projects/278964/issues/377972/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377972/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377972","relative":"#377972","full":"gitlab-org/gitlab#377972"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116890376,"iid":377951,"project_id":278964,"title":"Fix multiple calls to delete refs in Deployments::ArchiveInProjectWorker sidekiq worker","description":"### Problem\n\nWhile [researching](https://gitlab.com/gitlab-org/ci-cd/release-group/release/-/issues/179) issues affecting the release stage [error budget](https://dashboards.gitlab.net/d/stage-groups-release/stage-groups-release-group-dashboard?orgId=1), an issue was detected in `Deployments::ArchiveInProjectWorker`.\n\nThis happens because [multiple calls to delete refs](https://gitlab.com/gitlab-org/gitlab/-/blob/f843952a1f65b14ada784f7ea7ae098a13dd1492/app/services/deployments/archive_in_project_service.rb#L17) via Gitaly are being executed, which under the hood seem to result in a git error while [trying lock all references in preparation](https://gitlab.com/gitlab-org/gitaly/-/blob/f8c627eef307008e923cbce45b23ef2813599a92/internal/git/updateref/updateref.go#L137-151) for [deleting a specific reference](https://git-scm.com/docs/git-update-ref), as can be seen in the following error:\n\n```go\nunable to delete refs: state update to \"prepare\" failed: EOF, stderr: \"fatal: prepare: multiple updates for 'test/test_test' (including one via symref 'refs/environments/test15/deployments/692189') are not allowed\\n\"\n```\n\nThis error affects the `sidekiq_execution` component of error budget. Check links below for further information.\n\n**Logs**: https://log.gprd.gitlab.net/goto/6e965c20-4a45-11ed-8d37-e9a2f393ea2a\n\n**Sentry**: https://sentry.gitlab.net/gitlab/gitlabcom/issues/3308826\n\n### Proposal\n\nUpdate `ArchiveInProjectService` to pass `--no-deref` option in the [`gitaly` call to delete refs](https://gitlab.com/gitlab-org/gitlab/-/blob/58e96b02d1c47a37524c09112cb533200fe76169/app/services/deployments/archive_in_project_service.rb#L17).\n\n**Note**: The `--no-deref` option was implemented in https://gitlab.com/gitlab-org/gitaly/-/issues/4624.","state":"closed","created_at":"2022-10-14T11:29:57.370Z","updated_at":"2022-12-02T10:29:03.741Z","closed_at":"2022-12-02T07:44:56.980Z","closed_by":{"id":7815314,"username":"qmnguyen0711","name":"Quang-Minh Nguyen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7815314/avatar.png","web_url":"https://gitlab.com/qmnguyen0711"},"labels":["Category:Deployment Management","Category:Environment Management","Error Budget Improvement","Release::P3","backend","backend-weight::1","devops::release","gitaly::git","group::release","priority::2","section::ops","severity::3","type::bug","workflow::ready for development"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":7815314,"username":"qmnguyen0711","name":"Quang-Minh Nguyen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7815314/avatar.png","web_url":"https://gitlab.com/qmnguyen0711"}],"author":{"id":11334402,"username":"ahmed.hemdan","name":"Ahmed Hemdan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11334402/avatar.png","web_url":"https://gitlab.com/ahmed.hemdan"},"type":"ISSUE","assignee":{"id":7815314,"username":"qmnguyen0711","name":"Quang-Minh Nguyen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7815314/avatar.png","web_url":"https://gitlab.com/qmnguyen0711"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377951","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377951","notes":"https://gitlab.com/api/v4/projects/278964/issues/377951/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377951/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377951","relative":"#377951","full":"gitlab-org/gitlab#377951"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9149,"epic":{"id":643608,"iid":9149,"title":"Release Stage Error budget and performance improvements - FY23Q4","url":"/groups/gitlab-org/-/epics/9149","group_id":9970,"human_readable_end_date":"Jan 31, 2023","human_readable_timestamp":"\u003cstrong\u003e16\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":116889410,"iid":377949,"project_id":278964,"title":"notify-pipeline-failure should show the failing project name or path","description":"It's not clear where the failed pipeline was coming from looking at this:\n\n![Screen_Shot_2022-10-14_at_18.45.02](https://gitlab.com/gitlab-org/gitlab/uploads/21f7c44a913cfc7a60eb1dfad0a2173b/Screen_Shot_2022-10-14_at_18.45.02.png)\n\nWorkaround:\n\n* Check the pipeline URL or commit URL\n* Knowing that this commit message must be coming from FOSS, I actually do know that's a FOSS pipeline, not an EE pipeline\n\nProposed solution:\n\nWe already showed \"**Source**: `push`\", perhaps we can include project path there: \"**Source**: `push` from [GitLab FOSS](https://gitlab.com/gitlab-org/gitlab-foss)\"","state":"closed","created_at":"2022-10-14T11:12:06.758Z","updated_at":"2022-10-20T15:12:45.852Z","closed_at":"2022-10-20T15:12:45.738Z","closed_by":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Engineering Productivity","maintenance::pipelines","type::maintenance"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":6290669,"username":"godfat-gitlab","name":"Lin Jen-Shin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6290669/avatar.png","web_url":"https://gitlab.com/godfat-gitlab"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":4,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377949","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377949","notes":"https://gitlab.com/api/v4/projects/278964/issues/377949/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377949/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377949","relative":"#377949","full":"gitlab-org/gitlab#377949"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116888469,"iid":377945,"project_id":278964,"title":"notify-pipeline-failure does not include all failed jobs","description":"## Missing `qa:selectors`\n\nThe new pipeline failure notification introduced in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/99263 does not show all failed job: https://gitlab.com/gitlab-org/gitlab-foss/-/pipelines/666767743\n\n![Screen_Shot_2022-10-14_at_18.45.02](/uploads/21f7c44a913cfc7a60eb1dfad0a2173b/Screen_Shot_2022-10-14_at_18.45.02.png)\n\nIn this case, the failed job which wasn't included was `qa:selectors`: https://gitlab.com/gitlab-org/gitlab-foss/-/jobs/3173072862\n\n## Missing `e2e:package-and-test`\n\nThe bridge job wasn't included either: https://gitlab.com/gitlab-org/gitlab/-/pipelines/666524253\n\n![Screen_Shot_2022-10-14_at_18.50.44](/uploads/75d6d1ac2e15b33588a254335639ac43/Screen_Shot_2022-10-14_at_18.50.44.png)\n\nIn this case, the failed bridge job which wasn't included was `e2e:package-and-test`: https://gitlab.com/gitlab-org/gitlab/-/pipelines/666534780","state":"closed","created_at":"2022-10-14T10:50:19.621Z","updated_at":"2022-11-15T12:03:37.308Z","closed_at":"2022-11-15T12:03:37.203Z","closed_by":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Engineering Productivity","[deprecated] Accepting merge requests","maintenance::pipelines","type::maintenance"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[],"author":{"id":6290669,"username":"godfat-gitlab","name":"Lin Jen-Shin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6290669/avatar.png","web_url":"https://gitlab.com/godfat-gitlab"},"type":"ISSUE","assignee":null,"user_notes_count":8,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377945","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377945","notes":"https://gitlab.com/api/v4/projects/278964/issues/377945/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377945/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377945","relative":"#377945","full":"gitlab-org/gitlab#377945"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116880754,"iid":377934,"project_id":278964,"title":"Adjust elastic models to use internal on notes","description":"As we are about to rename `confidential` to `internal` for Notes, we also need to change the elastic models accordingly to pick it up.\n\n\n## Plan\n\nBased on `@dgruzd` recommendation in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/104260#note_1198012444\n\n- [ ] Add an advanced search migration to add a new `internal` field to notes mappings and update `note_config.rb`\n- [ ] Update `note_instance_proxy.rb` to add the `internal` field to json guarded by `Elastic::DataMigrationService.migration_has_finished?`\n- [ ] Create a backfill migration\n- [ ]  Create an MR to use the new `internal` field for searching in `note_class_proxy.rb` instead of `confidential` guarded by `Elastic::DataMigrationService.migration_has_finished?`\n- [ ] MR to deprecate the `confidential` field\n- [ ]  MR to add an Advanced Search migration to remove the old `confidential` field from mappings, `note_instance_proxy.rb`, and `note_class_proxy.rb`. Ideally in the milestone when we deprecate previous migrations.","state":"closed","created_at":"2022-10-14T08:56:47.933Z","updated_at":"2023-01-12T11:50:47.728Z","closed_at":"2023-01-12T11:47:29.519Z","closed_by":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"labels":["Track Health Status","Unplanned","backend","devops::plan","group::product planning","missed:15.6","missed:15.7","section::dev","type::maintenance","workflow::in dev"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"}],"author":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"type":"ISSUE","assignee":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377934","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":0},"weight":3,"blocking_issues_count":2,"has_tasks":true,"task_status":"0 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377934","notes":"https://gitlab.com/api/v4/projects/278964/issues/377934/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377934/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377934","relative":"#377934","full":"gitlab-org/gitlab#377934"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8390,"epic":{"id":567440,"iid":8390,"title":"Internal Notes: Technical debt cleanup","url":"/groups/gitlab-org/-/epics/8390","group_id":9970,"human_readable_end_date":"May 17, 2023","human_readable_timestamp":"\u003cstrong\u003e4\u003c/strong\u003e months remaining"},"iteration":null,"health_status":"on_track"},{"id":116874653,"iid":377929,"project_id":278964,"title":"Jupyter/IPYNB output with Markdown doesn't render","description":"### Summary\n\nCertain Markdown-related objects are not rendered in our viewer. While [we document](https://gitlab.com/gitlab-org/gitlab/-/blob/v15.4.2-ee/doc/user/project/repository/jupyter_notebooks/index.md#jupyter-notebook-files) that\n\n\u003e Interactive features, including JavaScript plots, don't work …\n\n_Markdown_ and text should.\n\nReported by a ~\"GitLab Premium\" ~customer [internally](https://gitlab.zendesk.com/agent/tickets/335332) (v14.10.5, but ~\"reproduced on GitLab.com\" as well)\n\n### Steps to reproduce / Example Project\n\nSee [.ipynb file in gitlab-gold/katrinleinweber-kl-tests/zd-335332-ipynb-render-bug](https://gitlab.com/gitlab-gold/katrinleinweber-kl-tests/zd-335332-ipynb-render-bug/-/blob/main/gitlab_markdown_nb_bug.ipynb) and its blame view.\n\n### What is the current *bug* behavior?\n\n`display(Markdown())`, `Markdown()` \u0026 `display_markdown()` don't render in output cells.\n\n### What is the expected *correct* behavior?\n\nSame as in JupyterLab, see [screenshots](https://gitlab.com/gitlab-gold/katrinleinweber-kl-tests/zd-335332-ipynb-render-bug/-/blob/main/gitlab_markdown_nb_bug.png).\n\n\u003cdetails\u003e\u003csummary\u003eJupyter Server and Kernel Information\u003c/summary\u003e\n\nThe version of the notebook server is: 6.4.12\nThe server is running on this version of Python:\n\nPython 3.10.8 (main, Oct 12 2022, 09:44:35) [Clang 12.0.0 (clang-1200.0.32.29)]\n… IPython 8.5.0 …\n\u003c/details\u003e\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n- For `\"output_type\": \"display_data\"` and `output_type\": \"execute_result\"`, the `outputs\": [{\"data\": {\"text/markdown\": …` need to be supported by us :thinking: In the examples, `text/plain` is what get's rendered.","state":"closed","created_at":"2022-10-14T07:33:59.275Z","updated_at":"2022-11-21T12:01:24.351Z","closed_at":"2022-10-31T07:45:23.957Z","closed_by":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"labels":["Deliverable","Python Notebooks","bug::functional","customer","devops::create","frontend","group::source code","priority::2","reproduced on GitLab.com","section::dev","severity::2","spike","type::bug"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"}],"author":{"id":724395,"username":"katrinleinweber","name":"Katrin Leinweber","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/724395/avatar.png","web_url":"https://gitlab.com/katrinleinweber"},"type":"ISSUE","assignee":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377929","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377929","notes":"https://gitlab.com/api/v4/projects/278964/issues/377929/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377929/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377929","relative":"#377929","full":"gitlab-org/gitlab#377929"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116873125,"iid":377927,"project_id":278964,"title":"Expose id field for protected ref access entities in API","description":"For https://gitlab.com/gitlab-org/gitlab/-/issues/20229 we want to introduce the ability to update access levels. We plan to follow the convention that is introduced for [Protected Environments API](https://docs.gitlab.com/ee/api/protected_environments.html). It follows the same conventions as [Rails Nested Attributes](https://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html).\n\nAs a prerequisite, we need to expose the `id` attribute in the `ProtectedRefAccess` [entity](https://gitlab.com/gitlab-org/gitlab/blob/0acba2ab515f263a86718583ffaa7932fbf11b3b/lib/api/entities/protected_ref_access.rb#L6) and update the documentation for\n\n- Protected Branches API: https://docs.gitlab.com/ee/api/protected_branches.html\n- Protected Tags API: https://docs.gitlab.com/ee/api/protected_tags.html","state":"closed","created_at":"2022-10-14T07:11:17.576Z","updated_at":"2022-11-21T12:01:24.419Z","closed_at":"2022-11-08T12:17:41.496Z","closed_by":{"id":12640917,"username":"jpcyiza","name":"Patrick Cyiza","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12640917/avatar.png","web_url":"https://gitlab.com/jpcyiza"},"labels":["Deliverable","Technical Writing","backend","devops::create","documentation","group::source code","maintenance::refactor","section::dev","type::maintenance"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":12640917,"username":"jpcyiza","name":"Patrick Cyiza","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12640917/avatar.png","web_url":"https://gitlab.com/jpcyiza"}],"author":{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"},"type":"ISSUE","assignee":{"id":12640917,"username":"jpcyiza","name":"Patrick Cyiza","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12640917/avatar.png","web_url":"https://gitlab.com/jpcyiza"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377927","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377927","notes":"https://gitlab.com/api/v4/projects/278964/issues/377927/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377927/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377927","relative":"#377927","full":"gitlab-org/gitlab#377927"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116872344,"iid":377926,"project_id":278964,"title":"Generalize PATCH endpoint of Protected Branches API","description":"Currently, we have `PATCH` endpoint in Protected Branches API https://docs.gitlab.com/ee/api/protected_branches.html#require-code-owner-approvals-for-a-single-branch that is very specific in its description and only allows updating `code_owner_approval_required` attribute. It should be more general and extendable in its nature.\n\nThe endpoint has a specific [implementation](https://gitlab.com/gitlab-org/gitlab/blob/0acba2ab515f263a86718583ffaa7932fbf11b3b/ee/lib/ee/api/protected_branches.rb#L29) and allows updating only `code_owner_approval_required` attribute.\n\nWithin this issue, we should\n\n1. Use `::ProtectedBranches::UpdateService` via [ApiService](https://gitlab.com/gitlab-org/gitlab/blob/0acba2ab515f263a86718583ffaa7932fbf11b3b/app/services/protected_branches/api_service.rb#L4) just like [CreateService](https://gitlab.com/gitlab-org/gitlab/blob/0acba2ab515f263a86718583ffaa7932fbf11b3b/app/services/protected_branches/api_service.rb#L6)\n2. Update the [descriptions](https://gitlab.com/gitlab-org/gitlab/blob/0acba2ab515f263a86718583ffaa7932fbf11b3b/ee/lib/ee/api/protected_branches.rb#L15) that this endpoint is for updating a protected branch, not only a code owner approval attribute\n3. Update the documentation to reflect the change: https://docs.gitlab.com/ee/api/protected_branches.html#require-code-owner-approvals-for-a-single-branch (can be done separately via a docs MR)\n\nIt's a prerequisite for https://gitlab.com/gitlab-org/gitlab/-/issues/20229","state":"closed","created_at":"2022-10-14T06:57:29.399Z","updated_at":"2022-11-21T12:01:24.485Z","closed_at":"2022-10-28T17:36:02.294Z","closed_by":{"id":12517375,"username":"ghinfey","name":"Gavin Hinfey","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12517375/avatar.png","web_url":"https://gitlab.com/ghinfey"},"labels":["Deliverable","backend","devops::create","documentation","group::source code","maintenance::refactor","section::dev","type::maintenance","workflow::in dev"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":12517375,"username":"ghinfey","name":"Gavin Hinfey","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12517375/avatar.png","web_url":"https://gitlab.com/ghinfey"}],"author":{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"},"type":"ISSUE","assignee":{"id":12517375,"username":"ghinfey","name":"Gavin Hinfey","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12517375/avatar.png","web_url":"https://gitlab.com/ghinfey"},"user_notes_count":7,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377926","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377926","notes":"https://gitlab.com/api/v4/projects/278964/issues/377926/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377926/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377926","relative":"#377926","full":"gitlab-org/gitlab#377926"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116871332,"iid":377921,"project_id":278964,"title":"Remote Development | Technical Direction and Server Runtime overlap","description":"## Problems to solve\n\nAt a high level, we aim to provide a solution that addresses several key customer requirements: \n\n1. Define and document an environment as code, stored in a repository for version control and collaboration\n2. Enable the browser-only, VS Code-based Web IDE to connect to a remote host and augment the experience by adding a full runtime environment\n3. Allow desktop IDEs to securely connect to the remote environments so developers can continue to use their preferred tooling\n4. Deliver an \"IDE agnostic\" architecture for flexibility (VS Code may be a first target, but we should be able to support JetBrains, vim, Theia, and others down the road)\n5. Flexibility to provision environments on multiple cloud platforms (AWS, GCP, Azure, etc.)\n6. Manage running, suspended, or pre-built environments in the GitLab UI\n\n## Why\n\nAs the ~\"Category:Remote Development\" development Spike has come to an end, we're at a crossroads with how we move forward technically. \n\nOur initial plan was to begin building an integrated solution using Che as our Backend, allowing us a quicker time to market for a mature user experience when compared to building a homegrown solution ourselves. \n\nOur choice has been challenged in three unique ways:\n\n1. We have noted that the Che Server was not written in Go but actually [Java](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/97449#note_1132966802).\n2. We have been challenged on the assumption that our choice of Che versus the concept of using the current toolset that exists in GitLab already such as the [Runners Fleet](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/97449#note_1131431854)\n3. We have seen a viable PoC demo from the Server Runtime SEG showcasing a custom control plane that acts as a homegrown [\"Che server\"](https://gitlab.com/gitlab-org/incubation-engineering/server-runtime/custom-server-runtime-playground) which could provide an alternative path forward. \n\n## Technical Considerations\n\n| Approach | Technologies | LOE | Pros | Cons |\n| ------ | ------ | ------ | ------ | ------ |\n|   Che Backend     |     Go, Java   |   3-6 Milestones     |    Offers most(if not all) of the requirements that we have, Community driven and with an [EPL 2.0 License](https://github.com/eclipse/che/blob/main/LICENSE), Makes use of the operator pattern which abstracts burden from users,   |    Lack of Java Expertise, [A reasonable amount of unknowns](https://gitlab.com/gitlab-org/gitlab/-/issues/377365),  Third party tool to be integrated, Possible lack of GitLab specific advantage  |\n|   Custom Control Plane      |    Go    |   X-X Milestones     |    Greenfield project with no technical debt, add support for devfile **and** other configuration formats, tighter GitLab integration quicker, possibly easier to iterate on for smaller wins   |    Time to market for a fully functioning MVC will be longer than adopting an already scaffolded Backend    |\n| Runner-Based Approach     |   Go, Rails     |   X-X Milestones     |    It's possible that we have all of the needed ingredients necessary to build a Remote Development environment.    |     This approach has been [explored](https://gitlab.com/groups/gitlab-org/-/epics/1619) already and was hit with many roadblocks. When revisited, it did not seem like we were any closer to removing the previous [issues](https://gitlab.com/gitlab-org/gitlab/-/issues/360864)   |\n\n\n## Server Runtime\n\nFollowing the fantastic demo by the SEG, it seems there is enough overlap between the Server Runtime SEG and the Create:Editor team to form a working relationship to push forward collaboratively rather than working in isolation on different approaches to the same user requirements. \n\nWhen compared to a similar situation inside Mobile DevOps, the Runner team is working on MacOS runners. There is a lot of overlap between these two projects and both teams require one another to be successful. In this situation, an ongoing relationship has been formed (using monthly sync meetings) so that they have been able to help each other out in different ways, and they have been able to bi-directionally influence product/technical choices.\n\n| Solution Aspect | SEG | Remote Development with Che | Remote Development with Custom Control Plane |\n| ------ | ------ | ------ | ------ | \n| Greenfield | :white_check_mark:  |  :x:  | :white_check_mark: |\n| Licensing Considerations | :x:  | :white_check_mark: | :x: |\n| Assumed Technical Debt | :x:  | :white_check_mark: | :x: |\n| Go | :white_check_mark:  | :x: | :white_check_mark: |\n| Quick GitLab Integration | :white_check_mark:  | :x: | :white_check_mark: |\n| Quick time to market | :x:   | :white_check_mark: | :x: |\n\n## Outcome\n\nThe Create:Editor team will pursue [Option 2](https://gitlab.com/gitlab-org/gitlab/-/issues/377921#note_1140165061) with the goal to leverage the GitLab Agent i.e. `Kubernetes with KAS / GitLab Agent for Kubernetes`. The Server Runtime SEG will continue to pursue a custom server with alternate networking and ingress solutions that supports provisioning bare VMs and doesn't require Kubernetes. There will be overlap in the two solutions but we will collaborate on limiting the duplicated effort and converging on a single, production-ready solution as one takes shape.","state":"closed","created_at":"2022-10-14T06:36:47.640Z","updated_at":"2022-11-28T00:33:36.387Z","closed_at":"2022-11-02T10:01:07.662Z","closed_by":{"id":1646689,"username":"oregand","name":"David O'Regan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1646689/avatar.png","web_url":"https://gitlab.com/oregand"},"labels":["Category:Remote Development","Deliverable","backend","devops::create","group::editor","missed-deliverable","missed:15.5","section::dev","type::ignore"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":1646689,"username":"oregand","name":"David O'Regan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1646689/avatar.png","web_url":"https://gitlab.com/oregand"}],"author":{"id":1646689,"username":"oregand","name":"David O'Regan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1646689/avatar.png","web_url":"https://gitlab.com/oregand"},"type":"ISSUE","assignee":{"id":1646689,"username":"oregand","name":"David O'Regan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1646689/avatar.png","web_url":"https://gitlab.com/oregand"},"user_notes_count":38,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377921","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377921","notes":"https://gitlab.com/api/v4/projects/278964/issues/377921/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377921/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377921","relative":"#377921","full":"gitlab-org/gitlab#377921"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8883,"epic":{"id":613102,"iid":8883,"title":"♻️ Remote Development | Meta Issues","url":"/groups/gitlab-org/-/epics/8883","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116855240,"iid":377899,"project_id":278964,"title":"Convert all specs to support vertical search navigation","description":"Currently many specs do not function with the vertical search navigation UI. Each spec should be assessed as to whether it needs to be converted or removed. \n\nThis is ~blocked by https://gitlab.com/gitlab-org/gitlab/-/merge_requests/97823\n\nThe following discussion from !97820 should be addressed:\n\n- [x] @terrichu started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/97820#note_1135244793): \n\n    \u003e **suggestion (non-blocking):** it is [strongly suggested to have automated tests for enabled/disabled state for feature flags](https://docs.gitlab.com/ee/development/feature_flags/#feature-flags-in-tests). Since this MR is rather large already (and I think the spec changes may be significant), I suggest we work on it in a follow up issue and mark that issue as blocking the feature flag release","state":"closed","created_at":"2022-10-13T20:23:41.624Z","updated_at":"2022-12-21T12:11:13.406Z","closed_at":"2022-11-21T15:43:48.212Z","closed_by":{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},"labels":["Category:Global Search","Deliverable","QA","devops::data_stores","feature::addition","group::global search","section::enablement","type::feature","workflow::in review"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},{"id":10776513,"username":"tbulva","name":"Tomas Bulva","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10776513/avatar.png","web_url":"https://gitlab.com/tbulva"}],"author":{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},"type":"ISSUE","assignee":{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377899","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":2,"blocking_issues_count":1,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377899","notes":"https://gitlab.com/api/v4/projects/278964/issues/377899/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377899/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377899","relative":"#377899","full":"gitlab-org/gitlab#377899"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116842390,"iid":377864,"project_id":278964,"title":"FE: Create \"Indviduals\" selection","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n- Users want to be able to select an individual user from a dropdown\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n--\u003e\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/367576)\n  - ![Phase 2](https://gitlab.com/groups/gitlab-org/-/uploads/116fd6c028cc181ff8b26acd5daa2414/Phase_2.png)\n\n## Implementation plan\n- [x] MR 1\n  - [x] ~frontend Retrieve the project's individual users in `.../security_orchestration/components/policy_editor/scan_result_policy/policy_action_builder_v2.vue`\n  - [x] ~frontend Replace the dropdown option of `Individual Users/Groups` with two options, `Individual Users` and \n`Groups` \n  - [x] ~frontend Modify the action message to include a dropdown that conditionally displays either the individual users or groups depending\n- [x] MR 2\n  - [x] ~frontend Retrieve the group's individual users/groups in `.../security_orchestration/components/policy_editor/scan_result_policy/policy_action_builder_v2.vue`\n\n## Verification steps\n1. Upload a ~\"GitLab Ultimate\" license\n2. Enable the `:scan_result_role_action` feature flag with the below command\n\n```bash\necho \"Feature.enable(:scan_result_role_action)\" | rails c\n```\n\n3. Navigate to a project/group =\u003e Security \u0026 Compliance =\u003e Policies =\u003e New policy =\u003e Scan Result Policy\n4. Verify a user can select either `Individual Users` in the `Actions` area and the dropdown for selecting the users displays the correct information","state":"closed","created_at":"2022-10-13T15:21:18.131Z","updated_at":"2022-12-21T12:09:32.663Z","closed_at":"2022-12-06T11:11:01.469Z","closed_by":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"labels":["Category:Security Policy Management","Deliverable","GitLab Ultimate","devops::govern","feature::addition","frontend","frontend-weight::5","group::security policies","missed-deliverable","missed:15.6","section::sec","type::feature","workflow::verification"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"}],"author":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"type":"ISSUE","assignee":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377864","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":6},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377864","notes":"https://gitlab.com/api/v4/projects/278964/issues/377864/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377864/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377864","relative":"#377864","full":"gitlab-org/gitlab#377864"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8018,"epic":{"id":517990,"iid":8018,"title":"Support Role Based Approval Action for Scan Result Policies","url":"/groups/gitlab-org/-/epics/8018","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":116837779,"iid":377854,"project_id":278964,"title":"Create step-list for pre-scan verification flow","description":"Implement list component according to [specified design](https://www.figma.com/file/o6NoqgLnxv0KnK2y9Qum51/DAST-Configuration-UI?node-id=2740%3A167120)\n\nCan be places inside `pre_scan_verification_sidebar` component","state":"closed","created_at":"2022-10-13T14:38:31.141Z","updated_at":"2022-11-14T11:51:56.628Z","closed_at":"2022-11-08T00:07:56.374Z","closed_by":{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"},"labels":["Category:DAST","UX","devops::secure","frontend","group::dynamic analysis","missed:15.5","on-demand scan","section::sec","type::feature","workflow::in dev"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"}],"author":{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"},"type":"ISSUE","assignee":{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377854","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377854","notes":"https://gitlab.com/api/v4/projects/278964/issues/377854/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377854/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377854","relative":"#377854","full":"gitlab-org/gitlab#377854"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7069,"epic":{"id":380891,"iid":7069,"title":"DAST Pre-scan verification","url":"/groups/gitlab-org/-/epics/7069","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":116833169,"iid":377845,"project_id":278964,"title":"Update child epic endpoints to include cross-group epics","description":"## Summary\n\nIn https://gitlab.com/gitlab-org/gitlab/-/issues/373709 a new finder is going to be created to include cross-group child epics so we need to update API endpoints that were relaying on `EpicsFinder` to add and list children.\n\nThese include:\n\n- [REST endpoints](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/lib/api/epic_links.rb)\n- [Internal endpoints](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/controllers/groups/epics/epic_links_controller.rb)\n\n## Docs Support\n\nFor issues requiring an update to GitLab docs, please note that this is part of the definition of done for this issue. Please create a separate MR for the docs update related to the MR for the actual change to ensure code reviews are not blocked by TW reviews.\n\n- [ ] This issue requires an update to GitLab docs\n- [x] This issue does not require an update to GitLab docs","state":"closed","created_at":"2022-10-13T13:36:51.553Z","updated_at":"2022-12-06T18:32:00.619Z","closed_at":"2022-11-15T11:51:44.413Z","closed_by":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"labels":["Deliverable","Track Health Status","backend","devops::plan","epics","group::product planning","section::dev","type::feature","workflow::verification"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377845","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":1},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377845","notes":"https://gitlab.com/api/v4/projects/278964/issues/377845/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377845/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377845","relative":"#377845","full":"gitlab-org/gitlab#377845"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8502,"epic":{"id":577585,"iid":8502,"title":"Epics can have child epics from different group hierarchies","url":"/groups/gitlab-org/-/epics/8502","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":"on_track"},{"id":116823598,"iid":377823,"project_id":278964,"title":"Investigate Better display of tags and branches in commit view","description":"Placeholder issue for investigation ~spike for https://gitlab.com/gitlab-org/gitlab/-/issues/325871+ as a %\"15.5\" ~Deliverable","state":"closed","created_at":"2022-10-13T11:16:04.893Z","updated_at":"2022-10-21T12:01:12.659Z","closed_at":"2022-10-13T11:17:10.670Z","closed_by":{"id":4391348,"username":"sean_carroll","name":"Sean Carroll","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4391348/avatar.png","web_url":"https://gitlab.com/sean_carroll"},"labels":["Category:Source Code Management","Deliverable","SUS::FY22 Q1 - Incomplete","Technical Writing","UX","backend","customer","devops::create","documentation","group::source code","quad-planning::complete-action","repository","section::dev","spike","type::feature","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"}],"author":{"id":4391348,"username":"sean_carroll","name":"Sean Carroll","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4391348/avatar.png","web_url":"https://gitlab.com/sean_carroll"},"type":"ISSUE","assignee":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377823","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377823","notes":"https://gitlab.com/api/v4/projects/278964/issues/377823/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377823/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377823","relative":"#377823","full":"gitlab-org/gitlab#377823"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116819636,"iid":377815,"project_id":278964,"title":"Suggested reviewers dropdown hovered question mark helper","description":"## Problem to solve\n\nAdd a question mark helper next to the Suggestion section header on the dropdown.\n\n![No_reviewers_-_popover](/uploads/1bd2f617b36f6811a563402ffc5837b2/No_reviewers_-_popover.png)","state":"closed","created_at":"2022-10-13T10:12:05.502Z","updated_at":"2022-11-18T04:37:49.564Z","closed_at":"2022-11-18T04:37:49.495Z","closed_by":{"id":11349374,"username":"tle_gitlab","name":"Tan Le","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4b00201b048762e086245e9c3c5b466?s=80\u0026d=identicon","web_url":"https://gitlab.com/tle_gitlab"},"labels":["ai assisted::reviewer-recommender","devops::modelops","feature::addition","frontend","group::ai assisted","section::data-science","type::feature"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11349374,"username":"tle_gitlab","name":"Tan Le","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4b00201b048762e086245e9c3c5b466?s=80\u0026d=identicon","web_url":"https://gitlab.com/tle_gitlab"}],"author":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"type":"ISSUE","assignee":{"id":11349374,"username":"tle_gitlab","name":"Tan Le","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4b00201b048762e086245e9c3c5b466?s=80\u0026d=identicon","web_url":"https://gitlab.com/tle_gitlab"},"user_notes_count":10,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377815","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377815","notes":"https://gitlab.com/api/v4/projects/278964/issues/377815/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377815/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377815","relative":"#377815","full":"gitlab-org/gitlab#377815"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116816329,"iid":377810,"project_id":278964,"title":"Chaining multiple redirects allow an attacker to exfiltrate the access token of OAuth providers","description":"**[HackerOne report #1725190](https://hackerone.com/reports/1725190)** by `ryotak` on 2022-10-07, assigned to @cmaxim:\n\n[Report](#report) | [Attachments](#attachments) | [How To Reproduce](#how-to-reproduce)\n\n## Report\n\n#####  Summary  \nDue to the incomplete fix for [CVE-2022-2250](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-2250), an attacker is still able to redirect users to redirect to the arbitrary domain.  \nThis can be used to exfiltrate the access tokens for third-party login providers.\n\n#####  Description\n\n######  Open redirect  \n[The patch for CVE-2022-2250](https://gitlab.com/gitlab-org/gitlab/-/commit/178947a12b763e54c87b93edde5fc596abd03ff3) fixed the vulnerability by removing duplicated slashes from the decoded path.\n\n[`lib/gitlab/jira/dvcs.rb` line 41-42](https://gitlab.com/gitlab-org/gitlab/-/blob/d78a491f7503537c48532f8e7c086464f64c7698/lib/gitlab/jira/dvcs.rb#L41-42)  \n``` ruby  \n          # Replace multiple slashes with single ones to make sure the redirect stays on the same host  \n          project.gsub(ENCODED_SLASH, SLASH).gsub(%r{\\/{2,}}, '/')  \n```\n\nHowever, due to the fact some routes append a slash in front of the decoded project path, an attacker is still able to redirect users into the unintended domain.\n\n[`config/routes/project.rb` line 679-695](https://gitlab.com/gitlab-org/gitlab/-/blob/d78a491f7503537c48532f8e7c086464f64c7698/config/routes/project.rb#L679-695)  \n``` ruby  \n    get 'commit/:id', constraints: { id: /\\h{7,40}/ }, to: redirect { |params, req|  \n      project_full_path = ::Gitlab::Jira::Dvcs.restore_full_path(  \n        namespace: params[:namespace_id],  \n        project: params[:project_id]  \n      )\n\n      \"/#{project_full_path}/commit/#{params[:id]}\"  \n    }\n\n    get 'tree/*id', as: nil, to: redirect { |params, req|  \n      project_full_path = ::Gitlab::Jira::Dvcs.restore_full_path(  \n        namespace: params[:namespace_id],  \n        project: params[:project_id]  \n      )\n\n      \"/#{project_full_path}/-/tree/#{params[:id]}\"  \n    }  \n```\n\nFor example, the following URL redirects users to https://example.com/-/tree/a: https://gitlab.com/gitlab-org/[@]example.com/tree/a\n\n######  Same-site redirect  \nWhile this is an interesting bug, the open redirect itself is a pretty low severity bug, and I had to find another redirect to make this vulnerability severe.\n\nAfter investigating the routes of GitLab for a bit, I found an endpoint that can be used to redirect users to the same domain.\n\n[`config/routes/repository_deprecated.rb` line 20-22](https://gitlab.com/gitlab-org/gitlab/-/blob/d78a491f7503537c48532f8e7c086464f64c7698/config/routes/repository_deprecated.rb#L20-22)  \n``` ruby  \n  get '/refs/:id/logs_tree/*path',  \n    to: redirect('%{namespace_id}/%{project_id}/-/refs/%{id}/logs_tree/%{path}'),  \n    constraints: { id: /.*/, path: /[^\\0]*/ }  \n```\n\nSince it's not validating the `*path` of the request, the following URL will redirect users to `https://gitlab.com/ry0tak2/test/-/refs/aaaa/logs_tree/../../../../../`, which is then parsed as `https://gitlab.com/ry0tak2/` by the browser: https://gitlab.com/ry0tak2/test/refs/aaaa/logs_tree/..%2F..%2F..%2F..%2F..%2F\n\n######  Storing the payload into the redirect URL of the login page  \nWhile these redirects can't be used to exfiltrate access tokens directly, another redirect is possible from the `/users/sign_in` endpoint.\n\nAs the `/refs/:id/logs_tree/*path` redirects users **only if the repository exists**, it's possible to control whether redirect users or not.  \nBy using this behavior, it's possible to store the open redirect payload, which only works after logging into GitLab, into the return URL of the login page.\n\n######  Passing the access token as a URL fragment  \nSince these redirects will remove the query parameter, we need to find a way to use the URL fragment.  \nLuckily, most OAuth providers support the `response_type=token` during the OAuth flow, which will pass the access tokens over the URL fragments.\n\nBy combining these things, it's now possible to send access tokens of OAuth providers to unintended websites.\n\n#####  Steps to reproduce  \n(These steps to reproduce assumes that you're using gitlab.com. If you're using a self-hosted instance, you may need to change the domain.)\n\n######  Prepare accounts  \n1. Prepare 2 GitLab accounts. (One is the attacker, and the other is the victim.)  \n2. Prepare a Google account.  \n3. In the victim's account, connect the Google accounts from https://gitlab.com/-/profile/account.  \n4. In the attacker's account, create a personal access token with an `api` scope from https://gitlab.com/-/profile/personal_access_tokens.\n\n######  Prepare the script  \n1. Download ![poc.py](https://h1.sec.gitlab.net/a/968d8b47-62e4-4dcb-b794-4fa965f9e269/poc.py)  \n2. Open it with the text editor, and replace `REPLACE_GITLAB_PAT_HERE` with the personal access token that you created in step 4.  \n3. Install the `requests` library if you haven't installed it already: `pip install requests`  \n4. Run it: `python3 poc.py`\n\n######  Reproduce  \n(These steps depend on the internet speed, if your network takes more than 3 seconds to load GitLab, please edit `SLEEP_SECONDS` of `poc.py`.)\n\n1. Before starting, make sure you're logged into only one Google account, which you prepared in step 2 of the `Prepare accounts` section.  \n2. Open http://localhost:8080  \n3. Click `Logout from GitLab` if you're currently logged into GitLab.  \n4. Click `Sign in with GitLab`.  \n5. Once the login page loads, log in to your GitLab account with email and password.  \n6. Confirm that the access token of a Google account has been sent to example.com.\n\n#####  Explanation of steps to reproduce  \nThe poc.py do the following things under the hood:  \n1. Once the user clicked the `Sign in with GitLab`, open Google's OAuth endpoint in the new window. And Google will redirect users to `https://gitlab.com/users/auth/google_oauth/callback`, and then it will redirect users to `https://gitlab.com/user/sign_in` with the access token in the URL fragment.  \n2. At the same time, `poc.py` will redirect the current window to `https://gitlab.com/GITLAB_USERNAME/RANDOM_REPO_NAME/refs/aaaa/logs_tree/..%2F..%2F..%2F..%2F..%2F@example.com/tree/a`. Since the user isn't logged in, and the repository doesn't exist, GitLab will store the redirect URL into the session as-is.  \n3. Once step 2 is completed, `poc.py` will send a request to GitLab API and create a repository named `RANDOM_REPO_NAME`.  \n4. After step 3, when the user logs into the GitLab, it'll automatically redirect users to `https://gitlab.com/GITLAB_USERNAME/RANDOM_REPO_NAME/refs/aaaa/logs_tree/..%2F..%2F..%2F..%2F..%2F@example.com/tree/a`, and this endpoint will redirect users to `https://gitlab.com/GITLAB_USERNAME/RANDOM_REPO_NAME/-/refs/aaaa/logs_tree/../../../../../[@]example.com/tree/a`, which will be parsed as the following by the browser: `https://gitlab.com/GITLAB_USERNAME/[@]example.com/tree/a`.  \n5. Since GitLab has an open redirect vulnerability, the user will be redirected to example.com, along with the access token.\n\n#####  What is the current *bug* behavior?\n\nThe user is redirected to the unintended domain after the login, along with the access token of the Google account.\n\n#####  What is the expected *correct* behavior?\n\nThe user shouldn't be redirected to the unintended domain.\n\n#####  Output of checks\n\nThis bug happens on GitLab.com\n\n######  Results of GitLab environment info  \n```  \nSystem information  \nSystem:         Ubuntu 20.04  \nProxy:          no  \nCurrent User:   git  \nUsing RVM:      no  \nRuby Version:   2.7.5p203  \nGem Version:    3.1.6  \nBundler Version:2.3.15  \nRake Version:   13.0.6  \nRedis Version:  6.2.7  \nSidekiq Version:6.4.2  \nGo Version:     unknown\n\nGitLab information  \nVersion:        15.4.1-ee  \nRevision:       7b2ed8f038f  \nDirectory:      /opt/gitlab/embedded/service/gitlab-rails  \nDB Adapter:     PostgreSQL  \nDB Version:     13.6  \nURL:            https://gl.ryotak.me  \nHTTP Clone URL: https://gl.ryotak.me/some-group/some-project.git  \nSSH Clone URL:  git@gl.ryotak.me:some-group/some-project.git  \nElasticsearch:  no  \nGeo:            no  \nUsing LDAP:     no  \nUsing Omniauth: yes  \nOmniauth Providers:\n\nGitLab Shell  \nVersion:        14.10.0  \nRepository storage paths:  \n- default:      /var/opt/gitlab/git-data/repositories  \nGitLab Shell path:              /opt/gitlab/embedded/service/gitlab-shell  \n```\n\n#####  Impact\n\nAn attacker can exfiltrate the access token of OAuth providers with user interactions.  \nSince these access tokens are used to identify the user, an attacker can take over the account by using it.\n\n## Attachments\n\n**Warning:** Attachments received through HackerOne, please exercise caution!\n\n* [poc.py](https://h1.sec.gitlab.net/a/968d8b47-62e4-4dcb-b794-4fa965f9e269/poc.py)\n\n## How To Reproduce\n\nPlease add [reproducibility information] to this section:\n\n1.\n1.\n1.\n\n[reproducibility information]: https://about.gitlab.com/handbook/engineering/security/#reproducibility-on-security-issues","state":"closed","created_at":"2022-10-13T09:26:31.178Z","updated_at":"2022-12-06T12:16:13.594Z","closed_at":"2022-11-02T20:12:58.585Z","closed_by":{"id":4992072,"username":"dcouture","name":"Dominic Couture","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4992072/avatar.png","web_url":"https://gitlab.com/dcouture"},"labels":["Category:Integrations","Deliverable","HackerOne","Weakness::CWE-601","backend","bug::vulnerability","devops::manage","group::integrations","priority::3","section::dev","security","severity::3","type::bug","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-12-26","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377810","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377810","notes":"https://gitlab.com/api/v4/projects/278964/issues/377810/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377810/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377810","relative":"#377810","full":"gitlab-org/gitlab#377810"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116816081,"iid":377809,"project_id":278964,"title":"Static Integration DSL: app/models/integrations/harbor.rb","description":"## Description\n\nConvert app/models/integrations/harbor.rb to use the static field DSL introduced.","state":"closed","created_at":"2022-10-13T09:22:28.665Z","updated_at":"2022-10-28T11:24:59.971Z","closed_at":"2022-10-17T10:35:03.665Z","closed_by":{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"},"labels":["Category:Integrations","backend","devops::manage","group::integrations","maintenance::refactor","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"}],"author":{"id":1315742,"username":"arturoherrero","name":"Arturo Herrero","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1315742/avatar.png","web_url":"https://gitlab.com/arturoherrero"},"type":"ISSUE","assignee":{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377809","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377809","notes":"https://gitlab.com/api/v4/projects/278964/issues/377809/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377809/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377809","relative":"#377809","full":"gitlab-org/gitlab#377809"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7652,"epic":{"id":454800,"iid":7652,"title":"Integrations Static DSL","url":"/groups/gitlab-org/-/epics/7652","group_id":9970},"iteration":null,"health_status":null},{"id":116816041,"iid":377808,"project_id":278964,"title":"Page load performance CODEOWNERS","description":"### Summary\nThis is the follow-up of [361004](https://gitlab.com/gitlab-org/gitlab/-/issues/361004)\n\nThe UX is already improved, the purpose of this issue is to improve page load.\nThe idea is to change the `getCodeOwnersInfo` endpoint so that it can accept LIMIT parameter.\n\nFor example we request only first 5 codeowners and when use press show more - we request the rest.\n\nSo the endpoint should accept the the LIMIT (and possibly START?) parameter.\n\nAs well codeowners total amount should be added to response - so that we can render `and XXX more` part\n\n===\u003e Beneath is the copy of initial issue\nToo many members from the CODEOWNERS file are displayed on file content pages which results in extremely long loading times.\n\nThis is for a repository where the intended workflow is to let anyone approve the creation of new files, but the modification of existing files is subject to approval. Since the approval is set to follow code owners, everyone needs to be added as a global rule to allow\n\n### Steps to reproduce\n\n1. Create a CODEOWNERS file that references a group containing a lot of users (100-1000+) for all files in the repo\n```\n* @everyone\n* some/specific/file @someone @someone-else\n```\n2. Try to load the content of any repo file covered by the first default rule in the browser.\n\n### Example Project\n\nNo access to a group with a large amount of users to test on public gitlab.com\n\n### What is the current *bug* behavior?\n\nBrowsing pages for files and folders becomes extremely slow and difficult as thousands of users are displayed above file and folder content\n\n### What is the expected *correct* behavior?\n\nOnly some amount of users would be displayed to reduce the load times and impact on the page usability\n\n### Relevant logs and/or screenshots\n![codeowners](/uploads/871a3bc0c8ed93cf4201e904b017c394/codeowners.png)\n\n### Output of checks\n\nThis bug happens on a internally-hosted version of Gitlab EE\n\n### Proposal\n\n#### Frontend \n\nPlace a \"show all\" button to expand to the full list on-demand. See [this comment](https://gitlab.com/gitlab-org/gitlab/-/issues/361004#note_1092864377) for UX mockup.\n\n* show 5 names maximum and afterwards we would show a tertiary button that says `# more` (where # = total count of members - 5 visible members).\n* When expanded the button label says \"show less\" to collapse the list back to 5 visible members.\n\n#### Backend\n\nExtend the GraphQL `getCodeOwnersInfo` query with the ability to paginate results.","state":"closed","created_at":"2022-10-13T09:22:00.558Z","updated_at":"2022-11-09T08:53:12.342Z","closed_at":"2022-11-09T08:53:12.311Z","closed_by":{"id":11703928,"username":"nradina","name":"Nataliia Radina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11703928/avatar.png","web_url":"https://gitlab.com/nradina"},"labels":["Category:Source Code Management","[deprecated] Accepting merge requests","backend","backend-weight::3","customer","devops::create","feature::enhancement","frontend","group::source code","priority::2","section::dev","severity::2","type::feature","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":11703928,"username":"nradina","name":"Nataliia Radina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11703928/avatar.png","web_url":"https://gitlab.com/nradina"},"type":"ISSUE","assignee":null,"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377808","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377808","notes":"https://gitlab.com/api/v4/projects/278964/issues/377808/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377808/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377808","relative":"#377808","full":"gitlab-org/gitlab#377808"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116807947,"iid":377802,"project_id":278964,"title":"Release names visible in public projects despite release set as project members only","description":"**[HackerOne report #1725841](https://hackerone.com/reports/1725841)** by `ashish_r_padelkar` on 2022-10-07, assigned to @cmaxim:\n\n[Report](#report) | [Attachments](#attachments) | [How To Reproduce](#how-to-reproduce)\n\n## Report\n\n#####  Summary\n\nHello,\n\nRelease can be restricted for `Only Project Members` in project settings. This should ensure that no release information is visible outside team members.\n\nHowever, anyone can see release names in public projects through tags page at `https://gitlab.com/\u003cNameSpace\u003e/\u003cProjectName\u003e/-/tags` even when releases are set as project members only.\n\n#####  Steps to reproduce\n\n1.As a project owner, set your project as public with `Releases`  as `Only Project Members` at `https://gitlab.com/\u003cNameSpace\u003e/\u003cProjectName\u003e/edit#js-general-project-settings`.\n\n![Screen_Shot_2022-10-07_at_9.05.30_PM.png](https://h1.sec.gitlab.net/a/86cd6207-487e-4edd-926f-96a4fe95167c/Screen_Shot_2022-10-07_at_9.05.30_PM.png)\n\n2.Now create a Release at `https://gitlab.com/\u003cNameSpace\u003e/\u003cProjectName\u003e/-/releases`.\n\n3.Access the `https://gitlab.com/\u003cNameSpace\u003e/\u003cProjectName\u003e/-/releases` without authentication but you will get 404 as Release is only visible for Team members.\n\n4.Now access tag page at `https://gitlab.com/\u003cNameSpace\u003e/\u003cProjectName\u003e/-/tags` and you should see Release associated with the tags like below.\n\n![Screen_Shot_2022-10-07_at_9.13.18_PM.png](https://h1.sec.gitlab.net/a/337877b1-bce4-45a2-b7b6-cef7b8ccb301/Screen_Shot_2022-10-07_at_9.13.18_PM.png)\n\n5.As repository is public, you are able to see tag page and tag page discloses the release names. This requires proper permission check.\n\n\n\n#####  Examples\n\nYou can see `https://gitlab.com/groupnew321/projectbugs/-/tags` release name visible for tag. Clicking on release will give you 404 page.\n\n#####  What is the current *bug* behavior?\n\nRelease names are disclosed in tag names despite release set as project members only.\n\n#####  What is the expected *correct* behavior?\n\nRelease names should not be visible for unauthenticated users when they are set as only project members\n\n\n\n#####  Output of checks\n\nThis bug happens on GitLab.com\n\nRegards,  \nAshish\n\n####  Impact\n\nRelease names visible in public projects despite release set as project members only\n\n## Attachments\n\n**Warning:** Attachments received through HackerOne, please exercise caution!\n\n* [Screen_Shot_2022-10-07_at_9.13.18_PM.png](https://h1.sec.gitlab.net/a/337877b1-bce4-45a2-b7b6-cef7b8ccb301/Screen_Shot_2022-10-07_at_9.13.18_PM.png)\n* [Screen_Shot_2022-10-07_at_9.05.30_PM.png](https://h1.sec.gitlab.net/a/86cd6207-487e-4edd-926f-96a4fe95167c/Screen_Shot_2022-10-07_at_9.05.30_PM.png)\n\n### Proposal\n\nAdd the proper permission check to the [tag partial](https://gitlab.com/gitlab-org/gitlab/blob/a0c1d8212d314fe8de61c4b3117ea887ed031ae7/app/views/projects/tags/_tag.html.haml#L21-21) which is rendered server side.\n\n[reproducibility information]: https://about.gitlab.com/handbook/engineering/security/#reproducibility-on-security-issues","state":"closed","created_at":"2022-10-13T07:54:23.575Z","updated_at":"2023-01-03T11:59:38.451Z","closed_at":"2022-12-01T19:42:18.801Z","closed_by":{"id":4373269,"username":"ali-gitlab","name":"Alishan Ladhani","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4373269/avatar.png","web_url":"https://gitlab.com/ali-gitlab"},"labels":["Category:Release Orchestration","Deliverable","HackerOne","Release::P1","Weakness::CWE-284","[deprecated] Accepting merge requests","backend","backend-weight::1","bug::vulnerability","devops::release","group::release","priority::3","section::ops","security","severity::3","type::bug","workflow::verification"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":4373269,"username":"ali-gitlab","name":"Alishan Ladhani","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4373269/avatar.png","web_url":"https://gitlab.com/ali-gitlab"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":4373269,"username":"ali-gitlab","name":"Alishan Ladhani","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4373269/avatar.png","web_url":"https://gitlab.com/ali-gitlab"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-12-26","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377802","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377802","notes":"https://gitlab.com/api/v4/projects/278964/issues/377802/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377802/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377802","relative":"#377802","full":"gitlab-org/gitlab#377802"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116806829,"iid":377799,"project_id":278964,"title":"Maintainer can leak Datadog API key by changing integration URL","description":"**[HackerOne report #1724402](https://hackerone.com/reports/1724402)** by `ryotak` on 2022-10-06, assigned to @cmaxim:\n\n[Report](#report) | [Attachments](#attachments) | [How To Reproduce](#how-to-reproduce)\n\n## Report\n\n#####  Summary  \nDue to the incomplete fixes for [CVE-2022-2497](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-2497) and [CVE-2022-2882](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-2882), a malicious maintainer can still leak the API key of Datadog by changing integration URL.\n\n#####  Description  \nIn [the patch](https://gitlab.com/gitlab-org/gitlab/-/commit/7b3ca281bce8cf8006852bc8adf303646706d543) for [CVE-2022-2882](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-2882), some fields of `Github` integration model was modified, and `exposes_secrets: true` was added to `repository_url` field.  \nThis option enables resetting of secrets once the field is updated, which makes exfiltrating of access tokens impossible.\n\n[`ee/app/models/integrations/github.rb` line 22-26](https://gitlab.com/gitlab-org/gitlab/-/blob/94a18e02afaa493983087287607632538a200fd3/ee/app/models/integrations/github.rb#L22-26)  \n``` ruby  \n    field :repository_url,  \n      title: -\u003e { s_('GithubIntegration|Repository URL') },  \n      required: true,  \n      exposes_secrets: true,  \n      placeholder: 'https://github.com/owner/repository'  \n```\n\nHowever, there are some models that are missing `exposes_secrets` option.  \nWhile most of these models are using their own method to reset the secrets (e.g. `before_validation :reset_passwowrd`), there is one exception: Datadog\n\n[`app/models/integrations/jenkins.rb` line 30-44](https://gitlab.com/gitlab-org/gitlab/-/blob/94a18e02afaa493983087287607632538a200fd3/app/models/integrations/jenkins.rb#L30-44)  \n``` ruby  \n    before_validation :reset_password  \n    [...]  \n    def reset_password  \n      # don't reset the password if a new one is provided  \n      if (jenkins_url_changed? || username.blank?) \u0026\u0026 !password_touched?  \n        self.password = nil  \n      end  \n    end  \n```\n\nIn Datadog model, there are no validations for exposing the secrets, which allows a malicious maintainer to leak API keys by changing integration URL.\n\n[`app/models/integrations/datadog.rb` line 25](https://gitlab.com/gitlab-org/gitlab/-/blob/94a18e02afaa493983087287607632538a200fd3/app/models/integrations/datadog.rb#L25)  \n``` ruby  \n      validates :api_url, public_url: { allow_blank: true }  \n```\n\n#####  Steps to reproduce\n\n(These steps to reproduce assumes that you're using gitlab.com. If you're using a self-hosted instance, you may need to prepare a GitLab runner.)\n\n1. Prepare 2 GitLab accounts. (Called `account A` and `account B` below)  \n2. Create a project with account A and upload ![.gitlab-ci.yml](https://h1.sec.gitlab.net/a/d136abe7-486e-48d2-b89e-5004dcd99f58/.gitlab-ci.yml) to the repository.  \n3. In `Settings -\u003e Integrations -\u003e Datadog`, enable a Datadog integration and enter a new API key. (This API key can be a random string)  \n4. In `Project information -\u003e Members`, invite account B with the `Maintainer` permission.  \n5. Login to account B, and open a project created in step 2.  \n6. In `Settings -\u003e Integrations -\u003e Datadog`, fill the `API URL` to a server that you can read the request log. (I'd recommend https://requestbin.com/ if you need a server.)  \n7. Click `Test settings`.  \n8. Confirm the API key of Datadog is sent to the server.\n\nIf you have any troubles with these steps to reproduce, please check the video attached to this report.\n\n#####  Examples  \nExample repository that demonstrated the vulnerability: https://gitlab.com/Ry0taK/maintainer-integration-leak  \nAs this repository is private, please let me know if you need to access this repository.\n\n#####  What is the current *bug* behavior?  \nAccess tokens for Datadog integration are keep remaining even after changing the API URLs.\n\n#####  What is the expected *correct* behavior?  \nAccess tokens for Datadog integration should be cleared once API URLs are changed.\n\n#####  Suggested fix  \nAdd `exposes_secrets: true` to  `api_url` of Datadog integration model.\n\n#####  Relevant logs and/or screenshots\n\n\n\n#####  Output of checks\n\n\n######  Results of GitLab environment info\n\n```  \nSystem information  \nSystem:         Ubuntu 20.04  \nProxy:          no  \nCurrent User:   git  \nUsing RVM:      no  \nRuby Version:   2.7.5p203  \nGem Version:    3.1.6  \nBundler Version:2.3.15  \nRake Version:   13.0.6  \nRedis Version:  6.2.7  \nSidekiq Version:6.4.2  \nGo Version:     unknown\n\nGitLab information  \nVersion:        15.4.1-ee  \nRevision:       7b2ed8f038f  \nDirectory:      /opt/gitlab/embedded/service/gitlab-rails  \nDB Adapter:     PostgreSQL  \nDB Version:     13.6  \nURL:            https://gl.ryotak.me  \nHTTP Clone URL: https://gl.ryotak.me/some-group/some-project.git  \nSSH Clone URL:  git@gl.ryotak.me:some-group/some-project.git  \nElasticsearch:  no  \nGeo:            no  \nUsing LDAP:     no  \nUsing Omniauth: yes  \nOmniauth Providers:\n\nGitLab Shell  \nVersion:        14.10.0  \nRepository storage paths:  \n- default:      /var/opt/gitlab/git-data/repositories  \nGitLab Shell path:              /opt/gitlab/embedded/service/gitlab-shell  \n```\n\n#####  Impact\n\nA malicious maintainer can leak Datadog API key, and modify/exfiltrate information on Datadog.\n\n## Attachments\n\n**Warning:** Attachments received through HackerOne, please exercise caution!\n\n\n* [.gitlab-ci.yml](https://h1.sec.gitlab.net/a/d136abe7-486e-48d2-b89e-5004dcd99f58/.gitlab-ci.yml)\n\n## How To Reproduce\n\nPlease add [reproducibility information] to this section:\n\n1.\n1.\n1.\n\n[reproducibility information]: https://about.gitlab.com/handbook/engineering/security/#reproducibility-on-security-issues","state":"closed","created_at":"2022-10-13T07:35:06.950Z","updated_at":"2022-12-06T12:18:46.121Z","closed_at":"2022-11-02T20:12:56.446Z","closed_by":{"id":4992072,"username":"dcouture","name":"Dominic Couture","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4992072/avatar.png","web_url":"https://gitlab.com/dcouture"},"labels":["Category:Integrations","HackerOne","Stretch","Weakness::CWE-657","backend","bug::vulnerability","devops::manage","group::integrations","priority::3","section::dev","security","severity::3","type::bug","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"},"user_notes_count":32,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-12-26","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377799","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377799","notes":"https://gitlab.com/api/v4/projects/278964/issues/377799/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377799/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377799","relative":"#377799","full":"gitlab-org/gitlab#377799"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116802321,"iid":377789,"project_id":278964,"title":"[Feature flag] Rollout of `ci_run_bridge_for_pipeline_duration_calculation`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [the feature](https://gitlab.com/gitlab-org/gitlab/-/issues/356759) on production,\nthat is currently behind the `ci_run_bridge_for_pipeline_duration_calculation` feature flag.\n\n## Owners\n\n- Team: Pipeline Execution\n- Most appropriate slack channel to reach out to: `#g_pipeline_execution`\n- Best individual to reach out to: Tianwen Chen @tianwenchen \n- PM: James Heimbuck @jheimbuck_gl  \n\n## Expectations\n\n### What are we expecting to happen?\n\nThis feature flag is to help rolling out a fix to mark a bridge as the `running` status when it creates and executes the downstream pipeline.\n\n### When is the feature viable?\n\nAs soon as the fix is deployed.\n\n### What might happen if this goes wrong?\n\n- Turn off this feature\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n_Consider mentioning checks for 5xx errors or other anomalies like an increase in redirects \n(302 HTTP response status)_\n\n### What can we check for monitoring production after rollouts?\n\n_Consider adding links to check for Sentry errors, Production logs for 5xx, 302s, etc._\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set ci_run_bridge_for_pipeline_duration_calculation true --dev --staging --staging-ref`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n      The best environment to validate the feature in is [staging-canary](https://about.gitlab.com/handbook/engineering/infrastructure/environments/#staging-canary)\n      as this is the first environment deployed to. Note you will need to make sure you are configured to use canary as outlined [here](https://about.gitlab.com/handbook/engineering/infrastructure/environments/canary-stage/)\n      when accessing the staging environment in order to make sure you are testing appropriately.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [x] `/chatops run feature set --project=gitlab-org/gitlab,gitlab-org/gitlab-foss,gitlab-com/www-gitlab-com ci_run_bridge_for_pipeline_duration_calculation true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org,gitlab-com ci_run_bridge_for_pipeline_duration_calculation true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e ci_run_bridge_for_pipeline_duration_calculation true`\n- [x] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [x] Set a milestone to the rollout issue to signal for enabling and removing the feature flag when it is stable.\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [x] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com. \n- [x] Ensure that any breaking changes have been announced following the [release post process](https://about.gitlab.com/handbook/marketing/blog/release-posts/#deprecations-removals-and-breaking-changes) to ensure GitLab customers are aware.\n- [x] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set ci_run_bridge_for_pipeline_duration_calculation \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [x] `/chatops run feature set ci_run_bridge_for_pipeline_duration_calculation \u003crollout-percentage\u003e --random`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set ci_run_bridge_for_pipeline_duration_calculation true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Consider cleaning up the feature flag from all environments by running these chatops command in `#production` channel. Otherwise these settings may override the default enabled.\n    - [ ] `/chatops run feature delete ci_run_bridge_for_pipeline_duration_calculation --dev --staging --staging-ref --production`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can [create a separate issue](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `ci_run_bridge_for_pipeline_duration_calculation`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\nYou can either [create a follow-up issue for Feature Flag Cleanup](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) or use the checklist below in this same issue.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `ci_run_bridge_for_pipeline_duration_calculation` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the cleanup MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [x] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [x] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] If not already done, clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete ci_run_bridge_for_pipeline_duration_calculation --dev --staging --staging-ref --production`\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set ci_run_bridge_for_pipeline_duration_calculation false\n```\n\n\u003c!-- A feature flag can also be used for rolling out a bug fix or a maintenance work.\nIn this scenario, labels must be related to it, for example; ~\"type::feature\", ~\"type::bug\" or ~\"type::maintenance\".\nPlease use /copy_metadata to copy the labels from the issue you're rolling out. --\u003e","state":"closed","created_at":"2022-10-13T06:19:21.036Z","updated_at":"2023-01-06T20:31:34.506Z","closed_at":"2022-12-29T06:04:31.230Z","closed_by":{"id":12411397,"username":"tianwenchen","name":"Tianwen Chen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4219e592c672f4bd062add405865f9aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/tianwenchen"},"labels":["Category:Continuous Integration","Track Health Status","backend","devops::verify","feature flag","group::pipeline execution","missed:15.5","section::ops","type::maintenance","workflow::production"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":12411397,"username":"tianwenchen","name":"Tianwen Chen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4219e592c672f4bd062add405865f9aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/tianwenchen"}],"author":{"id":12411397,"username":"tianwenchen","name":"Tianwen Chen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4219e592c672f4bd062add405865f9aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/tianwenchen"},"type":"ISSUE","assignee":{"id":12411397,"username":"tianwenchen","name":"Tianwen Chen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4219e592c672f4bd062add405865f9aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/tianwenchen"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-11-13","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377789","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":47,"completed_count":27},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"27 of 47 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377789","notes":"https://gitlab.com/api/v4/projects/278964/issues/377789/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377789/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377789","relative":"#377789","full":"gitlab-org/gitlab#377789"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":116797856,"iid":377782,"project_id":278964,"title":"Document basic Slack development flow (slash commands vs events)","description":"### About\n\nThis is an issue to capture what was said in this [Slack thread](https://gitlab.slack.com/archives/C01E55XNCEA/p1665630535022239?thread_ts=1665562842.278629\u0026cid=C01E55XNCEA) (internal, good for 90 days) into our Slack development guide. \n\n- Slash commands are responded to in-request and come through the Slash commands endpoint\n- Other points of interactivity come through Slack events, and are responded to async\n\nWe could use some mermaid charts.","state":"closed","created_at":"2022-10-13T04:07:08.559Z","updated_at":"2022-10-17T09:56:16.086Z","closed_at":"2022-10-17T09:56:16.062Z","closed_by":{"id":1315742,"username":"arturoherrero","name":"Arturo Herrero","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1315742/avatar.png","web_url":"https://gitlab.com/arturoherrero"},"labels":["Category:Integrations","Integration::Slack","devops::manage","documentation","group::integrations","section::dev","type::maintenance","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377782","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377782","notes":"https://gitlab.com/api/v4/projects/278964/issues/377782/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377782/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377782","relative":"#377782","full":"gitlab-org/gitlab#377782"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7536,"epic":{"id":438783,"iid":7536,"title":"Slack Integration Planning","url":"/groups/gitlab-org/-/epics/7536","group_id":9970},"iteration":null,"health_status":null},{"id":116786463,"iid":377749,"project_id":278964,"title":"Refactor Snowplow tracking specs","description":"The following discussion from !99934 should be addressed:\n\n- [ ] @cablett started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/99934#note_1133766742):  (+2 comments)\n\n    \u003e I find it interesting that the description says \"does not track the HLL event\" but yet we `expect_snowplow_tracking`. Is there a way to make this a bit more clear?","state":"closed","created_at":"2022-10-12T22:24:42.694Z","updated_at":"2022-10-17T04:57:09.105Z","closed_at":"2022-10-17T04:57:09.087Z","closed_by":{"id":9712164,"username":"nbelokolodov","name":"Niko Belokolodov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9712164/avatar.png","web_url":"https://gitlab.com/nbelokolodov"},"labels":["devops::analytics","group::product intelligence","maintenance::refactor","product intelligence","section::analytics","type::maintenance","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":9712164,"username":"nbelokolodov","name":"Niko Belokolodov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9712164/avatar.png","web_url":"https://gitlab.com/nbelokolodov"}],"author":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"type":"ISSUE","assignee":{"id":9712164,"username":"nbelokolodov","name":"Niko Belokolodov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9712164/avatar.png","web_url":"https://gitlab.com/nbelokolodov"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377749","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377749","notes":"https://gitlab.com/api/v4/projects/278964/issues/377749/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377749/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377749","relative":"#377749","full":"gitlab-org/gitlab#377749"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116765871,"iid":377724,"project_id":278964,"title":"Add authentication check to GitHub Import Public API endpoints","description":"The following discussion from gitlab-org/gitlab!98931 should be addressed:\n\n* [x] @stanhu started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/98931#note_1132170954):\n\n  \u003e Does this API require a user to be authenticated?\n\nAuthentication check is missing from  `/api/v4/import/github/cancel` and `/api/v4/import/github`\n\nWhen PAT is not provided in headers on POST `/api/v4/import/github` the 500 error is returned\n\n![Screen_Recording_2022-10-12_at_18.59.27](/uploads/39c456016858c72cd9457b940fc2bb56/Screen_Recording_2022-10-12_at_18.59.27.mov)\n\nWhen PAT is not provided in headers on POST `/api/v4/import/github/cancel` the 404 or 403 error is returned, depending on user access rights (covered by authorization)\n\nProposal solution:\n\nUse https://gitlab.com/gitlab-org/gitlab/-/blob/17cdb7ad3eef7e82fea99e71c133db0106593356/lib/api/helpers.rb#L280 for user authentication.","state":"closed","created_at":"2022-10-12T16:09:20.888Z","updated_at":"2022-11-03T08:30:06.143Z","closed_at":"2022-11-03T08:30:06.090Z","closed_by":{"id":11982352,"username":"krisberry-ext","name":"Kristina Doskich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11982352/avatar.png","web_url":"https://gitlab.com/krisberry-ext"},"labels":["Category:Importers","Importer:GitHub","SoftServe::Import","devops::manage","group::import","quad-planning::complete-no-action","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11982352,"username":"krisberry-ext","name":"Kristina Doskich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11982352/avatar.png","web_url":"https://gitlab.com/krisberry-ext"}],"author":{"id":11982352,"username":"krisberry-ext","name":"Kristina Doskich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11982352/avatar.png","web_url":"https://gitlab.com/krisberry-ext"},"type":"ISSUE","assignee":{"id":11982352,"username":"krisberry-ext","name":"Kristina Doskich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11982352/avatar.png","web_url":"https://gitlab.com/krisberry-ext"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377724","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377724","notes":"https://gitlab.com/api/v4/projects/278964/issues/377724/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377724/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377724","relative":"#377724","full":"gitlab-org/gitlab#377724"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2984,"epic":{"id":36593,"iid":2984,"title":"🟣 Complete GitHub Importer","url":"/groups/gitlab-org/-/epics/2984","group_id":9970,"human_readable_end_date":"Jun 28, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116763629,"iid":377721,"project_id":278964,"title":"Improve the wording of Anyone can register notification","description":"### Problem\n\nThe alert is a poor first time experience.\n- Why do users need to address this as their first task anyway? Could we make this a better UX overall?\n- The title of the alert shouldn't have a period per [Pajamas](https://design.gitlab.com/content/punctuation/).\n- The title should more clearly describe the action we want the user to take.\n- The UI text is clunky (we use the word `anyone` four times) and needs to be re-written.\n\n\n![image](/uploads/88b803609610120cab67386479c5c2a3/image.png)\n\n\n### Proposal 1\n- Title `Check your sign-up restrictions`\n- Copy: `Your GitLab instance permits anyone to register for an account, which is a security risk on public-facing GitLab instances. We highly recommend turning off new sign ups if public users aren't expected to register for an account.`\n- Button text: `Deactivate` | `Acknowledge`\n\n### Proposal 2\n- Is this the behavior all customers see out of the box for SM? Is this the best default behavior or is there something better?","state":"closed","created_at":"2022-10-12T15:32:06.385Z","updated_at":"2022-12-05T17:48:51.156Z","closed_at":"2022-12-05T17:48:51.128Z","closed_by":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"labels":["SUS::Impacting","Technical Writing","UI text","UX","devops::manage","frontend","group::authentication and authorization","maintenance::usability","section::dev","severity::4","type::maintenance","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":11438158,"username":"kylesmith2","name":"Kyle Smith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11438158/avatar.png","web_url":"https://gitlab.com/kylesmith2"}],"author":{"id":4089849,"username":"jackib","name":"Jacki Bauer","state":"active","avatar_url":"https://secure.gravatar.com/avatar/45cb9a7b286a89f770f76d90b6cf33fd?s=80\u0026d=identicon","web_url":"https://gitlab.com/jackib"},"type":"ISSUE","assignee":{"id":11438158,"username":"kylesmith2","name":"Kyle Smith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11438158/avatar.png","web_url":"https://gitlab.com/kylesmith2"},"user_notes_count":25,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377721","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377721","notes":"https://gitlab.com/api/v4/projects/278964/issues/377721/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377721/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377721","relative":"#377721","full":"gitlab-org/gitlab#377721"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116761087,"iid":377712,"project_id":278964,"title":"[Feature flag] Rollout of `ci_skip_auto_cancelation_on_child_pipelines`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout the fix for https://gitlab.com/gitlab-org/gitlab/-/issues/377527+ on production,\nthat is currently behind the `ci_skip_auto_cancelation_on_child_pipelines` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: ~\"group::pipeline execution\" \n- Most appropriate slack channel to reach out to: `#g_pipeline-execution`\n- Best individual to reach out to: @fabiopitino\n- PM: @jheimbuck_gl \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\nThis feature flag switches the strategy for auto-cancelation of pipelines (when a new pipeline is created) to skip the procedure when a child pipeline is being created.\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### When is the feature viable?\n\nAvailable immediately.\n\n\u003c!-- What are the settings we need to configure in order to have this feature viable? --\u003e\n\n\u003c!-- \nExample below:\n \n1. Enable service ping collection\n   `ApplicationSetting.first.update(usage_ping_enabled: true)`\n--\u003e\n\n### What might happen if this goes wrong?\n\nSome pipelines that should be auto-canceled may not be canceled and continue running until they complete.\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### What can we monitor to detect problems with this?\n\nWe don't have good metrics to track this since this is a ~\"priority::1\" bug that we are trying to solve quickly and we didn't have logging in place for when the bug was occurring. However we got several mentions in https://gitlab.com/gitlab-org/gitlab/-/issues/377527+ of MRs seeing pipelines canceled unexpectedly, which this FF should stop.\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n_Consider mentioning checks for 5xx errors or other anomalies like an increase in redirects \n(302 HTTP response status)_\n\n### What can we check for monitoring production after rollouts?\n\nWe are going to monitor 5xx errors on Sentry for any unexpected spikes and visually inspect the pipeline index for projects such as `gitlab-org/gitlab` where we were noticing parent pipelines being canceled by child pipelines.\n\n_Consider adding links to check for Sentry errors, Production logs for 5xx, 302s, etc._\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev --staging --staging-ref`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n      The best environment to validate the feature in is [staging-canary](https://about.gitlab.com/handbook/engineering/infrastructure/environments/#staging-canary)\n      as this is the first environment deployed to. Note you will need to make sure you are configured to use canary as outlined [here](https://about.gitlab.com/handbook/engineering/infrastructure/environments/canary-stage/)\n      when accessing the staging environment in order to make sure you are testing appropriately.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [x] `/chatops run feature set --project=gitlab-org/gitlab,gitlab-org/gitlab-foss,gitlab-com/www-gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org,gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e \u003cfeature-flag-name\u003e true`\n- [ ] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [ ] Set a milestone to the rollout issue to signal for enabling and removing the feature flag when it is stable.\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com. \n- [ ] Ensure that any breaking changes have been announced following the [release post process](https://about.gitlab.com/handbook/marketing/blog/release-posts/#deprecations-removals-and-breaking-changes) to ensure GitLab customers are aware.\n- [x] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --random`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [x] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Consider cleaning up the feature flag from all environments by running these chatops command in `#production` channel. Otherwise these settings may override the default enabled.\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev --staging --staging-ref --production`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can [create a separate issue](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\nYou can either [create a follow-up issue for Feature Flag Cleanup](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) or use the checklist below in this same issue.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the cleanup MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [x] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] If not already done, clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev --staging --staging-ref --production`\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```\n\n\u003c!-- A feature flag can also be used for rolling out a bug fix or a maintenance work.\nIn this scenario, labels must be related to it, for example; ~\"type::feature\", ~\"type::bug\" or ~\"type::maintenance\".\nPlease use /copy_metadata to copy the labels from the issue you're rolling out. --\u003e","state":"closed","created_at":"2022-10-12T14:48:00.335Z","updated_at":"2022-12-14T11:24:01.867Z","closed_at":"2022-11-25T16:43:42.277Z","closed_by":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"labels":["Category:Continuous Integration","Track Health Status","bridge pipelines","bug::functional","devops::verify","feature flag","group::pipeline execution","missed:15.5","missed:15.6","priority::1","section::ops","severity::2","type::bug","workflow::verification"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"}],"author":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"type":"ISSUE","assignee":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"user_notes_count":11,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":"2022-11-12","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377712","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":47,"completed_count":18},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"18 of 47 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377712","notes":"https://gitlab.com/api/v4/projects/278964/issues/377712/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377712/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377712","relative":"#377712","full":"gitlab-org/gitlab#377712"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116759560,"iid":377709,"project_id":278964,"title":"Ensure product analytics features are behind Ultimate gate","description":"## Overview\n\nSome of the backend work created by ~\"group::product analytics\" are in EE but not gated behind a licence flag. We should resolve this.\n\n## Implementation Plan\n\n* @agarciatesares has created a licence flag (`:product_analytics`) already :white_check_mark: \n* Existing backend work (APIs, workers, etc.) should be gated behind those flags.\n* Documentation should be updated to ~\"GitLab Ultimate\".\n\n## Files to update\n\n[[ Add list of files to update ]]","state":"closed","created_at":"2022-10-12T14:27:43.042Z","updated_at":"2022-10-25T11:58:52.105Z","closed_at":"2022-10-25T11:58:52.064Z","closed_by":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"labels":["Category:Product Analytics","backend","devops::analytics","group::product analytics","section::analytics","workflow::in review"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"}],"author":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"type":"ISSUE","assignee":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377709","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377709","notes":"https://gitlab.com/api/v4/projects/278964/issues/377709/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377709/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377709","relative":"#377709","full":"gitlab-org/gitlab#377709"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116757292,"iid":377706,"project_id":278964,"title":"[Design] Upload designs and keep them updated","description":"","state":"closed","created_at":"2022-10-12T14:02:42.341Z","updated_at":"2022-10-17T23:17:23.000Z","closed_at":"2022-10-17T23:17:22.991Z","closed_by":{"id":3617348,"username":"uhlexsis","name":"Alexis Ginsberg","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3617348/avatar.png","web_url":"https://gitlab.com/uhlexsis"},"labels":["UX","UX Theme","devops::plan","group::product planning","section::dev","workflow::design"],"milestone":{"id":1212252,"iid":48,"group_id":9970,"title":"Next 1-3 releases","description":"Issues which are not quite ready to schedule, but should be considered as part of the near-term roadmap.","state":"active","created_at":"2020-03-26T20:39:10.889Z","updated_at":"2020-03-26T20:39:10.889Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/48"},"assignees":[],"author":{"id":3617348,"username":"uhlexsis","name":"Alexis Ginsberg","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3617348/avatar.png","web_url":"https://gitlab.com/uhlexsis"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377706","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377706","notes":"https://gitlab.com/api/v4/projects/278964/issues/377706/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377706/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377706","relative":"#377706","full":"gitlab-org/gitlab#377706"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8969,"epic":{"id":622874,"iid":8969,"title":"UX theme design","url":"/groups/gitlab-org/-/epics/8969","group_id":9970,"human_readable_end_date":"Dec 30, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116757287,"iid":377705,"project_id":278964,"title":"[Design] Share or reference designs","description":"","state":"closed","created_at":"2022-10-12T14:02:31.626Z","updated_at":"2022-10-17T23:17:22.858Z","closed_at":"2022-10-17T23:17:22.850Z","closed_by":{"id":3617348,"username":"uhlexsis","name":"Alexis Ginsberg","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3617348/avatar.png","web_url":"https://gitlab.com/uhlexsis"},"labels":["UX","UX Theme","devops::plan","group::product planning","section::dev","workflow::design"],"milestone":{"id":1212252,"iid":48,"group_id":9970,"title":"Next 1-3 releases","description":"Issues which are not quite ready to schedule, but should be considered as part of the near-term roadmap.","state":"active","created_at":"2020-03-26T20:39:10.889Z","updated_at":"2020-03-26T20:39:10.889Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/48"},"assignees":[],"author":{"id":3617348,"username":"uhlexsis","name":"Alexis Ginsberg","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3617348/avatar.png","web_url":"https://gitlab.com/uhlexsis"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377705","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377705","notes":"https://gitlab.com/api/v4/projects/278964/issues/377705/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377705/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377705","relative":"#377705","full":"gitlab-org/gitlab#377705"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8969,"epic":{"id":622874,"iid":8969,"title":"UX theme design","url":"/groups/gitlab-org/-/epics/8969","group_id":9970,"human_readable_end_date":"Dec 30, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116757267,"iid":377703,"project_id":278964,"title":"[Design] Add context to or discuss designs","description":"","state":"closed","created_at":"2022-10-12T14:02:05.753Z","updated_at":"2022-10-12T14:35:08.870Z","closed_at":"2022-10-12T14:35:08.847Z","closed_by":{"id":3617348,"username":"uhlexsis","name":"Alexis Ginsberg","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3617348/avatar.png","web_url":"https://gitlab.com/uhlexsis"},"labels":["UX","UX Theme","devops::plan","group::product planning","section::dev"],"milestone":{"id":1212252,"iid":48,"group_id":9970,"title":"Next 1-3 releases","description":"Issues which are not quite ready to schedule, but should be considered as part of the near-term roadmap.","state":"active","created_at":"2020-03-26T20:39:10.889Z","updated_at":"2020-03-26T20:39:10.889Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/48"},"assignees":[],"author":{"id":3617348,"username":"uhlexsis","name":"Alexis Ginsberg","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3617348/avatar.png","web_url":"https://gitlab.com/uhlexsis"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377703","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":13,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377703","notes":"https://gitlab.com/api/v4/projects/278964/issues/377703/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377703/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377703","relative":"#377703","full":"gitlab-org/gitlab#377703"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8969,"epic":{"id":622874,"iid":8969,"title":"UX theme design","url":"/groups/gitlab-org/-/epics/8969","group_id":9970,"human_readable_end_date":"Dec 30, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116757251,"iid":377702,"project_id":278964,"title":"[Design] View designs","description":"","state":"closed","created_at":"2022-10-12T14:01:46.836Z","updated_at":"2022-10-17T23:17:22.527Z","closed_at":"2022-10-17T23:17:22.519Z","closed_by":{"id":3617348,"username":"uhlexsis","name":"Alexis Ginsberg","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3617348/avatar.png","web_url":"https://gitlab.com/uhlexsis"},"labels":["UX","UX Theme","devops::plan","group::product planning","section::dev","workflow::ready for design"],"milestone":{"id":1212252,"iid":48,"group_id":9970,"title":"Next 1-3 releases","description":"Issues which are not quite ready to schedule, but should be considered as part of the near-term roadmap.","state":"active","created_at":"2020-03-26T20:39:10.889Z","updated_at":"2020-03-26T20:39:10.889Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/48"},"assignees":[],"author":{"id":3617348,"username":"uhlexsis","name":"Alexis Ginsberg","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3617348/avatar.png","web_url":"https://gitlab.com/uhlexsis"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377702","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377702","notes":"https://gitlab.com/api/v4/projects/278964/issues/377702/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377702/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377702","relative":"#377702","full":"gitlab-org/gitlab#377702"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8969,"epic":{"id":622874,"iid":8969,"title":"UX theme design","url":"/groups/gitlab-org/-/epics/8969","group_id":9970,"human_readable_end_date":"Dec 30, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116757199,"iid":377701,"project_id":278964,"title":"[Design] Add context to or discuss designs","description":"","state":"closed","created_at":"2022-10-12T14:01:18.392Z","updated_at":"2022-10-17T23:17:22.399Z","closed_at":"2022-10-17T23:17:22.391Z","closed_by":{"id":3617348,"username":"uhlexsis","name":"Alexis Ginsberg","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3617348/avatar.png","web_url":"https://gitlab.com/uhlexsis"},"labels":["UX","UX Theme","devops::plan","group::product planning","section::dev","workflow::design"],"milestone":{"id":1212252,"iid":48,"group_id":9970,"title":"Next 1-3 releases","description":"Issues which are not quite ready to schedule, but should be considered as part of the near-term roadmap.","state":"active","created_at":"2020-03-26T20:39:10.889Z","updated_at":"2020-03-26T20:39:10.889Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/48"},"assignees":[],"author":{"id":3617348,"username":"uhlexsis","name":"Alexis Ginsberg","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3617348/avatar.png","web_url":"https://gitlab.com/uhlexsis"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377701","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377701","notes":"https://gitlab.com/api/v4/projects/278964/issues/377701/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377701/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377701","relative":"#377701","full":"gitlab-org/gitlab#377701"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8969,"epic":{"id":622874,"iid":8969,"title":"UX theme design","url":"/groups/gitlab-org/-/epics/8969","group_id":9970,"human_readable_end_date":"Dec 30, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116751345,"iid":377688,"project_id":278964,"title":"Spike: Where are License Scanning reports used in the codebase?","description":"Time-boxed: 1 day\n\n### Topic to Evaluate\n\nBefore updating the Rails app to leverage license data stored in the primary DB, we need to know where legacy License Scanning reports are used. This is prep work for implementation issues of https://gitlab.com/groups/gitlab-org/-/epics/8532+.\n\n### Tasks to  Evaluate\n\n- [x] Identify bits of code that directly use License Scanning reports: models, controllers, services, workers, etc.\n- [x] Optionally, make specific suggestions on how to update the code, and add abstraction layers to switch between the old implementation and the old old\n- [x] Update https://gitlab.com/groups/gitlab-org/-/epics/8532 and/or its issues.\n\n\u003c!-- start-discoto-summary --\u003e\n## Auto-Summary :robot:\n\n\n\u003cdetails\u003e\n\u003csummary\u003eDiscoto Usage\u003c/summary\u003e\n\n---\n\n\u003e **Points**\n\u003e\n\u003e Discussion points are declared by headings, list items, and single\n\u003e lines that start with the text (case-insensitive) `point:`. For\n\u003e example, the following are all valid points:\n\u003e\n\u003e * `#### POINT: This is a point`\n\u003e * `* point: This is a point`\n\u003e * `+ Point: This is a point`\n\u003e * `- pOINT: This is a point`\n\u003e * `point: This is a **point**`\n\u003e\n\u003e Note that any markdown used in the point text will also be propagated\n\u003e into the topic summaries.\n\u003e\n\u003e **Topics**\n\u003e\n\u003e Topics can be stand-alone and contained within an issuable (epic,\n\u003e issue, MR), or can be inline.\n\u003e\n\u003e Inline topics are defined by creating a new thread (discussion)\n\u003e where the first line of the first comment is a heading that starts\n\u003e with (case-insensitive) `topic:`. For example, the following are all\n\u003e valid topics:\n\u003e\n\u003e * `# Topic: Inline discussion topic 1`\n\u003e * `## TOPIC: **{+A Green, bolded topic+}**`\n\u003e * `### tOpIc: Another topic`\n\u003e\n\u003e **Quick Actions**\n\u003e\n\u003e | Action                        | Description                                             |\n\u003e |-------------------------------|---------------------------------------------------------|\n\u003e | `/discuss sub-topic TITLE`    | Create an issue for a sub-topic. Does not work in epics |\n\u003e | `/discuss link ISSUABLE-LINK` | Link an issuable as a child of this discussion          |\n\u003e\n\n---\n\n\u003c/details\u003e\n\nLast updated by [this job](https://gitlab.com/gitlab-org/secure/pocs/discoto-runner/-/jobs/3172814289)\n\n\n* **TOPIC** [`RefreshLicenseComplianceChecksWorker`](ee/app/workers/refresh_license_compliance_checks_worker.rb) https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133063363\n  * already generic :white_check_mark: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133365080\n* **TOPIC** [`ApprovalMergeRequestRule`](ee/app/models/approval_merge_request_rule.rb) https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133073623\n  * fetches `head_pipeline\u0026.license_scanning_report`; to be changed :question: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133363795\n  * use `SCA:LicenseCompliance` instead :question: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133613675\n* **TOPIC** [`LicenseScanning::Report#violates?`](ee/lib/gitlab/ci/reports/license_scanning/report.rb#L65) https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133083851\n  * new implementation must implement `violates?` :construction: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133356331\n  * new implementation must implement `empty?` :construction: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133356331\n* **TOPIC** [`::Ci::SyncReportsToApprovalRulesService`](ee/app/services/ci/sync_reports_to_approval_rules_service.rb) https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133106509\n  * fetches `project.license_scanning_report`; to be changed :question: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133354332\n  * use `SCA::LicenseCompliance` instead :question: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133354332\n  * must also be called after SBOM ingestion; new worker needed? :construction: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133358258\n* **TOPIC** [`MergeRequestController`](ee/app/controllers/ee/projects/merge_requests_controller.rb) (EE) https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133112249\n  * relies on `SCA::LicenseCompliance` :white_check_mark: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133348485\n* **TOPIC** [`MergeRequest`](ee/app/models/ee/merge_request.rb) (EE) https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133286787\n  * relies on `SCA::LicenseCompliance` :white_check_mark: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133339951\n* **TOPIC** [`CompareLicenseScanningReportsService`](ee/app/services/ci/compare_license_scanning_reports_service.rb) https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133297470\n  * relies on `SCA::LicenseCompliance` :white_check_mark: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133340183\n* **TOPIC** [`LicenseScanning::ReportsComparer`](ee/lib/gitlab/ci/reports/license_scanning/reports_comparer.rb) https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133305069\n  * uses `SCA::LicenseCompliance#diff_with` :white_check_mark: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133342209\n* **TOPIC** [`LicensesController`](ee/app/controllers/projects/licenses_controller.rb) https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133318031\n  * relies on `SCA::LicenseCompliance` :white_check_mark: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133345172\n* **TOPIC** [`SCA::LicenseCompliance`](ee/app/models/sca/license_compliance.rb) https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133322950\n  * can be an abstraction layer :white_check_mark: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133346304\n  * will switch b/w old and new LS results :construction: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133346304\n  * returns `license_scanning_report`, to be emulated :construction: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133346304\n  * `#diff_with` delegates to `LicenseScanning::Report#diff_with` https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133580426\n  * refactor matching of detected licenses w/ policies :construction: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133584497\n* **TOPIC** [`Project`](ee/app/models/ee/project.rb) (EE) https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133552227\n  * change default value for `license_compliance` to also select pipelines with SBOMs :construction: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133554792\n* **TOPIC** [`API::ManagedLicenses`](ee/lib/api/managed_licenses.rb) (EE) https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133563712\n* **TOPIC** [`Ci::Reports::LicenseScanning::Report`](ee/lib/gitlab/ci/reports/license_scanning/report.rb) https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133593884\n  * new LS results could implement the same interface :white_check_mark: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133593884\n  * `#violates?` should be extracted, and shared :question: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133596238\n  * `#diff_with` should be extracted, and shared :question: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133596238\n  * can be used to present new LS results :white_check_mark: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133607207\n* **TOPIC** Proposal https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1133625396\n* **TOPIC** Merging License Report into Dependency Report https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1134696608\n  * `Ci::Parsers::Security::DependencyList#parses_licenses!` parses LS report from raw JSON; to be changed :construction: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1134795634\n  * `Ci::Build#collect_licenses_for_dependency_list` and `collect_licenses_for_dependency_list` use DS reports; move to a dedicated service :question: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1134925404\n  * `Ci::Pipeline#license_scanning_report` fetches LS reports from jobs; to be changed :construction: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1134929742\n  * `Ci::Pipeline#dependency_list_report` fetches LS reports from jobs; to be changed :construction: https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1134929742\n* **TOPIC** Investigation using specs, factories, and fixtures https://gitlab.com/gitlab-org/gitlab/-/issues/377688#note_1135659251\n\u003c!-- end-discoto-summary --\u003e\n\n\n\n\u003c!-- start-discoto-topic-settings --\u003e\u003cdetails\u003e\n\u003csummary\u003eDiscoto Settings\u003c/summary\u003e\n\n\u003cbr/\u003e\n\n```yaml\n---\nsummary:\n  max_items: -1\n  sort_by: created\n  sort_direction: ascending\n\n```\n\nSee the [settings schema](https://gitlab.com/gitlab-org/secure/pocs/discussion-automation#settings-schema) for details.\n\n\u003c/details\u003e\n\u003c!-- end-discoto-topic-settings --\u003e","state":"closed","created_at":"2022-10-12T12:27:42.959Z","updated_at":"2023-01-06T05:48:49.374Z","closed_at":"2022-10-14T09:33:10.150Z","closed_by":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"labels":["Category:License Compliance","GitLab Ultimate","backend","devops::secure","discoto","feature::addition","group::composition analysis","section::sec","type::feature","workflow::production"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"}],"author":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"type":"ISSUE","assignee":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"user_notes_count":60,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377688","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377688","notes":"https://gitlab.com/api/v4/projects/278964/issues/377688/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377688/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377688","relative":"#377688","full":"gitlab-org/gitlab#377688"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8532,"epic":{"id":579756,"iid":8532,"title":"Use License Scanning service","url":"/groups/gitlab-org/-/epics/8532","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":116736600,"iid":377679,"project_id":278964,"title":"[Feature flag] Enable self-managed instance setting in the GitLab for Jira App (Jira Connect)","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [Change GitLab for Jira app feature flag behavior\n](https://gitlab.com/gitlab-org/gitlab/-/issues/375144) on production,\nthat is currently behind the `jira_connect_oauth_self_managed_setting` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: ~\"group::integrations\" \n- Most appropriate slack channel to reach out to: `#g_manage_integrations`\n- Best individual to reach out to: @bmarjanovic and @Andysoiron \n- PM: @g.hickman \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### When is the feature viable?\n\n\u003c!-- What are the settings we need to configure in order to have this feature viable? --\u003e\n\n\u003c!-- \nExample below:\n \n1. Enable service ping collection\n   `ApplicationSetting.first.update(usage_ping_enabled: true)`\n--\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n_Consider mentioning checks for 5xx errors or other anomalies like an increase in redirects \n(302 HTTP response status)_\n\n### What can we check for monitoring production after rollouts?\n\n_Consider adding links to check for Sentry errors, Production logs for 5xx, 302s, etc._\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev --staging --staging-ref`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n      The best environment to validate the feature in is [staging-canary](https://about.gitlab.com/handbook/engineering/infrastructure/environments/#staging-canary)\n      as this is the first environment deployed to. Note you will need to make sure you are configured to use canary as outlined [here](https://about.gitlab.com/handbook/engineering/infrastructure/environments/canary-stage/)\n      when accessing the staging environment in order to make sure you are testing appropriately.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab,gitlab-org/gitlab-foss,gitlab-com/www-gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org,gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e \u003cfeature-flag-name\u003e true`\n- [ ] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [x] Set a milestone to the rollout issue to signal for enabling and removing the feature flag when it is stable.\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [x] Ensure the two settings `jira_connect_application_key` and `jira_connect_proxy_url` are included in the admin settings API.\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com. \n- [ ] Ensure that any breaking changes have been announced following the [release post process](https://about.gitlab.com/handbook/marketing/blog/release-posts/#deprecations-removals-and-breaking-changes) to ensure GitLab customers are aware.\n- [ ] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --random`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [ ] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Consider cleaning up the feature flag from all environments by running these chatops command in `#production` channel. Otherwise these settings may override the default enabled.\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev --staging --staging-ref --production`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can [create a separate issue](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\nYou can either [create a follow-up issue for Feature Flag Cleanup](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) or use the checklist below in this same issue.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] If not already done, clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev --staging --staging-ref --production`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```\n\n\u003c!-- A feature flag can also be used for rolling out a bug fix or a maintenance work.\nIn this scenario, labels must be related to it, for example; ~\"type::feature\", ~\"type::bug\" or ~\"type::maintenance\".\nPlease use /copy_metadata to copy the labels from the issue you're rolling out. --\u003e","state":"closed","created_at":"2022-10-12T09:03:28.079Z","updated_at":"2022-11-28T18:21:47.510Z","closed_at":"2022-11-17T17:31:19.133Z","closed_by":{"id":16943,"username":"Andysoiron","name":"Andy Soiron","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/16943/avatar.png","web_url":"https://gitlab.com/Andysoiron"},"labels":["Category:Integrations","Deliverable","Integration::Jira","Jira::ConnectApp","backend","devops::manage","feature flag","feature::enhancement","group::integrations","missed-deliverable","missed:15.5","section::dev","type::feature","workflow::ready for development"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":16943,"username":"Andysoiron","name":"Andy Soiron","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/16943/avatar.png","web_url":"https://gitlab.com/Andysoiron"},{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"}],"author":{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"},"type":"ISSUE","assignee":{"id":16943,"username":"Andysoiron","name":"Andy Soiron","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/16943/avatar.png","web_url":"https://gitlab.com/Andysoiron"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-11-12","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377679","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":48,"completed_count":8},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"8 of 48 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377679","notes":"https://gitlab.com/api/v4/projects/278964/issues/377679/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377679/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377679","relative":"#377679","full":"gitlab-org/gitlab#377679"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5650,"epic":{"id":230344,"iid":5650,"title":"Self-managed support extended to GitLab for Jira app","url":"/groups/gitlab-org/-/epics/5650","group_id":9970,"human_readable_end_date":"May 17, 2023","human_readable_timestamp":"\u003cstrong\u003e4\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":116733616,"iid":377674,"project_id":278964,"title":"Version App - run pipelines against Ruby 3","description":"To [support Ruby 3](https://gitlab.com/gitlab-org/gitlab/-/issues/338549) version on Version App, we need to make sure the master branch is ready for that change. To achieve that, we need to run CI in ruby 3.0 [in addition to regular Ruby 2.x runs].\n\nTo complete this issue, we need to:\n\n\n1. Modify pipelines so that they can be fed variable ruby version\n2. Schedule periodical CI runs on master branch against ruby 3\n\n## Resources\n\nIt can be helpful to check how that has been implemented in GitLab: https://gitlab.com/gitlab-org/gitlab/-/issues/340298","state":"closed","created_at":"2022-10-12T08:48:51.002Z","updated_at":"2022-11-17T12:21:53.070Z","closed_at":"2022-11-17T12:21:53.027Z","closed_by":{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"labels":["Unplanned","VersionApp","devops::analytics","group::product intelligence","section::analytics","type::maintenance","workflow::in review"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"}],"author":{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"type":"ISSUE","assignee":{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377674","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377674","notes":"https://gitlab.com/api/v4/projects/278964/issues/377674/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377674/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377674","relative":"#377674","full":"gitlab-org/gitlab#377674"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116732853,"iid":377673,"project_id":278964,"title":"Improve keyboard accessibility of autocomplete dropdown in content editor","description":"@mle's comment from: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/99471#note_1129424224\n\n\u003e\u003e\u003e\n\n@himkp Just took a look at this now, is there a follow up issue or MR to handle the keyboard accessibility of the dropdown?\n\nI was unable to scroll the list when using up/down arrow keys when the list of emojis is longer than the visible area.\n\n![CleanShot_2022-10-10_at_16.46.38](https://gitlab.com/gitlab-org/gitlab/uploads/a6a52358d1f72501734fee57ad76b3fe/CleanShot_2022-10-10_at_16.46.38.mp4)\n\n\u003e\u003e\u003e\n\nThe issue affects all autocomplete dropdown items.","state":"closed","created_at":"2022-10-12T08:41:49.564Z","updated_at":"2022-11-17T02:35:47.480Z","closed_at":"2022-11-17T02:35:47.444Z","closed_by":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"labels":["Content Editor","SUS::Impacting","UX","bug::ux","devops::create","frontend","good for new contributors","group::editor","section::dev","severity::3","type::bug","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"}],"author":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"type":"ISSUE","assignee":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377673","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377673","notes":"https://gitlab.com/api/v4/projects/278964/issues/377673/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377673/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377673","relative":"#377673","full":"gitlab-org/gitlab#377673"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116717711,"iid":377647,"project_id":278964,"title":"Follow-up from \"Require verification methods depending on user's Arkose Labs risk band\"","description":"The following discussion from !99457 should be addressed:\n\n- [ ] @hmehra started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/99457#note_1124566243):  (+1 comment)\n\n    \u003e nitpick: A maintainer once pointed out to me that [exporting objects](https://gitlab.com/gitlab-org/gitlab/blob/master/doc/development/fe_guide/style/javascript.md) is discouraged.","state":"closed","created_at":"2022-10-12T02:38:10.559Z","updated_at":"2022-11-08T09:20:45.327Z","closed_at":"2022-11-08T09:20:45.300Z","closed_by":{"id":9670031,"username":"eugielimpin","name":"Eugie Limpin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9670031/avatar.png","web_url":"https://gitlab.com/eugielimpin"},"labels":["devops::anti-abuse","group::anti-abuse","section::data-science","type::maintenance","workflow::in review"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":9670031,"username":"eugielimpin","name":"Eugie Limpin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9670031/avatar.png","web_url":"https://gitlab.com/eugielimpin"}],"author":{"id":9670031,"username":"eugielimpin","name":"Eugie Limpin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9670031/avatar.png","web_url":"https://gitlab.com/eugielimpin"},"type":"ISSUE","assignee":{"id":9670031,"username":"eugielimpin","name":"Eugie Limpin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9670031/avatar.png","web_url":"https://gitlab.com/eugielimpin"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377647","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377647","notes":"https://gitlab.com/api/v4/projects/278964/issues/377647/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377647/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377647","relative":"#377647","full":"gitlab-org/gitlab#377647"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116707996,"iid":377587,"project_id":278964,"title":"Advanced user search","description":"With https://gitlab.com/gitlab-org/gitlab/-/issues/359820, we are adding users to Elasticsearch index. In this issue, we will need to add functionality to leverage elasticsearch for user searches.","state":"closed","created_at":"2022-10-11T21:34:38.307Z","updated_at":"2023-01-10T14:03:14.662Z","closed_at":"2023-01-10T14:03:13.684Z","closed_by":{"id":12457737,"username":"maddievn","name":"Madelein van Niekerk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12457737/avatar.png","web_url":"https://gitlab.com/maddievn"},"labels":["Category:Global Search","Deliverable","devops::data_stores","group::global search","section::enablement","type::feature"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":12457737,"username":"maddievn","name":"Madelein van Niekerk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12457737/avatar.png","web_url":"https://gitlab.com/maddievn"}],"author":{"id":9717668,"username":"john-mason","name":"John Mason","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9717668/avatar.png","web_url":"https://gitlab.com/john-mason"},"type":"ISSUE","assignee":{"id":12457737,"username":"maddievn","name":"Madelein van Niekerk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12457737/avatar.png","web_url":"https://gitlab.com/maddievn"},"user_notes_count":34,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377587","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377587","notes":"https://gitlab.com/api/v4/projects/278964/issues/377587/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377587/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377587","relative":"#377587","full":"gitlab-org/gitlab#377587"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8980,"epic":{"id":623415,"iid":8980,"title":"Improve User Search","url":"/groups/gitlab-org/-/epics/8980","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":116703788,"iid":377584,"project_id":278964,"title":"Adjust `FindingsFinder` not to depend on dismissal feedback","description":"Adjust https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/finders/security/findings_finder.rb#L87 not to depend on dismissal feedback.\n\n### Implementation plan: \n\n- [x] Adjust this https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/finders/security/findings_finder.rb#L87 so that it does not depend on dismissed feedback for the filter (`@security_findings ||= include_dismissed? ? all_security_findings : all_security_findings.undismissed`). It needs to depend Vulnerability model when feature flag is enabled.","state":"closed","created_at":"2022-10-11T20:25:40.376Z","updated_at":"2022-12-08T15:59:14.332Z","closed_at":"2022-12-08T12:49:34.381Z","closed_by":{"id":5721376,"username":"minac","name":"Mehmet Emin INAC","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d8bdee790902422e3554e411a173c7c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/minac"},"labels":["Category:Vulnerability Management","Threat Insights::Tangerine","backend","devops::govern","feature flag","group::threat insights","maintenance::refactor","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":5721376,"username":"minac","name":"Mehmet Emin INAC","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d8bdee790902422e3554e411a173c7c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/minac"}],"author":{"id":7825316,"username":"subashis","name":"Subashis  Chakraborty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7825316/avatar.png","web_url":"https://gitlab.com/subashis"},"type":"ISSUE","assignee":{"id":5721376,"username":"minac","name":"Mehmet Emin INAC","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d8bdee790902422e3554e411a173c7c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/minac"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377584","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377584","notes":"https://gitlab.com/api/v4/projects/278964/issues/377584/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377584/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377584","relative":"#377584","full":"gitlab-org/gitlab#377584"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5629,"epic":{"id":228751,"iid":5629,"title":"Deprecate and remove Vulnerabilities::Feedback","url":"/groups/gitlab-org/-/epics/5629","group_id":9970},"iteration":null,"health_status":null},{"id":116699812,"iid":377573,"project_id":278964,"title":"ee/spec/requests/git_http_geo_spec.rb failing","description":"A bug (fixed in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/100720) meant that under certain circumstances, an RSpec failure would not be reported correctly, but instead return a success code. This masked several broken specs.\n\nOne example is in https://gitlab.com/gitlab-org/gitlab/-/jobs/3157889632 (from a master pipeline):\n\n```\nFailures:\n  1) Git HTTP requests (Geo) when current node is a secondary git-lfs Transfer API GET /namespace/repo.git/gitlab-lfs/objects/\u003coid\u003e when the repository does not exist behaves like a Geo 302 redirect to Primary valid Geo JWT token returns a redirect response\n     Failure/Error: is_expected.to have_gitlab_http_status(:redirect)\n       expected the response to have status code :redirect but it was 200. The response was: ?PNG\n\nSNIP\n\n     Shared Example Group: \"a Geo 302 redirect to Primary\" called from ./ee/spec/requests/git_http_geo_spec.rb:427\n     # ./ee/spec/requests/git_http_geo_spec.rb:86:in `block (4 levels) in \u003ctop (required)\u003e'\n     # ./spec/spec_helper.rb:417:in `block (3 levels) in \u003ctop (required)\u003e'\n     # ./spec/support/sidekiq_middleware.rb:9:in `with_sidekiq_server_middleware'\n     # ./spec/spec_helper.rb:409:in `block (2 levels) in \u003ctop (required)\u003e'\n     # ./spec/spec_helper.rb:405:in `block (3 levels) in \u003ctop (required)\u003e'\n     # ./lib/gitlab/application_context.rb:58:in `with_raw_context'\n     # ./spec/spec_helper.rb:405:in `block (2 levels) in \u003ctop (required)\u003e'\n     # ./spec/spec_helper.rb:242:in `block (2 levels) in \u003ctop (required)\u003e'\n     # ./spec/support/system_exit_detected.rb:7:in `block (2 levels) in \u003ctop (required)\u003e'\n     # ./spec/support/flaky_tests.rb:27:in `block (2 levels) in \u003ctop (required)\u003e'\n     # ./spec/support/database/prevent_cross_joins.rb:106:in `block (3 levels) in \u003ctop (required)\u003e'\n     # ./spec/support/database/prevent_cross_joins.rb:60:in `with_cross_joins_prevented'\n     # ./spec/support/database/prevent_cross_joins.rb:106:in `block (2 levels) in \u003ctop (required)\u003e'\nFinished in 22 minutes 39 seconds (files took 1 minute 5.8 seconds to load)\n1464 examples, 1 failure, 52 pending\n```","state":"closed","created_at":"2022-10-11T19:03:47.949Z","updated_at":"2022-10-21T19:33:52.593Z","closed_at":"2022-10-14T17:27:51.480Z","closed_by":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"labels":["Quality","bug::transient","devops::systems","group::geo","priority::1","section::enablement","type::bug","workflow::planning breakdown"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"}],"author":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377573","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377573","notes":"https://gitlab.com/api/v4/projects/278964/issues/377573/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377573/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377573","relative":"#377573","full":"gitlab-org/gitlab#377573"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116678280,"iid":377530,"project_id":278964,"title":"Adds a User category to the autocomplete results of the search bar","description":"# Why\nWhen searching from a Group or Project, I want to quickly see the users matching my term in the current group(s)/project.\n\n\u003cimg src=\"/uploads/0d9ecc1147b2ee860148edf77038dacb/Screenshot_2022-10-11_at_11.37.53.png\" width=50% /\u003e\n\n# What\nI expect to see a Users category listing the first 5 users matching my search term.\n- When searching from a Group, the users have to be a group member of the group, or its ancestor group(s).\n- When searching from a Project, the users have to be a project member of the project AND a group member of the group, or its ancestor group(s).\nWhen I click on a user in the list, it takes me to the user's profile.\n\n# How\nCE:\nFollowing the current autocomplete implementation, search for scoped users (for the current group/project) by doing a fuzzy database query on the search term. See how projects_autocomplete is done for an example: https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/helpers/search_helper.rb#L309-321\n\nEE:\nMake use of the user data in Elasticsearch to search for scoped users.\n\nFrontend:\nAdd a Users category to the autocomplete dropdown and display user category data.\n\n# Risk: the database query is too slow for CE users\nI don't _think_ this would be a problem because we would be limiting the search to users who are members of the current group/project.\n\n# Support needed\nDesign: Get approval on the suggested design.\nFrontend: Possibly need a frontend engineer to implement the required changes, depending on complexity.\n\nRelates to #328565\n\n### Release notes\n\nShows users matching a part of the search term under a new category in [Autocomplete Suggestions](https://docs.gitlab.com/ee/user/search/#autocomplete-suggestions). Clicking on a result opens the user's profile page.\n\n![autocomplete](/uploads/6977e927343cce2f565a5dbbc7bce7fb/autocomplete.png)","state":"closed","created_at":"2022-10-11T14:25:19.169Z","updated_at":"2022-12-21T12:11:13.456Z","closed_at":"2022-12-13T22:13:06.662Z","closed_by":{"id":4888751,"username":"changzhengliu","name":"Changzheng Liu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4888751/avatar.png","web_url":"https://gitlab.com/changzhengliu"},"labels":["Category:Global Search","Deliverable","GitLab Core","devops::data_stores","feature::enhancement","group::global search","release post item","release post item::in review","section::enablement","type::feature","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":12457737,"username":"maddievn","name":"Madelein van Niekerk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12457737/avatar.png","web_url":"https://gitlab.com/maddievn"}],"author":{"id":12457737,"username":"maddievn","name":"Madelein van Niekerk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12457737/avatar.png","web_url":"https://gitlab.com/maddievn"},"type":"ISSUE","assignee":{"id":12457737,"username":"maddievn","name":"Madelein van Niekerk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12457737/avatar.png","web_url":"https://gitlab.com/maddievn"},"user_notes_count":9,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377530","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377530","notes":"https://gitlab.com/api/v4/projects/278964/issues/377530/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377530/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377530","relative":"#377530","full":"gitlab-org/gitlab#377530"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116675069,"iid":377527,"project_id":278964,"title":"Dynamically generated downstream child pipeline can cancel its parent","description":"## Observed behavior\n\nIt looks like under some unknown conditions, a dynamically generated pipeline can potentially cancel the parent pipeline which triggered it. This is not desired.\n\nThe desired behavior is that both the parent and child pipeline should keep running because there's no other newer pipeline\n\nExample pipeline: https://gitlab.com/gitlab-org/gitlab/-/pipelines/663812939\n\n![Screen_Shot_2022-10-11_at_21.33.14](/uploads/88c6c4415d81828be30edc70c04afbcb/Screen_Shot_2022-10-11_at_21.33.14.png)\n\n## Current configurations\n\nBoth the parent and child pipelines have:\n\n```\ndefault:\n  interruptible: true\n```\n\nThe child pipeline is dynamically generated via `trigger.include.artifact`: https://docs.gitlab.com/ee/ci/pipelines/downstream_pipelines.html#dynamic-child-pipelines\n\n## References\n\n* https://gitlab.com/gitlab-org/gitlab/-/merge_requests/98185#note_1105650704\n* https://gitlab.com/gitlab-org/gitlab/-/pipelines/663812939","state":"closed","created_at":"2022-10-11T13:43:43.301Z","updated_at":"2023-01-13T14:04:35.904Z","closed_at":"2023-01-09T13:50:35.139Z","closed_by":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"labels":["Category:Continuous Integration","Track Health Status","bridge pipelines","bug::functional","devops::verify","group::pipeline execution","missed-SLO","missed:15.5","missed:15.6","missed:15.7","priority::1","section::ops","severity::2","type::bug","workflow::production"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"}],"author":{"id":6290669,"username":"godfat-gitlab","name":"Lin Jen-Shin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6290669/avatar.png","web_url":"https://gitlab.com/godfat-gitlab"},"type":"ISSUE","assignee":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"user_notes_count":47,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377527","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377527","notes":"https://gitlab.com/api/v4/projects/278964/issues/377527/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377527/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377527","relative":"#377527","full":"gitlab-org/gitlab#377527"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":116658371,"iid":377512,"project_id":278964,"title":"Change reporting of Service Desk Sidekiq Failures","description":"### Summary\n\nError budgets for Certify dropped substantially on 28th September because of a change in the way Sidekiq metrics are collected (see https://gitlab.com/gitlab-com/runbooks/-/merge_requests/5024). \n\n\n#### Detail \n\nEmailReceiver errors are attributed to Service Desk, which belongs to Certify. Therefore, an increase in errors in this component spends error budget belonging to Certify.\n\nThere was no measurable increase in the number of exceptions created by this component on the 28th. However, it appears that exception types that were not previously being counted now are.\n\nMany exceptions thrown by the `EmailReceiver` (and `ServiceDeskReceiver`) are legitimate and not within our control to reduce, for example:\n\n* `UserNotAuthorizedError`: the token used (in a reply) no longer belongs to an authorized user\n* `NoteableNoteFoundError`: the thread the email is in reply to has been deleted\n* `ProjectNotFound`: the project has been moved/deleted/never existed\n* `EmailTooLarge`: the email is too large to process\n\nWe really only want to count runtime exceptions related to code changes. \n\nCommon exceptions seen in production are visible in [this chart](https://dashboards.gitlab.net/d/stage-groups-certify/stage-groups-certify-group-dashboard?orgId=1\u0026viewPanel=2929293674): \n\n![image](/uploads/d9703849ae66475e0d3eca4e47af7c5d/image.png)\n\nGenerally, exceptions that are caused by users are caught by the [`FailureHandler`](https://gitlab.com/gitlab-org/gitlab/blob/1eacf8a2dd618d798febd3e0d6bdd6c725f64c8d/lib/gitlab/email/failure_handler.rb#L36), which may serve as a useful list.\n\n### Proposal\n\nMake a change application-side to exclude exceptions of specific types from being counted in Error Budgets. \n\nThe change can be made directly in the [`EmailReceiver`](https://gitlab.com/gitlab-org/gitlab/blob/1eacf8a2dd618d798febd3e0d6bdd6c725f64c8d/lib/gitlab/email/receiver.rb#L28). \n\nIt could also be made on the measurement side by updating the [metrics catalog](https://gitlab.com/gitlab-com/runbooks/blob/344b476102f0e4e0546059d60375d72b53f5e15f/metrics-catalog/services/sidekiq.jsonnet#L187), where the `Gitlab::Email::AutoGeneratedEmailError` is already excluded.","state":"closed","created_at":"2022-10-11T11:04:43.369Z","updated_at":"2023-01-12T00:32:49.000Z","closed_at":"2022-10-27T04:26:13.478Z","closed_by":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"labels":["Category:Service Desk","Deliverable","Error Budget Improvement","Track Health Status","backend","devops::plan","group::respond","maintenance::workflow","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"}],"author":{"id":4418630,"username":"johnhope","name":"John Hope","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4418630/avatar.png","web_url":"https://gitlab.com/johnhope"},"type":"ISSUE","assignee":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377512","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377512","notes":"https://gitlab.com/api/v4/projects/278964/issues/377512/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377512/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377512","relative":"#377512","full":"gitlab-org/gitlab#377512"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":116657147,"iid":377511,"project_id":278964,"title":"Cube proxy doesn't work with Cube JS library","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nWhen using the `/api/v4/projects/1/product_analytics/request` Cube proxy endpoint in conjunction with [Cube JS library](https://cube.dev/docs/@cubejs-client-core), the library tries to use the `/api/v4/projects/1/product_analytics/request/load` endpoint even though it doesn't exist and so the proxy returns a `404`. If you update the endpoint:\n\n```patch\nIndex: ee/lib/api/analytics/product_analytics.rb\n\u003c+\u003eUTF-8\n===================================================================\ndiff --git a/ee/lib/api/analytics/product_analytics.rb b/ee/lib/api/analytics/product_analytics.rb\n--- a/ee/lib/api/analytics/product_analytics.rb\t(revision Staged)\n+++ b/ee/lib/api/analytics/product_analytics.rb\t(date 1665485601393)\n@@ -24,7 +24,7 @@\n \n       resource :projects, requirements: API::NAMESPACE_OR_PROJECT_REQUIREMENTS do\n         desc 'Proxy request to cube installation'\n-        post ':project_id/product_analytics/request' do\n+        post ':project_id/product_analytics/request/load' do\n           not_found! unless ::Feature.enabled?(:cube_api_proxy, project)\n           unauthorized! unless can?(current_user, :developer_access, project)\n```\n\nThe proxy returns a `401` even when logged in because the library doesn't seem to pass on all the authentication information from the parent page when POSTing.\n\n### Steps to reproduce\n\nPull down https://gitlab.com/gitlab-org/gitlab/-/merge_requests/98613 and apply the following patch:\n\n\u003cdetails\u003e\n\u003csummary\u003eLive data implementation\u003c/summary\u003e\n\n```patch\nIndex: config/webpack.config.js\nIDEA additional info:\nSubsystem: com.intellij.openapi.diff.impl.patch.CharsetEP\n\u003c+\u003eUTF-8\n===================================================================\ndiff --git a/config/webpack.config.js b/config/webpack.config.js\n--- a/config/webpack.config.js\t(revision Staged)\n+++ b/config/webpack.config.js\t(date 1665485350097)\n@@ -305,6 +305,11 @@\n         test: /\\.mjs$/,\n         use: [],\n       },\n+      {\n+        test: /(@cubejs-client\\/vue).*\\.(js)?$/,\n+        include: /node_modules/,\n+        loader: 'babel-loader',\n+      },\n       WEBPACK_USE_ESBUILD_LOADER \u0026\u0026 {\n         test: /\\.js$/,\n         exclude: (modulePath) =\u003e\nIndex: ee/app/assets/javascripts/product_analytics/dashboards/components/widgets/audience.vue\n\u003c+\u003eUTF-8\n===================================================================\ndiff --git a/ee/app/assets/javascripts/product_analytics/dashboards/components/widgets/audience.vue b/ee/app/assets/javascripts/product_analytics/dashboards/components/widgets/audience.vue\n--- a/ee/app/assets/javascripts/product_analytics/dashboards/components/widgets/audience.vue\t(revision Staged)\n+++ b/ee/app/assets/javascripts/product_analytics/dashboards/components/widgets/audience.vue\t(date 1665485378835)\n@@ -1,15 +1,63 @@\n \u003cscript\u003e\n+import { QueryRenderer } from '@cubejs-client/vue';\n+import { GlLineChart } from '@gitlab/ui/dist/charts';\n+import { CubejsApi, HttpTransport } from '@cubejs-client/core';\n+\n+const cubejsApi = new CubejsApi('1', {\n+  transport: new HttpTransport({\n+    apiUrl: '/api/v4/projects/1/product_analytics/request',\n+    method: 'POST',\n+  }),\n+});\n+\n export default {\n   name: 'AudienceWidget',\n+  components: {\n+    GlLineChart,\n+    QueryRenderer,\n+  },\n   props: {\n     widget: {\n       type: Object,\n       required: true,\n     },\n   },\n+  data() {\n+    return { cubejsApi };\n+  },\n+  methods: {\n+    series(resultSet) {\n+      if (!resultSet) {\n+        return [];\n+      }\n+\n+      const seriesNames = resultSet?.seriesNames();\n+      const pivot = resultSet?.chartPivot();\n+      const series = [];\n+\n+      seriesNames.forEach((e) =\u003e {\n+        const data = pivot.map((p) =\u003e [p.x, p[e.key]]);\n+        series.push({\n+          name: e.title,\n+          data,\n+        });\n+      });\n+\n+      return series;\n+    },\n+  },\n };\n \u003c/script\u003e\n \n \u003ctemplate\u003e\n-  \u003cp\u003e{{ __('Widgets content') }}\u003c/p\u003e\n+  \u003cquery-renderer :cubejs-api=\"cubejsApi\" :query=\"widget.query\"\u003e\n+    \u003ctemplate #default=\"{ resultSet }\"\u003e\n+      \u003cgl-line-chart\n+        :data=\"series(resultSet)\"\n+        :option=\"widget.options\"\n+        responsive\n+        v-bind=\"widget.props\"\n+      /\u003e\n+    \u003c/template\u003e\n+  \u003c/query-renderer\u003e\n \u003c/template\u003e\nIndex: ee/app/assets/javascripts/product_analytics/dashboards/components/analytics_dashboard.vue\n\u003c+\u003eUTF-8\n===================================================================\ndiff --git a/ee/app/assets/javascripts/product_analytics/dashboards/components/analytics_dashboard.vue b/ee/app/assets/javascripts/product_analytics/dashboards/components/analytics_dashboard.vue\n--- a/ee/app/assets/javascripts/product_analytics/dashboards/components/analytics_dashboard.vue\t(revision Staged)\n+++ b/ee/app/assets/javascripts/product_analytics/dashboards/components/analytics_dashboard.vue\t(date 1665485350105)\n@@ -2,6 +2,19 @@\n import CustomizableDashboard from 'ee/vue_shared/components/customizable_dashboard/customizable_dashboard.vue';\n import { __ } from '~/locale';\n \n+const overTimeQueries = {\n+  users: {\n+    measures: ['Jitsu.count'],\n+    timeDimensions: [\n+      {\n+        granularity: 'day',\n+        dimension: 'Jitsu.utcTime',\n+      },\n+    ],\n+    dimensions: ['Jitsu.eventType'],\n+  },\n+};\n+\n export default {\n   name: 'AnalyticsDashboard',\n   components: {\n@@ -12,16 +25,47 @@\n       widgets: [\n         {\n           type: 'ProductAnalyticsAudience',\n-          gridAttributes: { width: 3, height: 3 },\n-          props: { title: __('Test A') },\n-        },\n-        {\n-          type: 'ProductAnalyticsAudience',\n-          gridAttributes: { width: 2, height: 4 },\n-          props: { title: __('Test B') },\n+          gridAttributes: { x: 0, y: 0, height: 4, width: 6, minHeight: 4, minWidth: 6 },\n+          props: {\n+            title: __('Users / Time'),\n+            query: this.withFilters(overTimeQueries.users, 'day'),\n+            options: {\n+              xAxis: {\n+                name: __('Time'),\n+                type: 'time',\n+                axisLabel: {\n+                  interval: 0,\n+                  showMinLabel: false,\n+                  showMaxLabel: false,\n+                  align: 'right',\n+                },\n+              },\n+              yAxis: {\n+                name: __('Counts'),\n+              },\n+              legend: { show: false },\n+            },\n+          },\n         },\n       ],\n     };\n+  },\n+  methods: {\n+    withFilters(query, granularity) {\n+      const newQuery = {\n+        ...query,\n+      };\n+\n+      newQuery.timeDimensions = [\n+        {\n+          dimension: `Jitsu.utcTime`,\n+          dateRange: [new Date(2022, 8), new Date(2022, 10)],\n+          granularity: granularity || null,\n+        },\n+      ];\n+\n+      return newQuery;\n+    },\n   },\n };\n \u003c/script\u003e\nIndex: jest.config.base.js\n\u003c+\u003eUTF-8\n===================================================================\ndiff --git a/jest.config.base.js b/jest.config.base.js\n--- a/jest.config.base.js\t(revision Staged)\n+++ b/jest.config.base.js\t(date 1665485350107)\n@@ -153,6 +153,7 @@\n     'dateformat',\n     'lowlight',\n     'vscode-languageserver-types',\n+    '@cubejs-client/vue',\n     ...gfmParserDependencies,\n   ];\n \nIndex: package.json\n\u003c+\u003eUTF-8\n===================================================================\ndiff --git a/package.json b/package.json\n--- a/package.json\t(revision Staged)\n+++ b/package.json\t(date 1665485350111)\n@@ -50,6 +50,8 @@\n     \"@babel/core\": \"^7.18.5\",\n     \"@babel/preset-env\": \"^7.18.2\",\n     \"@codesandbox/sandpack-client\": \"^1.2.2\",\n+    \"@cubejs-client/core\": \"^0.31.0\",\n+    \"@cubejs-client/vue\": \"^0.31.0\",\n     \"@gitlab/at.js\": \"1.5.7\",\n     \"@gitlab/favicon-overlay\": \"2.0.0\",\n     \"@gitlab/svgs\": \"3.4.0\",\n@@ -268,4 +270,4 @@\n     \"node\": \"\u003e=12.22.1\",\n     \"yarn\": \"^1.10.0\"\n   }\n-}\n\\ No newline at end of file\n+}\nIndex: yarn.lock\n\u003c+\u003eUTF-8\n===================================================================\ndiff --git a/yarn.lock b/yarn.lock\n--- a/yarn.lock\t(revision Staged)\n+++ b/yarn.lock\t(date 1665485350155)\n@@ -992,6 +992,27 @@\n   resolved \"https://registry.yarnpkg.com/@csstools/selector-specificity/-/selector-specificity-2.0.1.tgz#b6b8d81780b9a9f6459f4bfe9226ac6aefaefe87\"\n   integrity sha512-aG20vknL4/YjQF9BSV7ts4EWm/yrjagAN7OWBNmlbEOUiu0llj4OGrFoOKK3g2vey4/p2omKCoHrWtPxSwV3HA==\n \n+\"@cubejs-client/core@^0.31.0\":\n+  version \"0.31.0\"\n+  resolved \"https://registry.yarnpkg.com/@cubejs-client/core/-/core-0.31.0.tgz#ee507a3841962a63b255e19f1575e66fd1c726ee\"\n+  integrity sha512-72+7dVsLURGEYR0FCImf1XPLnc849zKKYQPDk0O/tHShX+8+k8ARt5VLadCl61mbBHIZZgH3OFzvqSREQm+Stw==\n+  dependencies:\n+    core-js \"^3.6.5\"\n+    cross-fetch \"^3.0.2\"\n+    dayjs \"^1.10.4\"\n+    ramda \"^0.27.0\"\n+    url-search-params-polyfill \"^7.0.0\"\n+    uuid \"^8.3.2\"\n+\n+\"@cubejs-client/vue@^0.31.0\":\n+  version \"0.31.0\"\n+  resolved \"https://registry.yarnpkg.com/@cubejs-client/vue/-/vue-0.31.0.tgz#83db7d0ae153d12e2018faaa5b1dec00e02b8a57\"\n+  integrity sha512-7dm1yKFgQYx50BWnu6DPFr+bBFgnsyAZ0h1skrevtYU+s0kDBiwq1UQ45AZh/Q5w+AageenCh6N7bcn1AvVK8w==\n+  dependencies:\n+    \"@cubejs-client/core\" \"^0.31.0\"\n+    core-js \"^3.6.5\"\n+    ramda \"^0.27.0\"\n+\n \"@discoveryjs/json-ext@^0.5.0\":\n   version \"0.5.6\"\n   resolved \"https://registry.yarnpkg.com/@discoveryjs/json-ext/-/json-ext-0.5.6.tgz#d5e0706cf8c6acd8c6032f8d54070af261bbbb2f\"\n@@ -3802,7 +3823,7 @@\n   resolved \"https://registry.yarnpkg.com/core-js-pure/-/core-js-pure-3.6.5.tgz#c79e75f5e38dbc85a662d91eea52b8256d53b813\"\n   integrity sha512-lacdXOimsiD0QyNf9BC/mxivNJ/ybBGJXQFKzRekp1WTHoVUWsUHEn+2T8GJAzzIhyOuXA+gOxCVN3l+5PLPUA==\n \n-core-js@^3.25.5:\n+core-js@^3.25.5, core-js@^3.6.5:\n   version \"3.25.5\"\n   resolved \"https://registry.yarnpkg.com/core-js/-/core-js-3.25.5.tgz#e86f651a2ca8a0237a5f064c2fe56cef89646e27\"\n   integrity sha512-nbm6eZSjm+ZuBQxCUPQKQCoUEfFOXjUZ8dTTyikyKaWrTYmAVbykQfwsKE5dBK88u3QCkCrzsx/PPlKfhsvgpw==\n@@ -3882,6 +3903,13 @@\n   dependencies:\n     jquery \"\u003e= 1.9.1\"\n \n+cross-fetch@^3.0.2:\n+  version \"3.1.5\"\n+  resolved \"https://registry.yarnpkg.com/cross-fetch/-/cross-fetch-3.1.5.tgz#e1389f44d9e7ba767907f7af8454787952ab534f\"\n+  integrity sha512-lvb1SBsI0Z7GDwmuid+mU3kWVBwTVUbe7S0H52yaaAdQOXq2YktTCZdlAcNKFzE6QtRz0snpw9bNiPeOIkkQvw==\n+  dependencies:\n+    node-fetch \"2.6.7\"\n+\n cross-spawn@^6.0.5:\n   version \"6.0.5\"\n   resolved \"https://registry.yarnpkg.com/cross-spawn/-/cross-spawn-6.0.5.tgz#4a5ec7c64dfae22c3a14124dbacdee846d80cbc4\"\n@@ -4580,6 +4608,11 @@\n   resolved \"https://registry.yarnpkg.com/dateformat/-/dateformat-5.0.1.tgz#60a27a2deb339f888ba4532f533e25ac73ca3d19\"\n   integrity sha512-DrcKxOW2am3mtqoJwBTK3OlWcF0QSk1p8diEWwpu3Mf//VdURD7XVaeOV738JvcaBiFfm9o2fisoMhiJH0aYxg==\n \n+dayjs@^1.10.4:\n+  version \"1.11.5\"\n+  resolved \"https://registry.yarnpkg.com/dayjs/-/dayjs-1.11.5.tgz#00e8cc627f231f9499c19b38af49f56dc0ac5e93\"\n+  integrity sha512-CAdX5Q3YW3Gclyo5Vpqkgpj8fSdLQcRuzfX6mC6Phy0nfJ0eGYOeS7m4mt2plDWLAtA4TqTakvbboHvUxfe4iA==\n+\n de-indent@^1.0.2:\n   version \"1.0.2\"\n   resolved \"https://registry.yarnpkg.com/de-indent/-/de-indent-1.0.2.tgz#b2038e846dc33baa5796128d0804b455b8c1e21d\"\n@@ -9163,7 +9196,7 @@\n   resolved \"https://registry.yarnpkg.com/node-ensure/-/node-ensure-0.0.0.tgz#ecae764150de99861ec5c810fd5d096b183932a7\"\n   integrity sha1-7K52QVDemYYexcgQ/V0Jaxg5Mqc=\n \n-node-fetch@^2.6.1, node-fetch@^2.6.7:\n+node-fetch@2.6.7, node-fetch@^2.6.1, node-fetch@^2.6.7:\n   version \"2.6.7\"\n   resolved \"https://registry.yarnpkg.com/node-fetch/-/node-fetch-2.6.7.tgz#24de9fba827e3b4ae44dc8b20256a379160052ad\"\n   integrity sha512-ZjMPFEfVx5j+y2yF35Kzx5sF7kDzxuDj6ziH4FFbOp87zKDZNx8yExJIb05OGF4Nlt9IHFIMBkRl41VdvcNdbQ==\n@@ -10196,6 +10229,11 @@\n   resolved \"https://registry.yarnpkg.com/quick-lru/-/quick-lru-4.0.1.tgz#5b8878f113a58217848c6482026c73e1ba57727f\"\n   integrity sha512-ARhCpm70fzdcvNQfPoy49IaanKkTlRWF2JMzqhcJbhSFRZv7nPTvZJdcY7301IPmvW+/p0RgIWnQDLJxifsQ7g==\n \n+ramda@^0.27.0:\n+  version \"0.27.2\"\n+  resolved \"https://registry.yarnpkg.com/ramda/-/ramda-0.27.2.tgz#84463226f7f36dc33592f6f4ed6374c48306c3f1\"\n+  integrity sha512-SbiLPU40JuJniHexQSAgad32hfwd+DRUdwF2PlVuI5RZD0/vahUco7R8vD86J/tcEKKF9vZrUVwgtmGCqlCKyA==\n+\n randombytes@^2.0.0, randombytes@^2.0.1, randombytes@^2.0.5, randombytes@^2.1.0:\n   version \"2.1.0\"\n   resolved \"https://registry.yarnpkg.com/randombytes/-/randombytes-2.1.0.tgz#df6f84372f0270dc65cdf6291349ab7a473d4f2a\"\n@@ -11999,6 +12037,11 @@\n     mime-types \"^2.1.27\"\n     schema-utils \"^3.0.0\"\n \n+url-search-params-polyfill@^7.0.0:\n+  version \"7.0.1\"\n+  resolved \"https://registry.yarnpkg.com/url-search-params-polyfill/-/url-search-params-polyfill-7.0.1.tgz#b900cd9a0d9d2ff757d500135256f2344879cbff\"\n+  integrity sha512-bAw7L2E+jn9XHG5P9zrPnHdO0yJub4U+yXJOdpcpkr7OBd9T8oll4lUos0iSGRcDvfZoLUKfx9a6aNmIhJ4+mQ==\n+\n url@^0.11.0:\n   version \"0.11.0\"\n   resolved \"https://registry.yarnpkg.com/url/-/url-0.11.0.tgz#3838e97cfc60521eb73c525a8e55bfdd9e2e28f1\"\n```\n\u003c/details\u003e\n\nAnd then visit a dashboard: `http://gdk.test:3000/gitlab-org/gitlab-test/-/product_analytics/dashboards`. You should see the `404`.\n\nApply the API patch in the summary and observe the `401`.\n\n### What is the current *bug* behavior?\n\nThe Cube proxy endpoint returns a `404`/`401` when being used by the JS library.\n\n### What is the expected *correct* behavior?\n\nThe Cube proxy endpoint returns a `201`/`200` when being used by the JS library along with the correctly formatted query data.\n\n### Possible fixes\n\nHaving tested this, I was able to make everything work by changing the Cube proxy endpoint:\n\n* Change to a `GET`\n* Append the `/load` to the end of the endpoint\n* Add the `queryType` param to the Cube API query body\n\n\u003cdetails\u003e\n\u003csummary\u003eA working patch for the frontend\u003c/summary\u003e\n\n```patch\nIndex: config/webpack.config.js\n\u003c+\u003eUTF-8\n===================================================================\ndiff --git a/config/webpack.config.js b/config/webpack.config.js\n--- a/config/webpack.config.js\t(revision HEAD)\n+++ b/config/webpack.config.js\t(revision Staged)\n@@ -305,6 +305,11 @@\n         test: /\\.mjs$/,\n         use: [],\n       },\n+      {\n+        test: /(@cubejs-client\\/vue).*\\.(js)?$/,\n+        include: /node_modules/,\n+        loader: 'babel-loader',\n+      },\n       WEBPACK_USE_ESBUILD_LOADER \u0026\u0026 {\n         test: /\\.js$/,\n         exclude: (modulePath) =\u003e\nIndex: ee/app/assets/javascripts/product_analytics/dashboards/components/widgets/audience.vue\n\u003c+\u003eUTF-8\n===================================================================\ndiff --git a/ee/app/assets/javascripts/product_analytics/dashboards/components/widgets/audience.vue b/ee/app/assets/javascripts/product_analytics/dashboards/components/widgets/audience.vue\n--- a/ee/app/assets/javascripts/product_analytics/dashboards/components/widgets/audience.vue\t(revision HEAD)\n+++ b/ee/app/assets/javascripts/product_analytics/dashboards/components/widgets/audience.vue\t(revision Staged)\n@@ -1,15 +1,60 @@\n \u003cscript\u003e\n+import { QueryRenderer } from '@cubejs-client/vue';\n+import { GlLineChart } from '@gitlab/ui/dist/charts';\n+import { CubejsApi } from '@cubejs-client/core';\n+\n+const cubejsApi = new CubejsApi('1', {\n+  apiUrl: '/api/v4/projects/1/product_analytics/request',\n+});\n+\n export default {\n   name: 'AudienceWidget',\n+  components: {\n+    GlLineChart,\n+    QueryRenderer,\n+  },\n   props: {\n     widget: {\n       type: Object,\n       required: true,\n     },\n   },\n+  data() {\n+    return { cubejsApi };\n+  },\n+  methods: {\n+    series(resultSet) {\n+      if (!resultSet) {\n+        return [];\n+      }\n+\n+      const seriesNames = resultSet?.seriesNames();\n+      const pivot = resultSet?.chartPivot();\n+      const series = [];\n+\n+      seriesNames.forEach((e) =\u003e {\n+        const data = pivot.map((p) =\u003e [p.x, p[e.key]]);\n+        series.push({\n+          name: e.title,\n+          data,\n+        });\n+      });\n+\n+      return series;\n+    },\n+  },\n };\n \u003c/script\u003e\n \n \u003ctemplate\u003e\n-  \u003cp\u003e{{ __('Widgets content') }}\u003c/p\u003e\n+  \u003cquery-renderer :cubejs-api=\"cubejsApi\" :query=\"widget.query\"\u003e\n+    \u003ctemplate #default=\"{ resultSet }\"\u003e\n+      \u003cgl-line-chart\n+        :data=\"series(resultSet)\"\n+        :option=\"widget.options\"\n+        responsive\n+        v-bind=\"widget.props\"\n+      /\u003e\n+    \u003c/template\u003e\n+  \u003c/query-renderer\u003e\n \u003c/template\u003e\nIndex: ee/app/assets/javascripts/product_analytics/dashboards/components/analytics_dashboard.vue\n\u003c+\u003eUTF-8\n===================================================================\ndiff --git a/ee/app/assets/javascripts/product_analytics/dashboards/components/analytics_dashboard.vue b/ee/app/assets/javascripts/product_analytics/dashboards/components/analytics_dashboard.vue\n--- a/ee/app/assets/javascripts/product_analytics/dashboards/components/analytics_dashboard.vue\t(revision HEAD)\n+++ b/ee/app/assets/javascripts/product_analytics/dashboards/components/analytics_dashboard.vue\t(revision Staged)\n@@ -2,6 +2,19 @@\n import CustomizableDashboard from 'ee/vue_shared/components/customizable_dashboard/customizable_dashboard.vue';\n import { __ } from '~/locale';\n \n+const overTimeQueries = {\n+  users: {\n+    measures: ['Jitsu.count'],\n+    timeDimensions: [\n+      {\n+        granularity: 'day',\n+        dimension: 'Jitsu.utcTime',\n+      },\n+    ],\n+    dimensions: ['Jitsu.eventType'],\n+  },\n+};\n+\n export default {\n   name: 'AnalyticsDashboard',\n   components: {\n@@ -12,16 +25,47 @@\n       widgets: [\n         {\n           type: 'ProductAnalyticsAudience',\n-          gridAttributes: { width: 3, height: 3 },\n-          props: { title: __('Test A') },\n-        },\n-        {\n-          type: 'ProductAnalyticsAudience',\n-          gridAttributes: { width: 2, height: 4 },\n-          props: { title: __('Test B') },\n+          gridAttributes: { x: 0, y: 0, height: 4, width: 6, minHeight: 4, minWidth: 6 },\n+          props: {\n+            title: __('Users / Time'),\n+            query: this.withFilters(overTimeQueries.users, 'day'),\n+            options: {\n+              xAxis: {\n+                name: __('Time'),\n+                type: 'time',\n+                axisLabel: {\n+                  interval: 0,\n+                  showMinLabel: false,\n+                  showMaxLabel: false,\n+                  align: 'right',\n+                },\n+              },\n+              yAxis: {\n+                name: __('Counts'),\n+              },\n+              legend: { show: false },\n+            },\n+          },\n         },\n       ],\n     };\n+  },\n+  methods: {\n+    withFilters(query, granularity) {\n+      const newQuery = {\n+        ...query,\n+      };\n+\n+      newQuery.timeDimensions = [\n+        {\n+          dimension: `Jitsu.utcTime`,\n+          dateRange: [new Date(2022, 8), new Date(2022, 10)],\n+          granularity: granularity || null,\n+        },\n+      ];\n+\n+      return newQuery;\n+    },\n   },\n };\n \u003c/script\u003e\nIndex: jest.config.base.js\n\u003c+\u003eUTF-8\n===================================================================\ndiff --git a/jest.config.base.js b/jest.config.base.js\n--- a/jest.config.base.js\t(revision HEAD)\n+++ b/jest.config.base.js\t(revision Staged)\n@@ -153,6 +153,7 @@\n     'dateformat',\n     'lowlight',\n     'vscode-languageserver-types',\n+    '@cubejs-client/vue',\n     ...gfmParserDependencies,\n   ];\n \nIndex: package.json\n\u003c+\u003eUTF-8\n===================================================================\ndiff --git a/package.json b/package.json\n--- a/package.json\t(revision HEAD)\n+++ b/package.json\t(revision Staged)\n@@ -50,6 +50,8 @@\n     \"@babel/core\": \"^7.18.5\",\n     \"@babel/preset-env\": \"^7.18.2\",\n     \"@codesandbox/sandpack-client\": \"^1.2.2\",\n+    \"@cubejs-client/core\": \"^0.31.0\",\n+    \"@cubejs-client/vue\": \"^0.31.0\",\n     \"@gitlab/at.js\": \"1.5.7\",\n     \"@gitlab/favicon-overlay\": \"2.0.0\",\n     \"@gitlab/svgs\": \"3.4.0\",\n@@ -268,4 +270,4 @@\n     \"node\": \"\u003e=12.22.1\",\n     \"yarn\": \"^1.10.0\"\n   }\n-}\n\\ No newline at end of file\n+}\nIndex: yarn.lock\n\u003c+\u003eUTF-8\n===================================================================\ndiff --git a/yarn.lock b/yarn.lock\n--- a/yarn.lock\t(revision HEAD)\n+++ b/yarn.lock\t(revision Staged)\n@@ -992,6 +992,27 @@\n   resolved \"https://registry.yarnpkg.com/@csstools/selector-specificity/-/selector-specificity-2.0.1.tgz#b6b8d81780b9a9f6459f4bfe9226ac6aefaefe87\"\n   integrity sha512-aG20vknL4/YjQF9BSV7ts4EWm/yrjagAN7OWBNmlbEOUiu0llj4OGrFoOKK3g2vey4/p2omKCoHrWtPxSwV3HA==\n \n+\"@cubejs-client/core@^0.31.0\":\n+  version \"0.31.0\"\n+  resolved \"https://registry.yarnpkg.com/@cubejs-client/core/-/core-0.31.0.tgz#ee507a3841962a63b255e19f1575e66fd1c726ee\"\n+  integrity sha512-72+7dVsLURGEYR0FCImf1XPLnc849zKKYQPDk0O/tHShX+8+k8ARt5VLadCl61mbBHIZZgH3OFzvqSREQm+Stw==\n+  dependencies:\n+    core-js \"^3.6.5\"\n+    cross-fetch \"^3.0.2\"\n+    dayjs \"^1.10.4\"\n+    ramda \"^0.27.0\"\n+    url-search-params-polyfill \"^7.0.0\"\n+    uuid \"^8.3.2\"\n+\n+\"@cubejs-client/vue@^0.31.0\":\n+  version \"0.31.0\"\n+  resolved \"https://registry.yarnpkg.com/@cubejs-client/vue/-/vue-0.31.0.tgz#83db7d0ae153d12e2018faaa5b1dec00e02b8a57\"\n+  integrity sha512-7dm1yKFgQYx50BWnu6DPFr+bBFgnsyAZ0h1skrevtYU+s0kDBiwq1UQ45AZh/Q5w+AageenCh6N7bcn1AvVK8w==\n+  dependencies:\n+    \"@cubejs-client/core\" \"^0.31.0\"\n+    core-js \"^3.6.5\"\n+    ramda \"^0.27.0\"\n+\n \"@discoveryjs/json-ext@^0.5.0\":\n   version \"0.5.6\"\n   resolved \"https://registry.yarnpkg.com/@discoveryjs/json-ext/-/json-ext-0.5.6.tgz#d5e0706cf8c6acd8c6032f8d54070af261bbbb2f\"\n@@ -3802,7 +3823,7 @@\n   resolved \"https://registry.yarnpkg.com/core-js-pure/-/core-js-pure-3.6.5.tgz#c79e75f5e38dbc85a662d91eea52b8256d53b813\"\n   integrity sha512-lacdXOimsiD0QyNf9BC/mxivNJ/ybBGJXQFKzRekp1WTHoVUWsUHEn+2T8GJAzzIhyOuXA+gOxCVN3l+5PLPUA==\n \n-core-js@^3.25.5:\n+core-js@^3.25.5, core-js@^3.6.5:\n   version \"3.25.5\"\n   resolved \"https://registry.yarnpkg.com/core-js/-/core-js-3.25.5.tgz#e86f651a2ca8a0237a5f064c2fe56cef89646e27\"\n   integrity sha512-nbm6eZSjm+ZuBQxCUPQKQCoUEfFOXjUZ8dTTyikyKaWrTYmAVbykQfwsKE5dBK88u3QCkCrzsx/PPlKfhsvgpw==\n@@ -3882,6 +3903,13 @@\n   dependencies:\n     jquery \"\u003e= 1.9.1\"\n \n+cross-fetch@^3.0.2:\n+  version \"3.1.5\"\n+  resolved \"https://registry.yarnpkg.com/cross-fetch/-/cross-fetch-3.1.5.tgz#e1389f44d9e7ba767907f7af8454787952ab534f\"\n+  integrity sha512-lvb1SBsI0Z7GDwmuid+mU3kWVBwTVUbe7S0H52yaaAdQOXq2YktTCZdlAcNKFzE6QtRz0snpw9bNiPeOIkkQvw==\n+  dependencies:\n+    node-fetch \"2.6.7\"\n+\n cross-spawn@^6.0.5:\n   version \"6.0.5\"\n   resolved \"https://registry.yarnpkg.com/cross-spawn/-/cross-spawn-6.0.5.tgz#4a5ec7c64dfae22c3a14124dbacdee846d80cbc4\"\n@@ -4580,6 +4608,11 @@\n   resolved \"https://registry.yarnpkg.com/dateformat/-/dateformat-5.0.1.tgz#60a27a2deb339f888ba4532f533e25ac73ca3d19\"\n   integrity sha512-DrcKxOW2am3mtqoJwBTK3OlWcF0QSk1p8diEWwpu3Mf//VdURD7XVaeOV738JvcaBiFfm9o2fisoMhiJH0aYxg==\n \n+dayjs@^1.10.4:\n+  version \"1.11.5\"\n+  resolved \"https://registry.yarnpkg.com/dayjs/-/dayjs-1.11.5.tgz#00e8cc627f231f9499c19b38af49f56dc0ac5e93\"\n+  integrity sha512-CAdX5Q3YW3Gclyo5Vpqkgpj8fSdLQcRuzfX6mC6Phy0nfJ0eGYOeS7m4mt2plDWLAtA4TqTakvbboHvUxfe4iA==\n+\n de-indent@^1.0.2:\n   version \"1.0.2\"\n   resolved \"https://registry.yarnpkg.com/de-indent/-/de-indent-1.0.2.tgz#b2038e846dc33baa5796128d0804b455b8c1e21d\"\n@@ -9163,7 +9196,7 @@\n   resolved \"https://registry.yarnpkg.com/node-ensure/-/node-ensure-0.0.0.tgz#ecae764150de99861ec5c810fd5d096b183932a7\"\n   integrity sha1-7K52QVDemYYexcgQ/V0Jaxg5Mqc=\n \n-node-fetch@^2.6.1, node-fetch@^2.6.7:\n+node-fetch@2.6.7, node-fetch@^2.6.1, node-fetch@^2.6.7:\n   version \"2.6.7\"\n   resolved \"https://registry.yarnpkg.com/node-fetch/-/node-fetch-2.6.7.tgz#24de9fba827e3b4ae44dc8b20256a379160052ad\"\n   integrity sha512-ZjMPFEfVx5j+y2yF35Kzx5sF7kDzxuDj6ziH4FFbOp87zKDZNx8yExJIb05OGF4Nlt9IHFIMBkRl41VdvcNdbQ==\n@@ -10196,6 +10229,11 @@\n   resolved \"https://registry.yarnpkg.com/quick-lru/-/quick-lru-4.0.1.tgz#5b8878f113a58217848c6482026c73e1ba57727f\"\n   integrity sha512-ARhCpm70fzdcvNQfPoy49IaanKkTlRWF2JMzqhcJbhSFRZv7nPTvZJdcY7301IPmvW+/p0RgIWnQDLJxifsQ7g==\n \n+ramda@^0.27.0:\n+  version \"0.27.2\"\n+  resolved \"https://registry.yarnpkg.com/ramda/-/ramda-0.27.2.tgz#84463226f7f36dc33592f6f4ed6374c48306c3f1\"\n+  integrity sha512-SbiLPU40JuJniHexQSAgad32hfwd+DRUdwF2PlVuI5RZD0/vahUco7R8vD86J/tcEKKF9vZrUVwgtmGCqlCKyA==\n+\n randombytes@^2.0.0, randombytes@^2.0.1, randombytes@^2.0.5, randombytes@^2.1.0:\n   version \"2.1.0\"\n   resolved \"https://registry.yarnpkg.com/randombytes/-/randombytes-2.1.0.tgz#df6f84372f0270dc65cdf6291349ab7a473d4f2a\"\n@@ -11999,6 +12037,11 @@\n     mime-types \"^2.1.27\"\n     schema-utils \"^3.0.0\"\n \n+url-search-params-polyfill@^7.0.0:\n+  version \"7.0.1\"\n+  resolved \"https://registry.yarnpkg.com/url-search-params-polyfill/-/url-search-params-polyfill-7.0.1.tgz#b900cd9a0d9d2ff757d500135256f2344879cbff\"\n+  integrity sha512-bAw7L2E+jn9XHG5P9zrPnHdO0yJub4U+yXJOdpcpkr7OBd9T8oll4lUos0iSGRcDvfZoLUKfx9a6aNmIhJ4+mQ==\n+\n url@^0.11.0:\n   version \"0.11.0\"\n   resolved \"https://registry.yarnpkg.com/url/-/url-0.11.0.tgz#3838e97cfc60521eb73c525a8e55bfdd9e2e28f1\"\n```\n\u003c/details\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eA working patch for the API endpoint\u003c/summary\u003e\n\n```patch\nIndex: ee/lib/api/analytics/product_analytics.rb\n\u003c+\u003eUTF-8\n===================================================================\ndiff --git a/ee/lib/api/analytics/product_analytics.rb b/ee/lib/api/analytics/product_analytics.rb\n--- a/ee/lib/api/analytics/product_analytics.rb\t(revision HEAD)\n+++ b/ee/lib/api/analytics/product_analytics.rb\t(revision Staged)\n@@ -24,7 +24,7 @@\n \n       resource :projects, requirements: API::NAMESPACE_OR_PROJECT_REQUIREMENTS do\n         desc 'Proxy request to cube installation'\n-        post ':project_id/product_analytics/request' do\n+        get ':project_id/product_analytics/request/load' do\n           not_found! unless ::Feature.enabled?(:cube_api_proxy, project)\n           unauthorized! unless can?(current_user, :developer_access, project)\n \n@@ -42,7 +42,7 @@\n               \"Content-Type\": 'application/json',\n               Authorization: JWT.encode(payload, Gitlab::CurrentSettings.cube_api_key, 'HS256')\n             },\n-            body: { \"query\" =\u003e params[\"query\"] }.to_json\n+            body: { \"query\" =\u003e params[\"query\"], \"queryType\": params[\"queryType\"] }.to_json\n           )\n \n           Gitlab::Json.parse(response.body)\nIndex: ee/spec/requests/api/analytics/product_analytics_spec.rb\n\u003c+\u003eUTF-8\n===================================================================\ndiff --git a/ee/spec/requests/api/analytics/product_analytics_spec.rb b/ee/spec/requests/api/analytics/product_analytics_spec.rb\n--- a/ee/spec/requests/api/analytics/product_analytics_spec.rb\t(revision HEAD)\n+++ b/ee/spec/requests/api/analytics/product_analytics_spec.rb\t(revision Staged)\n@@ -7,7 +7,7 @@\n \n   let(:current_user) { project.owner }\n \n-  describe 'POST projects/:id/product_analytics/request' do\n+  describe 'GET projects/:id/product_analytics/request/load' do\n     before do\n       stub_cube_load\n       stub_ee_application_setting(cube_api_key: 'testtest')\n@@ -20,7 +20,7 @@\n       end\n \n       it 'returns a 404' do\n-        post api(\"/projects/#{project.id}/product_analytics/request\", current_user)\n+        get api(\"/projects/#{project.id}/product_analytics/request/load\", current_user)\n \n         expect(response).to have_gitlab_http_status(:not_found)\n       end\n@@ -34,7 +34,7 @@\n       end\n \n       it 'returns an unauthorized error' do\n-        post api(\"/projects/#{project.id}/product_analytics/request\", current_user)\n+        get api(\"/projects/#{project.id}/product_analytics/request/load\", current_user)\n \n         expect(response).to have_gitlab_http_status(:unauthorized)\n       end\n@@ -47,10 +47,10 @@\n         project.add_developer(current_user)\n       end\n \n-      it 'returns a 201' do\n-        post api(\"/projects/#{project.id}/product_analytics/request\", current_user)\n+      it 'returns a 200' do\n+        get api(\"/projects/#{project.id}/product_analytics/request/load\", current_user)\n \n-        expect(response).to have_gitlab_http_status(:created)\n+        expect(response).to have_gitlab_http_status(:ok)\n       end\n     end\n \n@@ -60,7 +60,7 @@\n       end\n \n       it 'returns a 404' do\n-        post api(\"/projects/#{project.id}/product_analytics/request\", current_user)\n+        get api(\"/projects/#{project.id}/product_analytics/request/load\", current_user)\n \n         expect(response).to have_gitlab_http_status(:not_found)\n       end\n@@ -72,7 +72,7 @@\n       end\n \n       it 'returns a 404' do\n-        post api(\"/projects/#{project.id}/product_analytics/request\", current_user)\n+        get api(\"/projects/#{project.id}/product_analytics/request/load\", current_user)\n \n         expect(response).to have_gitlab_http_status(:not_found)\n       end\n```\n\u003c/details\u003e","state":"closed","created_at":"2022-10-11T10:44:49.226Z","updated_at":"2022-10-13T15:00:56.791Z","closed_at":"2022-10-13T15:00:56.747Z","closed_by":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"labels":["Category:Product Analytics","backend","bug::functional","devops::analytics","feature flag","group::product analytics","section::analytics","type::bug","workflow::verification"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"}],"author":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"type":"ISSUE","assignee":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377511","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377511","notes":"https://gitlab.com/api/v4/projects/278964/issues/377511/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377511/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377511","relative":"#377511","full":"gitlab-org/gitlab#377511"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8562,"epic":{"id":582186,"iid":8562,"title":"Product Analytics Stack Development","url":"/groups/gitlab-org/-/epics/8562","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116655882,"iid":377509,"project_id":278964,"title":"Create pre-scan verification status component for a drawer","description":"\nNew pre-scan verification status component for a drawer according to [design](https://www.figma.com/file/o6NoqgLnxv0KnK2y9Qum51/DAST-Configuration-UI?node-id=2740%3A167120) \n\nSix different states for all possible statuses","state":"closed","created_at":"2022-10-11T10:23:16.533Z","updated_at":"2022-11-14T11:51:56.571Z","closed_at":"2022-10-27T23:18:40.025Z","closed_by":{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"},"labels":["Category:DAST","UX","devops::secure","frontend","group::dynamic analysis","on-demand scan","section::sec","type::feature","workflow::scheduling"],"milestone":null,"assignees":[{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"}],"author":{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"},"type":"ISSUE","assignee":{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377509","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377509","notes":"https://gitlab.com/api/v4/projects/278964/issues/377509/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377509/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377509","relative":"#377509","full":"gitlab-org/gitlab#377509"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7069,"epic":{"id":380891,"iid":7069,"title":"DAST Pre-scan verification","url":"/groups/gitlab-org/-/epics/7069","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":116653565,"iid":377508,"project_id":278964,"title":"Resolve users N+1 queries for child epics","description":"When visiting an epic page that has child epics, the query [`childItems`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/related_items_tree/queries/epic_children.query.graphql) executes N+1s for users, similar to:\n\n```sql\nSELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = {USER_ID} \n```\n\n\u003cdetails\u003e\u003csummary\u003ebacktrace\u003c/summary\u003e\n\n```\n[\n  \"lib/peek/views/active_record.rb:55:in `block in setup_subscribers'\",\n  \"app/models/event.rb:199:in `note?'\",\n  \"app/models/event.rb:291:in `commit_note?'\",\n  \"app/models/event.rb:386:in `block (2 levels) in capability'\",\n  \"app/models/event.rb:386:in `any?'\",\n  \"app/models/event.rb:386:in `block in capability'\",\n  \"app/models/event.rb:385:in `each'\",\n  \"app/models/event.rb:385:in `flat_map'\",\n  \"app/models/event.rb:385:in `capability'\",\n  \"app/models/event.rb:155:in `visible_to_user?'\",\n  \"app/finders/events_finder.rb:118:in `block in paginated_filtered_by_user_visibility'\",\n  \"app/finders/events_finder.rb:118:in `paginated_filtered_by_user_visibility'\",\n  \"app/finders/events_finder.rb:47:in `execute'\",\n  \"app/finders/concerns/finder_with_cross_project_access.rb:37:in `block in execute'\",\n  \"app/finders/concerns/finder_with_cross_project_access.rb:40:in `execute'\",\n  \"ee/app/graphql/resolvers/epics/default_project_for_issue_creation_resolver.rb:34:in `last_issue_creation_event'\",\n  \"ee/app/graphql/resolvers/epics/default_project_for_issue_creation_resolver.rb:13:in `resolve'\",\n  \"lib/gitlab/graphql/present/field_extension.rb:18:in `resolve'\",\n  \"lib/gitlab/graphql/tracers/timer_tracer.rb:20:in `trace'\",\n  \"lib/gitlab/graphql/generic_tracing.rb:48:in `with_labkit_tracing'\",\n  \"lib/gitlab/graphql/generic_tracing.rb:38:in `platform_trace'\",\n  \"lib/gitlab/graphql/tracers/logger_tracer.rb:14:in `trace'\",\n  \"lib/gitlab/graphql/tracers/metrics_tracer.rb:13:in `trace'\",\n  \"lib/gitlab/graphql/tracers/application_context_tracer.rb:23:in `trace'\",\n  \"lib/gitlab/graphql/tracers/timer_tracer.rb:20:in `trace'\",\n  \"lib/gitlab/graphql/generic_tracing.rb:48:in `with_labkit_tracing'\",\n  \"lib/gitlab/graphql/generic_tracing.rb:38:in `platform_trace'\",\n  \"lib/gitlab/graphql/tracers/logger_tracer.rb:14:in `trace'\",\n  \"lib/gitlab/graphql/tracers/metrics_tracer.rb:13:in `trace'\",\n  \"lib/gitlab/graphql/tracers/application_context_tracer.rb:23:in `trace'\",\n  \"lib/gitlab/graphql/tracers/timer_tracer.rb:20:in `trace'\",\n  \"lib/gitlab/graphql/generic_tracing.rb:48:in `with_labkit_tracing'\",\n  \"lib/gitlab/graphql/generic_tracing.rb:38:in `platform_trace'\",\n  \"lib/gitlab/graphql/tracers/logger_tracer.rb:14:in `trace'\",\n  \"lib/gitlab/graphql/tracers/metrics_tracer.rb:13:in `trace'\",\n  \"lib/gitlab/graphql/tracers/application_context_tracer.rb:23:in `trace'\",\n  \"app/graphql/gitlab_schema.rb:51:in `multiplex'\",\n  \"app/controllers/graphql_controller.rb:160:in `execute_multiplex'\",\n  \"app/controllers/graphql_controller.rb:57:in `execute'\",\n  \"ee/lib/gitlab/ip_address_state.rb:10:in `with'\",\n  \"ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'\",\n  \"app/controllers/application_controller.rb:531:in `set_current_admin'\",\n  \"lib/gitlab/session.rb:11:in `with_session'\",\n  \"app/controllers/application_controller.rb:522:in `set_session_storage'\",\n  \"app/controllers/application_controller.rb:516:in `set_locale'\",\n  \"app/controllers/application_controller.rb:510:in `set_current_context'\",\n  \"ee/lib/omni_auth/strategies/group_saml.rb:41:in `other_phase'\",\n  \"lib/gitlab/jira/middleware.rb:19:in `call'\",\n  \"lib/gitlab/database/query_analyzer.rb:37:in `within'\"\n]\n```\n\n\u003c/details\u003e","state":"closed","created_at":"2022-10-11T09:49:31.557Z","updated_at":"2022-10-11T18:46:07.906Z","closed_at":"2022-10-11T18:46:07.853Z","closed_by":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"labels":["GraphQL","backend","devops::plan","frontend","group::product planning","maintenance::performance","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377508","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377508","notes":"https://gitlab.com/api/v4/projects/278964/issues/377508/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377508/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377508","relative":"#377508","full":"gitlab-org/gitlab#377508"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116653530,"iid":377507,"project_id":278964,"title":"Adjust data visualization palette to be less saturated","description":"## Problem\n\nIn https://gitlab.com/gitlab-org/gitlab/-/merge_requests/99160 the contribution chart was set up to use the [data visualization palette](https://design.gitlab.com/data-visualization/color). The palette is too vibrant which causes some vibration between darker hues and the background surface.\n\n## Solution\n\n- Decrease the saturation towards the darker end of the palette.\n- Normalize hues, chroma, and lightness across the entire palette.\n- Ensure the contrast ratios still satisfy 3:1 for the 500 steps on both `#1f1f1f` and `#ffffff`.\n\n## Screenshots\n\nRefer to the uploaded designs for exploration.\n\n[![Figmacon.svg](/uploads/60e7e92d2bc3aaef1e604dfb4613ba9e/Figmacon.svg) View the working file in Figma →](https://www.figma.com/file/17NxNEMa7i28Is8sMetO2H/branch/CZyAZxx4Km9kndgy2FyrI0/Data-Visualization)\n\n| **Before** | **After** |\n| ------ | ------ |\n| ![image](/uploads/9db019f5c1de740fc38734aefc940af2/image.png) | ![image](/uploads/4ac850456e4425f0a164027cda657007/image.png) |\n| ![image](/uploads/7393d8ddf2ce519dfdfef00a93d95332/image.png) | ![image](/uploads/55eb4ba5d1963de0d594549ad2fddf03/image.png) |\n| ![CleanShot_2022-10-19_at_15.15.17_2x](/uploads/fbb5bb804e97f8e2f5725c03c18b0be1/CleanShot_2022-10-19_at_15.15.17_2x.png) | ![CleanShot_2022-10-19_at_15.15.54_2x](/uploads/2df630f65a2ad16b2cc1c20dc0db8d4e/CleanShot_2022-10-19_at_15.15.54_2x.png) |\n\n\u003cdetails\u003e\u003csummary\u003eOriginal description\u003c/summary\u003e\n  The result is a very vibrant color that is super hard to parse, especially compared to the previous version:\n\n| Before | After |\n|--------|-------|\n|![Screenshot_2022-09-28_at_22.31.38](/uploads/4e34e3fce039466149d59ea8aa6a3913/Screenshot_2022-09-28_at_22.31.38.png)|![Screenshot_2022-10-04_at_00.08.11](/uploads/eba06d3d10b384b04a40fb2bcbddcbd9/Screenshot_2022-10-04_at_00.08.11.png)|\n\nIn the original MR that introduced these colors, @jeldergl and I took a considerable amount of effort into coming up with colors that did explicitly not vibrate so much, see the original thread here:\n\nhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/79838#note_830737626\n\nThe problem is that with the new version there is a major increase in vibrancy between step 0 and step 1 that is not repeated again. We did actually briefly consider the color-set that is used now, but decided against it (last entry in the linked comment):\n\nhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/79838#note_831957270\n\nTo put it into measurable terms, here's the reason why the new colors look off, contrast compared to Step 0 (gray), according to https://webaim.org/resources/contrastchecker/\n\n| Color | Before Hex | After Hex | Contrast Before | Contrast After |\n|-------|------------|-----------|-----------------|----------------|\n|Step 0 |`#303030`   |`#404040`  | 1               | 1              |\n|Step 1 |`#333861`   |`#1e23a8`  | 1.18            | 1.08           |       \n|Step 2 |`#4a5593`   |`#445cf2`  | 1.89            | 2              |\n|Step 3 |`#6172c5`   |`#97acff`  | 2.96            | 4.7            |\n|Step 4 |`#788ff7`   |`#e9ebff`  | 4.44            | 8.78           |\n\nTo visualize this difference, here's a regression on the contrast values (also note the difference in y-axis):\n\n|Before|After|\n|---|---|\n|![Screenshot_2022-10-11_at_11.35.12](/uploads/c645d6ce1b6428d6a7b7bbdfa6167a52/Screenshot_2022-10-11_at_11.35.12.png)|![image](/uploads/14a96d3b80198895262d37621fd5a8ff/image.png)|\n\n\nI think it's valid to brighten up the lighter end of the values, but I think the lower end needs to be much, much grayer, perhaps by bleinding it with one bluer midpoint according to https://meyerweb.com/eric/tools/color-blend/#788FF7:333861:2:hex\n \nI suggest reverting to the original values in darkmode.\n\u003c/details\u003e","state":"closed","created_at":"2022-10-11T09:49:11.310Z","updated_at":"2022-11-13T14:03:43.147Z","closed_at":"2022-10-24T13:46:32.950Z","closed_by":{"id":4017299,"username":"jeldergl","name":"Jeremy Elder","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4017299/avatar.png","web_url":"https://gitlab.com/jeldergl"},"labels":["Category:User Profile","SUS::Impacting","bug::ux","devops::manage","frontend","group::foundations","section::dev","severity::4","type::bug","user profile","workflow::design"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":4017299,"username":"jeldergl","name":"Jeremy Elder","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4017299/avatar.png","web_url":"https://gitlab.com/jeldergl"}],"author":{"id":9622933,"username":"janis","name":"Janis Altherr","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9622933/avatar.png","web_url":"https://gitlab.com/janis"},"type":"ISSUE","assignee":{"id":4017299,"username":"jeldergl","name":"Jeremy Elder","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4017299/avatar.png","web_url":"https://gitlab.com/jeldergl"},"user_notes_count":26,"merge_requests_count":0,"upvotes":7,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377507","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377507","notes":"https://gitlab.com/api/v4/projects/278964/issues/377507/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377507/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377507","relative":"#377507","full":"gitlab-org/gitlab#377507"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116604723,"iid":377474,"project_id":278964,"title":"Do not allow requirement proxy object to have different project_id from its work item","description":"It is possible to have a `Requirement` object with a different `project_id` from the work item\nthat it belongs to. The following spec fails:\n\n``` ruby\n  it 'creates a requirement from different project' do\n    work_item = create(:work_item, :requirement)\n    work_item.requirement.update(project: create(:project))\n\n    expect(work_item.project).to eq(work_item.reload.requirement.project)\n  end\n```\n\nThere is no indication that this scenario is happening in production, but\nit would be nice to have a model validation to prevent this.\n\nThe following discussion from !98313 should be addressed:\n\n- [ ] @cablett started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/98313#note_1109864916):  (+6 comments)\n\n    \u003e @felipe_artur do you reckon it's worth adding a test to check if the synnced requirement has been updated as well? I would think they both share the associated test report collection so I think it'll be ok - but wanted to get your read on that :thumbsup:","state":"closed","created_at":"2022-10-10T18:00:11.690Z","updated_at":"2022-12-06T18:32:00.438Z","closed_at":"2022-11-01T13:23:31.597Z","closed_by":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"labels":["Deliverable","Stretch","Track Health Status","backend","devops::plan","group::certify","maintenance::refactor","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"}],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377474","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377474","notes":"https://gitlab.com/api/v4/projects/278964/issues/377474/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377474/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377474","relative":"#377474","full":"gitlab-org/gitlab#377474"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":116594780,"iid":377443,"project_id":278964,"title":"Add shared example which verifies  when an event is not published","description":"The following discussion from !100318 should be addressed:\n\n- [ ] @splattael started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/100318#note_1130069727):  (+1 comment)\n\n    \u003e It seems that [`consume_event`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/spec/support/shared_examples/lib/gitlab/event_store_shared_examples.rb#L18) does not check the condition and consumes the event no matter what.\n    \u003e \n    \u003e @fabiopitino Do we need to tweak the spec helper to emit the event only if the condition is met (if any)? :thinking:\n\n### Goal\n\nadd a shared example which verifies that an event is *not* published","state":"closed","created_at":"2022-10-10T15:32:24.260Z","updated_at":"2022-10-25T21:08:01.103Z","closed_at":"2022-10-25T21:08:01.078Z","closed_by":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"labels":["backend","maintenance::test-gap","test","type::maintenance","workflow::in review"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"}],"author":{"id":438961,"username":"splattael","name":"Peter Leitzen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/97c2ff0fc99cc4eede69be9ac238c304?s=80\u0026d=identicon","web_url":"https://gitlab.com/splattael"},"type":"ISSUE","assignee":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/377443","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/377443","notes":"https://gitlab.com/api/v4/projects/278964/issues/377443/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/377443/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#377443","relative":"#377443","full":"gitlab-org/gitlab#377443"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null}]