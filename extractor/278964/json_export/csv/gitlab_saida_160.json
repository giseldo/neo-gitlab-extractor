[{"id":28242691,"iid":39205,"project_id":278964,"title":"Add \"key: value\" pair to determine if pipeline is parent or child","description":"In order to display a pipeline graph the backend serializes the pipeline data including `triggered_pipelines` array and `triggered_by_pipeline` object.\n\n* `triggered_pipelines` contains all downstream pipelines from the given pipeline being displayed\n* `triggered_by_pipeline` contain the upstream pipeline from the given pipeline being displayed\n\nPrior to introducing parent/child pipelines all upstream and downstream pipelines were cross-project. With parent/child pipelines we have:\n\n* child pipeline is a type of downstream pipeline having the same project of the referenced pipeline\n* parent pipeline is a type of upstream pipeline having the same project of the referenced pipeline\n\nIn order to display a `Child` or `Parent` label (in the ~frontend) beside each upstream or downstream pipeline, the ~frontend is [currently comparing the `project.id`](https://gitlab.com/gitlab-org/gitlab/merge_requests/21196#note_257737961) field of the pipeline being displayed with the `project.id` of the object in `triggered_pipelines` or `triggered_by_pipeline`. If the `project.id`s match, then we are in presence of either child or parent pipeline. If they don't match we have cross-project downstream or upstream pipelines.\n\n## Problem statement\n\nComparing `project.id`s in the ~frontend is not a good design choice because it leaks domain specific information to the UI layer. We should instead provide this information from the ~backend when we serialize the pipeline data for the graph.\n\nThe objects in `triggered_pipelines` or `triggered_by_pipeline` should contain 2 flags:\n\n```\nparent: true/false,\nchild: true/false\n```\n\n- If `parent: true`, the frontend displays `Parent` label for the pipeline in `triggered_by_pipeline`\n- If `child: true`, the frontend displays `Child` label for the pipeline in `triggered_pipelines`\n- Otherwise no labels are displayed\n- `parent: true` should never appear in `triggered_pipelines` (downstream)\n- `child: true` should never appear in `triggered_by_pipeline` (upstream)\n\nAlternatively we could have a single attribute that can have multiple values (whatever makes sense also from performance perspective):\n\n```\npipeline_relationship: (child|parent|upstream-cross-project|downstream-cross-project|nil)\n```\n\n## Challenges\n\nThe main challenge in implementing this is to do it in a performant way. Adding check if the pipeline is child or parent and serialize that information introduces `N+1` queries as each downstream pipeline has to check whether it's parent and whether it's child.\n\nIdeally we should pass the main (currently displayed) pipeline object when serializing each `triggered_pipelines` and `triggered_by_pipeline` so that we can directly compare them to the main pipeline rather than checking for the existence of child/parent pipelines for each of them.","state":"closed","created_at":"2019-12-10T13:01:54.550Z","updated_at":"2021-03-01T16:56:52.329Z","closed_at":"2021-03-01T16:56:52.283Z","closed_by":{"id":109884,"username":"sarahghp","name":"Sarah Groff Hennigh-Palermo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b3a4be73ec22c01a87b77ddc2bb6f7d?s=80\u0026d=identicon","web_url":"https://gitlab.com/sarahghp"},"labels":["Category:Continuous Integration","Category:Pipeline Authoring","backend","bridge pipelines","devops::verify","frontend","group::pipeline authoring","maintenance::refactor","priority::3","section::ops","severity::3","workflow::planning breakdown"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"type":"ISSUE","assignee":null,"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39205","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39205","notes":"https://gitlab.com/api/v4/projects/278964/issues/39205/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39205/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39205","relative":"#39205","full":"gitlab-org/gitlab#39205"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28235124,"iid":39202,"project_id":278964,"title":"Step 5: Version Control for Snippets: Development of the Migration  Plan (MVP)","description":"**Important:** All the new functionality must be implemented behind the feature flag `:version_snippets`. Besides, it has to be scoped for projects. Therefore, instead of checking if the feature flag is enabled or not (`Feature.enabled?(:version_snippets)`), we will check if the feature flag is enabled for specific projects (`Feature.enabled?(:version_snippets, project)`). This way, for testing purposes, we can enable the feature flag on the project `gitlab-org/gitlab` for example, instead of enabling it globally.\n\nThis issue represents the development of the Migration Plan.  The output of this issue will be the migration file.\n\nMigration aside, when we reach this point the feature flag should have been removed. This would mean that any new snippet will create automatically the snippet repository if flag enabled. Every snippet update will involve a repository update and every deletion will remove the repository as well. The import/export process, should automatically create a repository and commit the information inside the `content` column in the repository.","state":"closed","created_at":"2019-12-10T12:36:15.972Z","updated_at":"2020-03-18T07:07:54.288Z","closed_at":"2020-03-11T15:05:23.587Z","closed_by":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"labels":["Category:Snippets","Deliverable","backend","devops::create","direction","group::editor","type::feature","workflow::verification"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"}],"author":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"type":"ISSUE","assignee":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"user_notes_count":15,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39202","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39202","notes":"https://gitlab.com/api/v4/projects/278964/issues/39202/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39202/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39202","relative":"#39202","full":"gitlab-org/gitlab#39202"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":239,"epic":{"id":470,"iid":239,"title":"Version control for snippets","url":"/groups/gitlab-org/-/epics/239","group_id":9970,"human_readable_end_date":"Jun 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":28234744,"iid":39201,"project_id":278964,"title":"Step 3: Version Control for Snippets: Import/Export (MVP)","description":"**Important:** All the new functionality must be implemented behind the feature flag `:version_snippets`. Besides, it has to be scoped for projects. Therefore, instead of checking if the feature flag is enabled or not (`Feature.enabled?(:version_snippets)`), we will check if the feature flag is enabled for specific projects (`Feature.enabled?(:version_snippets, project)`). This way, for testing purposes, we can enable the feature flag on the project `gitlab-org/gitlab` for example, instead of enabling it globally.\n\nIn order to export the snippets, we will have to add a new `Gitlab::ImportExport::SnippetRepoSaver` to the list of importers in `Projects::ImportExport::ExportService#L38`. Through this service, we can iterate over each snippet repository and call `bundle_to_disk` on it.\n\nIn a similar way we will have to update the `Gitlab::ImportExport::Importer`. We will have to add a new `SnippetRepoRestorer` class and also add it to the list of restorers.\n\n## Availability and Testing\nPotentially requires new E2E","state":"closed","created_at":"2019-12-10T12:34:55.086Z","updated_at":"2020-06-02T09:44:12.644Z","closed_at":"2020-03-06T16:03:33.089Z","closed_by":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"labels":["Category:Snippets","DEPRECATED_project import","Deliverable","backend","devops::create","direction","group::editor","type::feature","workflow::verification"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"}],"author":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"type":"ISSUE","assignee":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39201","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39201","notes":"https://gitlab.com/api/v4/projects/278964/issues/39201/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39201/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39201","relative":"#39201","full":"gitlab-org/gitlab#39201"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":239,"epic":{"id":470,"iid":239,"title":"Version control for snippets","url":"/groups/gitlab-org/-/epics/239","group_id":9970,"human_readable_end_date":"Jun 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":28233633,"iid":39199,"project_id":278964,"title":"Step 2: Version Control for Snippets: Create snippet repositories (MVP)","description":"**Important:** All the new functionality must be implemented behind the feature flag `:version_snippets`. Besides, it has to be scoped for projects. Therefore, instead of checking if the feature flag is enabled or not (`Feature.enabled?(:version_snippets)`), we will check if the feature flag is enabled for specific projects (`Feature.enabled?(:version_snippets, project)`). This way, for testing purposes, we can enable the feature flag on the project `gitlab-org/gitlab` for example, instead of enabling it globally.\n\nIn this issue, we will create the repository once a [`ProjectSnippet` is created](https://gitlab.com/gitlab-org/gitlab/blob/master/app/services/create_snippet_service.rb#L24). We have to remember that, for the moment, we will only create the repository for `ProjectSnippet`. Basically, it would be a matter of adding `snippet.repository.create_if_not_exists` in the proper place.\n\nThis issue depends on https://gitlab.com/gitlab-org/gitlab/issues/39176 to be implemented first.","state":"closed","created_at":"2019-12-10T12:30:51.077Z","updated_at":"2020-03-05T09:02:13.285Z","closed_at":"2020-02-17T09:30:40.599Z","closed_by":{"id":273486,"username":"jameslopez","name":"James Lopez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/273486/avatar.png","web_url":"https://gitlab.com/jameslopez"},"labels":["Category:Snippets","backend","devops::create","direction","group::editor","missed:12.7","type::feature","workflow::in review"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"}],"author":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"type":"ISSUE","assignee":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"user_notes_count":5,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39199","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39199","notes":"https://gitlab.com/api/v4/projects/278964/issues/39199/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39199/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39199","relative":"#39199","full":"gitlab-org/gitlab#39199"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":239,"epic":{"id":470,"iid":239,"title":"Version control for snippets","url":"/groups/gitlab-org/-/epics/239","group_id":9970,"human_readable_end_date":"Jun 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":28217436,"iid":39185,"project_id":278964,"title":"Docker container expiration policy, settings ui  improvements","description":"The purpose of this issue is to extend the work implemented in the MR: https://gitlab.com/gitlab-org/gitlab/merge_requests/21240 by:\n\n\n* [x]   pre-fill empty dropdowns with the first value in the options https://gitlab.com/gitlab-org/gitlab/merge_requests/22112\n* [x]    disable dropdown and text-area if the policy is set to 'off' https://gitlab.com/gitlab-org/gitlab/merge_requests/22112\n* [x]    evaluate if we really have the `wildcards` documentation:\n  - ~~if yes add the correct link~~\n  - if no remove the link\n* [x]    Add select all tags link https://gitlab.com/gitlab-org/gitlab/merge_requests/22969\n* [x]    Clarify or change `Expiration latest` https://gitlab.com/gitlab-org/gitlab/merge_requests/22969\n* [-]    Fix styling issue or open relative UX debt issue","state":"closed","created_at":"2019-12-10T11:42:19.363Z","updated_at":"2020-01-24T13:24:44.306Z","closed_at":"2020-01-24T13:24:44.261Z","closed_by":{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"labels":["Category:Container Registry","UX","container registry expert","devops::package","frontend","group::package registry","type::feature","workflow::production"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"}],"author":{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"type":"ISSUE","assignee":{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"user_notes_count":23,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39185","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":5},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"5 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39185","notes":"https://gitlab.com/api/v4/projects/278964/issues/39185/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39185/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39185","relative":"#39185","full":"gitlab-org/gitlab#39185"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2270,"epic":{"id":15539,"iid":2270,"title":"Cleanup policy for tags","url":"/groups/gitlab-org/-/epics/2270","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":28178508,"iid":39176,"project_id":278964,"title":"Step 1: Version Control for Snippets: Create repository model for snippets (MVP)","description":"**Important:** All the new functionality must be implemented behind the feature flag `:version_snippets`. Besides, it has to be scoped for projects. Therefore, instead of checking if the feature flag is enabled or not (`Feature.enabled?(:version_snippets)`), we will check if the feature flag is enabled for specific projects (`Feature.enabled?(:version_snippets, project)`). This way, for testing purposes, we can enable the feature flag on the project `gitlab-org/gitlab` for example, instead of enabling it globally.\n\nIn order to implement the new functionality for versioned control snippets, we need several models to be created. One of the would be the `Snippets::Repository`.\n\nThis repository will be very similar to `DesignManagement::Repository`. The main thing different is that we're not going to enable LFS be default and that every snippet get their own repository.\n\nThe new snippet repositories will be stored in a different hashed directory than the project, wiki, and design management repository. Nevertheless, we need to scope them somehow because compare to the other types of repositories, we can have several snippet repositories in the same place as the other repositories.\n\nThere are two options: \n1. create a new folder for all snippet repositories (`/hashed_repository_dir/snippets/`). Inside we will save every snippet repo.\n1. ~~use a suffix that identifies the snippet that the repository belongs to: `/hashed_repository_dir/\u003crepository_hash\u003e.snippet.\u003csnippet_id\u003e.git`~~\n\nI'm not sure which option would be better but, at the moment, I prefer option 2 because it's simpler for cloning and pushing routes. Nevertheless, option 2 has the benefit of allowing hashing the snippets directory in the future and also perform global operations like delete all snippet repositories when the project is deleted.\n\nWe have to create as well a new method in the project model:\n\n```ruby\ndef snippet_repository(snippet_id)\n  @snippet_repositories[snippet_id] ||= Snippets::Repository(self, snippet_id)\nend\n```\n\nThen, in the snippet we can create:\n\n```ruby\ndef repository\n  project\u0026.snippet_repository(self.id)\nend\n````\n\nThe new logic for snippets should live (for now) inside the `ProjectSnippet` model. Nevertheless, I think we will have scenarios and views where we will use the same code indistinctively for project and personal snippets. Therefore, it makes sense if we add the new code to the `Snippet` model.\n\nWe have to create a new `TYPE` for this new kind of repository in `lib/gitlab/gl_repository.rb`.","state":"closed","created_at":"2019-12-10T09:41:41.917Z","updated_at":"2020-03-09T07:45:09.325Z","closed_at":"2020-02-14T12:22:44.379Z","closed_by":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"labels":["Category:Snippets","backend","devops::create","direction","group::editor","missed:12.7","type::feature","workflow::verification"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"}],"author":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"type":"ISSUE","assignee":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"user_notes_count":8,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39176","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39176","notes":"https://gitlab.com/api/v4/projects/278964/issues/39176/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39176/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39176","relative":"#39176","full":"gitlab-org/gitlab#39176"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":239,"epic":{"id":470,"iid":239,"title":"Version control for snippets","url":"/groups/gitlab-org/-/epics/239","group_id":9970,"human_readable_end_date":"Jun 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":28177842,"iid":39173,"project_id":278964,"title":"Follow up: Add optional 'options' param to convertObjectPropsToSnakeCase","description":"## Summary\n\nFollow up from https://gitlab.com/gitlab-org/gitlab/merge_requests/18921#note_258004511, to add additional optional parameters to the `convertObjectPropsToSnakeCase` function.\n\n## Improvements\n\n* Provides a similar interface to the `convertObjectPropsToCamelCase` function\n* Allows more flexible use of this function\n\n## Involved components\n* `app/assets/javascripts/lib/utils/common_utils.js`\n* `spec/javascripts/lib/utils/common_utils_spec.js`\n* `ee/app/assets/javascripts/analytics/cycle_analytics/components/custom_stage_form.vue`\n\nAny other files that use the `convertObjectPropsToSnakeCase`","state":"closed","created_at":"2019-12-10T09:28:59.985Z","updated_at":"2020-03-19T16:08:21.605Z","closed_at":"2020-03-19T16:08:21.559Z","closed_by":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"labels":["backstage [DEPRECATED]","frontend","javascript","workflow::verification"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"}],"author":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"type":"ISSUE","assignee":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39173","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39173","notes":"https://gitlab.com/api/v4/projects/278964/issues/39173/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39173/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39173","relative":"#39173","full":"gitlab-org/gitlab#39173"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28177736,"iid":39172,"project_id":278964,"title":"Internal Pages API: Source path should not have trailing \"/\"","description":"When we built the internal Pages API (https://gitlab.com/gitlab-org/gitlab/issues/28781) we suffixed the source path with `/`\r\n```ruby\r\n    def source\r\n      {\r\n        type: 'file',\r\n        path: File.join(project.full_path, 'public/')\r\n      }\r\n    end\r\n```\r\nhttps://gitlab.com/gitlab-org/gitlab/blob/2a267e8cb7fd8a17a870c64f6b39ca9593d79f21/app/models/pages/lookup_path.rb#L24-28\r\n\r\nThis is different from what the legacy `disk` config source is doing. When using it `Reader.resolvePath` receives\r\n```\r\ngitlab-org/gitlab-org.127.0.0.1.xip.io/public\r\n```\r\nas value for the `publicPath` argument, while when using the `gitlab` config source it gets\r\n```\r\ngitlab-org/gitlab-org.127.0.0.1.xip.io/public/\r\n```\r\nwhich leads to error like\r\n```\r\n\"gitlab-org/gitlab-org.127.0.0.1.xip.io/public\" should be in \"gitlab-org/gitlab-org.127.0.0.1.xip.io/public/\"\r\n```\r\nand eventually to 404 Not Found - https://gitlab.com/gitlab-org/gitlab-pages/blob/266b942aba1f98c0548472542cfc6b7cec7a5f17/internal/serving/disk/reader.go#L71-112.\r\n\r\nNot sure why we went with that trailing `/` bit looks like we need to remove it in order to match the `disk` source? It works fine and the pages are served when I remove it from the API response.","state":"closed","created_at":"2019-12-10T09:26:37.368Z","updated_at":"2020-02-17T21:49:09.780Z","closed_at":"2020-02-17T21:49:09.334Z","closed_by":{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"},"labels":["Category:Pages","Release::P3","cicd::active","devops::release","needs weight","priority::3","severity::3","type::bug","workflow::production"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"}],"author":{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"},"type":"ISSUE","assignee":{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"},"user_notes_count":23,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39172","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39172","notes":"https://gitlab.com/api/v4/projects/278964/issues/39172/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39172/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39172","relative":"#39172","full":"gitlab-org/gitlab#39172"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28164875,"iid":39145,"project_id":278964,"title":"Clean up Stickyfill's created in diff_file_header","description":"## Description\n\nThe following discussion from !21076 should be addressed:\n\n- [ ] @pslaughter started a [discussion](https://gitlab.com/gitlab-org/gitlab/merge_requests/21076#note_257846797): \n\n    \u003e **issue (non-blocking):** It looks like we never remove the sticky polyfill objects that are created. This is somewhat significant since these `diff_file_header` can show up **a lot**.\n    \u003e \n    \u003e Let's handle this in a follow up. :smile:\n\n**Oh yeah? How are we expected to remove these things?**\n\n[Stickyfill.remove](https://github.com/wilddeer/stickyfill#stickyfillremoveelementlist)","state":"closed","created_at":"2019-12-09T22:35:44.169Z","updated_at":"2020-07-18T07:05:53.590Z","closed_at":"2020-06-22T10:57:08.163Z","closed_by":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"labels":["Deliverable","backstage [DEPRECATED]","devops::create","frontend","group::source code","maintenance::refactor"],"milestone":{"id":1233746,"iid":49,"group_id":9970,"title":"13.2","description":"https://about.gitlab.com/releases/2020/07/22/gitlab-13-2-released/","state":"closed","created_at":"2020-04-09T17:28:01.032Z","updated_at":"2022-04-13T14:48:24.167Z","due_date":"2020-07-17","start_date":"2020-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/49"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":2233420,"username":"pslaughter","name":"Paul Slaughter","state":"active","avatar_url":"https://secure.gravatar.com/avatar/631b25421eb206ab44cb2793ef09d881?s=80\u0026d=identicon","web_url":"https://gitlab.com/pslaughter"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":9,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39145","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39145","notes":"https://gitlab.com/api/v4/projects/278964/issues/39145/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39145/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39145","relative":"#39145","full":"gitlab-org/gitlab#39145"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28151038,"iid":39136,"project_id":278964,"title":"Epics: Add issue autocomplete is slow","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nAutocomplete of adding issue is slow. This is because we are fetching all issues once `#` is entered.\n\n### Steps to reproduce\n\n* Go to `https://gitlab.com/groups/gitlab-org/-/epics/1997`\n* Click on `Add an issue`\n* Type `#`\n\n\nAdded ~UX because I think we should revisit how autocomplete works here.","state":"closed","created_at":"2019-12-09T20:50:30.047Z","updated_at":"2021-11-08T16:55:04.956Z","closed_at":"2020-01-17T19:17:03.843Z","closed_by":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"labels":["Category:Portfolio Management","UX","[deprecated] Accepting merge requests","backend","devops::plan","epics","frontend","group::product planning","priority::3","severity::3","type::bug","workflow::planning breakdown"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[],"author":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39136","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39136","notes":"https://gitlab.com/api/v4/projects/278964/issues/39136/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39136/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":"https://gitlab.com/api/v4/projects/278964/issues/22276"},"references":{"short":"#39136","relative":"#39136","full":"gitlab-org/gitlab#39136"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28149123,"iid":39131,"project_id":278964,"title":"Add deprecation notice to go-ast-scanner","description":"\n### Summary\nWe no longer use https://gitlab.com/gitlab-org/security-products/analyzers/go-ast-scanner and a deprecation notice should be added to the repo. \n\nSlack thread with full context https://gitlab.slack.com/archives/CLA54H7PY/p1575636218126300 (internal)\n\n\u003etheoretick In that case we should add a deprecation notice. fcatteau do you know which version it was deprecated?\n\n\u003efcatteau https://gitlab.com/gitlab-org/security-products/sast/merge_requests/99\n\n\u003efcatteau so that would be from SAST 10.7 up to 11.2, unless some Docker images have been updated\n\n\u003efcatteau one has to check the images, or the pipelines used to create, and then update these images\n\n\u003etheoretick I was just thinking of adding one to the repo, not inline logging but that's probably worth it too :thinking_face:","state":"closed","created_at":"2019-12-09T19:50:32.646Z","updated_at":"2020-11-13T03:43:41.951Z","closed_at":"2020-03-17T14:01:53.986Z","closed_by":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"labels":["Category:SAST","SAST: Scanner Update","deprecation","devops::secure","documentation","group::static analysis","workflow::verification"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"}],"author":{"id":32707,"username":"rossfuhrman","name":"rossfuhrman","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/32707/avatar.png","web_url":"https://gitlab.com/rossfuhrman"},"type":"ISSUE","assignee":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39131","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39131","notes":"https://gitlab.com/api/v4/projects/278964/issues/39131/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39131/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39131","relative":"#39131","full":"gitlab-org/gitlab#39131"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28147619,"iid":39126,"project_id":278964,"title":"Replace Vue key=index in licenses list table","description":"The following discussion from !18934 should be addressed:\n\n- [x] @pslaughter started a [discussion](https://gitlab.com/gitlab-org/gitlab/merge_requests/18934#note_257736904): \n\n    \u003e **nitpick:** Let's create a follow up to see if there's a better key than `index` here.","state":"closed","created_at":"2019-12-09T18:56:28.491Z","updated_at":"2020-01-10T09:47:51.516Z","closed_at":"2019-12-24T00:41:11.860Z","closed_by":{"id":5099268,"username":"allenl","name":"Waylon Reed","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef644495e63804978503726dd51c585d?s=80\u0026d=identicon","web_url":"https://gitlab.com/allenl"},"labels":["devops::secure","frontend","maintenance::refactor"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":5099268,"username":"allenl","name":"Waylon Reed","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef644495e63804978503726dd51c585d?s=80\u0026d=identicon","web_url":"https://gitlab.com/allenl"}],"author":{"id":2233420,"username":"pslaughter","name":"Paul Slaughter","state":"active","avatar_url":"https://secure.gravatar.com/avatar/631b25421eb206ab44cb2793ef09d881?s=80\u0026d=identicon","web_url":"https://gitlab.com/pslaughter"},"type":"ISSUE","assignee":{"id":5099268,"username":"allenl","name":"Waylon Reed","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef644495e63804978503726dd51c585d?s=80\u0026d=identicon","web_url":"https://gitlab.com/allenl"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39126","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39126","notes":"https://gitlab.com/api/v4/projects/278964/issues/39126/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39126/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39126","relative":"#39126","full":"gitlab-org/gitlab#39126"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28147195,"iid":39124,"project_id":278964,"title":"Geo backfill process race with log cursor","description":"When all the projects have been backfilled, the backfiller process starts a race with log cursor which leads to resource wasting and the geo log file is full of \"Cannot obtain an exclusive lease\".\nWe should probably stop backfill jobs completely. \n\n\u003e\u003e\u003e \n**valery**:\nCan anybody explain why we use `ProjectUpdatedRecentlyFinder`  after `ProjectUnsyncedFinder` for projects? Doesn't it create too much concurrent workers? Isn't this a reason of large rate of \"Cannot obtain an exclusive lease\". I mean when we update some project, we create event + it can be returned by `ProjectUpdatedRecentlyFinder` so in other words, it creates too much redundancy. Am I missing something? (edited) \n5 replies\n\n**douglas**:\nIIRC, we call Project Update RecentlyFinder because we are not 100% sure that our event handling system on a Geo secondary is reliable, so in case we lost an event we can keep the repository up to date. And we only call it if there is remaining capacity in the worker.\n\n**valery**:\nI think we should keep this finder but we should let the cursor time to do its job. Something like 20 minutes. WDYT?\n\n**valery**:\nI will create an issue, I feel like it's an important one as we waste lots of resources and we log lots of garbage. Think of some project that already in sync for a long time, in this case, the main job of backfiller is now to compete with the cursor.\n\n**douglas**:\nYes, we should stop them as soon as we finished the initial backfill.\n\n**mkozono**:\nThis has been rolling around in my head as well. When we create a secondary GeoNode, we could store the highest ID of each replicable, and tell backfill processes to go super slow after that (or stop completely, if that replicable has verification)\n\u003e\u003e\u003e\n\n### Proposal\n\nFor project and wiki repos, remove \"Recently Updated\" ids from the backfill process. We have a verification anyway.","state":"closed","created_at":"2019-12-09T18:47:32.233Z","updated_at":"2023-01-10T15:16:09.885Z","closed_at":"2023-01-10T15:16:09.865Z","closed_by":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"labels":["bug::performance","devops::systems","group::geo","section::enablement"],"milestone":null,"assignees":[],"author":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"type":"ISSUE","assignee":null,"user_notes_count":17,"merge_requests_count":0,"upvotes":5,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39124","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39124","notes":"https://gitlab.com/api/v4/projects/278964/issues/39124/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39124/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39124","relative":"#39124","full":"gitlab-org/gitlab#39124"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28146607,"iid":39119,"project_id":278964,"title":"Releases page cannot be displayed when tag contains a slash","description":"https://sentry.gitlab.net/gitlab/gitlabcom/issues/1085929/\n\n```\nActionController::UrlGenerationError: No route matches {:action=\u003e\"evidence\", :controller=\u003e\"projects/releases\", :format=\u003e:json, :namespace_id=\u003e#\u003cGroup id: [redacted]\u003e, :project_id=\u003e#\u003cProject id: [redacted]\u003e, :tag=\u003e\"release/Demo-3.4.0.2\"}, possible unmatched constraints: [:tag]\n  action_dispatch/journey/formatter.rb:57:in `generate'\n    raise ActionController::UrlGenerationError, message\n  action_dispatch/routing/route_set.rb:744:in `generate'\n    @set.formatter.generate(named_route, options, recall, PARAMETERIZE)\n  action_dispatch/routing/route_set.rb:775:in `generate'\n    Generator.new(route_key, options, recall, self).generate\n  action_dispatch/routing/route_set.rb:822:in `url_for'\n    path, params = generate(route_name, path_options, recall)\n  action_dispatch/routing/route_set.rb:273:in `call'\n    t._routes.url_for(hash, route_name, url_strategy)\n...\n(171 additional frame(s) were not displayed)\n\nActionController::UrlGenerationError: No route matches {:action=\u003e\"evidence\", :controller=\u003e\"projects/releases\", :format=\u003e:json, :namespace_id=\u003e#\u003cGroup id: [redacted]\u003e, :project_id=\u003e#\u003cProject id: [redacted]\u003e, :tag=\u003e\"release/Demo-3.4.0.2\"}, possible unmatched constraints: [:tag]\n```\n\n### Examples\n\n1. https://gitlab.zendesk.com/agent/tickets/140997 (internal use)","state":"closed","created_at":"2019-12-09T18:32:00.240Z","updated_at":"2020-11-12T10:32:17.609Z","closed_at":"2020-01-09T11:43:21.511Z","closed_by":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"labels":["Category:Release Orchestration","customer","devops::release","group::release","priority::2","severity::1","type::bug","workflow::in review"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":4391348,"username":"sean_carroll","name":"Sean Carroll","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4391348/avatar.png","web_url":"https://gitlab.com/sean_carroll"}],"author":{"id":402401,"username":"jobbot","name":"Bot","state":"active","avatar_url":"https://secure.gravatar.com/avatar/aaa6738f1ebf25404010884af511b0e7?s=80\u0026d=identicon","web_url":"https://gitlab.com/jobbot"},"type":"ISSUE","assignee":{"id":4391348,"username":"sean_carroll","name":"Sean Carroll","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4391348/avatar.png","web_url":"https://gitlab.com/sean_carroll"},"user_notes_count":25,"merge_requests_count":2,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39119","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39119","notes":"https://gitlab.com/api/v4/projects/278964/issues/39119/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39119/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39119","relative":"#39119","full":"gitlab-org/gitlab#39119"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28146401,"iid":39118,"project_id":278964,"title":"Add seed data for package managers","description":"## Summary\n\nAdd seed data for NPM, Maven, and Conan packages.\n\n## Improvements\n\nCurrently there is only seed data to prepopulate NPM packages in local development environments. Adding the other package types would be an efficiency improvement, especially within the Package Team as it would allow for quicker testing of packages without having to create or publish new ones every time the database is reset. Reseting the database should not be feared for losing the packages that you have spent time creating for test purposes, this would help towards alleviating the bad habit of not working on clean database installs.\n\nThe package seed file is `ee/db/fixtures/development/26_packages.rb`\n\n## Risks\n\nNo foreseeable risks.\n\n## Involved components\n\n\n## Intended side effects\n\nWhen a developer creates or resets the database and runs the standard seed task, there will be projects with at least one of each of the existing package types.\n\nata","state":"closed","created_at":"2019-12-09T18:23:52.481Z","updated_at":"2020-09-23T22:07:03.783Z","closed_at":"2020-02-03T13:08:29.349Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Package Registry","backstage [DEPRECATED]","devops::package","group::package registry","package:active","workflow::production"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":3,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39118","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39118","notes":"https://gitlab.com/api/v4/projects/278964/issues/39118/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39118/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39118","relative":"#39118","full":"gitlab-org/gitlab#39118"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28139926,"iid":39097,"project_id":278964,"title":"Research: Release generation from `.gitlab-ci.yml` via API call","description":"## Problem to solve \n\nResearch the original issue: https://gitlab.com/gitlab-org/gitlab/issues/38352\n\nGoals: \n1) Understand where should the Release be created from - Runner or Rails in iteration 1 \n2) Discuss implications of building new service \n3) Describe how this fits with assets in release","state":"closed","created_at":"2019-12-09T15:02:23.075Z","updated_at":"2020-01-28T14:24:18.355Z","closed_at":"2020-01-23T18:31:04.085Z","closed_by":{"id":4905402,"username":"jreporter","name":"Jackie Porter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4905402/avatar.png","web_url":"https://gitlab.com/jreporter"},"labels":["Category:Release Orchestration","Release::P3","cicd::active","devops::release","type::feature","workflow::solution validation"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[],"author":{"id":4905402,"username":"jreporter","name":"Jackie Porter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4905402/avatar.png","web_url":"https://gitlab.com/jreporter"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39097","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39097","notes":"https://gitlab.com/api/v4/projects/278964/issues/39097/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39097/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39097","relative":"#39097","full":"gitlab-org/gitlab#39097"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2510,"epic":{"id":18384,"iid":2510,"title":"Release generation from `.gitlab-ci.yml` via API call","url":"/groups/gitlab-org/-/epics/2510","group_id":9970,"human_readable_end_date":"Jan 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":28133290,"iid":39087,"project_id":278964,"title":"Align both *_project_snippet and *_personal_snippet abilities.","description":"The following discussion from !20613 should be addressed:\n\n- [ ] @reprazent started a [discussion](https://gitlab.com/gitlab-org/gitlab/merge_requests/20613#note_253150981):  (+7 comments)\n\n    \u003e Indeed, I think it would be nice if we could call `can?(user, :create_snippet, project)` for project snippets and `can?(user, :create_snippet, nil)` for personal \n    snippets.\n\nIt would be helpful if we could merge abilities for personal and project snippets. Since they both live in different policies we can have single abilities like `read_snippet`, `update_snippet`, and `admin_snippet`. `create_snippet` would be a little bit different since the abilities live in the global policy and also the project one, but it should be doable.\n\nThis can make us treat snippets equally no matter the type. We have done this as well before for other objects.","state":"closed","created_at":"2019-12-09T12:46:11.820Z","updated_at":"2020-01-23T11:36:29.630Z","closed_at":"2020-01-23T11:36:29.584Z","closed_by":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"labels":["Category:Snippets","backend","backstage [DEPRECATED]","devops::create","group::editor","maintenance::refactor","missed:12.7","workflow::in review"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":4092171,"username":"alexpooley","name":"Alex Pooley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4092171/avatar.png","web_url":"https://gitlab.com/alexpooley"}],"author":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"type":"ISSUE","assignee":{"id":4092171,"username":"alexpooley","name":"Alex Pooley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4092171/avatar.png","web_url":"https://gitlab.com/alexpooley"},"user_notes_count":3,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39087","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39087","notes":"https://gitlab.com/api/v4/projects/278964/issues/39087/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39087/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39087","relative":"#39087","full":"gitlab-org/gitlab#39087"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28111169,"iid":39083,"project_id":278964,"title":"Step 1:  Update snippet services to the current format  (MVP)","description":"Service snippets are quite old and haven't been refactored for a while. We should:\r\n\r\n- Move the services to their own snippet namespace (aka `Snippets::CreateService`).\r\n- They should inherit from `app/services/base_service.rb` and return the proper objects.\r\n- We should create the missing service for deleting snippets. At the moment, when we delete a snippet we directly call `snippet.destroy`. We should perform this action through a service object instead, like `Snippets::DestroyService`.\r\n  - We should update the following locations where we perform that action:\r\n    - `app/controllers/projects/snippets_controller.rb`\r\n    - `app/controllers/snippets_controller.rb`\r\n    - `app/graphql/mutations/snippets/destroy.rb`\r\n\r\nOnce we update these services, we will have to update also those places where we use them like in the controllers, api and graphql endpoints.","state":"closed","created_at":"2019-12-09T11:46:06.557Z","updated_at":"2020-03-25T18:45:39.811Z","closed_at":"2020-02-14T17:23:00.676Z","closed_by":{"id":4717243,"username":"a_luna","name":"Amparo Luna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4717243/avatar.png","web_url":"https://gitlab.com/a_luna"},"labels":["Category:Snippets","backend","backstage [DEPRECATED]","devops::create","direction","group::editor","workflow::verification"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":4717243,"username":"a_luna","name":"Amparo Luna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4717243/avatar.png","web_url":"https://gitlab.com/a_luna"}],"author":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"type":"ISSUE","assignee":{"id":4717243,"username":"a_luna","name":"Amparo Luna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4717243/avatar.png","web_url":"https://gitlab.com/a_luna"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39083","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39083","notes":"https://gitlab.com/api/v4/projects/278964/issues/39083/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39083/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39083","relative":"#39083","full":"gitlab-org/gitlab#39083"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":239,"epic":{"id":470,"iid":239,"title":"Version control for snippets","url":"/groups/gitlab-org/-/epics/239","group_id":9970,"human_readable_end_date":"Jun 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":28101990,"iid":39057,"project_id":278964,"title":"Support Resource Group for cross-project and parent-child pipelines","description":"## Problem to solve\n\nAs a user who is using parent-child pipelines, and needed to limit the number of consecutive deployments to a resource group, I need a way to define the lock for downstream pipeline.\n\n## Further Details:\n\nIn our case deployment process is done in child pipelines. Deployment process contains multiple stages and multiple jobs. Currently resource groups can be defined only standalone job, instead of bridge-type job that triggers downstream pipeline. It would be very convenient if the full deployment process could be locked by using resource groups. So basically it would be good to have a possibility to define resource group for a triggered child pipeline. Provide the possibility to define resource group for trigger job.\n\n## Proposal\n\nWhen [`resource_group`](https://docs.gitlab.com/ee/ci/yaml/#resource_group) is defined in [cross-project pipelines](https://docs.gitlab.com/ee/ci/multi_project_pipelines.html) context, the bridge job obtains the resource lock. This resource lock is released when the downstream pipeline has finished.\n\nWe extend the Resource Group architecture to `Ci::Bridge` (`trigger`).\n\nThe full implementation details are captured in [the PoC MR](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/51303).\n\n### Example: [Parent-Child Pipelines](https://docs.gitlab.com/ee/ci/parent_child_pipelines.html)\n\n```\n# .gitlab-ci.yml (parent)\n\ndeploy-downstream:\n  trigger:\n    include: child.gitlab-ci.yml\n    strategy: depend\n  resource_group: iOS                # New\n```\n\n```\n# child.gitlab-ci.yml (child)\n\ndeployment:\n  script: sleep 5s\n```\n\n**Bridge jobs (concurrent deployment pipelines) are correctly waiting for the current deployment pipeline has finished.**\n\n![screenshot_229](/uploads/c08e5105b583d7e4732e73e44e856ce0/screenshot_229.png)\n\n![screenshot_230](/uploads/4d02e3ea5dea9a43d11616218e238994/screenshot_230.png)\n\n### Example: [Cross-Project Pipelines](https://docs.gitlab.com/ee/ci/multi_project_pipelines.html)\n\n```\n# .gitlab-ci.yml (upstream project)\n\ndeploy-downstream:\n  trigger:\n    project: root/cross-project-resource-group-downstream\n    strategy: depend\n  resource_group: iOS\n```\n\n```\n# .gitlab-ci.yml (downstream project)\n\ndeployment:\n  script: sleep 5s\n```\n\n**Bridge jobs (concurrent deployment pipelines) are correctly waiting for the current deployment pipeline has finished.**\n\n![screenshot_232](/uploads/2f17d7778b3cf3d15f2a23294a1e108e/screenshot_232.png)\n\n## Documentation\n\n- [ ] https://gitlab.com/gitlab-org/gitlab/-/merge_requests/51880#note_494047587\n\n## Out of Scope\n\n- [Triggering multi-project pipelines through API](https://docs.gitlab.com/ee/ci/multi_project_pipelines.html#triggering-multi-project-pipelines-through-api). It won't define the upstream job as bridge-job.\n\n## References\n\n- https://gitlab.com/gitlab-org/gitlab/merge_requests/20903#note_255287277","state":"closed","created_at":"2019-12-09T07:23:52.110Z","updated_at":"2022-02-02T08:40:28.282Z","closed_at":"2021-02-10T03:39:55.602Z","closed_by":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"labels":["Category:Continuous Delivery","Deliverable","Release::P1","backend","candidate::14.0","cicd::active","customer","devops::release","direction","group::release","release post item::in review","section::ops","type::feature","workflow::verification"],"milestone":{"id":1233760,"iid":56,"group_id":9970,"title":"13.9","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.334Z","updated_at":"2022-04-21T07:21:28.468Z","due_date":"2021-02-17","start_date":"2021-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/56"},"assignees":[{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"}],"author":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"type":"ISSUE","assignee":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"user_notes_count":30,"merge_requests_count":0,"upvotes":7,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39057","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39057","notes":"https://gitlab.com/api/v4/projects/278964/issues/39057/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39057/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39057","relative":"#39057","full":"gitlab-org/gitlab#39057"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28099764,"iid":39048,"project_id":278964,"title":"Generate file permalink without reloading the page","description":"## Problem to solve\n\nWhen I am viewing a file and want to generate a permalink, and I use the `y` shortcut, the whole page is reloaded. This is slow. Why can't the URL in the browser simply be updated immediately since the page content doesn't really need to change?\n\n## Further details\n\nThis is already a feature of GitHub is a definitely nice polish :sparkles: \n\n## Proposal\n\nSwitch to permalink without reloading the page\n\n## Implementation Details\n\n### Phase 1\n\nFor this issue, we'll cover two new behaviors (both in service of the no-reload permalink feature):\n\n1) We change the behavior of the permalink navigation code to use `history.pushState` to update the URL (and the associated history item) to the permalink URL.\n2) We add an additional piece of small code to update the title to include the SHA instead of the branch name.\n\n### Phase 2\n\nIn a later iteration, we'll:\n\n1) Bind a `popState` listener when the permalink is triggered, so that the browser back button will properly **un**set the SHA from the window title, and potentially other reverting behavior, too.\n\n### Phase 3\n\nIn potentially the final iteration (see below), we'll:\n\n1) Update the entire page with the permalink SHA. There are a lot of discrete URLs scattered throughout the page that need to be updated (and reverted, assuming the back button is pressed) and there's no clear way to do that all at once. This update may require some exploratory work to figure out the best (most future-friendly, least intrusive, etc.) way to scan the whole page and update all of the links.\n\n## Future iterations\n\n\n![image](https://gitlab.com/gitlab-org/gitlab/uploads/bd7cc55484ce5ecfccc9e0cba1c30e9d/image.png)\n\n1. Handle pressing the back button\n   1. Change page title back to the branch name\n   1. Change URL back to the non-permalink\n1. The selected ref dropdown changes to the commit of the permalink\n1. Some file header buttons become disabled\n1. Some repo-level buttons change their URL structure to adapt to the permalink\n\n## Links / reference\n\nhttps://serokell.io/blog/comparison-of-github-and-gitlab","state":"closed","created_at":"2019-12-09T04:47:03.779Z","updated_at":"2020-06-29T17:07:37.922Z","closed_at":"2020-02-05T18:44:50.357Z","closed_by":{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"},"labels":["Category:Source Code Management","Deliverable","devops::create","frontend","group::source code","missed-deliverable","missed:12.7","movingtogitlab","repository","type::feature","workflow::production"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},{"id":2222493,"username":"jareko","name":"Jarek Ostrowski","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2222493/avatar.png","web_url":"https://gitlab.com/jareko"},{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"},{"id":5031341,"username":"mikelong","name":"Mike Long","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5031341/avatar.png","web_url":"https://gitlab.com/mikelong"}],"author":{"id":1187333,"username":"jramsay-gitlab","name":"James Ramsay (ex-GitLab)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1187333/avatar.png","web_url":"https://gitlab.com/jramsay-gitlab"},"type":"ISSUE","assignee":{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},"user_notes_count":20,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39048","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39048","notes":"https://gitlab.com/api/v4/projects/278964/issues/39048/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39048/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39048","relative":"#39048","full":"gitlab-org/gitlab#39048"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28098491,"iid":39046,"project_id":278964,"title":"Improve UI for broken images in Design Management","description":"### Problem to solve\n\nIf an image URL cannot resolve (404, 500, etc.), we fallback to the `alt` tag which is set to the filename. See screenshot below. I'd like to open a discussion for whether we could handle this case explicitly.\n\nDesigns tab | Design view\n--- | ---\n![Screen_Shot_2019-12-09_at_11.56.34_am](/uploads/f4897f017f2cbf1f8f9a73ce7a721e89/Screen_Shot_2019-12-09_at_11.56.34_am.png) | ![Screen_Shot_2020-01-14_at_11.23.26_am](/uploads/7dbcfac50e0242ed9d7d8ae89f0793fa/Screen_Shot_2020-01-14_at_11.23.26_am.png)\n\n#### Why\n\nI think there exists an opportunity to slightly improve the UI here. In the screenshot above, we see the name of the file twice which feels unnecessary.\n\n### Proposal\n\nHandle the broken image case explicitly. Something like a [broken link icon](https://gitlab.com/gitlab-org/gitlab-svgs/blob/master/sprite_icons/unlink.svg), or some kind of standard broken image icon, centered on a card may suffice. Something like this would improve the consistency of how we present broken images.\n\n### Design spec\n\n* use http://gitlab-org.gitlab.io/gitlab-svgs/?q=~media-broken\n\ncc/ @jareko","state":"closed","created_at":"2019-12-09T03:07:15.649Z","updated_at":"2020-12-10T18:59:23.749Z","closed_at":"2020-04-16T04:09:20.492Z","closed_by":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"labels":["Category:Design Management","Deliverable","devops::plan","frontend","group::product planning","type::feature","workflow::production"],"milestone":{"id":1104429,"iid":46,"group_id":9970,"title":"12.10","description":"https://about.gitlab.com/releases/2020/04/22/gitlab-12-10-released","state":"closed","created_at":"2019-12-20T15:15:53.243Z","updated_at":"2020-10-08T12:00:39.852Z","due_date":"2020-04-17","start_date":"2020-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/46"},"assignees":[{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"}],"author":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"type":"ISSUE","assignee":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"user_notes_count":12,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39046","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39046","notes":"https://gitlab.com/api/v4/projects/278964/issues/39046/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39046/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39046","relative":"#39046","full":"gitlab-org/gitlab#39046"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28095489,"iid":39042,"project_id":278964,"title":"Filter merge requests approved by user","description":"### Problem to solve\n\nIt's not possible to search for merge requests that someone/myself have approved.\n\nWe also have a filter that suggests you can do this type of filter called: `Approvers`, but the name is misleading, as it will only list merge requests which the user is listed as an potential approver (either by being manually added to it, by its relationship in a group which is part of the approvers, or by it being listed in CODEOWNERS of an affected file).\n\n### Intended users\n\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n\n### Further details\n\nThis is very important for trainee maintainers, as trying to figure out which merge requests you gave an approval after you did, it's almost impossible or too time consuming.\n\nThis is also important for when training a more junior developer, to be able to review their progress by looking at places where they gave an approval, or simply for anyone trying to find places they have made a good contribution for career development evaluation.\n\n### Proposal\n\nAdd another filter when searching for Merge Requests: `Approved by` (following the same semantics as the existing `Approvers`, allowing to select an user, `none` or `any`)\n\n### Permissions and Security\n\nSame search restrictions as any other filters.\n\n### Documentation\n\nAdd new filter in : \n\n- https://docs.gitlab.com/ee/user/project/merge_requests/merge_request_approvals.html (with frontend changes)\n- https://docs.gitlab.com/ee/api/merge_requests.html (with backend changes)\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\n### What does success look like, and how can we measure that?\n\nBeing able to search for merge requests a specific user has approved using by pressing the `approve` button.\n\n### What is the type of buyer? \n\nSame as Approvals (starter/bronze)\n\n### Links / references","state":"closed","created_at":"2019-12-09T01:27:31.006Z","updated_at":"2020-12-07T16:47:43.704Z","closed_at":"2020-05-11T10:13:24.706Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Category:Code Review Workflow","Deliverable","Enterprise Edition","approvals","devops::create","frontend","group::code review","internal customer","merge requests","type::feature","workflow::in dev"],"milestone":{"id":991112,"iid":42,"group_id":9970,"title":"13.0","description":"","state":"closed","created_at":"2019-09-04T15:20:39.024Z","updated_at":"2020-10-08T12:00:55.725Z","due_date":"2020-05-17","start_date":"2020-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/42"},"assignees":[{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":2293,"username":"brodock","name":"Gabriel Mazetto","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2293/avatar.png","web_url":"https://gitlab.com/brodock"},"type":"ISSUE","assignee":{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},"user_notes_count":24,"merge_requests_count":2,"upvotes":5,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/39042","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/39042","notes":"https://gitlab.com/api/v4/projects/278964/issues/39042/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/39042/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#39042","relative":"#39042","full":"gitlab-org/gitlab#39042"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28078561,"iid":38576,"project_id":278964,"title":"Audit Events API - target ids are not real ids","description":"Hello,\nMy company has started parsing the Audit Events log using the new [Audit Events API](https://docs.gitlab.com/ee/api/audit_events.html) feature, as it is very critical for us to look and map what is happening in our Gitlab instance.\n\nWe have been trying to parse the target entities in the event and we have stumbled upon a weird behaviour where the `target_id` is not an actual id of the entity within the Gitlab instance.\n\nThis behaviour differs for each of the `target_type`s available in the system: either it is a `User`, `Group` or a `Project`.\n\nFor `User` target: the `target_id` field contains an id which doesn't exist in the system. For example if our systems has 4 users, which their ids are 1, 2, 3, 4. The target_id might be the number of 17, which cannot be parsed into a real entity in the gitlab system.\n\nFor `Group` or `Project` targets: The `target_id` field is actually the name of the Group or the Project, and is not an ID number.\n\nAlso, I suspect that the Gitlab system doesn't parse the target entities in its audit logs. \nLooking at the Audit Events in the Admin page, we can see that the Target object not clickable like the Author or the Entity objects in the table. This can also be shown in the [Audit Events documentation page](https://docs.gitlab.com/12.5/ee/administration/audit_events.html#instance-events-premium-only)\n\nLooking forward for your help,\n\nThank you,\nIdan.\n\u003c!-- Don't edit below this line --\u003e","state":"closed","created_at":"2019-12-08T12:30:35.255Z","updated_at":"2021-11-08T13:51:35.978Z","closed_at":"2021-11-08T12:01:30.472Z","closed_by":{"id":9821577,"username":"huzaifaiftikhar1","name":"Huzaifa Iftikhar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9821577/avatar.png","web_url":"https://gitlab.com/huzaifaiftikhar1"},"labels":["Category:Audit Events","approaching-SLO","backend","devops::manage","group::compliance","missed-SLO","priority::2","section::dev","severity::2","support request","type::bug","workflow::verification"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":9821577,"username":"huzaifaiftikhar1","name":"Huzaifa Iftikhar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9821577/avatar.png","web_url":"https://gitlab.com/huzaifaiftikhar1"}],"author":{"id":4946728,"username":"idan.b","name":"Idan Ben Shalom","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fe5be8806ebd4a4ef4da63a4b5f24903?s=80\u0026d=identicon","web_url":"https://gitlab.com/idan.b"},"type":"ISSUE","assignee":{"id":9821577,"username":"huzaifaiftikhar1","name":"Huzaifa Iftikhar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9821577/avatar.png","web_url":"https://gitlab.com/huzaifaiftikhar1"},"user_notes_count":43,"merge_requests_count":2,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38576","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38576","notes":"https://gitlab.com/api/v4/projects/278964/issues/38576/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38576/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38576","relative":"#38576","full":"gitlab-org/gitlab#38576"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28052511,"iid":38426,"project_id":278964,"title":"Refactor `app/models/repository` into separate classes and simplify/remove other reduntant classes","description":"## Summary\n\n`app/models/repository` is a complex object, because it is trying to solve everything for very different types of repository.\nIt also depends on `Gitlab::GlRepository` and `EE:Gitlab:GlRepository` which implements some parameters and differences for each repository type.\nThis is a huge indicator that it need to be split into the mentioned types\n\n\n## Improvements\n\nWe are building a new framework for Geo replication. Part of the work rely on having the things that are going to be replicated to have its own unique / unambiguous representation on the codebase as at least a PORO/ActiveModel.\n\nCurrent Repository doesn not fit that definition, and if we decide to workaround with current architecture, it will just become even more complex.\n\nOur current polymorphic repository does not test each \"type\" individually, we are really just testing project repositories.\n\n## Risks\n\nWe need to make sure we keep all methods that are shared by all repositories in a subclass, and move the unique ones to their respective classes.\nIf we fail to identify a shared method, we may brake existing behavior.\nWe should also double checking where it is used, so we replace for the correct repository type\n\n## Involved components\n\n* app/models/repository\n* ee/app/models/ee/repository\n* everything that uses them\n* lib/gitlab/gl_repository.rb\n* ee/lib/gitlab/gl_repository.rb\n\n## Proposed tasks\n\nThis are the proposed tasks after the initial investigation (see in comments below)\n\n- [ ] Split `::Repository` into separate classes for each type gitlab-org/gitlab!21359\n- [ ] Remove all usages of `repo_type.project?`, `repo_type.wiki?`\n- [ ] Remove all usages of `RepoType` and `Gitlab::GlRepository` in service classes (switch to each respective `Gitlab::Repository`)\n- [ ] Merge RepoType functionality into each separate repository in `Gitlab::Repository`\n- [ ] Rethink `gl_repository` usage in `post_service` to something that returns a `Gitlab::Repository`\n- [ ] Extract non-shared methods from `::Repository` to its respective classes\n- [ ] Check whether we can remove `def project` from repository or keep it only on the classes that are tied to a project\n- [ ] Rename and move `::Repository` to `Gitlab::Repository::BaseRepository`\n\n## Optional: Intended side effects\n\n\u003c!--\nIf the refactoring involves changes apart from the main improvements (such as a better UI), list them here.\nIt may be a good idea to create separate issues and link them here.\n--\u003e\n\n\n## Optional: Missing test coverage\n\n\u003c!--\nIf you are aware of tests that need to be written or adjusted apart from unit tests for the changed components,\nplease list them here.\n--\u003e","state":"closed","created_at":"2019-12-07T04:36:17.327Z","updated_at":"2020-09-30T12:57:41.482Z","closed_at":"2020-03-20T14:51:15.735Z","closed_by":{"id":2293,"username":"brodock","name":"Gabriel Mazetto","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2293/avatar.png","web_url":"https://gitlab.com/brodock"},"labels":["backstage [DEPRECATED]","maintenance::refactor","workflow::solution validation"],"milestone":null,"assignees":[],"author":{"id":2293,"username":"brodock","name":"Gabriel Mazetto","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2293/avatar.png","web_url":"https://gitlab.com/brodock"},"type":"ISSUE","assignee":null,"user_notes_count":49,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38426","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":0},"weight":10,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38426","notes":"https://gitlab.com/api/v4/projects/278964/issues/38426/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38426/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38426","relative":"#38426","full":"gitlab-org/gitlab#38426"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2161,"epic":{"id":14724,"iid":2161,"title":"Geo: Build a scalable, self-service geo replication and verification framework","url":"/groups/gitlab-org/-/epics/2161","group_id":9970,"human_readable_end_date":"Oct 31, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":28027498,"iid":38379,"project_id":278964,"title":"Tech Eval: Add binary assets to a Release via gitlab-ci.yml","description":"### Problem to solve\n\n\u003c!-- What problem do we solve? --\u003e\n\nIn #36133 , we'd like to use the Package API for uploading assets into a generic registry. We need to research the Package API and how Release APIs can hook into this. https://gitlab.com/gitlab-org/gitlab/issues/36133#note_255288929\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\n\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n* [Dana (Data Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#dana-data-analyst)\n\nPersonas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\nAnyone who may create a release in GitLab: \n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\n\nOther things we may want to consider:\n\n* Any additional required attributes for the API\n* Storage quotas and limits\n* UI uploader\n* UI for viewing/discovering assets\n* How to handle duplicate uploads\n* Should we consider leveraging Git LFS?\n* Add generic registry to the existing storage tracking\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\nI'm wondering if we can move this forward by adding a new endpoint to the Packages API that will allow users to upload/download/delete arbitrary files to a generic registry. If we can answer the above, we could define an API that allows them to set attributes for:\n\n* Scope (instance/group/project)\n* Repository type (generic/npm/maven/nuget/conan)\n* Expire_in (number of days, never)\n* release_asset (true/false)\n* release_id\n* name\n* url\n* description\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?--\u003e\n\n* [Release Permission](https://docs.gitlab.com/ee/user/permissions.html#releases-permissions)\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements\nIf this feature requires changing permissions, this document https://docs.gitlab.com/ee/user/permissions.html must be updated accordingly. --\u003e\n\n* Package API Docs - https://docs.gitlab.com/ee/development/packages.html\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n* Ultimately, we want all users to be creating releases in GitLab \n\n### What is the type of buyer? \n\n\u003c!-- Which leads to: in which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\n\n* Community Edition\n* Enterprise Edition\n\n### Links / references\nRelated Issues: \n* https://gitlab.com/gitlab-org/gitlab/issues/26013","state":"closed","created_at":"2019-12-06T16:22:06.492Z","updated_at":"2020-11-12T10:32:17.395Z","closed_at":"2020-09-29T21:38:07.404Z","closed_by":{"id":5622641,"username":"nicolewilliams","name":"Nicole Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5622641/avatar.png","web_url":"https://gitlab.com/nicolewilliams"},"labels":["Category:Release Orchestration","Deliverable","Release::P1","[deprecated] Accepting merge requests","backend","cicd::active","devops::release","group::release","section::ops","workflow::in review"],"milestone":{"id":1233754,"iid":52,"group_id":9970,"title":"13.5","description":"https://about.gitlab.com/releases/2020/10/22/gitlab-13-5-released/","state":"closed","created_at":"2020-04-09T17:39:21.990Z","updated_at":"2022-04-21T07:21:12.213Z","due_date":"2020-10-17","start_date":"2020-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/52"},"assignees":[],"author":{"id":4905402,"username":"jreporter","name":"Jackie Porter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4905402/avatar.png","web_url":"https://gitlab.com/jreporter"},"type":"ISSUE","assignee":null,"user_notes_count":38,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38379","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38379","notes":"https://gitlab.com/api/v4/projects/278964/issues/38379/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38379/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38379","relative":"#38379","full":"gitlab-org/gitlab#38379"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2207,"epic":{"id":15054,"iid":2207,"title":"Assets in Releases","url":"/groups/gitlab-org/-/epics/2207","group_id":9970,"human_readable_end_date":"Oct 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":28023767,"iid":38350,"project_id":278964,"title":"Remove issue_link_types feature flag","description":"A follow-up from https://gitlab.com/gitlab-org/gitlab/merge_requests/20617 - this flag can be removed if the feature works as expected.\n\nAlso we should make sure that documentation already exists or is added with enabling this flag by default.","state":"closed","created_at":"2019-12-06T14:43:12.292Z","updated_at":"2020-02-07T16:50:06.340Z","closed_at":"2020-02-07T16:50:06.151Z","closed_by":{"id":1315784,"username":"ifarkas","name":"Imre Farkas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b4dcfa5185b8513751b447d76b069bf6?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifarkas"},"labels":["backend","devops::plan","group::product planning","missed:12.6","workflow::blocked"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"}],"author":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"type":"ISSUE","assignee":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"user_notes_count":1,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38350","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38350","notes":"https://gitlab.com/api/v4/projects/278964/issues/38350/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38350/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38350","relative":"#38350","full":"gitlab-org/gitlab#38350"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28023257,"iid":38347,"project_id":278964,"title":"Add description_html fields to labels API responses","description":"For https://gitlab.com/gitlab-org/gitlab-ui/issues/466, @fguibert needs our REST API to expose a label's `description_html` field in a few places:\n\n1. For individual labels: https://docs.gitlab.com/ee/api/labels.html\n2. For any 'labelable' resource (https://docs.gitlab.com/ee/api/issues.html, https://docs.gitlab.com/ee/api/epics.html, https://docs.gitlab.com/ee/api/merge_requests.html).\n\nThis should be cheap as it's stored in the DB. If it's not going to cheap, please let me know and we can consider a change.","state":"closed","created_at":"2019-12-06T14:25:22.919Z","updated_at":"2020-02-10T17:32:10.174Z","closed_at":"2020-02-10T17:32:10.102Z","closed_by":{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"},"labels":["api","backend","devops::plan","group::project management","labels","missed:12.6","type::feature","workflow::verification"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"}],"author":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"type":"ISSUE","assignee":{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38347","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38347","notes":"https://gitlab.com/api/v4/projects/278964/issues/38347/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38347/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38347","relative":"#38347","full":"gitlab-org/gitlab#38347"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28016852,"iid":38340,"project_id":278964,"title":"Update letsencrypt gem","description":"Noticed from https://gitlab.com/gitlab-org/omnibus-gitlab/issues/4900\n\nLet's Encrypt introduced the breaking change into the API we using.\nIt's currently active only on staging and will be active on production (Nov 1'st 2020)[https://community.letsencrypt.org/t/acme-v2-scheduled-deprecation-of-unauthenticated-resource-gets/74380].\n\nI'm not updating it right away since verification that everything works properly requires some time(api requests are mostly stubbed in specs).","state":"closed","created_at":"2019-12-06T12:17:31.047Z","updated_at":"2020-03-05T10:49:44.522Z","closed_at":"2020-03-05T10:49:44.480Z","closed_by":{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"},"labels":["Category:Pages","backstage [DEPRECATED]","devops::release","workflow::ready for development"],"milestone":null,"assignees":[],"author":{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-03-06","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38340","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38340","notes":"https://gitlab.com/api/v4/projects/278964/issues/38340/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38340/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38340","relative":"#38340","full":"gitlab-org/gitlab#38340"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28012906,"iid":38331,"project_id":278964,"title":"Inconsistent maximum hierarchy size when creating/adding child Epics","description":"### Summary\n\nIt's not possible to add another epic to an epic that has four ancestors. However, it is possible to create one and produce a hierarchy of size 6.\n\n### Steps to reproduce\n\n1. Create an epic hierarchy of size 5\n1. Visit the epic at the bottom of the hierarchy\n1. Attempt to add another epic as a sub-epic, see a 409 status code and error message\n1. Click the carat and select 'Create and Epic' from the dropdown\n1. Click 'Create an Epic', enter a name in the input and click 'Create'\n\n### Example Project\n\nTest in gdk\n\n### What is the current *bug* behavior?\n\nA hierarchy of size 6 is created.\n\n### What is the expected *correct* behavior?\n\nAttempt to create epic should fail, with appropriate error message.\n\n### Possible fixes","state":"closed","created_at":"2019-12-06T10:21:14.906Z","updated_at":"2021-11-08T16:55:08.918Z","closed_at":"2020-02-07T14:04:57.551Z","closed_by":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"labels":["Category:Portfolio Management","backend","devops::plan","epics","group::product planning","priority::4","severity::4","type::bug","workflow::verification"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"}],"author":{"id":4418630,"username":"johnhope","name":"John Hope","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4418630/avatar.png","web_url":"https://gitlab.com/johnhope"},"type":"ISSUE","assignee":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38331","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38331","notes":"https://gitlab.com/api/v4/projects/278964/issues/38331/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38331/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38331","relative":"#38331","full":"gitlab-org/gitlab#38331"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28009164,"iid":38327,"project_id":278964,"title":"Replace breakpoint.js with breakpoints from gitlab-ui","description":"We now export `breakpoints` utilities from `gitlab-ui`.\n\nIn order to reduce duplicated code, we can remove `app/assets/javascripts/breakpoints.js` from our codebase and leverage the `gitlab-ui` version.\n\n**Note:** The breakpoints between the two version diverge since `gitlab-ui` version already uses `Bootstrap 4` breakpoints.\n\n| Breakpoint | `gitlab` | `gitlab ui` |\n| ------ | ------ | ------ |\n| **xl** | - | `1200px` |\n| **lg** | `1200px` | `992px` | \n| **md** | `992px` | `768px` | \n| **sm** | `768px` | `576px` | \n| **xs** | `0px` | `0px` |","state":"closed","created_at":"2019-12-06T08:25:30.491Z","updated_at":"2020-01-10T09:47:45.205Z","closed_at":"2020-01-08T12:35:11.945Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["backstage [DEPRECATED]","frontend","workflow::in dev"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"}],"author":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"type":"ISSUE","assignee":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"user_notes_count":0,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38327","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38327","notes":"https://gitlab.com/api/v4/projects/278964/issues/38327/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38327/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38327","relative":"#38327","full":"gitlab-org/gitlab#38327"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28004536,"iid":38319,"project_id":278964,"title":"Rename Cycle Analytics to Value Stream Analytics","description":"## Problem\n\nWe have Value Stream Management defined as an explicit category, with Cycle Analytics the main feature that justifies our `Minimal` maturity. Cycle Analytics fits the bill in terms of the problem we're trying to solve with VSM - provide a view into the entire software delivery value stream. \n\nWe also want to invest specifically in the term \"Value Stream\" (https://about.gitlab.com/solutions/value-stream-management/).\n\n## Proposal\n\nRename \"Cycle Analytics\" to \"Value Stream Analytics\".","state":"closed","created_at":"2019-12-06T03:38:21.276Z","updated_at":"2021-06-03T02:09:07.360Z","closed_at":"2020-02-07T19:16:32.067Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["devops::manage","estimation::completed","frontend","group::optimize","missed:12.7","workflow::in review"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":4984614,"username":"mjang1","name":"Mike Jang","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4984614/avatar.png","web_url":"https://gitlab.com/mjang1"},{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"}],"author":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"type":"ISSUE","assignee":{"id":4984614,"username":"mjang1","name":"Mike Jang","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4984614/avatar.png","web_url":"https://gitlab.com/mjang1"},"user_notes_count":30,"merge_requests_count":10,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38319","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38319","notes":"https://gitlab.com/api/v4/projects/278964/issues/38319/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38319/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38319","relative":"#38319","full":"gitlab-org/gitlab#38319"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28004465,"iid":38318,"project_id":278964,"title":"Create an Analytics area in the project sidebar","description":"## Problem\n\nAnalytics features are currently scattered over a few areas of the project sidebar:\n* Project overview: Cycle Analytics, Insights\n* Repository: Charts\n* CI/CD: Charts\n\nThis makes relevant analytics features hard to find. Some, like Cycle Analytics, are an ill fit for the area they're in. To help with discoverability and provide a clear place for analytics features at the project level, we should consider reorganizing the project sidebar navigation.\n\n## Proposal\n\nIntroduce a \"Project Analytics\" sidebar item at the project level. Move these features to be under this new item:\n* Cycle Analytics (to be renamed \"Value Stream\" [elsewhere](https://gitlab.com/gitlab-org/gitlab/issues/38319))\n* Insights\n* Repository Analytics\n* CI/CD Analytics\n\n![image](/uploads/1b0af34455f96105e2655570c4e9e73a/image.png)","state":"closed","created_at":"2019-12-06T03:32:16.711Z","updated_at":"2022-05-26T11:12:56.046Z","closed_at":"2020-03-24T07:06:27.492Z","closed_by":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"labels":["Kickoff Highlight","backend","devops::manage","direction","estimation::completed","frontend","group::optimize","priority::1","workflow::production"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"}],"author":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"type":"ISSUE","assignee":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"user_notes_count":32,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38318","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38318","notes":"https://gitlab.com/api/v4/projects/278964/issues/38318/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38318/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38318","relative":"#38318","full":"gitlab-org/gitlab#38318"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28000504,"iid":38317,"project_id":278964,"title":"Rename \"Production\" stage in Cycle Analytics to \"Total time\"","description":"## Problem to solve\n\nIn the [Cycle Analytics feature](https://gitlab.com/gitlab-org/gitlab/cycle_analytics), the \"Production\" stage is the sum of all stages (it represents the total time [\"from issue creation ... until deploy to production\"](https://gitlab.com/gitlab-org/gitlab-foss/issues/21170)). \n\nIt looks like every other individual stage, but is actually a total of all stages. This particular kind of total is often called [\"lead time\"](https://simplicable.com/new/lead-time-vs-cycle-time). \n\n## Proposal\n\nRename the \"Production\" stage to \"Total time\" in Cycle Analytics and our docs.","state":"closed","created_at":"2019-12-06T02:47:31.785Z","updated_at":"2021-10-06T15:31:29.456Z","closed_at":"2020-01-06T09:46:00.716Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["[deprecated] Accepting merge requests","devops::manage","frontend","group::optimize","missed:12.6"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[],"author":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"type":"ISSUE","assignee":null,"user_notes_count":9,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38317","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38317","notes":"https://gitlab.com/api/v4/projects/278964/issues/38317/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38317/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38317","relative":"#38317","full":"gitlab-org/gitlab#38317"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27996487,"iid":38306,"project_id":278964,"title":"N+1 SQL queries in PipelinesController#show checking artifacts","description":"From https://gitlab.com/gitlab-org/gitlab/merge_requests/21000, we seem to have an N+1 query loading `Ci::Build#artifacts?`. This is originating from https://gitlab.com/gitlab-org/gitlab-ee/blob/2d9e0f3ffb59a4323e794fcc4bf122274c82c67f/app/views/projects/ci/builds/_build.html.haml#L99:\n\n![image](/uploads/4cadc482ba72b2d1515c09960cd914b6/image.png)\n\n```ruby\n[\n  \"app/models/ci/build.rb:593:in `artifacts_file'\",\n  \"app/models/ci/build.rb:605:in `artifacts?'\",\n  \"app/views/projects/ci/builds/_build.html.haml:99:in `_app_views_projects_ci_builds__build_html_haml___3728230498159233337_70343814444760'\",\n  \"app/views/projects/stage/_stage.html.haml:11:in `_app_views_projects_stage__stage_html_haml___901203011518743519_70344738851940'\",\n  \"app/views/projects/pipelines/_with_tabs.html.haml:40:in `_app_views_projects_pipelines__with_tabs_html_haml__2773660735256188773_70344633497340'\",\n  \"app/views/projects/pipelines/show.html.haml:21:in `_app_views_projects_pipelines_show_html_haml__4313444857854559199_70344719384640'\",\n  \"app/controllers/application_controller.rb:120:in `render'\",\n  \"app/controllers/projects/pipelines_controller.rb:189:in `block (2 levels) in render_show'\",\n  \"app/controllers/projects/pipelines_controller.rb:187:in `render_show'\",\n  \"app/controllers/projects/pipelines_controller.rb:85:in `builds'\",\n  \"ee/lib/gitlab/ip_address_state.rb:10:in `with'\",\n  \"ee/app/controllers/ee/application_controller.rb:43:in `set_current_ip_address'\",\n  \"lib/gitlab/session.rb:11:in `with_session'\",\n  \"app/controllers/application_controller.rb:462:in `set_session_storage'\",\n  \"app/controllers/application_controller.rb:456:in `set_locale'\",\n  \"ee/lib/gitlab/jira/middleware.rb:19:in `call'\"\n]\n```","state":"closed","created_at":"2019-12-05T21:38:05.575Z","updated_at":"2019-12-17T15:42:53.903Z","closed_at":"2019-12-07T05:45:48.292Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["Category:Continuous Integration","backstage [DEPRECATED]","bug::performance","devops::verify","group::pipeline execution"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":722076,"username":"matteeyah","name":"Matija Čupić","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8bc04cc15e0adba406cf56fecd9d910a?s=80\u0026d=identicon","web_url":"https://gitlab.com/matteeyah"}],"author":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"type":"ISSUE","assignee":{"id":722076,"username":"matteeyah","name":"Matija Čupić","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8bc04cc15e0adba406cf56fecd9d910a?s=80\u0026d=identicon","web_url":"https://gitlab.com/matteeyah"},"user_notes_count":1,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38306","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38306","notes":"https://gitlab.com/api/v4/projects/278964/issues/38306/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38306/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38306","relative":"#38306","full":"gitlab-org/gitlab#38306"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27994410,"iid":38296,"project_id":278964,"title":"GraphQL: Add 'milestone_due_asc' sort for Issuables","description":"Add GraphQL sorting for `milestone_due_asc ` on an `Issuable`\n\n```ruby\n        when 'milestone', 'milestone_due_asc'                 then order_milestone_due_asc\n        when 'milestone_due_desc'                             then order_milestone_due_desc\n```\n\nin https://gitlab.com/gitlab-org/gitlab/blob/master/app/models/concerns/issuable.rb#L230-247\n\nWill require updating `Types::IssuableSortEnum`\n\nDue to the complexity of the sort, may require updates to the [`keyset pagination support`](https://gitlab.com/gitlab-org/gitlab/blob/master/lib/gitlab/graphql/connections/keyset/connection.rb)","state":"closed","created_at":"2019-12-05T19:40:09.002Z","updated_at":"2020-05-08T15:38:12.235Z","closed_at":"2020-05-08T15:38:12.150Z","closed_by":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"labels":["GraphQL","backend","devops::plan","group::project management","missed-deliverable","missed:12.10","missed:12.6","missed:12.9","workflow::production"],"milestone":{"id":991112,"iid":42,"group_id":9970,"title":"13.0","description":"","state":"closed","created_at":"2019-09-04T15:20:39.024Z","updated_at":"2020-10-08T12:00:55.725Z","due_date":"2020-05-17","start_date":"2020-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/42"},"assignees":[{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"}],"author":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"type":"ISSUE","assignee":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38296","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38296","notes":"https://gitlab.com/api/v4/projects/278964/issues/38296/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38296/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38296","relative":"#38296","full":"gitlab-org/gitlab#38296"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2744,"epic":{"id":24946,"iid":2744,"title":"Issuables list to GraphQL","url":"/groups/gitlab-org/-/epics/2744","group_id":9970,"human_readable_end_date":"May 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27994342,"iid":38295,"project_id":278964,"title":"GraphQL: Add 'label_priority' sort for Issuables","description":"Add GraphQL sorting for `label_priority ` on an `Issuable`\n\n```ruby\n        when 'label_priority', 'label_priority_asc'           then order_labels_priority(excluded_labels: excluded_labels)\n        when 'label_priority_desc'                            then order_labels_priority('DESC', excluded_labels: excluded_labels)\n```\n\nin https://gitlab.com/gitlab-org/gitlab/blob/master/app/models/concerns/issuable.rb#L230-247\n\nWill require updating `Types::IssuableSortEnum`\n\nDue to the complexity of the sort, may require updates to the [`keyset pagination support`](https://gitlab.com/gitlab-org/gitlab/blob/master/lib/gitlab/graphql/connections/keyset/connection.rb)","state":"closed","created_at":"2019-12-05T19:36:57.150Z","updated_at":"2020-04-30T00:26:38.200Z","closed_at":"2020-04-30T00:26:38.105Z","closed_by":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"labels":["GraphQL","backend","backstage [DEPRECATED]","devops::plan","group::project management","missed-deliverable","missed:12.6","missed:12.9","workflow::production"],"milestone":{"id":991112,"iid":42,"group_id":9970,"title":"13.0","description":"","state":"closed","created_at":"2019-09-04T15:20:39.024Z","updated_at":"2020-10-08T12:00:55.725Z","due_date":"2020-05-17","start_date":"2020-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/42"},"assignees":[{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},{"id":508743,"username":"jarka","name":"Jarka Košanová","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3931dae84deb01d2881e4909077b8dbe?s=80\u0026d=identicon","web_url":"https://gitlab.com/jarka"}],"author":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"type":"ISSUE","assignee":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38295","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38295","notes":"https://gitlab.com/api/v4/projects/278964/issues/38295/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38295/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38295","relative":"#38295","full":"gitlab-org/gitlab#38295"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2744,"epic":{"id":24946,"iid":2744,"title":"Issuables list to GraphQL","url":"/groups/gitlab-org/-/epics/2744","group_id":9970,"human_readable_end_date":"May 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27994193,"iid":38293,"project_id":278964,"title":"GraphQL: Add 'priority' sort for Issuables","description":"Add GraphQL sorting for `priority` on an `Issuable`\n\n```ruby\n        when 'priority', 'priority_asc'                       then order_due_date_and_labels_priority(excluded_labels: excluded_labels)\n        when 'priority_desc'                                  then order_due_date_and_labels_priority('DESC', excluded_labels: excluded_labels)\n\n```\n\nin https://gitlab.com/gitlab-org/gitlab/blob/master/app/models/concerns/issuable.rb#L230-247\n\nWill require updating `Types::IssuableSortEnum`\n\nDue to the complexity of the sort, may require updates to the [`keyset pagination support`](https://gitlab.com/gitlab-org/gitlab/blob/master/lib/gitlab/graphql/connections/keyset/connection.rb)\n\nSince `priority` leverages off of `label_priority`, should consider doing #38295 first.","state":"closed","created_at":"2019-12-05T19:29:59.420Z","updated_at":"2020-04-30T00:25:07.027Z","closed_at":"2020-04-30T00:25:06.941Z","closed_by":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"labels":["GraphQL","backend","backstage [DEPRECATED]","devops::plan","group::project management","missed-deliverable","missed:12.6","workflow::production"],"milestone":{"id":991112,"iid":42,"group_id":9970,"title":"13.0","description":"","state":"closed","created_at":"2019-09-04T15:20:39.024Z","updated_at":"2020-10-08T12:00:55.725Z","due_date":"2020-05-17","start_date":"2020-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/42"},"assignees":[{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"}],"author":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"type":"ISSUE","assignee":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38293","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38293","notes":"https://gitlab.com/api/v4/projects/278964/issues/38293/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38293/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38293","relative":"#38293","full":"gitlab-org/gitlab#38293"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2744,"epic":{"id":24946,"iid":2744,"title":"Issuables list to GraphQL","url":"/groups/gitlab-org/-/epics/2744","group_id":9970,"human_readable_end_date":"May 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27988441,"iid":38281,"project_id":278964,"title":"Private group info such as EPIC , milestone path are still visible if project is transferred to other group","description":"**[HackerOne report #748315](https://hackerone.com/reports/748315)** by `ashish_r_padelkar` on 2019-11-29, assigned to @ankelly:\n\n### Summary\n\nWhen project is transferred from private group to public group,  the information related to private groups such as milestone group path , epic are visible still visible if they are associated with issues/merge requests.\n\nAlso, when old group update the EPIC title, the new title is still visible in new group issue if it is associated with issue\n\n### Steps to reproduce\n\n\n1. Create a private group and private project underneath  \n2. Create group milestone, EPIC and Label in a group  \n3. Apply these all to an issue in project.  \n4. Move this project to any GOLD membership public project. Change the project visibility to public.  \n5. Login as non member and visit this public project issue and you will see the following information is still visible from old private group  \n     a. Epic associated with this issue. If old group updates the title , the new is still visible in this issue  \n     b. System notes associated with the issue shows a group milestone path if you hover over the milestone\n\n\n### What is the current *bug* behavior?\n\nEPIC and milestone path are visible from private group if project is transferred\n\n### What is the expected *correct* behavior?\n\nEPIC and old group path should not be visible to non members\n\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\nRegards,  \nAshish\n\n## Impact\n\n1. Epic associated with the issue is visible in new group. If old group updates the title , the new is still visible in the issue  \n    2. System notes associated with the issue shows a group milestone path if you hover over the milestone","state":"closed","created_at":"2019-12-05T17:11:35.367Z","updated_at":"2021-11-24T13:05:25.026Z","closed_at":"2020-11-02T20:33:53.280Z","closed_by":{"id":4226366,"username":"ankelly","name":"Andrew Kelly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4226366/avatar.png","web_url":"https://gitlab.com/ankelly"},"labels":["HackerOne","backend","devops::plan","group::product planning","priority::3","section::dev","security","security-backlog::valid","severity::3","workflow::verification"],"milestone":{"id":1233755,"iid":53,"group_id":9970,"title":"13.6","description":"https://about.gitlab.com/releases/2020/11/22/gitlab-13-6-released/","state":"closed","created_at":"2020-04-09T17:39:22.328Z","updated_at":"2022-04-13T14:51:04.376Z","due_date":"2020-11-17","start_date":"2020-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/53"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-02-24","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38281","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38281","notes":"https://gitlab.com/api/v4/projects/278964/issues/38281/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38281/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38281","relative":"#38281","full":"gitlab-org/gitlab#38281"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27987833,"iid":38278,"project_id":278964,"title":"Add license \"Policy\" tab to 'License Compliance' page so that users can easily see existing license policies when viewing licenses - Rename `approved` to `allowed`","description":"Main issue - https://gitlab.com/gitlab-org/gitlab/issues/14061\n\nThis follows the sub issue convention described in https://gitlab.com/gitlab-com/www-gitlab-com/issues/4588.\n\n* [x] Rename `approved` to `allowed`\n\nMore info [here](https://gitlab.com/gitlab-org/gitlab/issues/14061#classification-names-that-require-change).","state":"closed","created_at":"2019-12-05T16:43:43.135Z","updated_at":"2021-04-03T08:22:49.899Z","closed_at":"2019-12-16T22:10:01.662Z","closed_by":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"labels":["Category:License Compliance","Deliverable","backend","devops::secure","group::composition analysis","sub-issue","type::feature","workflow::production"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"}],"author":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"type":"ISSUE","assignee":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38278","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38278","notes":"https://gitlab.com/api/v4/projects/278964/issues/38278/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38278/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38278","relative":"#38278","full":"gitlab-org/gitlab#38278"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27987132,"iid":38271,"project_id":278964,"title":"Add license \"Policy\" tab to 'License Compliance' page so that users can easily see existing license policies when viewing licenses - Rename `blacklisted` to `denied`","description":"Main issue - https://gitlab.com/gitlab-org/gitlab/issues/14061\n\nThis follows the sub issue convention described in https://gitlab.com/gitlab-com/www-gitlab-com/issues/4588.\n\n* [x] Rename `blacklisted` to `denied`\n\nAdditional info can be found [here](https://gitlab.com/gitlab-org/gitlab/issues/14061#classification-names-that-require-change).","state":"closed","created_at":"2019-12-05T16:28:33.098Z","updated_at":"2022-12-02T02:50:14.726Z","closed_at":"2019-12-16T22:09:21.120Z","closed_by":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"labels":["Category:License Compliance","Deliverable","backend","devops::secure","group::composition analysis","sub-issue","type::feature","workflow::production"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"}],"author":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"type":"ISSUE","assignee":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38271","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38271","notes":"https://gitlab.com/api/v4/projects/278964/issues/38271/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38271/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38271","relative":"#38271","full":"gitlab-org/gitlab#38271"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27984867,"iid":38267,"project_id":278964,"title":"Add Option for Defining Custom Redmine Integration Reference Pattern","description":"### Problem to solve\n\n\u003c!-- What problem do we solve? --\u003e\n\nWith Redmine Integration configured and a title such as \"#123456789 - Add patches for VULNERABILITY-9429 and VULNERABILITY-5623\", the VULNERABILITY-* get linked to the Redmine issue tracker, but only #123456789 should get linked there.\n\n### Intended users\n\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\n\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n* [Dana (Data Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#dana-data-analyst)\n\nPersonas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\n\nThis is used by anyone wanting to link to Redmine.\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\nAdd a field to the [Redmine Service](https://docs.gitlab.com/ee/user/project/integrations/redmine.html) for defining a reference pattern. This reference pattern would then be passed to [issue_tracker_service.rb](https://gitlab.com/gitlab-org/gitlab-foss/blob/78ee24ba53a4a44d829613495ec0d5f1bbb5a9ee/app/models/project_services/issue_tracker_service.rb#L9). This would be a part of the Adopt All Features Stage of the User journey.\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?--\u003e\n\nThe reference pattern would need to be setup by somebody with access to the Redmine Integration settings. It can then be used by anyone able to file an issue, submit a Merge Request, or make commits.\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements\nIf this feature requires changing permissions, this document https://docs.gitlab.com/ee/user/permissions.html must be updated accordingly. --\u003e\n\nDocumentation at the [Redmine Service](https://docs.gitlab.com/ee/user/project/integrations/redmine.html) page would need to be updated.\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n### What is the type of buyer? \n\n\u003c!-- Which leads to: in which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\n\nThis is a basic feature and so should go into the core tier.\n\n### Links / references\n\n* https://docs.gitlab.com/ee/user/project/integrations/redmine.html\n* https://gitlab.com/gitlab-org/gitlab-foss/blob/78ee24ba53a4a44d829613495ec0d5f1bbb5a9ee/app/models/project_services/issue_tracker_service.rb#L9\n* https://gitlab.com/gitlab-org/gitlab/issues/18558","state":"closed","created_at":"2019-12-05T15:24:19.912Z","updated_at":"2021-11-08T16:04:06.953Z","closed_at":"2021-01-04T02:07:21.082Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"🤖 GitLab Bot 🤖","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["Category:Issue Tracking","Category:Team Planning","[deprecated] Accepting merge requests","auto closed","devops::plan","frontend","group::project management","priority::4","section::dev","severity::4","stale","type::bug","vintage"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":1141633,"username":"thuibregtse","name":"Tom Huibregtse","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1141633/avatar.png","web_url":"https://gitlab.com/thuibregtse"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38267","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38267","notes":"https://gitlab.com/api/v4/projects/278964/issues/38267/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38267/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38267","relative":"#38267","full":"gitlab-org/gitlab#38267"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27965757,"iid":38244,"project_id":278964,"title":"Merge request search: \"release tag\" filter not working","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nUsing the `release` filter on the merge request search page results in a 500.\n\n### Steps to reproduce\n\n- Go to Gitlab MR search page: https://gitlab.com/gitlab-org/gitlab/merge_requests\n- Choose the `release:tag_name` filter and add a value other than `Any` or `None`, eg. `10.0`. \n- Search.\n\n### Example Project\n\n(If possible, please create an example project here on GitLab.com that exhibits the problematic behavior, and link to it here in the bug report)\n\n(If you are using an older version of GitLab, this will also determine whether the bug is fixed in a more recent version)\n\n### What is the current *bug* behavior?\n\n- A 500 page shows up.\n\n### What is the expected *correct* behavior?\n\n- The MR search result page should show the relevant results.\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n(If you can, link to the line of code that might be responsible for the problem)","state":"closed","created_at":"2019-12-05T07:25:32.815Z","updated_at":"2019-12-06T08:21:16.844Z","closed_at":"2019-12-06T08:21:16.701Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["Category:Release Orchestration","devops::release","priority::2","severity::2","type::bug","workflow::in review"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":4192493,"username":"ebaque","name":"Etienne Baqué","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"}],"author":{"id":4192493,"username":"ebaque","name":"Etienne Baqué","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"type":"ISSUE","assignee":{"id":4192493,"username":"ebaque","name":"Etienne Baqué","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"user_notes_count":2,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38244","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38244","notes":"https://gitlab.com/api/v4/projects/278964/issues/38244/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38244/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38244","relative":"#38244","full":"gitlab-org/gitlab#38244"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27965596,"iid":38243,"project_id":278964,"title":"Reduce complexity of Chain::Config::Content","description":"This issue is a follow up from this MR review: https://gitlab.com/gitlab-org/gitlab/merge_requests/20179#note_254548965\n\nWe need to wait until https://gitlab.com/gitlab-org/gitlab/merge_requests/20179 and https://gitlab.com/gitlab-org/gitlab/merge_requests/21041 are both merged before we can refactor `Chain::Config::Content`.\n\nAn idea of refactoring is in https://gitlab.com/gitlab-org/gitlab/merge_requests/20179#note_254548965\n\n\u003e I agree this class is currently complex but it's also due to the feature flag as we have duplicate logic. That would go away in the next release. I agree with the intention in your proposal but I'd like to wait until we merge this and parent/child pipelines before refactoring this. The reason is that in parent/child pipelines we have a special case added to this class that may not fit this refactoring.\n\n\u003e Once it's all in place it would be easier to see what refactoring fits the class. I'll create an issue now to follow up after parent/child pipelines.","state":"closed","created_at":"2019-12-05T07:16:37.517Z","updated_at":"2019-12-05T15:35:05.263Z","closed_at":"2019-12-05T15:35:05.227Z","closed_by":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"labels":["Category:Continuous Integration","backend","backstage [DEPRECATED]","devops::verify","group::pipeline execution","maintenance::refactor"],"milestone":null,"assignees":[{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"}],"author":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"type":"ISSUE","assignee":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38243","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38243","notes":"https://gitlab.com/api/v4/projects/278964/issues/38243/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38243/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38243","relative":"#38243","full":"gitlab-org/gitlab#38243"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27965512,"iid":38242,"project_id":278964,"title":"Persist CI `config_content` when pipeline is being created","description":"## Problem\n\nPipeline creation does not only depend on the version of the `.gitlab-ci.yml` file. There are several factors/use cases that are at play here:\n1. the value of the `project.ci_config_path` can influence where the CI configuration comes from\n1. whether an Auto-Devops template was used because of the absence of `.gitlab-ci.yml`\n1. when a child pipeline (downstream pipeline for same project) is created, the parent pipeline (upstream) will pass in a snippet of yaml configuration\n\nWe don't have a way to inspect in the database what else contributed to have the current pipeline.\n\n## Solution\n\nWe should persist the `config_content` being used during the pipeline creation.\n\nFrom https://gitlab.com/gitlab-org/gitlab/merge_requests/20179#note_253420244\n\n\u003e We could extract this into a separate table called `ci_pipeline_config(id, pipeline_id, content, created_at)` with `Ci::Pipeline has_one Ci::Pipeline::Config`.\n\nRelated to issue: https://gitlab.com/gitlab-org/gitlab/issues/14376","state":"closed","created_at":"2019-12-05T07:10:38.461Z","updated_at":"2020-01-08T16:37:39.124Z","closed_at":"2020-01-02T12:58:29.552Z","closed_by":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"labels":["Category:Continuous Integration","backend","backstage [DEPRECATED]","devops::verify","group::pipeline execution","maintenance::refactor","missed:12.6","priority::2","workflow::production"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38242","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38242","notes":"https://gitlab.com/api/v4/projects/278964/issues/38242/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38242/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38242","relative":"#38242","full":"gitlab-org/gitlab#38242"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27957433,"iid":38231,"project_id":278964,"title":"Gracefully handle when epic tree retrieval times out.","description":"`502 Bad Gateway` (a timeout) received when trying to retrieve the epic tree.\n\nThe error could read something like \"the epic tree is too large\".\n\nReproduced on GitLab.com on https://gitlab.com/groups/gitlab-com/gl-security/compliance/-/epics/66:\n\n![image](/uploads/53550abb3dd79ab942c17b6859912b54/image.png)\n\n![image](/uploads/4f616f15f746cb30a6d836106644ead9/image.png)\n\nThe timing below suggests it is hitting the puma(?) timeout :thinking: \n\n![image](/uploads/9bd9ecf61377885dcf8b3d2db5e7397a/image.png)\n\nThis is on canary: ![image](/uploads/4f4b219f23004c12654f8efb2e0c1c26/image.png)","state":"closed","created_at":"2019-12-05T00:47:55.979Z","updated_at":"2021-02-16T23:18:09.854Z","closed_at":"2021-02-16T23:18:09.790Z","closed_by":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"labels":["GraphQL","UX","[deprecated] Accepting merge requests","api","devops::plan","epic tree","frontend","group::product planning","internal customer","missed:12.7","priority::4","section::dev","severity::4","stale","type::bug","vintage"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"type":"ISSUE","assignee":null,"user_notes_count":30,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38231","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38231","notes":"https://gitlab.com/api/v4/projects/278964/issues/38231/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38231/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38231","relative":"#38231","full":"gitlab-org/gitlab#38231"},"severity":"UNKNOWN","moved_to_id":27960047,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27955850,"iid":38222,"project_id":278964,"title":"Refactor Snippets edit to Vue","description":"## Summary\n\n\u003c!--\nPlease briefly describe what part of the code base needs to be refactored.\n--\u003e\n\nThe Snippets edit needs to be refactored to Vue.\n\nOut of scope is implementation of any new kind of editor (i.e. Single File Monaco) or refactoring (if required) the existing Ace Editor.\n\n## Improvements\n\n\u003c!--\nExplain the benefits of refactoring this code.\nSee also https://about.gitlab.com/handbook/values/index.html#say-why-not-just-what\n--\u003e\n\n## Risks\n\n\u003c!--\nPlease list features that can break because of this refactoring and how you intend to solve that.\n--\u003e\n\n## Involved components\n\n\u003c!--\nList files or directories that will be changed by the refactoring.\n--\u003e\n\n## Optional: Intended side effects\n\n\u003c!--\nIf the refactoring involves changes apart from the main improvements (such as a better UI), list them here.\nIt may be a good idea to create separate issues and link them here.\n--\u003e\n\n\n## Optional: Missing test coverage\n\n\u003c!--\nIf you are aware of tests that need to be written or adjusted apart from unit tests for the changed components,\nplease list them here.\n--\u003e","state":"closed","created_at":"2019-12-04T22:33:54.236Z","updated_at":"2020-03-19T12:34:59.824Z","closed_at":"2020-02-19T19:27:53.767Z","closed_by":{"id":2935693,"username":"phikai","name":"Kai Armstrong","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2c5d6a63b41cbeb3ea4cccda82e758e1?s=80\u0026d=identicon","web_url":"https://gitlab.com/phikai"},"labels":["Category:Snippets","[deprecated] Accepting merge requests","backstage [DEPRECATED]","devops::create","direction","frontend","group::editor","workflow::blocked"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":3199302,"username":"dmishunov","name":"Denys Mishunov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d85e45af29611ac2c1395e3c3d6ec5d6?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmishunov"}],"author":{"id":2935693,"username":"phikai","name":"Kai Armstrong","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2c5d6a63b41cbeb3ea4cccda82e758e1?s=80\u0026d=identicon","web_url":"https://gitlab.com/phikai"},"type":"ISSUE","assignee":{"id":3199302,"username":"dmishunov","name":"Denys Mishunov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d85e45af29611ac2c1395e3c3d6ec5d6?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmishunov"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38222","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38222","notes":"https://gitlab.com/api/v4/projects/278964/issues/38222/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38222/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38222","relative":"#38222","full":"gitlab-org/gitlab#38222"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27948315,"iid":38145,"project_id":278964,"title":"Replace labels in non-Vue JS with gitlab-ui component","description":"Replace each label reference in non-Vue JS with the gitlab-ui component.\n\nhttps://design.gitlab.com/components/labels","state":"closed","created_at":"2019-12-04T18:04:47.800Z","updated_at":"2020-03-24T16:14:49.574Z","closed_at":"2020-03-24T16:14:49.524Z","closed_by":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"labels":["backstage [DEPRECATED]","devops::plan","frontend","group::project management","missed-deliverable","missed:12.6","missed:12.7","missed:12.8","pajamas::integrate","workflow::verification"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"type":"ISSUE","assignee":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"user_notes_count":10,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38145","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38145","notes":"https://gitlab.com/api/v4/projects/278964/issues/38145/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38145/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38145","relative":"#38145","full":"gitlab-org/gitlab#38145"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2296,"epic":{"id":15828,"iid":2296,"title":"Implement gitlab-ui labels in GitLab","url":"/groups/gitlab-org/-/epics/2296","group_id":9970,"human_readable_end_date":"Mar 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27948272,"iid":38144,"project_id":278964,"title":"Replace labels in Haml with gitlab-ui CSS","description":"Update each label in Haml to use styling from gitlab-ui.\n\nhttps://design.gitlab.com/components/labels","state":"closed","created_at":"2019-12-04T18:03:31.748Z","updated_at":"2020-03-15T22:13:29.543Z","closed_at":"2020-03-15T22:13:29.490Z","closed_by":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"labels":["backstage [DEPRECATED]","devops::plan","frontend","group::project management","missed-deliverable","missed:12.6","missed:12.7","pajamas::integrate","workflow::verification"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"type":"ISSUE","assignee":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38144","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38144","notes":"https://gitlab.com/api/v4/projects/278964/issues/38144/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38144/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38144","relative":"#38144","full":"gitlab-org/gitlab#38144"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2296,"epic":{"id":15828,"iid":2296,"title":"Implement gitlab-ui labels in GitLab","url":"/groups/gitlab-org/-/epics/2296","group_id":9970,"human_readable_end_date":"Mar 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27948216,"iid":38143,"project_id":278964,"title":"Replace labels in Vue with gitlab-ui component","description":"Replace each label reference in Vue with the gitlab-ui component.\n\nhttps://design.gitlab.com/components/labels","state":"closed","created_at":"2019-12-04T18:01:52.218Z","updated_at":"2020-03-15T22:13:44.598Z","closed_at":"2020-03-15T22:13:44.542Z","closed_by":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"labels":["backstage [DEPRECATED]","devops::plan","frontend","group::project management","missed-deliverable","missed:12.6","missed:12.7","missed:12.8","pajamas::integrate","workflow::verification"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"type":"ISSUE","assignee":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38143","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38143","notes":"https://gitlab.com/api/v4/projects/278964/issues/38143/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38143/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38143","relative":"#38143","full":"gitlab-org/gitlab#38143"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2296,"epic":{"id":15828,"iid":2296,"title":"Implement gitlab-ui labels in GitLab","url":"/groups/gitlab-org/-/epics/2296","group_id":9970,"human_readable_end_date":"Mar 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27947570,"iid":38141,"project_id":278964,"title":"Allow skip ci on rebase via API","description":"### Problem to solve\n\nFor large monorepos with semi-linear branching and many devs working out of the same repo, rebases are quite common. However, these rebases cause the pipeline to run again, which is not desirable in the case of pipelines that take a long time to run, or utilize expensive hardware.\n\n### Intended users\n\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n\n### Proposal\n\nAdd the ability to send in a skip ci flag on the api call for a MR rebase. Alternatively, we could allow for a custom commit message and use the [skip ci](https://docs.gitlab.com/ee/ci/yaml/#skipping-jobs) string.\n\n### Further details\n\nAt least one large customer requires this.\n\nSeparate issue for UI feature to skip CI: https://gitlab.com/gitlab-org/gitlab/issues/118825 ","state":"closed","created_at":"2019-12-04T17:41:21.257Z","updated_at":"2020-06-11T23:46:07.967Z","closed_at":"2020-01-20T08:41:31.361Z","closed_by":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"labels":["Category:Continuous Integration","Deliverable","Technical Writing","UI text","UX","api","backend","customer","depth","devops::verify","direction","group::pipeline execution","planning priority","type::feature","workflow::production"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":489558,"username":"dimitrieh","name":"Dimitrie Hoekstra","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/489558/avatar.png","web_url":"https://gitlab.com/dimitrieh"},{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"}],"author":{"id":3225050,"username":"ebrinkman","name":"Eric Brinkman","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3225050/avatar.png","web_url":"https://gitlab.com/ebrinkman"},"type":"ISSUE","assignee":{"id":489558,"username":"dimitrieh","name":"Dimitrie Hoekstra","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/489558/avatar.png","web_url":"https://gitlab.com/dimitrieh"},"user_notes_count":46,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38141","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38141","notes":"https://gitlab.com/api/v4/projects/278964/issues/38141/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38141/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38141","relative":"#38141","full":"gitlab-org/gitlab#38141"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27946866,"iid":38137,"project_id":278964,"title":"Reindex after resuming indexing in ES administration","description":"## Summary\n\n\u003c!--\nPlease briefly describe what part of the code base needs to be refactored.\n--\u003e\n\nThis is a follow-up to https://gitlab.com/gitlab-org/gitlab/merge_requests/17230 / https://gitlab.com/gitlab-org/gitlab/merge_requests/18254 / https://gitlab.com/gitlab-org/gitlab/merge_requests/20421.\n\nWhen resuming ES indexing, the user usually wants to reindex to cover any indexing gaps since ES indexing has been paused.\n\n## Improvements\n\n\u003c!--\nExplain the benefits of refactoring this code.\nSee also https://about.gitlab.com/handbook/values/index.html#say-why-not-just-what\n--\u003e\n\nIn the backend, we need to accept a flag in the `/elasticsearch/toggle_indexing` endpoint, and if necessary queue a reindexing job after indexing has been enabled.\n\nIn the frontend, this should be implemented as in the [proposed designs](https://sketch.cloud/s/qw9WV):\n\n![image](/uploads/3660fe2aa30ccf4ddc077959528bfcd4/image.png)\n\nThere's a small change in wording though: Indexing is resumed **before** queueing the indexing job, at least with our current architecture.\n\n## Involved components\n\n\u003c!--\nList files or directories that will be changed by the refactoring.\n--\u003e\n\n- `ee/app/assets/javascripts/elasticsearch/components/es_index_actions.vue`\n  - The code for this already exists, but is commented out.\n- `ee/lib/api/elasticsearch_indices.rb`","state":"closed","created_at":"2019-12-04T17:18:57.219Z","updated_at":"2022-07-14T23:45:27.372Z","closed_at":"2022-07-14T23:45:27.341Z","closed_by":{"id":4888751,"username":"changzhengliu","name":"Changzheng Liu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4888751/avatar.png","web_url":"https://gitlab.com/changzhengliu"},"labels":["Category:Global Search","Enterprise Edition","GitLab Starter","[deprecated] Accepting merge requests","admin dashboard","advanced search","backend","devops::data_stores","frontend","group::global search","priority::4","section::enablement","severity::4","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38137","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38137","notes":"https://gitlab.com/api/v4/projects/278964/issues/38137/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38137/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38137","relative":"#38137","full":"gitlab-org/gitlab#38137"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1769,"epic":{"id":10974,"iid":1769,"title":"Advanced Global Search Administration UI Enhancements","url":"/groups/gitlab-org/-/epics/1769","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27946443,"iid":38135,"project_id":278964,"title":"Switch search source when deleting an index in ES administration","description":"## Summary\n\n\u003c!--\nPlease briefly describe what part of the code base needs to be refactored.\n--\u003e\n\nThis is a follow-up to https://gitlab.com/gitlab-org/gitlab/merge_requests/17230 / https://gitlab.com/gitlab-org/gitlab/merge_requests/18254 / https://gitlab.com/gitlab-org/gitlab/merge_requests/20421.\n\nCurrently a user can't delete an index if it's the active search source, and has to mark another index as active search source first. Also, the last remaining index can't be deleted.\n\n## Improvements\n\n\u003c!--\nExplain the benefits of refactoring this code.\nSee also https://about.gitlab.com/handbook/values/index.html#say-why-not-just-what\n--\u003e\n\nIn the backend, we need to accept an index ID in the `DELETE /elasticsearch_indices/:id` endpoint and mark it as the new active search source. If the last remaining index is deleted, ES searching and indexing needs to be disabled.\n\nIn the frontend, this should be implemented as in the [proposed designs](https://sketch.cloud/s/qw9WV):\n\n| State | Design\n| ----- | ------\n| **No other index exists** | ![image](/uploads/9e5de2af1f411a357d5657dd50632f7f/image.png)\n| **One other index exists** | ![image](/uploads/6d34b701e729cec0e164565d5d1649da/image.png)\n| **More than one other index exists** | ![image](/uploads/5004b1f4f4e1cac691e572c96ec65795/image.png)\n\n## Involved components\n\n\u003c!--\nList files or directories that will be changed by the refactoring.\n--\u003e\n\n- `ee/app/assets/javascripts/elasticsearch/`\n  - The code for this already exists, but is commented out.\n- `ee/app/services/elastic/destroy_index_service.rb`\n- `ee/lib/api/elasticsearch_indices.rb`","state":"closed","created_at":"2019-12-04T17:04:09.466Z","updated_at":"2022-07-14T23:40:21.428Z","closed_at":"2022-07-14T23:40:21.402Z","closed_by":{"id":4888751,"username":"changzhengliu","name":"Changzheng Liu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4888751/avatar.png","web_url":"https://gitlab.com/changzhengliu"},"labels":["Category:Global Search","Enterprise Edition","GitLab Starter","[deprecated] Accepting merge requests","admin dashboard","advanced search","backend","devops::data_stores","frontend","group::global search","priority::4","section::enablement","severity::4","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38135","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38135","notes":"https://gitlab.com/api/v4/projects/278964/issues/38135/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38135/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38135","relative":"#38135","full":"gitlab-org/gitlab#38135"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1769,"epic":{"id":10974,"iid":1769,"title":"Advanced Global Search Administration UI Enhancements","url":"/groups/gitlab-org/-/epics/1769","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27946232,"iid":38133,"project_id":278964,"title":"Credential inventory for group managed accounts","description":"## Problem\n\nWe explored the need for a credential inventory in https://gitlab.com/gitlab-org/gitlab/issues/32463, and have an MVC represented in https://gitlab.com/gitlab-org/gitlab/issues/36742. \n\nThis MVC covers self-managed GitLab instance, but does not provide oversight for customers using GitLab.com. For these organizations, we need to consider executing this at the group-level. \n\n## Proposal\n\nIntroduce an credential inventory for group managed accounts mapped to the group. A group Owner should be able to see PATs and SSH keys for managed users with the same information for each credential that we expose in https://gitlab.com/gitlab-org/gitlab/issues/36742.\n\n| Group-level `Security` View |\n| ------ |\n| ![Credentials_Inventory](https://gitlab.com/gitlab-org/gitlab/uploads/9c72a13ee157da4be6519bc1ec772281/Credentials_Inventory.png) |\n| A `Credentials` page within the Group's `Security` menu item that lists PATs and SSH keys based on https://gitlab.com/gitlab-org/gitlab/issues/36742 |\n\n## Permissions\nOnly `Group Owners` should be able to view this page.\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2019-12-04T16:57:24.051Z","updated_at":"2022-04-06T22:50:01.922Z","closed_at":"2020-02-10T09:01:31.944Z","closed_by":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"labels":["Category:Compliance Management","Deliverable","Enterprise Edition","GitLab Ultimate","UX","backend","customer+","devops::manage","direction","estimation::needed","frontend","gitlab.com","group::authentication and authorization","priority::2","workflow::in review"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"}],"author":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"type":"ISSUE","assignee":{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"},"user_notes_count":5,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38133","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38133","notes":"https://gitlab.com/api/v4/projects/278964/issues/38133/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38133/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38133","relative":"#38133","full":"gitlab-org/gitlab#38133"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2756,"epic":{"id":26044,"iid":2756,"title":"Manage|Compliance UX: Compliance Dashboard -  Functional Foundations","url":"/groups/gitlab-org/-/epics/2756","group_id":9970,"human_readable_end_date":"Mar 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27946363,"iid":38134,"project_id":278964,"title":"Dependency Scanning with no DinD mode conflicts with SAST","description":"### Summary\n\nWhen working with a customer we discovered that turning off DinD for Dependency Scanning resulted in passed pipeline but no gl-sast-report.json file.  In the log file you will see - \\\n\n\u003e Uploading artifacts...\n\u003e WARNING: gl-sast-report.json: no matching files    \n\u003e ERROR: No files to upload                           \n\u003e Job succeeded\n\n\n### Steps to reproduce\n\nI have been working with @ifrenkel, @theoretick and @gonzoyumo on this issue on Tue Dec 3, 2019.  See my example/test project below and refer to MR https://gitlab.com/mark.cesario/testing/test-removing-dind/merge_requests/1 and Pipeline [#100341020](https://gitlab.com/mark.cesario/testing/test-removing-dind/pipelines/100341020) and the log for job \"gemnasium-maven-dependency_scanning\".\n\n### Example Project\n\nThis is the test project - https://gitlab.com/mark.cesario/testing/test-removing-dind.  \n\nNote: This is a Private project.  Let me know who needs access and I will add them as members.\n\n### What is the current *bug* behavior?\n\nDS job succeeds but the artifact fails and it never shows up in the MR.\n\n### What is the expected *correct* behavior?\n\nI would expect the report would not fail and I would see the DS results in MR.  Note, I see \"Dependency scanning: Loading resulted in an error\" in the MR.  This doesn't seem like a reasonable error message.\n\n(What you should see instead)\n\nI would either like to see the DS report or an error message stating the job passed but the report failed for \"x\" reason.\n\n### Relevant logs and/or screenshots\n\nPlease see my test projects and MR https://gitlab.com/mark.cesario/testing/test-removing-dind/merge_requests/1\n\n### Output of checks\n\nThis bug happens on GitLab.com.\n\n#### Results of GitLab environment info\n\nThis happens on gitlab.com\n\n#### Results of GitLab application Check\n\nThis happens on gitlab.com\n\n### Possible fixes\n\nThe fact that a Dependency Scanning job outputs `gl-sast-report.json` (which is the artifact filename for SAST) means that we have a collision in the job definition. Looking at the vendored template we can indeed see that both SAST and Dedependency Scanning are using a template job named `.analyzer`.\n\n- https://gitlab.com/gitlab-org/gitlab/blob/master/lib/gitlab/ci/templates/Security/Dependency-Scanning.gitlab-ci.yml#L73\n- https://gitlab.com/gitlab-org/gitlab/blob/415868f032d03ab6c7d1035fbf197c3598beb877/lib/gitlab/ci/templates/Security/SAST.gitlab-ci.yml#L53\n\nWhen the final `.gitlab-ci.yml` is built, only one `.analyzer` job will exist and be used to extend all other jobs, whether they are for SAST or Dependency Scanning.\n\nTo fix that we need to change the name of the template job `.analyzer` to add a prefix e.g. `.sast-analyzer`, `.ds-analyzer`.\n\n\n/cc @gonzoyumo @ifrenkel @theoretick","state":"closed","created_at":"2019-12-04T16:53:33.804Z","updated_at":"2020-01-24T04:43:24.189Z","closed_at":"2020-01-06T11:38:36.636Z","closed_by":{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"},"labels":["Category:Dependency Scanning","devops::secure","group::composition analysis","priority::1","severity::1","type::bug","workflow::verification"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"}],"author":{"id":2139229,"username":"mjcesario","name":"Mark Cesario","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2139229/avatar.png","web_url":"https://gitlab.com/mjcesario"},"type":"ISSUE","assignee":{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"},"user_notes_count":13,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38134","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38134","notes":"https://gitlab.com/api/v4/projects/278964/issues/38134/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38134/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38134","relative":"#38134","full":"gitlab-org/gitlab#38134"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27943252,"iid":38120,"project_id":278964,"title":"Reindex specific indices in ES administration","description":"## Summary\n\n\u003c!--\nPlease briefly describe what part of the code base needs to be refactored.\n--\u003e\n\nThis is a follow-up to https://gitlab.com/gitlab-org/gitlab/merge_requests/17230 / https://gitlab.com/gitlab-org/gitlab/merge_requests/18254 / https://gitlab.com/gitlab-org/gitlab/merge_requests/20421.\n\nCurrently the UI has a global `Reindex` button, which queues a reindexing job that forwards indexing requests to all configured ES indices.\n\nWe want to add a way to only reindex a specific index, to avoid putting load on an existing ES index when adding a second one (for e.g. migration purposes).\n\n**Note:** \"Reindexing\" currently doesn't involve deleting existing ES documents, and will just try to index any missing data.\n\n## Improvements\n\n\u003c!--\nExplain the benefits of refactoring this code.\nSee also https://about.gitlab.com/handbook/values/index.html#say-why-not-just-what\n--\u003e\n\n- Refactor the involved backend services to limit indexing to a specific index.\n  - It's not clear yet how to do this, because our application-level code is \"blind\" to our gem-level multi-version proxies.\n- Extend the `/elasticsearch_indices/reindex` API endpoint to accept an ID for an ES index.\n- Enable the per-index `Start indexing` button in the frontend, and pass the index ID to the API.\n  - The button was already implemented in https://gitlab.com/gitlab-org/gitlab/merge_requests/20421, but is commented out.\n\n## Involved components\n\n\u003c!--\nList files or directories that will be changed by the refactoring.\n--\u003e\n\n- `ee/app/assets/javascripts/elasticsearch/components/es_index_actions.vue`\n- `ee/app/services/elastic/index_projects_service.rb`\n- `ee/lib/api/elasticsearch_indices.rb`","state":"closed","created_at":"2019-12-04T16:02:36.410Z","updated_at":"2022-07-14T23:47:25.341Z","closed_at":"2022-07-14T23:47:25.274Z","closed_by":{"id":4888751,"username":"changzhengliu","name":"Changzheng Liu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4888751/avatar.png","web_url":"https://gitlab.com/changzhengliu"},"labels":["Category:Global Search","Enterprise Edition","GitLab Starter","[deprecated] Accepting merge requests","admin dashboard","advanced search","backend","devops::data_stores","frontend","group::global search","priority::3","section::enablement","severity::3","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38120","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38120","notes":"https://gitlab.com/api/v4/projects/278964/issues/38120/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38120/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38120","relative":"#38120","full":"gitlab-org/gitlab#38120"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1769,"epic":{"id":10974,"iid":1769,"title":"Advanced Global Search Administration UI Enhancements","url":"/groups/gitlab-org/-/epics/1769","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27938877,"iid":38111,"project_id":278964,"title":"Retrying ES requests with multiple indices","description":"## Summary\n\n\u003c!--\nPlease briefly describe what part of the code base needs to be refactored.\n--\u003e\n\nThis is a follow-up to https://gitlab.com/gitlab-org/gitlab/merge_requests/17230 / https://gitlab.com/gitlab-org/gitlab/merge_requests/18254.\n\nWrite requests in the `forward_to_all_write_targets` method in `ee/lib/elastic/multi_version_util.rb` currently only return the first response with errors, causing the retry logic in `ee/app/services/elastic/index_record_service.rb` to retry the request on *all* ES indices, rather than just the failed ones.\n\nThe failures could also be different on each ES index, causing an unnoticed indexing gap.\n\n## Improvements\n\n\u003c!--\nExplain the benefits of refactoring this code.\nSee also https://about.gitlab.com/handbook/values/index.html#say-why-not-just-what\n--\u003e\n\nHandle retrying per-index, so failures on each index will be checked separately and retried as necessary.\n\nThis probably involves moving the retrying logic from our Rails services into the multi-version / Gem extension layer. Maybe this could also be implemented in the upstream gems, though we're currently stuck on old versions.\n\nAlso, we currently only implement retrying for `es_import` / `index_document` / `update_document` calls, but not for deletions with `delete_document`, `delete_child_documents`, `delete_by_query`. Retrying deletions could be split out into a separate issue.\n\n## Involved components\n\n\u003c!--\nList files or directories that will be changed by the refactoring.\n--\u003e\n\n- `ee/lib/elastic/multi_version_util.rb`\n- `ee/app/services/elastic/index_record_service.rb`","state":"closed","created_at":"2019-12-04T14:46:12.483Z","updated_at":"2022-05-31T11:26:03.454Z","closed_at":"2020-11-12T22:39:57.620Z","closed_by":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"labels":["Category:Global Search","Enterprise Edition","GitLab Starter","[deprecated] Accepting merge requests","advanced search","backend","bug::performance","devops::data_stores","group::global search","missed-SLO","priority::3","section::enablement","severity::2","type::bug"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38111","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38111","notes":"https://gitlab.com/api/v4/projects/278964/issues/38111/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38111/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38111","relative":"#38111","full":"gitlab-org/gitlab#38111"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1769,"epic":{"id":10974,"iid":1769,"title":"Advanced Global Search Administration UI Enhancements","url":"/groups/gitlab-org/-/epics/1769","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27938135,"iid":38106,"project_id":278964,"title":"Enable MR :diffs_batch_load feature flag by default","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## What\n\nThis is a reminder to change the feature flag `diffs_batch_load` to enabled by default. Let's not remove the feature flag yet as it's changing such a core feature of GitLab.\n\n## Owners\n\n- Team: Create::Source Code\n- Most appropriate slack channel to reach out to: `#g_create_source-code`\n- Best individual to reach out to: @iamphill @kerrizor @andr3 @oswaldo @m_gill\n\n## Expectations\n\n### What are we expecting to happen?\n\n### What might happen if this goes wrong?\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n\n## Beta groups/projects\n\nIf applicable, any groups/projects that are happy to have this feature turned on early. Some organizations may wish to test big changes they are interested in with a small subset of users ahead of time for example.\n\n- `gitlab-org/gitlab` project\n- `jboyson/my-awesome-test-project` project\n\n## Roll Out Steps\n\n- [x] Enable on staging\n- [x] Test on staging\n- [ ] Ensure that documentation has been updated\n- [x] Enable on GitLab.com for individual groups/projects listed above and verify behaviour\n- [x] Coordinate a time to enable the flag with `#production` and `#g_delivery` on slack.\n- [ ] Announce on the issue an estimated time this will be enabled on GitLab.com\n- [x] Enable on GitLab.com by running chatops command in `#production`\n- [x] Cross post chatops slack command to `#support_gitlab-com` and in your team channel\n- [ ] Announce on the issue that the flag has been enabled\n- [ ] Remove feature flag and add changelog entry\n- [ ] After the flag removal is deployed, [clean up the feature flag](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) by running chatops command in `#production` channel\n\n/label ~\"feature flag\"","state":"closed","created_at":"2019-12-04T14:31:19.725Z","updated_at":"2020-04-22T23:45:45.850Z","closed_at":"2020-02-17T22:36:24.796Z","closed_by":{"id":636429,"username":"mikegreiling","name":"Mike Greiling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/636429/avatar.png","web_url":"https://gitlab.com/mikegreiling"},"labels":["Deliverable","backend","backstage [DEPRECATED]","devops::create","feature flag","group::source code","missed-deliverable","missed:12.6","workflow::in dev"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":11493,"username":"oswaldo","name":"Oswaldo Ferreira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11493/avatar.png","web_url":"https://gitlab.com/oswaldo"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":14,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38106","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":11,"completed_count":6},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 11 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38106","notes":"https://gitlab.com/api/v4/projects/278964/issues/38106/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38106/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38106","relative":"#38106","full":"gitlab-org/gitlab#38106"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1816,"epic":{"id":11326,"iid":1816,"title":"⏳ Progressively load merge request diffs","url":"/groups/gitlab-org/-/epics/1816","group_id":9970,"human_readable_end_date":"Jul 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27936968,"iid":38103,"project_id":278964,"title":"Collect release evidence at moment of release end date","description":"### Problem to solve\n\n\u003c!-- What problem do we solve? --\u003e\n\nDuring an audit, release metadata at the time of deployment (indicated by release end date) may be required to show what the release contained at time of deployment. We need to be able to support these requests in GitLab Releases. In https://gitlab.com/gitlab-org/gitlab/issues/26019, we established a snapshot for release metadata when a release entry was created. This issue will expand the release metadata snapshot to include a snapshot of a release's metadata when a release has ended.\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\n\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n* [Dana (Data Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#dana-data-analyst)\n\nPersonas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\n* Release Managers\n* Compliance and security teams\n\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\n\nFrom the snapshot issue at time of release end date: \n\n#### Upcoming Releases\n\n##### Current Form\n\nAn **Upcoming Release** is defined as a having a `released_at` set to a future point in time, at present this can be achieved only by an API call. An upcoming Release is defined via the `Release#upcoming_release?` method.\n\n```ruby\ndef upcoming_release?\n  released_at.present? \u0026\u0026 released_at \u003e Time.zone.now\nend\n```\n\n**TODO** - The definition of **Upcoming Release** should be added to the documentation.\n\nThe current (incorrect) behavior for Evidence is that it is collected at the time of Release creation API call, for Upcoming Releases.\n\n#### Historical Releases\n\nIt is presently possible to create a release with a historical `released_at` date. There may be valid reasons for this, but if this is done, then the Evidence is created as of the current time, which is probably incorrect.\n\nEvidence creation on Historical Releases is invalid and should be prevented. We may also consider marking Releases as **Historical Release** if they were created with a historical date (with a new column).\n\nThe non-collection of creating Evidence, can be handled in this issue.\n\n#### Release and Evidence creation - Future form\n\nWhen a Release is created, determine if it is a **Release**, an **Upcoming Release** or a **Historical Release**. Passing the `released_at` field to the API is the deciding factor.\n\nThe existing `after_commit` hook on Release will be removed, and instead the `CreateEvidenceWorker` call will be made in the API controller, after the Release object is successfully created.\n\n```ruby\nafter_commit :create_evidence!, on: :create, unless: :importing?\n```\n\nhttps://gitlab.com/gitlab-org/gitlab/blob/master/lib/api/releases.rb#L68-70\n\nCurrent Release\n\nIf the `released_at` field is not passed, it is defaulted to the current timestamp and the Evidence is created. The `CreateEvidenceWorker` will be scheduled as `perform_async`.\n\nUpcoming Release\n\nIf a future `released_at` timestamp is provided via the API, the `CreateEvidenceWorker` will be scheduled for the future timestamp using the [Sidekiq Scheduled Jobs feature](https://github.com/mperham/sidekiq/wiki/Scheduled-Jobs), noting that it may not run exactly at the provided `released_at` timestamp.\n\nWe may consider adding a 'Release Evidence will be collected at dttm' message to the Release page.\n\nHistorical Release\n\nIf the `released_at` timestamp is provided and is in the past, an Evidence object will not be provided for this release.\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\n* A snapshot of the release JSON and its SHA256 for the current source code associated with the tag. The content will include details of the release, the associated milestones, the project, and related issue details. Here's is the the release 12.6 JSON:\n\n```json\n{\n  \"release\": {\n    \"id\": 5,\n    \"tag\": \"v4.0\",\n    \"name\": \"New release\",\n    \"project_id\": 45,\n    \"project_name\": \"Project name\",\n    \"released_at\": \"2019-06-28 13:23:40 UTC\",\n    \"milestones\": [\n      {\n        \"id\": 11,\n        \"title\": \"v4.0-rc1\",\n        \"state\": \"closed\",\n        \"due_date\": \"2019-05-12 12:00:00 UTC\",\n        \"created_at\": \"2019-04-17 15:45:12 UTC\",\n        \"issues\": [\n          {\n            \"id\": 82,\n            \"title\": \"The top-right popup is broken\",\n            \"author_name\": \"John Doe\",\n            \"author_email\": \"john@doe.com\",\n            \"state\": \"closed\",\n            \"due_date\": \"2019-05-10 12:00:00 UTC\"\n          },\n          {\n            \"id\": 89,\n            \"title\": \"The title of this page is misleading\",\n            \"author_name\": \"Jane Smith\",\n            \"author_email\": \"jane@smith.com\",\n            \"state\": \"closed\",\n            \"due_date\": \"nil\"\n          }\n        ]\n      },\n      {\n        \"id\": 12,\n        \"title\": \"v4.0-rc2\",\n        \"state\": \"closed\",\n        \"due_date\": \"2019-05-30 18:30:00 UTC\",\n        \"created_at\": \"2019-04-17 15:45:12 UTC\",\n        \"issues\": []\n      }\n    ]\n  }\n}\n```\n\n* A link to the external location of the \\*.exe or installation file of the build/release: (the link itself is not strong enough to be evidence, but can help find it easily during in audit) `\"links\":[ { \"id\":3, \"name\":\"hoge\", \"url\":\"https://google.com\", \"external\":true }`\n* The source code link will download the source code associated with the tag. If a release gets updated with a new tag, the source code will be downloaded against this new tag.\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?--\u003e\n\n* Permissions to view the release evidence should be inherited from release data - meaning only those with access to the data within release evidence can see the data  \n  * In https://gitlab.com/gitlab-org/gitlab/issues/34402, we should not permit unauthenticated users to access milestone data\n* Editing of release evidence snapshot should not be permitted\n* Nobody is able to download the evidence who does not have access to all of the data that is collected there \n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements\nIf this feature requires changing permissions, this document https://docs.gitlab.com/ee/user/permissions.html must be updated accordingly. --\u003e\n\n* [Release Evidence Docs](https://docs.gitlab.com/ee/user/project/releases/index.html#release-evidence)\n* [Release Permissions](https://docs.gitlab.com/ee/user/permissions.html#releases-permissions)\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n* With the availability to see a snapshot at time of deployment, we should expect to see and increase in MAU of releases\n\n### Links / references\n* [Related Snapshot Issue](https://gitlab.com/gitlab-org/gitlab/issues/26019)","state":"closed","created_at":"2019-12-04T14:10:46.754Z","updated_at":"2022-03-11T16:41:23.115Z","closed_at":"2020-01-31T22:48:11.215Z","closed_by":{"id":438961,"username":"splattael","name":"Peter Leitzen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/97c2ff0fc99cc4eede69be9ac238c304?s=80\u0026d=identicon","web_url":"https://gitlab.com/splattael"},"labels":["Category:Release Evidence","Deliverable","Kickoff Highlight","Release::P1","UX","backend","cicd::active","devops::release","direction","feature::enhancement","frontend","maturity::viable","type::feature","workflow::in review"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":4391348,"username":"sean_carroll","name":"Sean Carroll","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4391348/avatar.png","web_url":"https://gitlab.com/sean_carroll"}],"author":{"id":4905402,"username":"jreporter","name":"Jackie Porter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4905402/avatar.png","web_url":"https://gitlab.com/jreporter"},"type":"ISSUE","assignee":{"id":4391348,"username":"sean_carroll","name":"Sean Carroll","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4391348/avatar.png","web_url":"https://gitlab.com/sean_carroll"},"user_notes_count":51,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38103","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38103","notes":"https://gitlab.com/api/v4/projects/278964/issues/38103/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38103/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38103","relative":"#38103","full":"gitlab-org/gitlab#38103"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5135,"epic":{"id":175912,"iid":5135,"title":"Make the Release Evidence category 'Viable'","url":"/groups/gitlab-org/-/epics/5135","group_id":9970,"human_readable_end_date":"Dec 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27932784,"iid":38101,"project_id":278964,"title":"Add logging for every Group Import relation failure","description":"Follow up task from https://gitlab.com/gitlab-org/gitlab/merge_requests/19560#note_254506200\n\nMake sure every failure is properly logged to `importer.log`.","state":"closed","created_at":"2019-12-04T12:38:39.414Z","updated_at":"2021-05-18T20:46:42.313Z","closed_at":"2020-03-11T14:41:34.632Z","closed_by":{"id":4981524,"username":"jhyson","name":"Josianne Hyson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4981524/avatar.png","web_url":"https://gitlab.com/jhyson"},"labels":["DEPRECATED_group import","Deliverable","Importer:Group Export/Import","backend","devops::manage","estimation::completed","group::import","priority::3","workflow::verification"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":4981524,"username":"jhyson","name":"Josianne Hyson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4981524/avatar.png","web_url":"https://gitlab.com/jhyson"}],"author":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"type":"ISSUE","assignee":{"id":4981524,"username":"jhyson","name":"Josianne Hyson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4981524/avatar.png","web_url":"https://gitlab.com/jhyson"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38101","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38101","notes":"https://gitlab.com/api/v4/projects/278964/issues/38101/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38101/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38101","relative":"#38101","full":"gitlab-org/gitlab#38101"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1952,"epic":{"id":12745,"iid":1952,"title":"Group Export/Import API","url":"/groups/gitlab-org/-/epics/1952","group_id":9970,"human_readable_end_date":"Feb 21, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27931123,"iid":38096,"project_id":278964,"title":"Collect events data for burnup and burndown charts","description":"### Collect milestone events data for burnup and burndown charts. Weight: 3 + 1 = 5(as we do not use weight 4)\n\n##### Create the `resource_milestone_events` table. Weight: 1\n| issue_id | merge_request_id | milestone_id | user_id | action | state | created_at |\n|----------|------------------|--------------|---------|--------|-------|------------|\n| integer  | integer          |integer       | integer | integer | integer | datetime |\n\n* **issue_id** - FK to `issues` table\n* **merge_request_id** - FK to `merge_requests` table\n* **milestone_id** - the milestone(or milestones). We may consider having this field as array of integers in order to support same event triggered on issues with multiple milestones. E.g. if an issue is part of multiple milestones and its weight changes, instead of creating an event for each milestone have the `milestone_ids` store the values of milestones.\n* **user_id** - User that triggered the event.\n* **action** - one of enum values: Added | Removed | StateChange | WeightChange\n* **state** - issue or merge request state: Open, Closed, Merged. `state` change events can also be retrieved from the generic `events` table. I am wondering if it is worth duplicating this data here for performance reasons, rather than having to get it from the `events` table by joining the `resource_milestone_events` for given `issue` or `merge_request` grouped by `created_at` date. Perhaps it is worth running some query plans.\n* **created_at** - the date when event was triggered.\n\n##### Create the `issue_weight_events` table. Weight: 1\n| issue_id | user_id | weight | created_at |\n|----------|---------|---------|------------|\n| integer  | integer | integer | datetime |\n\nShould we be consistent and call this table `resource_weight_events` ? Although only issues have weights(at least for now).\n* **issue_id** - FK to `issues` table\n* **user_id** - User that triggered the event.\n* **weight** - weight of the issue, to be able to have the graph not only by count but also by weight. As an idea we may want to store the delta of the issue's old and new weight in order to later easily just sum the weights and get the sum for a specific date.\n* **created_at** - the date when event was triggered.\n\n###### Note: Table structure is not final, it may require changes during the actual implementation.\n\n##### Track events on milestone and weight changes for issues and merge requests. Weight: 3\n\nWhen an issue is created, updated, moved, reopened, promoted to epic, closed, deleted(any other ?) create a corresponding `resource_milestone_event` or `issue_weight_event` if any of the issue's `milestone` or `weight` changes(consider tracking `state` if we decide to keep `state` column within `resource_milestone_events`)\n\nTo consider: given we have about 6M issues, tracking issue changes may generate a big volume of events, so I think we should release this under a feature flag so that we can enable it for gitlab-org first and then perhaps make it available for wider audience ?","state":"closed","created_at":"2019-12-04T12:12:28.259Z","updated_at":"2020-07-15T10:27:31.996Z","closed_at":"2020-04-27T10:49:45.906Z","closed_by":{"id":376774,"username":"nolith","name":"Alessio Caiazza","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/376774/avatar.png","web_url":"https://gitlab.com/nolith"},"labels":["Enterprise Edition","GitLab Starter","backend","burndown/up charts","devops::plan","direction","documentation","group::project management","issues","missed:12.7","planning priority","type::feature","workflow::canary"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":3078895,"username":"pd-gitlab","name":"Patrick Derichs","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7e106768fae83577b0eec7daf082cb7d?s=80\u0026d=identicon","web_url":"https://gitlab.com/pd-gitlab"}],"author":{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"},"type":"ISSUE","assignee":{"id":3078895,"username":"pd-gitlab","name":"Patrick Derichs","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7e106768fae83577b0eec7daf082cb7d?s=80\u0026d=identicon","web_url":"https://gitlab.com/pd-gitlab"},"user_notes_count":17,"merge_requests_count":2,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38096","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38096","notes":"https://gitlab.com/api/v4/projects/278964/issues/38096/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38096/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38096","relative":"#38096","full":"gitlab-org/gitlab#38096"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1957,"epic":{"id":12766,"iid":1957,"title":"Track scope change within milestone [3]","url":"/groups/gitlab-org/-/epics/1957","group_id":9970,"human_readable_end_date":"Dec 22, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27928701,"iid":38091,"project_id":278964,"title":"Remove unused ES application settings","description":"## Summary\n\nRemove ES application settings that were moved to the `ElasticsearchIndex` model in https://gitlab.com/gitlab-org/gitlab/merge_requests/17230.\n\n**Note:** This should be done in M+1 releases after the above MR is merged, following the process at https://docs.gitlab.com/ee/development/what_requires_downtime.html#dropping-columns\n\n## Changes\n\n- In release M+1, remove these columns from the `application_settings` table:\n\n  - `elasticsearch_url`\n  - `elasticsearch_shards`\n  - `elasticsearch_replicas`\n  - `elasticsearch_aws`\n  - `elasticsearch_aws_region`\n  - `elasticsearch_aws_access_key`\n  - `encrypted_elasticsearch_aws_secret_access_key`\n  - `encrypted_elasticsearch_aws_secret_access_key_iv`\n\n- In release M+2, remove the `ignore_columns` rules in `app/models/application_setting.rb`.","state":"closed","created_at":"2019-12-04T11:10:17.402Z","updated_at":"2022-05-31T11:26:05.483Z","closed_at":"2022-03-30T11:32:42.712Z","closed_by":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"labels":["Category:Global Search","Enterprise Edition","GitLab Starter","[deprecated] Accepting merge requests","advanced search","backend","backstage [DEPRECATED]","database","devops::data_stores","group::global search","section::enablement"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38091","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38091","notes":"https://gitlab.com/api/v4/projects/278964/issues/38091/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38091/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38091","relative":"#38091","full":"gitlab-org/gitlab#38091"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1769,"epic":{"id":10974,"iid":1769,"title":"Advanced Global Search Administration UI Enhancements","url":"/groups/gitlab-org/-/epics/1769","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27928228,"iid":38088,"project_id":278964,"title":"Geo fails to replicate avatars when using diverging storage directories","description":"I was on a call with a customer where a bunch of uploads were failing to sync.\r\n\r\nThere were about ~1700 uploads failing to sync, and with the following piece of code on the Rails console we've found all the failures are avatars:\r\n\r\n```ruby\r\nGeo::FileRegistry.failed.group(:file_type).count\r\n```\r\n\r\nThe paths they have configured on the primary and the secondary for the local storage of uploads differs. On the primary they using something like NFS to offload the uploads, on the secondary they are using defaults.\r\n\r\nRelevant `gitlab.rb` excerpt from the primary:\r\n\r\n```ruby\r\ngitlab_rails['shared_path'] = \"/REDACTED/shared\"\r\n# ...\r\ngitlab_rails['uploads_directory'] = \"/REDACTED/uploads\"\r\n# ...\r\nuser['home'] = \"/REDACTED/home\"\r\n```\r\n\r\nRelevant `gitlab.rb` excerpt from the secondary:\r\n\r\n```ruby\r\n# gitlab_rails['shared_path'] = '/var/opt/gitlab/gitlab-rails/shared'\r\n# ...\r\n# gitlab_rails['uploads_directory'] = \"/var/opt/gitlab/gitlab-rails/uploads\"\r\n# ...\r\n# user['home'] = \"/var/opt/gitlab\"\r\n```\r\n\r\nError from `geo.log`:\r\n\r\n```\r\n{\r\n    \"severity\":\"ERROR\",\r\n    \"time\":\"2019-12-09T13:29:44.813Z\",\r\n    \"correlation_id\": \"e3d24203-4086-4ead-b08b-623d1723b7fc\",\r\n    \"class\":\"Gitlab::Geo::Replication::FileTransfer\",\r\n    \"message\":\"Error transferring file\",\r\n    \"job_id\":\"3f0e4ad973b5e0caea81d939\",\r\n    \"error\":\"{:error=\\u003e#\\u003cHTTP::Error: Unknown MIME type: text/plain\\u003e,:file_type=\\u003e:avatar, :file_id=\\u003e38900, :url=\\u003e\\\"https://gitlab.\u003cdomain\u003e/api/v4/geo/transfers/avatar/38900\\\"}\"\r\n} \r\n```\r\n\r\nThe customer tried to download the file manually from the cli locally and that succeeded. So it's not clear why Geo is getting `404` error.\r\n\r\n### Customer issues\r\n\r\n* https://gitlab.zendesk.com/agent/tickets/137542 \u0026 https://gitlab.zendesk.com/agent/tickets/143471: They first reported this issue. On a call we confirmed the failure only happens on avatars. In a the latter issue they let us know they don't have Geo active at the moment.\r\n* https://gitlab.zendesk.com/agent/tickets/143335: 2.7% of Uploads unreplicated, probably also only avatars\r\n* Geo team support request: https://gitlab.com/gitlab-com/geo-customers/issues/25","state":"closed","created_at":"2019-12-04T10:58:36.829Z","updated_at":"2020-09-22T14:44:30.004Z","closed_at":"2020-03-09T09:48:27.945Z","closed_by":{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"},"labels":["Category:Geo Replication","customer","devops::systems","group::geo","priority::3","severity::3","type::bug"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"}],"author":{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"},"type":"ISSUE","assignee":{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"},"user_notes_count":52,"merge_requests_count":2,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38088","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38088","notes":"https://gitlab.com/api/v4/projects/278964/issues/38088/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38088/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38088","relative":"#38088","full":"gitlab-org/gitlab#38088"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27921479,"iid":38080,"project_id":278964,"title":"Scala GitLab CI template does not work","description":"[The default Scala GitLab CI template](https://docs.gitlab.com/ee/ci/examples/test-scala-application.html) uses the `java:8` image, but at least for me this does not result in a working pipeline (I'm linking the EE docs but the issue is the same with the template that you can add from the repo code view). The problem seems to be that the image is outdated. Here is the output from the pipeline:\n\n```\nW: There is no public key available for the following key IDs:\n AA8E81B4331F7F50\nW: Failed to fetch http://deb.debian.org/debian/dists/jessie-backports/main/binary-amd64/Packages  404  Not Found [IP: 151.101.200.204 80]\nE: Some index files failed to download. They have been ignored, or old ones used instead.\n```\n\nAdditionally, the _template_ includes the command `sbt sbt-version` which is not a valid sbt command. The EE docs have fixed this to `sbt sbtVersion` which works.\n\n\u003c!-- Don't edit below this line --\u003e","state":"closed","created_at":"2019-12-04T08:56:32.564Z","updated_at":"2020-07-29T19:26:21.366Z","closed_at":"2020-07-29T19:26:21.193Z","closed_by":{"id":5709468,"username":"cheryl.li","name":"Cheryl Li","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709468/avatar.png","web_url":"https://gitlab.com/cheryl.li"},"labels":["Category:Continuous Integration","devops::verify","group::pipeline execution","priority::3","severity::3","type::bug","workflow::production"],"milestone":{"id":991112,"iid":42,"group_id":9970,"title":"13.0","description":"","state":"closed","created_at":"2019-09-04T15:20:39.024Z","updated_at":"2020-10-08T12:00:55.725Z","due_date":"2020-05-17","start_date":"2020-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/42"},"assignees":[{"id":5709468,"username":"cheryl.li","name":"Cheryl Li","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709468/avatar.png","web_url":"https://gitlab.com/cheryl.li"}],"author":{"id":1502724,"username":"ilkka","name":"Ilkka Poutanen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f1b45a6160aebb8fe4a20c99b6e4d031?s=80\u0026d=identicon","web_url":"https://gitlab.com/ilkka"},"type":"ISSUE","assignee":{"id":5709468,"username":"cheryl.li","name":"Cheryl Li","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709468/avatar.png","web_url":"https://gitlab.com/cheryl.li"},"user_notes_count":7,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38080","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38080","notes":"https://gitlab.com/api/v4/projects/278964/issues/38080/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38080/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38080","relative":"#38080","full":"gitlab-org/gitlab#38080"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27918723,"iid":38073,"project_id":278964,"title":"Follow-up from \"Create downstream pipeline inside same project\"","description":"The following discussion from !20930 should be addressed:\n\n- [ ] @dosuken123 started a [discussion](https://gitlab.com/gitlab-org/gitlab/merge_requests/20930#note_252970603):  (+5 comments)\n\n    \u003e If we allow to pass `config_content` as an argument, I feel we should pass `config_source` as well. Or should we pass one encapsulated domain object as the argument?\n\n\u003e we are assuming that from now on any time `Ci::CreatePipelineService` gets a content passed in as param it's always because of parent/child pipelines.\n\nI'd say `config_content` and `config_source` params should be always paired. For example,\n\n```diff\ndiff --git a/lib/gitlab/ci/config/content.rb b/lib/gitlab/ci/config/content.rb\nnew file mode 100644\nindex 00000000000..63dab28737b\n--- /dev/null\n+++ b/lib/gitlab/ci/config/content.rb\n@@ -0,0 +1,52 @@\n+# frozen_string_literal: true\n+\n+module Gitlab\n+  module Ci\n+    class Config\n+      class Content\n+        attr_reader :project, :source, :blob\n+\n+        delegate_missing_to :blob\n+\n+        def initialize(project)\n+          @project = project\n+        end\n+\n+        def generate_for_child_pipeline(bridge:)\n+          @blob = @bridge.yaml_in_upstream_for_downstream\n+          @source = :parent_pipeline_source\n+        end\n+\n+        def auto_generate(sha:)\n+          if @blob = content_from_repo(sha)\n+            @source = :repository_source\n+          elsif @blob = content_from_auto_devops\n+            @source = :auto_devops_source\n+          end\n+        end\n+\n+        private\n+\n+        def content_from_repo(sha)\n+          return unless project\n+          return unless sha\n+          return unless ci_config_path\n+\n+          project.repository.gitlab_ci_yml_for(sha, ci_config_path)\n+        rescue GRPC::NotFound, GRPC::Internal\n+          nil\n+        end\n+\n+        def content_from_auto_devops\n+          return unless project\u0026.auto_devops_enabled?\n+\n+          Gitlab::Template::GitlabCiYmlTemplate.find('Auto-DevOps').content\n+        end\n+\n+        def ci_config_path\n+          project.ci_config_path.presence || '.gitlab-ci.yml'\n+        end\n+      end\n+    end\n+  end\n+end\ndiff --git a/lib/gitlab/ci/pipeline/chain/config/content.rb b/lib/gitlab/ci/pipeline/chain/config/content.rb\nindex a8cd99b8e92..bd2dfceb7b4 100644\n--- a/lib/gitlab/ci/pipeline/chain/config/content.rb\n+++ b/lib/gitlab/ci/pipeline/chain/config/content.rb\n@@ -9,18 +9,18 @@ module Gitlab\n             include Chain::Helpers\n \n             def perform!\n-              return if @command.config_content\n-\n-              if content = content_from_repo\n-                @command.config_content = content\n-                @pipeline.config_source = :repository_source\n-                # TODO: we should persist ci_config_path\n-                # @pipeline.config_path = ci_config_path\n-              elsif content = content_from_auto_devops\n-                @command.config_content = content\n-                @pipeline.config_source = :auto_devops_source\n+              if @command.config_content\n+                @pipeline.config_source = @command.config_content.source\n+                return\n               end\n \n+              content = Gitlab::Ci::Config::Content\n+                .new(@command.project)\n+                .auto_generate(sha: @pipeline.sha)\n+\n+              @command.config_content = content\n+              @pipeline.config_source = content.source\n+\n               unless @command.config_content\n                 return error(\"Missing #{ci_config_path} file\")\n               end\n```\n\nand then\n\n```\ndef create_child_pipeline!\n  config_content = Gitlab::Ci::Config::Content.generate_for_child_pipeline\n\n  ::Ci::CreatePipelineService...\n    .execute(:pipeline, ignore_skip_ci: true, config_content: config_content)\n```\n\nThis way, it's very clear how the config blob was generated, which would leave some room for us to extend the architecture.","state":"closed","created_at":"2019-12-04T07:28:29.179Z","updated_at":"2019-12-05T15:30:13.193Z","closed_at":"2019-12-05T15:30:13.149Z","closed_by":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"labels":["Category:Continuous Integration","backend","backstage [DEPRECATED]","devops::verify","group::pipeline execution","maintenance::refactor"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"}],"author":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"type":"ISSUE","assignee":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38073","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38073","notes":"https://gitlab.com/api/v4/projects/278964/issues/38073/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38073/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38073","relative":"#38073","full":"gitlab-org/gitlab#38073"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":28758713,"iid":118446,"project_id":278964,"title":"POC: Action level tracking on backend","description":"Parent issue: https://gitlab.com/gitlab-org/telemetry/issues/290\n\n## Background\nCurrently, [backend tracking](https://docs.gitlab.com/ee/development/event_tracking/backend.html) is done by explicitly calling the `GitLab::Tracking.event` class method. This method needs to be explicitly called in each controller action or model we want to track. \n\nSince we're in the early stages of defining what to track, I'd like to explore implementing action-level global tracking which will track every request and action to our Rails application including all CRUD methods, page requests, form posts, API calls, etc.\n\nThe tracking can be implemented in ApplicationController which is a lower-level controller that other controllers will inherit from. Example of what an implementation could look like:\n```\nclass ApplicationController \u003c ActionController::Base\n  after_action :track_action\n\n  protected\n  def track_action\n    Gitlab::Tracking.event(controller, action, args)\n  end\nend\n```\n\n## Benefits\n* This is an easy way to quickly build a dataset of events to explore and sift through. This is a similar approach to what we're doing on the frontend where we first track everything then afterwards define explicit structured frontend events. In this case, global tracking at the action-level allows us to capture everything on the backend then afterwards define explicit structured backend events.\n* Backend tracking is likely more accurate than frontend tracking (which has to deal with browsers). More data via backend tracking can be arguably more accurate than more data on the frontend.\n\n## Drawbacks\n* The entire Rails application can be potentially slowed down. We'll need to do this async and optimize our use of [AsyncEmitter](https://github.com/snowplow/snowplow/wiki/Ruby-Tracker#52-the-asyncemitter-class) to avoid slow downs.\n* Since this is a catch-all approach, we'll need to be careful to avoid tracking data not covered by our TOS.","state":"closed","created_at":"2019-12-04T03:17:34.879Z","updated_at":"2021-01-25T21:17:17.967Z","closed_at":"2020-03-31T05:15:29.140Z","closed_by":{"id":2683007,"username":"jeromezng","name":"Jerome Z Ng","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2683007/avatar.png","web_url":"https://gitlab.com/jeromezng"},"labels":["devops::growth","group::product intelligence","link::child issue","workflow::blocked"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":2683007,"username":"jeromezng","name":"Jerome Z Ng","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2683007/avatar.png","web_url":"https://gitlab.com/jeromezng"},"type":"ISSUE","assignee":null,"user_notes_count":30,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/118446","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/118446","notes":"https://gitlab.com/api/v4/projects/278964/issues/118446/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/118446/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#118446","relative":"#118446","full":"gitlab-org/gitlab#118446"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27913895,"iid":38062,"project_id":278964,"title":"Code Review Analytics MVC","description":"## Overview\n\nAs part of https://gitlab.com/gitlab-org/gitlab/issues/38014, we're exploring adding analytics into the application that are dedicated to better understanding patterns and trends around code review. The effort represented by that issue involves discovery and design, but does not deliver additions to GitLab.\n\nThis issue serves as the Build issue to implement the designed solution in #38014.\n\n## Proposed Approach\n\n### Visual representation\n![Code_Review_Analytics_MVC_v4-removed-percentile-and-fix-definition](/uploads/8054961d99ed0153217bd1f4ea715533/Code_Review_Analytics_MVC_v4-removed-percentile-and-fix-definition.png)\n\n### Terms and Details\n\n* **Merge Requests in review** are all open MRs for given project\n* **Review time** is time from first non-author comment to merge (or now) in days/hours (adjust notice text accordingly)\n* **Review comment** is a comment on a MR from a human and non-author.\n* **Approvers** are people who already approved a MR\n* **Percentile (for a future iteration)** represents number of MRs with review time less or equal to given MR review time normalized to percents. E.g. `93% percentile` means that a MR review time is more than or equal to 93% of MRs in review. Lower number - better review time.\n* In the [project analytics sidebar](https://gitlab.com/gitlab-org/gitlab/issues/38318), introduce Code Review as a new project-level analytics feature\n* Search filter bar should support filter by milestone and labels.\n* Code Review analytics should be available in GitLab Starter+ license or Bronze+ plan.\n* Paginated in pages of 10 MRs.\n* Sort by review time in descending order.\n* Only accessible by the `Reporter` role and higher.","state":"closed","created_at":"2019-12-04T02:18:49.649Z","updated_at":"2022-08-09T06:56:29.578Z","closed_at":"2020-01-21T18:41:44.601Z","closed_by":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"labels":["Enterprise Edition","GitLab Starter","Kickoff Highlight","backend","devops::manage","estimation::needed","frontend","group::optimize","type::feature","workflow::ready for development"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"}],"author":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"type":"ISSUE","assignee":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"user_notes_count":45,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38062","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38062","notes":"https://gitlab.com/api/v4/projects/278964/issues/38062/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38062/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38062","relative":"#38062","full":"gitlab-org/gitlab#38062"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27913821,"iid":38061,"project_id":278964,"title":"Get unclear warning banner \"You won't be able to pull or push project code via HTTPS until you set a password on your account\" when logged into new project via Google","description":"## Problem Statement\n\nProspect feedback that the following warning banner is confusing as they already logged into GitLab.com using their Google account, so why do they have to create a password to be able to get code via `HTTPS` since they accessed the site using `https://gitlab.com`:\n\n![PastedGraphic-5](/uploads/5a31b7a7bb711f332fe7389c39117fef/PastedGraphic-5.png)\n\nThe confusion stems from the implicit assumption that \"pull or push project code\" is a command-line operation (e.g. `git clone https://gitlab.com/myProject`).\n\nThis is as opposed to the `ssh` banner, which, even though it could use a similar treatment clarification-wise, is less ambiguous because you only use `ssh` on the command-line (e.g. `ssh clone ssh://gitlab.com/myProject`).\n\n#### Reach\n\nMore casual users the GitLab UI, and of `git` itself, I think, may fall victim to this confusion.\n\nPlease also quantify the problem's reach using the following values, considering an aggregate across GitLab.com and self-managed:\n\n* 1.5 = Small reach (~5% to ~25%).\n\n#### Impact\n\nBy clarifying that the operations in question are for command-line `git`, there will be less confusion, and hopefully less need to contact support for help.\n\nNumerical assessment:\n* 1.0 = Medium impact\n\n#### Confidence\n\nProspect direct quote:\n\n\u003e So I would not expect to see this message when I am logged in via Google. Is that a bug?\n\nProblem's severity:\n\n* 50% = Low confidence\n\n#### Effort\n\nSWAG - the solution will take a product manager, designer, and engineer one week of effort - 0.75 (based on 0.25 months x 3 people).\n\n## Proposal\n#### :pencil2:  [Figma work file](https://www.figma.com/file/PawK9LyHu1Cy7xhBlxSzAC/Banners?node-id=215%3A3607)\n\n**Updated text:**\n\n---\n\n**Additional account configuration may be required**\n\nTo to [push and pull](https://docs.gitlab.com/ee/gitlab-basics/start-using-git.html#pull-and-push) over HTTPS with Git using an account authenticated with SSO or SAML, set up an SSH key or Personal Access Token to use instead of a password. For more information, see [Clone with HTTPS](https://docs.gitlab.com/ee/gitlab-basics/start-using-git.html#clone-with-https).\n\n---\n\n- Link to documentation for more info\n   - [push and pull](https://docs.gitlab.com/ee/gitlab-basics/start-using-git.html#pull-and-push)\n   - [Clone with HTTPS](https://docs.gitlab.com/ee/gitlab-basics/start-using-git.html#clone-with-https)\n\n![Frame_2](/uploads/cbe072f578db4b118d616f8d5e78381f/Frame_2.png)\n\n## Implementation plan\n\n1. Update [app/views/shared/_no_password.html.haml](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/views/shared/_no_password.html.haml) to use [app/views/shared/_global_alert.html.haml](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/views/shared/_global_alert.html.haml)\n1. Update copy and buttons in [app/views/shared/_no_password.html.haml](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/views/shared/_no_password.html.haml)\n1. Update [spec/features/projects/show/no_password_spec.rb#L5](https://gitlab.com/gitlab-org/gitlab/-/blob/master/spec/features/projects/show/no_password_spec.rb#L5)","state":"closed","created_at":"2019-12-04T02:11:25.196Z","updated_at":"2022-01-20T14:49:36.112Z","closed_at":"2021-11-08T16:18:56.013Z","closed_by":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"labels":["Category:Authentication and Authorization","FY22::Q4","Technical Writing","UX","UX debt","candidate::14.5","design-weight::1","devops::manage","frontend","group::authentication and authorization","priority::4","quad-planning::complete-no-action","section::dev","severity::3","tw-weight::1","type::feature","workflow::production"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"}],"author":{"id":3769593,"username":"kmcknight","name":"Ken McKnight","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3769593/avatar.png","web_url":"https://gitlab.com/kmcknight"},"type":"ISSUE","assignee":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"user_notes_count":32,"merge_requests_count":2,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38061","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38061","notes":"https://gitlab.com/api/v4/projects/278964/issues/38061/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38061/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38061","relative":"#38061","full":"gitlab-org/gitlab#38061"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27912965,"iid":38059,"project_id":278964,"title":"Follow-up from \"Update recommended base AWS instance to reflect current and more cost effective m5 EC2 instance\"","description":"This discussion relates to https://gitlab.com/gitlab-org/gitlab/blob/master/doc/install/aws/index.md#choose-an-instance-type, and whether or not we should be making recommendations for specific hardware choices on AWS. As mentioned, perhaps we should simply point to the hardware requirements, and not point out any specific product/option as that is likely to change in the future.\n\nThe following discussion from !21020 should be addressed:\n\n- [ ] @ronanoconnor started a [discussion](https://gitlab.com/gitlab-org/gitlab/merge_requests/21020#note_253862335):  (+1 comment)\n\n    \u003e Every time the Hardware Requirements doc changes or AWS updates it's hardware that will automatically put the AWS install recommendation out of sync.\n    \u003e \n    \u003e Why don't we just point the customer to the [Hardware Requirements](https://docs.gitlab.com/ee/install/requirements.html#hardware-requirements) page and let them choose. \n    \u003e \n    \u003e I'd also question whether we need Cx over Mx or even Tx type hardware, depending on the customers demands.","state":"closed","created_at":"2019-12-04T00:47:12.711Z","updated_at":"2021-06-15T14:11:09.319Z","closed_at":"2021-06-15T14:11:09.299Z","closed_by":{"id":3585,"username":"axil","name":"Achilleas Pipinellis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3585/avatar.png","web_url":"https://gitlab.com/axil"},"labels":["Technical Writing","devops::systems","docs::improvement","documentation","group::distribution","section::enablement"],"milestone":{"id":427853,"iid":10,"group_id":9970,"title":"Next 3-4 releases","description":"Bigger issues we plan to ship in the next 3-4 releases, but don't have a designated release yet. \r\n\r\n\u003e \"An easy way to look at it for me it's translating to months. Since our iterations are 1 month, I look at it as 'within the next 4 months'.\" - @dgruesso [via slack]\r\n\r\nDO NOT add small changes, bugs, regressions to this milestone.","state":"active","created_at":"2017-12-11T16:26:33.141Z","updated_at":"2020-07-14T18:21:29.639Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/10"},"assignees":[{"id":3585,"username":"axil","name":"Achilleas Pipinellis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3585/avatar.png","web_url":"https://gitlab.com/axil"},{"id":4706791,"username":"ronanoconnor","name":"Ronan OConnor","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4706791/avatar.png","web_url":"https://gitlab.com/ronanoconnor"}],"author":{"id":4155490,"username":"marcel.amirault","name":"Marcel Amirault","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155490/avatar.png","web_url":"https://gitlab.com/marcel.amirault"},"type":"ISSUE","assignee":{"id":3585,"username":"axil","name":"Achilleas Pipinellis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3585/avatar.png","web_url":"https://gitlab.com/axil"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38059","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38059","notes":"https://gitlab.com/api/v4/projects/278964/issues/38059/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38059/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38059","relative":"#38059","full":"gitlab-org/gitlab#38059"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":912,"epic":{"id":4988,"iid":912,"title":"AWS HA documentation","url":"/groups/gitlab-org/-/epics/912","group_id":9970,"human_readable_end_date":"Feb 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27904124,"iid":38031,"project_id":278964,"title":"Productivity Analytics: API responds with error when called with multiple labels","description":"When calling the `productivity_analytics` endpoint with multiple `label_name[]` it throws an error, see the following example:\n\nhttps://gitlab.com/-/analytics/productivity_analytics.json?group_id=gitlab-org\u0026project_id=gitlab-org%2Fgitlab\u0026label_name[]=frontend\u0026label_name[]=backend\u0026merged_at_after=2019-10-04T00:00:00Z\u0026merged_at_before=2019-12-03T23:59:59Z\u0026chart_type=scatterplot\u0026metric_type=days_to_merge\n\nIn contrast, with a single `label_name[]` the call succeeds:\n\nhttps://gitlab.com/-/analytics/productivity_analytics.json?group_id=gitlab-org\u0026project_id=gitlab-org%2Fgitlab\u0026label_name[]=frontend\u0026merged_at_after=2019-10-04T00:00:00Z\u0026merged_at_before=2019-12-03T23:59:59Z\u0026chart_type=scatterplot\u0026metric_type=days_to_merge","state":"closed","created_at":"2019-12-03T18:48:54.956Z","updated_at":"2020-01-10T09:47:54.993Z","closed_at":"2019-12-17T07:15:27.166Z","closed_by":{"id":273486,"username":"jameslopez","name":"James Lopez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/273486/avatar.png","web_url":"https://gitlab.com/jameslopez"},"labels":["analytics","backend","devops::manage","group::optimize","type::bug","workflow::in dev"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"}],"author":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"type":"ISSUE","assignee":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"user_notes_count":3,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38031","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38031","notes":"https://gitlab.com/api/v4/projects/278964/issues/38031/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38031/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38031","relative":"#38031","full":"gitlab-org/gitlab#38031"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27895433,"iid":38011,"project_id":278964,"title":"Add informational link to Dev Ops Score docs","description":"\u003c!--\n\n* Use this issue template for suggesting new docs or updates to existing docs.\n  Note: Doc work as part of feature development is covered in the Feature Request template.\n\n* For issues related to features of the docs.gitlab.com site, see\n     https://gitlab.com/gitlab-org/gitlab-docs/issues/\n\n* For information about documentation content and process, see\n     https://docs.gitlab.com/ee/development/documentation/ --\u003e\n\n### Problem to solve\n\nWe are [renaming Conv Dev to Dev Ops Score](https://gitlab.com/gitlab-org/gitlab/issues/20976) and the docs are being updated to change the feature name.\n\nHowever, the docs had a link - http://conversationaldevelopment.com/2017/04/16/what-is-conversational-development/  - to explain ConvDev, but it is removed in https://gitlab.com/gitlab-org/gitlab/merge_requests/21062/diffs\n\nShould there be a new link link to explain DevOpsScore? What should it be?\n\n\u003c!-- Include the following detail as necessary:\n* What product or feature(s) affected?\n* What docs or doc section affected? Include links or paths.\n* Is there a problem with a specific document, or a feature/process that's not addressed sufficiently in docs?\n* Any other ideas or requests?\n--\u003e\n\n### Further details\n\n\u003c!--\n* Any concepts, procedures, reference info we could add to make it easier to successfully use GitLab?\n* Include use cases, benefits, and/or goals for this work.\n* If adding content: What audience is it intended for? (What roles and scenarios?)\n  For ideas, see personas at https://design.gitlab.com/research/personas or the persona labels at\n  https://gitlab.com/groups/gitlab-org/-/labels?utf8=%E2%9C%93\u0026subscribed=\u0026search=persona%3A\n--\u003e\n\n### Proposal\n\n\u003c!-- Further specifics for how can we solve the problem. --\u003e\n\n### Who can address the issue\n\n\u003c!-- What if any special expertise is required to resolve this issue? --\u003e\n\n### Other links/references\n\n\u003c!-- E.g. related GitLab issues/MRs --\u003e","state":"closed","created_at":"2019-12-03T15:21:43.554Z","updated_at":"2020-02-13T22:23:55.120Z","closed_at":"2019-12-13T12:00:54.291Z","closed_by":{"id":4158075,"username":"aakriti.gupta","name":"Aakriti Gupta","state":"active","avatar_url":"https://secure.gravatar.com/avatar/992a080bc7d9f8c22ff7186db1c76dbd?s=80\u0026d=identicon","web_url":"https://gitlab.com/aakriti.gupta"},"labels":["DevOps Score","devops::manage","documentation","group::optimize"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[],"author":{"id":4158075,"username":"aakriti.gupta","name":"Aakriti Gupta","state":"active","avatar_url":"https://secure.gravatar.com/avatar/992a080bc7d9f8c22ff7186db1c76dbd?s=80\u0026d=identicon","web_url":"https://gitlab.com/aakriti.gupta"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38011","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38011","notes":"https://gitlab.com/api/v4/projects/278964/issues/38011/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38011/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38011","relative":"#38011","full":"gitlab-org/gitlab#38011"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27894680,"iid":38008,"project_id":278964,"title":"Clean-up following redis single-file caching project","description":"Introduced in https://gitlab.com/gitlab-org/gitlab/merge_requests/19917, once that project is launched and deemed successful, we have some cleanup to do.\n\n- [x] Remove :hset_redis_diff_caching feature flag\n- [x] Remove manual deprecated cache clearing !23893\n- [x] Add changelog entry for !19917","state":"closed","created_at":"2019-12-03T15:14:29.718Z","updated_at":"2020-08-09T19:52:52.736Z","closed_at":"2020-01-30T00:24:32.954Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["backend","backstage [DEPRECATED]","devops::create","group::source code"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"}],"author":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"type":"ISSUE","assignee":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"user_notes_count":0,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38008","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38008","notes":"https://gitlab.com/api/v4/projects/278964/issues/38008/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38008/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38008","relative":"#38008","full":"gitlab-org/gitlab#38008"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1816,"epic":{"id":11326,"iid":1816,"title":"⏳ Progressively load merge request diffs","url":"/groups/gitlab-org/-/epics/1816","group_id":9970,"human_readable_end_date":"Jul 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27894064,"iid":38005,"project_id":278964,"title":"Empty dependencies array is not handle by extends","description":"### Summary\n\nWhen declaring an empty \"dependencies\" array in a parent jobs to remove any dependencies to previous stages jobs, the child job doesn't inherit of this dependency removal.\n\n### Steps to reproduce\n### Example Project\n\nSample gitlab-ci.yml:\nhttps://gitlab.com/mgodlewski/gitlab_issue_extends_skip_empty_dependencies/blob/master/.gitlab-ci.yml\n\nThe corresponding pipeline\n\nhttps://gitlab.com/mgodlewski/gitlab_issue_extends_skip_empty_dependencies/pipelines/100308954\n\nThe logs of jobs2 shows that dependencies are downloaded and present :/\n\u003e Downloading artifacts for job1  \n\n\n### What is the current *bug* behavior?\n\nThe job2 has dependencies to job1.\n\n### What is the expected *correct* behavior?\n\nThe job2 has NO dependencies to job1.\n\n\n### Possible fixes\n\nIs this behaviour it's a feature, it should be documented.\n\nBut I'd rather prefer to see it as a bug because it's practical to remove dependencies in parent job definition.","state":"closed","created_at":"2019-12-03T14:59:56.823Z","updated_at":"2021-04-13T10:13:23.837Z","closed_at":"2021-03-15T02:09:26.330Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"🤖 GitLab Bot 🤖","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["Category:Pipeline Authoring","DEPRECATE_pipeline authoring","[deprecated] Accepting merge requests","auto closed","devops::verify","docs-only","group::pipeline authoring","priority::4","section::ops","severity::4","stale","type::bug","vintage"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":1805312,"username":"mgodlewski","name":"mgodlewski","state":"active","avatar_url":"https://secure.gravatar.com/avatar/45bf1384a4e9c2db243e71301776737f?s=80\u0026d=identicon","web_url":"https://gitlab.com/mgodlewski"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/38005","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/38005","notes":"https://gitlab.com/api/v4/projects/278964/issues/38005/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/38005/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#38005","relative":"#38005","full":"gitlab-org/gitlab#38005"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27891797,"iid":37999,"project_id":278964,"title":"Add SPDX licenses to license compliance - Switch hard coded list to value from Ruby","description":"This is a subissue for https://gitlab.com/gitlab-org/gitlab/issues/34209\n\nAs part of the work for https://gitlab.com/gitlab-org/gitlab/issues/34209 we want to switch from using a hard coded license list in ee/app/assets/javascripts/vue_shared/license_management/constants.js to use the dynamically updated SPDX list.\n\n## Feature Implementation Plan\n\nWe should swap out the constant in ee/app/assets/javascripts/vue_shared/license_management/components/add_license_form_dropdown.vue\n\n```\ndata: KNOWN_LICENSES.map(license =\u003e ({ id: license, text: license })),\n```\n\nto use a variable passed in from the HAML template. In:\n\n`ee/app/views/projects/licenses/index.html.haml`\n\nSomething like:\n\n```\n    #js-managed-licenses{ data: { api_url: @license_management_url, license_dropdown_list: \u003cLICENSES_FROM RUBY\u003e } }\n```\n\nThen in:\n```ee/app/assets/javascripts/license_compliance/index.js```\n\nwe do:\n\n```\nstore.dispatch('licenseManagement/setLicenseDropDownList', el.dataset.license_dropdown_list);\n```\n\nWe'd need to add VueX action, mutation, and store property to save this.\n\nAnd then in:\n\n```\nee/app/assets/javascripts/vue_shared/license_compliance/components/add_license_form.vue\n```\n\nWe'd want to use `mapState` to access that list and pass it down as a prop to\n\n```\nee/app/assets/javascripts/vue_shared/license_compliance/components/add_license_form_dropdown.vue\n```\n\n## Unit Test Implementation Plan\n\n- Test new action, mutation, and store related to the new `setLicenseDropDownList` action\n- Update existing unit tests in `add_license_form.vue` to use dropdown array from the store. It currently does not use the list directly since the child component imports a static list. It will pass it down as a prop, so we need to test the property is defined with `mapState`\n- Update `add_license_form_dropdown.vue` unit test to use the list values from a prop instead of a constant.","state":"closed","created_at":"2019-12-03T14:07:40.829Z","updated_at":"2021-04-03T08:31:39.619Z","closed_at":"2020-08-20T05:49:10.148Z","closed_by":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"labels":["Category:License Compliance","Deliverable","Enterprise Edition","GitLab Ultimate","Secure UX::Compliance \u0026 Auditing","UX","devops::secure","frontend","group::composition analysis","missed-deliverable","missed:13.2","quad-planning::complete-no-action","sub-issue","type::feature","workflow::production"],"milestone":{"id":1233752,"iid":50,"group_id":9970,"title":"13.3","description":"https://about.gitlab.com/releases/2020/08/22/gitlab-13-3-released/","state":"closed","created_at":"2020-04-09T17:39:21.090Z","updated_at":"2022-04-13T14:50:18.976Z","due_date":"2020-08-17","start_date":"2020-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/50"},"assignees":[{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"}],"author":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"type":"ISSUE","assignee":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"user_notes_count":12,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37999","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37999","notes":"https://gitlab.com/api/v4/projects/278964/issues/37999/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37999/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37999","relative":"#37999","full":"gitlab-org/gitlab#37999"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1662,"epic":{"id":10152,"iid":1662,"title":"License Compliance (License Scanning) - Minimal to Viable (again)","url":"/groups/gitlab-org/-/epics/1662","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":"on_track"},{"id":27887118,"iid":37995,"project_id":278964,"title":"Rollback / migrate external merge request diffs from object storage to database","description":"### Problem to solve\n\nGitLab includes a feature that permits merge request diffs to be stored in object storage, rather than in the database: https://docs.gitlab.com/ee/administration/merge_request_diffs.html#using-external-storage . However, if we change our mind about storage, or encounter problems in the rollout, there's no way to migrate the diffs back in-database.\n\n### Intended users\n\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n\n### Further details\n\nThis came up in the GitLab.com infra issue to roll out object storage: https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7356#note_253467652\n\n@cmiskell has noted that it would be good to have the rollback capability before pushing this to GitLab.com\n\n### Proposal\n\nIntroduce a method to move the diffs out of object storage and back into the database\n\n### Permissions and Security\n\nAdmin-accessible only. It might be fine for this to be rails-console-only in the first iteration.\n\n### Documentation\n\nhttps://docs.gitlab.com/ee/administration/merge_request_diffs.html\n\n### Testing\n\nWe should ensure that rollback is effective and removes the object store document as well. If storing in the database fails, we shouldn't remove the object store document. If that succeeds, but removing the document fails, we should at least log that and make sure it's possible to re-attempt removing the document.\n\n\n### Links / references","state":"closed","created_at":"2019-12-03T11:44:58.233Z","updated_at":"2021-10-27T10:41:42.962Z","closed_at":"2020-03-20T20:17:20.265Z","closed_by":{"id":15139,"username":"rspeicher","name":"Robert Speicher","state":"active","avatar_url":"https://secure.gravatar.com/avatar/73c8253932541a7b5cbc5d79493f2bea?s=80\u0026d=identicon","web_url":"https://gitlab.com/rspeicher"},"labels":["Category:Code Review Workflow","Deliverable","Eng-Consumer::Infrastructure","Eng-Producer::Development","Engineering Allocation","Object Storage","backend","devops::create","group::code review","infradev","internal customer","merge requests","priority::2","severity::2","type::feature","workflow::in review"],"milestone":{"id":1104429,"iid":46,"group_id":9970,"title":"12.10","description":"https://about.gitlab.com/releases/2020/04/22/gitlab-12-10-released","state":"closed","created_at":"2019-12-20T15:15:53.243Z","updated_at":"2020-10-08T12:00:39.852Z","due_date":"2020-04-17","start_date":"2020-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/46"},"assignees":[{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"}],"author":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"type":"ISSUE","assignee":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"user_notes_count":18,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37995","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37995","notes":"https://gitlab.com/api/v4/projects/278964/issues/37995/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37995/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37995","relative":"#37995","full":"gitlab-org/gitlab#37995"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27873348,"iid":37976,"project_id":278964,"title":"Permissions of project members under the subgroup changes unexptected","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n~bug \n\n\n\n### Summary\n\nChanging the permissions of one user's child group changes the permissions of other members of the grandchild project.\n\n・Parent group  \n　∟Child group   \n　　∟Grandchild group  \n　　　∟Great grandchild group  \n　　　　∟Great grandchild project  \n\n### Steps to reproduce\n\n1.Prepare about 10 test users.   \n2.Create a group project with the same configuration as above.  \n3.Register the permissions of all the test users in the parent group in Developer.  \n4.Register the permissions of all the test users in the child group in Maintainar.  \n5.Change the permissions of one test user in the child group from Maintainar to Developer.  \n\n\n### What is the current *bug* behavior?\n\nUsers who have not changed permissions in the child group will also change the permissions of the great-grandchild project.\n\n### What is the expected *correct* behavior?\n\nOnly the user whose permission is changed from \"Maintainar\" to \"Developer\" in the child group, the permission of the great grandchild project is changed from \"Maintainar\" to \"Developer\".\n\n### Relevant logs and/or screenshots\n![Image_Pasted_at_2019-12-3_13-18](/uploads/efe70f4134210490c815e9bc2a04a611/Image_Pasted_at_2019-12-3_13-18.png)\n\n![Image_Pasted_at_2019-12-3_13-19](/uploads/9f23543228a88bf0ffd5d743ab23817c/Image_Pasted_at_2019-12-3_13-19.png)","state":"closed","created_at":"2019-12-03T05:40:41.965Z","updated_at":"2022-04-06T08:23:15.088Z","closed_at":"2022-04-06T08:23:15.069Z","closed_by":{"id":2982208,"username":"mksionek","name":"Gosia Ksionek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2982208/avatar.png","web_url":"https://gitlab.com/mksionek"},"labels":["backend","devops::manage","estimation::completed","group::organization","missed-SLO","permissions","priority::2","section::dev","severity::2","type::bug","vintage","workflow::planning breakdown"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5038672,"username":"shimakai","name":"Kaisei Shima","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4440e479531dc1e73485c29d7fb85497?s=80\u0026d=identicon","web_url":"https://gitlab.com/shimakai"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37976","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37976","notes":"https://gitlab.com/api/v4/projects/278964/issues/37976/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37976/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37976","relative":"#37976","full":"gitlab-org/gitlab#37976"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27867147,"iid":37968,"project_id":278964,"title":"Add SPDX licenses to license compliance - load gon variable with list of software licenses","description":"Main issue - #34209\n\nThis follows the sub issue convention described in https://gitlab.com/gitlab-com/www-gitlab-com/issues/4588.\n\n* [x] Load `gon` variable with a list of software licenses.","state":"closed","created_at":"2019-12-02T22:49:32.573Z","updated_at":"2021-04-03T08:31:39.591Z","closed_at":"2020-06-26T16:40:46.589Z","closed_by":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"labels":["Category:License Compliance","Deliverable","Enterprise Edition","GitLab Ultimate","backend","devops::secure","group::composition analysis","quad-planning::complete-no-action","sub-issue","type::feature"],"milestone":{"id":1233746,"iid":49,"group_id":9970,"title":"13.2","description":"https://about.gitlab.com/releases/2020/07/22/gitlab-13-2-released/","state":"closed","created_at":"2020-04-09T17:28:01.032Z","updated_at":"2022-04-13T14:48:24.167Z","due_date":"2020-07-17","start_date":"2020-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/49"},"assignees":[{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"}],"author":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"type":"ISSUE","assignee":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37968","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37968","notes":"https://gitlab.com/api/v4/projects/278964/issues/37968/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37968/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37968","relative":"#37968","full":"gitlab-org/gitlab#37968"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1662,"epic":{"id":10152,"iid":1662,"title":"License Compliance (License Scanning) - Minimal to Viable (again)","url":"/groups/gitlab-org/-/epics/1662","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":27860025,"iid":37952,"project_id":278964,"title":"Add missing popover and remove \"none\" in MR widget","description":"Was not fixed in https://gitlab.com/gitlab-org/gitlab/merge_requests/15378 per the original issue's requirements (https://gitlab.com/gitlab-org/gitlab/issues/13215).\n\nor the default rule, can you please remove the “None” in the MR widget? And also add the missing popover that explains who is an eligible user?\n\n![image](https://gitlab.com/gitlab-org/gitlab/uploads/efdfb785cca01a7ea75ac411ec80b8f0/image.png)","state":"closed","created_at":"2019-12-02T18:47:35.800Z","updated_at":"2020-12-07T17:01:38.231Z","closed_at":"2019-12-06T11:27:32.891Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Category:Code Review Workflow","UX","UX debt","approvals","devops::create","frontend","group::code review"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37952","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37952","notes":"https://gitlab.com/api/v4/projects/278964/issues/37952/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37952/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37952","relative":"#37952","full":"gitlab-org/gitlab#37952"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27859972,"iid":37951,"project_id":278964,"title":"Project settings \"no. of required approvals\" input is +/- in non-sequential order","description":"Was not fixed in https://gitlab.com/gitlab-org/gitlab/merge_requests/15378.\n\nThis issue is affecting the approval project settings.\n\nwhen increasing/decreasing the no. of required approvals input, it has a strange behavior. It seems like the FE is overriding and then slowly changing the number.\n\n![Dec-02-2019_17-22-12](https://gitlab.com/gitlab-org/gitlab/uploads/07707043a46bc39ce52da213c0ed9485/Dec-02-2019_17-22-12.mp4)","state":"closed","created_at":"2019-12-02T18:45:13.198Z","updated_at":"2020-12-07T17:01:38.812Z","closed_at":"2020-03-05T21:02:10.218Z","closed_by":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"labels":["Category:Code Review Workflow","Deliverable","UX","UX debt","approvals","devops::create","frontend","group::code review","missed-deliverable","missed:12.6","missed:12.7","severity::3","type::bug"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37951","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37951","notes":"https://gitlab.com/api/v4/projects/278964/issues/37951/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37951/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37951","relative":"#37951","full":"gitlab-org/gitlab#37951"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27858006,"iid":37941,"project_id":278964,"title":"Importing a github project requires DNS resolution even when behind a proxy","description":"### Summary\n\nGitLab tries to resolve the hostname of hosts when importing a github project (namely github.com and api.github.com), which requires access to a DNS even when it's not needed ( thanks to a HTTP/HTTPS proxy)\n\n### Steps to reproduce\n\n* setup an instance with an outgoing HTTP proxy and no external DNS resolution\n\n```\ngitlab_rails['env'] = {\n   'http_proxy' =\u003e \"http://foo.bar:8080\",'https_proxy' =\u003e \"http://foo.bar:8080\",'no_proxy' =\u003e \"*.blah\"\n}\n\ngitaly['env'] = {\n   'http_proxy' =\u003e \"http://foo.bar:8080\",'https_proxy' =\u003e \"http://foo.bar:8080\",'no_proxy' =\u003e \"*.blah\"\n}\n\ngitlab_workhorse['env'] = {\n   'http_proxy' =\u003e \"http://foo.bar:8080\",'https_proxy' =\u003e \"http://foo.bar:8080\",'no_proxy' =\u003e \"*.blah\"\n}\n\nregistry['env'] = {\n   'http_proxy' =\u003e \"http://foo.bar:8080\",'https_proxy' =\u003e \"http://foo.bar:8080\",'no_proxy' =\u003e \"*.blah\"\n}\n```\n\n* import any project from Github\n\n### What is the current *bug* behavior?\n\nWe're getting a 500 error ( log below)\n\nAfter a bit of digging in the source code, I added github.com and api.github.com to the local hosts file and voila, imports work (through the proxy).\n\n### What is the expected *correct* behavior?\n\nHostname resolution should not be required to import a project.\n\n### Relevant logs and/or screenshots\n\nproduction.log when the 500 error occurs:\n\n```\nCompleted 500 Internal Server Error in 20028ms (ActiveRecord: 2.4ms | Elasticsearch: 0.0ms)\n  \nGitlab::UrlBlocker::BlockedUrlError (Host cannot be resolved or invalid):\n  \nlib/gitlab/url_blocker.rb:127:in `rescue in get_address_info'\nlib/gitlab/url_blocker.rb:110:in `get_address_info'\nlib/gitlab/url_blocker.rb:48:in `validate!'\nlib/gitlab/octokit/middleware.rb:11:in `call'\nlib/gitlab/legacy_github_import/client.rb:100:in `rate_limit'\nlib/gitlab/legacy_github_import/client.rb:111:in `has_rate_limit?'\nlib/gitlab/legacy_github_import/client.rb:115:in `rate_limit_exceed?'\nlib/gitlab/legacy_github_import/client.rb:123:in `request'\nlib/gitlab/legacy_github_import/client.rb:60:in `method_missing'\napp/controllers/import/github_controller.rb:107:in `client_repos'\napp/controllers/import/github_controller.rb:33:in `status'\nlib/gitlab/session.rb:11:in `with_session'\napp/controllers/application_controller.rb:450:in `set_session_storage'\nlib/gitlab/i18n.rb:55:in `with_locale'\nlib/gitlab/i18n.rb:61:in `with_user_locale'\napp/controllers/application_controller.rb:444:in `set_locale'\nlib/gitlab/middleware/rails_queue_duration.rb:27:in `call'\nlib/gitlab/metrics/rack_middleware.rb:17:in `block in call'\nlib/gitlab/metrics/transaction.rb:57:in `run'\nlib/gitlab/metrics/rack_middleware.rb:17:in `call'\nlib/gitlab/request_profiler/middleware.rb:17:in `call'\nlib/gitlab/middleware/go.rb:20:in `call'\nlib/gitlab/etag_caching/middleware.rb:13:in `call'\nlib/gitlab/middleware/correlation_id.rb:16:in `block in call'\nlib/gitlab/middleware/correlation_id.rb:15:in `call'\nlib/gitlab/middleware/multipart.rb:117:in `call'\nlib/gitlab/middleware/read_only/controller.rb:42:in `call'\nlib/gitlab/middleware/read_only.rb:18:in `call'\nlib/gitlab/middleware/basic_health_check.rb:25:in `call'\nlib/gitlab/request_context.rb:26:in `call'\nlib/gitlab/metrics/requests_rack_middleware.rb:29:in `call'\nlib/gitlab/middleware/release_env.rb:12:in `call'\n```\n\n### Plan\n\nAs seen through https://gitlab.com/gitlab-org/gitlab/-/issues/37941#note_713539071, using https://docs.gitlab.com/ee/security/webhooks.html#allowlist-for-local-requests as a guide to add in the hostnames that the importer reaches out to will enable importer to work as expected.\n\nBased on that we should either update the generic importer documentation and/or the https://docs.gitlab.com/ee/security/webhooks.html#allowlist-for-local-requests to better describe the use here.","state":"closed","created_at":"2019-12-02T17:32:43.223Z","updated_at":"2022-10-18T11:21:16.120Z","closed_at":"2021-12-15T14:51:54.405Z","closed_by":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"labels":["Category:Importers","Github","Importer:GitHub","Next Up","customer","devops::manage","documentation","group::import","milestone::p3","section::dev","severity::3","sup-eng-contrib-potential","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"}],"author":{"id":4324856,"username":"eric.demorsy","name":"Eric Demorsy","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3945ddb3c645e9a47c8f6e8734fa0287?s=80\u0026d=identicon","web_url":"https://gitlab.com/eric.demorsy"},"type":"ISSUE","assignee":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"user_notes_count":42,"merge_requests_count":0,"upvotes":4,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37941","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37941","notes":"https://gitlab.com/api/v4/projects/278964/issues/37941/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37941/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37941","relative":"#37941","full":"gitlab-org/gitlab#37941"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3051,"epic":{"id":39431,"iid":3051,"title":"💡 GitHub Importer improvements","url":"/groups/gitlab-org/-/epics/3051","group_id":9970},"iteration":null,"health_status":null},{"id":27858903,"iid":37947,"project_id":278964,"title":"When a pipeline fails, manual build \u0026 deploy jobs are cancelled even if not triggered by anyone","description":"### Summary\n\nWhen a Pipeline with Test -\u003e Build (manual) -\u003e Deploy runs and Test fails, deploy jobs is created and marked as cancelled even if not manually triggered by anyone\n\n### Steps to reproduce\n\nCreate any pipeline with TEST -\u003e BUILD MANUAL -\u003e DEPLOY (auto or manual with environment) and launch it.\n\n### Example Project\n\nFailed job: https://gitlab.com/probfacile/pipeline-environment-cancelled/-/jobs/366874653\n\nTree: https://gitlab.com/probfacile/pipeline-environment-cancelled/tree/master\n\nCancelled Deployment https://gitlab.com/probfacile/pipeline-environment-cancelled/environments/1237859\n\n### What is the current *bug* behavior?\n\nIF you have a test successfull you don't get a deploy in environments until you launch manual steps.\nIf you fail tests, you will find a deploy cancelled.\nThis bug also triggers a cancelled deployment hook for whatever is attached to it.\nFor example you see on slack a message stating deploy cancelled but you cannot filter it in webhooks.\n\n### What is the expected *correct* behavior?\n\nIf you fail tests, you don't get a deploy cancelled.\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n### Possible fixes","state":"closed","created_at":"2019-12-02T15:53:15.043Z","updated_at":"2021-07-21T20:32:01.644Z","closed_at":"2021-07-21T20:32:01.629Z","closed_by":{"id":5622641,"username":"nicolewilliams","name":"Nicole Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5622641/avatar.png","web_url":"https://gitlab.com/nicolewilliams"},"labels":["Category:Continuous Delivery","[deprecated] low hanging fruit","cicd::active","customer","devops::release","group::release","missed:13.6","missed:13.7","missed:14.1","priority::3","section::ops","severity::3","type::bug","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"}],"author":{"id":2950598,"username":"probfacile","name":"probfacile","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950598/avatar.png","web_url":"https://gitlab.com/probfacile"},"type":"ISSUE","assignee":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"user_notes_count":39,"merge_requests_count":0,"upvotes":11,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37947","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37947","notes":"https://gitlab.com/api/v4/projects/278964/issues/37947/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37947/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37947","relative":"#37947","full":"gitlab-org/gitlab#37947"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27852434,"iid":37931,"project_id":278964,"title":"faraday_middleware-aws-signers-v4 gem is unmaintained, switch to faraday_middleware-aws-sigv4","description":"As of 2019-09-30 we are not using the maintained version of [Faraday Middleware](https://lostisland.github.io/faraday/) for [Amazon Web Services Signature](https://docs.aws.amazon.com/general/latest/gr/signing_aws_api_requests.html). \n\nUpgrading to the currently maintained version of [FaradayMiddleware::AwsSigV4](https://github.com/winebarrel/faraday_middleware-aws-sigv4) Will give many advantages. \n- [More Region support in AWS. Version 2 is limited.](https://docs.aws.amazon.com/general/latest/gr/signature-version-2.html)\n- Allows us to update to the [Faraday 1.0 Public API](https://gitlab.com/gitlab-org/gitlab/-/issues/224296). \n- It is regularly updated. \n- Based on the current [AWS SDK for Ruby - Version 3](https://docs.aws.amazon.com/sdk-for-ruby/index.html)\n\nMore about the advantages of [AWS Signature v4](https://docs.aws.amazon.com/general/latest/gr/sigv4_changes.html)\n\n[Faraday Middleware Aws Sig V4 installation](https://github.com/winebarrel/faraday_middleware-aws-sigv4#faradaymiddlewareawssigv4)\n\n[Take note of the possible need to rename. ](https://github.com/winebarrel/faraday_middleware-aws-sigv4#upgrading-from-faraday_middleware-aws-signers-v4)","state":"closed","created_at":"2019-12-02T14:49:24.601Z","updated_at":"2022-05-31T11:26:11.313Z","closed_at":"2020-07-30T06:23:28.606Z","closed_by":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"labels":["Category:Global Search","Deliverable","Roadmap","advanced search","customer","devops::data_stores","group::global search","maintenance::dependency","maintenance::refactor"],"milestone":{"id":1233752,"iid":50,"group_id":9970,"title":"13.3","description":"https://about.gitlab.com/releases/2020/08/22/gitlab-13-3-released/","state":"closed","created_at":"2020-04-09T17:39:21.090Z","updated_at":"2022-04-13T14:50:18.976Z","due_date":"2020-08-17","start_date":"2020-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/50"},"assignees":[{"id":4888751,"username":"changzhengliu","name":"Changzheng Liu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4888751/avatar.png","web_url":"https://gitlab.com/changzhengliu"}],"author":{"id":3855,"username":"pravi","name":"Praveen Arimbrathodiyil","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3855/sajjangad1.JPG","web_url":"https://gitlab.com/pravi"},"type":"ISSUE","assignee":{"id":4888751,"username":"changzhengliu","name":"Changzheng Liu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4888751/avatar.png","web_url":"https://gitlab.com/changzhengliu"},"user_notes_count":15,"merge_requests_count":2,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37931","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37931","notes":"https://gitlab.com/api/v4/projects/278964/issues/37931/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37931/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37931","relative":"#37931","full":"gitlab-org/gitlab#37931"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4855,"epic":{"id":141599,"iid":4855,"title":"Advanced Search administration and maintainability tasks","url":"/groups/gitlab-org/-/epics/4855","group_id":9970,"human_readable_end_date":"May 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27850044,"iid":37926,"project_id":278964,"title":"1.2 Create the secondary node for staging","description":"The aim is to have an all-in-one box that is the Geo secondary on staging.gitlab.com. From the comment From the comment: https://gitlab.com/gitlab-org/gitlab/issues/37428#note_253501562, we should NOT use `geo-dr-01-db-gstg.c.gitlab-staging-1.internal`, but a new node that does not include `db` in the name to avoid confusion. \n\nFor getting the GitLab instance in place, there is another issue (https://gitlab.com/gitlab-org/gitlab/issues/37428) that could be required.","state":"closed","created_at":"2019-12-02T13:46:04.697Z","updated_at":"2020-06-09T01:10:28.617Z","closed_at":"2020-01-28T14:35:19.298Z","closed_by":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"labels":["Deliverable","devops::systems","direction","group::geo","missed-deliverable","missed:12.6"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2722370,"username":"rnienaber","name":"Rachel Nienaber","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2722370/avatar.png","web_url":"https://gitlab.com/rnienaber"},"type":"ISSUE","assignee":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"user_notes_count":131,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37926","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37926","notes":"https://gitlab.com/api/v4/projects/278964/issues/37926/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37926/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37926","relative":"#37926","full":"gitlab-org/gitlab#37926"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1908,"epic":{"id":12323,"iid":1908,"title":"Rollout Geo to staging.gitlab.com","url":"/groups/gitlab-org/-/epics/1908","group_id":9970,"human_readable_end_date":"Apr 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27842983,"iid":37914,"project_id":278964,"title":"Come up with ubiquitous language for pipeline-to-pipeline relationship","description":"## Problem\n\nIn the context of pipeline-to-pipeline relationship we have used various terms over time and the code does not reflect a [Ubiquitous Language](https://martinfowler.com/bliki/UbiquitousLanguage.html).\n\n* upstream pipeline / downstream pipeline: used when a pipeline creates a downstream pipeline. **Problem:** upstream/downstream terms are time-sensitive. They primarily indicate what ran before/after.\n* parent pipeline / child pipeline: used for pipeline that creates another pipeline within the same project. **Problem**: cross-project pipeline could still be thought as parent-child pipeline\n* `Ci::Pipeline#triggered_pipelines`: used to indicate all downstream pipelines. **Problem**: see problems with the \"trigger\" term below\n* `Ci::Pipeline#triggered_by`: used to indicate the upstream pipeline. **Problem:** this is a duplicate term of upstream/parent. Also we use the term \"trigger\" with \"trigger token\", \"trigger request\", \"trigger variables\".\n* `Ci::Sources::Pipeline` we use `source_` for project/pipeline/job. **Problem**: another synonym of upstream/trigger/parent\n* what terms do we use for a pipeline that subscribes to another pipeline?\n\nOther related terms:\n\nThe terms `trigger`, `spawn`, `create` are used interchangeably. For **trigger** I think of a system that is fixed and deterministic and we simply decide to run it as-is. When a pipeline injects a configuration at creation-time (like parent/child pipeline) it's not really triggering a pipeline but rather generate/create a pipeline with some input parameters.\n\n## Goal\n\n1. [ ] Come up with terms that will be used consistently in the codebase and documentation\n1. [ ] Change the terms in the code base ~backend =\u003e Issue to be created\n1. [ ] Change the terms in the documentation ~\"Technical Writing\" =\u003e Issue to be created\n\n### Weighting rubric\n\n| Size     | Score | Description                                                                                                                                                                                                                                                                                                                               |  |  |  |  |  |  |  |  |\n|----------|-------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--|--|--|--|--|--|--|--|\n| Trivial  | 1     | Mostly small to medium UI changes, smaller UX improvements, without unanswered questions. UX may need to stay involved with the issue but might not have to do work.                                                                                                                                                                      |  |  |  |  |  |  |  |  |\n| Small    | 2     | Simple UI or UX change where we understand all of the requirements, but may need to find solutions to known questions/problems.                                                                                                                                                                                                           |  |  |  |  |  |  |  |  |\n| Medium   | 3     | A medium change (lots of UI or UX changes/improvements required). Multiple pages are involved, we're starting to design/redesign small flows. Some unknown questions may arise during the work.                                                                                                                                           |  |  |  |  |  |  |  |  |\n| Large    | 5     | A complicated change where other team members will need to be involved. Spans across multiple pages, we're working on medium-sized flows. There are significant open questions that need to be answered.                                                                                                                                  |  |  |  |  |  |  |  |  |\n| Huge     | 8     | A complex change that spans across large flows and may require input from other designers. This is the largest flow design/redesign that we would take on in a single milestone.                                                                                                                                                          |  |  |  |  |  |  |  |  |\n| Gigantic | 13    | A significant change that spans across multiple flows and that would require significant input from others (teams, team members, user feedback) and there are many unknown unknowns. It's unlikely we would commit to this in a milestone, and the preference would be to further clarify requirements and/or break in to smaller issues. |  |  |  |  |  |  |  |  |","state":"closed","created_at":"2019-12-02T11:47:53.485Z","updated_at":"2020-02-26T07:10:04.394Z","closed_at":"2020-02-26T07:10:04.109Z","closed_by":{"id":489558,"username":"dimitrieh","name":"Dimitrie Hoekstra","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/489558/avatar.png","web_url":"https://gitlab.com/dimitrieh"},"labels":["Category:Continuous Integration","UX","[deprecated] Accepting merge requests","backstage [DEPRECATED]","depth","devops::verify","documentation","group::pipeline execution","maintenance::refactor","workflow::validation backlog"],"milestone":null,"assignees":[],"author":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"type":"ISSUE","assignee":null,"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37914","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37914","notes":"https://gitlab.com/api/v4/projects/278964/issues/37914/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37914/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37914","relative":"#37914","full":"gitlab-org/gitlab#37914"},"severity":"UNKNOWN","moved_to_id":31275315,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27839281,"iid":37910,"project_id":278964,"title":"Refactor tracking code in container registry","description":"Currently the tracking code in the container registry is not using the Tracking mixin in some part and in general is using an older approach.\n\nWe should refactor the code so that the mixin is used.","state":"closed","created_at":"2019-12-02T10:33:22.507Z","updated_at":"2019-12-03T13:26:49.447Z","closed_at":"2019-12-02T17:36:23.024Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["Category:Container Registry","backstage [DEPRECATED]","container registry expert","devops::package","frontend","group::package registry","package:active","workflow::verification"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"}],"author":{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"type":"ISSUE","assignee":{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37910","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37910","notes":"https://gitlab.com/api/v4/projects/278964/issues/37910/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37910/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37910","relative":"#37910","full":"gitlab-org/gitlab#37910"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27825301,"iid":37905,"project_id":278964,"title":"Explore if Group Deletion can be performed without a (current) user.","description":"The Manage team is working on a feature that helps admins performed delayed deletion for groups - https://gitlab.com/gitlab-org/gitlab/issues/33257.\n\nHowever, if this action is delayed, it is possible that the user who marked a group for deletion itself is deleted from the system before the group deletion actually takes place and hence, at the time of group deletion we will not have a user to perform this action, as `GroupDestroyWorker` and associated services require a user to perform these actions (for permission check, audit logging etc).\n\nSo we should explore whether group deletion can be performed as a system event, ie, even without the presence of a user.\n\nWe currently follow a similar approach while deleting members with expired access from a group/project - it works even without a user. Refer: `RemoveExpiredMembersWorker`\n\nDiscussion: https://gitlab.com/gitlab-org/gitlab/merge_requests/19679#note_240823396","state":"closed","created_at":"2019-12-02T06:02:13.240Z","updated_at":"2021-01-07T20:12:34.703Z","closed_at":"2021-01-07T20:12:34.624Z","closed_by":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"labels":["Category:Authentication and Authorization","backend","devops::manage","group::compliance","section::dev","workflow::problem validation"],"milestone":null,"assignees":[{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"}],"author":{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"},"type":"ISSUE","assignee":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37905","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37905","notes":"https://gitlab.com/api/v4/projects/278964/issues/37905/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37905/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37905","relative":"#37905","full":"gitlab-org/gitlab#37905"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27819745,"iid":37898,"project_id":278964,"title":"Job-Token authentication should be allowed at core tier","description":"## Problem \n\nIt seems there is an inconsistency in Job-Token authentication mechanism. Look at the following facts:\n\n- We define `#find_user_from_job_token` in EE directory, which means it's proprietary code. According to [the doc](https://gitlab.com/gitlab-org/gitlab/blob/master/doc%2Fapi%2FREADME.md#authentication), job-token authentication is available at EEP tier.\n- In Job Artifact API, we [intend to allow](https://gitlab.com/gitlab-org/gitlab/blob/master/lib%2Fapi%2Fjob_artifacts.rb#L27) Job-Token authentication even if it's implemented at core tier. With the above fact, I assume this job-token authentication is currently broken at core tier (I don't see any tests for this API)\n\nFurther more, we want to allow Job-Token authentication in [Release API](https://gitlab.com/gitlab-org/gitlab/issues/26013), which is available at core tier. Therefore, the current implementation needs to be adjusted.\n\n## Proposal\n\nGiven Job-Token authentication itself is not allowed for any endpoints by default (in other word, we need to explicitly specify which endpoint can accept the job-token header), we can safely move the `#find_user_from_job_token` into core level. This fixes the above problems on Job Artifact API and Release API.\n\nWe should also fix [the doc](https://gitlab.com/gitlab-org/gitlab/blob/master/doc%2Fapi%2FREADME.md#authentication) as it's misleading that we don't allow Job-Token in any API even if user has EEP license.","state":"closed","created_at":"2019-12-02T02:42:27.099Z","updated_at":"2020-01-28T14:17:11.661Z","closed_at":"2019-12-10T17:18:56.977Z","closed_by":{"id":12452,"username":"ayufan","name":"Kamil Trzciński","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a285e30f35d72526fb0954e8fe7cefa?s=80\u0026d=identicon","web_url":"https://gitlab.com/ayufan"},"labels":["Category:Release Orchestration","Release::P1","devops::release","workflow::in review"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":4391348,"username":"sean_carroll","name":"Sean Carroll","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4391348/avatar.png","web_url":"https://gitlab.com/sean_carroll"}],"author":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"type":"ISSUE","assignee":{"id":4391348,"username":"sean_carroll","name":"Sean Carroll","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4391348/avatar.png","web_url":"https://gitlab.com/sean_carroll"},"user_notes_count":11,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37898","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37898","notes":"https://gitlab.com/api/v4/projects/278964/issues/37898/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37898/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37898","relative":"#37898","full":"gitlab-org/gitlab#37898"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27779902,"iid":37802,"project_id":278964,"title":"Document Dependency Scanning paradigm: multiple lock files, or one requirements/parent build file per job","description":"### Problem to solve\n\nIt's not clear whether a Dependency Scanning analyzer scans multiple dependency files, or a single file.\n\nWe need documentation of how it works today. And we need to solicit feedback from users who experience pain with the current way things work so that we can decide on a single rule for both users running the scanners and developers implementing them in the future. This rule needs to be documented, so that users can predict how scanners will behave.\n\n### Intended users\n\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n\n+  ~\"group::composition analysis\" team\n\n### Further details\n\nCurrently there seems to be a discrepancy between the Gemnasium based analyzers:\n- [gemnasium](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium) scans multiple lock files all at once\n- [gemnasium-python](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python) and [gemnasium-maven](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-maven) only scan a single file\n\nThis should be codified as two existing rules that function today.\n\n### Proposal\n\nMake a new issue asking users if they experienced an issue as a result of the current code and which of the following might have solved their issue:\n\nWhen executing in a CI job, a Dependency Scanning analyzer would either process:\n- multiple lock files (default)\n- one requirements file (fallback)\n\nWhen processing a requirements file, the analyzer installs the project dependencies using the package manager, so this is expensive (time and bandwidth). This is why analyzers should NOT process multiple requirements by default. Also, it makes sense to run multiple dependency scanning jobs to process multiple requirements files, to reduce the overall execution time of the pipeline.\n\nAnalyzers should first attempt to parse and process lock files because this is both more accurate (it reflects the exact versions used in production) and way cheaper (no need to install the dependencies). They should process a single requirements file as a fallback, or when explicitly requested to do so (variables to be later defined)\n\nThis already reflects the way gemnasium, gemnasium-python, and gemnasium-maven currently behave.\n\n### Implementation plan\n\nUse [this commit](https://gitlab.com/gitlab-org/gitlab/-/commit/2cb443dd1a2facd86cba41eb3291171111860df4) as a starting point\n\n1. Add new column `Processes multiple files?` to the [`Supported languages and package managers`](https://docs.gitlab.com/ee/user/application_security/dependency_scanning/index.html#supported-languages-and-package-managers) section. This column should link to a new section in the docs, possibly named `How multiple files are processed`\n1. In this new section, add the following sub-sections:\n\n   - `Ruby`\n   - `Python`\n   - `Java`\n   - `PHP, NuGet, Go, \u003ceverything else\u003e`\n\n   Provide detailed information in each of the above sub-sections, explaining how files are processed. See [this commit](https://gitlab.com/gitlab-org/gitlab/-/commit/2cb443dd1a2facd86cba41eb3291171111860df4) for a starting point.\n\n### Documentation\n\nTo be documented in https://docs.gitlab.com/ee/user/application_security/dependency_scanning/index.html\n\n### Testing\n\nnone\n\n### What does success look like, and how can we measure that?\n\nUsers can easily predict how dependency files are scanned. More specifically, they're able to know if a dependency scanning job scans one or multiple files, and how to configure their CI pipeline to scans multiple requirements files.\n\n### What is the type of buyer?\n\nTODO\n\n### Links / references\n\n/cc @NicoleSchwartz @gonzoyumo @ifrenkel @plafoucriere","state":"closed","created_at":"2019-11-30T11:20:14.800Z","updated_at":"2022-10-17T22:12:19.142Z","closed_at":"2021-08-12T05:17:27.066Z","closed_by":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","GitLab Ultimate","backend","devops::secure","documentation","group::composition analysis","section::sec","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"}],"author":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"type":"ISSUE","assignee":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"user_notes_count":17,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37802","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37802","notes":"https://gitlab.com/api/v4/projects/278964/issues/37802/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37802/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37802","relative":"#37802","full":"gitlab-org/gitlab#37802"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3276,"epic":{"id":52489,"iid":3276,"title":"Technical work - backstage - Secure Composition Analysis","url":"/groups/gitlab-org/-/epics/3276","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":27777801,"iid":37800,"project_id":278964,"title":"The Notifications switch and Reference link are sometimes invisible, below the foot of the scroll bar-less sidebar","description":"### Summary\n\nAfter not using GitLab for a while, I could not find the option to notify.\n\n### Steps\n\n1. View e.g. https://gitlab.com/gitlab-org/gitlab/issues/20166 in Firefox or Waterfox Classic\n\n### Current *bug* behaviour\n\n2. the **Notifications** switch is invisible\n\n### Expected *correct* behaviour\n\nWherever content is too tall for a given area: \n\n* a vertical scroll bar. \n\n### Screenshot\n\n![image](/uploads/eab5976c8f4d0577b721a5527fc98303/image.png)\n\n### Workaround\n\n3. zoom out\n4. zoom out again\n5. discover the **Reference** feature below the **Notifications** switch.\n\n### Thoughts\n\nDoes this bug occur only where a relatively large number of labels apply?\n\nWhere there are many labels, it becomes necessary to zoom out three times or more. This is true for https://gitlab.com/gitlab-org/gitlab/issues/13638 where reduction to 80% is not enough, even with Firefox in full screen mode (HP EliteBook 8570p): \n\n![image](/uploads/80dc7779478e79c50b1138b31a370adc/image.png)\n\n– 67% brings things into view but then, texts are uncomfortably small and there are wastes of space (the white columns): \n\n![image](/uploads/9694d895515a9cffca98604bda93b0d5/image.png)\n\nAfter escaping from full screen, 67% is not enough: \n\n![image](/uploads/10ce697179dfc3f0cdadac46912c4ab1/image.png)\n\n– down to 50% brings the **References** link into view, but texts are barely legible (YMMV): \n\n![image](/uploads/eb0450604c8f0ff93a33d2ccd4f016a7/image.png)\n\nI vaguely recall finding this bug, or something like it, long ago. Maybe years. Can't find a matching bug today amongst open or closed issues, if this is a duplicate: apologies.\n\n### Environment\n\n\u003cpre\u003e\ngrahamperrin@momh167-gjp4-8570p:~ % date ; uname -v\nSat 30 Nov 2019 07:50:57 GMT\nFreeBSD 13.0-CURRENT #44 r355172: Thu Nov 28 22:33:25 GMT 2019     root@momh167-gjp4-8570p:/usr/obj/usr/src/amd64.amd64/sys/GENERIC-NODEBUG \ngrahamperrin@momh167-gjp4-8570p:~ % pkg query '%o %v %R' firefox waterfox \nwww/firefox 71.0,1 FreeBSD\nwww/waterfox 2019.10.c.1 unknown-repository\ngrahamperrin@momh167-gjp4-8570p:~ % \n\u003c/pre\u003e","state":"closed","created_at":"2019-11-30T08:16:10.710Z","updated_at":"2021-07-05T02:05:06.220Z","closed_at":"2021-07-05T02:05:06.205Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"🤖 GitLab Bot 🤖","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["UX","[deprecated] Accepting merge requests","auto closed","devops::plan","frontend","group::project management","priority::4","section::dev","severity::4","stale","type::bug","vintage"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":1438104,"username":"grahamperrin","name":"Graham Perrin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0c02caffb6b5bb7c900b09203e783b28?s=80\u0026d=identicon","web_url":"https://gitlab.com/grahamperrin"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37800","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37800","notes":"https://gitlab.com/api/v4/projects/278964/issues/37800/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37800/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37800","relative":"#37800","full":"gitlab-org/gitlab#37800"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27769612,"iid":37791,"project_id":278964,"title":"Merge license compliance and dependency controllers.","description":"Opened as a result of: https://gitlab.com/gitlab-org/gitlab/merge_requests/18934#note_252518386\n\n\nRight now we have two license compliance controllers located at:\n\nee/app/controllers/projects/security/licenses_controller.rb\n\nee/app/controllers/projects/licenses_controller.rb\n\nFor dependency list we also have two controllers located at:\nee/app/controllers/projects/dependencies_controller.rb\n\nee/app/controllers/projects/security/dependencies_controller.rb\n\n\nOne is used to render the rails view that bootstraps the vue app. The other is used to render the json endpoints for license compliance. \n\n## Proposed Implementation Plan\n\n### Merge License Compliance Controller\n\nDue to https://gitlab.com/gitlab-org/gitlab/merge_requests/18934 we would have two URL routes:\n\n`/\u003cPROJECT\u003e/-/licenses` \n\n`/\u003cPROJECT\u003e/-/security/licenses`\n\nSince the `security` namespace seems excessive, we should opt to merge the controllers and use the `respond_to` pattern which rails prescribes to differentiate between a HTML and JSON response type.\n\n\n```\n  respond_to do |format|\n    format.html { ... }\n    format.json { ... }\n  end\n```\n\n1.) Merge the two controllers using `respond_to` pattern\n\n2.) Update unit tests/manually test links (rails route helpers), and that the endpoints work.\n\n\n### Merge Dependency List Controllers\n\n1.) Merge the two controllers using `respond_to` pattern\n\n2.) Move the dependency controller route to the `/-/` scope to mirror the license compliance scope.\n\n3.) Update unit tests/manually test links (rails route helpers), and that the endpoints work.\n\n## Other notes:\n\nShould ideally be merged after https://gitlab.com/gitlab-org/gitlab/merge_requests/18934 to avoid the chance of merge conflicts.","state":"closed","created_at":"2019-11-29T20:06:30.846Z","updated_at":"2020-01-18T07:09:02.215Z","closed_at":"2020-01-06T17:03:47.406Z","closed_by":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"labels":["Category:License Compliance","Deliverable","Enterprise Edition","Secure UX::Compliance \u0026 Auditing","backend","backstage [DEPRECATED]","devops::secure","feature flag","group::composition analysis"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"}],"author":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"type":"ISSUE","assignee":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"user_notes_count":7,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37791","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37791","notes":"https://gitlab.com/api/v4/projects/278964/issues/37791/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37791/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37791","relative":"#37791","full":"gitlab-org/gitlab#37791"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27760542,"iid":37777,"project_id":278964,"title":"FDW models create confusion because some methods have to be duplicated","description":"It's often the case when we need two similar methods in FDW model and its counterpart.\n\nI think we can create mixins where we could refer to the class depending on which one includes it.","state":"closed","created_at":"2019-11-29T15:29:48.157Z","updated_at":"2021-03-23T09:46:52.534Z","closed_at":"2021-03-23T00:32:00.484Z","closed_by":{"id":480097,"username":"alexives","name":"Alex Ives","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480097/avatar.png","web_url":"https://gitlab.com/alexives"},"labels":["devops::systems","group::geo","maintenance::refactor","section::enablement"],"milestone":null,"assignees":[],"author":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":2,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37777","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37777","notes":"https://gitlab.com/api/v4/projects/278964/issues/37777/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37777/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37777","relative":"#37777","full":"gitlab-org/gitlab#37777"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27749280,"iid":37772,"project_id":278964,"title":"Add UI event tracking for package details installation instructions","description":"Add tracking to the new package installation tabs and commands. This should add tracking for:\n\n* Copying NPM / Yarn installation or setup instructions (either via copying from the input or pressing the copy button)\n* Copying Maven installation or setup instructions\n* Clicking between the `Installation` and `Setup` tabs","state":"closed","created_at":"2019-11-29T13:04:06.804Z","updated_at":"2020-01-10T09:47:59.001Z","closed_at":"2019-12-12T14:08:08.964Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["Category:Package Registry","devops::package","frontend","group::package registry"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":4087042,"username":"nkipling","name":"Nick Kipling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087042/avatar.png","web_url":"https://gitlab.com/nkipling"}],"author":{"id":4087042,"username":"nkipling","name":"Nick Kipling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087042/avatar.png","web_url":"https://gitlab.com/nkipling"},"type":"ISSUE","assignee":{"id":4087042,"username":"nkipling","name":"Nick Kipling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087042/avatar.png","web_url":"https://gitlab.com/nkipling"},"user_notes_count":0,"merge_requests_count":2,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37772","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37772","notes":"https://gitlab.com/api/v4/projects/278964/issues/37772/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37772/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37772","relative":"#37772","full":"gitlab-org/gitlab#37772"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2289,"epic":{"id":15774,"iid":2289,"title":"Delicious data (package)","url":"/groups/gitlab-org/-/epics/2289","group_id":9970,"human_readable_end_date":"Oct 31, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27723063,"iid":37748,"project_id":278964,"title":"Clean up optimized_groups_user_can_read_epics_method feature flag","description":"In https://gitlab.com/gitlab-org/gitlab/merge_requests/20833 a feature flag has been introduced within the `.groups_user_can_read_epics` method to optimize the underlying SQL query.\n\nSteps to eliminate the FF:\n\n1. Make sure the FF is enabled in PRD for a while.\n2. Remove the FF test and eliminate the double testing of `.groups_user_can_read_epics` method in `ee/spec/models/epic_spec.rb`\n3. Remove the FF in `ee/app/models/ee/epic.rb`","state":"closed","created_at":"2019-11-29T04:37:56.795Z","updated_at":"2020-01-10T09:47:48.489Z","closed_at":"2020-01-02T14:43:55.648Z","closed_by":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"labels":["feature flag","workflow::blocked"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"}],"author":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"type":"ISSUE","assignee":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"user_notes_count":0,"merge_requests_count":2,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37748","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37748","notes":"https://gitlab.com/api/v4/projects/278964/issues/37748/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37748/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37748","relative":"#37748","full":"gitlab-org/gitlab#37748"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27718515,"iid":37743,"project_id":278964,"title":"Refactor spec file use the same wrapper name","description":"To ensure consistency, we should use a consistent naming pattern as the rest of the tests in the file.\n\n![image](/uploads/227b6eb88b01a0bcfd7cd19212a5df49/image.png)\n\nWe should re-write this using `vm` and utiltize `beforeEach` like the rest of the tests.\n\nExample:\n\n![image](/uploads/976d1392a977b452da09410fc088ca40/image.png)\n\n\nBefore raising an issue to the GitLab issue tracker, please read through our guide for finding help to determine the best place to post:\n\n* https://about.gitlab.com/getting-help/\n\nIf you are experiencing an issue when using GitLab.com, your first port of call should be the GitLab.com Support Tracker. Your issue may have already been reported there by another user. Please check:\n\n* https://gitlab.com/gitlab-com/support-forum/issues\n\nIf you feel that your issue can be categorized as a reproducible bug or a feature proposal, please use one of the issue templates provided and include as much information as possible.\n\nThank you for helping to make GitLab a better product.","state":"closed","created_at":"2019-11-29T00:48:26.262Z","updated_at":"2020-05-08T23:22:53.162Z","closed_at":"2019-12-27T07:58:11.100Z","closed_by":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"labels":["frontend","frontend-weight::1","missed:12.6"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"user_notes_count":0,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37743","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37743","notes":"https://gitlab.com/api/v4/projects/278964/issues/37743/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37743/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37743","relative":"#37743","full":"gitlab-org/gitlab#37743"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27716936,"iid":37740,"project_id":278964,"title":"Diff shows MR has no changes when diffs_batch endpoint responds faster than the diffs_metadata","description":"I'm seeing an inconsistent behavior after enabling the FF `diffs_batch_load` locally. From time to time, when reloading the MR diffs page, here's what I see:\n\n![Screen_Shot_2019-11-28_at_19.43.33](/uploads/596a3fddf0d060b15c76b34867d61fb6/Screen_Shot_2019-11-28_at_19.43.33.png)\n\nIf I reload a few more times it simply presents the spinner, then show the files.\n\nThe `diffs_batch` JSON has the expected payload. I'm assuming it's a race-condition of some sort in the ~frontend? I believe it happens if the `/diffs_batch` endpoint responds faster than `/diffs_metadata`.\n\ncc @andr3 @jboyson","state":"closed","created_at":"2019-11-28T22:52:19.827Z","updated_at":"2020-12-07T16:47:49.042Z","closed_at":"2019-12-04T16:56:58.090Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["Category:Code Review Workflow","devops::create","diff","frontend","group::code review","merge requests","priority::2","regression","regression:12.5","severity::2","type::bug"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":11493,"username":"oswaldo","name":"Oswaldo Ferreira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11493/avatar.png","web_url":"https://gitlab.com/oswaldo"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":5,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37740","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37740","notes":"https://gitlab.com/api/v4/projects/278964/issues/37740/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37740/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37740","relative":"#37740","full":"gitlab-org/gitlab#37740"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27710850,"iid":37722,"project_id":278964,"title":"Allow air-gapped bundle-audit users reliable control of the internal advisory DB","description":"### Problem to solve\n\n12.6 added an airgapped [bundler-audit](https://gitlab.com/gitlab-org/security-products/analyzers/bundler-audit) analyzer (see [this issue](https://gitlab.com/gitlab-org/gitlab/issues/33718)). This update allowed customers to prevent bundle-audit from making network calls to update its [internal](https://github.com/rubysec/bundler-audit/blob/master/lib/bundler/audit/cli.rb#L39) advisory db when scanning ruby projects. The internal advisory db uses [ruby-advisory-db](https://github.com/rubysec/ruby-advisory-db/).\n\nThe airgapped bundler-audit update removed live updates from the scanner phase and instead initiated vulnerability db updates during the docker image build phase. This means that users running in airgapped mode will not get an updated DB until bundler-audit is rebuilt (e.g. when publishing a new version).\n\nThere needs be a way for customers to easily specify (and work with) an up-to-date version of bundler-audit's advisory db.\n\n### Intended users\n\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n\n### Further details\n\n\n### Proposal\n\n~~Regularly build a new docker image of `bundler-audit` tagged with the current build date (e.g. bundler-audit:2019-12-01) allowing customers a direct way to subscribe to a known bundler-audit vulnerability db version.~~\n\nAllow the user to specify a url to a fork of the `ruby-advisory-db`. In this way users will be able to keep the internal `bundler-audit` db at their desired state of liveness.\n\n### Implementation plan\n\n#### Backend\n\n1. [ ] add variables to control the repo url and git ref name\n2. [ ] clone the advisory db from the given repo url and ref\n\n#### Product Management - @NicoleSchwartz\n- Not part of release post, wait until epic complete\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?--\u003e\n\n### Documentation\n\n- [ ] Add an entry to explain this capability and point to the image list in https://docs.gitlab.com/ee/user/application_security/dependency_scanning/index.html\n\n### Testing\n\n- [ ] Create a `ruby-advisory-db` with fake advisories and a job pointing to this db - the expectation should match the advisories in this db.\n\n### What does success look like, and how can we measure that?\n\n- [ ] `bundler-audit` does not issue a network call when auto-update is turned off and the remote advisory url matches what is already in the image\n\n### What is the type of buyer? \n\n~\"GitLab Ultimate\" \n\n### Links / references","state":"closed","created_at":"2019-11-28T17:59:05.572Z","updated_at":"2020-02-24T21:17:33.172Z","closed_at":"2020-02-18T21:15:03.442Z","closed_by":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"labels":["Category:Dependency Scanning","Enterprise Edition","GitLab Ultimate","backend","custom fields","customer","devops::secure","group::composition analysis","planning priority","secure offline scanning","type::feature","workflow::verification"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"}],"author":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"type":"ISSUE","assignee":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"user_notes_count":15,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37722","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37722","notes":"https://gitlab.com/api/v4/projects/278964/issues/37722/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37722/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37722","relative":"#37722","full":"gitlab-org/gitlab#37722"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2011,"epic":{"id":13396,"iid":2011,"title":"Support air-gapped (offline) Dependency Scanning for on-prem instances","url":"/groups/gitlab-org/-/epics/2011","group_id":9970,"human_readable_end_date":"May 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":27710647,"iid":37719,"project_id":278964,"title":"Add dependency version to License Scanning","description":"### Problem to solve\n\n\u003e As a developer, I would like to see the version # of a dependency in the license scan report, so that it's easier for me to understand why a dependency appears multiple times in a report.\n\nIn the version `2.0` license scan report we do not include a version # for a dependency. This causes confusion when scanning javascript projects. In a js project multiple versions of the same dependency can be identified. Without the version # it's hard to understand why a dependency is listed multiple times.\n\n### Intended users\n\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n\n### Further details\n\n#### v2.0 schema\n\n```json\n{\n  \"version\": \"2.0\",\n  \"licenses\": [\n    {\n      \"id\": \"ISC\",\n      \"name\": \"ISC License\",\n      \"url\": \"https://opensource.org/licenses/ISC\",\n      \"count\": 2\n    },\n  ],\n  \"dependencies\": [\n    {\n      \"name\": \"semver\",\n      \"url\": \"Unknown\",\n      \"description\": \"\",\n      \"paths\": [ \".\" ],\n      \"licenses\": [ \"ISC\" ]\n    },\n    {\n      \"name\": \"semver\",\n      \"url\": \"Unknown\",\n      \"description\": \"\",\n      \"paths\": [ \".\" ],\n      \"licenses\": [ \"ISC\" ]\n    }\n  ]\n}\n```\n\n\n### Proposal\n\n#### Proposed v2.1 schema\n\n\n```json\n{\n  \"version\": \"2.1\",\n  \"licenses\": [\n    {\n      \"id\": \"ISC\",\n      \"name\": \"ISC License\",\n      \"url\": \"https://opensource.org/licenses/ISC\"\n    },\n  ],\n  \"dependencies\": [\n    {\n      \"name\": \"semver\",\n      \"version\": \"5.3.0\",\n      \"package_manager\": \"yarn\",\n      \"path\": \"yarn.lock\",\n      \"licenses\": [\"ISC\"]\n    },\n    {\n      \"name\": \"semver\",\n      \"version\": \"5.7.1\",\n      \"package_manager\": \"yarn\",\n      \"path\": \"yarn.lock\",\n      \"licenses\": [ \"ISC\" ]\n    }\n  ]\n}\n```\n\n### Permissions and Security\n\nNo new permissions or security changes required.\n\n### Documentation\n\nWe don't document the report schema today, but we could consider starting with this one.\n\n### Testing\n\nThe QA Test jobs will need to be updated to reflect this change.\n\n### What does success look like, and how can we measure that?\n\nThe addition of the version attribute to the raw scan report.\n\n### What is the type of buyer? \n\nAny tier that currently has access to license scan reports.\n\n### Links / references\n\nRelated to https://gitlab.com/gitlab-org/security-products/license-management/merge_requests/84#note_251761590\n\n### Implementation Plan\n\n#### Backend\n\n* [x] Add the `version` attribute to each dependency in the license scan report.\n* [x] Increment the report version from `2.x` to `2.y`","state":"closed","created_at":"2019-11-28T17:53:34.407Z","updated_at":"2020-10-19T15:47:01.478Z","closed_at":"2020-10-19T15:47:01.440Z","closed_by":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"labels":["Category:License Compliance","Enterprise Edition","GitLab Ultimate","backend","devops::secure","frontend","group::composition analysis","section::sec","type::feature","workflow::in review"],"milestone":{"id":1233754,"iid":52,"group_id":9970,"title":"13.5","description":"https://about.gitlab.com/releases/2020/10/22/gitlab-13-5-released/","state":"closed","created_at":"2020-04-09T17:39:21.990Z","updated_at":"2022-04-21T07:21:12.213Z","due_date":"2020-10-17","start_date":"2020-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/52"},"assignees":[{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"}],"author":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"type":"ISSUE","assignee":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37719","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37719","notes":"https://gitlab.com/api/v4/projects/278964/issues/37719/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37719/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37719","relative":"#37719","full":"gitlab-org/gitlab#37719"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1662,"epic":{"id":10152,"iid":1662,"title":"License Compliance (License Scanning) - Minimal to Viable (again)","url":"/groups/gitlab-org/-/epics/1662","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":27705352,"iid":37694,"project_id":278964,"title":"PullRequestImporter should not use deprecated assignee_id column","description":"It has been discovered during https://gitlab.com/gitlab-org/gitlab-foss/merge_requests/31284#note_199213061:\n\n[Gitlab::GithubImport::Importer::PullRequestImporter](https://gitlab.com/gitlab-org/gitlab/blob/master/lib%2Fgitlab%2Fgithub_import%2Fimporter%2Fpull_request_importer.rb#L65) is using [create_merge_request_without_hooks](https://gitlab.com/gitlab-org/gitlab/blob/master/lib%2Fgitlab%2Fimport%2Fmerge_request_helpers.rb#L23) method which bulk inserts in the database and bypasses the hooks which create merge request assignees instead of setting `assignee_id`\n\nI've tried the following query on production:\n\n```sql\nSELECT merge_requests.* FROM merge_requests\n    WHERE (NOT EXISTS (SELECT 1 FROM merge_request_assignees WHERE merge_request_assignees.merge_request_id = merge_requests.id))\n    AND assignee_id IS NOT NULL AND id \u003c 50000000 AND id \u003e 40000000\n```\n\nand received `13913` results. I believe it shouldn't return any results\n\nWe need to get rid of any direct writing to assignee_id column (in PullRequestImporter or any other place). The records in the `merge_request_assignees` database should be created instead according to https://gitlab.com/gitlab-org/gitlab/issues/2004\n\nAfter all these usages are eliminated, we can migrate existing data for merge requests with `assignee_id` but without merge requests assignees and ignore/remove `MergeRequest#assignee_id` column: https://gitlab.com/gitlab-org/gitlab/issues/30535","state":"closed","created_at":"2019-11-28T16:36:09.704Z","updated_at":"2020-01-18T07:06:12.643Z","closed_at":"2020-01-15T19:19:14.172Z","closed_by":{"id":4554599,"username":"m_gill","name":"Michelle Gill","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4554599/avatar.png","web_url":"https://gitlab.com/m_gill"},"labels":["Deliverable","backend","backstage [DEPRECATED]","devops::create","group::source code","workflow::verification"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"}],"author":{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"},"type":"ISSUE","assignee":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37694","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37694","notes":"https://gitlab.com/api/v4/projects/278964/issues/37694/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37694/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37694","relative":"#37694","full":"gitlab-org/gitlab#37694"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27700259,"iid":37655,"project_id":278964,"title":"Duplicates in CI needs causes 500 response","description":"### Summary\n\nHit 'Create new pipeline' and see a 500 error.\n\n### Steps to reproduce\n\nYou need a `.gitlab-ci.yaml` with somethings like\n\n```yaml\njob_1:\n   stage: test\n   script: do something\njob_2:\n  stage: build\n  script: do something else\n  needs: ['job_1', 'job_1']\n```\n\n### Example Project\n\nhttps://gitlab.com/mcfedr/ci-needs-bug/pipelines\n\n### What is the current *bug* behavior?\n\n500 error.\n\n### What is the expected *correct* behavior?\n\nCI Lint error\n\nText for the error:\n\n`\u003cjob1\u003e has duplicate entries in the needs section.`\n\n### Relevant logs and/or screenshots\n\n```json\n{\n\t\"method\": \"POST\",\n\t\"path\": \"/my_project_app/my_project_app/pipelines\",\n\t\"format\": \"html\",\n\t\"controller\": \"Projects::PipelinesController\",\n\t\"action\": \"create\",\n\t\"status\": 500,\n\t\"duration\": 333.56,\n\t\"view\": 0.0,\n\t\"db\": 74.82,\n\t\"time\": \"2019-11-28T14:38:17.931Z\",\n\t\"params\": [{\n\t\t\"key\": \"utf8\",\n\t\t\"value\": \"✓\"\n\t}, {\n\t\t\"key\": \"authenticity_token\",\n\t\t\"value\": \"[FILTERED]\"\n\t}, {\n\t\t\"key\": \"pipeline\",\n\t\t\"value\": {\n\t\t\t\"ref\": \"dev\"\n\t\t}\n\t}, {\n\t\t\"key\": \"namespace_id\",\n\t\t\"value\": \"my_project_app\"\n\t}, {\n\t\t\"key\": \"project_id\",\n\t\t\"value\": \"my_project_app\"\n\t}],\n\t\"remote_ip\": \"78.137.6.142\",\n\t\"user_id\": 2,\n\t\"username\": \"mcfedr\",\n\t\"ua\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:70.0) Gecko/20100101 Firefox/70.0\",\n\t\"queue_duration\": null,\n\t\"rugged_calls\": 3,\n\t\"rugged_duration_ms\": 32.36,\n\t\"correlation_id\": \"aSjNGDOR3Ha\",\n\t\"cpu_s\": 0.19548780199997395,\n\t\"exception\": {\n\t\t\"class\": \"ActiveRecord::RecordNotUnique\",\n\t\t\"message\": \"PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint \\\"index_ci_build_needs_on_build_id_and_name\\\"\\nDETAIL:  Key (build_id, name)=(299299, test) already exists.\\n: INSERT INTO \\\"ci_build_needs\\\" (\\\"build_id\\\", \\\"name\\\") VALUES (299299, 'test') RETURNING \\\"id\\\"\",\n\t\t\"backtrace\": [\"lib/gitlab/ci/pipeline/chain/create.rb:11:in `perform!'\", \"lib/gitlab/ci/pipeline/chain/sequence.rb:19:in `block in build!'\", \"lib/gitlab/ci/pipeline/chain/sequence.rb:16:in `each'\", \"lib/gitlab/ci/pipeline/chain/sequence.rb:16:in `build!'\", \"app/services/ci/create_pipeline_service.rb:53:in `execute'\", \"app/controllers/projects/pipelines_controller.rb:62:in `create'\", \"lib/gitlab/session.rb:11:in `with_session'\", \"app/controllers/application_controller.rb:450:in `set_session_storage'\", \"app/controllers/application_controller.rb:444:in `set_locale'\"]\n\t}\n}\n```\n\n### Possible fixes\n\n(If you can, link to the line of code that might be responsible for the problem)","state":"closed","created_at":"2019-11-28T14:58:20.779Z","updated_at":"2022-01-11T15:29:58.351Z","closed_at":"2021-12-27T12:17:06.914Z","closed_by":{"id":722076,"username":"matteeyah","name":"Matija Čupić","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8bc04cc15e0adba406cf56fecd9d910a?s=80\u0026d=identicon","web_url":"https://gitlab.com/matteeyah"},"labels":["Category:Pipeline Authoring","DEPRECATE_pipeline dag","FY22::Q4","OKR","Technical Writing","UI text","UX","backend","devops::verify","group::pipeline authoring","missed-SLO","missed:14.6","priority::2","section::ops","severity::2","type::bug","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":722076,"username":"matteeyah","name":"Matija Čupić","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8bc04cc15e0adba406cf56fecd9d910a?s=80\u0026d=identicon","web_url":"https://gitlab.com/matteeyah"}],"author":{"id":151384,"username":"mcfedr","name":"Fred Cox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2c9bfe8735f5e3fb923a0f67330e7f39?s=80\u0026d=identicon","web_url":"https://gitlab.com/mcfedr"},"type":"ISSUE","assignee":{"id":722076,"username":"matteeyah","name":"Matija Čupić","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8bc04cc15e0adba406cf56fecd9d910a?s=80\u0026d=identicon","web_url":"https://gitlab.com/matteeyah"},"user_notes_count":20,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37655","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37655","notes":"https://gitlab.com/api/v4/projects/278964/issues/37655/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37655/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37655","relative":"#37655","full":"gitlab-org/gitlab#37655"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5138,"epic":{"id":176062,"iid":5138,"title":"Bugs: `:needs`","url":"/groups/gitlab-org/-/epics/5138","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":{"id":36610,"iid":39,"sequence":6,"group_id":9970,"title":"Pipeline Authoring: December 27, 2021 - January 09, 2022","description":"Target milestone `14.7`","state":3,"created_at":"2021-10-05T20:42:58.387Z","updated_at":"2022-01-10T00:05:02.153Z","start_date":"2021-12-27","due_date":"2022-01-09","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/36610"},"health_status":null},{"id":28896597,"iid":119014,"project_id":278964,"title":"Ask if a user is trying GitLab for his company or for his individual usage.","description":"In order to personalize the trial process we need to define user type beforehand, is the trial for a team or an individual?\n\nPotentially use the second step of the current registration process to gain the information. We would tweak this copy to be trial specific \"Is this GitLab trial for your company?\".\n\n\"Is this GitLab trial for your company?\"\n\n![image](/uploads/397c1f75225b0c18ba4eb36f6bb71edc/image.png)\n \n## Solution\n \nOn the second step of trial creation (https://gitlab.com/-/trials/select) we will add the following question utilizing the same format above with yes/no options \"Is this GitLab trial for your company?\". The question will come after the \"This subscription is for\" question and before the \"start your free trial button\" as seen in the screenshot below. \n \n![Screen_Shot_2019-12-18_at_3.52.14_PM](/uploads/405bdae642be2a3289ac448fc9d7bb1f/Screen_Shot_2019-12-18_at_3.52.14_PM.png)\n \n\n","state":"closed","created_at":"2019-11-28T14:54:10.868Z","updated_at":"2020-04-09T22:21:17.562Z","closed_at":"2020-02-04T16:29:07.134Z","closed_by":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"labels":["Deliverable","UX","UX scorecard-rec","devops::growth","group::acquisition","trials","workflow::verification"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},{"id":4413992,"username":"s_awezec","name":"Sam Awezec","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4413992/avatar.png","web_url":"https://gitlab.com/s_awezec"}],"author":{"id":4412383,"username":"kcomoli","name":"Kevin Comoli","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4412383/avatar.png","web_url":"https://gitlab.com/kcomoli"},"type":"ISSUE","assignee":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/119014","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/119014","notes":"https://gitlab.com/api/v4/projects/278964/issues/119014/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/119014/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#119014","relative":"#119014","full":"gitlab-org/gitlab#119014"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27698997,"iid":37611,"project_id":278964,"title":"Delete corrupted Docker manifests during garbage collection","description":"### Problem to solve\nThe GitLab Container Registry allows users to build, publish and share Docker images alongside their source code and pipelines. In order to delete images from storage, users must first untag images, using the [Container Registry API](https://docs.gitlab.com/ee/api/container_registry.html#delete-repository-tags-in-bulk) or the user interface. Once that is done, they can run [garbage collection](https://docs.gitlab.com/omnibus/maintenance/#container-registry-garbage-collection) which will remove all unreferenced images. \n\nHowever, a common problem we face is a Docker manifest will be corrupted and result in a file of 0 bytes. When the garbage collector encounters these corrupted files, it fails with the error: \n\n\u003e  failed to garbage collect: failed to mark: filesystem: filesystem: invalid checksum digest format\n\nThis typically results in the user creating an issue and reaching out to GitLab support. We have created a [runbook](https://gitlab.com/gitlab-com/runbooks/blob/master/troubleshooting/gitlab-registry.md#broken-images-emptynulljust-now-invalid-checksum-digest-format-unknown-error) to help users remediate the issue, but have not solved the core problem of the garbage collector failing, when it could just ignore or prune the corrupted manifests.\n\n### Intended users\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n\n### Further details\n\n#### Ignore vs. delete\n- Ignoring the corrupted files could also work, but it doesn't solve the issue, and the files would have to be deleted anyway if the user tried to transfer or delete the project. \n\n### Proposal\n- Update the Container Registry garbage collector give Administrators an option to to prune 0-byte files as part of the garbage collection process. These files are corrupted and should be deleted. \n\n### Permissions and Security\n- No permissions changes are required. Only administrators can run garbage collection.\n\n### Documentation\n- https://docs.gitlab.com/omnibus/maintenance/README.html#container-registry-garbage-collection\n\n### Testing\n\n### What does success look like, and how can we measure that?\n- Success looks like users can run garbage collection without encountering this common errror.\n","state":"closed","created_at":"2019-11-28T14:35:21.467Z","updated_at":"2021-03-28T19:58:39.990Z","closed_at":"2020-02-18T09:47:45.866Z","closed_by":{"id":5054840,"username":"jdrpereira","name":"João Pereira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054840/avatar.png","web_url":"https://gitlab.com/jdrpereira"},"labels":["Category:Container Registry","backend","devops::package","direction","golang","group::package registry","package:active","type::feature","workflow::production"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":5054840,"username":"jdrpereira","name":"João Pereira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054840/avatar.png","web_url":"https://gitlab.com/jdrpereira"}],"author":{"id":4019280,"username":"msschl","name":"Markus Schlotbohm","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4019280/avatar.png","web_url":"https://gitlab.com/msschl"},"type":"ISSUE","assignee":{"id":5054840,"username":"jdrpereira","name":"João Pereira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054840/avatar.png","web_url":"https://gitlab.com/jdrpereira"},"user_notes_count":32,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/37611","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/37611","notes":"https://gitlab.com/api/v4/projects/278964/issues/37611/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/37611/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#37611","relative":"#37611","full":"gitlab-org/gitlab#37611"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null}]