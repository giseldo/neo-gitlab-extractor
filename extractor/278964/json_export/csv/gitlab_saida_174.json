[{"id":23144476,"iid":13053,"project_id":278964,"title":"Exposing design repository from primary to secondary","description":"### Problem to solve\n\n\u003c!-- What problem do we solve? --\u003e\n\nGeo nodes need direct access to design repositories and we need to implement code to sync these repositories similar to wikis and projects.\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\nAdd all needed changes to access checks and create special routes to align with other repositories.\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements --\u003e\n\nWe should add documentation similar to Wikis and Projects once we sync repositories.\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further guidelines: https://about.gitlab.com/handbook/engineering/quality/guidelines/test-engineering/ --\u003e\n\n\n### Links / references","state":"closed","created_at":"2019-07-25T07:56:55.558Z","updated_at":"2019-12-16T14:47:08.525Z","closed_at":"2019-09-26T13:44:54.514Z","closed_by":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"labels":["Category:Geo Replication","Enterprise Edition","auto updated","devops::systems","group::geo","type::feature"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"}],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":8,"merge_requests_count":1,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13053","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13053","notes":"https://gitlab.com/api/v4/projects/278964/issues/13053/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13053/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13053","relative":"#13053","full":"gitlab-org/gitlab#13053"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1633,"epic":{"id":10057,"iid":1633,"title":"Geo supports design repository replication","url":"/groups/gitlab-org/-/epics/1633","group_id":9970,"human_readable_end_date":"Feb 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":23144399,"iid":13052,"project_id":278964,"title":"Create design_registry table to track design repositories","description":"### Problem to solve\n\nIn order to replicate design repositories, we need to store design repository data in a separate table to avoid race conditions and to make the code easier to understand.\n\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\n* [ ] Create `design_registry` as a separate table\n \n* [ ] Extract project/wiki registry code where ever it makes immediate sense or accepts some duplication of code in the first iteration.\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements --\u003e\n\nI don't believe new documentation is required for this.\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further guidelines: https://about.gitlab.com/handbook/engineering/quality/guidelines/test-engineering/ --\u003e\n\nTBD\n\n### Links / references","state":"closed","created_at":"2019-07-25T07:54:01.208Z","updated_at":"2019-12-16T14:47:09.438Z","closed_at":"2019-10-02T20:16:50.393Z","closed_by":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"labels":["Category:Geo Replication","Enterprise Edition","auto updated","devops::systems","group::geo","type::feature"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"}],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":3,"merge_requests_count":2,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13052","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13052","notes":"https://gitlab.com/api/v4/projects/278964/issues/13052/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13052/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13052","relative":"#13052","full":"gitlab-org/gitlab#13052"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1633,"epic":{"id":10057,"iid":1633,"title":"Geo supports design repository replication","url":"/groups/gitlab-org/-/epics/1633","group_id":9970,"human_readable_end_date":"Feb 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":23134721,"iid":13042,"project_id":278964,"title":"Implement process to update knapsack files for QA pipelines","description":"The following discussion from !14755 should be addressed:\n\n- [ ] @rymai started a [discussion](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14755#note_195189906):  (+1 comment)\n\n    \u003e What's the plan around updating these files? Something like a bi-weekly manual update maybe?\n\nOne option is to use the {[retrieve](https://gitlab.com/gitlab-org/gitlab-ce/blob/master/.gitlab/ci/test-metadata.gitlab-ci.yml#L14)|[update](https://gitlab.com/gitlab-org/gitlab-ce/blob/master/.gitlab/ci/test-metadata.gitlab-ci.yml#L31)}-tests-metadata jobs to automate it.\n\nA better option might be to use artifacts, as proposed here: https://gitlab.com/gitlab-org/omnibus-gitlab/issues/4519","state":"closed","created_at":"2019-07-25T00:00:27.327Z","updated_at":"2022-08-12T22:22:22.838Z","closed_at":"2022-01-10T15:39:23.170Z","closed_by":{"id":8551613,"username":"acunskis","name":"Andrejs Cunskis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8551613/avatar.png","web_url":"https://gitlab.com/acunskis"},"labels":["Enterprise Edition","QA","Quality","Quality::test-infrastructure","[deprecated] Accepting merge requests","backstage [DEPRECATED]","missed:12.2","missed:12.3","missed:12.4","missed:12.5","missed:12.6","missed:12.7","missed:12.8","missed:12.9","type::maintenance"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":8551613,"username":"acunskis","name":"Andrejs Cunskis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8551613/avatar.png","web_url":"https://gitlab.com/acunskis"}],"author":{"id":655908,"username":"mlapierre","name":"Mark Lapierre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/655908/avatar.png","web_url":"https://gitlab.com/mlapierre"},"type":"ISSUE","assignee":{"id":8551613,"username":"acunskis","name":"Andrejs Cunskis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8551613/avatar.png","web_url":"https://gitlab.com/acunskis"},"user_notes_count":16,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13042","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13042","notes":"https://gitlab.com/api/v4/projects/278964/issues/13042/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13042/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13042","relative":"#13042","full":"gitlab-org/gitlab#13042"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1460,"epic":{"id":8332,"iid":1460,"title":"Quality: Efficiency track","url":"/groups/gitlab-org/-/epics/1460","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":23436055,"iid":13233,"project_id":278964,"title":"ðŸŽ¢ An improved free trial sign-up experience for GitLab.com (SaaS) users","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n# Problem\n\nThe GitLab.com trial sign up experience is currently [37 actions](https://gitlab.com/gitlab-org/gitlab-ce/issues/59241) and it takes between [five](https://www.youtube.com/watch?v=O-zjek64d0g\u0026feature=youtu.be) and [eight](https://drive.google.com/file/d/1a0cfGBmKh6LqDKNtXTbNXxw9vhGEc3kU/view?usp=sharing) minutes to complete.\n\nMuch of the reason behind this is because users need to interact with the customer portal in order to complete the trial sign up. Users should not have to encounter the portal to begin a free trial on GitLab.com.\n\n# Proposal\n\nWe should move all GitLab.com (SaaS) free trial functionality from the portal to GitLab.com.\n \nThere are two categories of **Entry Points**: The marketing site and via GitLab.com\n\nWithin the two categories, the user has several opportunities to start a trial. The starting points of this proposal go through the user flows on **about.GitLab.com** landing page and **Group Settings** page within GitLab.com.\n\n![3381a33b-0046-4d27-8150-bde7ce97a8fb](/uploads/013b95f013cad67791a6199ff6ed4776/3381a33b-0046-4d27-8150-bde7ce97a8fb.png)\n**[Mural link](https://app.mural.co/t/gitlab2474/m/gitlab2474/1562801883705/80de3f0460ee4c2efeb3aa24e0717d2b93787e74)**\n\nThis new approach reduces the steps (steps as defined as user actions) needed to start a trial to:\n\n* **22** for a New User Registration using the signup form\n* **10** for an existing user from within GitLab.com\n\nThis is a significant reduction in user-initiated steps and almost halves the original 37 steps required previously.\n\n# Designs\n\n![Flows](/uploads/024d96e8d20f465d266a39771a658505/Flows.png)\n\nThis is a high-level view of the process and covers that of the two main entry point categories.\n\n**[This Prototype](https://sketch.cloud/s/v1zJb/a/mgkLnw/play)** will take you on a deep dive into all of the steps involved in starting a new trial. It should also give you access to the individual artboards for further reference.\n\n### Key Takeaways\n\n| Current | Proposal |\n| ------ | ------ |\n| ![Screenshot_2019-07-23_at_08.12.38](/uploads/fcd2086439a5c14d154203ebc8f3337e/Screenshot_2019-07-23_at_08.12.38.png) | ![03-register](/uploads/a16e0ef4df5b5d948610a7cce3833901/03-register.png) |\n\n* I removed the GitLab.com signup copy to help users focus in on their Trial Journey.\n* I have also introduced a new Signup Header Bar in our default colours (originally white) - This is to help tie the user into the feel of GitLab.com as early as possible. This Header colour scheme is a user option and it would great if for an existing user starting a trial, we use the colour of the Header Bar in the user's preference.\n* Full Name Input has been split into **First Name** and **Last Name** for greater consistency. There probably needs to be a longer discussion around developing inclusive naming patterns. Currently, the lead generation page for a new trial (on the customer portal) asks users for **First Name** and **Last Name**.\n* Email confirmation input field has also been removed as it would be beneficial for us to adopt a soft email confirmation flow during the New Registration or a Trial applicant. This would stop users navigating away from the process and keep them focused on complete=ing the steps. Work on a proposal for this has already been completed https://gitlab.com/gitlab-org/gitlab-ce/issues/47003. \n\n#### Removal of Social Sign-in from the Trial Process\n\n\u003cimg width=\"300\" src=\"/uploads/0ba92c3188623de7d75f8867b3f94913/sso.png\" /\u003e\n\nBased on [ongoing conversations](https://gitlab.com/gitlab-org/gitlab-ce/issues/63500#note_191382479), we have opted to remove the ability for Social Sign-in, specifically for users during the trial process. The main reason for this is because if a user signs up with Twitter we do not currently pull their Email Address from their account and instead force users to complete their profiles via the Edit Profile page. For a Trial sign up this creates a broken and frustrating flow. I have created another issue https://gitlab.com/gitlab-org/gitlab-ce/issues/65023 to explore what happens with all of our third-party Social Sign-in options.\n\n#### Free trial signup page\n\n| Current | Proposal |\n|---------|----------|\n| ![Screenshot_2019-07-12_at_11.30.34](https://gitlab.com/gitlab-org/gitlab-ce/uploads/ae040b6e379eb1685a6068a8859cd717/Screenshot_2019-07-12_at_11.30.34.png) | ![02-free-trial-refined](https://gitlab.com/gitlab-org/gitlab-ce/uploads/46ce149ff71818cf45e423ddafd5cad4/02-free-trial-refined.png) |\n\nI originally proposed that we update the Trial Sign up page. [Free trial signup flow improvements: Trial Page](https://gitlab.com/gitlab-org/gitlab-ce/issues/60956) has ongoing discussions around how we could optimise this page and it would be great to include this in the scope of work.\n\n### Design Specs \u0026 Assets\n\n* [**Marketing Trial Page Icons**](https://gitlab.com/gitlab-org/gitlab-design/tree/master/progress/tim/fulfillment/svg)\n* [**Marketing Trial Page**](https://gitlab-org.gitlab.io/gitlab-design/hosted/tim/ee%2313233-an-improved-free-trial-sign-up-experience-for-GitLab.com-spec-previews/)\n* [**Full Trial Pages**](https://gitlab-org.gitlab.io/gitlab-design/hosted/tim/ee%2313233-an-improved-free-trial-sign-up-experience-for-GitLab.com-trial-pages-spec-previews/)\n\n### Result\n\n* 95% of friction for users signing up for a GitLab.com free trial is removed\n* Minimise missed opportunities from trial sign up dropouts\n* A significantly improved experience as a first touch point for our users with GitLab\n\n### Rollout Strategy\n\n1. Ensure envs variable for Subscription Portal API credentials has been added (ref. https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7823)\n2. Enable the feature flag: `improved_trial_signup`\n3. Update â€˜Free Trialâ€™ link for SaaS in Pricing page (https://about.gitlab.com/pricing/) to point to new trial registration url\n\n(3) and (2) can be performed interchangeably, as new trial url will fallback to existing customers portal trial sign up if flag is turned off.\n\n\ncc @timnoah @jjcordz @tbarr @jackib","state":"closed","created_at":"2019-07-24T22:26:45.950Z","updated_at":"2021-08-04T17:03:46.495Z","closed_at":"2019-10-29T03:35:00.112Z","closed_by":{"id":4014344,"username":"aishbuilds","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4014344/avatar.png","web_url":"https://gitlab.com/aishbuilds"},"labels":["Deliverable","Enterprise Edition","UX scorecard-rec","backend","devops::fulfillment","direction","frontend","gitlab.com","group::purchase","priority::1","section::fulfillment","trials","workflow::production"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":127064,"username":"aalakkad","name":"Ammar Alakkad","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ecc1130ce340f5080afd8f2c9962948a?s=80\u0026d=identicon","web_url":"https://gitlab.com/aalakkad"},{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"},{"id":3354144,"username":"timnoah","name":"Tim Noah","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3354144/avatar.png","web_url":"https://gitlab.com/timnoah"}],"author":{"id":1903246,"username":"tipyn","name":"Luca Kisielius","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1903246/avatar.png","web_url":"https://gitlab.com/tipyn"},"type":"ISSUE","assignee":{"id":127064,"username":"aalakkad","name":"Ammar Alakkad","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ecc1130ce340f5080afd8f2c9962948a?s=80\u0026d=identicon","web_url":"https://gitlab.com/aalakkad"},"user_notes_count":151,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13233","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":13,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13233","notes":"https://gitlab.com/api/v4/projects/278964/issues/13233/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13233/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13233","relative":"#13233","full":"gitlab-org/gitlab#13233"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":377,"epic":{"id":1124,"iid":377,"title":"ðŸ¤” Improved GitLab.com trial experience (parent epic)","url":"/groups/gitlab-org/-/epics/377","group_id":9970,"human_readable_end_date":"Nov 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24700390,"iid":30412,"project_id":278964,"title":"XSS in file APIs give access to user X-CSRF-Token","description":"**[HackerOne report #651335](https://hackerone.com/reports/651335)** by `rpadovani` on 2019-07-19, assigned to `akelly`:\n\n### Summary\n\nAttacker can craft SVG files, reachable in a GET endpoint, that retrieves user X-CSRF-Token\n\n### Steps to reproduce\n\nAttacker creates a project, and a SVG file like this (standard XSS injection):\n\n```  \n\u003c?xml version=\"1.0\" standalone=\"no\"?\u003e  \n\u003c!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"\u003e\n\n\u003csvg version=\"1.1\" baseProfile=\"full\" xmlns=\"http://www.w3.org/2000/svg\"\u003e  \n  \u003cpolygon id=\"triangle\" points=\"0,0 0,50 50,0\" fill=\"#009900\" stroke=\"#004400\"/\u003e  \n  \u003cscript type=\"text/javascript\"\u003e  \n     alert(\"surprise\");  \n  \u003c/script\u003e  \n\u003c/svg\u003e  \n```\n\nThis SVG doesn't do anything if accessed through the repository view (such as https://gitlab.com/rpadovani/test-gitlab-pages/raw/master/test.svg), but it triggers the alert if accessed through the raw APIs, such as https://gitlab.com/api/v4/projects/13337155/repository/files/test.svg/raw?ref=master (I can give access to the project, if needed).\n\nThis XSS doesn't give access to the user account, since the session cookie is `httpOnly`.\n\nHowever, we can do `fetch` calls from this page to the APIs, and they will have success, meaning we have almost complete control over the account.  \nWe can verify this trying fetching some more information about the user:\n\n```  \n\u003c?xml version=\"1.0\" standalone=\"no\"?\u003e  \n\u003c!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"\u003e\n\n\u003csvg version=\"1.1\" baseProfile=\"full\" xmlns=\"http://www.w3.org/2000/svg\"\u003e  \n  \u003cpolygon id=\"triangle\" points=\"0,0 0,50 50,0\" fill=\"#009900\" stroke=\"#004400\"/\u003e  \n  \u003cscript type=\"text/javascript\"\u003e  \n    fetch(\"/api/v4/user\")  \n        .then(res =\u003e res.json())  \n        .then(j =\u003e alert(j[\"email\"]))  \n  \u003c/script\u003e  \n\u003c/svg\u003e  \n```\n\nThis file is called `fetch.svg`, and again accessing it from the API link, such as https://gitlab.com/api/v4/projects/13337155/repository/files/fetch.svg/raw?ref=master, triggers the script, returning information about user profile: this shows APIs call work.\n\nI wasn't able to include the image directly in over a public place in gitlab.com, I think due CSP, but opening the image on the target browser would be quite simple, both leaving links to it, or doing a redirect from a website you control.\n\n### Impact\n\nBeing able to do any operation permitted by APIs on behalf of the user\n\n### Examples\n\nI was able to reproduce both on Chrome and Firefox, I attach a video on Chrome, simulating a valid issue over a private project on Gitlab.com.\n\nThe project is private (of course) and is available at https://gitlab.com/rpadovani/test-gitlab-pages\n\nI can give access to whoever needs it.\n\n\n\n### What is the current *bug* behavior?\n\nThis is a stored XSS which allows a complete account takeover\n\n### What is the expected *correct* behavior?\n\nNo XSS\n\n### Relevant logs and/or screenshots\n\nSee attached\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n## Impact\n\nAny operation permitted through internal and public Gitlab APIs on behalf of victims\n\n## Attachments\n**Warning:** Attachments received through HackerOne, please exercise caution!\n* [xss-2019-07-20_01.14.29.mp4](https://h1.sec.gitlab.net/a/5252aadf-c318-40a0-b85e-6924ba1229cb/xss-2019-07-20_01.14.29.mp4)","state":"closed","created_at":"2019-07-24T20:33:16.738Z","updated_at":"2021-07-29T10:29:41.203Z","closed_at":"2020-01-30T21:51:14.933Z","closed_by":{"id":4226366,"username":"ankelly","name":"Andrew Kelly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4226366/avatar.png","web_url":"https://gitlab.com/ankelly"},"labels":["HackerOne","backend","devops::create","group::source code","priority::2","repository","security","severity::2","workflow::verification"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"user_notes_count":63,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-09-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30412","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30412","notes":"https://gitlab.com/api/v4/projects/278964/issues/30412/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30412/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30412","relative":"#30412","full":"gitlab-org/gitlab#30412"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":23131491,"iid":13039,"project_id":278964,"title":"Embed Grafana metrics in issue MVC","description":"### Problem to Solve\nOur enterprise customers who are using GitLab monitoring (Prometheus) are making heavy use of Grafana visualizations. When there are incidents, we have found that incident responders are having to copy \u0026 paste screenshots of charts from Grafana in issues so that they can share knowledge and information with teammates as well as keep the issue up-to-date so that they can communicate the status of the incident to stakeholders.\n\nWe want to give them the ability to embed Grafana metrics in issues using a link. We want there to be two types of embeds:\n1. Static (i.e. set to a time frame) - this shows what was going on when the incident happened\n2. Live - updates as time progresses - this is helpful to communicate progress on the incident\n\n### Intended users\n[Sasha the Software Developer](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)  \n[Devon the DevOps Engineer](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)  \n[Sidney the Systems Administrator](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)  \n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\nPersonas can be found at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\n### Further details\n\nThis work contributes to the [Incident Management Vision](https://about.gitlab.com/direction/monitor/debugging_and_health/incident_management/)\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\n\n### Proposal\nWe want to figure out a way to embed interactive charts in GitLab issues, both live (i.e. updates with new data) . and static (set to a given time). Right now it is possible to insert an image snapshot of a Grafana using an img tag in GFM and pasting the src URL from play.grafana.org. These charts are not interactive, but they will update with new data when the page is refreshed. They can also be specified with a time frame achieving a static chart. **This is possible today**. We will be updating our documentation on how to do this.  \n\nWe are also exploring how to embed interactive Grafana charts in issues. This make be via iframes or importing JSON objects of charts into our own echart formats.\n\nLet's follow the same design patterns we are using for linking/unfurling metrics charts from the GitLab dashboard.\n\n**To minimize scope creep of the MVC, we will be limiting this implementation for public metrics only. In order to embed and share private or metrics with limited access, we will need to think about authentication for Grafana \u003c\u003e GitLab**\n\n\n#### User Journey 1\n1. User copies links to Grafana metric and pastes it into a GitLab issue template\n1. User configures auto-creation of issues using this templates\n1. Issue is created automatically upon receipt of a Prometheus alert\n1. Grafana metric unfurls in the issue\n1. User can click link back to the Grafana dashboard\n1. User can refresh the page to see new data\n\n#### User Journey 2\n1. During a fire-fight User copies a link to a particular Grafana metric\n1. User pastes this metric into the issue description or comment and the visual unfurls\n1. User can refresh the page to see new data\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)? --\u003e\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements --\u003e\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further guidelines: https://about.gitlab.com/handbook/engineering/quality/guidelines/test-engineering/ --\u003e\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n### What is the type of buyer? \n\n\u003c!-- Which leads to: in which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\n\n### Links / references\n\n/label ~feature\n","state":"closed","created_at":"2019-07-24T19:55:53.685Z","updated_at":"2019-12-02T19:59:56.976Z","closed_at":"2019-08-28T17:49:30.517Z","closed_by":{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"},"labels":["Category:Incident Management","Deliverable","Enterprise Edition","UX","backend","devops::monitor","direction","frontend","group::respond","needs investigation","release post item","type::feature","workflow::production"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":3146670,"username":"tristan.read","name":"Tristan Read","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3146670/avatar.png","web_url":"https://gitlab.com/tristan.read"}],"author":{"id":3796140,"username":"sarahwaldner","name":"Sarah Waldner","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3796140/avatar.png","web_url":"https://gitlab.com/sarahwaldner"},"type":"ISSUE","assignee":{"id":3146670,"username":"tristan.read","name":"Tristan Read","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3146670/avatar.png","web_url":"https://gitlab.com/tristan.read"},"user_notes_count":34,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13039","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":9,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13039","notes":"https://gitlab.com/api/v4/projects/278964/issues/13039/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13039/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13039","relative":"#13039","full":"gitlab-org/gitlab#13039"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1631,"epic":{"id":10030,"iid":1631,"title":"Incident Management: Embed Grafana charts in GitLab issues","url":"/groups/gitlab-org/-/epics/1631","group_id":9970,"human_readable_end_date":"Nov 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24700357,"iid":30398,"project_id":278964,"title":"Stored XSS using find file","description":"**[HackerOne report #650670](https://hackerone.com/reports/650670)** by `xssa` on 2019-07-19, assigned to `akelly`:\n\nHi security team\n\nToday i found stored xss\n\n\nPOC  \n-Create Project   \n-Go and Create New Directory put this Payload in the name of the Directory \u003cnoscript\u003e\u003cp title=\"\u003c/noscript\u003e\u003cimg src=x onerror=alert(1)\u003e\"\u003e  and press creat directory  \n-Go back now to the project and press find file and put the same payload XSS will execute.\n\nThanks\n\n## Impact\n\nThis stored XSS will affect any user visit tor project\n\n## Attachments\n**Warning:** Attachments received through HackerOne, please exercise caution!\n* [Stored_XSS.PNG](https://h1.sec.gitlab.net/a/0fad6dee-5f1b-41b1-a090-bdcd8ede024f/Stored_XSS.PNG)","state":"closed","created_at":"2019-07-24T18:06:55.931Z","updated_at":"2022-07-04T13:58:15.622Z","closed_at":"2019-11-12T07:59:12.329Z","closed_by":{"id":1187333,"username":"jramsay-gitlab","name":"James Ramsay (ex-GitLab)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1187333/avatar.png","web_url":"https://gitlab.com/jramsay-gitlab"},"labels":["Deliverable","HackerOne","devops::create","frontend","group::source code","priority::3","security","severity::3","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-10-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30398","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30398","notes":"https://gitlab.com/api/v4/projects/278964/issues/30398/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30398/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30398","relative":"#30398","full":"gitlab-org/gitlab#30398"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24700339,"iid":30390,"project_id":278964,"title":"Race condition that makes it possible to create duplicated labels","description":"### Summary\n\nWhile testing [automatic labelling on incident issues](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14705) I discovered that users can create duplicate labels on a project.\n\nIn this case we utilize [`Labels::FindOrCreateService`](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14705/diffs#3b92485756f7a3178af55f82581d87e5bf8b8d5f_45_62) to find or create a label for each incoming Prometheus alert. If the alerts come in simultaneously duplicate labels are created. Using these duplicate labels in issue fail due to validation constraints (`Label is invalid`).\n\nRefs https://gitlab.com/gitlab-org/gitlab-ce/issues/34953\n\n### Steps to reproduce\n\nOn your local GDK run Rails console:\n\n```ruby\nuser = User.first # mostly root\nproject = Project.last\nproject.group # =\u003e #\u003cGroup id:99 @gitlab-qa-sandbox-group/qa-test-2019-07-14-12-49-15-42529f648751dc6d\u003e\n\n\n# Simulate concurrency \nthreads = 5.times.map { Thread.new { Labels::FindOrCreateService.new(user, project, title: \"not uniq\").execute } }\nthreads.map(\u0026:join)\n\nlabel = Label.where(project_id: project, title: \"not uniq\").first # Does really matter which one\n\nissue = Issues::CreateService.new(project, user, title: \"fail\", label_ids: [label.id]).execute\nissue.persisted? # =\u003e false\nissue.errors\n# =\u003e #\u003cActiveModel::Errors:0x000055a336637200\n# @base=#\u003cIssue id: manual-prometheus/autodevops-deploy#192\u003e,\n# @details={:labels=\u003e[{:error=\u003e:invalid}]},\n# @messages={:labels=\u003e[\"is invalid\"]}\u003e\n\n```\n\n### What is the current *bug* behavior?\n\nUsers can create duplicate labels.\n\n### What is the expected *correct* behavior?\n\nLabels should be unique.\n\n### Relevant logs and/or screenshots\n\n![Screenshot_from_2019-07-24_11-57-49](/uploads/5aed3a801a15e8c45ab6dbf5ff35394a/Screenshot_from_2019-07-24_11-57-49.png)\n\n### Possible fixes\n\n#### 1. Database index does not work properly\n\nNot sure as we already have an `UNIQUE` index on `labels` table:\n\n```sql\n   ...\n    \"index_labels_on_group_id_and_project_id_and_title\" UNIQUE, btree (group_id, project_id, title)\n   ...\n```\n\n\u003cdetails\u003e\n\n```sql\n\ngitlabhq_development=# \\d labels\n                                            Table \"public.labels\"\n         Column          |            Type             |                      Modifiers\n-------------------------+-----------------------------+-----------------------------------------------------\n id                      | integer                     | not null default nextval('labels_id_seq'::regclass)\n title                   | character varying           |\n color                   | character varying           |\n project_id              | integer                     |\n created_at              | timestamp without time zone |\n updated_at              | timestamp without time zone |\n template                | boolean                     | default false\n description             | character varying           |\n description_html        | text                        |\n type                    | character varying           |\n group_id                | integer                     |\n cached_markdown_version | integer                     |\nIndexes:\n    \"labels_pkey\" PRIMARY KEY, btree (id)\n    \"index_labels_on_group_id_and_project_id_and_title\" UNIQUE, btree (group_id, project_id, title)\n    \"index_labels_on_project_id\" btree (project_id)\n    \"index_labels_on_template\" btree (template) WHERE template\n    \"index_labels_on_title\" btree (title)\n    \"index_labels_on_type_and_project_id\" btree (type, project_id)\nForeign-key constraints:\n    \"fk_7de4989a69\" FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE\n    \"fk_rails_c1ac5161d8\" FOREIGN KEY (group_id) REFERENCES namespaces(id) ON DELETE CASCADE\nReferenced by:\n    TABLE \"lists\" CONSTRAINT \"fk_7a5553d60f\" FOREIGN KEY (label_id) REFERENCES labels(id) ON DELETE CASCADE\n    TABLE \"label_links\" CONSTRAINT \"fk_d97dd08678\" FOREIGN KEY (label_id) REFERENCES labels(id) ON DELETE CASCADE\n    TABLE \"board_labels\" CONSTRAINT \"fk_rails_362b0600a3\" FOREIGN KEY (label_id) REFERENCES labels(id) ON DELETE CA\nSCADE\n    TABLE \"resource_label_events\" CONSTRAINT \"fk_rails_b126799f57\" FOREIGN KEY (label_id) REFERENCES labels(id) ON \nDELETE SET NULL\n    TABLE \"label_priorities\" CONSTRAINT \"fk_rails_e161058b0f\" FOREIGN KEY (label_id) REFERENCES labels(id) ON DELET\nE CASCADE\n```\n\n\u003c/details\u003e\n\nThis index does not work properly:\n\n```sql\ngitlabhq_development=# select project_id, title, group_id from labels where project_id = 61;\n project_id |   title   | group_id\n------------+-----------+----------\n         61 | not uniq  |\n         61 | not uniq  |\n         61 | not uniq  |\n         61 | not uniq  |\n         61 | not uniq  |\n```\n\n#### 2. Handle duplicate label in service\n\n`Labels::FindOrCreateService` should handle the case where the label was not persisted [after creation](https://gitlab.com/gitlab-org/gitlab-ce/blob/9de60d6d607c9a52589fe442cbefc5cc5bc0262c/app/services/labels/find_or_create_service.rb#L38).","state":"closed","created_at":"2019-07-24T10:30:03.904Z","updated_at":"2022-05-19T16:06:39.238Z","closed_at":"2020-07-10T06:20:40.265Z","closed_by":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"labels":["backend","database","devops::plan","group::project management","missed-deliverable","missed:12.10","missed:12.5","missed:12.6","missed:12.7","missed:12.8","missed:12.9","missed:13.0","missed:13.1","priority::4","release post item","severity::3","type::bug","workflow::production"],"milestone":{"id":1233746,"iid":49,"group_id":9970,"title":"13.2","description":"https://about.gitlab.com/releases/2020/07/22/gitlab-13-2-released/","state":"closed","created_at":"2020-04-09T17:28:01.032Z","updated_at":"2022-04-13T14:48:24.167Z","due_date":"2020-07-17","start_date":"2020-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/49"},"assignees":[{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"}],"author":{"id":438961,"username":"splattael","name":"Peter Leitzen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/97c2ff0fc99cc4eede69be9ac238c304?s=80\u0026d=identicon","web_url":"https://gitlab.com/splattael"},"type":"ISSUE","assignee":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"user_notes_count":31,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30390","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30390","notes":"https://gitlab.com/api/v4/projects/278964/issues/30390/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30390/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30390","relative":"#30390","full":"gitlab-org/gitlab#30390"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":23103411,"iid":13019,"project_id":278964,"title":"Improve error messages when adding namespaces in Jira Connect App","description":"When adding a namespace on the iframe rendered in Jira, errors are currently implemented as simple JS alerts.\n\nWe should improve how these are rendered.\n\nAlso, I think the \"you are not logged in to Gitlab.com\" error deserves its own workflow. Like maybe opening a popup to login or redirecting to login page then back after login.\n\n## Current State\n\n[![Image from Gyazo](https://i.gyazo.com/5419cb7ff23d4e3a8df039f964004c96.gif)](https://gyazo.com/5419cb7ff23d4e3a8df039f964004c96)\n\n## Proposal\n\n- Utilize existing GitLab UI patterns for error handling (e.g. [Alerts](https://design.gitlab.com/components/alert))\n- See [Error states](https://gitlab.com/gitlab-org/gitlab/-/issues/13019/designs/Error_states.png) in **Designs** section.\n\nNote: Failure to authenticate due to specific browser restrictions (will be addressed in a separate issue)","state":"closed","created_at":"2019-07-24T06:39:57.502Z","updated_at":"2022-11-22T20:18:33.965Z","closed_at":"2021-02-12T15:59:32.468Z","closed_by":{"id":3646819,"username":"deuley","name":"Patrick Deuley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3646819/avatar.png","web_url":"https://gitlab.com/deuley"},"labels":["Category:Integrations","Enterprise Edition","Integration::Jira","Jira::ConnectApp","atlassian","devops::manage","frontend","group::ecosystem [DEPRECATED]","missed:13.4","missed:13.7","priority::1","section::dev","workflow::in dev"],"milestone":{"id":1233760,"iid":56,"group_id":9970,"title":"13.9","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.334Z","updated_at":"2022-04-21T07:21:28.468Z","due_date":"2021-02-17","start_date":"2021-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/56"},"assignees":[{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"}],"author":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"type":"ISSUE","assignee":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"user_notes_count":32,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13019","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13019","notes":"https://gitlab.com/api/v4/projects/278964/issues/13019/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13019/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13019","relative":"#13019","full":"gitlab-org/gitlab#13019"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4354,"epic":{"id":106882,"iid":4354,"title":"Improve UX for GitLab for Jira App Setup","url":"/groups/gitlab-org/-/epics/4354","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24700264,"iid":30360,"project_id":278964,"title":"Backend: Race condition when enqueuing builds to run","description":"### Summary\n\nIn `Ci::PlayBuildService#play`, we run two commands: `build.enqueue`, followed by `build.update(current_user: ..., job_variables_attributes: ...)`\n\nI think it's theoretically possible for us to enqueue a build, which is then picked up and run without the correct user or job variables set.\n\n### Steps to reproduce\n\n1. Create a config with a manual job with variables:\n\n2. In order to reproduce this, place a `sleep(500)` between `build.enqueue` and `build.update`\n```\nvariables:\n   DEPLOY_TO_TEST:\n   value: \"this is variable deploy to test\"\n\ndeploy_job:\n   when: manual\n   script: echo \"$DEPLOY_TO_STAGE\" # for ease of testing\n```\n\n3. Run a pipeline\n4. Click on the manual job `deploy_job`\n5. Change the value of `DEPLOY_TO_STAGE` and click on `Trigger this manual action` \n\nThe variable value for `DEPLOY_TO_STAGE` will remain unchanged.\n\n### What is the current *bug* behavior?\n\nJob runs without correct variables set\n\nAffected jobs are when jobs are run manually.\n\n### What is the expected *correct* behavior?\n\nJob should not be enqueued until the system is ready to service it fully. To test it, run the steps above and the variable outputted by the `ECHO` statement **should** change. \n\n### Possible fixes\n\n[Suggestion to fix](https://gitlab.com/gitlab-org/gitlab/-/issues/30360#note_319405236)\n\n/cc @matteeyah","state":"closed","created_at":"2019-07-23T13:58:48.299Z","updated_at":"2022-11-11T17:03:17.900Z","closed_at":"2022-11-07T18:25:22.515Z","closed_by":{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"},"labels":["CI variables","Category:Continuous Integration","Category:Pipeline Authoring","backend","candidate::15.5","devops::verify","group::pipeline authoring","missed-SLO","pipeline","priority::2","section::ops","severity::2","type::bug","vintage","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"}],"author":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"type":"ISSUE","assignee":{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"},"user_notes_count":25,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30360","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30360","notes":"https://gitlab.com/api/v4/projects/278964/issues/30360/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30360/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30360","relative":"#30360","full":"gitlab-org/gitlab#30360"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5124,"epic":{"id":175714,"iid":5124,"title":"Bugs: Variables","url":"/groups/gitlab-org/-/epics/5124","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":{"id":74860,"iid":115,"sequence":28,"group_id":9970,"title":null,"description":null,"state":3,"created_at":"2022-08-08T00:05:02.221Z","updated_at":"2022-11-14T00:05:02.449Z","start_date":"2022-10-31","due_date":"2022-11-13","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/74860"},"health_status":"on_track"},{"id":23079626,"iid":13010,"project_id":278964,"title":"[FE] Productivity Analytics - Type of Work (pre-defined)","description":"## Problem to solve\n\nThis issue adds a new chart to the `Productivity Analytics` page as described in https://gitlab.com/gitlab-org/gitlab-ee/issues/12246\n\n![image](/uploads/f8bdd9ff3fa12caa24ebb9e10a6ba50b/image.png)\n\n## Requirements\n- Add a stacked bar chart component (reuse the existing `GlStackedColumnChart` from `gitlab-ui`)\n- Update Vuex store by integrating the newly added chart type\n\n### BE API integration\n- Request data from API via `/-/analytics/productivity_analytics.json?chart_type=stacked_bar\u0026metric_type=type_of_work`\n- Use same query parameters as remaining histogram charts on the page\n- Assumed API response structure:\n```\n{ DATE: { new: VALUE_INTEGER, churn: VALUE_INTEGER, refactoring: VALUE_INTEGER} }\n```\n\n## Questions","state":"closed","created_at":"2019-07-23T10:53:17.891Z","updated_at":"2021-09-21T09:29:06.132Z","closed_at":"2021-09-21T09:29:06.110Z","closed_by":{"id":4583714,"username":"npost","name":"Nick Post","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4583714/avatar.png","web_url":"https://gitlab.com/npost"},"labels":["Category:Value Stream Management","Enterprise Edition","GitLab Premium","Manage [DEPRECATED]","Stretch","analytics","devops::manage","direction","frontend","group::optimize","icebox","maturity::minimal","missed:12.3","researched [DEPRECATED]","section::dev","type::feature","workflow::blocked"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":750946,"username":"dennis","name":"Dennis Tang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/750946/avatar.png","web_url":"https://gitlab.com/dennis"},"type":"ISSUE","assignee":null,"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13010","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13010","notes":"https://gitlab.com/api/v4/projects/278964/issues/13010/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13010/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13010","relative":"#13010","full":"gitlab-org/gitlab#13010"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1977,"epic":{"id":13106,"iid":1977,"title":"Productivity Analytics - Type of Work (pre-defined)","url":"/groups/gitlab-org/-/epics/1977","group_id":9970},"iteration":null,"health_status":null},{"id":23078842,"iid":13008,"project_id":278964,"title":"[FE] Identifying Potential Code Hotspots","description":"Frontend implementation of https://gitlab.com/gitlab-org/gitlab-ee/issues/12683\n\n### Requirements\n------\n#### Overview \n\n* New feature flag - to be added by ~backend if possible, else we can handle it\n* Sidebar navigation menu item\n* Dropdowns for item selection, first iteration to include\n  * Group selection (does not load hotspots, only project selection)\n  * Project selection\n  * Number of files\n* Treemap chart displaying code hotspots for a single project\n* No access view for unsupported users / groups\n* No data toast message when no data returned for selected range\n\n#### Additional components required\n* ECharts Treemap\n  * This will either need to be added to gitlab or wrapped as a gitlab-ui component. \n    * To ensure that the best path is chosen, ping a maintainer of gitlab-ui as early as possibly\n  * Click functionality on folders within the chart to drill down\n    * The level of complexity will be determined by the project code hotspot data which is returned from the API\n      * 1 level of data: Most complicated \n      * 2 levels of data: Somewhere in the middle\n      * All levels of data: Least complicated\n  * WIP [prototype of the chart](https://gitlab.com/blabuschagne/echarts-playground/blob/master/src/components/treeMap.vue)\n\n    \n#### Implementation \n\n* As this is a new page, the follow will be required\n  * New Vue application to be created for the page\n  * New Vuex store for the state management\n\n----\n\n### Questions \n* Product / UX\n  * Are subgroups being left out for the MVP?\n* Backend\n  * Will it be very resource intensive to return all project code hotspot data in one API call?\n* Frontend\n  * What would be the best way to test all of this?","state":"closed","created_at":"2019-07-23T10:21:00.265Z","updated_at":"2021-06-15T20:31:51.042Z","closed_at":"2021-06-15T20:31:51.030Z","closed_by":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"labels":["Category:Code Analytics","Enterprise Edition","GitLab Premium","Manage [DEPRECATED]","Persona: Development Team Lead","Progress:Started","UX","[deprecated] Accepting merge requests","analytics","devops::manage","frontend","group::optimize","icebox","maturity::minimal","missed-deliverable","missed:12.4","section::dev","type::feature","workflow::in review"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"type":"ISSUE","assignee":null,"user_notes_count":29,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13008","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13008","notes":"https://gitlab.com/api/v4/projects/278964/issues/13008/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13008/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13008","relative":"#13008","full":"gitlab-org/gitlab#13008"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":23076345,"iid":13005,"project_id":278964,"title":"Allow to use issue/issues and merge_request/merge_requests for issuable_type in Insights configuration","description":"As can be seen in https://gitlab.com/gitlab-com/Product/merge_requests/5/diffs, sometimes, people will use `issuable_type: issues` instead of `issuable_type: issue` and in that case the chart would render an error.\n\nI think it would be nice to support the plural form since the chart itself returns data for many issuables...","state":"closed","created_at":"2019-07-23T09:27:39.932Z","updated_at":"2020-03-02T13:43:26.823Z","closed_at":"2020-03-02T13:43:26.740Z","closed_by":{"id":423915,"username":"godfat","name":"Lin Jen-Shin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8c73dab2ecd23d5b5627a0235ae2f9b1?s=80\u0026d=identicon","web_url":"https://gitlab.com/godfat"},"labels":["Engineering Productivity","Enterprise Edition","Quality","backend","ep::metrics","insights","priority::3","type::feature"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":3,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13005","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13005","notes":"https://gitlab.com/api/v4/projects/278964/issues/13005/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13005/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13005","relative":"#13005","full":"gitlab-org/gitlab#13005"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1196,"epic":{"id":6133,"iid":1196,"title":"Future Improvements for GitLab Insights","url":"/groups/gitlab-org/-/epics/1196","group_id":9970,"human_readable_end_date":"Jul 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":23072709,"iid":13001,"project_id":278964,"title":"Support \"squash and merge\" in Merge Train","description":"### Problem to solve\n\nCurrently, Merge Train doesn't allow users to choose [squash option](https://docs.gitlab.com/ee/user/project/merge_requests/squash_and_merge.html). It could be a deal-breaker for some users. We should consider supporting [squash and merge](https://docs.gitlab.com/ee/user/project/merge_requests/squash_and_merge.html).\n\n![screenshot_17](/uploads/fcd2996f3a5c6137817218ba846ec9f1/screenshot_17.png)\n\n### Intended users\n\nDevelopers \n\n\n\n\n### Permissions and Security\n\nTo squash and merge pull requests, you must have write permissions in the repository, and the repository must allow squash merging.\n\nThese actions should be logged to audit log \n\n## Feature Flag\n\nThis feature is implemented behind `merge_train_new_stale_check` feature flag and enabled by default. Once we've confirmed the feature is deemed stable, we remove the feature flag.\n\n### Links and references \n\n### MRs:\n\n- [x] Preserve merge train rows after merge https://gitlab.com/gitlab-org/gitlab/merge_requests/19864\n- [ ] Proactively marking stale status in merge train https://gitlab.com/gitlab-org/gitlab/merge_requests/19434\n- [ ] Documentation update (https://docs.gitlab.com/ee/ci/merge_request_pipelines/pipelines_for_merged_results/merge_trains/#requirements-and-limitations)","state":"closed","created_at":"2019-07-23T07:52:48.358Z","updated_at":"2020-10-02T17:30:11.731Z","closed_at":"2019-12-11T14:46:31.973Z","closed_by":{"id":12452,"username":"ayufan","name":"Kamil TrzciÅ„ski","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a285e30f35d72526fb0954e8fe7cefa?s=80\u0026d=identicon","web_url":"https://gitlab.com/ayufan"},"labels":["Category:Continuous Delivery","Category:Merge Trains","Deliverable","Enterprise Edition","Release::P1","backend","customer","devops::release","devops::release::merge trains","direction","group::release","planning priority","type::feature","workflow::in review"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"}],"author":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"type":"ISSUE","assignee":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"user_notes_count":17,"merge_requests_count":2,"upvotes":20,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13001","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":1},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13001","notes":"https://gitlab.com/api/v4/projects/278964/issues/13001/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13001/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13001","relative":"#13001","full":"gitlab-org/gitlab#13001"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":23068409,"iid":12998,"project_id":278964,"title":"Notifications for CI Minutes quota limits should not mention purchases for self-hosted GitLab","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nSelf-hosted GitLab users receive a notification email of the sort below:\n\n```\nThis is an automated notification to let you know that your CI Runner Minutes quota for \"example.com\" is below 5%.\n\nClick here to purchase more minutes.\n\nIf you need assistance, please contact GitLab support.\n```\n\nThe \"Click here to purchase more minutes\" text caused a [premium customer to misunderstand](https://gitlab.zendesk.com/agent/tickets/127171) (Zendesk, internal only) that we were asking them to make an additional purchase.\n\n### Steps to reproduce\n\nSet up a pipeline minutes quota for your instance.\n\n### What is the current *bug* behavior?\n\nThe text says to purchase more minutes - this is a SaaS feature. We do not currently offer add-on shared runner minutes for self-managed instances.\n\n### What is the expected *correct* behavior?\n\n- Self-managed users should not receive email notifications\n- Self-managed users should receive the following in-app notifications:\n\n1. When quota has expired: `Your pipelines quota has expired, please contact your systems administrator`\n2. At 10% of quota left: `Your pipelines quota is about to expire, please contact your systems administrator`\n\n### Relevant logs and/or screenshots\n\n(Paste any relevant logs - please use code blocks (```) to format console output,\nlogs, and code as it's tough to read otherwise.)\n\n### Output of checks\n\nReported in 12.1.0-ee\n\n### Possible fixes\n\nThis was introduced in https://gitlab.com/gitlab-org/gitlab-ee/commit/8d8e2098dde7c9f21ba51e8b033b46a13ce467a6.\n\nI think we're just missing some `if ::Gitlab.com?` conditionals.","state":"closed","created_at":"2019-07-23T04:30:26.697Z","updated_at":"2019-09-26T00:23:10.697Z","closed_at":"2019-07-24T03:10:12.085Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["Deliverable","Enterprise Edition","Unplanned","[deprecated] ðŸŽ","customer","devops::fulfillment","devops::growth","priority::2","severity::1","type::bug","workflow::in dev"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":280339,"username":"rdavila","name":"RubÃ©n DÃ¡vila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/280339/avatar.png","web_url":"https://gitlab.com/rdavila"}],"author":{"id":1081658,"username":"weimeng","name":"Wei-Meng Lee","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0cd59490b4ca72fbb0e784796f4034db?s=80\u0026d=identicon","web_url":"https://gitlab.com/weimeng"},"type":"ISSUE","assignee":{"id":280339,"username":"rdavila","name":"RubÃ©n DÃ¡vila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/280339/avatar.png","web_url":"https://gitlab.com/rdavila"},"user_notes_count":54,"merge_requests_count":2,"upvotes":26,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12998","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12998","notes":"https://gitlab.com/api/v4/projects/278964/issues/12998/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12998/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12998","relative":"#12998","full":"gitlab-org/gitlab#12998"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1836,"epic":{"id":11605,"iid":1836,"title":"ðŸ› Linux Shared CI Runner Minutes Bugs","url":"/groups/gitlab-org/-/epics/1836","group_id":9970,"human_readable_end_date":"Feb 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24700181,"iid":30329,"project_id":278964,"title":"New project path disclosure through unsubscribe link of issue/merge requests","description":"**[HackerOne report #650574](https://hackerone.com/reports/650574)** by `ashish_r_padelkar` on 2019-07-19, assigned to `akelly`:\n\n### Summary\n\nHello,\n\nWhen a user is subscribed to any issue/merge request from public project, they get an email with unsubscribe link.\n\nThe problem with this link is, it discloses the new path of the project if project goes from public to private when user later navigates to the unsubscribe url.\n\n### Steps to reproduce\n\n1. Subscribe to any public project issue/merge request.  \n2. Let anyone comment on the issue or merge request so that you receive an email.  \n3. Owner Now makes the project private.  \n4. Owner Changes the path of the project.  \n5. Now visit the unsubscribe link from email. It will navigate to new project path automatically.\n\n\n### What is the current *bug* behavior?\n\nDiscloses the new project path url if project goes from public to private\n\n\n### What is the expected *correct* behavior?\n\nNew project path should not be visible\n\n### Output of checks\n\n This bug happens on GitLab.com and might be on omnibus installations too!\n\nRegards,  \nAshish\n\n## Impact\n\nDiscloses new project path when project becomes private.","state":"closed","created_at":"2019-07-22T18:25:46.344Z","updated_at":"2019-10-30T15:09:55.099Z","closed_at":"2019-09-30T13:48:43.943Z","closed_by":{"id":4056133,"username":"jeremymatos","name":"Jeremy Matos","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7c972d878793ca2302186e5d8c0c0dd8?s=80\u0026d=identicon","web_url":"https://gitlab.com/jeremymatos"},"labels":["HackerOne","backend","devops::plan","group::project management","priority::3","security","severity::3","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-09-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30329","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30329","notes":"https://gitlab.com/api/v4/projects/278964/issues/30329/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30329/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30329","relative":"#30329","full":"gitlab-org/gitlab#30329"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24700178,"iid":30327,"project_id":278964,"title":"Auto responder spamming issues and comments in gitlab-org group","description":"### Summary\n\nA user who had a `Watch` setting for the `gitlab-org group` and had a email set with an auto-responder to say the person was no longer part of the company. Every e-mail notification from a project inside `gitlab-org` would trigger the auto-responder and would successfully post comments with the auto-responder message.\n\nDisabling the `watch` setting stopped the emails. \n\n### Example comments\n\nhttps://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14597#note_194460436\n\n### What is the current *bug* behavior?\n\nAuto-response emails were not rejected.\n\n### Possible fixes\n\nAs Stan mentioned: \n\n\u003e Ideally we should quarantine or stop these auto-responders because anyone could easily do this and overwhelm our issues. \n\nWe need to inspect the headers for these replies. Perhaps we need to [update the headers that are marked as auto-generated emails](https://gitlab.com/gitlab-org/gitlab-ce/blob/master/lib/gitlab/email/receiver.rb#L99-106).","state":"closed","created_at":"2019-07-22T17:33:19.480Z","updated_at":"2021-06-01T11:54:34.260Z","closed_at":"2019-10-21T12:52:47.896Z","closed_by":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"labels":["Application Limits","backend","bug::performance","devops::plan","emails","group::product planning","priority::4","reply by email","reproduced on GitLab.com","security","severity::4","type::bug","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"}],"author":{"id":136229,"username":"cindy","name":"Cindy Pallares ðŸ¦‰","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/136229/avatar.png","web_url":"https://gitlab.com/cindy"},"type":"ISSUE","assignee":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30327","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30327","notes":"https://gitlab.com/api/v4/projects/278964/issues/30327/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30327/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30327","relative":"#30327","full":"gitlab-org/gitlab#30327"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1834,"epic":{"id":11591,"iid":1834,"title":"Certify application limits","url":"/groups/gitlab-org/-/epics/1834","group_id":9970,"human_readable_end_date":"Oct 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":23010083,"iid":12952,"project_id":278964,"title":"System notes for scoped labels show \"automatically removed\" even if they were manually removed","description":"In https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14487, we added the term \"automatically removed\" to system notes for scoped label removals.\n\nThis should only apply to removals that were automatic and not all removals.\n\n### Reproduction steps\n\n1. Add label ~\"workflow::In dev\" \n1. Remove label ~\"workflow::In dev\" \n1. System note shows \"automatically removed\" even if I manually removed it\n\nAnother case where it's confusing is when we add a scoped label with different scope together with the removal:\n\n1. Add label ~\"workflow::In dev\" \n1. Remove label ~\"workflow::In dev\" and add label ~\"devops::plan\" \n1. The system note would say: Added ~\"devops::plan\" and automatically removed ~\"workflow::In dev\"","state":"closed","created_at":"2019-07-19T20:48:12.803Z","updated_at":"2022-05-19T16:06:27.775Z","closed_at":"2019-09-24T17:55:45.242Z","closed_by":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"labels":["Enterprise Edition","backend","devops::plan","group::project management","labels","missed:12.3","priority::3","severity::3","type::bug","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"}],"author":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"type":"ISSUE","assignee":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"user_notes_count":2,"merge_requests_count":1,"upvotes":4,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12952","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12952","notes":"https://gitlab.com/api/v4/projects/278964/issues/12952/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12952/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12952","relative":"#12952","full":"gitlab-org/gitlab#12952"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":23009298,"iid":12951,"project_id":278964,"title":"Update tslint analyzer to latest versions of upstream dependencies","description":"Our tslint analyzer has two main upstream depencencies:\n\n* tslint (shipping v5.12.1)\n* tslint-config-security (shipping v1.15.0)\n\nBoth libraries have updates published and we need to consume them.\n\n* [tslint v5.20.0](https://www.npmjs.com/package/tslint/v/5.20.0)\n* [tslint-config-security v1.16.0](https://www.npmjs.com/package/tslint-config-security/v/1.16.0)\n\n# tslint v5.20.0 release notes\n\n* [bugfix] fix strict-boolean-expressions false positive with \"ignore-rhs\" option \n* [bugfix] fix no-unnecessary-type-assertion no error when \"strict\": true in compiler flags\n* [bugfix] \"ignore\" option for file-name-casing rule works correctly\n* [bugfix] fix array-type false positive for simple parenthesized types with \"array-simple\" option\n* [new-rule-option] object-literal-shorthand supports {\"property\"?: \"never\", \"method\"?: \"never\"} as config options\n* [new-rule-option]: allow-generics option for invalid-void rule\n* [new-rule-option] check-super-calls option for unnecessary-constructor rule\n* [chore] Upgrade diff dependency to v4.0.1\n\n# tslint v5.19.0 release notes\n\n* [bugfix] relax promise-function-async for short parenthesized arrow functions \n* [bugfix] fix no-async-without-await false positive for abstract methods\n* [bugfix] fix strict-comparison false positive for null and undefined literals \n* [bugfix] improve no-angle-bracket-type-assertion autofix semantics with more parentheses \n* [enhancement] add BigInt support to restrict-plus-operands rule\n* [enhancement] await-promise now supports new TypeScript 3.6 AST API symbols for async iterators \n* [new-rule-option] check-strings and check-regex options for max-line-length rule \n* [new-rule-option] variable-declaration-ignore-function option for typedef rule \n* [new-rule-option] ignore-blank-lines option for object-literal-sort-keys rule \n* [new-rule] no-for-in\n* [new-rule] invalid-void\n* [new-rule] strict-string-expressions reports errors on type coercions found in string expressions\n* [new-rule] no-promise-as-boolean\n* [docs] link to OSS fellowship medium post in README \n\n# tslint v5.18.0 release notes\n\n* [feature] New --print-config CLI flag\n* [bugfix] no-unnecessary-type-assertion no longer flags x! non-null assertions if --strictNullChecks is not enabled \n* [bugfix] quotemark handles unbalanced quotes more gracefully without crashing \n* [docs] Add tslint-playground link to README and bug report template\n* [enhancement] no-magic-numbers rule ignores arguments passed into default Number methods\n* [new-fixer] comment-format\n* [new-rule-option] \"allow-trailing-lowercase\" option for comment-format rule\n* [new-rule-option] \"ignore-accessors\" for adjacent-overload-signatures to ignore getters / setters overloads\n* [new-rule] no-async-without-await\n* [new-rule] strict-comparisons\n\n# tslint v5.17.0 release notes\n\n* [bugfix] quotemark backtic option now ignores enum members, use strict declarations, lookup types, and strings containing octal escape sequences.\n* [bugfix] no-redundant-jsdoc no longer errors on JSDocThisTag\n* [chore] Update devDependency mocha from v3.2.0 to v6.1.4\n* [chore] Update devDependency js-yaml from ^3.13.0 to ^3.13.1\n* [chore] Update deprecated devDependency github to @octokit/rest\n* [chore] Update devDependency nyc from v13.3.0 to v14.1.1\n* [deprecation] no-use-before-declare rule for typescript \u003e= 2.9.0\n* [documentation] Minor fix for variable-name rule metadata\n* [documentation] Fixed no-unused-variable argument count\n* [enhancement] Allow const assertions in no-object-literal-type-assertion\n* [new-fixer] unnecessary-constructor\n\n# tslint v5.16.0 release notes\n\n* [bugfix] Excuse more quotemark backtick edge cases and fix behavior for TS \u003c 2.7.1 \n* [bugfix] Fix regression in interface-name rule related to numeric characters in interface names\n* [enhancement] Update nyc from v10.2.0 to v13.3.0\n* [enhancement] Migrate from deprecated babel-code-frame package to new @babel/code-frame package\n* [enhancement] Improve error message for restrict-plus-operands rule.\n* [enhancement] comment-format rule now whitelists //region comments generated by JetBrains IDE\n* [enhancement] Relax no-null-undefined-union rule.\n* [new-rule-option] allow-else-if option for unnecessary-else rule\n* [documentation] Fix \"identifer\" typo in custom rules docs\n* [documentation] Fix code example for switch-default rule\n* [documentation] Fix documentation example for prose formatter\n* [documentation] no-parameter-properties: fix unclear rule description\n* [documentation] Fix typo in rule docs generation\n\n# tslint v5.15.0 release notes\n\n* [api] WalkContext and AbstractWalker type parameter defaults to void\n* [bugfix] no-void-expression now allows conditional expressions \n* [bugfix] fix linebreak handling in ordered-imports \n* [bugfix] fix static-this false positive for higher order components \n* [bugfix] Fixed crash in unnecessary-else from blank if statements\n* [bugfix] Fixed false positive in unnecessary-else after non-jumping statement \n* [bugfix] interface-name now handles interface starting with \"I18n\" correctly\n* [bugfix] no-string-throw fix inserts whitespace if not present after throw keyword \n* [bugfix] quotemark: fix some edge cases for backtick option \n* [bugfix] unnecessary-constructor: don't flag non-private constructors that are actually necessary\n* [enhancement] Upgrade js-yaml to avoid security issue \n* [new-rule-option] allow-single-line-comments option for file-header rule\n* [new-rule-option] ignore-rest-args option for no-any rule\n* [new-rule] no-null-undefined-union\n\n# tslint v5.14.0 release notes\n\n* [bugfix] backtick option for quotemark rule no longer incorrectly flags string literals that must use single/double quotes\n* [bugfix] Fixed regression in CheckstyleFormatter backwards compatibility\n* [bugfix] whitespace rule now lints export statements\n* [bugfix] no-trailing-whitespace no longer flags files starting with a byte order mark\n* [enhancement] promise-function-async now allows single statement lamda functions that delegate to another promise-returning function\n* [enhancement] Add note to docs about zero-indexing for machine formatters\n* [enhancement] Fix metadata of the whitespace rule\n* [enhancement] Add junit output for files which are successfully linted\n* [new-rule-option] underscore option for no-shadowed-variable rule to ignore shadowed underscores\n* [new-rule-option] require-const-for-all-caps option for variable-name rule\n* [new-rule-option] overloads option for completed-docs rule to enforce documentation of each overload signature \n* [new-rule-option] allow-namespace-imports option for no-duplicate-imports rule \n* [new-rule-option] allow-arguments option for no-object-literal-type-assertion rule to allow type assertions on object literals used inside call expressions\n* [new-rule-option] allow-delete option for no-unbound-method rule\n* [new-rule] no-tautology-expression\n* [new-rule] static-this\n* [new-rule] unnecessary-else\n \n# tslint v5.13.1 release notes\n\n* [bugfix] Fix regression in CheckstyleFormatter backwards compatibility\n\n# tslint v5.13.0 release notes\n\n* [deprecation] Mark RuleWalker and ProgramAwareRuleWalker as deprecated\n* [bugfix] Create output directory when the output path (specified by --out CLI flag) does not exist.\n* [bugfix] Explicit disabling of rules is now copied over to jsRules when using jsRules: true\n* [bugfix] unknown is recognized as simple type in array-type\n* [bugfix] ban: Fix a false positive which would occur when banning method calls nested inside objects. Previously, banning [\"a\", \"b\", \"c\"] would trigger lint failures on the syntax b.c(), which was not the intent of this rule.\n* [bugfix] Fixed single-line comment parsing for completed-docs \n* [bugfix] trailing-comma no longer crashes if it cannot find the closing parenthesis of a function declaration \n* [bugfix] no-unsafe-any: allow implicitly downcasting any to unknown\n* [bugfix] Add grouped-imports to tslint:all \n* [docs] Fix docs typo\n* [enhancement] Add \"formatting\" rule category\n* [enhancement] ordered-imports now supports a groups option to provide custom grouping rules.\n* [enhancement] Convert completed-docs to an untyped rule\n* [enhancement] Checkstyle formatter includes every file linted regardless of lint errors.\n* [enhancement] Formatters now receive the full list of of linted file paths as a third argument.\n* [enhancement] array-type rule handles Typescript 3.0's unknown type properly\n* [enhancement] import-blacklist now supports regular expression patterns for blacklisting\n* [new-rule] no-restricted-globals\n* [new-fixer] added fixer for newline-before-return rule\n* [new-fixer] number-literal-format now includes auto fix\n* [new-rule-option] Added whitelist option to no-unbound-method\n* [new-rule-option] added jsx-ignore option to no-magic-numbers rule\n* [new-rule-option]: object-literal-sort-keys: Add match-declaration-order-only option \n* [new-rule-option] strict-boolean-expressions accepts ignore-rhs option to disable checking the right-hand side of the \u0026\u0026 and || operators as strictly boolean. \n\n# tslint-config-security v1.16.0 release notes\n\n* AST walkers are rewritten to use more performant functional TSLint API\n* Added more details about each rule","state":"closed","created_at":"2019-07-19T20:07:38.950Z","updated_at":"2019-12-18T11:32:54.346Z","closed_at":"2019-12-03T02:29:35.874Z","closed_by":{"id":4221051,"username":"scardoso","name":"Stacey","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4221051/avatar.png","web_url":"https://gitlab.com/scardoso"},"labels":["Category:SAST","Deliverable","Enterprise Edition","backend","devops::secure","group::static analysis","missed-deliverable","missed:12.4","missed:12.5","type::feature","workflow::ready for development"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":4221051,"username":"scardoso","name":"Stacey","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4221051/avatar.png","web_url":"https://gitlab.com/scardoso"}],"author":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"type":"ISSUE","assignee":{"id":4221051,"username":"scardoso","name":"Stacey","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4221051/avatar.png","web_url":"https://gitlab.com/scardoso"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12951","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12951","notes":"https://gitlab.com/api/v4/projects/278964/issues/12951/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12951/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12951","relative":"#12951","full":"gitlab-org/gitlab#12951"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":23007915,"iid":12950,"project_id":278964,"title":"Update sobelow analyzer to latest version","description":"We use sobelow to analyze projects written in elixir and are currently shipping v0.7.6 of that project. However, [v0.8.0 has now shipped](https://github.com/nccgroup/sobelow/tree/v0.8.0). We need to update this analyzer to use the newer version.","state":"closed","created_at":"2019-07-19T18:54:17.978Z","updated_at":"2019-11-18T15:57:06.918Z","closed_at":"2019-09-11T05:42:50.534Z","closed_by":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"labels":["Category:SAST","Enterprise Edition","backend","backend-weight::2","backstage [DEPRECATED]","devops::secure","group::static analysis"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"}],"author":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"type":"ISSUE","assignee":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"user_notes_count":13,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12950","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12950","notes":"https://gitlab.com/api/v4/projects/278964/issues/12950/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12950/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12950","relative":"#12950","full":"gitlab-org/gitlab#12950"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":23007862,"iid":12949,"project_id":278964,"title":"Update security-code-scan analyzer to latest version","description":"Our security-code-scan analyzer uses a tool provided by Microsoft to detect vulnerabilities in .Net projects. We're currently using v3.0.0 of this tool. However, [v3.3.0 has shipped](https://security-code-scan.github.io/#3.3.0). We need to update the analyzer to use the newer version.\n\n# v3.3.0 release notes\n\n* Better C# 7 handling\n* CSRF analyzer configuration made more flexible.\n* Configuration file schema version has changed to 2.0, so if you had custom config settings, youâ€™ll need to adjust to the schema and bump your file name from config-2.0.yml to config-2.1.yml or change from Version: 2.0 to Version: 2.1 if it was added to a project.\n* Bug fixes.\n\n# v3.2.0 release notes\n\nBugfix release.\n\n* Fixes using SCS as nuget. \n* One click code fixes were removed until a separate assembly is created.\n\n# v3.1.0 release notes\n\nThe release adds support for VS2019 and bug fixes. Also:\n\n* Adds multiple XSS sinks for WebForms.\n* Changes in SCS configuration file doesnâ€™t require to restart Visual Studio anymore.\n* Warnings are suppressed for generated code.\n* Adds .NET Core cookie analyzer.","state":"closed","created_at":"2019-07-19T18:50:22.666Z","updated_at":"2019-11-18T15:57:07.405Z","closed_at":"2019-10-24T03:00:09.196Z","closed_by":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"labels":["Category:SAST","Deliverable","Enterprise Edition","backend","backend-weight::1","devops::secure","group::static analysis","missed-deliverable","missed:12.4","type::feature"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"}],"author":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"type":"ISSUE","assignee":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12949","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12949","notes":"https://gitlab.com/api/v4/projects/278964/issues/12949/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12949/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12949","relative":"#12949","full":"gitlab-org/gitlab#12949"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":23007797,"iid":12948,"project_id":278964,"title":"Update secrets analyzer dependencies to latest versions","description":"SAST's secrets analyzer uses two upstream dependencies to do its work.\n\n* gitleaks\n* Trufflehog\n\nWe're currently shipping gitleaks v1.24.0. However, [v3.3.0 shipped Feb 1, 2020](https://github.com/zricethezav/gitleaks/releases/tag/v3.3.0). We need to update to the latest and greatest.\n\nWe're also shipping trufflehog v2.0.98. However, [v2.0.99 shipped 6 May, 2019](https://pypi.org/project/truffleHog/2.0.99/). We need to also update this dependency.\n\n### Addressing breaking changes\n\nNew versions of gitleaks remove one of the CLI options we rely on (see https://gitlab.com/gitlab-org/gitlab/issues/12948#note_287252726), so we will need to address the incompatibility issue with some additional logic to convert the passed ENV variable into a configuration option within `gitleaks.toml`\n","state":"closed","created_at":"2019-07-19T18:45:56.010Z","updated_at":"2021-04-03T08:22:17.160Z","closed_at":"2020-03-23T21:06:44.349Z","closed_by":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"labels":["Category:SAST","Category:Secret Detection","Deliverable","Enterprise Edition","backend","devops::secure","group::static analysis","missed-deliverable","missed:12.4","missed:12.5","type::feature","workflow::ready for development"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[],"author":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"type":"ISSUE","assignee":null,"user_notes_count":22,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12948","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12948","notes":"https://gitlab.com/api/v4/projects/278964/issues/12948/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12948/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12948","relative":"#12948","full":"gitlab-org/gitlab#12948"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1514,"epic":{"id":8614,"iid":1514,"title":"Secret Detection - To Viable Maturity","url":"/groups/gitlab-org/-/epics/1514","group_id":9970,"human_readable_end_date":"Oct 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":23007652,"iid":12947,"project_id":278964,"title":"Update PMD analyzer to 6.17.0","description":"We use PMD for one our analyzers in SAST, and are currently shipping v6.15.0 of this tool. [Version 6.16.0 shipped 28 July, 2019](https://github.com/pmd/pmd/tree/pmd_releases/6.17.0). We need to update to the latest version.","state":"closed","created_at":"2019-07-19T18:31:36.266Z","updated_at":"2019-11-18T15:57:07.047Z","closed_at":"2019-08-23T02:40:06.641Z","closed_by":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"labels":["Category:SAST","Deliverable","Enterprise Edition","backend","backstage [DEPRECATED]","devops::secure","group::static analysis"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"}],"author":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"type":"ISSUE","assignee":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"user_notes_count":5,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12947","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12947","notes":"https://gitlab.com/api/v4/projects/278964/issues/12947/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12947/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12947","relative":"#12947","full":"gitlab-org/gitlab#12947"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":23007079,"iid":12946,"project_id":278964,"title":"Update flawfinder analyzer to 2.0.10","description":"We use flawfinder for one our analyzers in SAST, and are currently shipping v2.0.8 of this tool. [Version 2.0.10 shipped 23 June, 2019](https://pypi.org/project/flawfinder/2.0.10/). We need to update to the latest version.","state":"closed","created_at":"2019-07-19T18:10:29.731Z","updated_at":"2019-11-18T15:57:07.057Z","closed_at":"2019-08-26T02:30:34.171Z","closed_by":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"labels":["Category:SAST","Deliverable","Enterprise Edition","backend","backstage [DEPRECATED]","devops::secure","group::static analysis"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"}],"author":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"type":"ISSUE","assignee":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12946","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12946","notes":"https://gitlab.com/api/v4/projects/278964/issues/12946/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12946/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12946","relative":"#12946","full":"gitlab-org/gitlab#12946"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699962,"iid":30238,"project_id":278964,"title":"Improve and migrate FE registry Karma tests to Jest","description":"As part of the review from gitlab-ce!30837, it was identified that the FE tests for the `table_registry` (and the `registry` section as a whole) could be improved. At the same time these tests could also be migrated to Jest to align with the general frontend testing objectives.","state":"closed","created_at":"2019-07-19T15:11:22.222Z","updated_at":"2019-10-18T12:22:19.418Z","closed_at":"2019-09-23T13:40:02.123Z","closed_by":{"id":502136,"username":"fatihacet","name":"Fatih Acet","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/502136/avatar.png","web_url":"https://gitlab.com/fatihacet"},"labels":["Deliverable","backstage [DEPRECATED]","devops::package","frontend","group::package registry","unit testing"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":4584738,"username":"nmezzopera","name":"NicolÃ² Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"}],"author":{"id":4087042,"username":"nkipling","name":"Nick Kipling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087042/avatar.png","web_url":"https://gitlab.com/nkipling"},"type":"ISSUE","assignee":{"id":4584738,"username":"nmezzopera","name":"NicolÃ² Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"user_notes_count":2,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30238","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30238","notes":"https://gitlab.com/api/v4/projects/278964/issues/30238/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30238/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30238","relative":"#30238","full":"gitlab-org/gitlab#30238"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699956,"iid":30235,"project_id":278964,"title":"`allow_failure` action for pipeline rules","description":"### Problem to solve\n\nBuilding on [flexible rules for CI pipelines](https://gitlab.com/gitlab-org/gitlab-ce/issues/60085), some teams will need a way to allow certain rules to fail without causing a pipeline failure. As of the MVC, `allow_failure:` is only settable at the job level, not per-rule.\n\n### Proposal\n\nWe will introduce a new rule action called `allow_failure`. This action defines the behavior of job after the rule is matched, allowing us to conditionally set allowed to fail in given conditions. This replaces job-level `allow_failure:`. The default value is `false`.\n\nExample:\n\n```yaml\nrules:\n  - changes: *.doc\n    allow_failure: true\n```\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)? --\u003e\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements --\u003e\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further guidelines: https://about.gitlab.com/handbook/engineering/quality/guidelines/test-engineering/ --\u003e\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n### Links / references","state":"closed","created_at":"2019-07-19T13:46:16.598Z","updated_at":"2022-07-12T12:37:49.706Z","closed_at":"2020-02-15T12:36:55.128Z","closed_by":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"labels":["Category:Continuous Integration","Product Vision FY20","Verify::P1","backend","devops::verify","direction","documentation","group::pipeline execution","missed-deliverable","missed:12.0","type::feature","workflow::production"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":2243533,"username":"jyavorska","name":"Jason Yavorska","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2243533/avatar.png","web_url":"https://gitlab.com/jyavorska"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":29,"merge_requests_count":0,"upvotes":14,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30235","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30235","notes":"https://gitlab.com/api/v4/projects/278964/issues/30235/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30235/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30235","relative":"#30235","full":"gitlab-org/gitlab#30235"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22991309,"iid":12941,"project_id":278964,"title":"Discovery: Add classifications and compliance selection to license list","description":"# Problem \nCurrently, in order to mark a license as blacklisted or approved (or unclassified), the admin user has to manually add the license and classification to the â€œ[License Management](https://gitlab.com/gitlab-examples/security/security-reports/-/settings/ci_cd)â€ settings area. This is a manual process and a significant burden on the user to set up. Also, consider projects that already have licenses in them, in which case the admin user would have no awareness of these already committed licenses when applying the classification in the setup area. \n\n# Proposal in-progress \nLeverage the license list (https://gitlab.com/gitlab-org/gitlab-ee/issues/13582), which displays already existing licenses in a project. By allowing the admin user the ability to apply a classification to the already committed license(s) in a project. Also, allow the admin the ability to proactively add new license(s) and corresponding classifications to the list. These classifications will then display on the non-maintainer view offering team awareness about compliance policies.\n\n##### Discovery progress:\n* [Discovery foundations work-in-progress:](https://docs.google.com/document/d/1VHhT75dHpP4eYBiMxrDtNkSfQdwpsnugT0wa0Tqm9wk/edit?usp=sharing) includes details about current UI, related work, and key considerations\n* UX/Product [discovery review](https://youtu.be/dli8e2aQyEI)\n* UX/Eng discovery kickoff [part 1](https://drive.google.com/file/d/1WNWoO3rDcnG3na7-WWDtDZ6qWReeaYXD/view?usp=sharing) and [2](https://drive.google.com/file/d/1sNgubUco5_upD_EkyCXkWvueQ6m-ada_/view?usp=sharing)\n* [Discussion](https://drive.google.com/file/d/1xUUQ8bb4prOEjv90SUAAT0DYa-FPXdjx/view?usp=sharing ) with @marin about internal LC build\n* Related UX research: https://gitlab.com/gitlab-org/ux-research/issues/360\n* [MVC review](https://drive.google.com/open?id=18dG-lFjAj81_160KOjS7W2Vb9tHzRaL_) with UX/BE/FE\n* Eng/UX implementation [planning session](https://drive.google.com/open?id=18dG-lFjAj81_160KOjS7W2Vb9tHzRaL_)\n* Team writes up needed implementation issues\n* Team reviewed outcome issues, if all looks good: closing issue\n\n### MVC under review\n\n\n| Developer view | Maintainer view | Add license and policy flow | `License-Check`\n| ------ | ------ | ------ | ------ | \n| ![developer](/uploads/ff37f985feb6fa5ef5da980ab45704cb/developer.png) | ![maintainer](/uploads/476eb3f2b7d329f16cd0869dcebdf98d/maintainer.png) | ![addpolicy2](/uploads/40f315998391f0aa9f2c4e446cc295f2/addpolicy2.png) | ![addcheck](/uploads/54919a7ab5fd0778803b7020a258c150/addcheck.png) |\n\n \u003cdetails\u003e\u003csummary\u003e :notebook: Design annotations and notes\u003c/summary\u003e\n\n#### [Developer view ](https://gitlab.com/gitlab-org/gitlab/uploads/d93ebcfcd230549d76fc82ef15e8aa8a/developer.png)\n\n**1a.** Developer view: list displays licenses detected in the project, with matching policy when defined by the admin. Notable changes to existing UI:\n* Subtext changes to â€œfindings based on the latest pipeline scan â€¢ 2 weeks agoâ€\n* Navigation displays â€œdetected in projectâ€ and â€œPoliciesâ€ tabs\n* Search ability by license name (already exists on list seen in Project\u003eSettings\u003eCI/CD\u003eLicense Compliance / using the same behavior: license name search)\n* Policy classifications are displayed, per admin entry\n\n**1b.** Developer view: list displays licenses that have policy assigned by projectâ€™s admin/maintainer. The UI is adopting the non-maintainer view seen in Project\u003eSettings\u003eCI/CD\u003eLicense Compliance\n* Subtext under header changes to â€œPolicies designated in this projectâ€\n* Name and policy column headers\n\n#### [Maintainer view](https://gitlab.com/gitlab-org/gitlab/uploads/d9c5cbea936f2c3e1d28e736c2cb1015/maintainer.png) \n\n**2a.** Maintainer or above UI view: list displays licenses detected in the project, with affiliated policy (if it assigned) and the ability to assign a policy to a license (by dropdown)\n* User has the ability to select policy, similar to on the policies tab (2b)\n* Licenses are classified as â€œunclassifiedâ€ by default\n* The drop down includes classification icons\n\n**2b.** Maintainer or above UI view: list displays policy, which is license added with a classification. \n* UI similar/mirrors the UI and behavior seen in the Project\u003eSettings\u003eCI/CD\u003eLicense Compliance\n* UI difference from existing list is the dropdown with the icon and the new classification name options\n* Removing it from Project\u003eSettings\u003eCI/CD\u003eLicense Compliance\n\n#### [Adding license and policy](https://gitlab.com/gitlab-org/gitlab/uploads/eaaf1ecbb8c0e9d76cf4a0c9127f7201/addpolicy2.png)\n\n**ii.** UI when prompted by user selecting â€œadd licenseâ€. This UI nearly mirrors the UI and behavior seen in the Project\u003eSettings\u003eCI/CD\u003eLicense Compliance (maintainer). \n\nUI notes to **ii** UI:  \n* Input title for adding license states: â€œAdd licenseâ€\n* Adding policy input title states: â€œSpecify policyâ€\n* The options for specifying policy includes â€œunclassifiedâ€\n* Ability to add a note, further details in this issue: https://gitlab.com/gitlab-org/gitlab/issues/10534#note_208540926 \n* CTA button text is â€œaddâ€\n\n\n**iii.** Once user selects license name and policy CTA become active when user  \n\n**iv.** Licensed added completed - Display includes note that user added to the policy\n\n#### [Activate `License-Check`](https://gitlab.com/gitlab-org/gitlab/uploads/54919a7ab5fd0778803b7020a258c150/addcheck.png)\n\nOverall, we are levering existing License-Check functionality. The â€œLicense-Checkâ€ CTA activates the modal view (seen in settings\u003egeneral\u003emerge request approvers (seen when clicking â€œeditâ€)\n* Removes the â€œnameâ€ field since itâ€™s already know\n* Updated header title\n* Added â€œlearn more about License-Checkâ€ and links to documentation\n* When active (1+ or more approvers required) confirmation is shown on LC UI\n* This issue: https://gitlab.com/gitlab-org/gitlab/issues/32149 could be replaced with this proposal\n\n\u003c/details\u003e\n\u003cdetails\u003e \u003csummary\u003e:thinking: Post MVC concepts and improvements to consider\u003c/summary\u003e\n\n| Displaying liabilities | List drawer | Applying classifications improvement | \n| ------ | ------ | ------ |\n| ![liabilities](/uploads/f3ea27119e030890cbb07e08b50537a0/liabilities.png) | ![drawer](/uploads/446d7820844e2bfeb934811f7339f2f2/drawer.png) | ![classifying_licenses](/uploads/bd4d69cd7c7b1e456a1b91a15a768022/classifying_licenses.png) |\n| Licenses have liabilities such as copyrights, notices, and giving credit to the author. This concept surfaces these items in the UI. Which simplifies the UX by displaying the most relevant data the user would otherwise collect one-by-one. This creates a compliance check list of items that need to be addressed. | This leverages the drawer component https://gitlab.com/gitlab-org/gitlab-design/issues/559, for improved UX when user is reviewing licenses. The drawer allows us to display more information, such as license details (vs user having to go to outside URL), displays liabilities, policy assigned (or if amainter lever specifying policy), and affiliated components. Issue: https://gitlab.com/gitlab-org/gitlab/issues/12682 (also could use on dependency list) | In the MVC, adding license classifications requires the user to do it one-by-one. For large projects, there will be a lot of licenses and the UI will need to simplify the process. This categorizes the licenses in a familiar UI (si), and the user may multi select and add license to the correct category quickly.  |\n\u003c/details\u003e\n\nCompatible matrices for various licenses:\n- http://gplv3.fsf.org/wiki/index.php/Compatible_licenses\n- https://en.wikipedia.org/wiki/License_compatibility\n- https://en.wikipedia.org/wiki/GNU_General_Public_License#Compatibility_and_multi-licensing\n- https://janelia-flyem.github.io/licenses.html\n\n\n\u003cdetails\u003e \u003csummary\u003eearly design iterations\u003c/summary\u003e\n\n| Developer UI view | Maintainer \u0026 owner (admin) UI view |\n| ------ | ------ |\n| ![3a](/uploads/1a7bd2302f927fe4efb7a4031343f3a6/3a.png) | ![3b](/uploads/a849e08d3af0c8cc5ec430301626c217/3b.png) |\n| view displays license and designated classifications (if any have been selected) | when admin views the list, user has the ability to select classification and/or add a new license. | \n\u003c/details\u003e\n\n\n# Discovery Outcomes\n\n### %\"12.5\" \n\n#### Refactor License Management UI to be more reusable https://gitlab.com/gitlab-org/gitlab/issues/34180\n\n#### Add classifications selection and policies to license compliance https://gitlab.com/gitlab-org/gitlab/issues/14061\n\n* This issue is the first step to adding policies to the license compliance list. It focuses mostly on changing the information architecture, that is merging the new license list with the existing LC section found in settings.\n* Closed as duplicate Make it possible to add a new license rule from the license list https://gitlab.com/gitlab-org/gitlab/issues/34171 \u0026 Add new policy tab to license list https://gitlab.com/gitlab-org/gitlab/issues/34179\n\n#### Update license classification names in merge request UI https://gitlab.com/gitlab-org/gitlab/issues/33868\n\n* This issue updates the license names seen in the MR, per this issue https://gitlab.com/gitlab-org/gitlab/issues/12937. https://gitlab.com/gitlab-org/gitlab/issues/14061 will update the new names in the policies section.\n\n\n#### Research follow up issue (*issue coming soon*)\n\n* Recommend scheduling for %12.5 or %12.6 TBD per issue write-up\n* Now that we've added policies and license detected in one section. Let's learn about user's perception and answer the following questions: what do they like? What doesn't make sense? What could be improved? What are their expectations with the classifications name?\n\n#### Include classification to license name in dependency list https://gitlab.com/gitlab-org/gitlab/issues/13137\n\n### %\"12.6\"\n\n#### Add policies to licenses detected in a project https://gitlab.com/gitlab-org/gitlab/issues/33870\n\n* Applies policy classification to licenses detected in projects, when applicable.\n* closed duplicate https://gitlab.com/gitlab-org/gitlab/issues/34143 Add classifications and compliance display and editing to license list \"detected in project\" \n\n#### Display 'License-Check' approval rule in the license compliance section https://gitlab.com/gitlab-org/gitlab/issues/32149\n\n* Displays the status of `License-Check` approval rule in the new license compliance section (user awareness when activated). Additionally, maintainer may enable/edit/on/off the feature directly from this section (same place that policies are added)\n* Closed duplicate https://gitlab.com/gitlab-org/gitlab/issues/34175 Activate and edit License Check rules\n\n#### LC: user awareness if setup configuration is not complete https://gitlab.com/gitlab-org/gitlab/issues/12685\n\n* This will be updated, per the results of this issue https://gitlab.com/gitlab-org/gitlab/issues/13992\n\n#### Add SPDX licenses to license compliance https://gitlab.com/gitlab-org/gitlab/issues/34209\n\n* Based on Mo's work on [license names](https://docs.google.com/document/d/15fNHI96M3awsuXxJfTo759Xjan0R2pvmoZ3dSgJ2zQ4/edit?usp=sharing), this expands the selections of available licenses a user may select to add to their policies.\n\n#### Discovery: obligations concepts https://gitlab.com/gitlab-org/gitlab/issues/34210\n\n* This issue is a discovery to explore how we can surface license obligations. Obligations are requirements that are written in license that when used must be followed. Such as copyright rules and disclosing source/author.\n\n#### Add search capability to License List https://gitlab.com/gitlab-org/gitlab/issues/34178","state":"closed","created_at":"2019-07-19T09:15:07.214Z","updated_at":"2021-04-08T00:45:10.164Z","closed_at":"2019-10-22T16:52:00.627Z","closed_by":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"labels":["Category:License Compliance","Deliverable","Enterprise Edition","UX","UX scorecard-rec","backend","devops::secure","frontend","group::composition analysis","product discovery [DEPRECATED]","type::feature"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},{"id":3614383,"username":"kmann","name":"Kyle Mann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614383/avatar.png","web_url":"https://gitlab.com/kmann"},{"id":4544240,"username":"cam.x","name":"Camellia X Yang","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7ea4de9b3092f62013d2cfd0c340811a?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam.x"}],"author":{"id":3614383,"username":"kmann","name":"Kyle Mann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614383/avatar.png","web_url":"https://gitlab.com/kmann"},"type":"ISSUE","assignee":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"user_notes_count":40,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12941","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12941","notes":"https://gitlab.com/api/v4/projects/278964/issues/12941/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12941/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12941","relative":"#12941","full":"gitlab-org/gitlab#12941"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2051,"epic":{"id":13704,"iid":2051,"title":"Licenses classification","url":"/groups/gitlab-org/-/epics/2051","group_id":9970,"human_readable_end_date":"Apr 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22989802,"iid":12937,"project_id":278964,"title":"Introduce license classifications","description":"### Problem \nLicenses currently are only classified as â€œapprovedâ€ or â€œblacklistâ€ classifications; however, there are different states to account for such as: newly detected, non-classified, one-time approved (but blacklisted). These states are not explicitly classified and/or title to the user. Also, clarify the classifications, example \"approved\" may easily get confused with our approvals feature (as both are seen in the MR widget). Or \"Blacklist\" suggests a license will not be usable, but currently, we do not prohibit blacklisted licenses. (align language with expectations)   \n\n### Solution\nThe following are terms that describe license classifications seen in the [MR](https://gitlab.com/gitlab-org/gitlab/issues/12530) and [license list](https://gitlab.com/gitlab-org/gitlab/issues/13582) UI: \n\n* **Uncategorized**, admin has not selected classification \n* **Allowed**, admin has classified license as acceptable\n* **Allow**, used in the call-to-action seen in the MR (admin view) to classify license as Allowed\n* **Denied**, project participant views this classification when admin classified license as not allowed\n* **Deny**, used in the call-to-action seen in the MR (admin view) to classify license as unacceptable\n\n##### Classifications for future iterations\n\n* **One-time approved** or **Out of policy**, sub-classification of denied: in the case that a license has been denied, but was approved in an MR by the [approval feature](https://gitlab.com/gitlab-org/gitlab/issues/13067) (designated license approver group) \n* **Flag for review**, case where a user is unsure what to do: then has ability to flag a license for admin user to review","state":"closed","created_at":"2019-07-19T08:25:55.465Z","updated_at":"2021-04-03T08:34:32.997Z","closed_at":"2019-09-25T17:10:29.146Z","closed_by":{"id":3614383,"username":"kmann","name":"Kyle Mann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614383/avatar.png","web_url":"https://gitlab.com/kmann"},"labels":["Category:Dependency Scanning","Enterprise Edition","GitLab Ultimate","UX","UX scorecard-rec","backend","devops::secure","group::composition analysis","product discovery [DEPRECATED]"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},{"id":3614383,"username":"kmann","name":"Kyle Mann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614383/avatar.png","web_url":"https://gitlab.com/kmann"}],"author":{"id":3614383,"username":"kmann","name":"Kyle Mann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614383/avatar.png","web_url":"https://gitlab.com/kmann"},"type":"ISSUE","assignee":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"user_notes_count":26,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12937","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12937","notes":"https://gitlab.com/api/v4/projects/278964/issues/12937/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12937/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12937","relative":"#12937","full":"gitlab-org/gitlab#12937"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3478,"epic":{"id":61642,"iid":3478,"title":"Replace use of whitelist with allowlist and blacklist with denylist","url":"/groups/gitlab-org/-/epics/3478","group_id":9970,"human_readable_end_date":"Aug 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24699909,"iid":30220,"project_id":278964,"title":"Need help with Authentication and Authorization question answer help for customer","description":"Need help with Authentication and Authorization question answer for customer","state":"closed","created_at":"2019-07-19T02:38:03.429Z","updated_at":"2019-11-25T17:49:23.952Z","closed_at":"2019-11-25T17:49:23.908Z","closed_by":{"id":3695796,"username":"adesai1","name":"Ana Desai","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3695796/avatar.png","web_url":"https://gitlab.com/adesai1"},"labels":["Manage [DEPRECATED]","auto updated","devops::manage","group::authentication and authorization"],"milestone":null,"assignees":[],"author":{"id":3695796,"username":"adesai1","name":"Ana Desai","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3695796/avatar.png","web_url":"https://gitlab.com/adesai1"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-07-22","confidential":false,"discussion_locked":true,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30220","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":10,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30220","notes":"https://gitlab.com/api/v4/projects/278964/issues/30220/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30220/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30220","relative":"#30220","full":"gitlab-org/gitlab#30220"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24933602,"iid":32222,"project_id":278964,"title":"Use artifact relative URLs to fetch Knapsack and Flaky tests metadata","description":"Our CI uses the Knapsack gem to split tests and run them in parallel, considering the running time of each individual spec test.\nIn order to have accurate timings, we save the execution metadata in a remote S3, which we use to retrieve on new builds.\n\nWhen a new pipeline is triggered, we trigger the `retrieve-tests-metadata` which downloads from this remote S3, the test metadata generated from `master`. It is then saved as an artifact which is consumed by the next steps.\n\nWhen in master, we have an additional last step: `update-tests-metadata`, which will execute `scripts/merge-reports` and merge all knapsack reports and push it back to S3.\n\nAll of this can be seen here: [.gitlab/ci/test-metadata.gitlab-ci.yml](.gitlab/ci/test-metadata.gitlab-ci.yml)\n\nConsidering https://about.gitlab.com/handbook/engineering/#dogfooding-antipatterns we shouldn't be using an external S3 for that, but our own artifacts. I believe when we implemented this solution, it didn't have the needed capabilities. Now it does:\n\nWe can use this relative URL: https://docs.gitlab.com/ee/user/project/pipelines/job_artifacts.html#downloading-the-latest-artifacts\n\nhere is one example how to retrieve latest knapsack report from master: `https://gitlab.com/gitlab-org/gitlab/-/jobs/artifacts/master/raw/knapsack/report-master.json?job=update-tests-metadata`\n\nThe same idea can be used for our `rspec_flaky` usage. It relies on the same jobs and the same S3 and pattern.","state":"closed","created_at":"2019-07-19T01:22:43.244Z","updated_at":"2022-03-16T11:57:41.278Z","closed_at":"2020-11-30T14:28:53.120Z","closed_by":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Engineering Productivity","ep::pipeline","maintenance::pipelines","type::maintenance","workflow::in review"],"milestone":{"id":1233757,"iid":54,"group_id":9970,"title":"13.7","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:43:14.893Z","updated_at":"2022-04-13T14:51:12.240Z","due_date":"2020-12-17","start_date":"2020-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/54"},"assignees":[{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":2293,"username":"brodock","name":"Gabriel Mazetto","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2293/avatar.png","web_url":"https://gitlab.com/brodock"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":8,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/32222","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/32222","notes":"https://gitlab.com/api/v4/projects/278964/issues/32222/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/32222/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#32222","relative":"#32222","full":"gitlab-org/gitlab#32222"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699902,"iid":30217,"project_id":278964,"title":"Remove `Notify#recipient` in favor of `User#notification_email_for`","description":"https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/30907 refactors `Notify#recipient` so that all the logic is in `User#notification_email_for`.\n\nWe should just use `User#notification_email_for` directly because a lot of times we already have a `User` object so doing `User.find(recipient_id)` is unnecessary.\n\nThe method name is also clearer.","state":"closed","created_at":"2019-07-19T01:15:24.345Z","updated_at":"2022-05-19T16:06:36.737Z","closed_at":"2019-09-30T11:39:26.726Z","closed_by":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"labels":["Community contribution","backend","backstage [DEPRECATED]","devops::plan","group::project management","maintenance::refactor","workflow::in dev"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":4353908,"username":"briankabiro","name":"Brian Kabiro","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4353908/avatar.png","web_url":"https://gitlab.com/briankabiro"}],"author":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"type":"ISSUE","assignee":{"id":4353908,"username":"briankabiro","name":"Brian Kabiro","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4353908/avatar.png","web_url":"https://gitlab.com/briankabiro"},"user_notes_count":12,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30217","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30217","notes":"https://gitlab.com/api/v4/projects/278964/issues/30217/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30217/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30217","relative":"#30217","full":"gitlab-org/gitlab#30217"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22980414,"iid":12931,"project_id":278964,"title":"Engineering Discovery: Define performance metrics for Security Products","description":"### Problem to solve\r\n\r\nThe Security Products are currently blindly running and we have no way to validate the performance of our tools. \r\n\r\n### Intended users\r\n\r\nMember from ~\"devops::secure\" stage\r\n\r\n### Proposal\r\n\r\nIn order to validate the performance of our tools and avoid regression, we first need to define which metrics we want to track. Implementation and integration within QA are out of scope and will be delegated to other issues of [the epic](https://gitlab.com/groups/gitlab-org/-/epics/1617).\r\n\r\n\r\n### Conclusion\r\n\r\n**:white_check_mark: Sub-Epic 1: tools and analyzers** - ~\"group::composition analysis\" -  https://gitlab.com/groups/gitlab-org/-/epics/2093\r\n- Scan completion time on a specific project (assuming we have 1 per language/scanner) =\u003e I understand this as the time of execution of the analyzer command itself, after the CI has downloaded the image and launched the docker container. By doing this we can add that check to our QA pipeline, after extracting that value. We can probably try to get the whole job execution time too, but this will probably be impossible to integrate into our QA. Can be probably monitored differently though.\r\n- size of artifacts =\u003e This can be integrated into our QA so we avoid increasing the size of the report like crazy after an update. \r\n- size of the docker images we release. I'm adding this one as to me it can represent a cost (data quotas) and impact performance (time to download).\r\n\r\n**Sub-Epic 2: Rails side for ~\"group::composition analysis\"** https://gitlab.com/groups/gitlab-org/-/epics/2335\r\n* Load time of a Dependency List\r\n* Load times of Security Reports in pipeline view\r\n* Load times of Security Reports in MR view\r\n* Also test MR page load time with significant security reports\r\n\r\n**Sub-Epic 3: Rails side for ~\"group::dynamic analysis\"** https://gitlab.com/groups/gitlab-org/-/epics/2336\r\n* Load time of Group Security Dashboard\r\n* Load time of Project Security Dashboard\r\n* Also test filters impact\r\n\r\n\r\n**Sub-Epic 4: Rails side for ~\"group::static analysis\"** https://gitlab.com/groups/gitlab-org/-/epics/2337\r\n- Vulnerability Feedback creation/load time (dismissal, issues, MR)\r\n- First-class vulnerability load time (when we have them)\r\n\r\n### Links / references","state":"closed","created_at":"2019-07-19T00:57:59.425Z","updated_at":"2019-12-16T20:46:43.567Z","closed_at":"2019-12-16T20:46:43.521Z","closed_by":{"id":3913516,"username":"NicoleSchwartz","name":"Nicole Schwartz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3913516/avatar.png","web_url":"https://gitlab.com/NicoleSchwartz"},"labels":["Enterprise Edition","backend","backstage [DEPRECATED]","devops::secure","group::composition analysis","missed-deliverable","missed:12.2","missed:12.3","missed:12.4","missed:12.5","product discovery [DEPRECATED]","workflow::planning breakdown"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},{"id":3913516,"username":"NicoleSchwartz","name":"Nicole Schwartz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3913516/avatar.png","web_url":"https://gitlab.com/NicoleSchwartz"}],"author":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"type":"ISSUE","assignee":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"user_notes_count":29,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12931","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12931","notes":"https://gitlab.com/api/v4/projects/278964/issues/12931/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12931/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12931","relative":"#12931","full":"gitlab-org/gitlab#12931"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1617,"epic":{"id":9876,"iid":1617,"title":"Performance metrics for Security Products","url":"/groups/gitlab-org/-/epics/1617","group_id":9970,"human_readable_end_date":"Jan 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22980292,"iid":12930,"project_id":278964,"title":"Engineering Discovery: reconsider Gemnasium client/server architecture","description":"### Problem to solve\n\nMaintaining the current architecture of Gemnasium is costly and without the necessary resources it also prevents us to improve the tool. On top of that, the current features provided by Gemnasium can possibly be achieved without that architecture. \n\nPrevious discussion about Gemnasium vision: https://docs.google.com/document/d/1pWP7pbSeoKwpcQ4lHAQ-wdpOhWuEVrNEl96Kq0ljYkY/edit#heading=h.vx2ew0wta8dm\n\n### Intended users\n\n~\"group::composition analysis\" \n\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\n\nCurrent architecture presents some **limitations**:\n- we cannot provide security advisories for packages that are published to **private registries** or alternative public registries we don't support yet.\n   - private RubyGems or NPM server\n   - public maven registry other than maven central ([example](https://gitlab.com/gitlab-org/security-products/gemnasium-db/issues/39#note_191713249))\n- we cannot provide security advisories for **removed packages** (e.g. [a yanked gem](https://gitlab.com/gitlab-org/security-products/gemnasium-db/merge_requests/51#note_191614539))\n- we cannot have security advisories for **yanked versions** (like a [gem containing a backdoor](https://gitlab.com/gitlab-org/security-products/gemnasium-db/issues/32))\n\nCurrent architecture has a **maintenance cost**:\n- to **maintain the advisories** that get new affected or published versions after first being published\n  - affected ranges have to be re-evaluated to apply to new affected versions\n  - fixed versions cannot be set in the advisory if the package version is not yet available\n- to monitor, secure, and update the **GCP installation** (Google Cloud Platform)\n- to upgrade the **package syncers** used to synchronize package metadata with the various package registries currently supported, like rubygems.org or pypi.org; they change over time and we've got to keep up with these changes\n- to **grant access** to admins, keep track of the permissions, revoke access when needed\n\nOn top of resolving above issues, leveraging directly the gemnasium-db repository would provide some other **benefits**:\n- a simpler approach for **air gaped configuration**, no need to implement a sync mechanism with the Gemnasium server, the Git repository already provides the necessary tools\n- gemnasium-db can be **forked**, allowing customers to maintain their own security advisories on top of what's available in gemnasium-db\n- a **simpler workflow** since merging a MR in gemnasium-db as the immediate effect of publishing the advisory; there's no extra step, and there's no possible synchronization issues b/w gemnasium-db and the Gemnasium relational DB\n\nAlso, directly leveraging the gemnasium-db repository opens **new possibilities** by making some features a lot cheaper to implement:\n- add **new fields** the vulnerability, like the [severity](https://gitlab.com/gitlab-org/gitlab-ee/issues/8213)\n- support vendor package registries - this is a common need for PHP and Java\n- support **new package managers** and languages, like [Go](https://gitlab.com/gitlab-org/gitlab-ee/issues/7132)\n\n**Important:** the goal here is not to throw away the server-side code, but to bypass it until we re-integrate or implement new features that need it.\n\n### Proposal\n\nConsider modifying the [Gemnasium client](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium) to use the YAML files of the [gemnasium-db repository](https://gitlab.com/gitlab-org/security-products/gemnasium-db) instead of the API served on https://deps.sec.gitlab.com.\n\n- [x] Make sure existing feature and short/mid-term ones can all be achieved without the server-side; this could be achieved by prototyping a fork of [analyzers/gemnasium](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium) that uses [gemnasium-db](https://gitlab.com/gitlab-org/security-products/gemnasium-db) instead of connection to the Gemnasium API.\n  - supports Dependency Scanning\n  - supports Dependency List\n  - supports Auto-Remediate (yarn)\n- [x] Evaluate the cost of such a transition See https://gitlab.com/gitlab-org/gitlab-ee/issues/14630\n  - fits in one iteration\n- [x] Consider de-provisioning the Gemnasium micro-services infrastructure. This implies to make sure all versions of the analyzer migrates to the new arch (on self-managed instances using an old version of GitLab). See https://gitlab.com/gitlab-org/gitlab-ee/issues/14692\n- [x] Find out what mid/long-term features would benefit from the Gemnasium Server, and how Gemnasium Server could fit in a new architecture where [gemnasium-db](https://gitlab.com/gitlab-org/security-products/gemnasium-db) is the SST for the security advisories.\n- [x] Documentation migration path and back-port strategy\n\n**What Gemnasium Server used to provide?**\n\nThe Gemnasium Server (API, postgresql DB, services) used to run Gemnasium.com.\n\nGemnasium.com had two important features that are currently missing in GitLab:\n- **package metadata**; in the project dependency list, Gemnasium.com displayed detailed information about the package and package version \n- **release notification**; Gemnasium.com notified users about new versions of the packages their projects depend on\n\nTechnically, these features relied on micro-services responsible for tracking the package registries (like rubygems.org) and automatically fetching package metadata. Gemnasium Server relies on a messaging system (NSQ) to react to new package or version being published, fetch its metadata, and notify users.\n\n**Why are these features missing?**\n\nThough **package metadata** and **release notification** could exist in GitLab Dependency Scanning, they have to be re-implemented and even re-designed. That's because the technical context has dramatically changed; the architecture of GitLab Dependency Scanning is really different from the one of Gemnasium.com. To illustrate, the Gemnasium DB no longer has data relative to the users and their projects; this data now belongs to the GitLab DB, and we can't simply JOIN user projects (in GitLab DB) with updated packages (in Gemnasium RDB).\n\n**Can Gemnasium Server complement gemnasium-db?**\n\nYes. There could be a separation of concern:\n- Gemnasium Server collects package metadata\n- gemnasium-db is the vulnerability database\n\nWe may need to make the two communicate to implement some advanced features, like vulnerability detection in new releases: the Gemnasium Server would detect that a new package version is vulnerability fix, and it would publish a MR in gemnasium-db, either directly or via an intermediary tool.\n\n**What about package metadata?**\n\nGitLab has a Dependency List but it shows no metadata for the packages and their versions. The missing data is exposed by the Gemnasium API but the Gemnasium analyzer/client doesn't fetch it (and these API endpoints are not public right now). But making the Gemnasium analyzer fetch the data seems like a bad idea because it would result in huge Dependency Scanning reports. A better approach would be to make the Rails backend merge this data when building the Dependency List. The backend would get the data from the Gemnasium Server - to be designed.\n\n**What about user notifications?**\n\nGitLab can already notify its users, and its DB contains information about the users, projects, and dependencies. The Rails backend needs to be notified by the Gemnasium Server about new package versions, so that it can react and ultimately notify the users - this would be similar to what used to happen within the Gemnasium Server itself, but adapted to a new technical environment.\n\n**Are we loosing the resources we've put into Gemnasium Server?**\n\nNo. We're changing the purpose of Gemnasium Server: its task is to grab package metadata, and to notify GitLab about new package versions. But it doesn't host the vulnerability DB anymore, and probably won't have to interact with it in the short/medium-term.\n\n**Don't we need a RDBMS for performance reasons?*\n\nbundler-audit only relies on YAML files, and it's proven to work.\n\nAlso, we can later on optimize the Gemnasium Analyzer using a RDBMS embedded in the Docker image. For instance, we could create and feed a sqlite DB when building the image, and the Gemnasium Analyzer would be able to query this DB at run-time.\n\n**What's the migration path? How to back-port?**\n\nSince [gemnasium-db](https://gitlab.com/gitlab-org/security-products/gemnasium-db) is becoming the SST, all supported versions of GitLab must upgrade to a version of Gemnasium that uses [gemnasium-db](https://gitlab.com/gitlab-org/security-products/gemnasium-db), otherwise they wouldn't get the latest advisories. Ultimately versions of GitLab using the Gemnasium Server will stop functioning when the Gemnasium GCP installation is removed.\n\nGitLab %11.7 and older [use Dependency Scanning 2](https://gitlab.com/gitlab-org/security-products/dependency-scanning/blob/v2.3.3/.gitlab-ci.yml#L165) (latest version of 2.x branch), which uses Gemnasium 2 (latest version of 2.x branch), so the change will be effective as a new version of Gemnasium 2 is published. There's no need to back-port anything.\n\nGitLab %11.6 [uses Dependency Scanning 1](https://gitlab.com/gitlab-org/security-products/dependency-scanning/blob/v1/.gitlab-ci.yml#L137) (latest version of 1.x branch), which uses Gemnasium 1. A back-port is needed but the cost seems reasonable.\n\nGitLab %11.5 and older use versions of DS that pre-date the Docker-based architecture. There Gemnasium exists in the from of a Ruby script called [gemnasium.rb](https://gitlab.com/gitlab-org/security-products/dependency-scanning/blob/11-5-stable/lib/analyzers/gemnasium.rb). In this context, the cost of the back-port seems prohibitive.\n\n### Links / references\n\n### Outcome\n- action items / results should be populated in https://gitlab.com/gitlab-org/gitlab-ee/issues/14630 and https://gitlab.com/gitlab-org/gitlab-ee/issues/14692","state":"closed","created_at":"2019-07-19T00:36:46.338Z","updated_at":"2022-09-06T15:40:31.258Z","closed_at":"2019-09-12T11:36:28.666Z","closed_by":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","backend","backstage [DEPRECATED]","devops::secure","group::composition analysis","product discovery [DEPRECATED]"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"}],"author":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"type":"ISSUE","assignee":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"user_notes_count":31,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12930","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":5},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"5 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12930","notes":"https://gitlab.com/api/v4/projects/278964/issues/12930/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12930/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12930","relative":"#12930","full":"gitlab-org/gitlab#12930"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1914,"epic":{"id":12353,"iid":1914,"title":"Drop Gemnasium server side architecture","url":"/groups/gitlab-org/-/epics/1914","group_id":9970,"human_readable_end_date":"Dec 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22978817,"iid":12927,"project_id":278964,"title":"Update eslint analyzer to 6.4.0","description":"We use eslint for one our analyzers in SAST, and are currently shipping v5.12.1 of this tool. [Version 6.4.0 shipped 13 September, 2019](https://www.npmjs.com/package/eslint/v/6.4.0). We need to update to the latest version.","state":"closed","created_at":"2019-07-18T21:45:15.992Z","updated_at":"2020-04-22T13:38:53.975Z","closed_at":"2020-04-22T00:43:10.084Z","closed_by":{"id":32707,"username":"rossfuhrman","name":"rossfuhrman","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/32707/avatar.png","web_url":"https://gitlab.com/rossfuhrman"},"labels":["Category:SAST","Deliverable","Enterprise Edition","SAST: Common Need","SAST: Scanner Update","backend","devops::secure","group::static analysis","missed-deliverable","missed:12.4","missed:12.5","missed:12.6","type::feature","workflow::verification"],"milestone":{"id":1104429,"iid":46,"group_id":9970,"title":"12.10","description":"https://about.gitlab.com/releases/2020/04/22/gitlab-12-10-released","state":"closed","created_at":"2019-12-20T15:15:53.243Z","updated_at":"2020-10-08T12:00:39.852Z","due_date":"2020-04-17","start_date":"2020-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/46"},"assignees":[{"id":32707,"username":"rossfuhrman","name":"rossfuhrman","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/32707/avatar.png","web_url":"https://gitlab.com/rossfuhrman"}],"author":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"type":"ISSUE","assignee":{"id":32707,"username":"rossfuhrman","name":"rossfuhrman","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/32707/avatar.png","web_url":"https://gitlab.com/rossfuhrman"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12927","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12927","notes":"https://gitlab.com/api/v4/projects/278964/issues/12927/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12927/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12927","relative":"#12927","full":"gitlab-org/gitlab#12927"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22978753,"iid":12926,"project_id":278964,"title":"Update bandit analyzer to v1.6.2","description":"We use bandit for one our analyzers in SAST, and are currently shipping v1.5.1 of this tool. [Version 1.6.2 shipped 1 July, 2019](https://pypi.org/project/bandit/1.6.2/). We need to update to the latest version.","state":"closed","created_at":"2019-07-18T21:38:56.620Z","updated_at":"2020-04-17T15:34:20.890Z","closed_at":"2019-08-13T02:08:34.512Z","closed_by":{"id":4221051,"username":"scardoso","name":"Stacey","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4221051/avatar.png","web_url":"https://gitlab.com/scardoso"},"labels":["Enterprise Edition","backend","backstage [DEPRECATED]","devops::secure","group::static analysis"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":4221051,"username":"scardoso","name":"Stacey","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4221051/avatar.png","web_url":"https://gitlab.com/scardoso"}],"author":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"type":"ISSUE","assignee":{"id":4221051,"username":"scardoso","name":"Stacey","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4221051/avatar.png","web_url":"https://gitlab.com/scardoso"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12926","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12926","notes":"https://gitlab.com/api/v4/projects/278964/issues/12926/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12926/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12926","relative":"#12926","full":"gitlab-org/gitlab#12926"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699891,"iid":30211,"project_id":278964,"title":"Improve design for multiple discussions per line in merge request diffs","description":"### Problem to solve\n\nThe initial proposal for gitlab-ce#32452 created confusion around why there are two boxes underneath each other where users can either reply or start a new thread.\n\n![image](/uploads/667ffe70a76fc9a87ab812cb77da63eb/image.png)\n\n### Proposal\n\nIn order to make `Reply` and `Start a new thread` more visually distinctive, we could switch out the bottom avatar + input field pattern for a button.\n\n| One thread | Three threads | \n| ------ | ------ |\n| ![image](/uploads/ed3768c799893e660e7b75ba6d80e0de/image.png) | ![image](/uploads/c962e892171afc9cdf10dc28d2ab1ab8/image.png) |\n\nUpdate: The UI text should actually be **\"Start another thread\"** instead of \"Start a new thread\".\n\n@jramsay @annabeldunstone @winh @brendan","state":"closed","created_at":"2019-07-18T16:50:37.480Z","updated_at":"2022-12-21T12:02:37.839Z","closed_at":"2022-12-19T20:04:38.725Z","closed_by":{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"},"labels":["Category:Code Review Workflow","Code Review FY23-Q3 OKR::triaged","Deliverable","SUS::Impacting","Technical Writing","UI polish","UX","UX FY21-Q4","[deprecated] Accepting merge requests","devops::create","docs::feature","documentation","feature::enhancement","frontend","group::code review","merge requests","priority::3","section::dev","severity::4","type::bug","vintage","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"}],"author":{"id":3688647,"username":"mvanremmerden","name":"Marcel van Remmerden","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4f46ed49b87eab9e74f20e0e25b36d0f?s=80\u0026d=identicon","web_url":"https://gitlab.com/mvanremmerden"},"type":"ISSUE","assignee":{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"},"user_notes_count":24,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30211","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30211","notes":"https://gitlab.com/api/v4/projects/278964/issues/30211/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30211/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30211","relative":"#30211","full":"gitlab-org/gitlab#30211"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22965833,"iid":12921,"project_id":278964,"title":"Bulk editing group issues only works with owner access level","description":"### Summary\n\nBulk editing issues at a group level should behave like bulk editing at a project level https://docs.gitlab.com/ee/user/project/bulk_editing.html#bulk-editing-issues-and-merge-requests and be available for permission level of `Reporter` or higher.\n\nCurrently, it's only working for the `Owner` permission level and will display a `404 (Not Found)` error for lower levels.\n\n### Steps to reproduce\n\n- Sign in as a user with permission level `Reporter`, `Developer`, or `Maintainer` for a certain group.\n- Go that group's list of issues, select multiple and apply a milestone in the sidebar\n- This should display an authorization error \n\n### Example Project\n\n(If possible, please create an example project here on GitLab.com that exhibits the problematic behavior, and link to it here in the bug report)\n\n(If you are using an older version of GitLab, this will also determine whether the bug is fixed in a more recent version)\n\n### What is the current *bug* behavior?\n\nIt's not possible to update multiple group issues with access level `Reporter`, `Developer` or `Maintainer`\n\n### What is the expected *correct* behavior?\nI should be possible to update multiple group issues with access level `Reporter` or higher.\n\n(What you should see instead)\n\n### Relevant logs and/or screenshots\n\n![Screenshot_2019-07-18_at_13.44.36](/uploads/b6aa68d98c58b58dbe3cddcb8e58fef4/Screenshot_2019-07-18_at_13.44.36.png)\n\n### Output of checks\n\n(If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com)\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\nRemoving `:authorize_admin_group!` from `Groups::BulkUpdateController` as we are already checking for permissions before calling method `bilk_update` here https://gitlab.com/gitlab-org/gitlab-ee/blob/master/app/controllers/concerns/issuable_actions.rb#L9","state":"closed","created_at":"2019-07-18T12:53:17.261Z","updated_at":"2022-05-19T16:06:26.713Z","closed_at":"2019-08-22T17:41:19.235Z","closed_by":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"labels":["Enterprise Edition","GitLab Premium","backend","devops::plan","group::project management","issues","priority::2","severity::2","type::bug"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12921","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12921","notes":"https://gitlab.com/api/v4/projects/278964/issues/12921/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12921/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12921","relative":"#12921","full":"gitlab-org/gitlab#12921"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22957831,"iid":12917,"project_id":278964,"title":"API Dependency List - usage ping","description":"Mesure [usage](https://gitlab.com/gitlab-org/gitlab-ee/issues/10078#what-does-success-look-like-and-how-can-we-measure-that) of Dependency List API endpoint `GET /projects/:id/dependencies` by counting number of API calls.\n\nTo track usage of this endpoint is recommended to use [Gitlab::Tracking event](https://docs.gitlab.com/ee/development/event_tracking/backend.html) \n\n### Implementation plan\n\n1. Add Gitlab::Tracking into API endpoint\n2. Test it","state":"closed","created_at":"2019-07-18T08:27:36.258Z","updated_at":"2019-12-24T10:55:07.871Z","closed_at":"2019-12-17T19:46:05.226Z","closed_by":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"labels":["Deliverable","Enterprise Edition","backend","dependency list","devops::secure","group::composition analysis","missed-deliverable","missed:12.5","type::feature","workflow::verification"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"}],"author":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"type":"ISSUE","assignee":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12917","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12917","notes":"https://gitlab.com/api/v4/projects/278964/issues/12917/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12917/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12917","relative":"#12917","full":"gitlab-org/gitlab#12917"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":445,"epic":{"id":1273,"iid":445,"title":"Product Metrics for Secure and Defend section","url":"/groups/gitlab-org/-/epics/445","group_id":9970,"human_readable_end_date":"Sep 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22943093,"iid":12908,"project_id":278964,"title":"Add a tooltip to Add Designs button to Inform users of Image Replacements","description":"### Problem to solve\n\nWhen a user uploads a design with the same filename as an already existing design the existing image is replaced and the new one is uploaded as a new version of that file.\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\nPersonas can be found at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\nAnyone uploading designs to issues like Product Designers or Product Managers working to describe features for implementation.\n\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\n\nCurrently designs are versioned on each upload and by uploading a file with the same name, the image is replaced.\n\n![2019-07-17_14.36.46](/uploads/02d7b98991fb17b8a14f111d1ad12012/2019-07-17_14.36.46.gif)\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\nA [tooltip](https://design.gitlab.com/components/tooltips) should be added to the Add Designs button that informs the user of what may happen.\n\n### Mockup by @jareko \n\n![Screen_Shot_2019-07-26_at_3.18.50_PM](/uploads/b85458da1705c2e5fa85b54000f2df66/Screen_Shot_2019-07-26_at_3.18.50_PM.png)\n\nText: `Adding a design with the same filename replaces the file in a new version.`\n\n\n### Links / references","state":"closed","created_at":"2019-07-17T19:48:27.873Z","updated_at":"2020-12-10T19:00:29.710Z","closed_at":"2019-09-17T10:59:39.325Z","closed_by":{"id":853414,"username":"andr3","name":"AndrÃ© LuÃ­s","state":"active","avatar_url":"https://secure.gravatar.com/avatar/241e39726efb512a29621070ccf26a90?s=80\u0026d=identicon","web_url":"https://gitlab.com/andr3"},"labels":["Category:Design Management","Enterprise Edition","GitLab Premium","Stretch","devops::plan","direction","frontend","group::product planning","type::feature","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"}],"author":{"id":2935693,"username":"phikai","name":"Kai Armstrong","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2c5d6a63b41cbeb3ea4cccda82e758e1?s=80\u0026d=identicon","web_url":"https://gitlab.com/phikai"},"type":"ISSUE","assignee":{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12908","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12908","notes":"https://gitlab.com/api/v4/projects/278964/issues/12908/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12908/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12908","relative":"#12908","full":"gitlab-org/gitlab#12908"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":660,"epic":{"id":2542,"iid":660,"title":"Versioned designs with point of interest discussions","url":"/groups/gitlab-org/-/epics/660","group_id":9970,"human_readable_end_date":"Mar 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22941878,"iid":12905,"project_id":278964,"title":"Support Design Management links when adapting links in Markdown","description":"### Problem to solve\n\nSharing links to Designs is an important part of collaboration and how users can surface Designs to other issues. Currently, when sharing links GitLab doesn't recognize the new Designs tab or Design Uploads. This prevents discoverability and collaboration on designs for users.\n\n### Intended users\n\nAny users who use Markdown (issues/MRs descriptions, comments, MR reviews, etc.) and collaborate on designs with other users.\n\n### Further details\n\nWhen users link to the Design tab or individual designs, the GitLab markdown processors don't filter the links properly. This makes it hard for users to share links and direct other users to the appropriate area.\n\nThe links pointing to the Design tab and individual Designs within Design Management are being filtered in this way:\n\nDirectly to Designs:\n\nhttps://gitlab.com/gitlab-org/gitlab-ee/issues/12905#note_200916466 -\u003e The tab is not focused.\n\nTo an Individual Design:\n\nhttps://gitlab.com/gitlab-org/gitlab-ee/issues/12905#note_200916893 -\u003e The app throws an error `Could not find design, please try again.`\n\nGitLab currently supports deep linking for other types of links, like the `Changes` tab in Merge Requests:\n\nhttps://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14722/diffs?view=inline#diff-content-2b8546a0bacce548c1d0cfcce5686660b65bb066\n\n### Proposal\n\nThe markdown issue filters should be updated to support links for Design Management. Adding a rule for the `issue_reference_filter.rb`, we should be able to have something like:\n\n* [#12345 (designs)]() \n* [#12345 (design)]() --\u003e This one will be moving to a new issue\n\n#### Interaction with Todos\n\nWhen a user is mentioned in an annotation of a design, they receive a Todo that mentions the individual design. We sure ensure that the same reference for the design is displayed here as when linking to the design in markdown.\n\n### What does success look like, and how can we measure that?\n\nPasting links to the designs in design management will not generate broken links in markdown.\n\n### Feature flag\n\nThis should be behind a feature flag, since it adds new queries to the GFM pipeline.\n\nThis feature flag is: `design_management_reference_filter_gfm_pipeline`\n\n### Documentation\n\nThe following documentation needs to be updated:\n * document new feature flag, explaining what it does and how to configure it\n * document the new reference type, explaining where it can be used\n\n### Links / references","state":"closed","created_at":"2019-07-17T19:07:32.796Z","updated_at":"2020-12-10T19:00:30.925Z","closed_at":"2020-03-17T17:00:22.459Z","closed_by":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"labels":["Category:Design Management","Deliverable","Enterprise Edition","GitLab Premium","UX","backend","devops::plan","direction","documentation","group::product planning","missed-deliverable","missed:12.3","missed:12.4","missed:12.5","missed:12.6","missed:12.7","missed:12.8","type::feature","workflow::verification"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"}],"author":{"id":853414,"username":"andr3","name":"AndrÃ© LuÃ­s","state":"active","avatar_url":"https://secure.gravatar.com/avatar/241e39726efb512a29621070ccf26a90?s=80\u0026d=identicon","web_url":"https://gitlab.com/andr3"},"type":"ISSUE","assignee":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"user_notes_count":60,"merge_requests_count":3,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12905","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12905","notes":"https://gitlab.com/api/v4/projects/278964/issues/12905/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12905/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12905","relative":"#12905","full":"gitlab-org/gitlab#12905"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":660,"epic":{"id":2542,"iid":660,"title":"Versioned designs with point of interest discussions","url":"/groups/gitlab-org/-/epics/660","group_id":9970,"human_readable_end_date":"Mar 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24699845,"iid":30189,"project_id":278964,"title":"Simplify error handling for UserCommitFiles RPC","description":"Follow-up from https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/29598#note_192539828\n\n- [ ] Extend the `GRPC::InvalidArgument` on the Gitaly side with a field to specify *which* argument is invalid\n- [ ] Use that field to format a custom error message on the Rails side in `Gitlab::Git::WrapsGitalyErrors`, and if the field is not present return a generic message (e.g. `Invalid argument`, or `Bad Request`)\n- [ ] Remove the commit existence validation added in https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/29598","state":"closed","created_at":"2019-07-17T18:10:23.089Z","updated_at":"2022-03-30T11:25:24.642Z","closed_at":"2022-03-30T11:25:24.628Z","closed_by":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"labels":["devops::create","group::editor","maintenance::refactor","section::dev"],"milestone":null,"assignees":[],"author":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30189","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30189","notes":"https://gitlab.com/api/v4/projects/278964/issues/30189/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30189/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30189","relative":"#30189","full":"gitlab-org/gitlab#30189"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699841,"iid":30187,"project_id":278964,"title":"Gitlab XSS in markdown preview page","description":"**[HackerOne report #645043](https://hackerone.com/reports/645043)** by `brainpanic` on 2019-07-16, assigned to `akelly`:\n\n### Summary\n\nA DOM-Based XSS in markdown preview page due to mermaid feature.\n\n### Steps to reproduce\n\n1. sign in to GitLab  \n2. find a repo and create a issue  \n3. submit with the following code   \n```IGNORETHISMERMAIDFORNOWBUTUSEITINTHEREALPAYLOADmermaid  \ngraph LR;  \n    A--\u003eCLICK_HERE_AND_GET_BONUS;  \n    click A alert \"aaa\"  \n    click CLICK_HERE_AND_GET_BONUS \"javascript:alert%28%64%6f%63%75%6d%65%6e%74%2e%64%6f%6d%61%69%6e%29\" \"Here is the XSS\"  \n```  \n4. goto the issue page  \n5. click the node named \"CLICK_HERE_AND_GET_BONUS\", you will see an alert box with document.domain\n\n### Impact\n\nThe XSS can be used to hijack the victim's Gitlab account.\n\n### Examples\n\nGoto the link below, and click the node named \"CLICK_HERE_AND_GET_BONUS\"  \nhttps://gitlab.com/c00lyu/sss/issues/1\n\nYou will see an alert box with document.domain\n\n### What is the current *bug* behavior?\n\nExecute javascript code\n\n### What is the expected *correct* behavior?\n\nDo not allow javascript code to execute\n\n### Relevant logs and/or screenshots\n\n ![gitlab_xss.png](https://h1.sec.gitlab.net/a/1906746f-7d61-41d0-875a-ddaa32513ef4/gitlab_xss.png)\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n## Impact\n\nThe XSS can be used to hijack the victim's Gitlab account.\n\n## Attachments\n**Warning:** Attachments received through HackerOne, please exercise caution!\n* [gitlab_xss.png](https://h1.sec.gitlab.net/a/1906746f-7d61-41d0-875a-ddaa32513ef4/gitlab_xss.png)","state":"closed","created_at":"2019-07-17T17:03:46.815Z","updated_at":"2022-05-19T16:06:35.869Z","closed_at":"2019-09-30T13:39:34.249Z","closed_by":{"id":4056133,"username":"jeremymatos","name":"Jeremy Matos","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7c972d878793ca2302186e5d8c0c0dd8?s=80\u0026d=identicon","web_url":"https://gitlab.com/jeremymatos"},"labels":["HackerOne","devops::plan","frontend","group::project management","priority::2","security","severity::2","workflow::in dev"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":3236898,"username":"rajatgitlab","name":"Rajat Jain","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3236898/avatar.png","web_url":"https://gitlab.com/rajatgitlab"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3236898,"username":"rajatgitlab","name":"Rajat Jain","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3236898/avatar.png","web_url":"https://gitlab.com/rajatgitlab"},"user_notes_count":25,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-08-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30187","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30187","notes":"https://gitlab.com/api/v4/projects/278964/issues/30187/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30187/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30187","relative":"#30187","full":"gitlab-org/gitlab#30187"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699838,"iid":30186,"project_id":278964,"title":"Add an instance-wide option to disable pull repository mirroring after n successive mirror update failures","description":"A huge number of pull-mirror jobs on GitLab.com have not succeeded in a very long time, but continue to be processed multiple times a day.\n\nOn each attempt, we will attempt three retries, and eventually fail the job to the deadletter queue. \n\n`repository_update_mirror` jobs are in fact the number one source of deadletter queue entries in Sidekiq on GitLab.com.\n\nOne possible solution would be to add an instance-wide option to disable pull repository mirroring after n successive mirror update failures. \n\n(I am also open to other options but am starting with this proposal :smile:)\n\n\nRelated to https://gitlab.com/gitlab-org/gitlab-ce/issues/44046","state":"closed","created_at":"2019-07-17T16:54:56.880Z","updated_at":"2021-10-27T10:44:36.515Z","closed_at":"2019-10-08T02:14:49.251Z","closed_by":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"labels":["Background Processing","Deliverable","Eng-Consumer::Infrastructure","Eng-Producer::Development","Engineering Allocation","backend","devops::create","gitlab.com","group::source code","infradev","priority::2","production request","severity::2"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"user_notes_count":24,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30186","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30186","notes":"https://gitlab.com/api/v4/projects/278964/issues/30186/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30186/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30186","relative":"#30186","full":"gitlab-org/gitlab#30186"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22931841,"iid":12890,"project_id":278964,"title":"Frontend: Support multiple metric alerts","description":"### Problem to solve\n\nWe need to add the UI for allowing users to configure multiple alerts. The backend support is being addressed in https://gitlab.com/gitlab-org/gitlab-ee/issues/12258. \n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\nPersonas can be found at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\nWe should add this into our existing alert interface, allowing users to easily add more alerts.\n\n|One Alert | Multiple Alerts |\n| - | - |\n|![2_create_alert](/uploads/de12bc755cc427073ca3143ad78370c8/2_create_alert.png)|![3_create_multiple_alerts](/uploads/23c9e36236eb553153b4a1305b8c3998/3_create_multiple_alerts.png)|\n\nNote: the query field is a text-entry field in this design because the original plan was that computed metrics would be allowed by the time we implemented this issue (https://gitlab.com/gitlab-org/gitlab/issues/11879). Since computed metrics are still behind a feature flag, this field will instead be the existing, dropdown variant.\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)? --\u003e\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements --\u003e\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\nBoth the cluster health and metrics dashboards should be able to add multiple alerts\n\n### Prerequisites:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues/12258\n\n\n| MR | Status | Details\n| ------ | ------ | ------ |\n| !23119 | In Dev | This is the feature flag being pushed from the backend to the frontend |\n| !23120 | In Dev | All the new vuex related things that will handle the alert creation, deletion, updating, etc. |","state":"closed","created_at":"2019-07-17T14:29:10.958Z","updated_at":"2022-01-27T17:15:18.591Z","closed_at":"2022-01-27T17:15:18.127Z","closed_by":{"id":9304687,"username":"abellucci","name":"Alana Bellucci","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9304687/avatar.png","web_url":"https://gitlab.com/abellucci"},"labels":["Category:APM alerts","Category:Incident Management","Category:Metrics","Charts","Enterprise Edition","UX","[deprecated] Accepting merge requests","devops::monitor","frontend","group::observability","missed-deliverable","missed:12.6","release post item","section::ops","type::feature","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":2622336,"username":"adriel","name":"Adriel Santiago","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2622336/avatar.png","web_url":"https://gitlab.com/adriel"},"type":"ISSUE","assignee":null,"user_notes_count":47,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12890","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12890","notes":"https://gitlab.com/api/v4/projects/278964/issues/12890/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12890/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12890","relative":"#12890","full":"gitlab-org/gitlab#12890"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1502,"epic":{"id":8503,"iid":1502,"title":"Support multiple, computed alerts for dashboards","url":"/groups/gitlab-org/-/epics/1502","group_id":9970,"human_readable_end_date":"Jan 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24699827,"iid":30182,"project_id":278964,"title":"Checkbox with no text causing following checkboxes not to be saved","description":"### Summary\n\nCheckboxes in Issues are not saving any changes, including checks and unchecks.\n\n* [ ] Task 1\n* [ ] Task 2\n* [ ] Task 3\n* [ ] Task 4\n\n* [ ] Task 5\n* [x] Task 6\n* [ ] Task 7\n\n* [ ] \n* [ ] Test this task. \n* [ ] Task 8\n\n_I've split the `summary` issue below into a new issue, https://gitlab.com/gitlab-org/gitlab/issues/36664_\n\n\u003cdetails\u003e\n\u003csummary\u003eNo blank line after summary element breaks my onboarding list\u003c/summary\u003e\n1. [ ] People Ops: Double check that the `Employment Status` in BambooHR has two entries marked as `Probation Period` with date as the hire date and `probation period ends` with the end date as exactly 6 months from the hire date.\n\u003c/details\u003e\n\n* [ ] Task 9\n* [x] Task 10\n* [ ] Task 11\n\nGitlab Edition 12.0.3\n\nHaving difficulty reproducing it here.\nAnyone having similar issues on a released edition of Gitlab?\n\n### Other Notes\n\nYou can see in the Activity Pane that sometimes the change saves and everything will change back upon refreshing the page or re-saving the issue.\n\nThis seems to occur for checkboxes that are after an empty checkbox, as shown in the example above.","state":"closed","created_at":"2019-07-17T13:55:28.396Z","updated_at":"2019-11-18T19:55:48.030Z","closed_at":"2019-11-18T19:55:47.987Z","closed_by":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"labels":["awaiting feedback","backend","devops::plan","group::project management","issues","missed:12.3","missed:12.4","priority::4","severity::4","type::bug"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"}],"author":{"id":2367314,"username":"jonnyeom","name":"Jonny Eom","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2accd69415d850aa9455f1dd8e6e3d47?s=80\u0026d=identicon","web_url":"https://gitlab.com/jonnyeom"},"type":"ISSUE","assignee":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30182","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":13,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 13 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30182","notes":"https://gitlab.com/api/v4/projects/278964/issues/30182/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30182/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30182","relative":"#30182","full":"gitlab-org/gitlab#30182"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699823,"iid":30180,"project_id":278964,"title":"CPU intensive /api/v4/projects/id/merge_requests","description":"Following the https://gitlab.com/gitlab-org/gitlab-ce/issues/62876#note_190720305\n\nWe discovered that the `/api/v4/projects/{{project_id}}/merge_requests` is very CPU-intensive tasks that increases latency when running on Puma.\n\nWe should investigate what is wrong with this endpoint and try to understand what it takes to optimize it.\n\nFor our testing, we should use https://gitlab.com/gitlab-org/quality/performance/#2-data-for-load-tests.\n\nRelated to https://gitlab.com/gitlab-org/gitlab-ce/issues/64335 and https://gitlab.com/gitlab-org/quality/performance/issues/40.","state":"closed","created_at":"2019-07-17T13:45:40.006Z","updated_at":"2022-05-31T12:55:01.061Z","closed_at":"2020-01-21T18:23:19.837Z","closed_by":{"id":3910448,"username":"craig-gomes","name":"Craig Gomes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3910448/avatar.png","web_url":"https://gitlab.com/craig-gomes"},"labels":["Quality","Quality:performance-issues","[deprecated] ðŸŽ","devops::data_stores","group::application performance","priority::2","severity::2"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":3910448,"username":"craig-gomes","name":"Craig Gomes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3910448/avatar.png","web_url":"https://gitlab.com/craig-gomes"}],"author":{"id":12452,"username":"ayufan","name":"Kamil TrzciÅ„ski","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a285e30f35d72526fb0954e8fe7cefa?s=80\u0026d=identicon","web_url":"https://gitlab.com/ayufan"},"type":"ISSUE","assignee":{"id":3910448,"username":"craig-gomes","name":"Craig Gomes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3910448/avatar.png","web_url":"https://gitlab.com/craig-gomes"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30180","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30180","notes":"https://gitlab.com/api/v4/projects/278964/issues/30180/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30180/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30180","relative":"#30180","full":"gitlab-org/gitlab#30180"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2065,"epic":{"id":13844,"iid":2065,"title":"Triage non-performant endpoints (API or Controllers)","url":"/groups/gitlab-org/-/epics/2065","group_id":9970,"human_readable_end_date":"Jun 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24699822,"iid":30179,"project_id":278964,"title":"Memory intensive /api/v4/projects/id/merge_requests/iid","description":"Following the https://gitlab.com/gitlab-org/gitlab-ce/issues/62876#note_190720305\n\nWe discovered that the `/api/v4/projects/{{project_id}}/merge_requests/{{merge_request_iid}}`\nhas very bad usage pattern having high memory usage and results in high GC pressure on the system.\n\nWe should investigate what is wrong with this endpoint and try to understand what it takes to optimize it.\n\nFor our testing, we should use https://gitlab.com/gitlab-org/quality/performance/#2-data-for-load-tests.\n\nRelated to https://gitlab.com/gitlab-org/gitlab-ce/issues/64335 and https://gitlab.com/gitlab-org/quality/performance/issues/40.","state":"closed","created_at":"2019-07-17T13:34:26.436Z","updated_at":"2022-05-31T12:55:01.677Z","closed_at":"2019-10-25T12:41:40.588Z","closed_by":{"id":3910448,"username":"craig-gomes","name":"Craig Gomes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3910448/avatar.png","web_url":"https://gitlab.com/craig-gomes"},"labels":["Deliverable","Quality","devops::data_stores","group::application performance","priority::2","severity::2"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"},{"id":4713264,"username":"mkaeppler","name":"Matthias KÃ¤ppler","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4713264/avatar.png","web_url":"https://gitlab.com/mkaeppler"}],"author":{"id":12452,"username":"ayufan","name":"Kamil TrzciÅ„ski","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a285e30f35d72526fb0954e8fe7cefa?s=80\u0026d=identicon","web_url":"https://gitlab.com/ayufan"},"type":"ISSUE","assignee":{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30179","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30179","notes":"https://gitlab.com/api/v4/projects/278964/issues/30179/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30179/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30179","relative":"#30179","full":"gitlab-org/gitlab#30179"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2065,"epic":{"id":13844,"iid":2065,"title":"Triage non-performant endpoints (API or Controllers)","url":"/groups/gitlab-org/-/epics/2065","group_id":9970,"human_readable_end_date":"Jun 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22924637,"iid":12887,"project_id":278964,"title":"Use GraphQL for Roadmap","description":"# Summary\n\nWe already implemented GraphQL to render Epics Tree (see https://gitlab.com/gitlab-org/gitlab-ee/issues/10795), so API already supports all necessary keys required to render Roadmap for any group. Using GraphQL to render Roadmap will allow us to use single query file in both the places, thus having SSoT for networking logic for both Epics and Roadmap.\n\n## Current Rails API Implementation for Roadmap\n\nCurrent Rails API for Roadmap supports following query params;\n\n*  `state`: State of Epics to show, possible values; `all`, `opened` \u0026 `closed`.\n*  `start_date`: Start date in `YYYY-M-D` format from which Epics with provided start date exist.\n*  `end_date`: Finish date in `YYYY-M-D` format from which Epics with provided finish date exist.\n*  `layout` [optional]: Preset value when user clicks it on UI, possible values; `QUARTERS`, `MONTHS` \u0026 `WEEKS`. This param is only sent when user changes the preset.\n\nAlso, the group information is part of endpoint URL itself. For eg; URL to fetch all Epics within `gitlab-org` group on GitLab.com is `/groups/gitlab-org/-/epics.json`, with above params sent as query params.\n\n## Current GraphQL API implementation for Epics\n\nCurrent GraphQL query used for Epic Tree requires following variables;\n\n*  `fullPath`: Group within which we're looking for Epics.\n*  `iid`: ID of Epic for which we want to fetch child items (attached Epics \u0026 Issues).\n*  `pageSize`: Number of items to fetch. Default upper limit for GraphQL backend is `100`.\n*  `epicEndCursor` [optional]: Cursor position for pagination in Epics list.\n*  `issueEndCursor` [optional]: Cursor position for pagination in Issues list.\n\nIf we were to use GraphQL API for Roadmap at a group level, we'd have to make `iid` variable to be optional such that the query allows to fetch all top-level epics for provided group, and additionally support `startDate`, `endDate`, `state` and `layout` variables (all being optional when used within Epics to render tree).","state":"closed","created_at":"2019-07-17T12:28:32.465Z","updated_at":"2021-11-08T16:56:18.102Z","closed_at":"2020-02-18T18:01:53.597Z","closed_by":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"labels":["Category:Portfolio Management","Enterprise Edition","GraphQL","backend","backstage [DEPRECATED]","devops::plan","epics","frontend","group::product planning","missed:12.4","missed:12.5","missed:12.6","missed:12.7","roadmaps","workflow::verification"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"}],"author":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"type":"ISSUE","assignee":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"user_notes_count":57,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12887","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12887","notes":"https://gitlab.com/api/v4/projects/278964/issues/12887/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12887/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12887","relative":"#12887","full":"gitlab-org/gitlab#12887"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1998,"epic":{"id":13325,"iid":1998,"title":"Roadmaps Category Maturity: Viable","url":"/groups/gitlab-org/-/epics/1998","group_id":9970,"human_readable_end_date":"Feb 28, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22921612,"iid":12883,"project_id":278964,"title":"OR for Events in Cycle Analytics","description":"### Problem to solve\n\n\u003c!-- What problem do we solve? --\u003e\nIn Cycle Analytics one of the stages has a multi-part definition; the Issue stage is defined as \"the time from Issue creation to the first comment or MR creation\".  Often users might also want to define a stage based on 2 events, for example: 1) an issue is added to a milestone OR a board 2) an MR for an issue is closed OR the label 'in QA' is added (AND, ex: 3) an issue has been mentioned in a commit and  an MR is created, will be considered in the next milestones)\n\nFollow up on: https://gitlab.com/gitlab-org/gitlab-ee/issues/12196\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\nPersonas can be found at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\nEMs, Directors, PMs\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)? --\u003e\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements --\u003e\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further guidelines: https://about.gitlab.com/handbook/engineering/quality/guidelines/test-engineering/ --\u003e\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n### What is the type of buyer? \n\n\u003c!-- Which leads to: in which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\n\n### Links / references\n\n### Solution\n\n| Step 1 | Step 2 | Step 3 |\n|--------|--------|--------|\n| ![image](/uploads/b1b7c9cc2057569bc4e470db5d86c645/image.png) | ![image](/uploads/6898b983ad06e9f6eaec178c94e87746/image.png) | ![image](/uploads/929fc054357b22f7d27a00894ac7565d/image.png) |\n\n* We always show the 'Add another start event' link at the bottom of the Start event(s) table\n* We only show the 'Add another stop event' link once at least one start event has been added (at the same time we hide the 'Please select a start event first' message below the stop event dropdown\n* I recommend we use segmented control for the object types as it'll slightly improve the usability\n* the user should be able to add ~~as many~~ *up to 2* start/stop events ~~without filling in the actual data. They can do that after they added the number of events they need~~\n* the user can delete all start/stop events but the first one. A browser-native alert for confirming the delete action should be enough for now.\n\n- EDIT 2019-09-13 by @djensen: Changed spec to limit conditions to 2 events per https://gitlab.com/gitlab-org/gitlab/issues/12883/#note_216847092\n- EDIT 2019-09-17 by @djensen: Described the default definition of the Issue stage in the \"Problem to Solve\".","state":"closed","created_at":"2019-07-17T11:24:41.954Z","updated_at":"2021-04-03T08:21:53.603Z","closed_at":"2021-02-16T03:01:14.839Z","closed_by":{"id":4583714,"username":"npost","name":"Nick Post","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4583714/avatar.png","web_url":"https://gitlab.com/npost"},"labels":["Category:Value Stream Management","Enterprise Edition","GitLab Premium","Stretch","UX","[deprecated] Accepting merge requests","analytics","backend","devops::manage","direction","frontend","group::optimize","icebox","priority::2","section::dev","type::feature","workflow::scheduling"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":3511154,"username":"valexieva","name":"Virjinia Alexieva","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/bc036fa2e7b6fa926a175324a948169f?s=80\u0026d=identicon","web_url":"https://gitlab.com/valexieva"},"type":"ISSUE","assignee":null,"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12883","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12883","notes":"https://gitlab.com/api/v4/projects/278964/issues/12883/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12883/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12883","relative":"#12883","full":"gitlab-org/gitlab#12883"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1844,"epic":{"id":11730,"iid":1844,"title":"Add additional events on cycle analytics","url":"/groups/gitlab-org/-/epics/1844","group_id":9970},"iteration":null,"health_status":null},{"id":24699801,"iid":30173,"project_id":278964,"title":"Stored XSS in \"Create Groups\"","description":"**[HackerOne report #647130](https://hackerone.com/reports/647130)** by `rioncool22` on 2019-07-17, assigned to `gitlab_cmaxim`:\n\n\u003e NOTE! Thanks for submitting a report! Please replace *all* the (parenthesized) sections below with the pertinent details. Remember, the more detail you provide, the easier it is for us to triage and respond quickly, so be sure to take your time filling out the report!\n\n### Summary\n\nStored attacks are those where the injected script is permanently stored on the target servers, such as in a database, in a message forum, visitor log, comment field, etc. The victim then retrieves the malicious script from the server when it requests the stored information. Stored XSS is also sometimes referred to as Persistent or Type-I XSS. \n\n### Steps to reproduce\n\n1. Login to [Gitlab](https://gitlab.com)  \n2. Create a new group with xss payload  \npayload i use = \"\u003e\u003cimg src=x onerror=prompt(123)\u003e  \n3. Open Group  \n4. To trigger XSS you can click \"NEW PROJECT\"  \n5. XSS Trigger\n\n## Impact\n\nCan steal Cookie, Can run javascript code, etc\n\n## Attachments\n**Warning:** Attachments received through HackerOne, please exercise caution!\n* [Screenshot_from_2019-07-17_02-06-52.png](https://h1.sec.gitlab.net/a/ecce4fdf-8d20-43e5-9b23-22506edcf285/Screenshot_from_2019-07-17_02-06-52.png)","state":"closed","created_at":"2019-07-17T09:42:30.684Z","updated_at":"2020-08-26T14:19:48.974Z","closed_at":"2020-01-30T21:53:48.854Z","closed_by":{"id":4226366,"username":"ankelly","name":"Andrew Kelly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4226366/avatar.png","web_url":"https://gitlab.com/ankelly"},"labels":["Category:Authentication and Authorization","HackerOne","Manage [DEPRECATED]","devops::manage","group::authentication and authorization","priority::2","security","severity::2"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"user_notes_count":22,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-08-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30173","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30173","notes":"https://gitlab.com/api/v4/projects/278964/issues/30173/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30173/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30173","relative":"#30173","full":"gitlab-org/gitlab#30173"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22867509,"iid":12874,"project_id":278964,"title":"Extend group IP restriction to API activity","description":"### Problem\n\nOur first iteration of IP access restriction https://gitlab.com/gitlab-org/gitlab-ee/issues/1985 only covered the UI. For organizations looking for a solution that comprehensively covers their access control needs without workarounds, we should extend this restriction to perform this access check on the command line for API activity.\n\n### Proposal\n\n* If any incoming request does not adhere to the group's IP address restriction, fail the request with an \n* Cover API endpoints associated with the group, as well as all projects and subgroups within the group.\n* Instance-level endpoints outside the boundaries of the group IP filter should not be impacted (Users API, for example).\n\nGit activity to be covered in https://gitlab.com/gitlab-org/gitlab/issues/32113.","state":"closed","created_at":"2019-07-16T22:14:21.353Z","updated_at":"2022-05-25T12:13:44.159Z","closed_at":"2019-09-23T16:06:02.668Z","closed_by":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"labels":["Category:Subgroups","Deliverable","Enterprise Edition","Manage [DEPRECATED]","backend","devops::manage","direction","group::authentication and authorization","planning priority","priority::1"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":2982208,"username":"mksionek","name":"Gosia Ksionek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2982208/avatar.png","web_url":"https://gitlab.com/mksionek"}],"author":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"type":"ISSUE","assignee":{"id":2982208,"username":"mksionek","name":"Gosia Ksionek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2982208/avatar.png","web_url":"https://gitlab.com/mksionek"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12874","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12874","notes":"https://gitlab.com/api/v4/projects/278964/issues/12874/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12874/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12874","relative":"#12874","full":"gitlab-org/gitlab#12874"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22866888,"iid":12873,"project_id":278964,"title":"Support restricting group access by multiple IP subnets","description":"### Problem\n\nWe delivered on https://gitlab.com/gitlab-org/gitlab-ee/issues/1985, but this iteration was restricted to a single subnet. For organizations distributed over multiple locations, supporting multiple subnets is a hard requirement.\n\n### Proposal\n\n* Allow multiple subnets to be defined in our group-level [IP address access restriction](https://docs.gitlab.com/ee/user/group/#ip-access-restriction-ultimate).\n   * For this iteration, users should be able to specify multiple subnets using commas as a delimiter.\n\n![image](/uploads/e8fcf175fe69d89bc0d7c42ba27c61af/image.png)","state":"closed","created_at":"2019-07-16T22:11:50.887Z","updated_at":"2020-10-20T13:15:16.468Z","closed_at":"2019-08-26T07:31:16.821Z","closed_by":{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"},"labels":["Category:Subgroups","Deliverable","Enterprise Edition","Manage [DEPRECATED]","UX","backend","devops::manage","direction","group::authentication and authorization","planning priority","priority::1"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"}],"author":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"type":"ISSUE","assignee":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"user_notes_count":7,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12873","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12873","notes":"https://gitlab.com/api/v4/projects/278964/issues/12873/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12873/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12873","relative":"#12873","full":"gitlab-org/gitlab#12873"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699779,"iid":30163,"project_id":278964,"title":"Private project path \u0026 Resource_label_events API reveals labels from Private project if the issue is moved to public project.","description":"**[HackerOne report #643854](https://hackerone.com/reports/643854)** by `ashish_r_padelkar` on 2019-07-15, assigned to `akelly`:\n\ndev issue: https://dev.gitlab.org/gitlab/gitlabhq/issues/2919\n\n### Summary\n\nHello,\n\nWhen issue is moved from private project to public project, the label events are visible to any user on timeline. However, they can see the  `Private project Path` including `label IDs` because the issue was moved from private to public.\n\nAlso, The below API reveals the names of these labels too. This should not be disclosed as these labels belonged to private projects.\n\n`https://gitlab.com/api/v4/projects/\u003cProject_ID\u003e/issues/\u003cCurrent_Issue_ID\u003e/resource_label_events`\n\n### Steps to reproduce\n\n1. Create an issue in your private project.  \n2. Apply labels to it ( repeat this multiple times by adding removing new labels)  \n3. Now move this issue in one of your public project.  \n4. Login as non member.  \n5. Visit the above issue in public project. You will see that issue has lot of label events which discloses the label ID along with private project path from which the issue is moved from.  \n6. Now visit the API `https://gitlab.com/api/v4/projects/\u003cProject_ID\u003e/issues/\u003cCurrent_Issue_ID\u003e/resource_label_events` and this will disclose all the label names too\n\n\n### Examples  \nYou can see my project url here `https://gitlab.com/newgroup_t/gemnasium-db/issues/9`\n\n### What is the current *bug* behavior?\n\nWhen issue is moved from private project to public project, the timeline activity of issue shows the private project path if the issue had labels applied in private project.\n\nThe `Resource_label_events` API also reveals the labels names too which belonged to private project.\n\n### What is the expected *correct* behavior?\n\nThe private project path should not be visible and label names should not be disclosed in `Resource_label_events` API\n\n\n### Output of checks\n\nThis bug happens on GitLab.com and might be on omnibus installations too!\n\nRegards,  \nAshish\n\n## Impact\n\n1. Private project Path is visible when issue is moved from private project to public project only when there are label events\n\n2. `Resource_label_events API reveals all the label names too that were applied in private project!","state":"closed","created_at":"2019-07-16T15:45:39.291Z","updated_at":"2022-05-19T16:06:35.434Z","closed_at":"2019-11-11T11:08:00.357Z","closed_by":{"id":4056133,"username":"jeremymatos","name":"Jeremy Matos","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7c972d878793ca2302186e5d8c0c0dd8?s=80\u0026d=identicon","web_url":"https://gitlab.com/jeremymatos"},"labels":["Deliverable","HackerOne","backend","devops::plan","group::project management","priority::3","security","severity::3","workflow::in review"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"user_notes_count":28,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-09-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30163","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30163","notes":"https://gitlab.com/api/v4/projects/278964/issues/30163/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30163/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30163","relative":"#30163","full":"gitlab-org/gitlab#30163"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699775,"iid":30161,"project_id":278964,"title":"Expose mergeable_discussions_state and has_conflicts in Merge Request API","description":"### Problem to solve\n\nSeveral teams use external \"bots\" to do Merge Request checking and processing; when a MR is submitted to the bot with unresolved discussions or conflicts, the bot has no way to detect that from the API and does not return a useful error when merge is attempted.  Exposing mergeable_discussions_state? and cannot_be_merged? (as has_conflicts) resolves this and allows the bot to reject the MR if discussions are not resolved or there are conflicts.\n\nThis use to be visible by pulling the MR's .json widget, but access to that was closed off in the past year via tokens.\n\n### Intended users\n\nDevelopers\n\n### Further details\n\nThe use of an automated merging tool is becoming common here as we have hundreds of developers working in some repos and some mechanism is needed to orderly handle merges into the master branch; with it, there are race conditions getting a MR rebased and through CI before another merge is made.  The bot can only work well if it has visibility into the MR state.\n\n### Proposal\n\nInclude mergeable_discussions_state and cannot_be_merged in the \"Show a MR\" API call.\n\nDiff on lib/api/entities.rb\n```\n689,692d708\n\u003c       expose :cannot_be_merged?, as: :has_conflicts\n\u003c       expose :mergeable_discussions_state?, as: :mergeable_discussions_state do |merge_request|\n\u003c           merge_request.mergeable_discussions_state?\n\u003c       end\n```\n\n\n### Permissions and Security\n\nNo permission changes\n\n### Documentation\n\nMR API doc will need to be updated with new field.\n\n### Testing\n\nUnknown\n\n### What does success look like, and how can we measure that?\n\nGreater ability to manage MR processing, greater visibility to why merge is being rejected, less frustratino\n\n### Links / references","state":"closed","created_at":"2019-07-16T15:16:01.669Z","updated_at":"2020-12-07T16:49:53.143Z","closed_at":"2019-12-28T20:37:14.426Z","closed_by":{"id":4353908,"username":"briankabiro","name":"Brian Kabiro","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4353908/avatar.png","web_url":"https://gitlab.com/briankabiro"},"labels":["Category:Code Review Workflow","Community contribution","api","customer","customer+","devops::create","group::code review","merge requests","missed:12.5","missed:12.6","type::feature","workflow::verification"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":4353908,"username":"briankabiro","name":"Brian Kabiro","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4353908/avatar.png","web_url":"https://gitlab.com/briankabiro"}],"author":{"id":1873771,"username":"pherlihy","name":"Patrick Herlihy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1873771/avatar.png","web_url":"https://gitlab.com/pherlihy"},"type":"ISSUE","assignee":{"id":4353908,"username":"briankabiro","name":"Brian Kabiro","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4353908/avatar.png","web_url":"https://gitlab.com/briankabiro"},"user_notes_count":10,"merge_requests_count":0,"upvotes":4,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30161","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30161","notes":"https://gitlab.com/api/v4/projects/278964/issues/30161/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30161/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30161","relative":"#30161","full":"gitlab-org/gitlab#30161"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22838830,"iid":12870,"project_id":278964,"title":"Environments dashboard: Indicate to users that removing/adding a project from one dashboard view, affects all others","description":"### Problem to solve\n\nWe need to improve the UI of the dashboard to let users know that all changes/additions made on Operations dashboard are reflected on Environments dashboard. Need to indicate when adding and removing a project from the dashboard.\n\n### Proposal\n\nUpdate the ~\"UI text\" in the dashboard landing page from:\n\n\u003e This dashboard displays a maximum of 7 projects and 3 environments per project. [More information]\n\nto\n\n\u003e This dashboard displays a maximum of 7 projects and 3 environments per project. The Environments and Operations dashboards share the same list of projects. When you add or remove a project from one, GitLab adds or removes the project from the other. [More information]\n\n### Out of scope\n\nIn the case of delete, consider adding a confirmation modal or updating the label to `Remove from all dashboards`.","state":"closed","created_at":"2019-07-16T12:51:09.676Z","updated_at":"2020-08-24T13:02:40.638Z","closed_at":"2020-08-24T13:02:40.445Z","closed_by":{"id":493585,"username":"nfriend","name":"Nathan Friend","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cd23f74a33fc7d8dfe081948696551a5?s=80\u0026d=identicon","web_url":"https://gitlab.com/nfriend"},"labels":["Category:Release Orchestration","Enterprise Edition","Release::P1","UI text","UX","UX debt","devops::release","environments","frontend","frontend-weight::1","workflow::in review"],"milestone":{"id":1233753,"iid":51,"group_id":9970,"title":"13.4","description":"https://about.gitlab.com/releases/2020/09/22/gitlab-13-4-released/","state":"closed","created_at":"2020-04-09T17:39:21.662Z","updated_at":"2022-04-13T14:50:33.769Z","due_date":"2020-09-17","start_date":"2020-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/51"},"assignees":[{"id":3079878,"username":"rayana","name":"Rayana Verissimo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3079878/avatar.png","web_url":"https://gitlab.com/rayana"}],"author":{"id":3079878,"username":"rayana","name":"Rayana Verissimo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3079878/avatar.png","web_url":"https://gitlab.com/rayana"},"type":"ISSUE","assignee":{"id":3079878,"username":"rayana","name":"Rayana Verissimo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3079878/avatar.png","web_url":"https://gitlab.com/rayana"},"user_notes_count":10,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12870","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12870","notes":"https://gitlab.com/api/v4/projects/278964/issues/12870/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12870/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12870","relative":"#12870","full":"gitlab-org/gitlab#12870"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3298,"epic":{"id":53421,"iid":3298,"title":"Environments Dashboard Feature Enhancements","url":"/groups/gitlab-org/-/epics/3298","group_id":9970,"human_readable_end_date":"Nov 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22838749,"iid":12869,"project_id":278964,"title":"Environments dashboard: Improve the `Add project` modal","description":"### Problem to solve\n\nWe are introducing a dashboard view for environments on https://gitlab.com/gitlab-org/gitlab-ee/issues/3713. Part of the user flow includes adding projects to the dashboard using a modal. At this point (MVC), the usability `Add Projects` modal is very vague and does not help users to clearly see what to add there.\n\n![Screen_Shot_2019-07-04_at_19.20.51](/uploads/cb49818a35405c5e84571fceea32e346/Screen_Shot_2019-07-04_at_19.20.51.png)\n\n### Further details and proposal\n\nAdd the same ~\"UI text\" that will be updated in: https://gitlab.com/gitlab-org/gitlab/-/issues/12870\n\n### Out of scope\n\nUser needs to know ahead the name of projects in order to find them using the autocomplete search input. We can help users by providing them indication of their recent or starred projects in the modal, so they can just click and add it to the dashboard without having to search.","state":"closed","created_at":"2019-07-16T12:48:16.345Z","updated_at":"2021-12-14T12:37:11.636Z","closed_at":"2021-11-08T20:11:39.152Z","closed_by":{"id":5622641,"username":"nicolewilliams","name":"Nicole Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5622641/avatar.png","web_url":"https://gitlab.com/nicolewilliams"},"labels":["Category:Release Orchestration","Enterprise Edition","UX","UX FY21-Q4","UX debt","UX research","devops::release","environments","feature::enhancement","frontend","group::release","section::ops","severity::3","type::feature","workflow::in dev"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":262533,"username":"afontaine","name":"Andrew Fontaine","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/262533/avatar.png","web_url":"https://gitlab.com/afontaine"}],"author":{"id":3079878,"username":"rayana","name":"Rayana Verissimo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3079878/avatar.png","web_url":"https://gitlab.com/rayana"},"type":"ISSUE","assignee":{"id":262533,"username":"afontaine","name":"Andrew Fontaine","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/262533/avatar.png","web_url":"https://gitlab.com/afontaine"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12869","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12869","notes":"https://gitlab.com/api/v4/projects/278964/issues/12869/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12869/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12869","relative":"#12869","full":"gitlab-org/gitlab#12869"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3298,"epic":{"id":53421,"iid":3298,"title":"Environments Dashboard Feature Enhancements","url":"/groups/gitlab-org/-/epics/3298","group_id":9970,"human_readable_end_date":"Nov 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24699751,"iid":30146,"project_id":278964,"title":"Let's Encrypt integration doesn't scale and does not give any feedback to user on errors","description":"# Problem to solve\n\n~~Currently, LE certificates \"just work\" on gitlab.com, and if properly configured will work properly on on-premise installations of GitLab.~~\n\nThe line above is not true anymore. =(\n\nIf GitLab for some reason is unable to obtain Let's Encrypt certificate, we save `acme_order` and continue to check it every 15 minutes.\nThis causes 2 problmes:\n1. check every 15 minutes makes us hit the very basic rate limit on obtaining acme directory: https://gitlab.com/gitlab-org/gitlab/issues/35934. This is invisible for user and will be retried, but it spams our error tracking system(sentry). And can potentially cause problems for users once we accumulate many acme orders...\n1. acme order expiration time is `7 days` by default. This means that we will actually retry certificate creation only after a week, and user has no interface to retry it earlier. I tried to reduce this time to `2 hours`, but it caused us to hit another rate limit: https://gitlab.com/gitlab-org/gitlab/issues/197978.\n\n# Kinds of errors\n\nMost of the errors on gitlab.com are failed domain verification challenges. Some of the users might have transferred their domains to other services.\n\nSome other options:\n1. generic API error(I can think about only one way of reproducing this - saving wrong account private key)\n1. Challenges taking too long to pass - this can be caused by misconfigured pages daemon or firewall settings\n1. https://gitlab.com/gitlab-org/gitlab-ce/issues/66107#note_208550895\n\n# Proposed solution\n\n1. Only try to obtain the certificate once.\n1. In case of any errors:\n    1. mark domain as failed for Let's Encrypt validation, and not retry it\n    1. notify the owner of the project by email(as we currently do for our own validation), similar to https://gitlab.com/gitlab-org/gitlab/blob/60787452eaff915d645d979cdca80156f5c2aacf/app/views/notify/pages_domain_disabled_email.html.haml#L4\n    1. Change message to \"Something went wrong while obtaining Let's Encrypt certificate\" on the certificate section, also change color to warning: \n![Error](/uploads/282677d99873bb1c0f9030a3ac1a05c5/Error.png)\n    1. Add a \"Retry\" button to this error message\n    1. When \"Retry\" button is pressed, remove error state, and change message back to \"GitLab is obtaining a Let's Encrypt SSL certificate for this domain. This process can take some time. Please try again later.\"\n\n1. [ ]  As part of this solution, we need to enable the silenced `pages_domain_ssl_renewal` alerts in AlertManager as discussed in this issue https://gitlab.com/gitlab-com/runbooks/-/merge_requests/2002\n\n\u003cdetails\u003e\n\u003csummary\u003eOld description\u003c/summary\u003e\n1. I think in the first case we should just show a generic message like `GitLab couldn't obtain Let's Encrypt's certificates, please ask your system administrator to check the logs`, because displaying actual error might create a security risk.\n1. For the second case, I would show something like `Let's Encrypt couldn't verify your domain, please check that your domain is properly served by gitlab pages and ask your system administrator to check pages configuration and logs.`\n\nNote: jugging from https://gitlab.com/gitlab-org/gitlab-ce/issues/66107 example I would say that displaying the error to user would be a bad idea since it can contain private information(it doesn't contain in that case, but these logs look more like a system information.\n\nI would put this kind of errors to sentry and logs for the start.\n\u003c/details\u003e\n\n\nExtracted from https://gitlab.com/gitlab-org/gitlab-ce/issues/28996","state":"closed","created_at":"2019-07-16T07:51:20.203Z","updated_at":"2020-11-12T10:25:39.389Z","closed_at":"2020-04-27T15:24:49.506Z","closed_by":{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"},"labels":["Category:Pages","Release::P2","Technical Writing","UI text","UX","backend","cicd::active","customer","devops::release","frontend","group::release","maintenance::refactor","missed-SLO","missed:12.10","priority::2","severity::2","type::bug","workflow::verification"],"milestone":{"id":991112,"iid":42,"group_id":9970,"title":"13.0","description":"","state":"closed","created_at":"2019-09-04T15:20:39.024Z","updated_at":"2020-10-08T12:00:55.725Z","due_date":"2020-05-17","start_date":"2020-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/42"},"assignees":[{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"},{"id":3719688,"username":"mnichols1","name":"Mike Nichols","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3719688/avatar.png","web_url":"https://gitlab.com/mnichols1"}],"author":{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"},"type":"ISSUE","assignee":{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"},"user_notes_count":63,"merge_requests_count":0,"upvotes":8,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30146","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30146","notes":"https://gitlab.com/api/v4/projects/278964/issues/30146/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30146/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30146","relative":"#30146","full":"gitlab-org/gitlab#30146"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":766,"epic":{"id":3437,"iid":766,"title":"Improve certificate handling for Pages","url":"/groups/gitlab-org/-/epics/766","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22820708,"iid":12868,"project_id":278964,"title":"master:broken - missing translations for gitlab.pot","description":"```\n*** Running rake task: lint:static_verification ***\n!!! Rake task gettext:updated_check raised RuntimeError:\n/builds/gitlab-org/gitlab-ee/lib/tasks/gettext.rake:96:in `block (2 levels) in \u003cmain\u003e': Newly translated strings found, please add them to `locale/gitlab.pot` by running: (RuntimeError)\n\n  bin/rake gettext:regenerate\n\nThen commit and push the resulting changes to `locale/gitlab.pot`.\n\nThe diff was:\n\n+msgid \"Someone edited the issue at the same time you did. Please check out %{linkStart}the issue%{linkEnd} and make sure your changes will not unintentionally remove theirs.\"\n+msgid \"You're not allowed to %{tag_start}edit%{tag_end} files in this project directly. Please fork this project, make your changes there, and submit a merge request.\"\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/task.rb:273:in `block in execute'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/task.rb:273:in `each'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/task.rb:273:in `execute'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/task.rb:214:in `block in invoke_with_call_chain'\n\tfrom /usr/local/lib/ruby/2.6.0/monitor.rb:230:in `mon_synchronize'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/task.rb:194:in `invoke_with_call_chain'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/task.rb:183:in `invoke'\n\tfrom /builds/gitlab-org/gitlab-ee/lib/tasks/lint.rake:42:in `block (4 levels) in \u003cmain\u003e'\n\tfrom /builds/gitlab-org/gitlab-ee/lib/tasks/lint.rake:39:in `fork'\n\tfrom /builds/gitlab-org/gitlab-ee/lib/tasks/lint.rake:39:in `block (3 levels) in \u003cmain\u003e'\n\tfrom /builds/gitlab-org/gitlab-ee/lib/tasks/lint.rake:38:in `each'\n\tfrom /builds/gitlab-org/gitlab-ee/lib/tasks/lint.rake:38:in `block (2 levels) in \u003cmain\u003e'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/task.rb:273:in `block in execute'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/task.rb:273:in `each'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/task.rb:273:in `execute'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/task.rb:214:in `block in invoke_with_call_chain'\n\tfrom /usr/local/lib/ruby/2.6.0/monitor.rb:230:in `mon_synchronize'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/task.rb:194:in `invoke_with_call_chain'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/task.rb:183:in `invoke'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/application.rb:160:in `invoke_task'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/application.rb:116:in `block (2 levels) in top_level'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/application.rb:116:in `each'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/application.rb:116:in `block in top_level'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/application.rb:125:in `run_with_threads'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/application.rb:110:in `top_level'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/application.rb:83:in `block in run'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/application.rb:186:in `standard_exception_handling'\n\tfrom /builds/gitlab-org/gitlab-ee/vendor/ruby/2.6.0/gems/rake-12.3.2/lib/rake/application.rb:80:in `run'\n\tfrom bin/rake:4:in `\u003cmain\u003e'\n```","state":"closed","created_at":"2019-07-16T03:56:09.807Z","updated_at":"2019-08-12T14:56:41.505Z","closed_at":"2019-07-16T05:25:15.776Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["Enterprise Edition","master:broken"],"milestone":{"id":693520,"iid":34,"group_id":9970,"title":"12.1","description":"https://about.gitlab.com/releases/2019/07/22/gitlab-12-1-released","state":"closed","created_at":"2018-10-30T16:47:58.826Z","updated_at":"2020-04-27T16:30:09.107Z","due_date":"2019-07-22","start_date":"2019-06-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/34"},"assignees":[{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"}],"author":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"type":"ISSUE","assignee":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12868","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12868","notes":"https://gitlab.com/api/v4/projects/278964/issues/12868/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12868/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12868","relative":"#12868","full":"gitlab-org/gitlab#12868"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699740,"iid":30140,"project_id":278964,"title":"Remove friction for review apps to be deployed so environments are available for UX and PM","description":"Review apps are going to be a helper for both UX\u0026PM. \n\nFrom (https://gitlab.com/groups/gitlab-org/-/epics/25#note_191892989) \n\nCurrently the spin up of this instance is gated by all the test stage which may not need to all pass to get the review app up and running. We should consider deploying the review app even when some tests are failing.\n\n### Proposal \n\nHave review apps be deployed in a more aggressive manner. This can be done when we have solved all the dependencies and achieve a stable pass rate. We need to determine which tests can fail. E.g.\n* Linting\n* Compatibility check","state":"closed","created_at":"2019-07-16T00:31:24.497Z","updated_at":"2022-05-23T12:40:20.959Z","closed_at":"2022-05-20T15:23:26.567Z","closed_by":{"id":4303148,"username":"kwiebers","name":"Kyle Wiebers","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303148/avatar.png","web_url":"https://gitlab.com/kwiebers"},"labels":["Engineering Productivity","Quality","ci-build","ep::review-apps","missed:12.5","priority::2","type::feature"],"milestone":{"id":427853,"iid":10,"group_id":9970,"title":"Next 3-4 releases","description":"Bigger issues we plan to ship in the next 3-4 releases, but don't have a designated release yet. \r\n\r\n\u003e \"An easy way to look at it for me it's translating to months. Since our iterations are 1 month, I look at it as 'within the next 4 months'.\" - @dgruesso [via slack]\r\n\r\nDO NOT add small changes, bugs, regressions to this milestone.","state":"active","created_at":"2017-12-11T16:26:33.141Z","updated_at":"2020-07-14T18:21:29.639Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/10"},"assignees":[{"id":4303148,"username":"kwiebers","name":"Kyle Wiebers","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303148/avatar.png","web_url":"https://gitlab.com/kwiebers"}],"author":{"id":2097582,"username":"meks","name":"Mek Stittri","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2097582/avatar.png","web_url":"https://gitlab.com/meks"},"type":"ISSUE","assignee":{"id":4303148,"username":"kwiebers","name":"Kyle Wiebers","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303148/avatar.png","web_url":"https://gitlab.com/kwiebers"},"user_notes_count":46,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30140","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30140","notes":"https://gitlab.com/api/v4/projects/278964/issues/30140/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30140/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30140","relative":"#30140","full":"gitlab-org/gitlab#30140"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":606,"epic":{"id":2315,"iid":606,"title":"Improve Review Apps reliability \u0026 efficiency \u003e Improve setup \u0026 usefulness","url":"/groups/gitlab-org/-/epics/606","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24699693,"iid":30121,"project_id":278964,"title":"Optimize review apps where we do not need them","description":"## Problem\n\nWe need to optimize review apps further, this is still pretty much a blanket condition.\n\nFrom discussions in https://gitlab.com/groups/gitlab-org/-/epics/25#note_188572759 \n\nThe optimization here can be done via change detection.\n\n### Proposal \n\nSkip the review apps where we do not need them.\n\n* Spec changes\n* Danger file changes\n* Other backstage changes?\n\n@rymai @kwiebers","state":"closed","created_at":"2019-07-15T15:41:58.699Z","updated_at":"2019-10-30T18:00:48.387Z","closed_at":"2019-10-30T17:56:18.776Z","closed_by":{"id":423915,"username":"godfat","name":"Lin Jen-Shin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8c73dab2ecd23d5b5627a0235ae2f9b1?s=80\u0026d=identicon","web_url":"https://gitlab.com/godfat"},"labels":["Engineering Productivity","Quality","backstage [DEPRECATED]","ci-build","priority::3"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":2097582,"username":"meks","name":"Mek Stittri","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2097582/avatar.png","web_url":"https://gitlab.com/meks"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":7,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30121","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30121","notes":"https://gitlab.com/api/v4/projects/278964/issues/30121/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30121/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30121","relative":"#30121","full":"gitlab-org/gitlab#30121"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":605,"epic":{"id":2314,"iid":605,"title":"EP: Improve Review Apps reliability \u0026 efficiency","url":"/groups/gitlab-org/-/epics/605","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":22807938,"iid":12854,"project_id":278964,"title":"Remove milestone_id column from epics table","description":"## Summary\n\nFollow-up to address https://gitlab.com/gitlab-org/gitlab-ee/issues/10270 and the discussion https://gitlab.com/gitlab-org/gitlab-ee/issues/10270#note_183498701 to remove unused column `milestone_id` from `epics` table.","state":"closed","created_at":"2019-07-15T14:52:03.712Z","updated_at":"2022-05-19T16:06:25.264Z","closed_at":"2020-01-28T12:45:07.027Z","closed_by":{"id":4418630,"username":"johnhope","name":"John Hope","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4418630/avatar.png","web_url":"https://gitlab.com/johnhope"},"labels":["Category:Portfolio Management","Enterprise Edition","[deprecated] Accepting merge requests","backend","database","devops::plan","epics","group::product planning"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[],"author":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"type":"ISSUE","assignee":null,"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12854","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12854","notes":"https://gitlab.com/api/v4/projects/278964/issues/12854/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12854/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12854","relative":"#12854","full":"gitlab-org/gitlab#12854"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699675,"iid":30112,"project_id":278964,"title":"Private/Internal (Sub)Group email notifications not sent when mentioned in MR description","description":"### Summary\nWhenever a group or subgroup is mentioned in the description of a MR, if the group or subgroup visibility is private or internal, no one on those groups will be notified by email.\n\nThis only happens for mention in the description. Mentions in comments/discussions work as expected.\n\n### Steps to reproduce\n\n1. Create a private or internal visibility group or subgroup and assign some people to it with correct notifications that would enable them to receive mail notifications\n2. Edit the description of a MR and mention the target (sub)group\n3. Check if the (sub)group members receive the notification\n\n### What is the current *bug* behavior?\n\nMail notification is not sent\n\n### What is the expected *correct* behavior?\n\nEveryone belonging to the (sub)group and with correct notification level should receive an email when mentioned in the description of a Merge Request, no matter the visibility level.\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\n\nSystem information\n\nSystem: Debian 8.11\n\nCurrent User: git\n\nUsing RVM: no\n\nRuby Version: 2.6.3p62\n\nGem Version: 2.7.9\n\nBundler Version:1.17.3\n\nRake Version: 12.3.2\n\nRedis Version: 3.2.12\n\nGit Version: 2.21.0\n\nSidekiq Version:5.2.7\n\nGo Version: unknown\n\n\n \n\nGitLab information\n\nVersion: 12.0.3\n\nRevision: 08a51a9db93\n\nDirectory: /opt/gitlab/embedded/service/gitlab-rails\n\nDB Adapter: PostgreSQL\n\nDB Version: 10.7\n\nURL: -\n\nHTTP Clone URL: -\n\nSSH Clone URL: -\n\nUsing LDAP: no\n\nUsing Omniauth: yes\n\nOmniauth Providers: \n\n\n \n\nGitLab Shell\n\nVersion: 9.3.0\n\nRepository storage paths:\n\n- default: /var/opt/gitlab/git-data/repositories\n\nGitLab Shell path: /opt/gitlab/embedded/service/gitlab-shell\n\nGit: /opt/gitlab/embedded/bin/git\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\nThe programs included with the Debian GNU/Linux system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nLast login: Wed Jul 10 16:59:39 2019 from 172.16.31.11\ndebian@gitlab:~$ sudo gitlab-rake gitlab:env:info\n\nSystem information\nSystem:\t\tDebian 8.11\nCurrent User:\tgit\nUsing RVM:\tno\nRuby Version:\t2.6.3p62\nGem Version:\t2.7.9\nBundler Version:1.17.3\nRake Version:\t12.3.2\nRedis Version:\t3.2.12\nGit Version:\t2.21.0\nSidekiq Version:5.2.7\nGo Version:\tunknown\n\nGitLab information\nVersion:\t12.0.3\nRevision:\t08a51a9db93\nDirectory:\t/opt/gitlab/embedded/service/gitlab-rails\nDB Adapter:\tPostgreSQL\nDB Version:\t10.7\nURL:\t\t-\nHTTP Clone URL:\t-\nSSH Clone URL:\t-\nUsing LDAP:\tno\nUsing Omniauth:\tyes\nOmniauth Providers: \n\nGitLab Shell\nVersion:\t9.3.0\nRepository storage paths:\n- default: \t/var/opt/gitlab/git-data/repositories\nGitLab Shell path:\t\t/opt/gitlab/embedded/service/gitlab-shell\nGit:\t\t/opt/gitlab/embedded/bin/git\ndebian@gitlab:~$ sudo gitlab-rake gitlab:check SANITIZE=true\nChecking GitLab subtasks ...\n\nChecking GitLab Shell ...\n\nGitLab Shell: ... GitLab Shell version \u003e= 9.3.0 ? ... OK (9.3.0)\nRunning /opt/gitlab/embedded/service/gitlab-shell/bin/check\nCheck GitLab API access: OK\nRedis available via internal API: OK\n\nAccess to /var/opt/gitlab/.ssh/authorized_keys: OK\ngitlab-shell self-check successful\n\nChecking GitLab Shell ... Finished\n\nChecking Gitaly ...\n\nGitaly: ... default ... OK\n\nChecking Gitaly ... Finished\n\nChecking Sidekiq ...\n\nSidekiq: ... Running? ... yes\nNumber of Sidekiq processes ... 1\n\nChecking Sidekiq ... Finished\n\nChecking Incoming Email ...\n\nIncoming Email: ... Reply by email is disabled in config/gitlab.yml\n\nChecking Incoming Email ... Finished\n\nChecking LDAP ...\n\nLDAP: ... LDAP is disabled in config/gitlab.yml\n\nChecking LDAP ... Finished\n\nChecking GitLab App ...\n\nGit configured correctly? ... yes\nDatabase config exists? ... yes\nAll migrations up? ... yes\nDatabase contains orphaned GroupMembers? ... no\nGitLab config exists? ... yes\nGitLab config up to date? ... yes\nLog directory writable? ... yes\nTmp directory writable? ... yes\nUploads directory exists? ... yes\nUploads directory has correct permissions? ... yes\nUploads directory tmp has correct permissions? ... yes\nInit script exists? ... skipped (omnibus-gitlab has no init script)\nInit script up-to-date? ... skipped (omnibus-gitlab has no init script)\nProjects have namespace: ... \n3/3 ... yes\n3/4 ... yes\n3/5 ... yes\n3/6 ... yes\n3/7 ... yes\n3/8 ... yes\n3/9 ... yes\n3/10 ... yes\n3/11 ... yes\n3/12 ... yes\n3/13 ... yes\n3/14 ... yes\n3/15 ... yes\n14/17 ... yes\n14/18 ... yes\n14/19 ... yes\n14/20 ... yes\n14/21 ... yes\n14/22 ... yes\n14/23 ... yes\n14/24 ... yes\n14/25 ... yes\n7/28 ... yes\n7/31 ... yes\n7/32 ... yes\n16/33 ... yes\n16/34 ... yes\n16/35 ... yes\n3/37 ... yes\n15/38 ... yes\n15/39 ... yes\n15/40 ... yes\n15/41 ... yes\n15/42 ... yes\n15/43 ... yes\n15/44 ... yes\n15/45 ... yes\n15/46 ... yes\n17/47 ... yes\n17/48 ... yes\n3/49 ... yes\n3/50 ... yes\n3/51 ... yes\n3/52 ... yes\n3/53 ... yes\n3/54 ... yes\n3/55 ... yes\n3/56 ... yes\n3/57 ... yes\n3/58 ... yes\n17/59 ... yes\n17/60 ... yes\n17/61 ... yes\n7/62 ... yes\n6/63 ... yes\n3/64 ... yes\n42/69 ... yes\n42/70 ... yes\n42/71 ... yes\n42/72 ... yes\n42/73 ... yes\n42/74 ... yes\n42/75 ... yes\n42/76 ... yes\n42/77 ... yes\n42/78 ... yes\n42/79 ... yes\n42/80 ... yes\n42/81 ... yes\n42/82 ... yes\n42/83 ... yes\n42/84 ... yes\n42/85 ... yes\n42/86 ... yes\n42/87 ... yes\n42/88 ... yes\n42/89 ... yes\n42/90 ... yes\n42/91 ... yes\n42/92 ... yes\n42/93 ... yes\n42/94 ... yes\n42/95 ... yes\n42/96 ... yes\n42/97 ... yes\n42/98 ... yes\n42/99 ... yes\n42/100 ... yes\n42/101 ... yes\n42/102 ... yes\n42/103 ... yes\n42/104 ... yes\n42/105 ... yes\n42/106 ... yes\n42/107 ... yes\n42/108 ... yes\n42/109 ... yes\n42/110 ... yes\n42/111 ... yes\n42/112 ... yes\n42/113 ... yes\n42/114 ... yes\n42/115 ... yes\n42/116 ... yes\n42/117 ... yes\n42/118 ... yes\n42/119 ... yes\n42/120 ... yes\n42/121 ... yes\n42/122 ... yes\n42/123 ... yes\n42/124 ... yes\n42/125 ... yes\n42/126 ... yes\n42/127 ... yes\n42/128 ... yes\n42/129 ... yes\n42/130 ... yes\n42/131 ... yes\n42/132 ... yes\n42/133 ... yes\n44/165 ... yes\n44/166 ... yes\n44/167 ... yes\n44/168 ... yes\n44/169 ... yes\n44/170 ... yes\n3/171 ... yes\n3/175 ... yes\n17/178 ... yes\n3/179 ... yes\n3/181 ... yes\n70/182 ... yes\n70/184 ... yes\n70/185 ... yes\n55/186 ... yes\n70/187 ... yes\n70/188 ... yes\n70/190 ... yes\n60/241 ... yes\n60/242 ... yes\n60/243 ... yes\n60/244 ... yes\n60/245 ... yes\n60/246 ... yes\n60/247 ... yes\n60/248 ... yes\n60/249 ... yes\n60/250 ... yes\n60/251 ... yes\n60/252 ... yes\n60/253 ... yes\n60/254 ... yes\n60/255 ... yes\n60/256 ... yes\n60/257 ... yes\n60/258 ... yes\n60/259 ... yes\n60/260 ... yes\n60/261 ... yes\n60/262 ... yes\n60/263 ... yes\n60/264 ... yes\n60/265 ... yes\n60/266 ... yes\n60/267 ... yes\n60/268 ... yes\n60/269 ... yes\n60/270 ... yes\n60/271 ... yes\n60/272 ... yes\n60/273 ... yes\n60/274 ... yes\n60/275 ... yes\n60/276 ... yes\n60/277 ... yes\n60/278 ... yes\n60/279 ... yes\n60/280 ... yes\n60/281 ... yes\n60/282 ... yes\n60/283 ... yes\n60/284 ... yes\n60/285 ... yes\n60/286 ... yes\n60/287 ... yes\n60/288 ... yes\n60/289 ... yes\n42/295 ... yes\n70/296 ... yes\n70/298 ... yes\n68/299 ... yes\n68/300 ... yes\n68/301 ... yes\n68/302 ... yes\n68/303 ... yes\n68/304 ... yes\n68/305 ... yes\n68/306 ... yes\n68/307 ... yes\n68/308 ... yes\n68/309 ... yes\n68/310 ... yes\n68/311 ... yes\n68/312 ... yes\n68/313 ... yes\n68/314 ... yes\n68/315 ... yes\n68/316 ... yes\n68/317 ... yes\n68/318 ... yes\n68/319 ... yes\n68/320 ... yes\n68/321 ... yes\n68/322 ... yes\n68/323 ... yes\n68/324 ... yes\n68/325 ... yes\n68/326 ... yes\n68/327 ... yes\n68/328 ... yes\n68/329 ... yes\n68/330 ... yes\n68/331 ... yes\n68/332 ... yes\n68/333 ... yes\n68/334 ... yes\n68/335 ... yes\n68/336 ... yes\n68/337 ... yes\n68/338 ... yes\n68/339 ... yes\n68/340 ... yes\n68/341 ... yes\n68/342 ... yes\n68/343 ... yes\n68/344 ... yes\n68/345 ... yes\n68/346 ... yes\n68/347 ... yes\n67/348 ... yes\n67/349 ... yes\n67/350 ... yes\n67/351 ... yes\n67/352 ... yes\n67/353 ... yes\n3/354 ... yes\n76/356 ... yes\n3/359 ... yes\n75/360 ... yes\n3/362 ... yes\n76/363 ... yes\n76/364 ... yes\n82/365 ... yes\n82/368 ... yes\n82/369 ... yes\n82/370 ... yes\n76/371 ... yes\n60/372 ... yes\nRedis version \u003e= 2.8.0? ... yes\nRuby version \u003e= 2.5.3 ? ... yes (2.6.3)\nGit version \u003e= 2.21.0 ? ... yes (2.21.0)\nGit user has default SSH configuration? ... yes\nActive users: ... 46\n\nChecking GitLab App ... Finished\n\n\nChecking GitLab subtasks ... Finished\n\n\u003c/pre\u003e\n\u003c/details\u003e","state":"closed","created_at":"2019-07-15T13:04:03.730Z","updated_at":"2022-05-19T16:06:34.958Z","closed_at":"2019-10-11T15:30:50.411Z","closed_by":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"labels":["backend","devops::plan","group::project management","notifications","priority::3","severity::3","type::bug","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":968020,"username":"andre.isnt","name":"AndrÃ© Santos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/968020/avatar.png","web_url":"https://gitlab.com/andre.isnt"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":8,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30112","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30112","notes":"https://gitlab.com/api/v4/projects/278964/issues/30112/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30112/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30112","relative":"#30112","full":"gitlab-org/gitlab#30112"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699669,"iid":30111,"project_id":278964,"title":"Invalid gitlab-ci.yml generates Pipelines for merge requests without intention","description":"### Summary\n\nA pipeline ran for a Merge Request and has the `detached` label and we can't identify why. The pipeline was in failure. When a more recent pipeline ran and is successful, the pipeline taken into consideration for the merge request is not the successful one and, when the configuration allows to merge the MR only when the pipeline is successfull, this bug wrongly blocks the approval process!\n\n### Why it happens\n\nWhen users push a new commit to a merge request (i.e. source branch), there are two pipeline creation events happen 1. `push` pipeline creation 2. `merge-requests` pipeline creation. Most of the pipeline, the `merge-requests` pipeline creation is filtered out by the default `only/except` rules i.e. `only: [branches, tags]`, however, when the gitlab-ci.yml is invalid, the `merge-requests` pipeline creation reacts to the event and thus creates two pipelines regardless of that the MR author doesn't have an intention to turn on [Pipelines for merge requests](https://docs.gitlab.com/ee/ci/merge_request_pipelines/).\n\nWe should ignore pipeline creation when yaml is invalid.\n\n### Steps to reproduce\n\nWe don't know why the detached label was affected... Documentation is unclear about it...\n\n### What is the current *bug* behavior?\n\nA failing pipeline with the `detached` label is taken into consideration as result for a MR while a most recent and succesfull exists.\n\n### What is the expected *correct* behavior?\n\nThe most recent successful pipeline should be taken into consideration.\n\n### Relevant logs and/or screenshots\n\n![merge_request_pipeline_ignored](/uploads/c2052caffeb145f17559536b2e9e3a60/merge_request_pipeline_ignored.png)\n\n### Output of checks\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\nGitLab version: GitLab Enterprise Edition 11.11.5-ee, Silver\n\u003c/pre\u003e\n\u003c/details\u003e","state":"closed","created_at":"2019-07-15T12:53:55.608Z","updated_at":"2022-03-28T14:51:01.431Z","closed_at":"2022-01-17T12:17:59.415Z","closed_by":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"labels":["Category:Continuous Delivery","Category:Merge Trains","[deprecated] Accepting merge requests","cicd::active","devops::verify","group::pipeline execution","missed-deliverable","missed:12.10","missed:12.7","missed:12.8","missed:12.9","missed:13.10","missed:13.5","pipeline","priority::3","section::ops","severity::3","type::bug","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":2028130,"username":"twasyl","name":"Thierry Wasylczenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2028130/avatar.png","web_url":"https://gitlab.com/twasyl"},"type":"ISSUE","assignee":null,"user_notes_count":42,"merge_requests_count":1,"upvotes":15,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30111","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30111","notes":"https://gitlab.com/api/v4/projects/278964/issues/30111/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30111/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30111","relative":"#30111","full":"gitlab-org/gitlab#30111"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6044,"epic":{"id":274363,"iid":6044,"title":"Stop unexpected MR pipelines","url":"/groups/gitlab-org/-/epics/6044","group_id":9970,"human_readable_end_date":"May 17, 2023","human_readable_timestamp":"\u003cstrong\u003eUpcoming\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22796748,"iid":12848,"project_id":278964,"title":"Support  DS_PYTHON_VERSION variable in gemnasium-python","description":"### Problem to solve\n\nWe have introduced `DS_PYTHON_VERSON` variable to [retire.js](https://gitlab.com/gitlab-org/security-products/analyzers/retire.js) analyzer. https://gitlab.com/gitlab-org/gitlab/issues/12296\n. It seems it is only leveraged in retire.js analyzer, not in the [gemnasium-python](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python). We would like gemnasium-python to use this variable to switch between python versions. \n\n### Intended users\n\n~\"Persona: Software developer\" \n\n### Proposal\n \n~~Make gemnasium-python leverage `DS_PYTHON_VERSION` to switch b/w different versions of Python run-time, or build different multiple images to cover multiple versions of Python, and inject `DS_PYTHON_VERSION` in the `image:name` of the `gemnasium-python-dependency_scanning` job.~~\n\n~~**TBD:** Would we only support major versions of Python, or would we support all minor versions?~~\n\n\n\n**UPDATE:**\n\n**The proper long term solution is splitting build and analyze steps, as a result, the work has moved to this epic - https://gitlab.com/groups/gitlab-org/-/epics/3974. Please report any issues in that epic. Please specify your python version as well as any error message logs.**\n\n\n\n\n\n### Permissions and Security\n\nNo special permissions\n\n### Documentation\n\n- [ ] Update the documentation for `DS_PYTHON_VERSION` in [Dependency Scanning documentation](https://docs.gitlab.com/ee/user/application_security/dependency_scanning/index.html#available-variables)\n\n### Testing\n\nTo be tested during automatic QA using specific branches of [python-pip](https://gitlab.com/gitlab-org/security-products/tests/python-pip) and [python-pipenv](https://gitlab.com/gitlab-org/security-products/tests/python-pipenv].\n\n### What does success look like, and how can we measure that?\n\nUsers should be able to switch between python 2 or 3 by adjusting this variable when they scan their python projects.\n\n### What is the type of buyer? \n\n- Internal customers\n- ~\"GitLab Ultimate\" users\n\n### Product\n- Release Post - Not Needed","state":"closed","created_at":"2019-07-15T10:00:58.797Z","updated_at":"2020-08-24T18:14:25.347Z","closed_at":"2020-07-28T13:52:32.455Z","closed_by":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"labels":["AST Leadership","Category:Dependency Scanning","Enterprise Edition","GitLab Ultimate","backend","customer","devops::secure","group::composition analysis","internal customer","missed-deliverable","missed:12.6","missed:12.7","missed:12.8","missed:12.9","type::feature","wontfix","workflow::blocked"],"milestone":null,"assignees":[{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"}],"author":{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"},"type":"ISSUE","assignee":{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"},"user_notes_count":34,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12848","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12848","notes":"https://gitlab.com/api/v4/projects/278964/issues/12848/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12848/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12848","relative":"#12848","full":"gitlab-org/gitlab#12848"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1400,"epic":{"id":7868,"iid":1400,"title":"Improve Dependency Scanning support for Python","url":"/groups/gitlab-org/-/epics/1400","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22787562,"iid":12842,"project_id":278964,"title":"Perform upgrade of Geo cluster GitLab EE 11.7 -\u003e 11.8","description":"Verify that an upgrade from GitLab EE 11.7 -\u003e 11.8 for a Geo cluster requires no downtime and works without issue.","state":"closed","created_at":"2019-07-15T04:10:49.555Z","updated_at":"2019-12-11T20:02:13.271Z","closed_at":"2019-07-18T23:51:22.671Z","closed_by":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"labels":["Enterprise Edition","Geo Administration","customer+","devops::systems","group::geo","workflow::in dev"],"milestone":{"id":693520,"iid":34,"group_id":9970,"title":"12.1","description":"https://about.gitlab.com/releases/2019/07/22/gitlab-12-1-released","state":"closed","created_at":"2018-10-30T16:47:58.826Z","updated_at":"2020-04-27T16:30:09.107Z","due_date":"2019-07-22","start_date":"2019-06-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/34"},"assignees":[{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"}],"author":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"type":"ISSUE","assignee":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12842","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12842","notes":"https://gitlab.com/api/v4/projects/278964/issues/12842/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12842/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12842","relative":"#12842","full":"gitlab-org/gitlab#12842"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22782316,"iid":12823,"project_id":278964,"title":"Extend group SCIM to instance level for self-managed users","description":"Manage:Auth\n\n## Overview\nExtending group SCIM to self-managed GitLab will allow admins end-to-end user lifecycle management, namely,  deprovisioning users who are at the end of their lifecycle. This means that users that are deactivated in the identity provider are automatically deactivated in GitLab. Previously, this required a manual step.\n\n[SAML SSO](https://docs.gitlab.com/ee/user/group/saml_sso/) was originally introduced as a feature for groups on GitLab.com. We should extend this feature beyond GitLab.com and make it usable for self-managed instances. \n\n## Problem statement\n\nSAML SSO was primarily created to serve as a mechanism for groups on GitLab.com to begin using SAML SSO. We've iterated on this and created a nice feature with attractive features like SSO enforcement and group-managed accounts. We'd like to keep iterating and add capabilities like [group sync](https://gitlab.com/gitlab-org/gitlab/issues/118) for permissions.\n\nHowever, Group SSO is largely for GitLab.com and not self-managed. On [self-managed](https://docs.gitlab.com/ee/integration/saml.html#saml-omniauth-provider), we offer a different set of capabilities. For example:\n\n* Self-managed offers Required Groups, Admin Groups, Auditor Groups, and 2FA bypass.\n* GitLab.com does not offer the above, but offers capabilities like SSO enforcement, group-managed accounts, and SCIM.\n\nIdeally, SAML capabilities should be identical across delivery mechanisms and not require us to develop these features on separate tracks:\n* A self-managed instance using SAML should be able to use SCIM and SSO enforcement.\n\n## Proposal\n\nTBD\n\n## Links\n\nhttps://gitlab.com/gitlab-org/gitlab/merge_requests/13965","state":"closed","created_at":"2019-07-14T22:37:01.318Z","updated_at":"2022-12-26T01:17:06.065Z","closed_at":"2022-10-03T01:23:21.251Z","closed_by":{"id":12519771,"username":"adil.farrukh","name":"Adil Farrukh","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12519771/avatar.png","web_url":"https://gitlab.com/adil.farrukh"},"labels":["CAB Takeaway","CAB Takeaway Q3 FY2022","Deliverable","Enterprise Edition","FY23:ROADMAP","Stretch","[deprecated] Accepting merge requests","backend","customer","devops::manage","group::authentication and authorization","missed-deliverable","missed:15.3","planning priority","saml","section::dev","type::feature","workflow::scheduling"],"milestone":null,"assignees":[],"author":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"type":"ISSUE","assignee":null,"user_notes_count":90,"merge_requests_count":0,"upvotes":33,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12823","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12823","notes":"https://gitlab.com/api/v4/projects/278964/issues/12823/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12823/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12823","relative":"#12823","full":"gitlab-org/gitlab#12823"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3182,"epic":{"id":47657,"iid":3182,"title":"Parity between GitLab.com and self-managed","url":"/groups/gitlab-org/-/epics/3182","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":24699651,"iid":30101,"project_id":278964,"title":"Generate Run Pipeline form with pre-filled variables from .gitlab-ci.yml","description":"### Release notes \n\n\u003c!-- What is the problem and solution you're proposing? This content sets the overall vision for the feature and serves as the release notes that will populate in various places, including the [release post blog](https://about.gitlab.com/releases/categories/releases/) and [Gitlab project releases](https://gitlab.com/gitlab-org/gitlab/-/releases). \" --\u003e\n\nPreviously when you wanted to manually run a pipeline, you needed to know the relevant variables and then enter them on the \"Run Pipeline\" page. This can be tediously and error-prone if there are numerous key/value pairs to enter. Now the Run Pipeline form wil generate with pre-filled variables for your pipeline based on the variable definitions in your .gitlab-ci.yml file.\n\n### Problem to solve\n\nOn the Pipelines page ([example](https://gitlab.com/gitlab-org/gitlab/-/pipelines)) when `Run Pipeline` button is selected, the \"Run Pipeline\" form ([example](https://gitlab.com/gitlab-org/gitlab/-/pipelines/new)) only displays a simplistic form that assumes the user knows every variable name (key) and value that needs to be entered which is problematic for these reasons:\n- user may not know all the required variable key/values that must be entered\n- the task is tedious and inefficient when there are many key/values to enter \n- manual entry is error-prone\n\n### Intended users\n\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n* Any user that needs to manually trigger pipelines, typically a developer or devops engineer  \n\n### User experience goal\n\n\u003c!-- What is the single user experience workflow this problem addresses? \nFor example, \"The user should be able to use the UI/API/.gitlab-ci.yml with GitLab to \u003cperform a specific task\u003e\"\nhttps://about.gitlab.com/handbook/engineering/ux/ux-research-training/user-story-mapping/ --\u003e \n\n### Proposal\n\nWhen `Run Pipeline` is selected, the form that allows the user to add variable definitions for running a pipeline or playing a job has pre-filled key/value pairs in the input fields based on variable definitions in the .gitlab-ci.yml file.\n\nExample:\n  ```yaml\n variables:\n   TEST:\n     value: \"some value\" # this would be the default value\n     description: \"This variable makes cakes delicious\" # makes this variable appear on the Run Pipeline form\n```\n\nNOTE: Only variables with keyword `description` will pre-fill on the Run Pipeline form. This is to differentiate variables to surface as \"inputs\" vs variables just for passing information between jobs; we want to avoid surfacing **all** variables in a `.gitlab-ci.yml` as \"inputs\". \n\n### Further details\n\nClarifications and notes from comments:\n1. Variables defined in `.gitlab-ci.yml` are pipeline inputs at the root level (not job inputs)\n1. \"Play manual job\" button is not in scope for this issue\n\n\n[Original author's note] We have about 100 developers who are running pipelines or playing jobs daily and need to set 6-10 variables every time they do so.  Having to cut and paste each variable name in addition to the value is tedious, and potentially time consuming if they leave out a required variable and have to start another pipeline.\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?\nConsider adding checkboxes and expectations of users with certain levels of membership https://docs.gitlab.com/ee/user/permissions.html\n* [ ] Add expected impact to members with no access (0)\n* [ ] Add expected impact to Guest (10) members\n* [ ] Add expected impact to Reporter (20) members\n* [ ] Add expected impact to Developer (30) members \n* [ ] Add expected impact to Maintainer (40) members\n* [ ] Add expected impact to Owner (50) members --\u003e\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/workflow.html#for-a-product-change\n\n* Add all known Documentation Requirements in this section. See https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements\n* If this feature requires changing permissions, update the permissions document. See https://docs.gitlab.com/ee/user/permissions.html --\u003e\n\n### Availability \u0026 Testing\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e\n\n* Unit test changes - Yes, there should be unit tests created for any new added logics\n* Integration test changes - Yes, there should be integration feature specs to see variable render in UI with the expected description.\n* End-to-end test change - Not required.\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n### What is the type of buyer?\n\n\u003c!-- What is the buyer persona for this feature? See https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/buyer-persona/\nIn which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\n\n### Is this a cross-stage feature?\n\n\u003c!-- Communicate if this change will affect multiple Stage Groups or product areas. We recommend always start with the assumption that a feature request will have an impact into another Group. Loop in the most relevant PM and Product Designer from that Group to provide strategic support to help align the Group's broader plan and vision, as well as to avoid UX and technical debt. https://about.gitlab.com/handbook/product/#cross-stage-features --\u003e\n\n### Links / references\n\nhttps://gitlab.com/gitlab-org/gitlab-ce/issues/24935 Specify variables when running a manual job\n\nhttps://gitlab.com/gitlab-org/gitlab-ce/issues/35896 Passing variables to CI/CD pipelines in all possible scenarios\n\nhttps://gitlab.com/gitlab-org/gitlab-ce/issues/48974 Pipeline variables to be shown on the pipeline run page","state":"closed","created_at":"2019-07-12T21:26:20.843Z","updated_at":"2022-12-21T09:51:56.940Z","closed_at":"2022-01-17T13:24:20.270Z","closed_by":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"labels":["CI variables","CI/CD Core Platform","Category:Continuous Integration","Category:Secrets Management","Deliverable","UX","backend","backend-weight::3","customer","depth","devops::verify","direction","documentation","frontend","frontend-weight::3","group::pipeline execution","missed-deliverable","missed:13.5","missed:13.6","missed:13.7","planning priority","quad-planning::complete-action","section::ops","type::feature","workflow::production"],"milestone":{"id":1233757,"iid":54,"group_id":9970,"title":"13.7","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:43:14.893Z","updated_at":"2022-04-13T14:51:12.240Z","due_date":"2020-12-17","start_date":"2020-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/54"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"}],"author":{"id":3446778,"username":"bgalbrecht","name":"Bruce Albrecht","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5803dbbd0cc1b26ccab36b20659a5519?s=80\u0026d=identicon","web_url":"https://gitlab.com/bgalbrecht"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":209,"merge_requests_count":0,"upvotes":156,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30101","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":0},"weight":6,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30101","notes":"https://gitlab.com/api/v4/projects/278964/issues/30101/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30101/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30101","relative":"#30101","full":"gitlab-org/gitlab#30101"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":24699643,"iid":30096,"project_id":278964,"title":"Nested GraphQL query with circular relationship can cause Denial of Service","description":"**[HackerOne report #638282](https://hackerone.com/reports/638282)** by `freddd` on 2019-07-09, assigned to `estrike`:\n\nSecurity issue on dev: https://dev.gitlab.org/gitlab/gitlabhq/issues/2903\n\n### Summary\n\nDue to a circular relationship in the GraphQL schema as seen in the \"Steps to reproduce\" it's possible to create a query that becomes exponentially more complex with almost no effort that can ultimately lead to Denial of Service. Note that I have only tested with a couple of `small` queries to not cause any service disruption.\n\nURL: https://gitlab.com/api/graphql through https://gitlab.com/-/graphql-explorer or using any http client  \nAuthentication: None needed  \nIP used: 81.224.134.248, all of the tests were carried out manually.\n\n### Steps to reproduce\n\n1. There is no preconditions other than having curl/postman/insomnia or using the graphql-explorer  \n2. Use the following body in the GraphQL call, you can increase the number of nested levels indefinitely getting an exponentially larger response each time.\n\n```  \nquery allSchemaTypes {  \n    __schema {  \n        types {  \n            fields {  \n                type{  \n                    fields {  \n                        type {  \n                            fields {  \n                                type {  \n                                    fields {  \n                                        name  \n                                    }  \n                                }  \n                            }  \n                        }  \n                    }  \n                }  \n            }  \n        }  \n    }  \n}\n```  \n3. Press send in Postman or through the graphql-explorer\n\n### Impact\n\nThe impact if this attack were to be executed could be denial of service and reducing the availability of the GraphQL API. Depending on the underlying architecture the attack could be cascading as it can potentially use all resources on the web-server.\n\n### Examples\n\n\n### What is the current *bug* behavior?\n\nA call with the example body resulted in a request with a response of the size 93.5 KB. Nesting one level further resulted in a request with the response size being 139.36 KB. As you can see the size is increasing by each nesting and there is no limit on how many levels one can ask for (as far as I can tell). The largest query I ran before stopping took 18341 ms and had a response size of 2.35 MB.\n\nIt's worth mentioning that this applies to all circular relationships in the schema not only to the introspection query that is being used in this example.\n\nA malicious party could write a simple script generating a huge query and execute it in parallel causing the web server(s) to run out of resources handling the requests due to CPU and/or RAM consumption.\n\n### What is the expected *correct* behavior?\n\nI would expect to get an error message after an arbitrary number of levels as usually each API has a max number of levels that is reasonable. I would also expect to have a rate limit on query complexity as usually there are parts of the schema that might be heavier or less likely to be cached than others, etc.\n\nThere are multiple strategies on how to deal with this type of attack, you can either rate limit on depth (levels of nesting), on complexity, on query size and so on. This blog post describes it in better detail: https://blog.apollographql.com/securing-your-graphql-api-from-malicious-queries-16130a324a6b\n\n### Relevant logs and/or screenshots  \nI have attached the following:  \n* A screenshot on a call in postman  \n* A screenshot on the same call in the graphql-explorer  \n* The response from postman as a .json file\n\n### Output of checks\n\nThis bug happens on https://gitlab.com/api/graphql\n\n#### Results of GitLab environment info\n\nPlease let me know if you need more information or want me to clarify something,\n\n/Fredrik\n\n## Impact\n\nDenial of service of the GraphQL API and possibly cascading problems depending on the underlying architecture.\n\n## Attachments\n**Warning:** Attachments received through HackerOne, please exercise caution!\n* [gitlab-gql2.png](https://h1.sec.gitlab.net/a/96637882-bfab-4e32-9c76-5ec74c697719/gitlab-gql2.png)\n* [gitlab-gql.png](https://h1.sec.gitlab.net/a/cec10d22-76e0-4e81-9585-fa16d55c0eb3/gitlab-gql.png)\n* [gitlab.json](https://h1.sec.gitlab.net/a/355d95c5-8044-4197-b7c3-23cbc19cd81c/gitlab.json)","state":"closed","created_at":"2019-07-12T18:50:39.169Z","updated_at":"2022-05-19T16:06:34.312Z","closed_at":"2019-11-07T11:34:23.424Z","closed_by":{"id":4086191,"username":"cmaxim","name":"Costel Maxim","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4086191/avatar.png","web_url":"https://gitlab.com/cmaxim"},"labels":["Application Limits","Deliverable","GraphQL","HackerOne","backend","devops::plan","group::project management","priority::3","security","severity::3","workflow::verification"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"user_notes_count":31,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-09-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30096","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30096","notes":"https://gitlab.com/api/v4/projects/278964/issues/30096/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30096/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30096","relative":"#30096","full":"gitlab-org/gitlab#30096"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1832,"epic":{"id":11589,"iid":1832,"title":"Project Management application limits","url":"/groups/gitlab-org/-/epics/1832","group_id":9970,"human_readable_end_date":"Apr 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24699641,"iid":30094,"project_id":278964,"title":"Get list of runners associated with specific group","description":"### Problem to solve\n\nThere is no API (or no documentation of one) for getting the list of runners for a specific group.\n\n### Intended users\n\nDevelopers, DevOps Engineer, System Administrators\n\n### Further details\n\nThis API is available for project-specific runners, but does not appear to be available for group-specific runners.\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\nAdd a GET request for a list of runners at the Group level.\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)? --\u003e\n\nThis should be the same permissions as https://gitlab.com/help/api/runners.md#list-projects-runners\n\n### Documentation\n\nThe project-level documentation is at https://gitlab.com/help/api/runners.md#list-projects-runners\n\n### Links / references\n\nhttps://gitlab.com/help/api/runners.md#list-projects-runners","state":"closed","created_at":"2019-07-12T17:40:45.308Z","updated_at":"2020-04-18T07:08:07.266Z","closed_at":"2020-03-30T17:17:04.562Z","closed_by":{"id":4014344,"username":"aishbuilds","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4014344/avatar.png","web_url":"https://gitlab.com/aishbuilds"},"labels":["Category:Subgroups","Deliverable","api","backend","customer","customer+","devops::manage","estimation::completed","group::spaces DEPRECATED","missed-deliverable","missed:12.9","priority::3","type::feature","workflow::verification"],"milestone":{"id":1104429,"iid":46,"group_id":9970,"title":"12.10","description":"https://about.gitlab.com/releases/2020/04/22/gitlab-12-10-released","state":"closed","created_at":"2019-12-20T15:15:53.243Z","updated_at":"2020-10-08T12:00:39.852Z","due_date":"2020-04-17","start_date":"2020-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/46"},"assignees":[{"id":4014344,"username":"aishbuilds","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4014344/avatar.png","web_url":"https://gitlab.com/aishbuilds"}],"author":{"id":3294395,"username":"kmitche71","name":"Kevin L. Mitchell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f90c8ac8a5257f239284a7dd41901772?s=80\u0026d=identicon","web_url":"https://gitlab.com/kmitche71"},"type":"ISSUE","assignee":{"id":4014344,"username":"aishbuilds","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4014344/avatar.png","web_url":"https://gitlab.com/aishbuilds"},"user_notes_count":9,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30094","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30094","notes":"https://gitlab.com/api/v4/projects/278964/issues/30094/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30094/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30094","relative":"#30094","full":"gitlab-org/gitlab#30094"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22743812,"iid":12814,"project_id":278964,"title":"Delete code in  ee/app/models/vulnerabilities/feedback.rb now that we're on Rails 5.2","description":"## Summary\n\n~~From the comments [here](https://gitlab.com/gitlab-org/gitlab/-/blob/acdcbf1212c077f0d903c2098b739473880a8615/ee/app/models/vulnerabilities/feedback.rb#L52-53), `Vulnerabilities::Feedback#validate_enums` and calls to it can be deleted now that we're on Rails 5.2.  See original MR and discussion https://gitlab.com/gitlab-org/gitlab/-/merge_requests/10016~~\n\nRemove comment mentioning deleting code once we move to Rails 5.2\n\n## Improvements\n\nWe get to delete code that is no longer needed!\n\n## Risks\n\nInvalid enum values would not be handled properly. We have tests in place to mitigate this problem.\n\n## Involved components\n\nChanges will be limited to `ee/app/models/vulnerabilities/feedback.rb`\n\n## Optional: Intended side effects\n\n\u003c!--\nIf the refactoring involves changes apart from the main improvements (such as a better UI), list them here.\nIt may be a good idea to create separate issues and link them here.\n--\u003e\n\n\n## Optional: Missing test coverage\n\n\u003c!--\nIf you are aware of tests that need to be written or adjusted apart from unit tests for the changed components,\nplease list them here.\n--\u003e","state":"closed","created_at":"2019-07-12T17:16:21.178Z","updated_at":"2020-06-18T07:09:08.541Z","closed_at":"2020-06-15T04:35:33.992Z","closed_by":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"labels":["Deliverable","Enterprise Edition","backend","backstage [DEPRECATED]","devops::secure","group::static analysis","maintenance::refactor","security dashboard","workflow::in review"],"milestone":{"id":1112145,"iid":47,"group_id":9970,"title":"13.1","description":"","state":"closed","created_at":"2020-01-03T12:28:30.160Z","updated_at":"2020-10-08T12:01:07.361Z","due_date":"2020-06-17","start_date":"2020-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/47"},"assignees":[{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"}],"author":{"id":32707,"username":"rossfuhrman","name":"rossfuhrman","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/32707/avatar.png","web_url":"https://gitlab.com/rossfuhrman"},"type":"ISSUE","assignee":{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"},"user_notes_count":12,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12814","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12814","notes":"https://gitlab.com/api/v4/projects/278964/issues/12814/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12814/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12814","relative":"#12814","full":"gitlab-org/gitlab#12814"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22742758,"iid":12812,"project_id":278964,"title":"Geo - Update current limitations for automatic background verification","description":"With https://gitlab.com/gitlab-org/gitlab-ee/issues/8921, we now validate data integrity for attachments and LFS objects on Geo secondary nodes after the transfer and rejects transfers if mismatched. We should update the docs for [background verification](https://docs.gitlab.com/ee/administration/geo/disaster_recovery/background_verification.html#current-limitations) to mention this. \n\n/cc @fzimmer @mkozono","state":"closed","created_at":"2019-07-12T16:19:05.486Z","updated_at":"2019-12-16T14:49:37.650Z","closed_at":"2019-07-16T22:02:31.532Z","closed_by":{"id":2683848,"username":"eread","name":"Evan Read","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2683848/avatar.png","web_url":"https://gitlab.com/eread"},"labels":["Category:Geo Replication","Enterprise Edition","devops::systems","documentation","group::geo","workflow::in review"],"milestone":{"id":693520,"iid":34,"group_id":9970,"title":"12.1","description":"https://about.gitlab.com/releases/2019/07/22/gitlab-12-1-released","state":"closed","created_at":"2018-10-30T16:47:58.826Z","updated_at":"2020-04-27T16:30:09.107Z","due_date":"2019-07-22","start_date":"2019-06-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/34"},"assignees":[{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"}],"author":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"type":"ISSUE","assignee":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"user_notes_count":1,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12812","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12812","notes":"https://gitlab.com/api/v4/projects/278964/issues/12812/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12812/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12812","relative":"#12812","full":"gitlab-org/gitlab#12812"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1430,"epic":{"id":8109,"iid":1430,"title":"Geo: Verify all replicated data","url":"/groups/gitlab-org/-/epics/1430","group_id":9970,"human_readable_end_date":"Jan 1, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22742627,"iid":12811,"project_id":278964,"title":"Allow pip version to be configured in Dependency Scanning","description":"### Problem to solve\n\nAllow installing a custom version of pip registries to fulfill specific needs.\n\n### Intended users\n\n- ~\"Persona: DevOps Engineer\" \n- ~\"Persona: Software developer\" \n\n### Proposal\n\n- [x] Add a `DS_PIP_VERSION` to our [vendored template](https://gitlab.com/gitlab-org/gitlab-ee/blob/master/lib/gitlab/ci/templates/Security/Dependency-Scanning.gitlab-ci.yml) to pass them down to the analyzers.\n - [x] leverage this variables in the [gemnasium-python analyzer](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python) to install a custom version of pip\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)? --\u003e\n\n### Documentation\n\n - [x] add this variable to dependency scanning documentation](https://docs.gitlab.com/ee/user/application_security/dependency_scanning/index.html#available-variables). We probably need to specify that only the `gemnasium-python` analyzer is supporting this option.\n\n### Testing\n\n- [x] find [relevant test projects](https://gitlab.com/explore/projects?tag=Dependency+Scanning,Secure-QA) and make sure pipelines pass\n\n### What does success look like, and how can we measure that?\n\nCustomers can use a specific version of pip.\n\n### What is the type of buyer? \n\n~\"GitLab Ultimate\" \n\n### Links / references\n\n## Product\n- [ ] [Release Notes](https://gitlab.com/gitlab-com/www-gitlab-com/merge_requests/38086)","state":"closed","created_at":"2019-07-12T16:12:11.378Z","updated_at":"2020-01-18T07:09:02.961Z","closed_at":"2020-01-15T16:37:52.534Z","closed_by":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","backend","devops::secure","group::composition analysis","missed-deliverable","missed:12.6","release post item","type::feature","workflow::production"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"}],"author":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"type":"ISSUE","assignee":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"user_notes_count":7,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12811","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":4},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12811","notes":"https://gitlab.com/api/v4/projects/278964/issues/12811/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12811/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12811","relative":"#12811","full":"gitlab-org/gitlab#12811"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1400,"epic":{"id":7868,"iid":1400,"title":"Improve Dependency Scanning support for Python","url":"/groups/gitlab-org/-/epics/1400","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24699615,"iid":30082,"project_id":278964,"title":"Provide a machine-readable GraphQL schema","description":"GitHub provides a public schema for their GraphQL API: https://developer.github.com/v4/public_schema/\n\nWe should do the same, and can do the same as the GraphiQL explorer already uses this.","state":"closed","created_at":"2019-07-12T12:48:13.193Z","updated_at":"2022-05-19T16:06:33.887Z","closed_at":"2019-11-11T17:29:12.557Z","closed_by":{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"},"labels":["Deliverable","GraphQL","backend","devops::plan","documentation","group::project management","missed-deliverable","missed:12.4","type::feature","workflow::in review"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"}],"author":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"type":"ISSUE","assignee":{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30082","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30082","notes":"https://gitlab.com/api/v4/projects/278964/issues/30082/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30082/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30082","relative":"#30082","full":"gitlab-org/gitlab#30082"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1581,"epic":{"id":9465,"iid":1581,"title":"Improve GraphQL generated documentation","url":"/groups/gitlab-org/-/epics/1581","group_id":9970,"human_readable_end_date":"Feb 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22736931,"iid":12806,"project_id":278964,"title":"Custom group-level templates are not accessible for users with 'Developer' role","description":"### Summary\n\nWhen a project maintainer sets a group to be the designated \"custom group-level project template\", the new templates are only accessible to users with Maintainer or above permissions. This should be accessible to any role that has access to create new projects [per the documentation](https://docs.gitlab.com/ee/user/group/custom_project_templates.html). Currently, it looks like it was improperly scoped to the maintainer role https://gitlab.com/gitlab-org/gitlab-ee/blob/master/ee/app/models/ee/user.rb#L184\n\n### Steps to reproduce\n\n1) Setup custom group-level project templates\n2) Login as a user with `developer` role that has the ability to create projects.\n3) Attempt to create a project from a custom project template\n*4) The project templates will be empty for the `developer` user*\n5) Login as a `maintainer`\n6) Create a new project from template \n*7) the project templates will be selectable for `maintainer` role.*\n\n\n### What is the current *bug* behavior?\n\n`Developers` cannot see project templates, even though they are able to create projects. \n\n### What is the expected *correct* behavior?\n\n`Developer` role can access project templates and start projects from them.\n\n\n### Possible fixes\n\nChange this line to https://gitlab.com/gitlab-org/gitlab-ee/blob/master/ee/app/models/ee/user.rb#L184\n\nto `::Gitlab::Access::DEVELOPER)`\n\n### Relevant Support Tickets (internal)\n\n- https://gitlab.zendesk.com/agent/tickets/129651","state":"closed","created_at":"2019-07-12T12:28:27.857Z","updated_at":"2020-01-02T20:58:51.627Z","closed_at":"2019-08-30T08:51:43.903Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Deliverable","Enterprise Edition","Manage [DEPRECATED]","backend","customer","devops::manage","estimation::completed","group::import","internal customer","priority::3","type::bug"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":2230858,"username":"brianwald","name":"Brian Wald","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2230858/avatar.png","web_url":"https://gitlab.com/brianwald"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":8,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12806","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12806","notes":"https://gitlab.com/api/v4/projects/278964/issues/12806/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12806/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12806","relative":"#12806","full":"gitlab-org/gitlab#12806"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699605,"iid":30079,"project_id":278964,"title":"[Value Stream Analytics] Refactor group level to support CE and deprecate project level","description":"#### Problem to solve\nNow that Value Stream Analytics has been added on a group level (https://gitlab.com/gitlab-org/gitlab/issues/196455), there might be no need for the old project level page and this might therefore be removed. Otherwise, this can be confusing to clients and will require additional engineering support.  HOWEVER, Based on https://about.gitlab.com/company/stewardship/ we can't simply remove the old page and not still provide the functionality to CE users. \n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\nPersonas can be found at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\nPMs, EMs\n\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\n* Allow lower tier users to access group-level Value Stream Analytics, with the limitation of only being able to select a single project and not seeing any graphs\n\n* Don't allow [customizable stages](https://gitlab.com/gitlab-org/gitlab/-/issues/12196)\n\n* Remove the old project-level Value Stream Analytics\n\n* `License.feature_available?(:cycle_analytics_advanced)` would need to be passed to the FE and we should be able to display the above mentioned features based on this flag\n\n* For gitlab.com, we have the additional complication that a user can buy a namespace for himself only and can be part of both paid and unpaid groups. The current thinking is that a user can only see information under their paid namespaces/groups.\n\n* https://gitlab.slack.com/archives/C0NFPSFA8/p1562172281158100\n* https://gitlab.slack.com/archives/CJZR6KPB4/p1561724760007500\n\n### Additional links\n\nIssue opened because of https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/30556","state":"closed","created_at":"2019-07-12T10:42:26.508Z","updated_at":"2021-04-01T12:14:37.335Z","closed_at":"2020-06-08T17:40:14.771Z","closed_by":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"labels":["Category:Value Stream Management","Manage [DEPRECATED]","UX","[deprecated] Accepting merge requests","backend","devops::manage","frontend","group::optimize","missed:12.4","priority::2","priority::3","type::feature","workflow::planning breakdown"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"type":"ISSUE","assignee":null,"user_notes_count":50,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30079","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30079","notes":"https://gitlab.com/api/v4/projects/278964/issues/30079/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30079/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30079","relative":"#30079","full":"gitlab-org/gitlab#30079"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1754,"epic":{"id":10749,"iid":1754,"title":"Customizable Cycle Analytics with Charts - Instance Level","url":"/groups/gitlab-org/-/epics/1754","group_id":9970,"human_readable_end_date":"May 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24699604,"iid":30078,"project_id":278964,"title":"Multiple bugs in existing issues/merge requests after project transfer","description":"### Summary\n\nAfter a project is transferred, I found out there are some bugs regarding the existing issues and MRs.\n\n### Steps to reproduce\n\n1. Have some issues and WIP MRs open in a project.\n1. Transfer to a new group.\n1. Find an issue with a milestone and attempt to edit its issue description.\n1. Find an MR with a milestone and attempt to toggle it as WIP. Then attempt to close it.\n\n### Example Project\n\n- https://gitlab.com/gitlab-org/gitlab-docs/issues/310 - Cannot edit the description, check the checklist.\n- https://gitlab.com/gitlab-org/gitlab-docs/merge_requests/486 - Cannot toggle WIP or close the MR.\n\n### What is the current *bug* behavior?\n\nFor items with a milestone inherited from the previous group:\n\n- Cannot edit issue description\n- Cannot toggle WIP from MRs\n- Cannot close MRs\n- MR merged, but the MR didn't enter merged status https://gitlab.com/gitlab-org/gitlab-docs/merge_requests/409#note_191646742\n\n### What is the expected *correct* behavior?\n\nInverse of the above.\n\n### Output of checks\n\nThis bug happens on GitLab.com","state":"closed","created_at":"2019-07-12T10:37:17.116Z","updated_at":"2022-05-19T16:06:33.710Z","closed_at":"2019-09-23T13:46:09.177Z","closed_by":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"labels":["backend","devops::plan","group::project management","missed:12.3","priority::3","severity::3","type::bug","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":3585,"username":"axil","name":"Achilleas Pipinellis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3585/avatar.png","web_url":"https://gitlab.com/axil"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":12,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30078","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30078","notes":"https://gitlab.com/api/v4/projects/278964/issues/30078/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30078/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30078","relative":"#30078","full":"gitlab-org/gitlab#30078"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699590,"iid":30070,"project_id":278964,"title":"Add structured logging for mail_room","description":"https://github.com/tpitale/mail_room/issues/76 is an upstream issue for adding structured logging. We already use structured logging in GitLab itself, so this is a good fit and would give us better visibility.\n\nIt's also important for infrastructure: https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7204\n\nWe have had PRs accepted in the past (many of https://github.com/tpitale/mail_room/pulls?q=is%3Apr+is%3Aclosed are from GitLab team members), so this should be OK to contribute.","state":"closed","created_at":"2019-07-12T08:25:09.007Z","updated_at":"2022-05-19T16:06:33.483Z","closed_at":"2020-03-26T07:01:20.887Z","closed_by":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"labels":["Observability","backend","backstage [DEPRECATED]","devops::plan","group::project management","infrastructure monitoring","missed-deliverable","missed:12.3","missed:12.4","missed:12.5","missed:12.6","workflow::production"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"}],"author":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"type":"ISSUE","assignee":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"user_notes_count":27,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30070","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30070","notes":"https://gitlab.com/api/v4/projects/278964/issues/30070/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30070/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30070","relative":"#30070","full":"gitlab-org/gitlab#30070"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22720424,"iid":12796,"project_id":278964,"title":"Remove `merge_trains_enabled` column from `project_ci_cd_settings` table","description":"## Problem\n\nSince \"Allow Merge Train\" option is enabled by default from GitLab 12.1 (See https://gitlab.com/gitlab-org/gitlab-ee/issues/11222), we should drop the `merge_trains_enabled` column from `project_ci_cd_settings` table.\n\n### Update\n\nFollowing reviewer advice https://gitlab.com/gitlab-org/gitlab/merge_requests/19695#note_242909595, this issue will be split into 3 MRs.\n\n- mark the column - 12.5 - https://gitlab.com/gitlab-org/gitlab/merge_requests/19695\n- drop the column - 12.7 - https://gitlab.com/gitlab-org/gitlab/merge_requests/19701\n- remove the mark - 12.8 - https://gitlab.com/gitlab-org/gitlab/issues/36461#note_269438683\n\n\nSee also https://gitlab.com/gitlab-org/gitlab/merge_requests/19701#note_269417352\n\n\n\n","state":"closed","created_at":"2019-07-12T06:45:16.672Z","updated_at":"2020-10-08T19:22:12.789Z","closed_at":"2020-01-16T07:44:09.244Z","closed_by":{"id":4391348,"username":"sean_carroll","name":"Sean Carroll","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4391348/avatar.png","web_url":"https://gitlab.com/sean_carroll"},"labels":["Category:Continuous Delivery","Deliverable","Enterprise Edition","devops::release","devops::release::merge trains","group::release","maintenance::refactor","missed-deliverable","missed:12.5","missed:12.6","workflow::in review"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":4391348,"username":"sean_carroll","name":"Sean Carroll","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4391348/avatar.png","web_url":"https://gitlab.com/sean_carroll"}],"author":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"type":"ISSUE","assignee":{"id":4391348,"username":"sean_carroll","name":"Sean Carroll","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4391348/avatar.png","web_url":"https://gitlab.com/sean_carroll"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12796","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12796","notes":"https://gitlab.com/api/v4/projects/278964/issues/12796/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12796/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12796","relative":"#12796","full":"gitlab-org/gitlab#12796"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699583,"iid":30066,"project_id":278964,"title":"Remove Exception handling from Ci::YamlProcessor","description":"## Summary\n\nCi::Config currently rescues several Exception types and raises another Exception with the message of the first. Using Exceptions intentionally as flow control like this isn't a great idea, and as it exists we only return a single error message, even if multiple errors are detectable. We should run all of our available error detection in Config and return an array of error messages (which already exists to some extent) in the event that any things are wrong.\n\n## Improvements\n\nRemoving Exceptions from our application where possible makes our logic easier to read and understand. There are several level of raising and rescuing custom Exception types, passing the messages around that eventually make it back to the user. Consolidating our validation logic to one structure that more thoroughly checks for problems should make this code easier to work with.\n\n## Risks\n\n`YamlProcessor` on down through individual `Config::Entry` subclasses all use a system of raising, rescuing, and re-raising. To refactor any part of it risks breaking other parts. I propose we scope this refactor to Exception handling beginning with `Ci::YamlProcessor#initialize`, and following the call stack from processing a configuration file from there, replacing exceptions with returnable errors messages one layer at a time.\n\n## Involved components\n\n```\napp/controllers/projects/ci/lints_controller.rb\napp/models/ci/pipeline.rb\nlib/gitlab/ci/yaml_processor.rb\nlib/gitlab/ci/config.rb\nlib/gitlab/ci/config/extendable.rb\nlib/gitlab/ci/config/extendable/entry.rb\nlib/gitlab/ci/config/external/processor.rb\nlib/gitlab/config/loader/yaml.rb\n```\nPlus related specs.","state":"closed","created_at":"2019-07-12T05:22:10.162Z","updated_at":"2020-09-17T02:11:53.626Z","closed_at":"2020-09-02T09:49:37.328Z","closed_by":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"labels":["Category:Continuous Integration","backend","backstage [DEPRECATED]","devops::verify","group::pipeline execution","maintenance::refactor","missed:13.3","pipeline processing","section::ops","type::maintenance"],"milestone":{"id":1233753,"iid":51,"group_id":9970,"title":"13.4","description":"https://about.gitlab.com/releases/2020/09/22/gitlab-13-4-released/","state":"closed","created_at":"2020-04-09T17:39:21.662Z","updated_at":"2022-04-13T14:50:33.769Z","due_date":"2020-09-17","start_date":"2020-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/51"},"assignees":[{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"}],"author":{"id":730684,"username":"drew","name":"drew stachon","state":"active","avatar_url":"https://secure.gravatar.com/avatar/59b7f2c95acd4a085d964f745ead6bdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/drew"},"type":"ISSUE","assignee":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"user_notes_count":2,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30066","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30066","notes":"https://gitlab.com/api/v4/projects/278964/issues/30066/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30066/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30066","relative":"#30066","full":"gitlab-org/gitlab#30066"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":24699580,"iid":30065,"project_id":278964,"title":"Prompt users to double check their account recovery settings","description":"We would like to empower users to better recover their own accounts, especially when 2FA is enabled. This would allow us to no longer support account recover via the phone, which can lead to social engineering attacks as well as other challenges.\n\nOne of the best practices, is to occasionally remind users to validate their account recovery settings. This way if they got a new phone number, but forgot to update their account recovery settings, they may get a chance to update it before becoming locked out.\n\nYou can see examples of this with GitHub, Google, and many other popular SaaS services.\n\n## Proposal\n\n* Every 3 months, surface a reminder banner:\n   * \"Please ensure your account's `\u003ca href=\"/profile/account\"\u003e`recovery settings are up to date`\u003c/a\u003e`.\"\n* When the link is clicked or the banner dismissed, surface again in 3 months.","state":"closed","created_at":"2019-07-12T04:31:31.551Z","updated_at":"2021-04-03T08:36:54.884Z","closed_at":"2020-02-20T12:45:20.420Z","closed_by":{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"},"labels":["2FA","UX","devops::manage","estimation::completed","frontend","gitlab.com","group::authentication and authorization","internal customer","missed:12.7","type::feature","workflow::canary"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"}],"author":{"id":926632,"username":"joshlambert","name":"Joshua Lambert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a0bdc5209b11e9c0953f80234dcb4ffb?s=80\u0026d=identicon","web_url":"https://gitlab.com/joshlambert"},"type":"ISSUE","assignee":{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"},"user_notes_count":20,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30065","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30065","notes":"https://gitlab.com/api/v4/projects/278964/issues/30065/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30065/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30065","relative":"#30065","full":"gitlab-org/gitlab#30065"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22709743,"iid":12786,"project_id":278964,"title":"Epics don't set useful mail headers (like X-GitLab-Project-Path)","description":"### Summary\n\nI just realized mail notifications for epics don't set any mail headers that could be used to sort them in a useful way (e.g. by project / group)\n\n### Steps to reproduce\n\n* Subscribe to an epic, for example one at https://gitlab.com/groups/gitlab-org/-/epics\n* Check the mail header\n\n### What is the current *bug* behavior?\n\nExcerpt from the mail header (filtered by `X-GitLab-*`)\n```\nX-GitLab-Discussion-ID: 5ae9b28f36fa9bfb6dce2dc3d32dcddc8a857818\nX-GitLab-Epic-ID: 2424\nX-GitLab-Epic-IID: 633\nX-GitLab-Reply-Key: [...]\n```\n\n-\u003e nothing that could be used to filter by project / group / etc.\n\n\n### What is the expected *correct* behavior?\n\nShould set additional header fields like issue notifications do.\n\nExample headers (filtered by `X-GitLab-*`):\n```\nX-GitLab-Project: GitLab.com Support Tracker\nX-GitLab-Project-Id: 63904\nX-GitLab-Project-Path: gitlab-com/support-forum\nX-GitLab-Issue-ID: 9454974\nX-GitLab-Issue-IID: 3097\nX-GitLab-Reply-Key: [...]\n```","state":"closed","created_at":"2019-07-11T17:17:22.291Z","updated_at":"2021-11-08T16:56:19.845Z","closed_at":"2020-03-03T18:34:49.441Z","closed_by":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"labels":["Category:Portfolio Management","Enterprise Edition","backend","devops::plan","epics","group::product planning","type::feature","workflow::verification"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"}],"author":{"id":945074,"username":"ede123","name":"Patrick Storz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/945074/avatar.png","web_url":"https://gitlab.com/ede123"},"type":"ISSUE","assignee":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12786","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12786","notes":"https://gitlab.com/api/v4/projects/278964/issues/12786/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12786/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12786","relative":"#12786","full":"gitlab-org/gitlab#12786"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22709327,"iid":12785,"project_id":278964,"title":"Update Overview Section to be Contextual between Groups, Subgroups, and Projects","description":"### Problem to solve\n\n- Epics are only at the group level\n- We've received feedback from ***many*** users that they're having a difficult time finding epics when on the project level\n- A major part of the confusion is simply not knowing what level you are at an a hierarchy (Group/Sub-Group/Etc)\n\n### Intended users\n\nGitLab Ultimate users and Internal Gitlab Users\n\n### Proposal\n\nEdit the title of the overview section to be contextual with the section the user is in, either a project, group, or subgroup.\n*  If a user is in a `Group`, title the section \"Group overview\"\n*  If a user is in a `Subgroup`, title the section \"Subgroup overview\"\n*  If a user is in a `Project`, title the section \"Project overview\"\n\n\u003cimg src=\"/uploads/f3116ec9e1dcbc0e6a0d24e4420764ba/image.png\" width=\"800\"\u003e\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2019-07-11T16:54:32.842Z","updated_at":"2022-05-19T16:06:24.656Z","closed_at":"2019-11-11T18:37:57.517Z","closed_by":{"id":4545397,"username":"cngo","name":"Coung Ngo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4545397/avatar.png","web_url":"https://gitlab.com/cngo"},"labels":["Category:Portfolio Management","Enterprise Edition","customer","devops::plan","direction","epics","frontend","group::product planning","type::feature","workflow::production"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":3617348,"username":"uhlexsis","name":"Alexis Ginsberg","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3617348/avatar.png","web_url":"https://gitlab.com/uhlexsis"},{"id":4545397,"username":"cngo","name":"Coung Ngo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4545397/avatar.png","web_url":"https://gitlab.com/cngo"}],"author":{"id":201566,"username":"annabeldunstone","name":"Annabel Dunstone Gray","state":"active","avatar_url":"https://secure.gravatar.com/avatar/85c0203926134720f9a9aa8c6e264c78?s=80\u0026d=identicon","web_url":"https://gitlab.com/annabeldunstone"},"type":"ISSUE","assignee":{"id":3617348,"username":"uhlexsis","name":"Alexis Ginsberg","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3617348/avatar.png","web_url":"https://gitlab.com/uhlexsis"},"user_notes_count":45,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":"2019-10-16","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12785","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12785","notes":"https://gitlab.com/api/v4/projects/278964/issues/12785/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12785/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12785","relative":"#12785","full":"gitlab-org/gitlab#12785"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2088,"epic":{"id":14127,"iid":2088,"title":"Make epics more accessible/easier to find","url":"/groups/gitlab-org/-/epics/2088","group_id":9970,"human_readable_end_date":"Aug 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22707372,"iid":12782,"project_id":278964,"title":"Labels visible despite no access to issues \u0026 repositories","description":"**[HackerOne report #638505](https://hackerone.com/reports/638505)** by `ashish_r_padelkar` on 2019-07-09, assigned to `akelly`:\n\n### Summary\n\nHello,\n\nWhen Public group has public project with below settings, it should not be possible to see all ts labels.  \n![Screenshot_2019-07-10_at_01.08.24.png](https://h1.sec.gitlab.net/a/1739c31c-5a01-4954-af0d-c6f53daf5936/Screenshot_2019-07-10_at_01.08.24.png)\n\nHowever, anyone can see the project labels using below endpoint.  \n`https://gitlab.com/groups/newgroup_t/-/labels.json`\n\n### Steps to reproduce  \n1. Create a public group  \n2. Create a public project inside group and set `issues` \u0026 `Repository` as `Only Project Members` Settings.  \n3. Login as another users, Go to group and projects and see if you can see project labels. You should not as you dont have access and you are not a team member.  \n4. Now directly navigate to `https://gitlab.com/groups/newgroup_t/-/labels.json` and you should see all labels which belongs to project which you cant access its issues \u0026 Repository.\n\n\n\n### Examples  \nUse this `https://gitlab.com/groups/newgroup_t/-/labels.json`. You will see labels from project which you cant see in UI because of permissions set on projects.\n\n### What is the current *bug* behavior?\n\nLabels visible publicly despite no access to issues \u0026 Repositories of a project.\n\n### What is the expected *correct* behavior?  \nLabels should not be visible when above settings are in place for projects\n\n\n### Output of checks\n\nThis bug happens on GitLab.com and might be on omnibus installations too!\n\nRegards,  \nAshish\n\n## Impact\n\nProject Labels visible despite issue \u0026 repository permissions\n\n## Attachments\n**Warning:** Attachments received through HackerOne, please exercise caution!\n* [Screenshot_2019-07-10_at_01.08.24.png](https://h1.sec.gitlab.net/a/1739c31c-5a01-4954-af0d-c6f53daf5936/Screenshot_2019-07-10_at_01.08.24.png)","state":"closed","created_at":"2019-07-11T15:35:33.873Z","updated_at":"2022-05-19T16:06:24.400Z","closed_at":"2019-11-07T02:09:10.074Z","closed_by":{"id":4226366,"username":"ankelly","name":"Andrew Kelly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4226366/avatar.png","web_url":"https://gitlab.com/ankelly"},"labels":["Deliverable","Enterprise Edition","HackerOne","backend","devops::plan","group::project management","priority::3","security","severity::3","workflow::verification"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},{"id":4303289,"username":"gweaver","name":"Gabe Weaver","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303289/avatar.png","web_url":"https://gitlab.com/gweaver"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-09-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12782","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12782","notes":"https://gitlab.com/api/v4/projects/278964/issues/12782/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12782/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12782","relative":"#12782","full":"gitlab-org/gitlab#12782"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22706589,"iid":12780,"project_id":278964,"title":"Multifile Upload in Design Management Fails on First Upload","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nWhen uploading multiple files to the Designs tab only the first file is uploaded. If you try to upload multiple files a second time, all the files are uploaded.\n\n### Steps to reproduce\n\n1. Designs Tab in Issue\n1. Upload Design\n1. Select Multiple Files\n1. Upload\n\n### Example Project\n\nhttps://youtu.be/CCMtCqdK_aM?t=14\n\n### What is the current *bug* behavior?\n\nOnly the first file is uploaded.\n\n### What is the expected *correct* behavior?\n\nAll selected files should be uploaded.\n\n### Relevant logs and/or screenshots\n\nhttps://youtu.be/CCMtCqdK_aM?t=14","state":"closed","created_at":"2019-07-11T15:05:47.719Z","updated_at":"2020-12-10T19:00:33.517Z","closed_at":"2019-07-19T15:53:08.490Z","closed_by":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"labels":["Category:Design Management","Deliverable","Enterprise Edition","backend","devops::plan","group::product planning","priority::2","severity::2","type::bug"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"}],"author":{"id":2935693,"username":"phikai","name":"Kai Armstrong","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2c5d6a63b41cbeb3ea4cccda82e758e1?s=80\u0026d=identicon","web_url":"https://gitlab.com/phikai"},"type":"ISSUE","assignee":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"user_notes_count":6,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12780","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12780","notes":"https://gitlab.com/api/v4/projects/278964/issues/12780/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12780/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12780","relative":"#12780","full":"gitlab-org/gitlab#12780"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22704258,"iid":12777,"project_id":278964,"title":"Pressing `Escape` should close the Designs","description":"### Problem to solve\n\nAfter clicking on a Design in the `Designs` tab it loads a larger version of all the images. The only way to close this window is by clicking the `x` in the top left of the window.\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\nPersonas can be found at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\nAnyone using design management\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\nYou should be able to close the enlarged designs window by pressing `escape` on the keyboard.","state":"closed","created_at":"2019-07-11T13:45:26.712Z","updated_at":"2020-12-10T19:00:34.623Z","closed_at":"2019-09-17T10:59:15.558Z","closed_by":{"id":853414,"username":"andr3","name":"AndrÃ© LuÃ­s","state":"active","avatar_url":"https://secure.gravatar.com/avatar/241e39726efb512a29621070ccf26a90?s=80\u0026d=identicon","web_url":"https://gitlab.com/andr3"},"labels":["Category:Design Management","Enterprise Edition","GitLab Premium","Stretch","devops::plan","direction","frontend","group::product planning","type::feature","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"}],"author":{"id":2935693,"username":"phikai","name":"Kai Armstrong","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2c5d6a63b41cbeb3ea4cccda82e758e1?s=80\u0026d=identicon","web_url":"https://gitlab.com/phikai"},"type":"ISSUE","assignee":{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12777","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12777","notes":"https://gitlab.com/api/v4/projects/278964/issues/12777/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12777/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12777","relative":"#12777","full":"gitlab-org/gitlab#12777"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22696040,"iid":12773,"project_id":278964,"title":"Geo Documentation: Improve General Geo update steps","description":"\u003c!--\n\n* Use this issue template for suggesting new docs or updates to existing docs.\n  Note: Doc work as part of feature development is covered in the Feature Request template.\n  \n* For issues related to features of the docs.gitlab.com site, see\n     https://gitlab.com/gitlab-com/gitlab-docs/issues/       \n\n* For information about documentation content and process, see\n     https://docs.gitlab.com/ee/development/documentation/ --\u003e\n\n\u003c!-- Type of issue --\u003e\n\n\u003c!-- Un-comment the line for the applicable doc issue type to add its label.\n     Note that all text on that line is deleted upon issue creation. --\u003e\n\u003c!-- /label ~\"docs:fix\" - Correction or clarification needed. --\u003e\n\u003c!-- /label ~\"docs:new\" - New doc needed to cover a new topic or use case. --\u003e\n\u003c!-- /label ~\"docs:revamp\" - Review a page or group of pages in order to plan and implement major improvements/rewrites. --\u003e\n\u003c!-- /label ~\"docs:other\" - Anything else. --\u003e\n\n### Problem to solve\n\n\u003c!-- Include the following detail as necessary:\n* What product or feature(s) affected?\n* What docs or doc section affected? Include links or paths.\n* Is there a problem with a specific document, or a feature/process that's not addressed sufficiently in docs?\n* Any other ideas or requests?\n--\u003e\n\nSome sections of the Geo update instructions are ambiguous and should be rephrased.\n\n### Further details\n\n\u003c!--\n* Any concepts, procedures, reference info we could add to make it easier to successfully use GitLab?\n* Include use cases, benefits, and/or goals for this work.\n* If adding content: What audience is it intended for? (What roles and scenarios?)\n  For ideas, see personas at https://design.gitlab.com/research/personas or the persona labels at\n  https://gitlab.com/groups/gitlab-org/-/labels?utf8=%E2%9C%93\u0026subscribed=\u0026search=persona%3A\n--\u003e\n\nhttps://docs.gitlab.com/ee/administration/geo/replication/updating_the_geo_nodes.html#general-update-steps\n\n\u003e all you need to do is update GitLab itself:\n\nThis is not *actually* correct. I currently have to also update the tracking database on secondary nodes (see https://gitlab.com/gitlab-org/gitlab-ee/issues/12270) and test things. We may consider rephrasing this.\n\n\u003e 1. Log into each node (primary and secondary nodes).\n\nI assume this means \"to a console on your node\". This can mean I have to open as many terminal sessions as there are Geo nodes. For large installations, this suggestion may cause confusion. Maybe this can be rephrased or removed as it [is replicated later](https://docs.gitlab.com/omnibus/update/README.html#geo-deployment)\n\n* [x] Reword documentation\n* [ ] Define if the **primary** or the **secondaries** need to be upgraded first\n* [ ] Decide if we should link directly to the Omnibus installation guide\n\n### Proposal\n\n\u003c!-- Further specifics for how can we solve the problem. --\u003e\n\n* We may be able remove step 3 completely\n* We may be able to automate step 4\n\n\n### Who can address the issue\n\n\u003c!-- What if any special expertise is required to resolve this issue? --\u003e\n\n### Other links/references\n\n\u003c!-- E.g. related GitLab issues/MRs --\u003e","state":"closed","created_at":"2019-07-11T09:11:00.203Z","updated_at":"2019-09-23T13:34:34.875Z","closed_at":"2019-09-02T06:38:49.791Z","closed_by":{"id":2683848,"username":"eread","name":"Evan Read","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2683848/avatar.png","web_url":"https://gitlab.com/eread"},"labels":["Enterprise Edition","Geo Administration","auto updated","devops::systems","docs::improvement","documentation","group::geo","workflow::in review"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"}],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"user_notes_count":1,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12773","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":1},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12773","notes":"https://gitlab.com/api/v4/projects/278964/issues/12773/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12773/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12773","relative":"#12773","full":"gitlab-org/gitlab#12773"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1935,"epic":{"id":12494,"iid":1935,"title":"Geo: Improved Geo upgrade documentation","url":"/groups/gitlab-org/-/epics/1935","group_id":9970,"human_readable_end_date":"Nov 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24699521,"iid":30036,"project_id":278964,"title":"Award emoji tooltip is escaped twice if two people voted","description":"### Steps to reproduce\n\n- choose the same award emoji as somebody with a quote in their name **and** nobody else\n\n### What is the current *bug* behavior?\n\nName is escaped twice:\n\n![Screen_Shot_2019-07-11_at_10.18.49](/uploads/8a1dba3cfe3fa35b8cd29b653cd55367/Screen_Shot_2019-07-11_at_10.18.49.png)\n\n### What is the expected *correct* behavior?\n\nName stays readable as it is the case if You didn't vote:\n\n![Screen_Shot_2019-07-11_at_10.19.20](/uploads/92b8a98a0459384375add6fe6de43ec6/Screen_Shot_2019-07-11_at_10.19.20.png)\n\n...or a third person is involved:\n\n![Screen_Shot_2019-07-11_at_10.40.31](/uploads/9ea1e28b461dd30f711ad8df7bed43fd/Screen_Shot_2019-07-11_at_10.40.31.png)","state":"closed","created_at":"2019-07-11T08:30:24.065Z","updated_at":"2022-05-19T16:06:32.470Z","closed_at":"2019-12-05T15:05:09.991Z","closed_by":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"labels":["Community contribution","Deliverable","award emoji","devops::plan","frontend","group::project management","missed-deliverable","missed:12.5","priority::4","regression","regression:12.1","severity::4","type::bug"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":14,"merge_requests_count":1,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30036","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30036","notes":"https://gitlab.com/api/v4/projects/278964/issues/30036/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30036/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30036","relative":"#30036","full":"gitlab-org/gitlab#30036"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699511,"iid":30030,"project_id":278964,"title":"Remove ActiveRecord QueryCache patch","description":"The bug in http://github.com/rails/rails/issues/36587 is now fixed in https://github.com/rails/rails/pull/36618\n\nThe patch in `lib/gitlab/patch/active_record_query_cache.rb` and `config/initializers/active_record_query_cache.rb` will not be required once we upgrade to the next stable release (5.2.4 or 6.0.0)","state":"closed","created_at":"2019-07-11T05:37:52.401Z","updated_at":"2022-05-19T16:07:39.828Z","closed_at":"2020-01-29T17:49:38.171Z","closed_by":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"labels":["Deliverable","backend","backstage [DEPRECATED]","devops::plan","group::project management","maintenance::refactor","rails6","upstream deps","workflow::in review"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"}],"author":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"type":"ISSUE","assignee":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"user_notes_count":8,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30030","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30030","notes":"https://gitlab.com/api/v4/projects/278964/issues/30030/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30030/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30030","relative":"#30030","full":"gitlab-org/gitlab#30030"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22683143,"iid":12771,"project_id":278964,"title":"Enable uploading of SVG images for Design Management","description":"### Problem to solve\n\nWe [validate that images](https://gitlab.com/gitlab-org/gitlab-ee/blob/master/ee/app/models/design_management/design.rb#L53) uploaded to design boards are in the list in [`Gitlab::FileTypeDetection::IMAGE_EXT`](https://gitlab.com/gitlab-org/gitlab-ee/blob/master/lib/gitlab/file_type_detection.rb#L7). \n\nThat list excludes the `svg` extension as it is listed separately as a [`DANGEROUS_EXT`](https://gitlab.com/gitlab-org/gitlab-ee/blob/master/lib/gitlab/file_type_detection.rb#L16).\n\nBased on the comment above the list of `DANGEROUS_EXT` we would be able to enable `svg`, as we always supply design images with `Content-Disposition: attachment`.\n\nNote that we should rename the `DANGEROUS_EXT` constant to `IMAGE_DANGEROUS_EXT`, as we want to enable just image extensions and never any non-image extensions that may be added in future.\n### Documentation\n\nWe should update the Design Management documentation [limitations section](https://docs.gitlab.com/ee/user/project/issues/design_management.html#limitations).\n\n### Links / references","state":"closed","created_at":"2019-07-11T01:13:11.234Z","updated_at":"2022-07-28T21:22:42.057Z","closed_at":"2019-10-01T22:32:25.465Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["Category:Design Management","Create [DEPRECATED]","Deliverable","Enterprise Edition","GitLab Premium","backend","devops::plan","direction","group::product planning","missed-deliverable","missed:12.3","type::feature"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":16,"merge_requests_count":1,"upvotes":4,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12771","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12771","notes":"https://gitlab.com/api/v4/projects/278964/issues/12771/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12771/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12771","relative":"#12771","full":"gitlab-org/gitlab#12771"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22680922,"iid":12769,"project_id":278964,"title":"Project Milestone with specific name blocks owners/users from accessing group milestone page","description":"**[HackerOne report #638731](https://hackerone.com/reports/638731)** by `ashish_r_padelkar` on 2019-07-10, assigned to `estrike`:\n\n### Summary\n\nHello,\n\nThe project milestone with name `\u003cimg src=x onerror=prompt(1)\u003e` can throw `500` error on group milestone pages and can prevent group owners or users from accessing that page until they find the root cause of the issue.\n\nThe reason this happens is because project milestones are also rendered on group milestone page here at `https://gitlab.com/groups/\u003cGroupName\u003e/-/milestones`\n\n\n### Steps to reproduce\n\n1. Create a project milestone within a group named`\u003cimg src=x onerror=prompt(1)\u003e`   \n2. This will create a empty milestone.  \n3. Now as any user (or group owner) navigate to `https://gitlab.com/groups/\u003cGroupName\u003e/-/milestones`  \n4.They will see 500 error   \n![Screenshot_2019-07-10_at_13.28.32.png](https://h1.sec.gitlab.net/a/1c749a10-e879-4a4d-a30b-7e4d9bdb1043/Screenshot_2019-07-10_at_13.28.32.png)\n\n\n\n\n### What is the current *bug* behavior?\n\nProject Milestone with specific name block owners from accessing group milestone page\n\n### What is the expected *correct* behavior?  \nEither milestone should not allowed special characters like `\u003c` or group milestone page should be properly rendered.\n\n\n\n### Output of checks\n\nThis bug happens on GitLab.com and might be on omnibus installations too.\n\nRegards,  \nAshish\n\n## Impact\n\nThere are multiple impacts of this\n\n1. As mentioned earlier, this creates empty milestone which then prevent admin from deleting the milestone, or promoting at group level unless they specifically go to EDIT link directly and fix it.\n\n2. This blocks owners, maintainers from accessing the group milestone page till they find the root cause of the issue. Imagine some developer role creates such milestone (who has only project level access and not group level) and then prevent group owner, admin from accessing group milestones. This happens because project milestones too renders in group milestone page and group owners can see all the projects and their milestone which by default render in group milestone page irrespective of project visibility.\n\n\nRegards,  \nAshish\n\n## Attachments\n**Warning:** Attachments received through HackerOne, please exercise caution!\n* [Screenshot_2019-07-10_at_13.28.32.png](https://h1.sec.gitlab.net/a/1c749a10-e879-4a4d-a30b-7e4d9bdb1043/Screenshot_2019-07-10_at_13.28.32.png)","state":"closed","created_at":"2019-07-10T21:12:02.776Z","updated_at":"2019-11-20T20:16:52.341Z","closed_at":"2019-11-20T20:16:52.196Z","closed_by":{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"},"labels":["Deliverable","Enterprise Edition","HackerOne","backend","devops::plan","group::project management","priority::4","security","severity::4","type::bug","workflow::verification"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12769","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12769","notes":"https://gitlab.com/api/v4/projects/278964/issues/12769/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12769/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12769","relative":"#12769","full":"gitlab-org/gitlab#12769"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22679295,"iid":12766,"project_id":278964,"title":"Private subgroup path visible in epic timeline when child epic is added.","description":"**[HackerOne report #638516](https://hackerone.com/reports/638516)** by `ashish_r_padelkar` on 2019-07-09, assigned to `akelly`:\n\n### Summary\n\nHello,\n\nWhen public group has private `sub group` inside it, none of the information should be visible publicly.\n\nHowever, if private sub group epic is added as a child epic to public group parent group, the timeline activity discloses the name of the private sub group.\n\n### Steps to reproduce\n\n1. Create a public group  \n2. Create a private sub group inside it  \n3. Create a epic inside private sub group and set its due dates \n4. Create an epic inside the public group \n5. Add the private epic to public group epic as child epic.  \n6. now login as any other user and navigate to public group epic and see the timeline. You should see the timeline activity of epic added from private sub group which discloses private sub group path.\n\n![Screenshot_2019-07-10_at_01.32.26.png](https://h1.sec.gitlab.net/a/52a67ef9-3972-480f-98f6-0fb46ad33b45/Screenshot_2019-07-10_at_01.32.26.png)\n\n\n### Examples\n\nYou can see the timeline activity here. https://gitlab.com/groups/newgroup_t/-/epics/1\n\nYou wont find the sub group in this group though as you dont have access to it.\n\n### What is the current *bug* behavior?  \nPrivate sub group path is visible publicly if epic is added as child epic in public group.\n\n### What is the expected *correct* behavior?  \nNone of the private sub group info should be visible.\n\n\n\n### Output of checks\n\nThis bug happens on GitLab.com and might be on omnibus installations too.\n\nRegards,  \nAshish\n\n## Impact\n\nPrivate sub group path visible when epic is added as child epic in public parent group epic\n\n## Attachments\n**Warning:** Attachments received through HackerOne, please exercise caution!\n* [Screenshot_2019-07-10_at_01.32.26.png](https://h1.sec.gitlab.net/a/52a67ef9-3972-480f-98f6-0fb46ad33b45/Screenshot_2019-07-10_at_01.32.26.png)\n\n## Analysis\n\nThis bug is caused by some epic resources not being checked for cross references. As this is related to issue https://gitlab.com/gitlab-org/gitlab/issues/30163 where more resources are missing, it should address them to be relased together.\n\n### Security issue on `dev.gitlab.org` \n\n**Part 1**: https://dev.gitlab.org/gitlab/gitlab-ee/issues/377\n(Addresses Epic notes' cross references)\n\n**Part 2**: https://dev.gitlab.org/gitlab/gitlabhq/issues/2920\n(Addresses Label and Milestone notes' cross references)","state":"closed","created_at":"2019-07-10T19:46:50.241Z","updated_at":"2022-05-19T16:07:26.449Z","closed_at":"2019-11-07T02:06:08.300Z","closed_by":{"id":4226366,"username":"ankelly","name":"Andrew Kelly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4226366/avatar.png","web_url":"https://gitlab.com/ankelly"},"labels":["Category:Portfolio Management","Deliverable","Enterprise Edition","HackerOne","backend","devops::plan","epics","group::project management","priority::3","security","severity::3","workflow::verification"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-09-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12766","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12766","notes":"https://gitlab.com/api/v4/projects/278964/issues/12766/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12766/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12766","relative":"#12766","full":"gitlab-org/gitlab#12766"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699494,"iid":30019,"project_id":278964,"title":"Remind people when GraphQL generated documentation is outdated","description":"GraphQL documentation is generated manually using a rake task, when the schema changes  \nwe need to regenerate the docs.  \n\n### Proposal\nTo remind people to regenerate the docs we could use a job **allowed to fail** that runs the script `rake gitlab:graphql:compile_docs` when a commit is pushed and there are any differences in the docs we mark it as failed.   \n\nI am not sure if this is the best way to do it. Other solutions can be discussed here.","state":"closed","created_at":"2019-07-10T18:26:55.004Z","updated_at":"2022-05-19T16:07:39.523Z","closed_at":"2019-10-16T16:44:01.553Z","closed_by":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["GraphQL","backend","backstage [DEPRECATED]","devops::plan","documentation","group::project management","workflow::in review"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"}],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"},"user_notes_count":1,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30019","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30019","notes":"https://gitlab.com/api/v4/projects/278964/issues/30019/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30019/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30019","relative":"#30019","full":"gitlab-org/gitlab#30019"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1581,"epic":{"id":9465,"iid":1581,"title":"Improve GraphQL generated documentation","url":"/groups/gitlab-org/-/epics/1581","group_id":9970,"human_readable_end_date":"Feb 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24699493,"iid":30018,"project_id":278964,"title":"Prevent changes directly made into GraphQL generated documentation.","description":"GraphQL docs are generated based on GitLab schema. We should use rubocop or alert bot to prevent developers  \nto make direct changes into the generated docs.  \n\nFor more information check: https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/29998","state":"closed","created_at":"2019-07-10T18:00:30.376Z","updated_at":"2020-02-27T12:16:57.974Z","closed_at":"2020-02-27T12:16:57.902Z","closed_by":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"labels":["GraphQL","[deprecated] Accepting merge requests","documentation","missed:12.3","missed:12.4","missed:12.5","missed:12.6","missed:12.7","missed:12.8"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30018","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30018","notes":"https://gitlab.com/api/v4/projects/278964/issues/30018/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30018/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30018","relative":"#30018","full":"gitlab-org/gitlab#30018"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1581,"epic":{"id":9465,"iid":1581,"title":"Improve GraphQL generated documentation","url":"/groups/gitlab-org/-/epics/1581","group_id":9970,"human_readable_end_date":"Feb 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22676493,"iid":12764,"project_id":278964,"title":"Refactor checksum code: extract hexdigest from Upload and use in LfsObject and Gitlab::Ci::Trace","description":"## Summary\n\nFollow up https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14477#note_188552032:\n\n\u003e This is sprinkled all over the codebase. `Digest::SHA256.file(file_path).hexdigest`\n\n\u003e I like the idea that each model knows how to calculate its checksum. We can introduce a new concern 'Checksummable' with some shared code?\n\n## Improvements\n\n\u003c!--\nExplain the benefits of refactoring this code.\nSee also https://about.gitlab.com/handbook/values/index.html#say-why-not-just-what\n--\u003e\n\nhttps://en.wikipedia.org/wiki/Don%27t_repeat_yourself\n\nFor this iteration, the scope is limited to extracting `hexdigest` out of `Upload` and reusing it in only `LfsObject` and `Gitlab::Ci::Trace`. It looks like we'll need to add some tests too.\n\n``` ruby\nmodule Checksummable\n  extend ActiveSupport::Concern\n\n  class_methods do\n    def hexdigest(path)\n      Digest::SHA256.file(path).hexdigest\n    end\n  end\nend\n\nclass Upload\n  include Checksummable\n\n  # remove this method\n  def self.hexdigest(path)\n    Digest::SHA256.file(path).hexdigest\n  end\n\n  # modify this method to be like\n  def calculate_checksum!\n    self.checksum = nil\n    return unless checksummable?\n\n    self.checksum = self.class.hexdigest(absolute_path)\n  end\nend\n\n```\n\n\n## Risks\n\n\u003c!--\nPlease list features that can break because of this refactoring and how you intend to solve that.\n--\u003e\n\nLow risk. Just extracting shared code.\n\n## Involved components\n\n\u003c!--\nList files or directories that will be changed by the refactoring.\n--\u003e\n\n## Optional: Intended side effects\n\n\u003c!--\nIf the refactoring involves changes apart from the main improvements (such as a better UI), list them here.\nIt may be a good idea to create separate issues and link them here.\n--\u003e\n\n## Optional: Missing test coverage\n\n\u003c!--\nIf you are aware of tests that need to be written or adjusted apart from unit tests for the changed components,\nplease list them here.\n--\u003e","state":"closed","created_at":"2019-07-10T17:10:15.603Z","updated_at":"2020-02-19T22:02:36.152Z","closed_at":"2019-10-08T22:02:02.800Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["Community contribution","Enterprise Edition","backstage [DEPRECATED]","devops::systems","group::geo","maintenance::refactor"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},{"id":4353908,"username":"briankabiro","name":"Brian Kabiro","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4353908/avatar.png","web_url":"https://gitlab.com/briankabiro"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":13,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12764","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12764","notes":"https://gitlab.com/api/v4/projects/278964/issues/12764/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12764/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12764","relative":"#12764","full":"gitlab-org/gitlab#12764"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1430,"epic":{"id":8109,"iid":1430,"title":"Geo: Verify all replicated data","url":"/groups/gitlab-org/-/epics/1430","group_id":9970,"human_readable_end_date":"Jan 1, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22675227,"iid":12761,"project_id":278964,"title":"Improve phpcs-security-audit vulnerability report descriptions","description":"### Problem to solve\n\nWe currently use [phpcs-security-audit](https://github.com/FloeDesignTechnologies/phpcs-security-audit) for conducting static security analysis of PHP code. The descriptions it includes in its vulnerability reports aren't always clear, and aren't documented anywhere. This is confusing for customers.\n\nFor more context see https://gitlab.com/gitlab-org/gitlab-ee/issues/6081\n\n### Proposal\n\nImprove the descriptions given by phpcs-security-audit by writing our own. We've already done this for our [TypeScript analyzer](https://gitlab.com/gitlab-org/security-products/analyzers/tslint/blob/master/convert/convert.go#L76).\n\nThis will require looking at each of the \"Sniffs\" used by phpcs-security-audit to detect vulnerabilities, and writing a description that better describes the corresponding vulnerability. The Sniffs live [here](https://github.com/FloeDesignTechnologies/phpcs-security-audit/tree/master/Security/Sniffs), and the corresponding ruleset that we use is [here](https://gitlab.com/gitlab-org/security-products/analyzers/phpcs-security-audit/blob/master/ruleset.xml). We only need descriptions for Sniffs that are used in the ruleset.\n\n### What does success look like, and how can we measure that?\n\nWe can ask the [user](https://gitlab.com/janmasarik) who initially raised the issue, see that no further issues related to the descriptions are raised, and see whether we get an increase in PHP projects using SAST in the coming months.","state":"closed","created_at":"2019-07-10T16:32:24.817Z","updated_at":"2020-04-18T07:10:47.126Z","closed_at":"2020-04-17T19:35:17.818Z","closed_by":{"id":5211947,"username":"zrice","name":"Zach Rice","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5211947/avatar.png","web_url":"https://gitlab.com/zrice"},"labels":["Category:SAST","Deliverable","Enterprise Edition","GitLab Ultimate","SAST: Common Need","SAST: Scanner Update","backend","devops::secure","group::static analysis","missed-deliverable","missed:12.5","type::feature","workflow::production"],"milestone":{"id":1104429,"iid":46,"group_id":9970,"title":"12.10","description":"https://about.gitlab.com/releases/2020/04/22/gitlab-12-10-released","state":"closed","created_at":"2019-12-20T15:15:53.243Z","updated_at":"2020-10-08T12:00:39.852Z","due_date":"2020-04-17","start_date":"2020-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/46"},"assignees":[{"id":5211947,"username":"zrice","name":"Zach Rice","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5211947/avatar.png","web_url":"https://gitlab.com/zrice"}],"author":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"type":"ISSUE","assignee":{"id":5211947,"username":"zrice","name":"Zach Rice","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5211947/avatar.png","web_url":"https://gitlab.com/zrice"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12761","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12761","notes":"https://gitlab.com/api/v4/projects/278964/issues/12761/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12761/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12761","relative":"#12761","full":"gitlab-org/gitlab#12761"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22674548,"iid":12760,"project_id":278964,"title":"Update clair-local-scan image to v2.0.8_0ed98e9ead65a51ba53f7cc53fa5e80c92169207","description":"### Problem to solve\n\nclair-local-scan `v2.0.8_0ed98e9ead65a51ba53f7cc53fa5e80c92169207` is available, we should consider upgrading [our vendored template](https://gitlab.com/gitlab-org/gitlab-ee/blob/master/lib/gitlab/ci/templates/Security/Container-Scanning.gitlab-ci.yml).\n\n### Proposal\n\n- [x] review the changelog\n- [x] update the `CLAIR_LOCAL_SCAN_VERSION` variable in https://gitlab.com/gitlab-org/gitlab-ee/blob/master/lib/gitlab/ci/templates/Security/Container-Scanning.gitlab-ci.yml\n\n### Testing\n\n- [x] Check relevant test projects leveraging Container-Scanning and make sure QA pipelines are passing with this new version:\n[QA projects for Container Scanning](https://gitlab.com/explore/projects?tag=Secure-QA,Container+Scanning)\n\n### What does success look like, and how can we measure that?\n\nOur feature is leveraging the latest version (`v2.0.8_0ed98e9ead65a51ba53f7cc53fa5e80c92169207`) of clair-local-scan.\n\n### What is the type of buyer?\n\n~\"GitLab Ultimate\"\n\n### Links / references","state":"closed","created_at":"2019-07-10T16:06:32.107Z","updated_at":"2019-11-18T15:57:24.962Z","closed_at":"2019-08-16T17:54:46.409Z","closed_by":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"labels":["Category:Container Scanning","Deliverable","Enterprise Edition","backend","backstage [DEPRECATED]","devops::secure","group::composition analysis","priority::1"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"}],"author":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"type":"ISSUE","assignee":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12760","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12760","notes":"https://gitlab.com/api/v4/projects/278964/issues/12760/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12760/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12760","relative":"#12760","full":"gitlab-org/gitlab#12760"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699489,"iid":30016,"project_id":278964,"title":"Changing branches in a merge request clears all details from the merge request","description":"## Problem to solve\n\nAfter git pushing a change set, git returns a message like:\n\nremote:\nremote: To create a merge request for [branch name], visit:\nremote:   https://[site and project url]/merge_requests/new?merge_request%5Bsource_branch%5D=[branch name]\nremote:\n\nVisiting this URL brings up a merge request form with title and description near the top, and target branch near the bottom (actually off the screen on my monitor).\n\nThe natural thing to do is fill in the form from top to bottom. When you reach the target branch part, if it's not the default (develop, in our case), then you have to change branches. Changing branches brings up a separate window, and, after having selected the correct target branch and clicking \"Compare branches and continue\" you are returned to the main form, with all data you entered wiped out. \n\n## Further details\n\nWe store the title and description in local storage in case the page is closed, but it is keyed on both `source_branch` and `target_branch`. This means after changing the target branch the data isn't loaded.\n\n## Proposal\n\nUpdate the local storage cache to only use the `source_branch` in the key, so that if the target branch changes the description and title will be persisted.\n\nBeware when updating the keys to localStorage to make sure we follow this logic:\n\n* if pair source\u003c-\u003etarget branch entry exists\n* if not, check only source branch entry exists.\n\n## Links / references","state":"closed","created_at":"2019-07-10T16:01:05.343Z","updated_at":"2021-04-12T11:30:04.721Z","closed_at":"2019-11-25T18:48:42.709Z","closed_by":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"labels":["Category:Code Review Workflow","Deliverable","UX","devops::create","frontend","group::code review","merge requests","missed-deliverable","missed:12.5","type::feature"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":4279414,"username":"paulchambre","name":"Paul Chambre","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f1703522aceba662181c287a1de06f84?s=80\u0026d=identicon","web_url":"https://gitlab.com/paulchambre"},"type":"ISSUE","assignee":{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},"user_notes_count":9,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30016","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30016","notes":"https://gitlab.com/api/v4/projects/278964/issues/30016/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30016/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30016","relative":"#30016","full":"gitlab-org/gitlab#30016"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22674375,"iid":12759,"project_id":278964,"title":"Refactor report_approver project approval rules name mapping in favor of rule_type param","description":"## Summary\n\nWith the work in https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/13109#note_190292339 we introduced a quick mapping to auto-set `approval_project_rules.rule_type` according to the rule name. This is ugly and would be better handled by the ~frontend passing the appropriate `rule_type`.  Naively this could be handled by moving the conditional param merge into the frontend but ideally it would involve introducing a new UI to allow a user to select their rule type; via checkbox etc.\n\nSee related parent ticket for further discussion https://gitlab.com/gitlab-org/gitlab-ee/issues/9928#decisions\n\n## Improvements\n\nReduce magic auto-setting of project rule `rule_type`\n\n## Risks\n\n`report_approver` rule types aren't created as expected. This should be covered by existing tests but should be manually tested to confirm.\n\n## Involved components\n\n- `ee/app/services/approval_rules/create_service.rb`\n- `ee/app/assets/javascripts/approvals/components/project_settings/project_rules.vue`\n\n---------\n\n## Implementation plan\n\n- [x] ~backend Replace the existing direct deduction ([REPORT_TYPES_BY_DEFAULT_NAME](https://gitlab.com/gitlab-org/gitlab/-/blob/f21cb86d6097454c8d43b9c6f2bc9e09e056eadc/ee/app/models/concerns/approval_rule_like.rb#L10)) when [converting](https://gitlab.com/gitlab-org/gitlab/-/blob/f21cb86d6097454c8d43b9c6f2bc9e09e056eadc/ee/app/models/approval_project_rule.rb#L53) `DEFAULT_NAME.*` to `report_type` by adding `report_type` into `approval_project_rules` (similar to `approval_merge_request_rules`). This approach would allow new rules with various names to also rely on the existing `report_type` values (e.g. `vulnerability`).\n\n- [x] ~backend ~frontend Replace the existing logic when `rule_type` is part of [REPORT_TYPES_BY_DEFAULT_NAME](https://gitlab.com/gitlab-org/gitlab/-/blob/f21cb86d6097454c8d43b9c6f2bc9e09e056eadc/ee/app/services/approval_rules/create_service.rb#L14) by making it part of the payload through [API](https://gitlab.com/gitlab-org/gitlab/-/blob/f21cb86d6097454c8d43b9c6f2bc9e09e056eadc/ee/lib/api/project_approval_settings.rb#L34) and [UI](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/approvals/components/rule_form.vue#L59). This would allow new rules with various names to also use the rule type `:report_approver` without the need of changing this logic.\n\n**Note:** The goal is to make the underlying code more flexible for new rules but not changing constraints in regards to (1) `License-Check`, (2) `Vulnerability-Check`, (3) `Coverage-Check`.","state":"closed","created_at":"2019-07-10T15:58:05.287Z","updated_at":"2022-09-22T09:45:00.806Z","closed_at":"2021-09-28T15:51:22.027Z","closed_by":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"labels":["Category:Security Policy Management","Enterprise Edition","approvals","backend","devops::govern","frontend","group::security policies","maintenance::refactor","missed:14.3","section::sec","secure merge request approval","type::maintenance","workflow::in review"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"}],"author":{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"},"type":"ISSUE","assignee":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"user_notes_count":17,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12759","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12759","notes":"https://gitlab.com/api/v4/projects/278964/issues/12759/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12759/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12759","relative":"#12759","full":"gitlab-org/gitlab#12759"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2787,"epic":{"id":26927,"iid":2787,"title":"Vulnerability Management - Tech Debt","url":"/groups/gitlab-org/-/epics/2787","group_id":9970},"iteration":null,"health_status":null},{"id":22674183,"iid":12758,"project_id":278964,"title":"Repository pull mirror scheduling design","description":"This is a design proposal to make the way we schedule pull mirror updates more efficient and scalable.\n\nThe summary is:\n\nCurrent scheduling strategy is complex because\n* we use a batch-style cronjob but actually need higher frequency than once per minute\n* there's no feedback loop when jobs finish, making it harder to efficiently use resources.\n\nThe proposal here is to use a simple postgres-based queuing solution.\n\n#### Background / Motivation\n\nGitLab.com has about 110,000 mirrors set up. We aim to update each of these mirrors at least every 30 minutes. Additionally, we allow users to individually request an immediate update of their mirrors.\n\nWe are currently facing issues with Redis (https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7157) and with delays in pull mirroring specifically (https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7173).\n\nQuoting from the root-cause analysis in https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7173:\n\n\u003e Why? New mirrors were becoming \"ready to update\" at a higher rate than we were updating mirrors that were already ready to update\n\u003e Why? We were updating mirrors at a lower rate than our pullmirror nodes are capable of\n\u003e Why? There were too few RepositoryUpdateMirrorWorker jobs in the repository_update_mirror queue, leaving pullmirror nodes sitting idly by when they could be updating mirrors\n\u003e Why? UpdateAllMirrorsWorker couldn't schedule mirror updates fast enough to keep up with pullmirror nodes becoming ready for new work\n\u003e Why? The LPUSH Redis operation used to push new jobs onto the queue took significantly more time to complete than it would and has under healthier Redis conditions\n\nWe were *not able to schedule mirror updates fast enough* to keep up with mirrors becoming eligible for updates.\n\n#### Current design\n\nThere is an awesome deep-dive video over here: https://www.youtube.com/watch?v=sSZq0fpdY-Y\n\n![Screenshot_from_2019-07-10_16-26-26](/uploads/6e75e9346c040ffe6d2c4cac0d5cebbc/Screenshot_from_2019-07-10_16-26-26.png)\n\nWith the current implemention, there are 3 types of jobs:\n* [`UpdateAllMirrorsWorker`](https://gitlab.com/gitlab-org/gitlab-ee/blob/master/ee/app/workers/update_all_mirrors_worker.rb)\n* [`ProjectImportScheduleWorker`](https://gitlab.com/gitlab-org/gitlab-ee/blob/master/ee/app/workers/project_import_schedule_worker.rb)\n* `RepositoryUpdateMirrorWorker`\n\nSimplified, `UpdateAllMirrorsWorker` is a Sidekiq cronjob run every minute. It picks the next batch of jobs and enqueues them in Redis (`ProjectImportScheduleWorker` jobs). It waits until the current batch completed its jobs, effectively waiting for the slowest job of the batch to complete ([background](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14573#note_190458925)). It then re-schedules itself eagerly, so that the scheduling job is actually run at a higher frequency than every minute. This is because the minimum cronjob frequency for Sidekiq is one minute.\n\nThe `ProjectImportScheduleWorker` job basically creates a state machine record (`ProjectImportState`) to follow the job's execution. It then schedules another job of type `RepositoryUpdateMirrorWorker` which performs the actual work of updating mirrors.\n\nThe goal of `UpdateAllMirrorsWorker` is to always schedule enough jobs such that the Sidekiq workers always have something to work on. On the other hand, it tries to also minimize the queue length. This is because we need to be able to respond to the \"Update now!\" request from users and work on those jobs first.\n\nThe scheduling logic in `UpdateAllMirrorsWorker` is quite complex. I believe this is because of an impedance mismatch: On the worker side, we want to maximize resource utilization and always keep workers busy. However, there's no feedback loop when a job has finished. It is up to the cronjob-style scheduling job to determine whether or not new jobs should be enqueued. This is a batch-job which runs at fixed intervals, whereas we should be taken these decisions in a streaming fashion in order avoid unused resources.\n\nWith \u003e110k mirrors configured currently, we end up running \u003e220k sidekiq jobs plus the `UpdateAllMirrorsWorker` job per 30 minutes, translating to more than 120 sidekiq jobs per second.\n\n#### Abstract model\n\nWe have a large number (\u003e110k) of jobs we want to execute at least every 30 minutes. This translates to an average rate of about 60 jobs per second. In addition to regular scheduled updates, users may request immediate updates for individual repositories (\"Update now\").\n\nWe can model this as a priority queue `Q`: A job has a desired next execution timestamp. Jobs are being queued in order of said timestamp. A `pop(Q)` retrieves the next job to be executed and removes the job from the queue. Once the job has finished, it is rescheduled to run in 30 minutes and put back to the queue.\n\nWe employ `n` number of worker processes to consume from this queue and run jobs.\n\nThe goals for this model are:\n\n1. Retrieving the next job from the queue with `pop(Q)` needs to be efficient in `O(1)`\n1. In order to efficiently use resources, each of the `n` processes should always have work to do (unless the queue is empty).\n1. Ability to scale out to be able to provide updates to all mirrors every 30 minutes (or less).\n\n#### Proposed design\n\nThe proposal here is to not use sidekiq to handle those recurring jobs. Instead, we run `n` worker processes which consume from a Postgres-based queue implementation. There is no need for a centralized scheduler as those workers coordinate amongst themselves without much overhead.\n\n##### Queue implementation\n\nIn order to implement a queue in postgres, a `FOR UPDATE SKIP LOCKED` pattern can be used to efficiently implement `pop(Q)`. Let's illustrate with this example:\n\n```sql\nCREATE TABLE jobs (id serial primary key, scheduled_for timestamp with time zone not null);\nCREATE INDEX ON jobs (scheduled_for, id);\n```\n\nJobs would reside in `jobs` table with a timestamp `scheduled_for`. After current time has passed this timestamp, the job is eligible to be executed.\n\nIn order to retrieve the next job (`pop(Q)`) from the queue, we do the following:\n\n```sql\nBEGIN;\nSELECT * FROM jobs WHERE scheduled_for \u003c= NOW() ORDER BY scheduled_for, id LIMIT 1 FOR UPDATE SKIP LOCKED; \n-- execute job's work\nUPDATE jobs SET scheduled_for = NOW() + 30.minutes WHERE id = ...\nCOMMIT;\n```\n\nWith an index in place, retrieving the next job is in `O(1)` (or the number of currently executing jobs because we scan the index until we find the next record that hasn't been locked yet). More work needs to be done on the database-side when the job is rescheduled - this requires an index update in `O(log N)` (N: number of jobs) and an update to the record itself (which results in dead tuples).\n\nIn order to limit transaction length, the job's work should be done outside the transaction but I'll simplify over that for now.\n\nAfter the job has finished, we update the `scheduled_for` timestamp to the next desired execution timestamp, which effectively puts the job back into the queue.\n\n##### Worker efficiency, scaling out, robustness\n\nSince there's no batch scheduling anymore, a worker with free resources directly goes to the queue and picks the next pending job from it. Unless there are no pending jobs, there's never a time for a worker to sit idly and wait for a job to be scheduled.\n\nIn order to scale out, we'd add more worker processes. \n\n##### Update now, priorities\n\nThe \"Update now!\" functionality can be implemented by updating the `scheduled_for` timestamp and set that to the current time for the particular project. However, the concept can easily be extended to support priorities, too: Add a `priority integer` column and also add that to the index. `pop(Q)` now orders by `priority, scheduled_for, id`. By default, `priority` is 0. Any lower priority values would directly promote the job and it gets executed before all other jobs with lower priority.\n\n##### Discussion\n\n* No need for a explicit job to schedule mirror update jobs.\n* Strong consistency with respect to job status - no need to synchronize state across postgres and redis.\n* Reduced complexity for job handling/scheduling\n* It is easier to make sure we are using resources efficiently.\n* We would have to ship a mechanic to install a long-running process (runit) for the worker processes.\n\nFor small(er) installations, this still works the same way. When there are no pending mirror updates, the worker simply sleeps.","state":"closed","created_at":"2019-07-10T15:52:58.211Z","updated_at":"2022-12-21T08:54:46.186Z","closed_at":"2022-09-07T13:24:08.231Z","closed_by":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"labels":["Category:Database","Category:Source Code Management","Database Engineering","Deliverable","Enterprise Edition","backend","bug::performance","customer","database","devops::create","group::source code","mirror","quad-planning::complete-no-action","section::dev","spike","type::maintenance","workflow::in dev"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://secure.gravatar.com/avatar/487c4c74f7e1714b5a270e00d4735e84?s=80\u0026d=identicon","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"user_notes_count":52,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12758","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12758","notes":"https://gitlab.com/api/v4/projects/278964/issues/12758/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12758/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12758","relative":"#12758","full":"gitlab-org/gitlab#12758"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8225,"epic":{"id":543697,"iid":8225,"title":"Pull Mirroring Improvements","url":"/groups/gitlab-org/-/epics/8225","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22674091,"iid":12757,"project_id":278964,"title":"Update clair executable to v12","description":"### Problem to solve\n\nclair executable `v12` is available, we should consider upgrading [our template](https://gitlab.com/gitlab-org/gitlab-ee/blob/master/lib/gitlab/ci/templates/Security/Container-Scanning.gitlab-ci.yml).\n\n### Proposal\n\n- [x] review the changelog\n- [x] update the `CLAIR_EXECUTABLE_VERSION` variable in https://gitlab.com/gitlab-org/gitlab-ee/blob/master/lib/gitlab/ci/templates/Security/Container-Scanning.gitlab-ci.yml\n\n### Testing\n\n- [x] Check relevant test projects leveraging Container-Scanning and make sure QA pipelines are passing with this new version:\n[QA projects for Container Scanning](https://gitlab.com/explore/projects?tag=Secure-QA,Container+Scanning)\n\n### What does success look like, and how can we measure that?\n\nOur feature is leveraging the latest version (`v12`) of Clair executable\n\n### What is the type of buyer?\n\n~\"GitLab Ultimate\"\n\n### Links / references","state":"closed","created_at":"2019-07-10T15:51:35.940Z","updated_at":"2019-11-18T15:57:25.003Z","closed_at":"2019-08-16T17:53:20.671Z","closed_by":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"labels":["Category:Container Scanning","Deliverable","Enterprise Edition","backend","backstage [DEPRECATED]","devops::secure","group::composition analysis","priority::1"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"}],"author":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"type":"ISSUE","assignee":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12757","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12757","notes":"https://gitlab.com/api/v4/projects/278964/issues/12757/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12757/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12757","relative":"#12757","full":"gitlab-org/gitlab#12757"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null}]