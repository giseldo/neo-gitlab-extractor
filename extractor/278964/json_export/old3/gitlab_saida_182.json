[{"id":18673928,"iid":10076,"project_id":278964,"title":"Remove Projects::ManagedLicensesController","description":"I noticed that `Projects::ManagedLicensesController` and `API::ManagedLicenses` duplicate each other. However, only `API::ManagedLicenses` is in use. We should remove the controller to avoid confusion. \n\n\n/cc @gonzoyumo @groulot","state":"closed","created_at":"2019-02-28T09:52:31.059Z","updated_at":"2019-12-18T11:32:54.667Z","closed_at":"2019-11-20T15:51:37.013Z","closed_by":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"labels":["Category:License Compliance","Deliverable","Enterprise Edition","backend","backstage [DEPRECATED]","devops::secure","group::composition analysis","maintenance::refactor","workflow::in review"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":4353908,"username":"briankabiro","name":"Brian Kabiro","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4353908/avatar.png","web_url":"https://gitlab.com/briankabiro"}],"author":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"type":"ISSUE","assignee":{"id":4353908,"username":"briankabiro","name":"Brian Kabiro","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4353908/avatar.png","web_url":"https://gitlab.com/briankabiro"},"user_notes_count":8,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10076","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10076","notes":"https://gitlab.com/api/v4/projects/278964/issues/10076/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10076/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10076","relative":"#10076","full":"gitlab-org/gitlab#10076"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18673057,"iid":10072,"project_id":278964,"title":"Batch comments / starting a review does not work on images","description":"### Summary\n\nThe batch comments feature does not work for images.\n\n### Steps to reproduce\n\n- open merge request that adds an image (for example https://gitlab.com/reproduction-group/merge-requests/merge_requests/10/diffs)\n- click image to add a comment\n- click `Start a review` button\n\n### What is the current *bug* behavior?\n\n`Start a review` button turns grey but nothing else happens (no errors in the browser console, no requests being made).\n\n### What is the expected *correct* behavior?\n\nA comment is added.","state":"closed","created_at":"2019-02-28T09:19:49.076Z","updated_at":"2020-12-07T17:23:39.187Z","closed_at":"2019-04-15T10:05:05.207Z","closed_by":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"labels":["Category:Code Review Workflow","Create [DEPRECATED]","Deliverable","Enterprise Edition","devops::create","frontend","group::code review","merge requests","priority::3","reproduced on GitLab.com","severity::3","type::bug"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":7,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10072","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10072","notes":"https://gitlab.com/api/v4/projects/278964/issues/10072/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10072/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10072","relative":"#10072","full":"gitlab-org/gitlab#10072"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":847,"epic":{"id":4431,"iid":847,"title":"Make merge request reviews loveable","url":"/groups/gitlab-org/-/epics/847","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e day remaining"},"iteration":null,"health_status":null},{"id":18672982,"iid":10071,"project_id":278964,"title":"Extract all the dependencies in the project","description":"### Problem to solve\n\nThe Bill Of Materials (BOM) is a list of all the dependencies that are used in a given project.\n\nWe need to run a tool on the code and extract all the information. This can be done during a CI/CD job, in a similar way Dependency Scanning and License Management work.\n\nOnce the list is completed, it will be sent to the backend and presented to users.\n\n### Target audience\n\n- Delaney, Development Team Lead, https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas#delaney-development-team-lead\n\n- Sam, Security Analyst, https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas#sam-security-analyst\n\n### Proposal\n\nReuse the Dependency Scanning (DS) tool to generate a dependency list for the project.\nWe need all the dependencies, not just the ones with vulnerabilities.\n\nOnce the dependency list is created, it is sent to the backend using CI's `reports` syntax.\n\nIn a first iteration, we extend the existing DS report syntax to include a dependency list.\nThis makes possible to reuse all Gemnasium-based projects to collect information on the dependencies, and aggregate all the dependency list into a single one.\nThe DS report syntax is likely to evolve quickly as we improve the dependency list but it has to remain backward compatible at all times.\nSee [discussion](https://gitlab.com/gitlab-org/gitlab-ee/issues/10071#note_172605049)\n\nThe rails ~backend will be updated to process the dependency list included in the DS reports and to serve it to the ~frontend using dedicated API endpoints (out of scope).\n\nThe dependency list may include packages that are not explicitly listed in the dependency files checked in the repo but nevertheless installed because of these.\nIn the context of Python project, the list may include a package that is not listed in `requirements.txt`.\n\n- [x] update common library\n  - [x] add `dependency_files` to reports, with `packager`, `path` and `dependencies`\n  - [x] merge dependency lists when merging reports\n  - [x] bump format version\n- [x] update gemnasium\n  - [x] upgrade gemnasium dependency\n  - [x] generate dependency list\n- update reverse dependencies of common, gemnasium\n  - [x] update gemnasium-maven\n  - [x] update gemnasium-python\n  - [x] update dependency-scanning\n- [x] update test projects (expectations)\n\nEach updated project must be git tagged and published, and the changelog has to be updated too.\n\n### Permissions and Security\n\nSince this is an extension of the existing jobs, permissions will be the same.\n\n### Documentation\n\nWe need to document the format for this new section.","state":"closed","created_at":"2019-02-28T09:16:11.463Z","updated_at":"2019-11-18T15:58:01.688Z","closed_at":"2019-06-05T08:38:18.296Z","closed_by":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"labels":["Deliverable","Enterprise Edition","Persona: Development Team Lead","Persona: Security Analyst","analysts","customer","dependency list","devops::secure","group::composition analysis","type::feature"],"milestone":{"id":693518,"iid":33,"group_id":9970,"title":"12.0","description":"https://about.gitlab.com/releases/2019/06/22/gitlab-12-0-released/","state":"closed","created_at":"2018-10-30T16:47:37.975Z","updated_at":"2020-04-22T19:51:03.475Z","due_date":"2019-06-22","start_date":"2019-05-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/33"},"assignees":[{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"}],"author":{"id":1273957,"username":"bikebilly","name":"Fabio Busatto","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1273957/avatar.png","web_url":"https://gitlab.com/bikebilly"},"type":"ISSUE","assignee":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"user_notes_count":32,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10071","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":11,"completed_count":11},"weight":11,"blocking_issues_count":0,"has_tasks":true,"task_status":"11 of 11 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10071","notes":"https://gitlab.com/api/v4/projects/278964/issues/10071/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10071/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10071","relative":"#10071","full":"gitlab-org/gitlab#10071"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":859,"epic":{"id":4598,"iid":859,"title":"Dependency List (Bill Of Materials) - Minimal (MVC)","url":"/groups/gitlab-org/-/epics/859","group_id":9970,"human_readable_end_date":"Nov 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18661804,"iid":10067,"project_id":278964,"title":"Geo: Split file_registry into lfs_object_registry and upload_registry","description":"This comes out of https://gitlab.com/gitlab-org/gitlab-ee/issues/5039.\n\nWe already extracted `job_artifact_registry` in https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/4719. Ideally we would finish the job.\n\nThe benefits are similar https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/4719#note_66231375:\n\n* Splitting the types into different tables makes logical sense: Uploads are different than LFS\n* Allows for potential optimization by querying for rows \u003e ID, rather than doing a full sweep every time\n* Reduces the index sizes: no need to index on `file_type`\n* Ordering of columns is better due to migration, leading to better storage packing on disk","state":"closed","created_at":"2019-02-27T22:27:41.554Z","updated_at":"2020-01-21T15:12:24.837Z","closed_at":"2019-10-31T18:50:46.372Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["Enterprise Edition","backstage [DEPRECATED]","bug::performance","devops::systems","group::geo","maintenance::refactor","missed:12.4","priority::3"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"user_notes_count":10,"merge_requests_count":2,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10067","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10067","notes":"https://gitlab.com/api/v4/projects/278964/issues/10067/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10067/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10067","relative":"#10067","full":"gitlab-org/gitlab#10067"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2097,"epic":{"id":14196,"iid":2097,"title":"Verification Framework","url":"/groups/gitlab-org/-/epics/2097","group_id":9970,"human_readable_end_date":"Nov 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24690360,"iid":27044,"project_id":278964,"title":"Exposure of trigger tokens on project exports","description":"**[HackerOne report #497144](https://hackerone.com/reports/497144)** by `mishre` on 2019-02-16, assigned to `asaba`:\n\n**Summary:**   \nAny user can configure a trigger token for himself so that pipelines will be used to create CI/CD jobs on his own user context. When using the trigger token, Jobs created on the user's behalf will have access to all the resources(repositories) the user have (as explained here: https://docs.gitlab.com/ee/ci/triggers/#taking-ownership-of-a-trigger). Maintainers of the repository cannot usually see the trigger tokens for other users (only for themselves) as it will give them complete access (via ci-cd jobs) to perform actions on their behalf.\n\n**Description:**  \nAll maintainers can perform an export of the repository, which in turn will leak all the trigger tokens created for all the other maintainers of the repository through a file called project.json which contains different information for later restoring the project.  \n## Steps To Reproduce:  \n1. Create a new repository.  \n2. Go to the Members section of the repository and add another maintainer (the attacker).  \n3. Go to the CI/CD settings of the project and create a trigger token.  \n4. Login as the attacker and go to the CI/CD settings of the project - you should not be able to see the trigger token.  \n5. Now create an export of the project.  \n6. Download the exported .tar.gz file and open a file called project.json  \n7. Look for the word \"trigger\" in the json file -\u003e you now should be able to see the token at plaintext and use it to impersonate the victim.  \n## Supporting Material/References:\n\n  * List any additional material (e.g. screenshots, logs, etc.)\n\n## Impact\n\nAn attacker can impersonate the victim and have access to all the repositories the victims has access to.\n\n## Documentation\n* [ ] Update the user docs to explicitly call out the fact that trigger tokens are not exported for security reasons.\n\n## Implementation plan\n\n- [ ] ~backend Remove `:triggers` from https://gitlab.com/gitlab-org/gitlab/blob/master/lib/gitlab/import_export/project/import_export.yml#L91,\n- [ ] ~documentation Mark `Pipeline Triggers` as unsupported for GitLab in https://gitlab.com/gitlab-com/customer-success/professional-services-group/global-practice-development/migration/congregate/-/blob/master/customer/gitlab-migration-features-matrix.md#L42, Congregate tool should be able to still migrate triggers as it is using GitLab API and not File Export\n- [ ] ~documentation Add **Pipeline triggers** to list in docs https://gitlab.com/gitlab-org/gitlab/blob/master/doc/user/project/settings/import_export.md#L133\n- [ ] ~test Verify if exported project does not contain that token,","state":"closed","created_at":"2019-02-27T21:24:00.065Z","updated_at":"2021-12-21T00:01:00.168Z","closed_at":"2021-09-30T18:53:39.890Z","closed_by":{"id":4554599,"username":"m_gill","name":"Michelle Gill","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4554599/avatar.png","web_url":"https://gitlab.com/m_gill"},"labels":["Category:Importers","Engineering Allocation","FY22::Q3","HackerOne","Importer:Project Export/Import","Next Up","backend","devops::manage","group::import","milestone::p3","priority::3","section::dev","security","security-backlog::valid","severity::3","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/27044","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/27044","notes":"https://gitlab.com/api/v4/projects/278964/issues/27044/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/27044/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#27044","relative":"#27044","full":"gitlab-org/gitlab#27044"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6619,"epic":{"id":332692,"iid":6619,"title":"Manage:Import Security","url":"/groups/gitlab-org/-/epics/6619","group_id":9970,"human_readable_end_date":"Dec 16, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18652835,"iid":10061,"project_id":278964,"title":"Add a usage ping field for required code owner approval","description":"Add a new ~\"usage ping\" field for the count of projects where code owner approval is required.","state":"closed","created_at":"2019-02-27T16:31:49.716Z","updated_at":"2019-08-12T15:05:59.692Z","closed_at":"2019-03-11T11:57:07.812Z","closed_by":{"id":87854,"username":"DouweM","name":"Douwe Maan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/73d1548ae618321220679b3a4fda7fb1?s=80\u0026d=identicon","web_url":"https://gitlab.com/DouweM"},"labels":["Create [DEPRECATED]","Deliverable","Enterprise Edition","GitLab Premium","Product Vision FY20","backend","devops::create","group::product intelligence","missed:11.9","repository","type::feature","workflow::in review"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"}],"author":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"type":"ISSUE","assignee":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"user_notes_count":2,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10061","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10061","notes":"https://gitlab.com/api/v4/projects/278964/issues/10061/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10061/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10061","relative":"#10061","full":"gitlab-org/gitlab#10061"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24690321,"iid":27035,"project_id":278964,"title":"[MR discussions] Slow queries when fetching note_diff_files","description":"We're able to check that by accessing https://gitlab.com/gitlab-com/www-gitlab-com/merge_requests/16021 profiling console on `discussions.json`.\n\nThat's the generated query:\n\n```sql\nSELECT \"note_diff_files\".\"id\"\nFROM \"note_diff_files\"\nINNER JOIN \"notes\" ON \"notes\".\"id\" = \"note_diff_files\".\"diff_note_id\"\nAND \"notes\".\"type\" IN ('DiffNote')\nLEFT OUTER JOIN \"projects\" ON \"projects\".\"id\" = \"notes\".\"project_id\"\nWHERE \"note_diff_files\".\"diff_note_id\" IN\n    (SELECT id\n     FROM\n       (SELECT \"notes\".*\n        FROM \"notes\"\n        WHERE \"notes\".\"noteable_id\" = 18527120\n          AND \"notes\".\"noteable_type\" = 'MergeRequest'\n        UNION ALL SELECT \"notes\".*\n        FROM \"notes\"\n        WHERE \"notes\".\"project_id\" IN (7764,\n                                       7764)\n          AND \"notes\".\"noteable_type\" = 'Commit'\n          AND \"notes\".\"commit_id\" IN ('7d90dbc658817f5d0f0ea0e6f49c6a1cb0d285b7',\n                                      'c2705610628c9cfec8ac364208252430cdb15e4d',\n                                      '1eee2e4148be10ebd1b40a2d6b5fccbbbcd1044f',\n                                      '6851b0505a99f445f762c265ba8c31b97e37d37a',\n                                      '17706f8e4bd31ecf806c13e952942ab797678c80',\n                                      'a90f1b13b705f3b4399ec8564ae0a0979a1c55d9',\n                                      'c9f5a7b1155266df15fb4b4af9d2f7346230fb86',\n                                      'c0a10cd230b0bae7e6199b28ac63c8c5b32775c6',\n                                      '033321adb12e025d414aca299715f6c02046a8b8',\n                                      '7165654a3c49b92f83735a52e45441a463208128',\n                                      '60214ab0536c25e33fe7d9970c23dff3c5309edc',\n                                      '46f088e8dddeaccd30d0147d8fde283f50c6496e',\n                                      'f459b1108bbf1856befcac2753ff52e6597545ec',\n                                      '9c71960a521f0d44e2bb06c2057ad3689687d72a',\n                                      '1fe1561fcd2f2ac08863cb9ccc9b66b3af317df0',\n                                      '0445aa6d0b879748ec68b0f9913d6037563dca30',\n                                      '88eac68d39eb78a069ba468468d3c38eece00123',\n                                      'c2e2fbe1333a49392a5e415e33287eaed4e1c31f',\n                                      'da1c43e02fbca57be7d1b7109be56928a8f37c86',\n                                      'd5c2f82b582857f5ad4cea037024fe39a1a853ef',\n                                      'f6e4a7becc66dd88db4bf5e1001a06c8bd258933',\n                                      'c1029ad958ff3302b577ab039b5226ec4ef0a257',\n                                      'f22f68be490962ea2012309cc67cd571996f1631',\n                                      'e3387993a498a923d0e83a17282cd54d0e98bd22',\n                                      '1ebc184dbc475c410e075ae55abaf9b284cfb68c',\n                                      'a5339d93156c5f46da707e34f42905cf1a8e1154',\n                                      '42c81ee1509f57406a948f5d4f48725731dfad3d',\n                                      'dfa87b22b18a06c826840d420d7205b0fb0e41d4',\n                                      'd5b5b509556726f5686ead8eb127c4a4bcf4e4e8',\n                                      '1a1bc45fb08b83506e2445e61b7263c34cb3aa56',\n                                      '47b793efd6d911afdf37c7abc90824a3bc7d3bc0',\n                                      '5b79da18a5576d5703e05b3bb546b002a14cc9d3',\n                                      'bfc56e0e6fdb4fe4c4077aca0e2f49053064efd3',\n                                      '6a815b7e69fe10a50e8c21389747b9c22bd283fe',\n                                      '44ad653c368e80fe65da252cb93b8bc8fed5f732',\n                                      '755759716060b5e1c13545b8f649d82413729695',\n                                      '848c27ee3825acd583a3181330d31cdbfe0434cb',\n                                      'ae80f54a0ecd8e13cfe3e243532a03adcad2debf',\n                                      '1d59fd18697c7135964568e23014714b946786aa',\n                                      '62a6773abe1885d4b8156b57677dffe1d98176ec',\n                                      '32fcdd419b86e8111aa3ab6786085b82fd82ef0a',\n                                      '8947928d653ed8d207f02e41928bbda29aa64058',\n                                      '51def0947dc4fe75af0f3ea9a3df5b94fb36ff52',\n                                      'acbbe5a076a7b31c0859103bcd446c70bcd47d1d',\n                                      '53f4cd3e208366da5cca1b3595e26f059713f798',\n                                      'e72887dd77ed381de68b82f12c56dd0646cf9b85',\n                                      '91b93f4044d6e8a15bede332835cd7c2d6a97771',\n                                      '13d275d89ceb795e058d5f7a27f0129e3261dea9',\n                                      '57d36e63c5315f3a3df21d71e4463040ab1c5f43',\n                                      'b21ab4ff63b68d6778403a48467373019083fb5a',\n                                      'c642e0b90703d3ca34c216f049a1ebfc608b0e20',\n                                      'cf54a82ed650531a85aa9f0d718776614e685fcd',\n                                      '80e79e86fbcc43cd7002f8d2d910b3e180bae2f6',\n                                      '9e9c8bf32318ee126e8cf4a13fde9fbbeace83a3',\n                                      '523a1577bee6d45a7f2f93a4f85b5e510ab11448',\n                                      '614f869c2d62e5a0905f7eef4588867c73ae09ce',\n                                      '1176719499fada59d8e89fd30649d3c1644889ef',\n                                      '420f72659d58e10a6673757de9f2d323d4390921',\n                                      '0d2de838741e82daf711a80ba947da585a336b7d',\n                                      '126ee91fe6c7018e1f67bbc3fda30f77bdeb2da8',\n                                      'cce4cdc9411436f0f86e4ae68e6e03bbe9c5cca1',\n                                      'cac483b6b16ff8321add282e097f12b1d4ac7cae',\n                                      '7378c450a20b495cddc6bc71125e2b4f3ba45fad',\n                                      'efa5bbae1ca60e8a0786f8b25adf8d0adba25e0a',\n                                      '5cda61e40a3fab8b124788a1a35c2fa1c762a488',\n                                      'e35eb4fd8eb0639c7a5d46e606ef3b8548a06be0',\n                                      'b9b736f26ea7533473388fffe313190ec938d224',\n                                      '67b1af3dc2a9f7a459d0981e24c6d35e1eac487b',\n                                      '2aa4e8751e651f5183b5588847cd524c283d5c40',\n                                      '4a649e9f3d0996cb630280808ef209ffa36c8ee9',\n                                      'cb2c4db496f78caede7136301e0ae75ea209aad7',\n                                      '018a8243dfaa3f575553372224e3d73e11b0404a',\n                                      '4a7f1ab4909ae5bd6ebb498362e8c3fa19ed9514',\n                                      '1d44494b51abcc7ae32c3f6b48a382fb5d608a34',\n                                      '2746fcb4d5904dbe9542b8b0a5ddb3ced034ee8b',\n                                      'b33601a044938ea7036d9a79f0eb1c6296b47779',\n                                      '94b132615a91f08255d77ffcff1543734c46fe73',\n                                      '7832e0d3fe93bdd6839213298d386f41aff43698',\n                                      'eadfe7a399dc945653f0aa7cf32e542c6065ac96',\n                                      'a5ca36000f0a0e559554d13ce100179273362013',\n                                      '4c4613500032f7f04fc8e854cf61b1780e2ad1b8',\n                                      '40cef3b83aeaca225f303f83d0a85b944916d771',\n                                      'd0770f86a9ea38d11bbfbec5960396f5b0652889',\n                                      '13f741bf2d0d528cded11f81b337642b0e7d1c7f',\n                                      '5a1c38099a94cbde85c2274db9b323e85ca6ef6a',\n                                      'd6545a9409f304449f74cb2dd5247a032cade078',\n                                      'd3dbd06526862ac09b8259a7293ddef41a233d11',\n                                      'ced32f456560441d79ff8e1f0bd329c2da00a92e',\n                                      '9391b535090a783df07075ffe1b32d953f760fe2',\n                                      'ca7aca6635b72762ae3ba35b926fe043211b9b1c',\n                                      '6ceb751b41324cf8df77edb0f49a5ab3d5bede2f',\n                                      '1270bbe2ff2bca41e72c1533c25f816a5334c707',\n                                      'b603faf50b775f49a0e92dbb502d778eb35463e0',\n                                      'fd251c25972134c238659d095077614f90dd38fd',\n                                      '0eec4d1315d4fe3789bb33e6e88fc3f03cc336e3',\n                                      'f0c4b85550f72ed5a6a7a0b5bc48fc3bc71fd4a9',\n                                      'f393c1bf5bdc1e9b69dd004f0f52b1cb4ba181e5',\n                                      '36ff30257a50d233610c2c8c39dbc2f23386690f',\n                                      'f99cde4174bb48617ff5b267bd98dc4b361eedb3',\n                                      '22e6f11eff79efbd6923cbfc5a9217844bd56929')) notes)\n  AND (resolved_at IS NULL\n       OR noteable_type = 'Commit')\n```\n\nIt's taking approximately 3.3 seconds to complete. I can't generate the query plan given I don't have production access.\n\nDB profile link: http://profiler.gitlap.com/20190225/e139b7be-f34b-4e2a-933b-8c4b3f8bb387.txt.gz\n\nDo you think there's room to improve it @NikolayS @abrandl?","state":"closed","created_at":"2019-02-27T16:02:07.251Z","updated_at":"2020-12-07T16:51:53.604Z","closed_at":"2019-09-23T14:26:36.786Z","closed_by":{"id":11493,"username":"oswaldo","name":"Oswaldo Ferreira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11493/avatar.png","web_url":"https://gitlab.com/oswaldo"},"labels":["Category:Code Review Workflow","Stretch","backend","bug::performance","database","devops::create","group::code review","merge requests","missed-deliverable","missed:11.10","missed:12.3","priority::2","severity::3","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":11493,"username":"oswaldo","name":"Oswaldo Ferreira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11493/avatar.png","web_url":"https://gitlab.com/oswaldo"}],"author":{"id":11493,"username":"oswaldo","name":"Oswaldo Ferreira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11493/avatar.png","web_url":"https://gitlab.com/oswaldo"},"type":"ISSUE","assignee":{"id":11493,"username":"oswaldo","name":"Oswaldo Ferreira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11493/avatar.png","web_url":"https://gitlab.com/oswaldo"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/27035","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/27035","notes":"https://gitlab.com/api/v4/projects/278964/issues/27035/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/27035/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#27035","relative":"#27035","full":"gitlab-org/gitlab#27035"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24690313,"iid":27033,"project_id":278964,"title":"Extract DiffDiscussionHeader component from NoteableDiscussion","description":"This is part of https://gitlab.com/gitlab-org/gitlab-ce/issues/55566.\n\nExtract this bit https://gitlab.com/gitlab-org/gitlab-ce/blob/a5174cf0fcfd0ae77d25ac5208b7aa371d7d7b73/app/assets/javascripts/notes/components/noteable_discussion.vue#L378-414 into a new `DiffDiscussionHeader` component.","state":"closed","created_at":"2019-02-27T14:19:35.128Z","updated_at":"2020-12-07T16:51:54.897Z","closed_at":"2019-11-19T17:40:27.685Z","closed_by":{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"},"labels":["Category:Code Review Workflow","Deliverable","devops::create","frontend","group::code review","maintenance::refactor","merge requests","missed-deliverable","missed:12.2","workflow::production"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/27033","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/27033","notes":"https://gitlab.com/api/v4/projects/278964/issues/27033/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/27033/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#27033","relative":"#27033","full":"gitlab-org/gitlab#27033"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1883,"epic":{"id":12051,"iid":1883,"title":"Split NoteableDiscussion component","url":"/groups/gitlab-org/-/epics/1883","group_id":9970,"human_readable_end_date":"Nov 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18644988,"iid":10055,"project_id":278964,"title":"Modifying Project required approvals causes existing MR with fewer required approvals to \"re-open\" when merged","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nChanging a Project's \"Approvals required\" to greater than the approvals required on an open Merge Request causes a bug after merging the MR.\nAfter merging, the MR appears to \"open\", while the branch is successfully merged.\n\n### Steps to reproduce\n\n* With a Project that requires N approvals (eg. 1 approval).\n* Create a merge request, changing no defaults.\n* Modify the Project to require \u003eN approvals (eg. 2 approvals).\n* Obtain the required N (eg. 1) approval on the merge request.\n* Select \"Merge\" on the merge request.\n\nObserve the branch has been merged to the target, and the merge request has been \"opened\", now with no changes or commits (as the target branch already has those commits)\n\nAlso, when attempting to delete the now empty merge request, an error is shown, and the merge request cannot be closed without editing the required approvals:\n\n\u003e Validate approvals before merge Number of approvals must be at least that of approvals on the target project\n\n### Example Project\n\nI was unable to reproduce on gitlab.com due to the requirement for merge request approvals\n\n### What is the current *bug* behavior?\n\nWhen merging the merge request, the merge request is not closed as expected. This is confusing as it is not clear if the changes were merged into the target branch.\n\nThe merge request is then left in an open state, and cannot be closed without modification.\n\nThe merge request also still shows under the \"Open\" tab for the list of all merge requests.\n\nI do not know what the expected behavior is when changing the required approvals on a Project to higher than that on existing Merge Requests.\n\n### What is the expected *correct* behavior?\n\nWhen merging a merge request, it should go into the \"merged\" state.\n\n### Relevant logs and/or screenshots\n\nThe MR timeline shows two approvals and then a simultaneous \"opened\" and \"mentioned in commit\" from the branch being merged.\n![gitlab-mr-bug-timeline](/uploads/61c48d66b512d2a0edb04c80f74202c8/gitlab-mr-bug-timeline.png)\n\nWhen attempting to close the re-opened MR, the user is sent to the Edit Merge Request screen and shown the following error:\n![gitlba-mr-bug-closing-error](/uploads/eb38d77036aede6640d3dedac16c08d1/gitlba-mr-bug-closing-error.png)\n\n### Output of checks\n\nN/A\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\n\nSystem information\nSystem:\t\tUbuntu 16.04\nProxy:\t\tno\nCurrent User:\tgit\nUsing RVM:\tno\nRuby Version:\t2.5.3p105\nGem Version:\t2.7.6\nBundler Version:1.16.6\nRake Version:\t12.3.2\nRedis Version:\t3.2.12\nGit Version:\t2.18.1\nSidekiq Version:5.2.5\nGo Version:\tunknown\n\nGitLab information\nVersion:\t11.8.0-ee\nRevision:\t002a282\nDirectory:\t/opt/gitlab/embedded/service/gitlab-rails\nDB Adapter:\tpostgresql\nDB Version:\t9.6.11\nURL:\t\thttps://gitlab.REDACTED.lan\nHTTP Clone URL:\thttps://gitlab.REDACTED.lan/some-group/some-project.git\nSSH Clone URL:\tgit@gitlab.REDACTED.lan:some-group/some-project.git\nElasticsearch:\tyes\nGeo:\t\tno\nUsing LDAP:\tno\nUsing Omniauth:\tyes\nOmniauth Providers: \n\nGitLab Shell\nVersion:\t8.4.4\nRepository storage paths:\n- default: \t/var/opt/gitlab/git-data/repositories\nHooks:\t\t/opt/gitlab/embedded/service/gitlab-shell/hooks\nGit:\t\t/opt/gitlab/embedded/bin/git\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\nChecking GitLab subtasks ...\n\nChecking GitLab Shell ...\n\nGitLab Shell: ... GitLab Shell version \u003e= 8.4.4 ? ... OK (8.4.4)\nRunning /opt/gitlab/embedded/service/gitlab-shell/bin/check\nCheck GitLab API access: OK\nRedis available via internal API: OK\n\nAccess to /var/opt/gitlab/.ssh/authorized_keys: OK\ngitlab-shell self-check successful\n\nChecking GitLab Shell ... Finished\n\nChecking Gitaly ...\n\nGitaly: ... default ... OK\n\nChecking Gitaly ... Finished\n\nChecking Sidekiq ...\n\nSidekiq: ... Running? ... yes\nNumber of Sidekiq processes ... 1\n\nChecking Sidekiq ... Finished\n\nChecking Incoming Email ...\n\nIncoming Email: ... Reply by email is disabled in config/gitlab.yml\n\nChecking Incoming Email ... Finished\n\nChecking LDAP ...\n\nLDAP: ... LDAP is disabled in config/gitlab.yml\n\nChecking LDAP ... Finished\n\nChecking GitLab App ...\n\nGit configured correctly? ... yes\nDatabase config exists? ... yes\nAll migrations up? ... yes\nDatabase contains orphaned GroupMembers? ... no\nGitLab config exists? ... yes\nGitLab config up to date? ... yes\nLog directory writable? ... yes\nTmp directory writable? ... yes\nUploads directory exists? ... yes\nUploads directory has correct permissions? ... yes\nUploads directory tmp has correct permissions? ... yes\nInit script exists? ... skipped (omnibus-gitlab has no init script)\nInit script up-to-date? ... skipped (omnibus-gitlab has no init script)\nProjects have namespace: ... \n4/2 ... yes\n4/3 ... yes\n4/4 ... yes\n69/5 ... yes\n4/6 ... yes\n4/8 ... yes\n4/9 ... yes\n4/10 ... yes\n6/11 ... yes\n4/12 ... yes\n4/13 ... yes\n9/14 ... yes\n13/15 ... yes\n9/16 ... yes\n4/17 ... yes\n15/18 ... yes\n4/19 ... yes\n4/20 ... yes\n16/21 ... yes\n4/22 ... yes\n19/24 ... yes\n13/26 ... yes\n15/27 ... yes\n69/28 ... yes\n69/29 ... yes\n69/30 ... yes\n4/31 ... yes\n19/33 ... yes\n19/34 ... yes\n19/35 ... yes\n19/36 ... yes\n19/37 ... yes\n19/38 ... yes\n19/39 ... yes\n19/40 ... yes\n19/41 ... yes\n39/43 ... yes\n19/44 ... yes\n19/45 ... yes\n125/46 ... yes\n41/47 ... yes\n42/48 ... yes\n42/51 ... yes\n19/56 ... yes\n31/57 ... yes\n49/58 ... yes\n49/59 ... yes\n39/61 ... yes\n13/62 ... yes\n19/63 ... yes\n50/64 ... yes\n19/65 ... yes\n4/66 ... yes\n50/67 ... yes\n50/68 ... yes\n50/69 ... yes\n64/70 ... yes\n20/72 ... yes\n20/73 ... yes\n20/74 ... yes\n20/75 ... yes\n50/76 ... yes\n20/77 ... yes\n20/78 ... yes\n18/79 ... yes\n20/80 ... yes\n50/81 ... yes\n125/82 ... yes\n18/83 ... yes\n20/84 ... yes\n50/85 ... yes\n19/87 ... yes\n20/88 ... yes\n18/89 ... yes\n20/90 ... yes\n50/91 ... yes\n50/92 ... yes\n65/95 ... yes\n64/96 ... yes\n49/97 ... yes\n49/98 ... yes\n69/100 ... yes\n74/101 ... yes\n13/102 ... yes\n51/103 ... yes\n49/104 ... yes\n65/105 ... yes\n64/106 ... yes\n65/107 ... yes\n64/109 ... yes\n64/110 ... yes\n50/111 ... yes\n92/112 ... yes\n92/113 ... yes\n92/114 ... yes\n92/115 ... yes\n65/117 ... yes\n64/120 ... yes\n64/121 ... yes\n64/122 ... yes\n65/124 ... yes\n92/125 ... yes\n64/126 ... yes\n64/127 ... yes\n65/128 ... yes\n64/129 ... yes\n59/130 ... yes\n66/131 ... yes\n66/132 ... yes\n69/133 ... yes\n48/134 ... yes\n48/135 ... yes\n48/136 ... yes\n48/137 ... yes\n48/138 ... yes\n64/139 ... yes\n64/140 ... yes\n51/141 ... yes\n80/142 ... yes\n67/143 ... yes\n69/144 ... yes\n66/145 ... yes\n65/147 ... yes\n49/148 ... yes\n50/149 ... yes\n66/150 ... yes\n69/151 ... yes\n63/152 ... yes\n63/153 ... yes\n66/154 ... yes\n66/155 ... yes\n80/156 ... yes\n63/157 ... yes\n63/158 ... yes\n48/159 ... yes\n69/160 ... yes\n69/161 ... yes\n143/162 ... yes\n69/163 ... yes\n85/164 ... yes\n70/165 ... yes\n70/166 ... yes\n71/167 ... yes\n72/168 ... yes\n58/169 ... yes\n74/170 ... yes\n143/171 ... yes\n79/172 ... yes\n78/174 ... yes\n19/175 ... yes\n4/176 ... yes\n69/177 ... yes\n51/182 ... yes\n80/183 ... yes\n80/184 ... yes\n80/185 ... yes\n81/186 ... yes\n79/188 ... yes\n93/189 ... yes\n20/191 ... yes\n19/192 ... yes\n74/193 ... yes\n74/194 ... yes\n64/197 ... yes\n64/199 ... yes\n4/201 ... yes\n4/202 ... yes\n38/203 ... yes\n20/204 ... yes\n93/206 ... yes\n69/207 ... yes\n4/210 ... yes\n42/211 ... yes\n10/213 ... yes\n4/214 ... yes\n4/215 ... yes\n39/216 ... yes\n2/217 ... yes\n81/218 ... yes\n20/219 ... yes\n19/220 ... yes\n20/221 ... yes\n83/222 ... yes\n83/223 ... yes\n81/224 ... yes\n84/225 ... yes\n85/226 ... yes\n85/227 ... yes\n84/228 ... yes\n2/229 ... yes\n85/230 ... yes\n85/231 ... yes\n7/232 ... yes\n76/233 ... yes\n6/234 ... yes\n85/235 ... yes\n10/236 ... yes\n10/237 ... yes\n19/238 ... yes\n85/239 ... yes\n85/240 ... yes\n4/241 ... yes\n82/242 ... yes\n59/243 ... yes\n82/244 ... yes\n2/245 ... yes\n4/246 ... yes\n79/247 ... yes\n65/248 ... yes\n31/249 ... yes\n86/251 ... yes\n4/252 ... yes\n69/253 ... yes\n69/255 ... yes\n79/256 ... yes\n58/257 ... yes\n4/258 ... yes\n80/259 ... yes\n80/260 ... yes\n58/261 ... yes\n64/262 ... yes\n4/264 ... yes\n76/266 ... yes\n39/267 ... yes\n4/268 ... yes\n80/269 ... yes\n69/271 ... yes\n87/272 ... yes\n87/273 ... yes\n87/274 ... yes\n74/275 ... yes\n87/276 ... yes\n87/277 ... yes\n51/278 ... yes\n74/279 ... yes\n65/283 ... yes\n69/284 ... yes\n93/285 ... yes\n92/286 ... yes\n92/287 ... yes\n92/288 ... yes\n13/289 ... yes\n13/290 ... yes\n13/291 ... yes\n69/293 ... yes\n87/294 ... yes\n13/295 ... yes\n81/296 ... yes\n87/297 ... yes\n13/298 ... yes\n89/300 ... yes\n6/303 ... yes\n13/304 ... yes\n65/306 ... yes\n88/307 ... yes\n13/308 ... yes\n4/309 ... yes\n13/310 ... yes\n69/312 ... yes\n76/313 ... yes\n4/314 ... yes\n4/315 ... yes\n88/316 ... yes\n69/317 ... yes\n69/319 ... yes\n41/320 ... yes\n41/322 ... yes\n19/323 ... yes\n84/325 ... yes\n18/326 ... yes\n37/327 ... yes\n69/328 ... yes\n41/329 ... yes\n69/330 ... yes\n79/332 ... yes\n87/333 ... yes\n6/334 ... yes\n76/335 ... yes\n93/336 ... yes\n20/337 ... yes\n93/338 ... yes\n95/339 ... yes\n76/340 ... yes\n6/344 ... yes\n48/345 ... yes\n96/346 ... yes\n97/348 ... yes\n97/349 ... yes\n48/350 ... yes\n79/351 ... yes\n41/352 ... yes\n13/353 ... yes\n97/354 ... yes\n98/356 ... yes\n96/360 ... yes\n96/361 ... yes\n96/362 ... yes\n96/363 ... yes\n96/366 ... yes\n96/368 ... yes\n96/369 ... yes\n101/371 ... yes\n101/372 ... yes\n74/373 ... yes\n20/374 ... yes\n4/375 ... yes\n6/376 ... yes\n19/377 ... yes\n69/378 ... yes\n96/379 ... yes\n98/381 ... yes\n96/382 ... yes\n96/383 ... yes\n74/384 ... yes\n101/385 ... yes\n100/386 ... yes\n100/387 ... yes\n100/388 ... yes\n87/390 ... yes\n76/391 ... yes\n87/392 ... yes\n4/393 ... yes\n81/394 ... yes\n76/396 ... yes\n34/397 ... yes\n100/398 ... yes\n100/401 ... yes\n6/402 ... yes\n76/403 ... yes\n109/405 ... yes\n96/406 ... yes\n9/407 ... yes\n87/408 ... yes\n65/409 ... yes\n106/411 ... yes\n51/412 ... yes\n111/414 ... yes\n105/416 ... yes\n87/417 ... yes\n7/418 ... yes\n6/420 ... yes\n89/421 ... yes\n91/422 ... yes\n87/423 ... yes\n6/424 ... yes\n6/426 ... yes\n6/427 ... yes\n93/428 ... yes\n93/429 ... yes\n93/430 ... yes\n93/431 ... yes\n93/432 ... yes\n105/433 ... yes\n98/434 ... yes\n96/435 ... yes\n91/441 ... yes\n91/442 ... yes\n91/443 ... yes\n91/444 ... yes\n91/445 ... yes\n91/446 ... yes\n91/447 ... yes\n91/448 ... yes\n91/449 ... yes\n91/450 ... yes\n91/451 ... yes\n91/452 ... yes\n91/453 ... yes\n91/454 ... yes\n91/455 ... yes\n91/456 ... yes\n91/457 ... yes\n91/458 ... yes\n91/459 ... yes\n91/460 ... yes\n91/461 ... yes\n91/462 ... yes\n91/463 ... yes\n91/464 ... yes\n91/465 ... yes\n91/466 ... yes\n91/467 ... yes\n91/468 ... yes\n91/469 ... yes\n91/470 ... yes\n91/471 ... yes\n91/472 ... yes\n91/473 ... yes\n91/474 ... yes\n91/475 ... yes\n91/476 ... yes\n91/477 ... yes\n91/478 ... yes\n91/479 ... yes\n91/480 ... yes\n91/481 ... yes\n91/482 ... yes\n91/483 ... yes\n91/484 ... yes\n91/485 ... yes\n91/486 ... yes\n91/487 ... yes\n91/488 ... yes\n91/489 ... yes\n91/490 ... yes\n91/491 ... yes\n91/494 ... yes\n91/496 ... yes\n91/497 ... yes\n91/498 ... yes\n91/499 ... yes\n91/500 ... yes\n91/501 ... yes\n91/502 ... yes\n91/503 ... yes\n91/504 ... yes\n91/505 ... yes\n91/506 ... yes\n91/507 ... yes\n91/508 ... yes\n91/509 ... yes\n91/510 ... yes\n91/511 ... yes\n6/512 ... yes\n91/513 ... yes\n91/514 ... yes\n96/515 ... yes\n114/516 ... yes\n7/518 ... yes\n113/519 ... yes\n91/520 ... yes\n91/521 ... yes\n119/522 ... yes\n60/523 ... yes\n91/524 ... yes\n6/525 ... yes\n6/526 ... yes\n6/527 ... yes\n109/528 ... yes\n152/529 ... yes\n91/530 ... yes\n96/531 ... yes\n20/532 ... yes\n96/533 ... yes\n96/534 ... yes\n96/535 ... yes\n96/536 ... yes\n121/537 ... yes\n96/538 ... yes\n96/539 ... yes\n96/540 ... yes\n96/541 ... yes\n96/542 ... yes\n122/543 ... yes\n121/544 ... yes\n98/545 ... yes\n96/546 ... yes\n96/547 ... yes\n6/548 ... yes\n121/549 ... yes\n98/550 ... yes\n96/551 ... yes\n98/552 ... yes\n96/553 ... yes\n51/554 ... yes\n114/555 ... yes\n121/556 ... yes\n123/557 ... yes\n119/558 ... yes\n6/559 ... yes\n121/560 ... yes\n59/561 ... yes\n114/562 ... yes\n96/563 ... yes\n96/564 ... yes\n69/565 ... yes\n121/566 ... yes\n4/567 ... yes\n6/568 ... yes\n111/569 ... yes\n51/570 ... yes\n121/571 ... yes\n69/572 ... yes\n48/574 ... yes\n119/575 ... yes\n96/576 ... yes\n96/577 ... yes\n69/578 ... yes\n113/579 ... yes\n128/580 ... yes\n6/583 ... yes\n96/584 ... yes\n93/585 ... yes\n96/586 ... yes\n18/587 ... yes\n6/588 ... yes\n96/589 ... yes\n4/590 ... yes\n96/591 ... yes\n103/592 ... yes\n129/593 ... yes\n51/595 ... yes\n106/596 ... yes\n69/597 ... yes\n69/598 ... yes\n18/599 ... yes\n96/600 ... yes\n96/601 ... yes\n109/602 ... yes\n119/603 ... yes\n69/605 ... yes\n100/606 ... yes\n80/607 ... yes\n20/608 ... yes\n121/609 ... yes\n129/610 ... yes\n96/611 ... yes\n76/612 ... yes\n96/613 ... yes\n76/614 ... yes\n128/615 ... yes\n134/617 ... yes\n121/618 ... yes\n121/619 ... yes\n96/621 ... yes\n134/622 ... yes\n134/623 ... yes\n105/624 ... yes\n111/625 ... yes\n80/626 ... yes\n76/627 ... yes\n19/628 ... yes\n39/629 ... yes\n121/630 ... yes\n121/631 ... yes\n121/632 ... yes\n121/633 ... yes\n121/635 ... yes\n121/636 ... yes\n121/637 ... yes\n76/638 ... yes\n119/639 ... yes\n20/640 ... yes\n69/641 ... yes\n96/642 ... yes\n114/643 ... yes\n61/644 ... yes\n109/645 ... yes\n135/646 ... yes\n96/647 ... yes\n135/648 ... yes\n96/649 ... yes\n135/650 ... yes\n91/652 ... yes\n93/653 ... yes\n39/654 ... yes\n87/655 ... yes\n19/656 ... yes\n69/657 ... yes\n128/658 ... yes\n69/659 ... yes\n105/660 ... yes\n138/661 ... yes\n105/663 ... yes\n119/664 ... yes\n105/665 ... yes\n139/666 ... yes\n139/667 ... yes\n139/668 ... yes\n89/669 ... yes\n105/670 ... yes\n134/671 ... yes\n89/672 ... yes\n63/673 ... yes\n65/674 ... yes\n89/675 ... yes\n119/676 ... yes\n91/677 ... yes\n96/678 ... yes\n111/679 ... yes\n50/680 ... yes\n141/681 ... yes\n19/682 ... yes\n105/683 ... yes\n147/684 ... yes\n111/685 ... yes\n51/686 ... yes\n19/689 ... yes\n96/691 ... yes\n96/692 ... yes\n114/693 ... yes\n143/694 ... yes\n76/695 ... yes\n143/696 ... yes\n143/697 ... yes\n2/698 ... yes\n69/700 ... yes\n144/701 ... yes\n145/702 ... yes\n69/703 ... yes\n111/704 ... yes\n96/706 ... yes\n145/707 ... yes\n145/709 ... yes\n145/710 ... yes\n145/711 ... yes\n51/712 ... yes\n51/713 ... yes\n111/714 ... yes\n51/715 ... yes\n88/716 ... yes\n96/718 ... yes\n146/719 ... yes\n119/721 ... yes\n59/722 ... yes\n96/724 ... yes\n148/725 ... yes\n96/726 ... yes\n37/727 ... yes\n76/728 ... yes\n4/729 ... yes\n96/730 ... yes\n149/731 ... yes\n66/732 ... yes\n69/733 ... yes\n111/734 ... yes\n96/735 ... yes\n150/736 ... yes\n150/737 ... yes\n150/738 ... yes\n48/739 ... yes\n80/740 ... yes\n121/741 ... yes\n141/742 ... yes\n6/744 ... yes\n96/745 ... yes\n51/746 ... yes\n113/747 ... yes\n114/748 ... yes\n123/749 ... yes\n4/750 ... yes\n150/751 ... yes\n93/752 ... yes\n37/753 ... yes\n37/754 ... yes\n143/755 ... yes\n146/756 ... yes\n65/757 ... yes\n146/758 ... yes\n146/759 ... yes\n96/760 ... yes\n5/761 ... yes\n51/762 ... yes\n64/763 ... yes\n65/764 ... yes\n76/765 ... yes\n59/766 ... yes\n4/767 ... yes\n34/768 ... yes\n96/769 ... yes\n20/770 ... yes\n31/771 ... yes\n84/772 ... yes\n119/773 ... yes\n87/774 ... yes\n31/775 ... yes\n74/776 ... yes\n121/777 ... yes\n121/778 ... yes\n157/779 ... yes\n121/780 ... yes\n121/781 ... yes\n51/782 ... yes\n96/783 ... yes\n144/784 ... yes\n69/785 ... yes\n158/786 ... yes\n119/787 ... yes\n37/790 ... yes\n20/791 ... yes\n93/792 ... yes\n93/793 ... yes\n51/794 ... yes\n93/795 ... yes\n74/796 ... yes\n74/797 ... yes\n66/799 ... yes\n159/800 ... yes\n4/801 ... yes\n76/802 ... yes\nRedis version \u003e= 2.8.0? ... yes\nRuby version \u003e= 2.3.5 ? ... yes (2.5.3)\nGit version \u003e= 2.18.0 ? ... yes (2.18.1)\nGit user has default SSH configuration? ... yes\nActive users: ... 66\nElasticsearch version 5.6 - 6.x? ... yes (5.6.13)\n\nChecking GitLab App ... Finished\n\n\nChecking GitLab subtasks ... Finished\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\nN/A","state":"closed","created_at":"2019-02-27T12:58:49.343Z","updated_at":"2020-09-18T03:42:14.058Z","closed_at":"2019-04-17T01:11:01.570Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["Create [DEPRECATED]","Enterprise Edition","[deprecated] Accepting merge requests","approvals","backend","customer","devops::create","merge requests","priority::3","reproduced on GitLab.com","severity::3","type::bug"],"milestone":{"id":693520,"iid":34,"group_id":9970,"title":"12.1","description":"https://about.gitlab.com/releases/2019/07/22/gitlab-12-1-released","state":"closed","created_at":"2018-10-30T16:47:58.826Z","updated_at":"2020-04-27T16:30:09.107Z","due_date":"2019-07-22","start_date":"2019-06-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/34"},"assignees":[],"author":{"id":2094279,"username":"ahodgen","name":"Adam Hodgen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/efb3f0612f0cc02b37573781bb75efa2?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahodgen"},"type":"ISSUE","assignee":null,"user_notes_count":9,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10055","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10055","notes":"https://gitlab.com/api/v4/projects/278964/issues/10055/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10055/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10055","relative":"#10055","full":"gitlab-org/gitlab#10055"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18627218,"iid":10041,"project_id":278964,"title":"Invalid SQL produced when using selective sync (by namespace)","description":"Determine why using `Gitlab::Geo.current_node` results in invalid SQL being produced when used with selective sync (by namespace).\n\nContext: https://gitlab.com/gitlab-org/gitlab-ee/issues/9903","state":"closed","created_at":"2019-02-26T23:23:14.266Z","updated_at":"2019-12-16T14:47:26.491Z","closed_at":"2019-03-01T16:54:52.442Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["Category:Geo Replication","Enterprise Edition","devops::systems","group::geo"],"milestone":null,"assignees":[{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"}],"author":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"type":"ISSUE","assignee":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"user_notes_count":1,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10041","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10041","notes":"https://gitlab.com/api/v4/projects/278964/issues/10041/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10041/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10041","relative":"#10041","full":"gitlab-org/gitlab#10041"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24690208,"iid":27008,"project_id":278964,"title":"Add minimal merge-ref based diff option to merge request comparisons","description":"## Problem to solve\n\nMerge request diffs are currently calculated by `git diff target...source` which compares `HEAD` of `target` with the merge base of `target` and `source`. This works well until changes from the target branch are merged in to the source branch, creating a complete mess of the diff.\n\n## Intended users\n\nDevelopers\n\n## Further details\n\nFor a Developer using GitLab, code review is primarily reading the diff generated by GitLab and leaving feedback. If the diff contains changes that have already been merged to the target branch this is:\n\n1. **confusing** to the reviewer because they will be seeing unrelated changes in the diff\n2. **time consuming** for the reviewer because they will have to review a larger diff, and spend more time working out in their head what changes are actually being merged\n3. **time consuming** for the author who must wait on a longer review cycle and reduce cycle time.\n\nMerge refs will allow us to calculate a more accurate diff that doesn't have these issues.\n\n## Proposal\n\nWhen a person is reading a merge request diff, a new diff mode will be available in the drop down **master (HEAD)** indicating that this diff is against the head of the target branch, not the merge base of the target and source branch.\n\nBehind the scenes this will use the merge-ref feature implemented for CI.\n\n![Screen_Shot_2019-02-26_at_2.21.48_PM](https://gitlab.com/groups/gitlab-org/-/uploads/38429ea71c2686419c331efef3061f3e/Screen_Shot_2019-02-26_at_2.21.48_PM.png)\n\nEvery time the target branch is updated the merge request diff becomes out of date which happens over 20 times a day for `gitlab-ce`.\n\n### Limitations\n\nIn this first iteration:\n\n- commenting will not be supported on the new **master (HEAD)** mode\n- instead of automatically recalculating the diff when commits are pushed to the source or target branch, automatically recalculate the diff the next time the merge request is loaded\n\nIn the future, the new diff mode will replace the existing diff mode once commenting support is implemented and performance improvements have been made.\n\n## Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements --\u003e\n\n## Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further guidelines: https://about.gitlab.com/handbook/engineering/quality/guidelines/test-engineering/ --\u003e\n\n## What does success look like, and how can we measure that?\n\nGitLab should have accurate diffs that do not show misleading information. Although this is a feature, it is perceived as a bug by our customers who have noted that the diffs in GitHub and Bitbucket better meet their expectations. Thus, success is measured by no long receiving bug reports and support requests about diff accuracy.\n\n## Links / references","state":"closed","created_at":"2019-02-26T20:12:42.986Z","updated_at":"2020-12-07T17:23:39.846Z","closed_at":"2020-03-05T12:35:16.887Z","closed_by":{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"},"labels":["Category:Code Review Workflow","backend","backend-weight::2","customer","customer+","devops::create","diff","direction","frontend","frontend-weight::4","group::code review","missed-deliverable","missed:12.7","type::feature","workflow::verification"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"},{"id":4017300,"username":"jboyson","name":"Justin Boyson","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4017300/avatar.png","web_url":"https://gitlab.com/jboyson"}],"author":{"id":1187333,"username":"jramsay-gitlab","name":"James Ramsay (ex-GitLab)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1187333/avatar.png","web_url":"https://gitlab.com/jramsay-gitlab"},"type":"ISSUE","assignee":{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"},"user_notes_count":54,"merge_requests_count":0,"upvotes":14,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/27008","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/27008","notes":"https://gitlab.com/api/v4/projects/278964/issues/27008/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/27008/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#27008","relative":"#27008","full":"gitlab-org/gitlab#27008"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":854,"epic":{"id":4574,"iid":854,"title":"🧮 Use merge refs for diffs","url":"/groups/gitlab-org/-/epics/854","group_id":9970,"human_readable_end_date":"Sep 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18620025,"iid":10027,"project_id":278964,"title":"Move EE differenced for `app/assets/javascripts/environments/folder/environments_folder_bundle.js`","description":"Move EE differenced for `app/assets/javascripts/environments/folder/environments_folder_bundle.js`","state":"closed","created_at":"2019-02-26T17:03:44.535Z","updated_at":"2019-08-12T15:06:04.179Z","closed_at":"2019-03-15T08:36:34.267Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Deliverable","Enterprise Edition","devops::release","frontend","single codebase"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10027","time_stats":{"time_estimate":14400,"total_time_spent":0,"human_time_estimate":"4h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10027","notes":"https://gitlab.com/api/v4/projects/278964/issues/10027/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10027/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10027","relative":"#10027","full":"gitlab-org/gitlab#10027"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18619996,"iid":10026,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/environments/folder/environments_folder_view.vue`","description":"The file `app/assets/javascripts/environments/folder/environments_folder_view.vue` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/environments/folder/environments_folder_view.vue b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/environments/folder/environments_folder_view.vue\nindex d6f0b6115a6..eb8a0fc1ded 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/environments/folder/environments_folder_view.vue\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/environments/folder/environments_folder_view.vue\n@@ -31,6 +31,28 @@ export default {\n       type: Boolean,\n       required: true,\n     },\n+    // ee-only start\n+    canaryDeploymentFeatureId: {\n+      type: String,\n+      required: true,\n+    },\n+    showCanaryDeploymentCallout: {\n+      type: Boolean,\n+      required: true,\n+    },\n+    userCalloutsPath: {\n+      type: String,\n+      required: true,\n+    },\n+    lockPromotionSvgPath: {\n+      type: String,\n+      required: true,\n+    },\n+    helpCanaryDeploymentsPath: {\n+      type: String,\n+      required: true,\n+    },\n+    // ee-only end\n   },\n   methods: {\n     successCallback(resp) {\n@@ -57,6 +79,11 @@ export default {\n       :pagination=\"state.paginationInformation\"\n       :can-create-deployment=\"canCreateDeployment\"\n       :can-read-environment=\"canReadEnvironment\"\n+      :canary-deployment-feature-id=\"canaryDeploymentFeatureId\"\n+      :show-canary-deployment-callout=\"showCanaryDeploymentCallout\"\n+      :user-callouts-path=\"userCalloutsPath\"\n+      :lock-promotion-svg-path=\"lockPromotionSvgPath\"\n+      :help-canary-deployments-path=\"helpCanaryDeploymentsPath\"\n       @onChangePage=\"onChangePage\"\n     /\u003e\n   \u003c/div\u003e\n```\n\n### What needs to be done","state":"closed","created_at":"2019-02-26T17:02:46.863Z","updated_at":"2019-08-12T15:06:04.192Z","closed_at":"2019-03-13T17:45:26.741Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Deliverable","Enterprise Edition","devops::release","frontend","single codebase"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10026","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10026","notes":"https://gitlab.com/api/v4/projects/278964/issues/10026/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10026/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10026","relative":"#10026","full":"gitlab-org/gitlab#10026"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18619974,"iid":10025,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/vue_merge_request_widget/mr_widget_options.vue`","description":"The file `app/assets/javascripts/vue_merge_request_widget/mr_widget_options.vue` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/vue_merge_request_widget/mr_widget_options.vue b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/vue_merge_request_widget/mr_widget_options.vue\nindex 5a9d86594b1..c18d6a6f9be 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/vue_merge_request_widget/mr_widget_options.vue\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/vue_merge_request_widget/mr_widget_options.vue\n@@ -153,6 +153,7 @@ export default {\n         statusPath: store.statusPath,\n         mergeActionsContentPath: store.mergeActionsContentPath,\n         rebasePath: store.rebasePath,\n+        approvalsPath: store.approvalsPath,\n       };\n       return new MRWidgetService(endpoints);\n     },\n```\n\n### What needs to be done\n1. Use `ifEE`","state":"closed","created_at":"2019-02-26T17:01:53.383Z","updated_at":"2019-08-12T15:06:04.198Z","closed_at":"2019-05-08T11:26:22.935Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Create [DEPRECATED]","Deliverable","Enterprise Edition","devops::create","frontend","group::source code","single codebase"],"milestone":{"id":693518,"iid":33,"group_id":9970,"title":"12.0","description":"https://about.gitlab.com/releases/2019/06/22/gitlab-12-0-released/","state":"closed","created_at":"2018-10-30T16:47:37.975Z","updated_at":"2020-04-22T19:51:03.475Z","due_date":"2019-06-22","start_date":"2019-05-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/33"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10025","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10025","notes":"https://gitlab.com/api/v4/projects/278964/issues/10025/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10025/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10025","relative":"#10025","full":"gitlab-org/gitlab#10025"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18619942,"iid":10023,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/vue_merge_request_widget/components/states/ready_to_merge.vue`","description":"The file `` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/vue_merge_request_widget/components/states/ready_to_merge.vue b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/vue_merge_request_widget/components/states/ready_to_merge.vue\nindex b8f29649eb5..399c3bad4e7 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/vue_merge_request_widget/components/states/ready_to_merge.vue\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/vue_merge_request_widget/components/states/ready_to_merge.vue\n@@ -100,6 +100,7 @@ export default {\n         !commitMessage.length ||\n           !this.shouldShowMergeControls() ||\n           this.isMakingRequest ||\n+          this.isApprovalNeeded ||\n           this.mr.preventMerge,\n       );\n     },\n@@ -110,6 +111,9 @@ export default {\n       const { commitsCount, enableSquashBeforeMerge } = this.mr;\n       return enableSquashBeforeMerge \u0026\u0026 commitsCount \u003e 1;\n     },\n+    isApprovalNeeded() {\n+      return this.mr.approvalsRequired ? !this.mr.isApproved : false;\n+    },\n   },\n   methods: {\n     shouldShowMergeControls() {\n```\n### What needs to be done\n1. Create an EE mixin \u0026 move the differences\n1. Use [`ee_else_ce`](https://docs.gitlab.com/ee/development/ee_features.html#javascript-code-in-assetsjavascripts) to import the mixin into this file.","state":"closed","created_at":"2019-02-26T17:00:28.212Z","updated_at":"2019-08-12T15:06:04.221Z","closed_at":"2019-05-08T11:28:11.505Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Create [DEPRECATED]","Deliverable","Enterprise Edition","devops::create","frontend","group::source code","single codebase"],"milestone":{"id":693518,"iid":33,"group_id":9970,"title":"12.0","description":"https://about.gitlab.com/releases/2019/06/22/gitlab-12-0-released/","state":"closed","created_at":"2018-10-30T16:47:37.975Z","updated_at":"2020-04-22T19:51:03.475Z","due_date":"2019-06-22","start_date":"2019-05-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/33"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10023","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10023","notes":"https://gitlab.com/api/v4/projects/278964/issues/10023/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10023/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10023","relative":"#10023","full":"gitlab-org/gitlab#10023"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18619886,"iid":10021,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/vue_merge_request_widget/components/mr_widget_pipeline.vue`","description":"The file `` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/vue_merge_request_widget/components/mr_widget_pipeline.vue b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/vue_merge_request_widget/components/mr_widget_pipeline.vue\nindex f11cf21b0ca..d6cb1dd3c13 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/vue_merge_request_widget/components/mr_widget_pipeline.vue\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/vue_merge_request_widget/components/mr_widget_pipeline.vue\n@@ -5,6 +5,7 @@ import PipelineStage from '~/pipelines/components/stage.vue';\n import CiIcon from '~/vue_shared/components/ci_icon.vue';\n import Icon from '~/vue_shared/components/icon.vue';\n import TooltipOnTruncate from '~/vue_shared/components/tooltip_on_truncate.vue';\n+import LinkedPipelinesMiniList from 'ee/vue_shared/components/linked_pipelines_mini_list.vue';\n \n export default {\n   name: 'MRWidgetPipeline',\n@@ -13,6 +14,7 @@ export default {\n     CiIcon,\n     Icon,\n     TooltipOnTruncate,\n+    LinkedPipelinesMiniList,\n   },\n   props: {\n     pipeline: {\n@@ -74,10 +76,20 @@ export default {\n         false,\n       );\n     },\n+    /* We typically set defaults ([]) in the store or prop declarations, but because triggered\n+     * and triggeredBy are appended to `pipeline`, we can't set defaults in the store, and we\n+     * need to check their length here to prevent initializing linked-pipeline-mini-lists\n+     * unneccessarily. */\n+    triggered() {\n+      return this.pipeline.triggered || [];\n+    },\n+    triggeredBy() {\n+      const response = this.pipeline.triggered_by;\n+      return response ? [response] : [];\n+    },\n   },\n };\n \u003c/script\u003e\n-\n \u003ctemplate\u003e\n   \u003cdiv v-if=\"hasPipeline || hasCIError\" class=\"ci-widget media\"\u003e\n     \u003ctemplate v-if=\"hasCIError\"\u003e\n@@ -126,15 +138,24 @@ export default {\n         \u003c/div\u003e\n         \u003cdiv\u003e\n           \u003cspan class=\"mr-widget-pipeline-graph\"\u003e\n-            \u003cspan v-if=\"hasStages\" class=\"stage-cell\"\u003e\n-              \u003cdiv\n-                v-for=\"(stage, i) in pipeline.details.stages\"\n-                :key=\"i\"\n-                class=\"stage-container dropdown js-mini-pipeline-graph mr-widget-pipeline-stages\"\n-              \u003e\n-                \u003cpipeline-stage :stage=\"stage\" /\u003e\n-              \u003c/div\u003e\n+            \u003cspan class=\"stage-cell\"\u003e\n+              \u003clinked-pipelines-mini-list v-if=\"triggeredBy.length\" :triggered-by=\"triggeredBy\" /\u003e\n+              \u003ctemplate v-if=\"hasStages\"\u003e\n+                \u003cdiv\n+                  v-for=\"(stage, i) in pipeline.details.stages\"\n+                  :key=\"i\"\n+                  :class=\"{\n+                    'has-downstream': i === pipeline.details.stages.length - 1 \u0026\u0026 triggered.length,\n+                  }\"\n+                  class=\"stage-container dropdown js-mini-pipeline-graph\n+                  mr-widget-pipeline-stages\"\n+                \u003e\n+                  \u003cpipeline-stage :stage=\"stage\" /\u003e\n+                \u003c/div\u003e\n+              \u003c/template\u003e\n             \u003c/span\u003e\n+\n+            \u003clinked-pipelines-mini-list v-if=\"triggered.length\" :triggered=\"triggered\" /\u003e\n           \u003c/span\u003e\n         \u003c/div\u003e\n       \u003c/div\u003e\n```\n\n\n### What needs to be done","state":"closed","created_at":"2019-02-26T16:58:14.283Z","updated_at":"2019-08-12T15:06:07.381Z","closed_at":"2019-03-04T10:52:12.540Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Enterprise Edition","devops::verify","frontend","single codebase"],"milestone":{"id":523180,"iid":18,"group_id":9970,"title":"11.9","description":"https://about.gitlab.com/releases/2019/03/22/gitlab-11-9-released/","state":"closed","created_at":"2018-05-09T14:56:19.024Z","updated_at":"2020-04-30T19:56:35.917Z","due_date":"2019-03-22","start_date":"2019-02-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/18"},"assignees":[{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10021","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10021","notes":"https://gitlab.com/api/v4/projects/278964/issues/10021/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10021/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10021","relative":"#10021","full":"gitlab-org/gitlab#10021"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24690191,"iid":27001,"project_id":278964,"title":"Allow JOB_TOKEN to access Releases API","description":"I tried out the release links API and wanted to add some URL links to the released artifacts in our Artifactory instance. The link should be added in the CI pipeline once the artifact was uploaded. \n\nHowever, it turns out the call to this REST API does not work with the JOB_TOKEN header but only with the PRIVATE_TOKEN. Is this limitation intended? I don't want to maintain extra Private tokens just for manipulating the assets of the release.\n\n\u003c!-- Don't edit below this line --\u003e","state":"closed","created_at":"2019-02-26T16:57:27.638Z","updated_at":"2021-10-22T19:55:48.791Z","closed_at":"2020-04-29T15:50:50.994Z","closed_by":{"id":4905402,"username":"jreporter","name":"Jackie Porter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4905402/avatar.png","web_url":"https://gitlab.com/jreporter"},"labels":["Category:Release Orchestration","[deprecated] Accepting merge requests","api","customer","devops::release","group::release","security","type::feature"],"milestone":null,"assignees":[],"author":{"id":2286637,"username":"kofleri","name":"Ingo Kofler","state":"active","avatar_url":"https://secure.gravatar.com/avatar/afb3cf17a4977d1d28095ba7559dd94f?s=80\u0026d=identicon","web_url":"https://gitlab.com/kofleri"},"type":"ISSUE","assignee":null,"user_notes_count":22,"merge_requests_count":0,"upvotes":13,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/27001","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/27001","notes":"https://gitlab.com/api/v4/projects/278964/issues/27001/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/27001/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#27001","relative":"#27001","full":"gitlab-org/gitlab#27001"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18619856,"iid":10020,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/issuable_form.js`","description":"The file `app/assets/javascripts/issuable_form.js` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/issuable_form.js b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/issuable_form.js\nindex c81a2230310..70dbb3e33f7 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/issuable_form.js\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/issuable_form.js\n@@ -6,6 +6,7 @@ import GfmAutoComplete from './gfm_auto_complete';\n import ZenMode from './zen_mode';\n import AutoWidthDropdownSelect from './issuable/auto_width_dropdown_select';\n import { parsePikadayDate, pikadayToString } from './lib/utils/datetime_utility';\n+import groupsSelect from './groups_select';\n \n export default class IssuableForm {\n   constructor(form) {\n@@ -20,6 +21,7 @@ export default class IssuableForm {\n       gl.GfmAutoComplete \u0026\u0026 gl.GfmAutoComplete.dataSources,\n     ).setup();\n     this.usersSelect = new UsersSelect();\n+    groupsSelect();\n     this.zenMode = new ZenMode();\n \n     this.titleField = this.form.find('input[name*=\"[title]\"]');\n```\n\n### What needs to be done\n1. Use `ifEE` to safeguard the differences","state":"closed","created_at":"2019-02-26T16:57:03.378Z","updated_at":"2019-08-12T15:06:07.448Z","closed_at":"2019-03-04T11:38:25.285Z","closed_by":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"labels":["Create [DEPRECATED]","Enterprise Edition","devops::create","frontend","single codebase"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":0,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10020","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10020","notes":"https://gitlab.com/api/v4/projects/278964/issues/10020/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10020/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10020","relative":"#10020","full":"gitlab-org/gitlab#10020"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18619663,"iid":10019,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/members.js`","description":"The file `app/assets/javascripts/members.js` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/members.js b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/members.js\nindex bd263c75a3d..59af9b7873f 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/members.js\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/members.js\n@@ -1,4 +1,7 @@\n import $ from 'jquery';\n+import Flash from './flash';\n+import { __ } from './locale';\n+import axios from './lib/utils/axios_utils';\n \n export default class Members {\n   constructor() {\n@@ -7,6 +10,15 @@ export default class Members {\n   }\n \n   addListeners() {\n+    $('.js-ldap-permissions')\n+      .off('click')\n+      .on('click', this.showLDAPPermissionsWarning.bind(this));\n+    $('.js-ldap-override')\n+      .off('click')\n+      .on('click', this.toggleMemberAccessToggle.bind(this));\n+    $('.project_member, .group_member')\n+      .off('ajax:success')\n+      .on('ajax:success', this.removeRow);\n     $('.js-member-update-control')\n       .off('change')\n       .on('change', this.formSubmit.bind(this));\n@@ -23,6 +35,10 @@ export default class Members {\n       $btn.glDropdown({\n         selectable: true,\n         isSelectable(selected, $el) {\n+          if ($el.data('revert')) {\n+            return false;\n+          }\n+\n           return !$el.hasClass('is-active');\n         },\n         fieldName: $btn.data('fieldName'),\n@@ -30,10 +46,28 @@ export default class Members {\n           return $el.data('id');\n         },\n         toggleLabel(selected, $el) {\n+          if ($el.data('revert')) {\n+            return $btn.text();\n+          }\n+\n           return $el.text();\n         },\n         clicked: options =\u003e {\n-          this.formSubmit(null, options.$el);\n+          const $link = options.$el;\n+\n+          if (!$link.data('revert')) {\n+            this.formSubmit(null, $link);\n+          } else {\n+            const { $memberListItem, $toggle, $dateInput } = this.getMemberListItems($link);\n+\n+            $toggle.disable();\n+            $dateInput.disable();\n+\n+            this.overrideLdap($memberListItem, $link.data('endpoint'), false).catch(() =\u003e {\n+              $toggle.enable();\n+              $dateInput.enable();\n+            });\n+          }\n         },\n       });\n     });\n@@ -55,6 +89,15 @@ export default class Members {\n     $toggle.enable();\n     $dateInput.enable();\n   }\n+\n+  showLDAPPermissionsWarning(e) {\n+    const $btn = $(e.currentTarget);\n+    const { $memberListItem } = this.getMemberListItems($btn);\n+    const $ldapPermissionsElement = $memberListItem.next();\n+\n+    $ldapPermissionsElement.toggle();\n+  }\n+\n   // eslint-disable-next-line class-methods-use-this\n   getMemberListItems($el) {\n     const $memberListItem = $el.is('.member') ? $el : $(`#${$el.data('elId')}`);\n@@ -65,4 +108,44 @@ export default class Members {\n       $dateInput: $memberListItem.find('.js-access-expiration-date'),\n     };\n   }\n+\n+  toggleMemberAccessToggle(e) {\n+    const $btn = $(e.currentTarget);\n+    const { $memberListItem, $toggle, $dateInput } = this.getMemberListItems($btn);\n+\n+    $btn.disable();\n+    this.overrideLdap($memberListItem, $btn.data('endpoint'), true)\n+      .then(() =\u003e {\n+        this.showLDAPPermissionsWarning(e);\n+\n+        $toggle.enable();\n+        $dateInput.enable();\n+      })\n+      .catch(xhr =\u003e {\n+        $btn.enable();\n+\n+        if (xhr.status === 403) {\n+          Flash(\n+            __(\n+              'You do not have the correct permissions to override the settings from the LDAP group sync.',\n+            ),\n+          );\n+        } else {\n+          Flash(__('An error occurred while saving LDAP override status. Please try again.'));\n+        }\n+      });\n+  }\n+\n+  // eslint-disable-next-line class-methods-use-this\n+  overrideLdap($memberListitem, endpoint, override) {\n+    return axios\n+      .patch(endpoint, {\n+        group_member: {\n+          override,\n+        },\n+      })\n+      .then(() =\u003e {\n+        $memberListitem.toggleClass('is-overriden', override);\n+      });\n+  }\n }\n```\n\n### What needs to be done\n1. import statements can be safely moved to the CE version\n1. Safeguard all differences with `ifEE`","state":"closed","created_at":"2019-02-26T16:49:05.483Z","updated_at":"2019-08-12T15:06:07.412Z","closed_at":"2019-02-27T18:19:07.627Z","closed_by":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"labels":["Create [DEPRECATED]","Enterprise Edition","devops::create","frontend","single codebase"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":2,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10019","time_stats":{"time_estimate":14400,"total_time_spent":0,"human_time_estimate":"4h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10019","notes":"https://gitlab.com/api/v4/projects/278964/issues/10019/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10019/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10019","relative":"#10019","full":"gitlab-org/gitlab#10019"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18619567,"iid":10018,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/boards/filtered_search_boards.js`","description":"The file `app/assets/javascripts/boards/filtered_search_boards.js` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/boards/filtered_search_boards.js b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/boards/filtered_search_boards.js\nindex c14d69c5d18..aa9a23a3a7a 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/boards/filtered_search_boards.js\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/boards/filtered_search_boards.js\n@@ -1,3 +1,4 @@\n+import IssuesFilteredSearchTokenKeysEE from 'ee/filtered_search/issues_filtered_search_token_keys';\n import FilteredSearchContainer from '../filtered_search/container';\n import FilteredSearchManager from '../filtered_search/filtered_search_manager';\n import boardsStore from './stores/boards_store';\n@@ -8,6 +9,8 @@ export default class FilteredSearchBoards extends FilteredSearchManager {\n       page: 'boards',\n       isGroupDecendent: true,\n       stateFiltersSelector: '.issues-state-filters',\n+      isGroup: true,\n+      filteredSearchTokenKeys: IssuesFilteredSearchTokenKeysEE,\n     });\n \n     this.store = store;\n```\n\nhttps://leipert-projects.gitlab.io/is-gitlab-pretty-yet/diff/?search=filtered_search_boards.js\n\n### What needs to be done","state":"closed","created_at":"2019-02-26T16:45:35.725Z","updated_at":"2022-05-19T16:12:50.010Z","closed_at":"2019-04-09T07:21:05.406Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Enterprise Edition","backstage [DEPRECATED]","devops::plan","frontend","single codebase"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":5,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10018","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10018","notes":"https://gitlab.com/api/v4/projects/278964/issues/10018/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10018/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10018","relative":"#10018","full":"gitlab-org/gitlab#10018"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18619226,"iid":10017,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/boards/models/list.js`","description":"The file `app/assets/javascripts/boards/models/list.js` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/boards/models/list.js b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/boards/models/list.js\nindex 9f6d9a853da..227d242e4c3 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/boards/models/list.js\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/boards/models/list.js\n@@ -6,6 +6,7 @@ import ListLabel from '~/vue_shared/models/label';\n import ListAssignee from '~/vue_shared/models/assignee';\n import { urlParamsToObject } from '~/lib/utils/common_utils';\n import boardsStore from '../stores/boards_store';\n+import ListMilestone from './milestone';\n \n const PER_PAGE = 20;\n \n@@ -51,6 +52,9 @@ class List {\n     } else if (obj.user) {\n       this.assignee = new ListAssignee(obj.user);\n       this.title = this.assignee.name;\n+    } else if (obj.milestone) {\n+      this.milestone = new ListMilestone(obj.milestone);\n+      this.title = this.milestone.title;\n     }\n \n     if (!typeInfo.isBlank \u0026\u0026 this.id) {\n@@ -69,12 +73,14 @@ class List {\n   }\n \n   save() {\n-    const entity = this.label || this.assignee;\n+    const entity = this.label || this.assignee || this.milestone;\n     let entityType = '';\n     if (this.label) {\n       entityType = 'label_id';\n-    } else {\n+    } else if (this.assignee) {\n       entityType = 'assignee_id';\n+    } else if (this.milestone) {\n+      entityType = 'milestone_id';\n     }\n \n     return gl.boardService\n@@ -192,6 +198,13 @@ class List {\n         issue.addAssignee(this.assignee);\n       }\n \n+      if (this.milestone) {\n+        if (listFrom \u0026\u0026 listFrom.type === 'milestone') {\n+          issue.removeMilestone(listFrom.milestone);\n+        }\n+        issue.addMilestone(this.milestone);\n+      }\n+\n       if (listFrom) {\n         this.issuesSize += 1;\n```\n\n### What needs to be done\n1. Use `ifEE` to safeguard all the milestone related code","state":"closed","created_at":"2019-02-26T16:42:57.631Z","updated_at":"2022-05-19T16:12:49.798Z","closed_at":"2019-04-11T07:05:13.464Z","closed_by":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"labels":["Enterprise Edition","backstage [DEPRECATED]","devops::plan","frontend","single codebase","workflow::in dev"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":642003,"username":"okoghenun","name":"Constance Okoghenun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/642003/avatar.png","web_url":"https://gitlab.com/okoghenun"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":642003,"username":"okoghenun","name":"Constance Okoghenun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/642003/avatar.png","web_url":"https://gitlab.com/okoghenun"},"user_notes_count":4,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10017","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10017","notes":"https://gitlab.com/api/v4/projects/278964/issues/10017/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10017/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10017","relative":"#10017","full":"gitlab-org/gitlab#10017"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18619187,"iid":10016,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/boards/models/issue.js`","description":"The file `app/assets/javascripts/boards/models/issue.js` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/boards/models/issue.js b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/boards/models/issue.js\nindex dd92d3c8552..56766b2a679 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/boards/models/issue.js\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/boards/models/issue.js\n@@ -28,7 +28,6 @@ class ListIssue {\n     this.referencePath = obj.reference_path;\n     this.path = obj.real_path;\n     this.toggleSubscriptionEndpoint = obj.toggle_subscription_endpoint;\n-    this.milestone_id = obj.milestone_id;\n     this.project_id = obj.project_id;\n     this.timeEstimate = obj.time_estimate;\n     this.assignableLabelsEndpoint = obj.assignable_labels_endpoint;\n@@ -39,6 +38,7 @@ class ListIssue {\n \n     if (obj.milestone) {\n       this.milestone = new ListMilestone(obj.milestone);\n+      this.milestone_id = obj.milestone.id;\n     }\n \n     obj.labels.forEach(label =\u003e {\n@@ -88,6 +88,19 @@ class ListIssue {\n     this.assignees = [];\n   }\n \n+  addMilestone(milestone) {\n+    const miletoneId = this.milestone ? this.milestone.id : null;\n+    if (milestone.id !== miletoneId) {\n+      this.milestone = new ListMilestone(milestone);\n+    }\n+  }\n+\n+  removeMilestone(removeMilestone) {\n+    if (removeMilestone \u0026\u0026 removeMilestone.id === this.milestone.id) {\n+      this.milestone = {};\n+    }\n+  }\n+\n   getLists() {\n     return boardsStore.state.lists.filter(list =\u003e list.findIssue(this.id));\n   }\n```\n\n### What needs to be done\n1. Add the `ifEE` guard to the 2 methods","state":"closed","created_at":"2019-02-26T16:41:14.384Z","updated_at":"2022-05-19T16:12:49.638Z","closed_at":"2019-04-11T06:57:32.506Z","closed_by":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"labels":["Enterprise Edition","backstage [DEPRECATED]","devops::plan","frontend","single codebase","workflow::in dev"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":642003,"username":"okoghenun","name":"Constance Okoghenun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/642003/avatar.png","web_url":"https://gitlab.com/okoghenun"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":642003,"username":"okoghenun","name":"Constance Okoghenun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/642003/avatar.png","web_url":"https://gitlab.com/okoghenun"},"user_notes_count":3,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10016","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10016","notes":"https://gitlab.com/api/v4/projects/278964/issues/10016/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10016/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10016","relative":"#10016","full":"gitlab-org/gitlab#10016"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18619096,"iid":10015,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/boards/models/milestone.js`","description":"The file `app/assets/javascripts/boards/models/milestone.js` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/boards/models/milestone.js b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/boards/models/milestone.js\nindex 17d15278a74..5fc9f31eb89 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/boards/models/milestone.js\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/boards/models/milestone.js\n@@ -1,7 +1,11 @@\n-class ListMilestone {\n+export default class ListMilestone {\n   constructor(obj) {\n     this.id = obj.id;\n     this.title = obj.title;\n+    this.path = obj.path;\n+    this.state = obj.state;\n+    this.webUrl = obj.web_url || obj.webUrl;\n+    this.description = obj.description;\n   }\n }\n```\n\n### What needs to be done\n1. Use `ifEE` to wrap the differences","state":"closed","created_at":"2019-02-26T16:36:43.117Z","updated_at":"2022-05-19T16:12:49.455Z","closed_at":"2019-04-11T22:46:43.365Z","closed_by":{"id":502136,"username":"fatihacet","name":"Fatih Acet","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/502136/avatar.png","web_url":"https://gitlab.com/fatihacet"},"labels":["Category:Team Planning","Enterprise Edition","backstage [DEPRECATED]","boards","devops::plan","frontend","single codebase"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":642003,"username":"okoghenun","name":"Constance Okoghenun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/642003/avatar.png","web_url":"https://gitlab.com/okoghenun"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":642003,"username":"okoghenun","name":"Constance Okoghenun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/642003/avatar.png","web_url":"https://gitlab.com/okoghenun"},"user_notes_count":4,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10015","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10015","notes":"https://gitlab.com/api/v4/projects/278964/issues/10015/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10015/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10015","relative":"#10015","full":"gitlab-org/gitlab#10015"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18619027,"iid":10013,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/boards/stores/boards_store.js`","description":"The file `app/assets/javascripts/boards/stores/boards_store.js` has differences between CE and EE.\n\n### Diferences\n\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/boards/stores/boards_store.js b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/boards/stores/boards_store.js\nindex 802796208c2..af721ba8238 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/boards/stores/boards_store.js\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/boards/stores/boards_store.js\n@@ -5,6 +5,7 @@ import $ from 'jquery';\n import _ from 'underscore';\n import Vue from 'vue';\n import Cookies from 'js-cookie';\n+import BoardsStoreEE from 'ee/boards/stores/boards_store_ee';\n import { getUrlParamsArray, parseBoolean } from '~/lib/utils/common_utils';\n \n const boardsStore = {\n@@ -12,7 +13,13 @@ const boardsStore = {\n   filter: {\n     path: '',\n   },\n-  state: {},\n+  state: {\n+    currentBoard: {\n+      labels: [],\n+    },\n+    currentPage: '',\n+    reload: false,\n+  },\n   detail: {\n     issue: {},\n   },\n@@ -27,6 +34,17 @@ const boardsStore = {\n       issue: {},\n     };\n   },\n+  createNewListDropdownData() {\n+    this.state.currentBoard = {\n+      labels: [],\n+    };\n+    this.state.currentPage = '';\n+    this.state.reload = false;\n+  },\n+  showPage(page) {\n+    this.state.reload = false;\n+    this.state.currentPage = page;\n+  },\n   addList(listObj, defaultAvatar) {\n     const list = new List(listObj, defaultAvatar);\n     this.state.lists.push(list);\n@@ -174,6 +192,8 @@ const boardsStore = {\n   },\n };\n \n+BoardsStoreEE.initEESpecific(boardsStore);\n+\n // hacks added in order to allow milestone_select to function properly\n // TODO: remove these\n```\n\n### What needs to be done\n1.","state":"closed","created_at":"2019-02-26T16:33:55.356Z","updated_at":"2022-05-19T16:12:49.215Z","closed_at":"2019-04-16T10:03:26.714Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Category:Team Planning","Enterprise Edition","backstage [DEPRECATED]","boards","devops::plan","frontend","single codebase"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":4,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10013","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10013","notes":"https://gitlab.com/api/v4/projects/278964/issues/10013/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10013/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10013","relative":"#10013","full":"gitlab-org/gitlab#10013"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18618954,"iid":10012,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/boards/components/issue_card_inner.vue`","description":"The file `app/assets/javascripts/boards/components/issue_card_inner.vue` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/boards/components/issue_card_inner.vue b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/boards/components/issue_card_inner.vue\nindex 90ab3a76342..3820156e7ee 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/boards/components/issue_card_inner.vue\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/boards/components/issue_card_inner.vue\n@@ -3,6 +3,7 @@ import { GlTooltipDirective } from '@gitlab/ui';\n import { sprintf, __ } from '~/locale';\n import Icon from '~/vue_shared/components/icon.vue';\n import TooltipOnTruncate from '~/vue_shared/components/tooltip_on_truncate.vue';\n+import IssueCardWeight from 'ee/boards/components/issue_card_weight.vue';\n import UserAvatarLink from '../../vue_shared/components/user_avatar/user_avatar_link.vue';\n import eventHub from '../eventhub';\n import IssueDueDate from './issue_due_date.vue';\n@@ -15,6 +16,7 @@ export default {\n     UserAvatarLink,\n     TooltipOnTruncate,\n     IssueDueDate,\n+    IssueCardWeight,\n     IssueTimeEstimate,\n   },\n   directives: {\n@@ -209,6 +211,10 @@ export default {\n           \u003cissue-due-date v-if=\"issue.dueDate\" :date=\"issue.dueDate\" /\u003e\u003cissue-time-estimate\n             v-if=\"issue.timeEstimate\"\n             :estimate=\"issue.timeEstimate\"\n+          /\u003e\u003cissue-card-weight\n+            v-if=\"issue.weight\"\n+            :weight=\"issue.weight\"\n+            @click=\"filterByWeight(issue.weight)\"\n           /\u003e\n         \u003c/span\u003e\n       \u003c/div\u003e\n```\n\n### What needs to be done\n1. Use async import for issue card weight component.\n1. Create a mixin for EE with `filterByWeight` if it does not exist in CE\n1. Create a mixin counterpart for CE with `filterByWeight`\n1. Use [`ee_else_ce`](https://docs.gitlab.com/ee/development/ee_features.html#javascript-code-in-assetsjavascripts) to import the mixin","state":"closed","created_at":"2019-02-26T16:30:09.874Z","updated_at":"2022-05-19T16:12:49.012Z","closed_at":"2019-04-18T14:11:07.912Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Community contribution","Deliverable","Enterprise Edition","backstage [DEPRECATED]","devops::plan","frontend","single codebase"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},{"id":3235634,"username":"rrodionov91","name":"Roman Rodionov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3235634/avatar.png","web_url":"https://gitlab.com/rrodionov91"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":2,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10012","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10012","notes":"https://gitlab.com/api/v4/projects/278964/issues/10012/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10012/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10012","relative":"#10012","full":"gitlab-org/gitlab#10012"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18618866,"iid":10011,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/boards/components/board_new_issue.vue`","description":"The file `app/assets/javascripts/boards/components/board_new_issue.vue` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/boards/components/board_new_issue.vue b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/boards/components/board_new_issue.vue\nindex 28d96dab605..67d2d287423 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/boards/components/board_new_issue.vue\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/boards/components/board_new_issue.vue\n@@ -51,11 +51,14 @@ export default {\n \n       const labels = this.list.label ? [this.list.label] : [];\n       const assignees = this.list.assignee ? [this.list.assignee] : [];\n+      const milestone = this.list.milestone ? this.list.milestone : null;\n+\n       const issue = new ListIssue({\n         title: this.title,\n         labels,\n         subscribed: true,\n         assignees,\n+        milestone,\n         project_id: this.selectedProject.id,\n       });\n```\n\n### What needs to be done\n1. Use `ifEE` together with `this.list.milestone`\n\nhttps://leipert-projects.gitlab.io/is-gitlab-pretty-yet/diff/?search=app%2Fassets%2Fjavascripts%2Fboards%2Fcomponents%2Fboard_new_issue.vue","state":"closed","created_at":"2019-02-26T16:26:36.055Z","updated_at":"2022-05-19T16:12:48.759Z","closed_at":"2019-05-01T04:12:18.941Z","closed_by":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"labels":["Enterprise Edition","[deprecated] Accepting merge requests","backstage [DEPRECATED]","devops::plan","frontend","single codebase"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":3236898,"username":"rajatgitlab","name":"Rajat Jain","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3236898/avatar.png","web_url":"https://gitlab.com/rajatgitlab"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":3236898,"username":"rajatgitlab","name":"Rajat Jain","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3236898/avatar.png","web_url":"https://gitlab.com/rajatgitlab"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10011","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10011","notes":"https://gitlab.com/api/v4/projects/278964/issues/10011/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10011/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10011","relative":"#10011","full":"gitlab-org/gitlab#10011"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18618818,"iid":10010,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/boards/components/board_sidebar.js`","description":"The file `app/assets/javascripts/boards/components/board_sidebar.js` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/boards/components/board_sidebar.js b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/boards/components/board_sidebar.js\nindex e637e1f1223..f02de68df7d 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/boards/components/board_sidebar.js\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/boards/components/board_sidebar.js\n@@ -2,6 +2,7 @@\n \n import $ from 'jquery';\n import Vue from 'vue';\n+import Weight from 'ee/sidebar/components/weight/weight.vue';\n import Flash from '../../flash';\n import { sprintf, __ } from '../../locale';\n import Sidebar from '../../right_sidebar';\n@@ -22,6 +23,7 @@ export default Vue.extend({\n     Assignees,\n     RemoveBtn,\n     Subscriptions,\n+    Weight,\n   },\n   props: {\n     currentUser: {\n```\n\n### What needs to be done\n1. Use async import to load the component","state":"closed","created_at":"2019-02-26T16:24:42.797Z","updated_at":"2022-05-19T16:12:48.571Z","closed_at":"2019-04-04T12:53:24.258Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Category:Team Planning","Enterprise Edition","backstage [DEPRECATED]","boards","devops::plan","frontend","single codebase"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":1,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10010","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10010","notes":"https://gitlab.com/api/v4/projects/278964/issues/10010/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10010/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10010","relative":"#10010","full":"gitlab-org/gitlab#10010"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18618738,"iid":10009,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/boards/index.js`","description":"The file `app/assets/javascripts/boards/index.js` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/boards/index.js b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/boards/index.js\nindex f88e9b55988..1a328689d03 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/boards/index.js\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/boards/index.js\n@@ -10,26 +10,33 @@ import '~/vue_shared/models/assignee';\n import FilteredSearchBoards from './filtered_search_boards';\n import eventHub from './eventhub';\n import sidebarEventHub from '~/sidebar/event_hub';\n-import './models/issue';\n-import './models/list';\n import './models/milestone';\n import './models/project';\n import boardsStore from './stores/boards_store';\n import ModalStore from './stores/modal_store';\n-import BoardService from './services/board_service';\n import modalMixin from './mixins/modal_mixins';\n import './filters/due_date_filters';\n-import Board from './components/board';\n-import BoardSidebar from './components/board_sidebar';\n+import Board from 'ee/boards/components/board';\n+import BoardSidebar from 'ee/boards/components/board_sidebar';\n import initNewListDropdown from './components/new_list_dropdown';\n-import BoardAddIssuesModal from './components/modal/index.vue';\n+import BoardAddIssuesModal from 'ee/boards/components/modal/index';\n import '~/vue_shared/vue_resource_interceptor';\n import { NavigationType, parseBoolean } from '~/lib/utils/common_utils';\n \n+import 'ee/boards/models/list';\n+import 'ee/boards/models/issue';\n+import 'ee/boards/models/project';\n+import BoardService from 'ee/boards/services/board_service';\n+import BoardsSelector from 'ee/boards/components/boards_selector.vue';\n+import collapseIcon from 'ee/boards/icons/fullscreen_collapse.svg';\n+import expandIcon from 'ee/boards/icons/fullscreen_expand.svg';\n+import tooltip from '~/vue_shared/directives/tooltip';\n+\n let issueBoardsApp;\n \n export default () =\u003e {\n   const $boardApp = document.getElementById('board-app');\n+  const issueBoardsContent = document.querySelector('.content-wrapper \u003e .js-focus-mode-board');\n \n   // check for browser back and trigger a hard reload to circumvent browser caching.\n   window.addEventListener('pageshow', event =\u003e {\n@@ -114,6 +121,7 @@ export default () =\u003e {\n           this.state.lists = _.sortBy(this.state.lists, 'position');\n \n           boardsStore.addBlankState();\n+          boardsStore.addPromotionState();\n           this.loading = false;\n         })\n         .catch(() =\u003e {\n@@ -128,16 +136,23 @@ export default () =\u003e {\n         const { sidebarInfoEndpoint } = newIssue;\n         if (sidebarInfoEndpoint \u0026\u0026 newIssue.subscribed === undefined) {\n           newIssue.setFetchingState('subscriptions', true);\n+          newIssue.setFetchingState('weight', true);\n+          newIssue.setFetchingState('epic', true);\n           BoardService.getIssueInfo(sidebarInfoEndpoint)\n             .then(res =\u003e res.data)\n             .then(data =\u003e {\n               newIssue.setFetchingState('subscriptions', false);\n+              newIssue.setFetchingState('weight', false);\n+              newIssue.setFetchingState('epic', false);\n               newIssue.updateData({\n                 subscribed: data.subscribed,\n+                weight: data.weight,\n+                epic: data.epic,\n               });\n             })\n             .catch(() =\u003e {\n               newIssue.setFetchingState('subscriptions', false);\n+              newIssue.setFetchingState('weight', false);\n               Flash(__('An error occurred while fetching sidebar data'));\n             });\n         }\n@@ -172,12 +187,56 @@ export default () =\u003e {\n     el: document.getElementById('js-add-list'),\n     data: {\n       filters: boardsStore.state.filters,\n+      milestoneTitle: $boardApp.dataset.boardMilestoneTitle,\n     },\n     mounted() {\n       initNewListDropdown();\n     },\n   });\n \n+  const configEl = document.querySelector('.js-board-config');\n+\n+  if (configEl) {\n+    gl.boardConfigToggle = new Vue({\n+      el: configEl,\n+      directives: {\n+        tooltip,\n+      },\n+      data() {\n+        return {\n+          canAdminList: this.$options.el.hasAttribute('data-can-admin-list'),\n+          hasScope: this.$options.el.hasAttribute('data-has-scope'),\n+          state: boardsStore.state,\n+        };\n+      },\n+      computed: {\n+        buttonText() {\n+          return this.canAdminList ? 'Edit board' : 'View scope';\n+        },\n+        tooltipTitle() {\n+          return this.hasScope ? __(\"This board's scope is reduced\") : '';\n+        },\n+      },\n+      methods: {\n+        showPage: page =\u003e boardsStore.showPage(page),\n+      },\n+      template: `\n+        \u003cdiv class=\"prepend-left-10\"\u003e\n+          \u003cbutton\n+            v-tooltip\n+            :title=\"tooltipTitle\"\n+            class=\"btn btn-inverted\"\n+            :class=\"{ 'dot-highlight': hasScope }\"\n+            type=\"button\"\n+            @click.prevent=\"showPage('edit')\"\n+          \u003e\n+            {{ buttonText }}\n+          \u003c/button\u003e\n+        \u003c/div\u003e\n+      `,\n+    });\n+  }\n+\n   const issueBoardsModal = document.getElementById('js-add-issues-btn');\n \n   if (issueBoardsModal) {\n@@ -189,6 +248,8 @@ export default () =\u003e {\n         return {\n           modal: ModalStore.store,\n           store: boardsStore.state,\n+          isFullscreen: false,\n+          focusModeAvailable: $boardApp.hasAttribute('data-focus-mode-available'),\n           canAdminList: this.$options.el.hasAttribute('data-can-admin-list'),\n         };\n       },\n@@ -251,4 +312,78 @@ export default () =\u003e {\n       `,\n     });\n   }\n+\n+  // eslint-disable-next-line no-new\n+  new Vue({\n+    el: document.getElementById('js-toggle-focus-btn'),\n+    data: {\n+      modal: ModalStore.store,\n+      store: boardsStore.state,\n+      isFullscreen: false,\n+      focusModeAvailable: $boardApp.hasAttribute('data-focus-mode-available'),\n+    },\n+    methods: {\n+      toggleFocusMode() {\n+        if (!this.focusModeAvailable) {\n+          return;\n+        }\n+\n+        $(this.$refs.toggleFocusModeButton).tooltip('hide');\n+        issueBoardsContent.classList.toggle('is-focused');\n+\n+        this.isFullscreen = !this.isFullscreen;\n+      },\n+    },\n+    template: `\n+      \u003cdiv class=\"board-extra-actions\"\u003e\n+        \u003ca\n+          href=\"#\"\n+          class=\"btn btn-default has-tooltip prepend-left-10 js-focus-mode-btn\"\n+          role=\"button\"\n+          aria-label=\"Toggle focus mode\"\n+          title=\"Toggle focus mode\"\n+          ref=\"toggleFocusModeButton\"\n+          v-if=\"focusModeAvailable\"\n+          @click=\"toggleFocusMode\"\u003e\n+          \u003cspan v-show=\"isFullscreen\"\u003e\n+            ${collapseIcon}\n+          \u003c/span\u003e\n+          \u003cspan v-show=\"!isFullscreen\"\u003e\n+            ${expandIcon}\n+          \u003c/span\u003e\n+        \u003c/a\u003e\n+      \u003c/div\u003e\n+    `,\n+  });\n+\n+  const boardsSwitcherElement = document.getElementById('js-multiple-boards-switcher');\n+  // eslint-disable-next-line no-new\n+  new Vue({\n+    el: boardsSwitcherElement,\n+    components: {\n+      BoardsSelector,\n+    },\n+    data() {\n+      const { dataset } = boardsSwitcherElement;\n+\n+      const boardsSelectorProps = {\n+        ...dataset,\n+        currentBoard: JSON.parse(dataset.currentBoard),\n+        hasMissingBoards: parseBoolean(dataset.hasMissingBoards),\n+        canAdminBoard: parseBoolean(dataset.canAdminBoard),\n+        multipleIssueBoardsAvailable: parseBoolean(dataset.multipleIssueBoardsAvailable),\n+        projectId: Number(dataset.projectId),\n+        groupId: Number(dataset.groupId),\n+        scopedIssueBoardFeatureEnabled: parseBoolean(dataset.scopedIssueBoardFeatureEnabled),\n+        weights: JSON.parse(dataset.weights),\n+      };\n+\n+      return { boardsSelectorProps };\n+    },\n+    render(createElement) {\n+      return createElement(BoardsSelector, {\n+        props: this.boardsSelectorProps,\n+      });\n+    },\n+  });\n };\n```\n\n### What needs to be done\n1. Create a EE version of this file","state":"closed","created_at":"2019-02-26T16:21:04.607Z","updated_at":"2022-05-19T16:12:48.309Z","closed_at":"2019-07-19T08:38:45.458Z","closed_by":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"labels":["Enterprise Edition","backstage [DEPRECATED]","devops::plan","frontend","single codebase","workflow::blocked","workflow::in review"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10009","time_stats":{"time_estimate":28800,"total_time_spent":0,"human_time_estimate":"8h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10009","notes":"https://gitlab.com/api/v4/projects/278964/issues/10009/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10009/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10009","relative":"#10009","full":"gitlab-org/gitlab#10009"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18618306,"iid":10008,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/mr_notes/stores/index.js `","description":"The file `app/assets/javascripts/mr_notes/stores/index.js` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/mr_notes/stores/index.js b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/mr_notes/stores/index.js\nindex c4225c8ec08..c52ad4ceb65 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/mr_notes/stores/index.js\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/mr_notes/stores/index.js\n@@ -2,6 +2,7 @@ import Vue from 'vue';\n import Vuex from 'vuex';\n import notesModule from '~/notes/stores/modules';\n import diffsModule from '~/diffs/store/modules';\n+import batchCommentsModule from 'ee/batch_comments/stores/modules/batch_comments';\n import mrPageModule from './modules';\n \n Vue.use(Vuex);\n@@ -12,6 +13,7 @@ export const createStore = () =\u003e\n       page: mrPageModule,\n       notes: notesModule(),\n       diffs: diffsModule(),\n+      batchComments: batchCommentsModule(),\n     },\n   });\n```\n\n### What needs to be done\n1. Create a module that stubs `batchCommentsModule` in CE - all actions that are used in components and getters must exist in the CE counterpart.\n1. Use [`ee_else_ce`](https://docs.gitlab.com/ee/development/ee_features.html#javascript-code-in-assetsjavascripts) to import the module","state":"closed","created_at":"2019-02-26T16:03:37.043Z","updated_at":"2019-08-12T15:06:08.172Z","closed_at":"2019-03-04T12:21:55.593Z","closed_by":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"labels":["Create [DEPRECATED]","Enterprise Edition","devops::create","frontend","single codebase"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":1,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10008","time_stats":{"time_estimate":28800,"total_time_spent":0,"human_time_estimate":"8h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10008","notes":"https://gitlab.com/api/v4/projects/278964/issues/10008/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10008/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10008","relative":"#10008","full":"gitlab-org/gitlab#10008"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18617081,"iid":10007,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/diffs/components/parallel_diff_view.vue`","description":"The file `app/assets/javascripts/diffs/components/parallel_diff_view.vue` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/diffs/components/parallel_diff_view.vue b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/diffs/components/parallel_diff_view.vue\nindex 1bf693380db..354e12746a8 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/diffs/components/parallel_diff_view.vue\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/diffs/components/parallel_diff_view.vue\n@@ -3,10 +3,14 @@ import { mapGetters } from 'vuex';\n import parallelDiffTableRow from './parallel_diff_table_row.vue';\n import parallelDiffCommentRow from './parallel_diff_comment_row.vue';\n \n+// eslint-disable-next-line import/order\n+import ParallelDraftCommentRow from 'ee/batch_comments/components/parallel_draft_comment_row.vue';\n+\n export default {\n   components: {\n     parallelDiffTableRow,\n     parallelDiffCommentRow,\n+    ParallelDraftCommentRow,\n   },\n   props: {\n     diffFile: {\n@@ -25,6 +29,7 @@ export default {\n   },\n   computed: {\n     ...mapGetters('diffs', ['commitId']),\n+    ...mapGetters('batchComments', ['shouldRenderParallelDraftRow', 'draftForLine']),\n     diffLinesLength() {\n       return this.diffLines.length;\n     },\n@@ -56,6 +61,12 @@ export default {\n             :line-index=\"index\"\n             :help-page-path=\"helpPagePath\"\n           /\u003e\n+          \u003cparallel-draft-comment-row\n+            v-if=\"shouldRenderParallelDraftRow(diffFile.file_hash, line)\"\n+            :key=\"`drafts-${index}`\"\n+            :line=\"line\"\n+            :diff-file-content-sha=\"diffFile.file_hash\"\n+          /\u003e\n         \u003c/template\u003e\n       \u003c/tbody\u003e\n     \u003c/table\u003e\n```\n\n### What needs to be done\n1. Load `ParallelDraftCommentRow` async with a check for EE\n1. For the getters, this issue needs to be done first - https://gitlab.com/gitlab-org/gitlab-ee/issues/10008 this will guarantee these methods exist in CE and that we can have only the CE files.","state":"closed","created_at":"2019-02-26T15:20:41.446Z","updated_at":"2019-08-12T15:06:08.158Z","closed_at":"2019-03-06T15:03:18.472Z","closed_by":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"labels":["Create [DEPRECATED]","Enterprise Edition","devops::create","frontend","single codebase"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":0,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10007","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10007","notes":"https://gitlab.com/api/v4/projects/278964/issues/10007/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10007/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10007","relative":"#10007","full":"gitlab-org/gitlab#10007"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18612809,"iid":10003,"project_id":278964,"title":"API endpoint to list the packages of a group","description":"### Problem to solve\nThe GitLab Package Registry allows developers to build and deploy Maven and NPM packages to a centralized GitLab Registry. As part of the Package Registry, GitLab offers an [API](https://docs.gitlab.com/ee/api/packages.html#list-project-packages) for listing, fetching and deleting packages at the project level. \n\nHowever, we do not currently offer any group level API for the Package Registry. This prevents users from being able to view dependencies across projects. \n\n\n### Intended users\n- [Software Developer](https://design.gitlab.com/research/personas#persona-sasha)\n- [DevOps Engineer](https://design.gitlab.com/research/personas#persona-devon)\n\n### Proposal\nCreate a new API endpoint that will allow users to list all packages of all projects within a given group in a single list. \n\n#### Example\n```\npackages = Package.where(project_id: group.projects)\n```\n\nEndpoint will be\n\n```\napi/v4/groups/:id/packages\n```\n\n### Permissions and Security\nDevelopers, maintainers and owners, will all have the ability to view the list of packages at the group level. \n\n### Documentation\n- [Packages API](https://docs.gitlab.com/ee/api/packages.html#list-project-packages)\n\n### Testing\n- Ensure that packages in private projects can not be seen by users that may be a part of the group, but not have access to that private project. \n\n### What does success look like, and how can we measure that?\nSuccess looks like we allow users to view their group level registry from gitlab.com. We can measure early adoption using page views, which can be added to the Package group's dashboard.\n### What is the type of buyer? \nThis feature is focused on Premium users.\n\n### Links / references\n- [Packages API](https://docs.gitlab.com/ee/api/packages.html#list-project-packages)\n","state":"closed","created_at":"2019-02-26T13:31:26.392Z","updated_at":"2020-09-25T21:17:20.608Z","closed_at":"2019-11-21T10:58:37.582Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Package Registry","Deliverable","Enterprise Edition","GitLab Premium","Persona: Software developer","backend","customer","devops::package","direction","group::package registry","missed-deliverable","missed:12.5","package:active","type::feature","workflow::production"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":1817621,"username":"tpresa","name":"Thiago Presa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1817621/avatar.png","web_url":"https://gitlab.com/tpresa"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":12,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10003","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10003","notes":"https://gitlab.com/api/v4/projects/278964/issues/10003/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10003/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10003","relative":"#10003","full":"gitlab-org/gitlab#10003"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1244,"epic":{"id":6541,"iid":1244,"title":"Make the Package and Container registries easier to use","url":"/groups/gitlab-org/-/epics/1244","group_id":9970,"human_readable_end_date":"Feb 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18611417,"iid":10002,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/diffs/components/inline_diff_view.vue`","description":"The file `app/assets/javascripts/diffs/components/inline_diff_view.vue` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/diffs/components/inline_diff_view.vue b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/diffs/components/inline_diff_view.vue\nindex e781397214d..af9746ffe87 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/diffs/components/inline_diff_view.vue\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/diffs/components/inline_diff_view.vue\n@@ -3,10 +3,14 @@ import { mapGetters } from 'vuex';\n import inlineDiffTableRow from './inline_diff_table_row.vue';\n import inlineDiffCommentRow from './inline_diff_comment_row.vue';\n \n+// eslint-disable-next-line import/order\n+import InlineDraftCommentRow from 'ee/batch_comments/components/inline_draft_comment_row.vue';\n+\n export default {\n   components: {\n     inlineDiffCommentRow,\n     inlineDiffTableRow,\n+    InlineDraftCommentRow,\n   },\n   props: {\n     diffFile: {\n@@ -25,6 +29,7 @@ export default {\n   },\n   computed: {\n     ...mapGetters('diffs', ['commitId']),\n+    ...mapGetters('batchComments', ['shouldRenderDraftRow', 'draftForLine']),\n     diffLinesLength() {\n       return this.diffLines.length;\n     },\n@@ -54,6 +59,11 @@ export default {\n           :line=\"line\"\n           :help-page-path=\"helpPagePath\"\n         /\u003e\n+        \u003cinline-draft-comment-row\n+          v-if=\"shouldRenderDraftRow(diffFile.file_hash, line)\"\n+          :key=\"`draft_${index}`\"\n+          :draft=\"draftForLine(diffFile.file_hash, line)\"\n+        /\u003e\n       \u003c/template\u003e\n     \u003c/tbody\u003e\n   \u003c/table\u003e\n```\n\n### What needs to be done\n1. Use the async components to load `InlineDraftCommentRow`\n1. Move the import to the CE version\n1. Create a EE mixin with the getters for `batchComments`\n1. Create a CE counterpart for the mixin\n1. Use [`ee_else_ce`](https://docs.gitlab.com/ee/development/ee_features.html#javascript-code-in-assetsjavascripts) to import the mixin into this file.\n1. The EE file can now be deleted","state":"closed","created_at":"2019-02-26T12:58:37.285Z","updated_at":"2019-08-12T15:06:08.247Z","closed_at":"2019-03-04T12:21:55.164Z","closed_by":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"labels":["Create [DEPRECATED]","Enterprise Edition","devops::create","frontend","single codebase"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10002","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10002","notes":"https://gitlab.com/api/v4/projects/278964/issues/10002/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10002/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10002","relative":"#10002","full":"gitlab-org/gitlab#10002"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18611335,"iid":10001,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/diffs/components/diff_line_note_form.vue`","description":"The file `app/assets/javascripts/diffs/components/diff_line_note_form.vue` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/diffs/components/diff_line_note_form.vue b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/diffs/components/diff_line_note_form.vue\nindex 18edbe286ba..95fde0e83b9 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/diffs/components/diff_line_note_form.vue\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/diffs/components/diff_line_note_form.vue\n@@ -1,6 +1,7 @@\n \u003cscript\u003e\n import { mapState, mapGetters, mapActions } from 'vuex';\n import { s__ } from '~/locale';\n+import batchCommentsDiffLineNoteFormMixin from 'ee/batch_comments/mixins/diff_line_note_form';\n import noteForm from '../../notes/components/note_form.vue';\n import autosave from '../../notes/mixins/autosave';\n import { DIFF_NOTE_TYPE } from '../constants';\n@@ -9,7 +10,7 @@ export default {\n   components: {\n     noteForm,\n   },\n-  mixins: [autosave],\n+  mixins: [autosave, batchCommentsDiffLineNoteFormMixin],\n   props: {\n     diffFileHash: {\n       type: String,\n@@ -103,6 +104,7 @@ export default {\n       :help-page-path=\"helpPagePath\"\n       save-button-title=\"Comment\"\n       class=\"diff-comment-form\"\n+      @handleFormUpdateAddToReview=\"addToReview\"\n       @cancelForm=\"handleCancelCommentForm\"\n       @handleFormUpdate=\"handleSaveNote\"\n     /\u003e\n```\n\n\n### What needs to be done\n1. Create a CE counterpart of `batchCommentsDiffLineNoteFormMixin`\n1. Create an empty handler for `addToReview` in that mixin\n1. Use [`ee_else_ce`](https://docs.gitlab.com/ee/development/ee_features.html#javascript-code-in-assetsjavascripts) to import the mixin into this file.","state":"closed","created_at":"2019-02-26T12:55:41.657Z","updated_at":"2019-08-12T15:06:12.027Z","closed_at":"2019-02-28T15:32:18.653Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Create [DEPRECATED]","Enterprise Edition","devops::create","frontend","single codebase"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":0,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10001","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10001","notes":"https://gitlab.com/api/v4/projects/278964/issues/10001/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10001/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10001","relative":"#10001","full":"gitlab-org/gitlab#10001"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18607195,"iid":9998,"project_id":278964,"title":"Update SAST spotbugs (formerly find-sec-bugs) analyzer with Java 11","description":"### Problem to solve\n\nJava 11 is a LTS release and we can expect more and more projects to require it. Oracle is stopping updates to Java 8, the \nprevious LTS.\nThe find-sec-bugs SAST analyzer carries a Java 8 SDK and cannot build Java 11 projects so more and more users will \nrun into trouble using SAST with their Java projects.\n\nThis is the case for example with [WebGoat](https://github.com/WebGoat/WebGoat), find-sec-bugs fails to build it and of course, fails to find vulnerabilities in it.\n\n### Target audience\n\n- Sasha, Software Developer, https://design.gitlab.com/research/personas#persona-sasha\n\n- Sam, Security Analyst, https://design.gitlab.com/research/personas#persona-sam\n--\u003e\n\n### Proposal\n\nI propose adding a Java 11 JDK to the find-sec-bugs docker image and add and document a configuration environment variable to switch to it. For example, `SAST_JAVA_VERSION` which would be restricted to \"8\" or \"11\".\nThe default version would be Java 8, as it is now.\n\n### What does success look like, and how can we measure that?\n\nUsers with Java 11 projects can run find-sec-bugs on them. Can be measured by the number of occurrences of the `SAST_JAVA_VERSION` CI/CD variable in the database.\n\n### Links / references\n\nhttps://www.oracle.com/technetwork/java/java-se-support-roadmap.html","state":"closed","created_at":"2019-02-26T10:48:31.327Z","updated_at":"2020-09-25T21:17:22.427Z","closed_at":"2019-09-08T23:21:26.186Z","closed_by":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"labels":["Enterprise Edition","Persona: Security Analyst","Persona: Software developer","Stretch","customer","devops::secure","group::static analysis","missed:12.2","type::feature"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":25949,"username":"haynes","name":"Hannes Rosenögger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/25949/haynes_500x500.jpg","web_url":"https://gitlab.com/haynes"}],"author":{"id":1766812,"username":"groulot","name":"Gilbert Roulot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1766812/avatar.png","web_url":"https://gitlab.com/groulot"},"type":"ISSUE","assignee":{"id":25949,"username":"haynes","name":"Hannes Rosenögger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/25949/haynes_500x500.jpg","web_url":"https://gitlab.com/haynes"},"user_notes_count":28,"merge_requests_count":0,"upvotes":4,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9998","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9998","notes":"https://gitlab.com/api/v4/projects/278964/issues/9998/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9998/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9998","relative":"#9998","full":"gitlab-org/gitlab#9998"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18603527,"iid":9995,"project_id":278964,"title":"Group Insights Documentation","description":"Detailed Documentation for the Group Level Insights feature is required.\n\nThe configuration file will need a thorough explanation similar to our triage docs:\n- https://gitlab.com/gitlab-org/gitlab-triage/blob/master/README.md#defining-a-policy\n\nWe must:\n- Explain the available queries\n  - Query names\n  - Available parameters\n    - Defaults and whether they are required","state":"closed","created_at":"2019-02-26T09:23:13.768Z","updated_at":"2019-08-12T15:06:12.032Z","closed_at":"2019-03-28T09:21:02.872Z","closed_by":{"id":3585,"username":"axil","name":"Achilleas Pipinellis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3585/avatar.png","web_url":"https://gitlab.com/axil"},"labels":["Enterprise Edition","Quality","documentation","insights","type::feature"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":419655,"username":"markglenfletcher","name":"Mark Fletcher","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/419655/avatar.png","web_url":"https://gitlab.com/markglenfletcher"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":0,"merge_requests_count":2,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9995","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9995","notes":"https://gitlab.com/api/v4/projects/278964/issues/9995/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9995/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9995","relative":"#9995","full":"gitlab-org/gitlab#9995"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":725,"epic":{"id":3055,"iid":725,"title":"Insights: Build GitLab Insights as a native GitLab feature","url":"/groups/gitlab-org/-/epics/725","group_id":9970,"human_readable_end_date":"Apr 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18587928,"iid":9984,"project_id":278964,"title":"Remove unnecessary check from Groups#AutocompleteService","description":"https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/8632/diffs introduced an unnecessary check when performing auto complete for milestones in epics.  \n\nIt checks if user can read current group parents which is not needed. When user can read  \ngroup he also can read its predecessors.  \n\nTODO  \n\n- Remove `ParentGroupsFinder`  if it is not being used on another place yet and use\n`group.self_and_ancestors`.","state":"closed","created_at":"2019-02-25T18:11:14.399Z","updated_at":"2022-05-19T16:12:47.809Z","closed_at":"2019-04-17T09:05:31.154Z","closed_by":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"labels":["Enterprise Edition","[deprecated] Accepting merge requests","backend","devops::plan","maintenance::refactor"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"}],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9984","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9984","notes":"https://gitlab.com/api/v4/projects/278964/issues/9984/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9984/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9984","relative":"#9984","full":"gitlab-org/gitlab#9984"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18586907,"iid":9982,"project_id":278964,"title":"Make Hashicorp Vault available as application to deploy into Kubernetes","description":"### Problem to solve\nWe want to make it easy for users to have modern secrets management.  Hashicorp Vault has won this market, and users that are not already using it for rotating and managing secrets should be.\n\n### Target audience\n- Delaney, Development Team Lead, https://design.gitlab.com/research/personas#persona-delaney\n- Devon, DevOps Engineer, https://design.gitlab.com/research/personas#persona-devon\n- Sidney, Systems Administrator, https://design.gitlab.com/research/personas#persona-sidney\n\n### Further details\n\n\n### Proposal\n\nWe are going to add Vault to the list of GitLab managed applications (https://docs.gitlab.com/ee/user/clusters/applications.html#gitlab-managed-apps), providing a one-click install for applications on a Kubernetes cluster.\n\n### Implementation Notes\n\n* Implementation relies on installing/using the helm-git plugin as the official Hashicorp Vault chart is not in a Helm repository\n* We use the official Vault Helm chart from Hashicorp\n* After installation, you will still need to go into a pod and run `vault operator init` and `vault operator unseal \u003cunseal key\u003e` As per the standard Vault installation process. We can't easily automate this as there is a lot of specific information and configuration related to how to setup Vault specifically for your environment. E.g. Personally storing and distributing your unseal keys\n* For production usage a user will need to configure the Vault chart with some specifics, e.g. setting the backing store to a cloud storage bucket, encryption, auto-unseal on startup\n\n#### Additional Details\n\n* The goal is to enable easy set up for users that currently do not have a Vault instance with GitLab using K8. \n* How will GitLab deployed applications find Vault (is there a URL to pass into CI perhaps or do we need to expose it in the UI?) \n  * We should support a URL to pass into the CI as first iteration. It's worth knowing that all user deployed applications from GitLab are deployed to isolated namespaces. \n* Is there a security model for Vault that aligns with our namespace separation for Group clusters? \n  * [Security Model for Vault](https://www.vaultproject.io/docs/internals/security/) does support name space separation. We could also leverage an [Agent Sidecar Injector](https://www.vaultproject.io/docs/platform/k8s/injector/). \n* Does it make sense for all applications deployed to all environments to share a Vault. Is this recommended usage?\n  * In this case, we would be supporting an already present Vault Instance and connecting it into a K8 Cluster. HashiCorp mentioned this is supported functionality. \n* What will be supported in Vault?\n  * CI Variables, tokens, and keys \n\n### Documentation\n* See https://gitlab.com/gitlab-org/gitlab/-/merge_requests/24546 for documentation \n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n* On-premise and gitlab.com customers will install Vault as another Gitlab Managed App alongside the others we already have documented at https://docs.gitlab.com/ee/user/clusters/applications.html\n\n### What is the type of buyer? \n* Community Edition \n\n### Links / references","state":"closed","created_at":"2019-02-25T17:33:50.746Z","updated_at":"2021-05-24T14:58:30.132Z","closed_at":"2020-03-09T06:21:37.094Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["Alliances","Alliances - Hashicorp","Category:Kubernetes Management","Category:Secrets Management","Persona: DevOps Engineer","Persona: Development Team Lead","Persona: Systems Administrator","Product Vision FY20","UX","cicd::active","devops::release","direction","feature::enhancement","frontend","group::release","maturity::minimal","security","type::feature","workflow::planning breakdown"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":3079878,"username":"rayana","name":"Rayana Verissimo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3079878/avatar.png","web_url":"https://gitlab.com/rayana"},{"id":4337537,"username":"ggillies","name":"Graeme Gillies","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4337537/avatar.png","web_url":"https://gitlab.com/ggillies"}],"author":{"id":1514779,"username":"brendan","name":"Brendan O'Leary 🐢","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b5a575069d12106f79c0c97dfb3ef917?s=80\u0026d=identicon","web_url":"https://gitlab.com/brendan"},"type":"ISSUE","assignee":{"id":3079878,"username":"rayana","name":"Rayana Verissimo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3079878/avatar.png","web_url":"https://gitlab.com/rayana"},"user_notes_count":62,"merge_requests_count":1,"upvotes":8,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9982","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9982","notes":"https://gitlab.com/api/v4/projects/278964/issues/9982/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9982/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9982","relative":"#9982","full":"gitlab-org/gitlab#9982"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":816,"epic":{"id":3843,"iid":816,"title":"Variables and secrets management in GitLab CI/CD","url":"/groups/gitlab-org/-/epics/816","group_id":9970,"human_readable_end_date":"Mar 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24690094,"iid":26963,"project_id":278964,"title":"Empty state for project search shows \"personal projects\" message","description":"## Description\n\nWhen searching for projects, the empty state view shows a \"personal projects\" message.\n\n![Screen_Shot_2019-02-25_at_10.31.36_AM](/uploads/c84890b9bc4dd43277e537da43011357/Screen_Shot_2019-02-25_at_10.31.36_AM.png)","state":"closed","created_at":"2019-02-25T16:36:08.749Z","updated_at":"2020-11-18T12:48:51.853Z","closed_at":"2020-11-10T12:49:19.947Z","closed_by":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"labels":["auto closed","devops::plan","frontend","group::project management","priority::3","regression","regression:11.7","section::dev","severity::3","type::bug","vintage"],"milestone":{"id":1233755,"iid":53,"group_id":9970,"title":"13.6","description":"https://about.gitlab.com/releases/2020/11/22/gitlab-13-6-released/","state":"closed","created_at":"2020-04-09T17:39:22.328Z","updated_at":"2022-04-13T14:51:04.376Z","due_date":"2020-11-17","start_date":"2020-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/53"},"assignees":[{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"}],"author":{"id":2233420,"username":"pslaughter","name":"Paul Slaughter","state":"active","avatar_url":"https://secure.gravatar.com/avatar/631b25421eb206ab44cb2793ef09d881?s=80\u0026d=identicon","web_url":"https://gitlab.com/pslaughter"},"type":"ISSUE","assignee":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/26963","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/26963","notes":"https://gitlab.com/api/v4/projects/278964/issues/26963/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/26963/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#26963","relative":"#26963","full":"gitlab-org/gitlab#26963"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18585177,"iid":9978,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/gl_dropdown.js`","description":"The file `` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/gl_dropdown.js b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/gl_dropdown.js\nindex a8ac2f510a4..a4aa383b9fb 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/gl_dropdown.js\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/gl_dropdown.js\n@@ -719,6 +719,10 @@ GitLabDropdown = (function() {\n     }\n     html = document.createElement('li');\n \n+    if (rowHidden) {\n+      html.style.display = 'none';\n+    }\n+\n     if (data === 'divider' || data === 'separator') {\n       html.className = data;\n       return html;\n```\n\n### What needs to be done\n1. This change can be moved to the CE version","state":"closed","created_at":"2019-02-25T16:34:47.903Z","updated_at":"2019-08-12T15:06:16.408Z","closed_at":"2019-06-06T15:03:14.236Z","closed_by":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"labels":["Create [DEPRECATED]","Enterprise Edition","[deprecated] Accepting merge requests","devops::create","frontend","single codebase"],"milestone":{"id":693518,"iid":33,"group_id":9970,"title":"12.0","description":"https://about.gitlab.com/releases/2019/06/22/gitlab-12-0-released/","state":"closed","created_at":"2018-10-30T16:47:37.975Z","updated_at":"2020-04-22T19:51:03.475Z","due_date":"2019-06-22","start_date":"2019-05-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/33"},"assignees":[{"id":2580294,"username":"michel.engelen","name":"Michel Engelen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2580294/avatar.png","web_url":"https://gitlab.com/michel.engelen"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":2580294,"username":"michel.engelen","name":"Michel Engelen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2580294/avatar.png","web_url":"https://gitlab.com/michel.engelen"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9978","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9978","notes":"https://gitlab.com/api/v4/projects/278964/issues/9978/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9978/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9978","relative":"#9978","full":"gitlab-org/gitlab#9978"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18585074,"iid":9976,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/filtered_search/filtered_search_manager.js `","description":"The file `app/assets/javascripts/filtered_search/filtered_search_manager.js\n ` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/filtered_search/filtered_search_manager.js b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/filtered_search/filtered_search_manager.js\nindex 33c82778c79..a54b88b78df 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/filtered_search/filtered_search_manager.js\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/filtered_search/filtered_search_manager.js\n@@ -41,6 +41,9 @@ export default class FilteredSearchManager {\n       merge_requests: 'merge-request-recent-searches',\n     };\n \n+    // EE specific setup\n+    this.initEE();\n+\n     this.recentSearchesStore = new RecentSearchesStore({\n       isLocalStorageAvailable: RecentSearchesService.isAvailable(),\n       allowedKeys: this.filteredSearchTokenKeys.getKeys(),\n@@ -55,6 +58,26 @@ export default class FilteredSearchManager {\n     this.recentSearchesService = new RecentSearchesService(recentSearchesKey);\n   }\n \n+  /**\n+   * Do EE specific initializations\n+   */\n+  initEE() {\n+    // Setup token keys for multiple-assignees support\n+    if (typeof this.filteredSearchTokenKeys.init === 'function') {\n+      this.filteredSearchTokenKeys.init({\n+        multipleAssignees: this.filteredSearchInput.dataset.multipleAssignees,\n+      });\n+    }\n+\n+    // Add localStorage key name for Epics recent searches\n+    this.recentsStorageKeyNames.epics = 'epics-recent-searches';\n+\n+    // Update `isGroup` from DOM info\n+    if (this.filteredSearchInput) {\n+      this.isGroup = !!this.filteredSearchInput.getAttribute('data-group-id');\n+    }\n+  }\n+\n   setup() {\n     // Fetch recent searches from localStorage\n     this.fetchingRecentSearchesPromise = this.recentSearchesService\n```\n\nhttps://leipert-projects.gitlab.io/is-gitlab-pretty-yet/diff/?search=filtered_search_manager.js\n\n### What needs to be done\n1. Create a EE counterpart in the `ee/` folder.\n1. Extend the \u001c`FilteredSearchManager` class.\n1. Move the differences to the ee counterpart\u001c\n1. In the places the file is being imported, use [`ee_else_ce`](https://docs.gitlab.com/ee/development/ee_features.html#javascript-code-in-assetsjavascripts) to import it\n1. Guarantee that specs exist or are added","state":"closed","created_at":"2019-02-25T16:32:14.187Z","updated_at":"2022-05-19T16:12:47.499Z","closed_at":"2019-04-05T07:42:25.759Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Category:Global Search","Enterprise Edition","backstage [DEPRECATED]","devops::plan","frontend","single codebase"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9976","time_stats":{"time_estimate":7200,"total_time_spent":0,"human_time_estimate":"2h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9976","notes":"https://gitlab.com/api/v4/projects/278964/issues/9976/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9976/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9976","relative":"#9976","full":"gitlab-org/gitlab#9976"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18584960,"iid":9975,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/filtered_search/filtered_search_dropdown_manager.js`","description":"The file `app/assets/javascripts/filtered_search/filtered_search_dropdown_manager.js` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/filtered_search/filtered_search_dropdown_manager.js b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/filtered_search/filtered_search_dropdown_manager.js\nindex 57ec6603d80..de10bbc6401 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/filtered_search/filtered_search_dropdown_manager.js\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/filtered_search/filtered_search_dropdown_manager.js\n@@ -1,5 +1,6 @@\n import _ from 'underscore';\n import DropLab from '~/droplab/drop_lab';\n+import DropdownWeight from 'ee/filtered_search/dropdown_weight';\n import FilteredSearchContainer from './container';\n import FilteredSearchTokenKeys from './filtered_search_token_keys';\n import DropdownUtils from './dropdown_utils';\n@@ -106,6 +107,14 @@ export default class FilteredSearchDropdownManager {\n         gl: NullDropdown,\n         element: this.container.querySelector('#js-dropdown-admin-runner-type'),\n       },\n+\n+      // EE-only start\n+      weight: {\n+        reference: null,\n+        gl: DropdownWeight,\n+        element: this.container.querySelector('#js-dropdown-weight'),\n+      },\n+      // EE-only end\n     };\n \n     supportedTokens.forEach(type =\u003e {\n@@ -118,7 +127,12 @@ export default class FilteredSearchDropdownManager {\n   }\n \n   getMilestoneEndpoint() {\n-    const endpoint = `${this.baseEndpoint}/milestones.json`;\n+    let endpoint = `${this.baseEndpoint}/milestones.json`;\n+\n+    // EE-only\n+    if (this.groupsOnly) {\n+      endpoint = `${endpoint}?only_group_milestones=true`;\n+    }\n \n     return endpoint;\n   }\n```\n\n### What needs to be done\n1. Create a EE counterpart in the `ee/` folder.\n1. Extend the \u001c`FilteredSearchDropdownManager` class.\n1. Move the differences to the ee counterpart\u001c\n1. In the places the file is being imported, use [`ee_else_ce`](https://docs.gitlab.com/ee/development/ee_features.html#javascript-code-in-assetsjavascripts) to import it\n1. Guarantee that specs exist or are added","state":"closed","created_at":"2019-02-25T16:27:27.871Z","updated_at":"2019-08-12T15:06:16.402Z","closed_at":"2019-04-03T11:07:16.489Z","closed_by":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"labels":["Create [DEPRECATED]","Enterprise Edition","[deprecated] Accepting merge requests","devops::create","frontend","single codebase"],"milestone":{"id":523180,"iid":18,"group_id":9970,"title":"11.9","description":"https://about.gitlab.com/releases/2019/03/22/gitlab-11-9-released/","state":"closed","created_at":"2018-05-09T14:56:19.024Z","updated_at":"2020-04-30T19:56:35.917Z","due_date":"2019-03-22","start_date":"2019-02-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/18"},"assignees":[{"id":3046722,"username":"sbigelow","name":"Sam Bigelow","state":"active","avatar_url":"https://secure.gravatar.com/avatar/469286018ddff635b600def386a5281f?s=80\u0026d=identicon","web_url":"https://gitlab.com/sbigelow"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":3046722,"username":"sbigelow","name":"Sam Bigelow","state":"active","avatar_url":"https://secure.gravatar.com/avatar/469286018ddff635b600def386a5281f?s=80\u0026d=identicon","web_url":"https://gitlab.com/sbigelow"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9975","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9975","notes":"https://gitlab.com/api/v4/projects/278964/issues/9975/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9975/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9975","relative":"#9975","full":"gitlab-org/gitlab#9975"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18584847,"iid":9974,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/notes/mixins/resolvable.js`","description":"The file `app/assets/javascripts/notes/mixins/resolvable.js` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/notes/mixins/resolvable.js b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/notes/mixins/resolvable.js\nindex 8edf3d088bb..2329727bca2 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/notes/mixins/resolvable.js\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/notes/mixins/resolvable.js\n@@ -31,6 +31,10 @@ export default {\n   },\n   methods: {\n     resolveHandler(resolvedState = false) {\n+      if (this.note \u0026\u0026 this.note.isDraft) {\n+        return this.$emit('toggleResolveStatus');\n+      }\n+\n       this.isResolving = true;\n       const isResolved = this.discussionResolved || resolvedState;\n       const discussion = this.resolveAsThread;\n```\n\n### What needs to be done\n1. Create an EE mixin and move the copy the EE version of this method there\n1. Remove the if from the CE version\n1. In the components where it's being imported, use [`ee_else_ce`](https://docs.gitlab.com/ee/development/ee_features.html#javascript-code-in-assetsjavascripts) to import this file.","state":"closed","created_at":"2019-02-25T16:22:49.314Z","updated_at":"2019-08-12T15:06:16.444Z","closed_at":"2019-03-01T10:24:06.486Z","closed_by":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"labels":["Create [DEPRECATED]","Enterprise Edition","Plan [DEPRECATED]","frontend","single codebase"],"milestone":null,"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":1,"merge_requests_count":3,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9974","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9974","notes":"https://gitlab.com/api/v4/projects/278964/issues/9974/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9974/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9974","relative":"#9974","full":"gitlab-org/gitlab#9974"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18584799,"iid":9973,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/notes/stores/getters.js`","description":"The file `` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/notes/stores/getters.js b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/notes/stores/getters.js\nindex 0ffc0cb2593..52ce0ee5e5e 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/notes/stores/getters.js\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/notes/stores/getters.js\n@@ -189,6 +189,9 @@ export const firstUnresolvedDiscussionId = (state, getters) =\u003e diffOrder =\u003e {\n   return getters.unresolvedDiscussionsIdsByDate[0];\n };\n \n+export const getDiscussion = state =\u003e discussionId =\u003e\n+  state.discussions.find(discussion =\u003e discussion.id === discussionId);\n+\n export const commentsDisabled = state =\u003e state.commentsDisabled;\n \n // prevent babel-plugin-rewire from generating an invalid default during karma tests\n```\n\n### What needs to be done\n1. Move the getter to the CE version","state":"closed","created_at":"2019-02-25T16:20:39.982Z","updated_at":"2019-08-12T15:06:16.413Z","closed_at":"2019-03-01T10:24:06.244Z","closed_by":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"labels":["Create [DEPRECATED]","Enterprise Edition","Plan [DEPRECATED]","frontend","single codebase"],"milestone":null,"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":0,"merge_requests_count":3,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9973","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9973","notes":"https://gitlab.com/api/v4/projects/278964/issues/9973/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9973/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9973","relative":"#9973","full":"gitlab-org/gitlab#9973"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18584769,"iid":9972,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/notes/components/noteable_note.vue`","description":"The file `` has differences between CE and EE.  \n\n### Differences  \n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/notes/components/noteable_note.vue b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/notes/components/noteable_note.vue\nindex 3c48d81ed05..8077d63f663 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/notes/components/noteable_note.vue\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/notes/components/noteable_note.vue\n@@ -145,12 +145,16 @@ export default {\n       this.$refs.noteBody.resetAutoSave();\n       this.$emit('updateSuccess');\n     },\n-    formUpdateHandler(noteText, parentElement, callback) {\n+    formUpdateHandler(noteText, parentElement, callback, resolveDiscussion) {\n       this.$emit('handleUpdateNote', {\n         note: this.note,\n         noteText,\n+        resolveDiscussion,\n         callback: () =\u003e this.updateSuccess(),\n       });\n+\n+      if (this.note.isDraft) return;\n+\n       const data = {\n         endpoint: this.note.path,\n         note: {\n@@ -223,6 +227,7 @@ export default {\n     \u003cdiv class=\"timeline-content\"\u003e\n       \u003cdiv class=\"note-header\"\u003e\n         \u003cnote-header v-once :author=\"author\" :created-at=\"note.created_at\" :note-id=\"note.id\"\u003e\n+          \u003cslot slot=\"note-header-info\" name=\"note-header-info\"\u003e\u003c/slot\u003e\n           \u003cspan v-if=\"commit\" v-html=\"actionText\"\u003e\u003c/span\u003e\n           \u003cspan v-else class=\"d-none d-sm-inline\"\u003e\u0026middot;\u003c/span\u003e\n         \u003c/note-header\u003e\n@@ -235,12 +240,16 @@ export default {\n           :can-award-emoji=\"note.current_user.can_award_emoji\"\n           :can-delete=\"note.current_user.can_edit\"\n           :can-report-as-abuse=\"canReportAsAbuse\"\n-          :can-resolve=\"note.current_user.can_resolve\"\n+          :can-resolve=\"\n+            note.current_user.can_resolve || (note.isDraft \u0026\u0026 note.discussion_id !== null)\n+          \"\n           :report-abuse-path=\"note.report_abuse_path\"\n-          :resolvable=\"note.resolvable\"\n-          :is-resolved=\"note.resolved\"\n+          :resolvable=\"note.resolvable || note.isDraft\"\n+          :is-resolved=\"note.resolved || note.resolve_discussion\"\n           :is-resolving=\"isResolving\"\n           :resolved-by=\"note.resolved_by\"\n+          :discussion-id=\"note.isDraft \u0026\u0026 note.discussion_id\"\n+          :resolve-discussion=\"note.isDraft \u0026\u0026 note.resolve_discussion\"\n           @handleEdit=\"editHandler\"\n           @handleDelete=\"deleteHandler\"\n           @handleResolve=\"resolveHandler\"\n```\n\n### What needs to be done  Guarantee that specs exist or are added  \n1. Create a mixin in `ee/` folder\n1. Create a backport for CE\n1. Use [`ee_else_ce`](https://docs.gitlab.com/ee/development/ee_features.html#javascript-code-in-assetsjavascripts) to import the mixin into this file.\n1. Move the script tags differences into the mixins\n1. Create computed properties in the mixins to handle the following differences: \n```diff\n :can-resolve=\"note.current_user.can_resolve\"\n+          :can-resolve=\"\n+            note.current_user.can_resolve || (note.isDraft \u0026\u0026 note.discussion_id !== null)\n+          \"\n           :report-abuse-path=\"note.report_abuse_path\"\n-          :resolvable=\"note.resolvable\"\n-          :is-resolved=\"note.resolved\"\n+          :resolvable=\"note.resolvable || note.isDraft\"\n+          :is-resolved=\"note.resolved || note.resolve_discussion\"\n           :is-resolving=\"isResolving\"\n           :resolved-by=\"note.resolved_by\"\n+          :discussion-id=\"note.isDraft \u0026\u0026 note.discussion_id\"\n+          :resolve-discussion=\"note.isDraft \u0026\u0026 note.resolve_discussion\"\n```\n1. Add a `v-if` with `renderIfExists` to `\u003cslot slot=\"note-header-info\" name=\"note-header-info\"\u003e\u003c/slot\u003e`\n1. Guarantee that specs exist or are added","state":"closed","created_at":"2019-02-25T16:18:57.621Z","updated_at":"2019-08-12T15:06:16.397Z","closed_at":"2019-04-09T10:33:06.738Z","closed_by":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"labels":["Create [DEPRECATED]","Deliverable","Enterprise Edition","devops::create","frontend","single codebase"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":1,"merge_requests_count":4,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9972","time_stats":{"time_estimate":7200,"total_time_spent":0,"human_time_estimate":"2h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9972","notes":"https://gitlab.com/api/v4/projects/278964/issues/9972/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9972/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9972","relative":"#9972","full":"gitlab-org/gitlab#9972"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18584663,"iid":9971,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/notes/components/note_form.vue`","description":"The file `app/assets/javascripts/notes/components/note_form.vue` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/notes/components/note_form.vue b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/notes/components/note_form.vue\nindex 269b4a4b117..07cc7bf9c8b 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/notes/components/note_form.vue\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/notes/components/note_form.vue\n@@ -7,6 +7,7 @@ import markdownField from '../../vue_shared/components/markdown/field.vue';\n import issuableStateMixin from '../mixins/issuable_state';\n import resolvable from '../mixins/resolvable';\n import { __ } from '~/locale';\n+import noteFormMixin from 'ee/batch_comments/mixins/note_form';\n \n export default {\n   name: 'NoteForm',\n@@ -14,7 +15,7 @@ export default {\n     issueWarning,\n     markdownField,\n   },\n-  mixins: [issuableStateMixin, resolvable],\n+  mixins: [issuableStateMixin, resolvable, noteFormMixin],\n   props: {\n     noteBody: {\n       type: String,\n@@ -151,19 +152,29 @@ export default {\n       return shouldResolve || shouldToggleState;\n     },\n     handleKeySubmit() {\n-      this.handleUpdate();\n+      if (this.showBatchCommentsActions) {\n+        this.handleAddToReview();\n+      } else {\n+        this.handleUpdate();\n+      }\n     },\n     handleUpdate(shouldResolve) {\n       const beforeSubmitDiscussionState = this.discussionResolved;\n       this.isSubmitting = true;\n \n-      this.$emit('handleFormUpdate', this.updatedNoteBody, this.$refs.editNoteForm, () =\u003e {\n-        this.isSubmitting = false;\n+      this.$emit(\n+        'handleFormUpdate',\n+        this.updatedNoteBody,\n+        this.$refs.editNoteForm,\n+        () =\u003e {\n+          this.isSubmitting = false;\n \n-        if (this.shouldToggleResolved(shouldResolve, beforeSubmitDiscussionState)) {\n-          this.resolveHandler(beforeSubmitDiscussionState);\n-        }\n-      });\n+          if (this.shouldToggleResolved(shouldResolve, beforeSubmitDiscussionState)) {\n+            this.resolveHandler(beforeSubmitDiscussionState);\n+          }\n+        },\n+        this.discussionResolved ? !this.isUnresolving : this.isResolving,\n+      );\n     },\n     editMyLastNote() {\n       if (this.updatedNoteBody === '') {\n@@ -227,28 +238,72 @@ export default {\n         \u003e\u003c/textarea\u003e\n       \u003c/markdown-field\u003e\n       \u003cdiv class=\"note-form-actions clearfix\"\u003e\n-        \u003cbutton\n-          :disabled=\"isDisabled\"\n-          type=\"button\"\n-          class=\"js-vue-issue-save btn btn-success js-comment-button qa-reply-comment-button\"\n-          @click=\"handleUpdate()\"\n-        \u003e\n-          {{ saveButtonTitle }}\n-        \u003c/button\u003e\n-        \u003cbutton\n-          v-if=\"discussion.resolvable\"\n-          class=\"btn btn-nr btn-default append-right-10 js-comment-resolve-button\"\n-          @click.prevent=\"handleUpdate(true)\"\n-        \u003e\n-          {{ resolveButtonTitle }}\n-        \u003c/button\u003e\n-        \u003cbutton\n-          class=\"btn btn-cancel note-edit-cancel js-close-discussion-note-form\"\n-          type=\"button\"\n-          @click=\"cancelHandler()\"\n-        \u003e\n-          Cancel\n-        \u003c/button\u003e\n+        \u003cp v-if=\"showResolveDiscussionToggle\"\u003e\n+          \u003clabel\u003e\n+            \u003ctemplate v-if=\"discussionResolved\"\u003e\n+              \u003cinput\n+                v-model=\"isUnresolving\"\n+                type=\"checkbox\"\n+                class=\"qa-unresolve-review-discussion\"\n+              /\u003e\n+              {{ __('Unresolve discussion') }}\n+            \u003c/template\u003e\n+            \u003ctemplate v-else\u003e\n+              \u003cinput v-model=\"isResolving\" type=\"checkbox\" class=\"qa-resolve-review-discussion\" /\u003e\n+              {{ __('Resolve discussion') }}\n+            \u003c/template\u003e\n+          \u003c/label\u003e\n+        \u003c/p\u003e\n+        \u003cdiv v-if=\"showBatchCommentsActions\"\u003e\n+          \u003cbutton\n+            :disabled=\"isDisabled\"\n+            type=\"button\"\n+            class=\"btn btn-success qa-start-review\"\n+            @click=\"handleAddToReview\"\n+          \u003e\n+            \u003ctemplate v-if=\"hasDrafts\"\u003e{{ __('Add to review') }}\u003c/template\u003e\n+            \u003ctemplate v-else\u003e{{ __('Start a review') }}\u003c/template\u003e\n+          \u003c/button\u003e\n+          \u003cbutton\n+            :disabled=\"isDisabled\"\n+            type=\"button\"\n+            class=\"btn qa-comment-now\"\n+            @click=\"handleUpdate()\"\n+          \u003e\n+            {{ __('Add comment now') }}\n+          \u003c/button\u003e\n+          \u003cbutton\n+            class=\"btn btn-cancel note-edit-cancel js-close-discussion-note-form\"\n+            type=\"button\"\n+            @click=\"cancelHandler()\"\n+          \u003e\n+            {{ __('Cancel') }}\n+          \u003c/button\u003e\n+        \u003c/div\u003e\n+        \u003ctemplate v-else\u003e\n+          \u003cbutton\n+            :disabled=\"isDisabled\"\n+            type=\"button\"\n+            class=\"js-vue-issue-save btn btn-success js-comment-button qa-reply-comment-button\"\n+            @click=\"handleUpdate()\"\n+          \u003e\n+            {{ saveButtonTitle }}\n+          \u003c/button\u003e\n+          \u003cbutton\n+            v-if=\"discussion.resolvable\"\n+            class=\"btn btn-nr btn-default append-right-10 js-comment-resolve-button\"\n+            @click.prevent=\"handleUpdate(true)\"\n+          \u003e\n+            {{ resolveButtonTitle }}\n+          \u003c/button\u003e\n+          \u003cbutton\n+            class=\"btn btn-cancel note-edit-cancel js-close-discussion-note-form\"\n+            type=\"button\"\n+            @click=\"cancelHandler()\"\n+          \u003e\n+            Cancel\n+          \u003c/button\u003e\n+        \u003c/template\u003e\n       \u003c/div\u003e\n     \u003c/form\u003e\n   \u003c/div\u003e\n```\n\n### What needs to be done\n1. Create a CE counterpart for `noteFormMixin` \n1. Use [`ee_else_ce`](https://docs.gitlab.com/ee/development/ee_features.html#javascript-code-in-assetsjavascripts) to import the mixin into this file. \n1. Move the differences in `handleKeySubmit` \u0026 `handleUpdate` to the mixin\n1. Wrap the template differences with a `v-if` for `renderIfEE` and move it to CE.  \n1. Guarantee that specs exist or are added","state":"closed","created_at":"2019-02-25T16:15:03.906Z","updated_at":"2019-08-12T15:06:16.413Z","closed_at":"2019-05-03T07:39:55.422Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Create [DEPRECATED]","Deliverable","Enterprise Edition","devops::create","frontend","single codebase"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":3046722,"username":"sbigelow","name":"Sam Bigelow","state":"active","avatar_url":"https://secure.gravatar.com/avatar/469286018ddff635b600def386a5281f?s=80\u0026d=identicon","web_url":"https://gitlab.com/sbigelow"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":3046722,"username":"sbigelow","name":"Sam Bigelow","state":"active","avatar_url":"https://secure.gravatar.com/avatar/469286018ddff635b600def386a5281f?s=80\u0026d=identicon","web_url":"https://gitlab.com/sbigelow"},"user_notes_count":1,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9971","time_stats":{"time_estimate":7200,"total_time_spent":0,"human_time_estimate":"2h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9971","notes":"https://gitlab.com/api/v4/projects/278964/issues/9971/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9971/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9971","relative":"#9971","full":"gitlab-org/gitlab#9971"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18584588,"iid":9969,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/notes/components/note_header.vue`","description":"The file `app/assets/javascripts/notes/components/note_header.vue` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/notes/components/note_header.vue b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/notes/components/note_header.vue\nindex 7b39901024d..68b753a4abf 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/notes/components/note_header.vue\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/notes/components/note_header.vue\n@@ -69,7 +69,7 @@ export default {\n         type=\"button\"\n         @click=\"handleToggle\"\n       \u003e\n-        \u003ci :class=\"toggleChevronClass\" class=\"fa\" aria-hidden=\"true\"\u003e \u003c/i\u003e\n+        \u003ci :class=\"toggleChevronClass\" class=\"fa\" aria-hidden=\"true\"\u003e\u003c/i\u003e\n         {{ __('Toggle discussion') }}\n       \u003c/button\u003e\n     \u003c/div\u003e\n@@ -81,19 +81,18 @@ export default {\n       :data-user-id=\"author.id\"\n       :data-username=\"author.username\"\n     \u003e\n+      \u003cslot name=\"note-header-info\"\u003e\u003c/slot\u003e\n       \u003cspan class=\"note-header-author-name\"\u003e{{ author.name }}\u003c/span\u003e\n       \u003cspan v-if=\"author.status_tooltip_html\" v-html=\"author.status_tooltip_html\"\u003e\u003c/span\u003e\n-      \u003cspan class=\"note-headline-light\"\u003e @{{ author.username }} \u003c/span\u003e\n+      \u003cspan class=\"note-headline-light\"\u003e@{{ author.username }}\u003c/span\u003e\n     \u003c/a\u003e\n-    \u003cspan v-else\u003e {{ __('A deleted user') }} \u003c/span\u003e\n+    \u003cspan v-else\u003e{{ __('A deleted user') }}\u003c/span\u003e\n     \u003cspan class=\"note-headline-light\"\u003e\n       \u003cspan class=\"note-headline-meta\"\u003e\n         \u003cspan class=\"system-note-message\"\u003e \u003cslot\u003e\u003c/slot\u003e \u003c/span\u003e\n         \u003ctemplate v-if=\"createdAt\"\u003e\n           \u003cspan class=\"system-note-separator\"\u003e\n-            \u003ctemplate v-if=\"actionText\"\u003e\n-              {{ actionText }}\n-            \u003c/template\u003e\n+            \u003ctemplate v-if=\"actionText\"\u003e{{ actionText }}\u003c/template\u003e\n           \u003c/span\u003e\n           \u003ca\n             :href=\"noteTimestampLink\"\n@@ -107,8 +106,7 @@ export default {\n           class=\"fa fa-spinner fa-spin editing-spinner\"\n           aria-label=\"Comment is being updated\"\n           aria-hidden=\"true\"\n-        \u003e\n-        \u003c/i\u003e\n+        \u003e\u003c/i\u003e\n       \u003c/span\u003e\n     \u003c/span\u003e\n   \u003c/div\u003e\n```\n\n### What needs to be done\n1. `\u003ci :class=\"toggleChevronClass\" class=\"fa\" aria-hidden=\"true\"\u003e\u003c/i\u003e` should be the same in both files.\n1. `\u003cslot name=\"note-header-info\"\u003e\u003c/slot\u003e` should have a `v-if` with `renderIfEE` and moved to CE\n1. `\u003cspan class=\"note-headline-light\"\u003e@{{ author.username }}\u003c/span\u003e` should be the same in both files\n1. ` \u003cspan v-else\u003e{{ __('A deleted user') }}\u003c/span\u003e` should be the same in both files.\n1. `\u003ctemplate v-if=\"actionText\"\u003e{{ actionText }}\u003c/template\u003e` should be the same in both files.\n1. `\u003e\u003c/i\u003e` should be the same in both files.","state":"closed","created_at":"2019-02-25T16:11:23.559Z","updated_at":"2019-08-12T15:06:16.416Z","closed_at":"2019-03-01T10:24:05.937Z","closed_by":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"labels":["Create [DEPRECATED]","Enterprise Edition","Plan [DEPRECATED]","frontend","single codebase"],"milestone":null,"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":0,"merge_requests_count":3,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9969","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9969","notes":"https://gitlab.com/api/v4/projects/278964/issues/9969/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9969/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9969","relative":"#9969","full":"gitlab-org/gitlab#9969"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18584480,"iid":9968,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/notes/components/note_body.vue`","description":"The file `app/assets/javascripts/notes/components/note_body.vue` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/notes/components/note_body.vue b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/notes/components/note_body.vue\nindex bcf5d334da4..82b6cd35ec2 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/notes/components/note_body.vue\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/notes/components/note_body.vue\n@@ -1,5 +1,5 @@\n \u003cscript\u003e\n-import { mapActions } from 'vuex';\n+import { mapGetters, mapActions } from 'vuex';\n import $ from 'jquery';\n import noteEditedText from './note_edited_text.vue';\n import noteAwardsList from './note_awards_list.vue';\n@@ -43,6 +43,7 @@ export default {\n     },\n   },\n   computed: {\n+    ...mapGetters(['getDiscussion']),\n     noteBody() {\n       return this.note.note;\n     },\n@@ -52,6 +53,11 @@ export default {\n     lineType() {\n       return this.line ? this.line.type : null;\n     },\n+    discussion() {\n+      if (!this.note.isDraft) return {};\n+\n+      return this.getDiscussion(this.note.discussion_id);\n+    },\n   },\n   mounted() {\n     this.renderGFM();\n@@ -76,8 +82,8 @@ export default {\n     renderGFM() {\n       $(this.$refs['note-body']).renderGFM();\n     },\n-    handleFormUpdate(note, parentElement, callback) {\n-      this.$emit('handleFormUpdate', note, parentElement, callback);\n+    handleFormUpdate(note, parentElement, callback, resolveDiscussion) {\n+      this.$emit('handleFormUpdate', note, parentElement, callback, resolveDiscussion);\n     },\n     formCancelHandler(shouldConfirm, isDirty) {\n       this.$emit('cancelForm', shouldConfirm, isDirty);\n@@ -112,6 +118,8 @@ export default {\n       :note=\"note\"\n       :help-page-path=\"helpPagePath\"\n       :markdown-version=\"note.cached_markdown_version\"\n+      :discussion=\"discussion\"\n+      :resolve-discussion=\"note.resolve_discussion\"\n       @handleFormUpdate=\"handleFormUpdate\"\n       @cancelForm=\"formCancelHandler\"\n     /\u003e\n```\n\n### What needs to be done\n1. Create a EE mixin in the `/ee` folder for the differences in the script tag.\n1. Create a CE counterpart of that mixin with a computed prop for `discussion` that returns an empty object and the `handleFormUpdate`\n1. Create a computed prop for `note.resolve_discussion` in both mixins, the one in CE should be empty.\n1. Move the template differences to CE\n1. Guarantee that specs exist or are added","state":"closed","created_at":"2019-02-25T16:06:38.009Z","updated_at":"2019-08-12T15:06:16.391Z","closed_at":"2019-04-09T08:11:38.079Z","closed_by":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"labels":["Create [DEPRECATED]","Deliverable","Enterprise Edition","devops::create","frontend","single codebase"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":1,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9968","time_stats":{"time_estimate":14400,"total_time_spent":0,"human_time_estimate":"4h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9968","notes":"https://gitlab.com/api/v4/projects/278964/issues/9968/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9968/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9968","relative":"#9968","full":"gitlab-org/gitlab#9968"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24690088,"iid":26961,"project_id":278964,"title":"Preserve verbatim appendix in Apache 2.0 license template","description":"### Summary\n\nWhen selecting Apache 2.0 as a license template, the text `Copyright [yyyy] [name of copyright owner]` in the appendix should not be automatically populated.\n\n### Steps to reproduce\n\n* Select the \"New File\" option in a repository.\n* Select \"License\" as the template type.\n* Select \"Apache License 2.0\" as the license.\n\n### What is the current *bug* behavior?\n\nIn the text `Copyright [yyyy] [name of copyright owner]` in the appendix of the license, `[yyyy]` is replaced with the current year and `[name of copyright owner]` is replaced with the name of the project owner.\n\n### What is the expected *correct* behavior?\n\nAs the appendix of the Apache 2.0 license is simply instructions for applying the license, the text `Copyright [yyyy] [name of copyright owner]` should remain as it is. The copyright notice for the project should be added elsewhere.","state":"closed","created_at":"2019-02-25T15:15:23.664Z","updated_at":"2022-10-31T03:03:59.893Z","closed_at":"2022-10-31T03:03:59.868Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"🤖 GitLab Bot 🤖","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["Create [DEPRECATED]","[deprecated] Accepting merge requests","auto closed","devops::create","good for new contributors","priority::4","section::dev","severity::4","stale","type::bug","vintage"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":1948861,"username":"alf-eaton","name":"Alf Eaton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1948861/avatar.png","web_url":"https://gitlab.com/alf-eaton"},"type":"ISSUE","assignee":null,"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/26961","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/26961","notes":"https://gitlab.com/api/v4/projects/278964/issues/26961/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/26961/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#26961","relative":"#26961","full":"gitlab-org/gitlab#26961"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18579714,"iid":9962,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/notes/components/note_actions.vue`","description":"The file `app/assets/javascripts/notes/components/note_actions.vue` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/notes/components/note_actions.vue b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/notes/components/note_actions.vue\nindex d99694b06e9..da78e4605d4 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/notes/components/note_actions.vue\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/notes/components/note_actions.vue\n@@ -2,6 +2,7 @@\n import { mapGetters } from 'vuex';\n import Icon from '~/vue_shared/components/icon.vue';\n import { GlLoadingIcon, GlTooltipDirective } from '@gitlab/ui';\n+import resolvedStatusMixin from 'ee/batch_comments/mixins/resolved_status';\n \n export default {\n   name: 'NoteActions',\n@@ -12,6 +13,7 @@ export default {\n   directives: {\n     GlTooltip: GlTooltipDirective,\n   },\n+  mixins: [resolvedStatusMixin],\n   props: {\n     authorId: {\n       type: Number,\n@@ -93,6 +95,8 @@ export default {\n       return this.getUserDataByProp('id');\n     },\n     resolveButtonTitle() {\n+      if (this.discussionId) return this.resolvedStatusMessage;\n+\n       let title = 'Mark as resolved';\n \n       if (this.resolvedBy) {\n@@ -113,6 +117,7 @@ export default {\n       this.$emit('handleResolve');\n     },\n   },\n+  showStaysResolved: true,\n };\n \u003c/script\u003e\n```\n\n### What needs to be done\n1. Create an empty CE counterpart for `resolvedStatusMixin`\n1. Use [`ee_else_ce`](https://docs.gitlab.com/ee/development/ee_features.html#javascript-code-in-assetsjavascripts) to import the mixin into this file.\n1. Create a computedProp for `resolveButtonTitle` in the EE mixin and move the extra code there.\n1. Delete `showStaysResolved`, it's not being used\n1. Guarantee that specs exist or are added","state":"closed","created_at":"2019-02-25T14:59:33.762Z","updated_at":"2019-08-12T15:06:17.719Z","closed_at":"2019-05-01T17:44:50.622Z","closed_by":{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"},"labels":["Create [DEPRECATED]","Deliverable","Enterprise Edition","devops::create","frontend","single codebase"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9962","time_stats":{"time_estimate":7200,"total_time_spent":0,"human_time_estimate":"2h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9962","notes":"https://gitlab.com/api/v4/projects/278964/issues/9962/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9962/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9962","relative":"#9962","full":"gitlab-org/gitlab#9962"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24690056,"iid":26952,"project_id":278964,"title":"GitHub Import: Line specific MR comments on discussion tab are empty","description":"### Summary\n\nOn GitHub import, any comments/reviews on a PR on specific lines are displayed as empty on the `Discussion` tab on the MR. They are correctly shown on `Changes` tab.\n\n### Steps to reproduce\n\n1) Create a new project by importing from GitHub. \n2) Use the personal access token in 1Password for `gitlab-qa` GitHub user to list GitHub repositories. \n3) Import the `test-project`\n4) After the import, navigate to MRs of the imported project.\n\nNote that the discussions are empty. \n\n### Example Project\n\nOn Gitlab.com, I am not able to import the project and getting this on the UI:\n\n`An error occurred while importing project: Error: Request failed with status code 422` \n\n(This could be a separate bug on GitLab.com)\n\n### What is the current *bug* behavior?\n\nLine specific comments/reviews on a PR are empty on the `Discussion` tab. \n\n### What is the expected *correct* behavior?\n\nThe discussions should have the correct text. \n\n### Relevant logs and/or screenshots\n\nEmpty discussions: \n\n![Screenshot_2019-02-25_18.12.28](/uploads/434de7cb41d835b7f459f101a44df3af/Screenshot_2019-02-25_18.12.28.png)\n\nThis is from the github repo at https://github.com/gitlab-qa/test-project/pull/2:\n\n![Screenshot_2019-02-25_18.11.41](/uploads/4937a11c6e0507aa8d391793a696a527/Screenshot_2019-02-25_18.11.41.png)\n\n### Output of checks\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\nSystem information\nSystem:\nCurrent User:\tsanadliaquat\nUsing RVM:\tyes\nRVM Version:\t1.29.7\nRuby Version:\t2.5.3p105\nGem Version:\t2.7.8\nBundler Version:1.16.6\nRake Version:\t12.3.2\nRedis Version:\t5.0.3\nGit Version:\t2.20.1\nSidekiq Version:5.2.5\nGo Version:\tgo1.11.4 darwin/amd64\n\nGitLab information\nVersion:\t11.9.0-pre\nRevision:\te8d23f62fff\nDirectory:\t/Users/sanadliaquat/work/gitlab/gdk-ce/gitlab\nDB Adapter:\tpostgresql\nURL:\t\thttp://localhost:3000\nHTTP Clone URL:\thttp://localhost:3000/some-group/some-project.git\nSSH Clone URL:\tssh://sanadliaquat@localhost:2222/some-group/some-project.git\nUsing LDAP:\tno\nUsing Omniauth:\tyes\nOmniauth Providers: github\n\nGitLab Shell\nVersion:\t8.6.0\nRepository storage paths:\n- default: \t/Users/sanadliaquat/work/gitlab/gdk-ce/repositories\nHooks:\t\t/Users/sanadliaquat/work/gitlab/gdk-ce/gitlab-shell/hooks\nGit:\t\t/usr/local/bin/git\n\n\u003c/pre\u003e\n\u003c/details\u003e","state":"closed","created_at":"2019-02-25T13:33:13.116Z","updated_at":"2021-06-10T10:12:45.402Z","closed_at":"2020-10-29T17:34:53.284Z","closed_by":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"labels":["Category:Importers","DEPRECATED_project import","Deliverable","Github","Importer:GitHub","customer","devops::create","estimation::completed","group::source code","missed-SLO","missed-deliverable","missed:11.11","missed:12.9","movingtogitlab","priority::3","regression","regression:11.8","section::dev","severity::2","type::bug"],"milestone":{"id":1233755,"iid":53,"group_id":9970,"title":"13.6","description":"https://about.gitlab.com/releases/2020/11/22/gitlab-13-6-released/","state":"closed","created_at":"2020-04-09T17:39:22.328Z","updated_at":"2022-04-13T14:51:04.376Z","due_date":"2020-11-17","start_date":"2020-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/53"},"assignees":[{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"}],"author":{"id":2632430,"username":"sliaquat","name":"Sanad Liaquat","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2632430/avatar.png","web_url":"https://gitlab.com/sliaquat"},"type":"ISSUE","assignee":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"user_notes_count":55,"merge_requests_count":0,"upvotes":7,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/26952","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/26952","notes":"https://gitlab.com/api/v4/projects/278964/issues/26952/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/26952/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#26952","relative":"#26952","full":"gitlab-org/gitlab#26952"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3050,"epic":{"id":39430,"iid":3050,"title":"🐞 GitHub Importer bugs","url":"/groups/gitlab-org/-/epics/3050","group_id":9970},"iteration":null,"health_status":null},{"id":18573043,"iid":9959,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/notes/components/noteable_discussion.vue`","description":"The file `app/assets/javascripts/notes/components/noteable_discussion.vue` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/notes/components/noteable_discussion.vue b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/notes/components/noteable_discussion.vue\nindex 695efe3602f..ce843a7bb4b 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/notes/components/noteable_discussion.vue\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/notes/components/noteable_discussion.vue\n@@ -6,6 +6,8 @@ import { truncateSha } from '~/lib/utils/text_utility';\n import { s__, __, sprintf } from '~/locale';\n import systemNote from '~/vue_shared/components/notes/system_note.vue';\n import icon from '~/vue_shared/components/icon.vue';\n+import batchCommentsDiffLineNoteFormMixin from 'ee/batch_comments/mixins/diff_line_note_form';\n+import DraftNote from 'ee/batch_comments/components/draft_note.vue';\n import TimelineEntryItem from '~/vue_shared/components/notes/timeline_entry_item.vue';\n import Flash from '../../flash';\n import { SYSTEM_NOTE } from '../constants';\n@@ -42,12 +44,19 @@ export default {\n     placeholderNote,\n     placeholderSystemNote,\n     systemNote,\n+    DraftNote,\n     TimelineEntryItem,\n   },\n   directives: {\n     GlTooltip: GlTooltipDirective,\n   },\n-  mixins: [autosave, noteable, resolvable, discussionNavigation],\n+  mixins: [\n+    autosave,\n+    noteable,\n+    resolvable,\n+    discussionNavigation,\n+    batchCommentsDiffLineNoteFormMixin,\n+  ],\n   props: {\n     discussion: {\n       type: Object,\n@@ -85,6 +94,7 @@ export default {\n     return {\n       isReplying: false,\n       isResolving: false,\n+      isUnresolving: false,\n       resolveAsThread: true,\n       isRepliesCollapsed: Boolean(!isDiffDiscussion \u0026\u0026 resolved),\n     };\n@@ -440,8 +450,13 @@ Please check your network connection and try again.`;\n                   \u003c/component\u003e\n                 \u003c/template\u003e\n               \u003c/ul\u003e\n+              \u003cdraft-note\n+                v-if=\"showDraft(discussion.reply_id)\"\n+                :key=\"`draft_${discussion.id}`\"\n+                :draft=\"draftForDiscussion(discussion.reply_id)\"\n+              /\u003e\n               \u003cdiv\n-                v-if=\"!isRepliesCollapsed || !hasReplies\"\n+                v-else-if=\"!isRepliesCollapsed || !hasReplies\"\n                 :class=\"{ 'is-replying': isReplying }\"\n                 class=\"discussion-reply-holder\"\n               \u003e\n@@ -490,6 +505,7 @@ Please check your network connection and try again.`;\n                   :is-editing=\"false\"\n                   :line=\"diffLine\"\n                   save-button-title=\"Comment\"\n+                  @handleFormUpdateAddToReview=\"addReplyToReview\"\n                   @handleFormUpdate=\"saveReply\"\n                   @cancelForm=\"cancelReplyForm\"\n                 /\u003e\n```\n\n### What needs to be done\n1. Create a CE counterpart of `batchCommentsDiffLineNoteFormMixin` with an empty method for `addReplyToReview`\n2. Use [`ee_else_ce`](https://docs.gitlab.com/ee/development/ee_features.html#javascript-code-in-assetsjavascripts) to import the mixin into this file.\n3. Async load the `DraftNote` component with:\n```\n{\n  components: {\n    'ee-component': () =\u003e this.renderIfEE ? import('./ee-component.vue') : import('vue_shared/compoments/empty_ce_vue_component.vue')\n  }\n}\n\n```\n4. Keep `v-else-if=\"!isRepliesCollapsed || !hasReplies\"` \u0026 `@handleFormUpdateAddToReview=\"addReplyToReview\"` in CE\n5. Delete `isUnresolving`, it is not used in this component.\n6. Guarantee that specs exist or are added","state":"closed","created_at":"2019-02-25T12:57:24.032Z","updated_at":"2019-08-12T15:06:17.774Z","closed_at":"2019-02-28T15:32:17.210Z","closed_by":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"labels":["Create [DEPRECATED]","Enterprise Edition","Plan [DEPRECATED]","frontend","single codebase"],"milestone":null,"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":0,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9959","time_stats":{"time_estimate":14400,"total_time_spent":0,"human_time_estimate":"4h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9959","notes":"https://gitlab.com/api/v4/projects/278964/issues/9959/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9959/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9959","relative":"#9959","full":"gitlab-org/gitlab#9959"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18572895,"iid":9958,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/monitoring/components/graph/flag.vue`","description":"The file `app/assets/javascripts/monitoring/components/graph/flag.vue` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/monitoring/components/graph/flag.vue b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/monitoring/components/graph/flag.vue\nindex 9d6d1caef80..734a4eb5063 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/monitoring/components/graph/flag.vue\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/monitoring/components/graph/flag.vue\n@@ -121,11 +121,11 @@ export default {\n     \u003cdiv v-if=\"showFlagContent\" :class=\"flagOrientation\" class=\"prometheus-graph-flag popover\"\u003e\n       \u003cdiv class=\"arrow-shadow\"\u003e\u003c/div\u003e\n       \u003cdiv class=\"arrow\"\u003e\u003c/div\u003e\n-      \u003cdiv class=\"popover-title\"\u003e\n+      \u003cdiv class=\"popover-header\"\u003e\n         \u003ch5 v-if=\"deploymentFlagData\"\u003eDeployed\u003c/h5\u003e\n         {{ formatDate }} \u003cstrong\u003e{{ formatTime }}\u003c/strong\u003e\n       \u003c/div\u003e\n-      \u003cdiv v-if=\"deploymentFlagData\" class=\"popover-content deploy-meta-content\"\u003e\n+      \u003cdiv v-if=\"deploymentFlagData\" class=\"popover-body deploy-meta-content\"\u003e\n         \u003cdiv\u003e\n           \u003cicon :size=\"12\" name=\"commit\" /\u003e\n           \u003ca :href=\"deploymentFlagData.commitUrl\"\u003e {{ deploymentFlagData.sha.slice(0, 8) }} \u003c/a\u003e\n@@ -135,7 +135,7 @@ export default {\n           \u003ca :href=\"deploymentFlagData.tagUrl\"\u003e {{ deploymentFlagData.ref }} \u003c/a\u003e\n         \u003c/div\u003e\n       \u003c/div\u003e\n-      \u003cdiv class=\"popover-content\"\u003e\n+      \u003cdiv class=\"popover-body\"\u003e\n         \u003ctable class=\"prometheus-table\"\u003e\n           \u003ctr v-for=\"(series, index) in timeSeries\" :key=\"index\"\u003e\n             \u003ctrack-line :track=\"series\" /\u003e\n```\n\n### What needs to be done\n1. We should not have Style differences between CE and EE, update both files to have the same CSS classes.","state":"closed","created_at":"2019-02-25T12:51:46.108Z","updated_at":"2019-08-12T15:06:21.489Z","closed_at":"2019-02-26T02:52:56.116Z","closed_by":{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"},"labels":["Enterprise Edition","devops::monitor","frontend","single codebase"],"milestone":null,"assignees":[{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9958","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9958","notes":"https://gitlab.com/api/v4/projects/278964/issues/9958/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9958/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9958","relative":"#9958","full":"gitlab-org/gitlab#9958"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18572768,"iid":9957,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/monitoring/components/dashboard.vue `","description":"The file `app/assets/javascripts/monitoring/components/dashboard.vue` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/monitoring/components/dashboard.vue b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/monitoring/components/dashboard.vue\nindex cea5c1a56ca..9e2b84d2d1d 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/monitoring/components/dashboard.vue\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/monitoring/components/dashboard.vue\n@@ -1,4 +1,7 @@\n \u003cscript\u003e\n+// ee-only\n+import DashboardMixin from 'ee/monitoring/components/dashboard_mixin';\n+\n import _ from 'underscore';\n import { s__ } from '~/locale';\n import Icon from '~/vue_shared/components/icon.vue';\n@@ -19,6 +22,10 @@ export default {\n     EmptyState,\n     Icon,\n   },\n+\n+  // ee-only\n+  mixins: [DashboardMixin],\n+\n   props: {\n     hasMetrics: {\n       type: Boolean,\n@@ -93,6 +100,11 @@ export default {\n       type: String,\n       required: true,\n     },\n+    showEnvironmentDropdown: {\n+      type: Boolean,\n+      required: false,\n+      default: true,\n+    },\n   },\n   data() {\n     return {\n@@ -131,9 +143,29 @@ export default {\n   },\n   mounted() {\n     this.resizeThrottled = _.debounce(this.resize, 100);\n+    this.servicePromises = [\n+      this.service\n+        .getGraphsData()\n+        .then(data =\u003e this.store.storeMetrics(data))\n+        .catch(() =\u003e Flash(s__('Metrics|There was an error while retrieving metrics'))),\n+      this.service\n+        .getDeploymentData()\n+        .then(data =\u003e this.store.storeDeploymentData(data))\n+        .catch(() =\u003e Flash(s__('Metrics|There was an error getting deployment information.'))),\n+    ];\n     if (!this.hasMetrics) {\n       this.state = 'gettingStarted';\n     } else {\n+      if (this.showEnvironmentDropdown) {\n+        this.servicePromises.push(\n+          this.service\n+            .getEnvironmentsData()\n+            .then(data =\u003e this.store.storeEnvironmentsData(data))\n+            .catch(() =\u003e\n+              Flash(s__('Metrics|There was an error getting environments information.')),\n+            ),\n+        );\n+      }\n       this.getGraphsData();\n       window.addEventListener('resize', this.resizeThrottled, false);\n \n@@ -149,17 +181,7 @@ export default {\n     },\n     getGraphsData() {\n       this.state = 'loading';\n-      Promise.all([\n-        this.service.getGraphsData().then(data =\u003e this.store.storeMetrics(data)),\n-        this.service\n-          .getDeploymentData()\n-          .then(data =\u003e this.store.storeDeploymentData(data))\n-          .catch(() =\u003e Flash(s__('Metrics|There was an error getting deployment information.'))),\n-        this.service\n-          .getEnvironmentsData()\n-          .then(data =\u003e this.store.storeEnvironmentsData(data))\n-          .catch(() =\u003e Flash(s__('Metrics|There was an error getting environments information.'))),\n-      ])\n+      Promise.all(this.servicePromises)\n         .then(() =\u003e {\n           if (this.store.groups.length \u003c 1) {\n             this.state = 'noData';\n@@ -185,7 +207,7 @@ export default {\n \n \u003ctemplate\u003e\n   \u003cdiv v-if=\"!showEmptyState\" :key=\"forceRedraw\" class=\"prometheus-graphs prepend-top-default\"\u003e\n-    \u003cdiv class=\"environments d-flex align-items-center\"\u003e\n+    \u003cdiv v-if=\"showEnvironmentDropdown\" class=\"environments d-flex align-items-center\"\u003e\n       {{ s__('Metrics|Environment') }}\n       \u003cdiv class=\"dropdown prepend-left-10\"\u003e\n         \u003cbutton class=\"dropdown-menu-toggle\" data-toggle=\"dropdown\" type=\"button\"\u003e\n@@ -230,7 +252,24 @@ export default {\n         group-id=\"monitor-area-chart\"\n       \u003e\n         \u003c!-- EE content --\u003e\n-        {{ null }}\n+        \u003ctemplate slot=\"additionalSvgContent\" scope=\"{ graphDrawData }\"\u003e\n+          \u003cthreshold-lines\n+            v-for=\"(alert, alertName) in alertData[graphData.id]\"\n+            :key=\"alertName\"\n+            :operator=\"alert.operator\"\n+            :threshold=\"alert.threshold\"\n+            :graph-draw-data=\"graphDrawData\"\n+          /\u003e\n+        \u003c/template\u003e\n+        \u003calert-widget\n+          v-if=\"alertsEndpoint \u0026\u0026 graphData.id\"\n+          :alerts-endpoint=\"alertsEndpoint\"\n+          :label=\"getGraphLabel(graphData)\"\n+          :current-alerts=\"getQueryAlerts(graphData)\"\n+          :custom-metric-id=\"graphData.id\"\n+          :alert-data=\"alertData[graphData.id]\"\n+          @setAlerts=\"setAlerts\"\n+        /\u003e\n       \u003c/component\u003e\n     \u003c/graph-group\u003e\n   \u003c/div\u003e\n```\n### What needs to be done\n\n1. Create an empty CE counterpart of the `import DashboardMixin from 'ee/monitoring/components/dashboard_mixin';`\n2. Use [`ee_else_ce`](https://docs.gitlab.com/ee/development/ee_features.html#javascript-code-in-assetsjavascripts) to import the `DashboardMixin`.\n3. Move all differences in `script` tag to the EE mixin\n4. For the differences in the templates, use `v-if=\"renderIfEE\"`\n3. Guarantee that specs exist or are added","state":"closed","created_at":"2019-02-25T12:47:55.324Z","updated_at":"2019-08-12T15:06:21.484Z","closed_at":"2019-03-28T10:08:13.626Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Deliverable","Enterprise Edition","devops::monitor","frontend","single codebase"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"user_notes_count":1,"merge_requests_count":2,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9957","time_stats":{"time_estimate":14400,"total_time_spent":0,"human_time_estimate":"4h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9957","notes":"https://gitlab.com/api/v4/projects/278964/issues/9957/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9957/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9957","relative":"#9957","full":"gitlab-org/gitlab#9957"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18572434,"iid":9956,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/projects/project_new.js`","description":"The file `app/assets/javascripts/projects/project_new.js` has differences between CE and EE.\n\n### Diferences\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/projects/project_new.js b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/projects/project_new.js\nindex 998554d1be5..0105a4d919e 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/projects/project_new.js\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/projects/project_new.js\n@@ -161,6 +161,12 @@ const bindEvents = () =\u003e {\n \n   $projectImportUrl.keyup(() =\u003e deriveProjectPathFromUrl($projectImportUrl));\n \n+  $('.js-import-git-toggle-button').on('click', () =\u003e {\n+    const $projectMirror = $('#project_mirror');\n+\n+    $projectMirror.attr('disabled', !$projectMirror.attr('disabled'));\n+  });\n+\n   $projectName.on('keyup change', () =\u003e {\n     onProjectNameChange($projectName, $projectPath);\n     hasUserDefinedProjectPath = $projectPath.val().trim().length \u003e 0;\n\n```\n\n### What needs to be done\n1. Import `renderIfEE` from `common_utils`\n2. Wrap the extra EE code in an `if` statement\n3. Guarantee that specs exist or are added","state":"closed","created_at":"2019-02-25T12:37:26.188Z","updated_at":"2022-05-19T16:12:47.000Z","closed_at":"2019-05-09T12:26:27.244Z","closed_by":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"labels":["Enterprise Edition","backstage [DEPRECATED]","devops::plan","frontend"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9956","time_stats":{"time_estimate":3600,"total_time_spent":0,"human_time_estimate":"1h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9956","notes":"https://gitlab.com/api/v4/projects/278964/issues/9956/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9956/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9956","relative":"#9956","full":"gitlab-org/gitlab#9956"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18572090,"iid":9954,"project_id":278964,"title":"Move EE differences for `app/assets/javascripts/sidebar/components/todo_toggle/todo.vue`","description":"The file `app/assets/javascripts/sidebar/components/todo_toggle/todo.vue` has differences between CE and EE.\n\n### Differences:\n\n```diff\ndiff --git a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/sidebar/components/todo_toggle/todo.vue b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/sidebar/components/todo_toggle/todo.vue\nindex 706e6ca19c3..57125c78cf6 100644\n--- a/home/yorickpeterse/Projects/gitlab/gdk-ce/gitlab/app/assets/javascripts/sidebar/components/todo_toggle/todo.vue\n+++ b/home/yorickpeterse/Projects/gitlab/gdk-ee/gitlab/app/assets/javascripts/sidebar/components/todo_toggle/todo.vue\n@@ -50,6 +50,9 @@ export default {\n     buttonLabel() {\n       return this.isTodo ? MARK_TEXT : TODO_TEXT;\n     },\n+    buttonTooltip() {\n+      return !this.collapsed ? undefined : this.buttonLabel;\n+    },\n     collapsedButtonIconClasses() {\n       return this.isTodo ? 'todo-undone' : '';\n     },\n@@ -69,7 +72,7 @@ export default {\n   \u003cbutton\n     v-tooltip\n     :class=\"buttonClasses\"\n-    :title=\"buttonLabel\"\n+    :title=\"buttonTooltip\"\n     :aria-label=\"buttonLabel\"\n     :data-issuable-id=\"issuableId\"\n     :data-issuable-type=\"issuableType\"\n\n```\n\n### What needs to be done:\n1. Create a mixin for `buttonTooltip` computed property in the `EE` folder.\n2. Create a CE mixin counterpart, with the same name.\n3. In CE the `buttonTooltip` should return `buttonLabel` content.\n4. Use [`ee_else_ce`](https://docs.gitlab.com/ee/development/ee_features.html#javascript-code-in-assetsjavascripts) to import the mixin into this file.\n5. Guarantee that specs exist or are added\n\n\nFull [plan](https://gitlab.com/gitlab-org/gitlab-ee/issues/8711).","state":"closed","created_at":"2019-02-25T12:23:15.997Z","updated_at":"2022-05-19T16:12:46.684Z","closed_at":"2019-04-04T08:21:36.382Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Enterprise Edition","devops::plan","frontend","single codebase"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"}],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":2,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9954","time_stats":{"time_estimate":14400,"total_time_spent":0,"human_time_estimate":"4h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9954","notes":"https://gitlab.com/api/v4/projects/278964/issues/9954/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9954/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9954","relative":"#9954","full":"gitlab-org/gitlab#9954"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":601,"epic":{"id":2297,"iid":601,"title":"Move all EE specific frontend code behind an EE flag","url":"/groups/gitlab-org/-/epics/601","group_id":9970,"human_readable_end_date":"May 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18571915,"iid":9953,"project_id":278964,"title":"Drop DEP_SCAN_DISABLE_REMOTE_CHECKS flag variable support for Dependency Scanning jobs","description":"### Proposal\n\nRemove `DEP_SCAN_DISABLE_REMOTE_CHECKS` flag variable support in **Auto DevOps** and **vendored CI/CD job templates** in %\"12.0\".\n\n### Execution\n\n- ~~[X] Remove support from code of the [Dependency Scanning](https://gitlab.com/gitlab-org/security-products/dependency-scanning) project~~ Done in %\"12.5\" \n- ~~[X] Remove support from [Auto DevOps template](https://gitlab.com/gitlab-org/gitlab-ce/blob/c39e094bc863180e351d36207b98b1680c4c8e5d/lib/gitlab/ci/templates/Auto-DevOps.gitlab-ci.yml#L559)~~ No longer necessary since Auto-Devops now uses the vendored template.\n- [x] Remove support from vendored template for Dependency Scanning: https://gitlab.com/gitlab-org/gitlab/merge_requests/20982\n- ~~[X] Remove mention of `DEP_SCAN_DISABLE_REMOTE_CHECKS` from [README](https://gitlab.com/gitlab-org/security-products/dependency-scanning/blob/98cf8a3e324bd462e03a137a818e6c5996f4acd9/README.md#remote-checks) of the Dependency Scanning project~~ Done in %\"12.5\"\n\n### Product\n [ ] [release post](https://gitlab.com/gitlab-com/www-gitlab-com/merge_requests/36384)","state":"closed","created_at":"2019-02-25T12:15:42.815Z","updated_at":"2019-12-18T11:32:54.708Z","closed_at":"2019-12-12T17:20:21.295Z","closed_by":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","backend","backstage [DEPRECATED]","breaking change","deprecation","devops::secure","group::composition analysis","missed-deliverable","missed:12.4","missed:12.5","release post item","workflow::verification"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"}],"author":{"id":3337413,"username":"vzagorodny","name":"Victor Zagorodny","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/56410d67aa18e03b13e1585d436bf313?s=80\u0026d=identicon","web_url":"https://gitlab.com/vzagorodny"},"type":"ISSUE","assignee":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"user_notes_count":21,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9953","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9953","notes":"https://gitlab.com/api/v4/projects/278964/issues/9953/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9953/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9953","relative":"#9953","full":"gitlab-org/gitlab#9953"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1914,"epic":{"id":12353,"iid":1914,"title":"Drop Gemnasium server side architecture","url":"/groups/gitlab-org/-/epics/1914","group_id":9970,"human_readable_end_date":"Dec 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18568046,"iid":9951,"project_id":278964,"title":"Sync using snapshots does not work correctly","description":"I observed this on my local setup so it's possible that this is not true but before I start digging deeper I would like anybody confirmed it.\n\n### How to reproduce\n\nEnsure the secondary uses snapshotted syncing:\n\n```ruby\n--- a/ee/app/services/geo/base_sync_service.rb\n+++ b/ee/app/services/geo/base_sync_service.rb\n@@ -51,7 +51,7 @@ module Geo\n\n       registry.start_sync!(type)\n\n-      if redownload?\n+      if true#redownload?\n         redownload_repository\n         schedule_repack\n       elsif repository.exists?\n```\n\n### Outcome\n\nWhat I see now is that sync is successful but the repository is not really synced.\n\n@geo\\-team Can anybody confirm?","state":"closed","created_at":"2019-02-25T10:01:29.465Z","updated_at":"2019-12-11T20:03:16.261Z","closed_at":"2019-02-25T13:53:32.004Z","closed_by":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"labels":["Enterprise Edition","devops::systems","group::geo","regression","type::bug"],"milestone":{"id":523180,"iid":18,"group_id":9970,"title":"11.9","description":"https://about.gitlab.com/releases/2019/03/22/gitlab-11-9-released/","state":"closed","created_at":"2018-05-09T14:56:19.024Z","updated_at":"2020-04-30T19:56:35.917Z","due_date":"2019-03-22","start_date":"2019-02-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/18"},"assignees":[],"author":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9951","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9951","notes":"https://gitlab.com/api/v4/projects/278964/issues/9951/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9951/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9951","relative":"#9951","full":"gitlab-org/gitlab#9951"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24690027,"iid":26941,"project_id":278964,"title":"ETag cached requests are not logged in production_json.log","description":"While testing https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/25400, I found that requests handled by the ETag middleware are not logged in `production_json.log`. We should at least see a 304 request to know that it was handled. \n\nI think this happens because the middleware short-circuits Lograge, but we should find a way to log this.\n\n## Proposal\n\nDetect 304 responses in the middleware and pass them to Lograge so they are logged.\n\nFor inspiration:  See the [instrumentation concept below](https://gitlab.com/gitlab-org/gitlab/issues/26941#note_247926515) and the [Lograge2 concept](https://github.com/roidrage/lograge/issues/48#issuecomment-114154396).","state":"closed","created_at":"2019-02-24T16:16:42.392Z","updated_at":"2021-10-27T10:44:53.172Z","closed_at":"2020-01-24T14:30:06.078Z","closed_by":{"id":4158075,"username":"aakriti.gupta","name":"Aakriti Gupta","state":"active","avatar_url":"https://secure.gravatar.com/avatar/992a080bc7d9f8c22ff7186db1c76dbd?s=80\u0026d=identicon","web_url":"https://gitlab.com/aakriti.gupta"},"labels":["Eng-Consumer::Infrastructure","Eng-Producer::Development","Engineering Allocation","GitLab.com Priority","Manage [DEPRECATED]","Observability","devops::manage","estimation::completed","gitlab.com","group::optimize","infradev","missed:12.7","priority::3","severity::3"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":4158075,"username":"aakriti.gupta","name":"Aakriti Gupta","state":"active","avatar_url":"https://secure.gravatar.com/avatar/992a080bc7d9f8c22ff7186db1c76dbd?s=80\u0026d=identicon","web_url":"https://gitlab.com/aakriti.gupta"}],"author":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"type":"ISSUE","assignee":{"id":4158075,"username":"aakriti.gupta","name":"Aakriti Gupta","state":"active","avatar_url":"https://secure.gravatar.com/avatar/992a080bc7d9f8c22ff7186db1c76dbd?s=80\u0026d=identicon","web_url":"https://gitlab.com/aakriti.gupta"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/26941","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/26941","notes":"https://gitlab.com/api/v4/projects/278964/issues/26941/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/26941/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#26941","relative":"#26941","full":"gitlab-org/gitlab#26941"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18534242,"iid":9933,"project_id":278964,"title":"UpdateMaxSeatsUsedForGitlabComSubscriptionsWorker attempts to run on Geo secondary","description":"https://sentry.gitlab.net/gitlab/gitlabcom/issues/660683/\n\n```\nPG::ReadOnlySqlTransaction: ERROR:  cannot execute UPDATE in a read-only transaction\n\n  peek/views/pg.rb:17:in `async_exec'\n    super(*args)\n  peek/views/pg.rb:17:in `async_exec'\n    super(*args)\n  active_record/connection_adapters/postgresql/database_statements.rb:98:in `block in execute'\n    @connection.async_exec(sql)\n  active_record/connection_adapters/abstract_adapter.rb:590:in `block in log'\n    connection_id:     object_id) { yield }\n  active_support/notifications/instrumenter.rb:21:in `instrument'\n    yield payload\n...\n(56 additional frame(s) were not displayed)\n\nActiveRecord::StatementInvalid: PG::ReadOnlySqlTransaction: ERROR:  cannot execute UPDATE in a read-only transaction\n:           UPDATE gitlab_subscriptions AS s SET max_seats_used = v.max_seats_used\n          FROM (VALUES (3297, 19)) AS v(id, max_seats_used)\n          WHERE s.id = v.id\n\nPG::ReadOnlySqlTransaction: ERROR:  cannot execute UPDATE in a read-only transaction\n:           UPDATE gitlab_subscriptions AS s SET max_seats_used = v.max_seats_used\n          FROM (VALUES (3297, 19)) AS v(id, max_seats_used)\n          WHERE s.id = v.id\n\n```","state":"closed","created_at":"2019-02-23T14:06:35.238Z","updated_at":"2019-12-11T20:03:17.133Z","closed_at":"2019-02-28T09:37:49.294Z","closed_by":{"id":12452,"username":"ayufan","name":"Kamil Trzciński","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a285e30f35d72526fb0954e8fe7cefa?s=80\u0026d=identicon","web_url":"https://gitlab.com/ayufan"},"labels":["Enterprise Edition","Geo Administration","devops::systems","group::geo","priority::3","severity::3","type::bug","workflow::in dev"],"milestone":{"id":523180,"iid":18,"group_id":9970,"title":"11.9","description":"https://about.gitlab.com/releases/2019/03/22/gitlab-11-9-released/","state":"closed","created_at":"2018-05-09T14:56:19.024Z","updated_at":"2020-04-30T19:56:35.917Z","due_date":"2019-03-22","start_date":"2019-02-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/18"},"assignees":[{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"}],"author":{"id":402401,"username":"jobbot","name":"Bot","state":"active","avatar_url":"https://secure.gravatar.com/avatar/aaa6738f1ebf25404010884af511b0e7?s=80\u0026d=identicon","web_url":"https://gitlab.com/jobbot"},"type":"ISSUE","assignee":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"user_notes_count":4,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9933","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9933","notes":"https://gitlab.com/api/v4/projects/278964/issues/9933/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9933/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9933","relative":"#9933","full":"gitlab-org/gitlab#9933"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18527408,"iid":9930,"project_id":278964,"title":"Add commit_committer_check to the /projects/:id/push_rule API endpoint","description":"### Problem to solve\n\nThe `/projects/:id/push_rule` [API endpoint](https://docs.gitlab.com/ee/api/projects.html#push-rules-starter) doesn't support the `commit_committer_check` attribute for project push rules. This corresponds to the `Committer restriction: Users can only push commits to this repository that were committed with one of their own verified emails.` checkbox in the UI for project push rules.\n\nThis proposal is to add `commit_committer_check` as an attribute for the `/projects/:id/push_rule` API endpoint.\n\nCustomer ticket: https://gitlab.zendesk.com/agent/tickets/114544 (internal use only)\n\n### Target audience\n\nThe customer would like to set this attribute via the API.\n\n- Delaney, Development Team Lead, https://design.gitlab.com/research/personas#persona-delaney\n\n- Sasha, Software Developer, https://design.gitlab.com/research/personas#persona-sasha\n\n- Devon, DevOps Engineer, https://design.gitlab.com/research/personas#persona-devon\n\n- Sidney, Systems Administrator, https://design.gitlab.com/research/personas#persona-sidney\n\n- Sam, Security Analyst, https://design.gitlab.com/research/personas#persona-sam\n\n### Proposal\n\nAdd the `commit_committer_check` to the Project Push Rules API.\n\nEndpoints defined in: https://gitlab.com/gitlab-org/gitlab-ee/blob/master/ee/lib/api/project_push_rule.rb\nAttributes defined in: https://gitlab.com/gitlab-org/gitlab-ee/blob/master/ee/lib/ee/api/entities.rb\n\n### Documentation\n\nWill need to add the `commit_committer_check` attribute to [Project Push Rules API documentation](https://docs.gitlab.com/ee/api/projects.html#push-rules-starter).\n\n### What does success look like, and how can we measure that?\n\nCustomers can access and edit the `commit_committer_check` attribute for a project's push rule via the API.\n\n### What is the type of buyer? \n\nThis option is available in Premium and above.\n\n### Links / references\n\n\ncc/ @jramsay","state":"closed","created_at":"2019-02-22T22:50:55.161Z","updated_at":"2019-10-14T17:02:29.490Z","closed_at":"2019-06-06T07:49:57.583Z","closed_by":{"id":87854,"username":"DouweM","name":"Douwe Maan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/73d1548ae618321220679b3a4fda7fb1?s=80\u0026d=identicon","web_url":"https://gitlab.com/DouweM"},"labels":["Create [DEPRECATED]","Deliverable","Enterprise Edition","GitLab Premium","api","backend","customer","customer+","devops::create","group::source code","repository","type::feature","workflow::in review"],"milestone":{"id":693518,"iid":33,"group_id":9970,"title":"12.0","description":"https://about.gitlab.com/releases/2019/06/22/gitlab-12-0-released/","state":"closed","created_at":"2018-10-30T16:47:37.975Z","updated_at":"2020-04-22T19:51:03.475Z","due_date":"2019-06-22","start_date":"2019-05-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/33"},"assignees":[{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"}],"author":{"id":2658602,"username":"blunceford","name":"Blair Lunceford","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2658602/avatar.png","web_url":"https://gitlab.com/blunceford"},"type":"ISSUE","assignee":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"user_notes_count":9,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9930","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9930","notes":"https://gitlab.com/api/v4/projects/278964/issues/9930/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9930/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9930","relative":"#9930","full":"gitlab-org/gitlab#9930"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18523234,"iid":9927,"project_id":278964,"title":"Optimize load times of Elasticsearch global search","description":"ZD: https://gitlab.zendesk.com/agent/tickets/114692\n\nA customer is load testing Elasticsearch by running what looks like JMeter tests with global search w/ Elasticsearch. The tests they are doing basically do this:\n\n1. Enter a keyword (e.g. `for`, `break`, `release`, `class`) in the top search bar\n2. When the results return, click on the `Code` and `Commits` tab in the search results. \n\n## Results in GitLab 11.5.7 before Rugged patches\n\nIn their initial tests with GitLab 11.5.7 without the Rugged patches (https://gitlab.com/gitlab-org/gitlab-ce/issues/57317), they ran several experiments:\n\n1. Slot 1: Enabling Elasticsearch with 20 active users\n2. Slot 2: Disabling Elasticsearch\n3. Slot 3: Enabling Elasticsearch with 50 active users\n4. Slot 4: Disabling Elasticsearch\n\n![image](/uploads/1add0c25c3090d8d9d42be1b7fbd1af4/image.png)\n\nThey showed me data where some of the response times took over 100 s.\n\n## Results after Rugged patches\n\nAfter applying the Rugged patches, performance significantly improved and they can test with 150 concurrent users with response times dropping 60+ seconds across the board in the 50-user case:\n\n![image](/uploads/81d86329f934a733d2675150cdca6d83/image.png)\n\nAs the graph shows above, times still peak to about 23 s. This isn't fast enough. \n\nThere is one ruby-prof profiler in the ticket. They are going to send us additional profiles of endpoints so that we can optimize load times further.\n\nTo start, I see:\n\n1. 16% time loading CI project pipeline status:\n\n![image](/uploads/c21e906c1d0c33f66ddb1e9062af593a/image.png)\n\n1. 17% time loading counts for milestones, blobs, projects:\n\n![image](/uploads/20f798b276a5be82574050ed7224100b/image.png)\n\n1. 6% LDAP access checks\n\n![image](/uploads/6655df785fe21c39b273afda6fd5801d/image.png)\n\n/cc: @mdelaossa, @vsizov, @nick.thomas, @meks, @victorwu","state":"closed","created_at":"2019-02-22T18:37:02.465Z","updated_at":"2022-05-19T17:39:08.956Z","closed_at":"2019-04-05T06:21:12.778Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["Create [DEPRECATED]","Enterprise Edition","Quality","advanced search","backend","bug::performance","devops::create"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"}],"author":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"type":"ISSUE","assignee":{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"},"user_notes_count":13,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9927","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9927","notes":"https://gitlab.com/api/v4/projects/278964/issues/9927/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9927/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9927","relative":"#9927","full":"gitlab-org/gitlab#9927"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":853,"epic":{"id":4555,"iid":853,"title":"Elasticsearch on GitLab.com MVC","url":"/groups/gitlab-org/-/epics/853","group_id":9970,"human_readable_end_date":"Jul 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18517423,"iid":9912,"project_id":278964,"title":"Updating an Environment Variable's scope via API fails","description":"ZD ticket: https://gitlab.zendesk.com/agent/tickets/114826\n\n### Problem to Solve\n\n1. Have Premium or higher\n1. Create a project.\n1. Add 2 environment variables:\n    1. key1, value1, scope: staging\n    1. key1, value2, scope: production\n1. Try to update the value via the API:\n    - curl --request PUT --header \"PRIVATE-TOKEN: $$$$$\" HOST/api/v4/projects/7/variables/var_name --form \"value=updatefromterm\" --form \"environment_scope=production\"\n{\"message\":{\"key\":[\"(var_name) has already been taken\"]}}\n\n\n### Issues with put\n\nIt looks like our logic is bad in the API for put:\n\nhttps://gitlab.com/gitlab-org/gitlab-ee/blob/master/lib/api/variables.rb#L83\n\nWe'll find the first instance of the key (find_by) and then we'll try and update it, but it fails validation because then it would match the \"second\" key in the scope:\n\n```\nKey1: value1, scope: scope1\nKey2 value2, scope: scope2\n```\n\nfind_by grabs key1 and says update it to:\n\n```\nKey1: newvalue, scope: scope2\n```\n\nbut that conflicts because Key2 already exists with that scope.\n\n### Issues with delete\n\nThere is a similar problem with delete, where GitLab EE API supports CRUD operations on the Project Variables, however the DELETE action only takes \"KEY\" as argument. This means when have multiple Project Variables with the same KEY (just for a different environment scope), then the DELETE action deletes a random KEY.\n\nCreate variables:\n\n```\ncurl --request POST --header \"PRIVATE-TOKEN: 9koXpg98eAheJpvBs5tK\" \"https://gitlab.example.com/api/v4/projects/1/variables\" --form \"key=NEW_VARIABLE\" --form \"value=new value\"\ncurl --request POST --header \"PRIVATE-TOKEN: 9koXpg98eAheJpvBs5tK\" \"https://gitlab.example.com/api/v4/projects/1/variables\" --form \"key=NEW_VARIABLE\" --form \"value=new value\" --form \"environment_scope=test\"\n```\n\nDelete a variable:\n\n```\ncurl --request DELETE --header \"PRIVATE-TOKEN: 9koXpg98eAheJpvBs5tK\" \"https://gitlab.example.com/api/v4/projects/1/variables/NEW_VARIABLE\"\n```\n\n### Proposal\n\nRequire provision of the scope, especially when it is ambiguous.\n\nBy default use environment_scope=\"*\" (to make it as seemless as possible to existing users), but if we do not find variable, we might print error message: we did not find, maybe you need to set environemnt_scope=env-name","state":"closed","created_at":"2019-02-22T14:26:41.401Z","updated_at":"2022-07-20T05:40:47.194Z","closed_at":"2020-07-17T18:41:29.060Z","closed_by":{"id":5709468,"username":"cheryl.li","name":"Cheryl Li","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709468/avatar.png","web_url":"https://gitlab.com/cheryl.li"},"labels":["CI variables","Category:Continuous Integration","Enterprise Edition","api","backend","customer","devops::verify","documentation","group::pipeline execution","missed-SLO","missed-deliverable","missed:12.5","missed:13.0","missed:13.1","priority::2","severity::2","type::bug","workflow::production"],"milestone":{"id":1233746,"iid":49,"group_id":9970,"title":"13.2","description":"https://about.gitlab.com/releases/2020/07/22/gitlab-13-2-released/","state":"closed","created_at":"2020-04-09T17:28:01.032Z","updated_at":"2022-04-13T14:48:24.167Z","due_date":"2020-07-17","start_date":"2020-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/49"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":695248,"username":"lbot","name":"Lee Matos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/695248/avatar.png","web_url":"https://gitlab.com/lbot"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":52,"merge_requests_count":0,"upvotes":12,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9912","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9912","notes":"https://gitlab.com/api/v4/projects/278964/issues/9912/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9912/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9912","relative":"#9912","full":"gitlab-org/gitlab#9912"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":24689938,"iid":26911,"project_id":278964,"title":"API: `merged_at` values missing for certain Merge Requests in `merged` state","description":"### Summary\n\nIn `gitlab-insights` and future features we rely on the `merged_at` timestamp being available for Merge Requests in the `merged` state. Under certain circumstances this field isn't available for merged MRs when indexing MRs and retrieving and individual MR via the API.\n\nThis definitely does not affect all MRs, but I could not notice a pattern between those affected\n\n### Steps to reproduce\n\n- Query `api/v4/projects/:project_id/merge_requests`\n- Notice some MRs do not have `merged_at` data available\n\n### Example Project\n\nThe following merged MR is an example that exhibits the problem:\n\n* https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/24137\n* https://gitlab.com/api/v4/projects/gitlab-org%2Fgitlab-ce/merge_requests/24137\n\n### What is the current *bug* behavior?\n\n- `merged_at` field is `null`\n\n### What is the expected *correct* behavior?\n\n- `merged_at` field should be populated with the relevant timestamp\n\n### Relevant logs and/or screenshots\n\nN/A\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n#### Results of GitLab environment info\n\ngitlab-ce~3293941 `v11.8.0-rc9`\n\n\n### Possible fixes\n\n(If you can, link to the line of code that might be responsible for the problem)","state":"closed","created_at":"2019-02-22T10:32:04.654Z","updated_at":"2022-11-16T17:46:44.243Z","closed_at":"2022-05-02T03:49:38.015Z","closed_by":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"labels":["Category:Code Review Workflow","Deliverable","api","backend","customer","devops::create","group::code review","internal customer","merge requests","missed-deliverable","missed:14.10","priority::3","reproduced on GitLab.com","section::dev","severity::3","type::bug"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"}],"author":{"id":419655,"username":"markglenfletcher","name":"Mark Fletcher","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/419655/avatar.png","web_url":"https://gitlab.com/markglenfletcher"},"type":"ISSUE","assignee":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"user_notes_count":51,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/26911","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/26911","notes":"https://gitlab.com/api/v4/projects/278964/issues/26911/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/26911/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#26911","relative":"#26911","full":"gitlab-org/gitlab#26911"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24689913,"iid":26907,"project_id":278964,"title":"Introduce IntersectionObserver for tracking current diff file in the list on scroll","description":"### Problem to solve\n\nThe following discussion from gitlab-ce!25355 should be addressed:\n\n- [ ] @leipert started a [discussion](https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/25355#note_143206191):  (+4 comments)\n\n    \u003e One funny UX concern just popped up. If you scroll with the mouse, your current position is not tracked. So if you then hit `[` or `]`, you jump to the first file. Seems kinda funky, maybe we should follow up with tracking the position of mouse scrolling somehow (which sounds aweful to implement)\n    \u003e \n    \u003e I wonder what the maintainer thinks about that\n\nIn essence, after we introduce keyboard navigation and, as a result, persistent information about `current` diff file on `DiffsApp`, behaviour user experiences when scrolling (and, maybe using keyboard navigation after that) is inconsistent and quite unexpected.\n\n### Target audience\n\n- Sasha, Software Developer, https://design.gitlab.com/research/personas#persona-sasha\n\n### Further details\n\nIt used to be very expensive to track user's position on the screen on scroll previously. With appearance of `IntersectonObserver` it becomes very cheap and is therefor a great tool to consider for issues like this one. Technically, `IntersectionObserver` still monitors user's scrolling but does it in the async nature that makes it perfect for performance-oriented applications.\n\nThe only place that might be a performance bottleneck is the way we handle response and information the observer supplies us with because even though the observer itself is of async nature, the handler processing information, is not. So we should be careful with introducing any heavy-lifting in the handlers.\n\n### Proposal\n\n* in case of a large diff file that takes the whole screen for user, everything is very simple: `IntersectionObserver` notifies us about this file getting into view and unless we get information about this file moving out of the view (or new file getting into view), we can be 100% certain about `current` diff file.\n* if we have several smaller files in the list so that `IntersectionObserver` notified us about all of them getting into view, but we still didn't get notification about them moving out of the view, we, at least, know what files are visible to user. Employing very basic Math we can have a very good guess about `current` file in the view. Tuning `IntersectionObserver` to \"narrow down\" the observation window might help even more with this.\n\n### Documentation\n\n* shameless plug: [\"Now You See Me: How To Defer, Lazy-Load And Act With IntersectionObserver\"](https://www.smashingmagazine.com/2018/01/deferring-lazy-loading-intersection-observer-api/)\n* [MDN](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)\n\n### What does success look like, and how can we measure that?\n\nBehaviour of marking (on the code level and [visual highlighting](https://gitlab.com/gitlab-org/gitlab-ce/issues/52485)) should be consistent no matter the way user navigates the diff files listing.\n\n/cc @iamphill @andr3","state":"closed","created_at":"2019-02-22T09:09:24.437Z","updated_at":"2021-12-27T03:03:07.737Z","closed_at":"2021-12-27T03:03:07.721Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"🤖 GitLab Bot 🤖","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["Category:Source Code Management","Persona: Software developer","UI polish","UX","[deprecated] Accepting merge requests","auto closed","bug::performance","devops::create","frontend","group::source code","missed:12.10","missed:12.4","missed:12.5","missed:12.6","missed:12.7","missed:12.8","missed:12.9","missed:13.0","missed:13.1","section::dev","severity::4","stale","type::bug","vintage"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":3199302,"username":"dmishunov","name":"Denys Mishunov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d85e45af29611ac2c1395e3c3d6ec5d6?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmishunov"},"type":"ISSUE","assignee":null,"user_notes_count":11,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/26907","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/26907","notes":"https://gitlab.com/api/v4/projects/278964/issues/26907/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/26907/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#26907","relative":"#26907","full":"gitlab-org/gitlab#26907"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18484672,"iid":9903,"project_id":278964,"title":"Geo - Selective sync by namespace is broken","description":"### Summary\n\nThe legacy queries to retrieve projects/files to synchronize are broken: `WARN: ActiveRecord::StatementInvalid: PG::InvalidRecursion: ERROR: recursive query \"base_and_descendants\" does not have the form non-recursive-term UNION`.\n\n```sql\ns not have the form non-recursive-term UNION [ALL] recursive-term\n14:02:49 rails-background-jobs.1 | LINE 4: ...HERE \"projects\".\"namespace_id\" IN (WITH RECURSIVE \"base_and_...\n14:02:49 rails-background-jobs.1 |                                                              ^\n14:02:49 rails-background-jobs.1 | : SELECT  \"projects\".\"id\" FROM \"projects\" LEFT OUTER JOIN\n14:02:49 rails-background-jobs.1 | (VALUES (257, 't'),(40, 't'),(31, 't'),(33, 't'),(26, 't'),(27, 't'),(36, 't'),(50, 't'),(56, 't'),(60, 't'),(62, 't'),(61, 't'),(1, 't'),(66, 't'),(2, 't'),(73, 't'),(5, 't'),(4, 't'),(75, 't'),(6, 't'),(3, 't'),(78, 't'),(13, 't'),(79, 't'),(12, 't'), ... ,(1763, 't'))\n14:02:49 rails-background-jobs.1 |  registry(id, registry_present)\n14:02:49 rails-background-jobs.1 |  ON projects.id = registry.id WHERE \"projects\".\"namespace_id\" IN (WITH RECURSIVE \"base_and_descendants\" AS (SELECT \"namespaces\".* FROM \"namespaces\", \"base_and_descendants\" WHERE \"namespaces\".\"parent_id\" = \"base_and_descendants\".\"id\") SELECT \"id\" FROM \"base_and_descendants\" AS \"namespaces\") AND (\"registry\".\"registry_present\" = 'f' OR \"registry\".\"registry_present\" IS NULL) AND \"projects\".\"repository_storage\" = $1 AND (1=1) ORDER BY \"projects\".\"last_repository_updated_at\" DESC LIMIT $2\n```\n\n```sql\n14:09:04 rails-background-jobs.1 | 2019-02-21T17:09:04.408Z 80424 TID-ov75yqm5o WARN: ActiveRecord::StatementInvalid: PG::InvalidRecursion: ERROR:  recursive query \"base_and_descendants\" does not have the form non-recursive-term UNION [ALL] recursive-term\n14:09:04 rails-background-jobs.1 | LINE 1: ...amespace' AND uploads.model_id IN (WITH RECURSIVE \"base_and_...\n14:09:04 rails-background-jobs.1 |                                                              ^\n14:09:04 rails-background-jobs.1 | : SELECT  \"uploads\".\"id\", \"uploads\".\"uploader\" FROM \"uploads\" WHERE ((\"uploads\".\"model_type\" = 'Namespace' AND uploads.model_id IN (WITH RECURSIVE \"base_and_descendants\" AS (SELECT \"namespaces\".* FROM \"namespaces\", \"base_and_descendants\" WHERE \"namespaces\".\"parent_id\" = \"base_and_descendants\".\"id\") SELECT \"id\" FROM \"base_and_descendants\" AS \"namespaces\") OR \"uploads\".\"model_type\" = 'Project' AND uploads.model_id IN (SELECT \"projects\".\"id\" FROM \"projects\" WHERE \"projects\".\"namespace_id\" IN (WITH RECURSIVE \"base_and_descendants\" AS (SELECT \"namespaces\".* FROM \"namespaces\", \"base_and_descendants\" WHERE \"namespaces\".\"parent_id\" = \"base_and_descendants\".\"id\") SELECT \"id\" FROM \"base_and_descendants\" AS \"namespaces\"))) OR \"uploads\".\"model_type\" NOT IN ('Namespace', 'Project')) AND \"uploads\".\"store\" = $1 LIMIT $2\n```\n\n### Steps to reproduce\n\n1. Go to the Geo nodes page\n1. Click on the edit button for a secondary node\n1. Change the \"Selective synchronization\" to \"Projects in certain groups\"\n1. Choose a few groups on \"Groups to synchronize\" \n1. Save changes\n1. Check the console for the secondary node\n\n/cc @geo\\-team","state":"closed","created_at":"2019-02-21T17:28:44.098Z","updated_at":"2019-12-16T14:47:27.387Z","closed_at":"2019-03-01T16:54:52.693Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["Category:Geo Replication","Enterprise Edition","devops::systems","group::geo","priority::1","regression:master","severity::1","type::bug","workflow::in dev"],"milestone":{"id":523180,"iid":18,"group_id":9970,"title":"11.9","description":"https://about.gitlab.com/releases/2019/03/22/gitlab-11-9-released/","state":"closed","created_at":"2018-05-09T14:56:19.024Z","updated_at":"2020-04-30T19:56:35.917Z","due_date":"2019-03-22","start_date":"2019-02-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/18"},"assignees":[{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"}],"author":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"type":"ISSUE","assignee":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"user_notes_count":14,"merge_requests_count":1,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9903","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9903","notes":"https://gitlab.com/api/v4/projects/278964/issues/9903/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9903/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9903","relative":"#9903","full":"gitlab-org/gitlab#9903"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18483441,"iid":9901,"project_id":278964,"title":"Documentation : Improve selective sync documentation","description":"Geo currently supports selective sync by namespace and by shard. Some customers want to selectively sync projects to certain nodes, and a subset of those want to restrict the metadata.\n\nFor customers who aren't concerned about the metadata, what we have now meets their needs, but they don't know enough about the feature to be able to use it. \n\nThis issue is to improve the selective sync documentation to be more clear about what the feature is, and what is (and is not) covered by selective synchronization. ","state":"closed","created_at":"2019-02-21T16:41:25.469Z","updated_at":"2019-12-16T14:47:29.286Z","closed_at":"2019-04-17T12:04:19.927Z","closed_by":{"id":3585,"username":"axil","name":"Achilleas Pipinellis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3585/avatar.png","web_url":"https://gitlab.com/axil"},"labels":["Category:Geo Replication","Deliverable","Enterprise Edition","devops::systems","group::geo","workflow::in dev"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"}],"author":{"id":2722370,"username":"rnienaber","name":"Rachel Nienaber","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2722370/avatar.png","web_url":"https://gitlab.com/rnienaber"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":3,"merge_requests_count":1,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9901","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9901","notes":"https://gitlab.com/api/v4/projects/278964/issues/9901/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9901/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9901","relative":"#9901","full":"gitlab-org/gitlab#9901"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":576,"epic":{"id":2208,"iid":576,"title":"Geo: Selective Sync Enhancements","url":"/groups/gitlab-org/-/epics/576","group_id":9970,"human_readable_end_date":"Aug 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24689861,"iid":26889,"project_id":278964,"title":"Make it more difficult to @ mention everyone in a group","description":"## Description\n\nToday I accidentally mentioned everyone in a group. This is more than 500 people. How did it happen:\n\n1. I wanted to mention @Alexand and I started with writing `@a`. \n1. `@ all` was the first suggestion in the drop-down that appeared.\n1. Without paying too much attention I kept typing and then I hit CTRL + Enter.\n1. A new issue got created, it took around 15-20 seconds to create it.\n\n\u003cdetails\u003e\n## Proposal\n\n1. Remove `@ all` from suggestion, definitely do not put it at the beginning of a list.\n1. Do not allow to submit an issue with CTRL + Enter when there is `@ all` used.\n1. Show a modal / confirmation dialog that will ask you to explicitly confirm the intent to mention everyone in a group.\n\nThoughts @victorwu @smcgivern ?\n\u003c/details\u003e\n\n## Solution\nWe currently show verbiage in Preview tab when commenting for new or threaded conversations if someone @ mentions `all`. We will copy that verbiage over to the Write tab and have it show once the person hits \"Enter\" after typing in the mention. \n| Threaded comment | New comment |\n| ------ | ------ |\n| ![Screen_Shot_2021-04-06_at_3.57.16_PM](/uploads/bce488fd74ede71cbd67a2ec43f0e6d8/Screen_Shot_2021-04-06_at_3.57.16_PM.png) | ![Screen_Shot_2021-04-06_at_4.01.11_PM](/uploads/662defaea07867d9c3ec6fccf3949149/Screen_Shot_2021-04-06_at_4.01.11_PM.png) |","state":"closed","created_at":"2019-02-21T15:46:39.365Z","updated_at":"2022-11-09T14:38:24.968Z","closed_at":"2022-01-21T21:43:05.893Z","closed_by":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"labels":["Technical Writing","UX","devops::plan","frontend","group::project management","issues","missed:14.6","missed:14.7","section::dev","type::feature","workflow::in review"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"}],"author":{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"},"type":"ISSUE","assignee":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"user_notes_count":51,"merge_requests_count":0,"upvotes":21,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/26889","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/26889","notes":"https://gitlab.com/api/v4/projects/278964/issues/26889/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/26889/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#26889","relative":"#26889","full":"gitlab-org/gitlab#26889"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2458,"epic":{"id":18042,"iid":2458,"title":"Plan - UX Deficiencies","url":"/groups/gitlab-org/-/epics/2458","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":{"id":38171,"iid":45,"sequence":6,"group_id":9970,"title":"Iteration 6: January 05, 2022 - January 18, 2022","description":null,"state":3,"created_at":"2021-10-22T17:12:40.556Z","updated_at":"2022-01-19T00:05:02.772Z","start_date":"2022-01-05","due_date":"2022-01-18","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/38171"},"health_status":null},{"id":18481044,"iid":9898,"project_id":278964,"title":"Better indication that an issue has been promoted to an epic","description":"Similar to how we added `(moved)` to an issue's status badge, we should add `(promoted)` to a `Closed` issue status badge when that issue has been promoted to an epic. `(promoted)` should link to the new epic.\n\n![Screen_Shot_2019-02-21_at_9.14.18_AM](/uploads/3ac455e84f601e5ce9e64569143bef69/Screen_Shot_2019-02-21_at_9.14.18_AM.png)","state":"closed","created_at":"2019-02-21T15:15:06.728Z","updated_at":"2022-05-19T16:12:45.949Z","closed_at":"2019-11-20T22:34:16.217Z","closed_by":{"id":33100,"username":"mayra-cabrera","name":"Mayra Cabrera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/33100/avatar.png","web_url":"https://gitlab.com/mayra-cabrera"},"labels":["Category:Portfolio Management","Deliverable","Enterprise Edition","[deprecated] Accepting merge requests","devops::plan","epics","frontend","group::project management","issues","missed:12.4","missed:12.5","workflow::ready for development"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[],"author":{"id":201566,"username":"annabeldunstone","name":"Annabel Dunstone Gray","state":"active","avatar_url":"https://secure.gravatar.com/avatar/85c0203926134720f9a9aa8c6e264c78?s=80\u0026d=identicon","web_url":"https://gitlab.com/annabeldunstone"},"type":"ISSUE","assignee":null,"user_notes_count":8,"merge_requests_count":2,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9898","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9898","notes":"https://gitlab.com/api/v4/projects/278964/issues/9898/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9898/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9898","relative":"#9898","full":"gitlab-org/gitlab#9898"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":633,"epic":{"id":2424,"iid":633,"title":"Solve problem of people commenting on moved/promoted issues","url":"/groups/gitlab-org/-/epics/633","group_id":9970},"iteration":null,"health_status":null},{"id":18478009,"iid":9895,"project_id":278964,"title":"Store hide labels in issue boards as a preference","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n(Summarize the bug encountered concisely)\n\nYou can toggle labels on and off but the preference doesn't persist.\n\n~\"internal customer\" as a continuation of https://gitlab.com/gitlab-org/gitlab-ee/issues/9838\n\n- It is an instance-wide setting per user. So that when you change the toggle in one board, it carries over whenever you visit any another board in the instance.\n- The default is showing labels.\n\n### Steps to reproduce\n\n(How one can reproduce the issue - this is very important)\n\n1. Go to an issue board\n1. Hide labels with toggle\n1. Refresh browser\n1. Labels are once again visible\n\n### Example Project\n\nhttps://gitlab.com/gitlab-org/gitlab/-/boards\n\n### What is the current *bug* behavior?\n\n1. Go to an issue board\n1. Hide labels with toggle\n1. Refresh browser\n1. Labels are once again visible\n\n### What is the expected *correct* behavior?\n\n1. Go to an issue board\n1. Hide labels with toggle\n1. Refresh browser\n1. Labels remain hidden\n\n### Relevant logs and/or screenshots\n\n(Paste any relevant logs - please use code blocks (```) to format console output,\nlogs, and code as it's tough to read otherwise.)\n\n### Output of checks\n\nThis happens on GitLab.com and can be considered ~\"UX debt\"\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n(If you can, link to the line of code that might be responsible for the problem)","state":"closed","created_at":"2019-02-21T14:26:17.759Z","updated_at":"2022-05-19T16:12:45.742Z","closed_at":"2021-10-11T07:09:50.403Z","closed_by":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"labels":["Category:Team Planning","Enterprise Edition","[deprecated] Accepting merge requests","backend","boards","devops::plan","frontend","group::project management","internal customer","section::dev","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":711023,"username":"victorwu","name":"Victor Wu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/711023/avatar.png","web_url":"https://gitlab.com/victorwu"},"type":"ISSUE","assignee":null,"user_notes_count":8,"merge_requests_count":0,"upvotes":4,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9895","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9895","notes":"https://gitlab.com/api/v4/projects/278964/issues/9895/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9895/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9895","relative":"#9895","full":"gitlab-org/gitlab#9895"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":849,"epic":{"id":4476,"iid":849,"title":"Displaying labels on issue boards","url":"/groups/gitlab-org/-/epics/849","group_id":9970,"human_readable_end_date":"Nov 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18474734,"iid":9894,"project_id":278964,"title":"Entry script of the DAST image can only parse short options, but auth params are long options","description":"### Summary\n\nThe [entry script](https://gitlab.com/gitlab-org/security-products/dast/blob/master/analyze) of the DAST image can only parse short options. When invoked with long options, as is necessary for the [authentication-related options](https://gitlab.com/gitlab-org/security-products/dast/blob/2e0c054ea9f753d9cc7c2fd874c2f74fa3de9262/src/zap-baseline.py#L34-43), option parsing fails.\n\n### Steps to reproduce\n\nRun the DAST image with authentication parameters \n```\ndocker run --rm -i -v $(pwd)/wrk:/zap/wrk/:rw dast /analyze \\\n  -t http://mysite.localhost/users/sign_in \\\n  --auth-url http://mysite.localhost/users/sign_in \\\n  --auth-username someone \\\n  --auth-password p@ssw0rd \\\n  --auth-username-field \"user[login]\" \\\n  --auth-password-field \"user[password]\"\n```\n\n### What is the current *bug* behavior?\n\n`analyze` fails to parse the `-t` parameter (https://gitlab.com/gitlab-org/security-products/dast/blob/master/analyze#L6-13). In consequence, the script does not check if the target website is reachable (https://gitlab.com/gitlab-org/security-products/dast/blob/master/analyze#L15-28).\n\nThe check if the website is reachable will time out and normal execution continues.\n\n### What is the expected *correct* behavior?\n\n`analyze` should be able to parse short and long options.","state":"closed","created_at":"2019-02-21T13:06:24.211Z","updated_at":"2019-11-18T15:58:08.989Z","closed_at":"2019-09-26T02:19:13.179Z","closed_by":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"labels":["Category:DAST","Enterprise Edition","Stretch","backend","devops::secure","group::dynamic analysis","priority::3","severity::3","type::bug"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"}],"author":{"id":2761888,"username":"dappelt","name":"Dennis Appelt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2761888/avatar.png","web_url":"https://gitlab.com/dappelt"},"type":"ISSUE","assignee":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"user_notes_count":19,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9894","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9894","notes":"https://gitlab.com/api/v4/projects/278964/issues/9894/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9894/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9894","relative":"#9894","full":"gitlab-org/gitlab#9894"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":19288078,"iid":10540,"project_id":278964,"title":"Geo: Enforce repository JWT scopes","description":"It was already implemented but we reverted it in https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/9597\n\nWe have to bring it back in 11.10.","state":"closed","created_at":"2019-02-21T09:59:20.628Z","updated_at":"2019-12-16T14:49:53.844Z","closed_at":"2019-03-22T22:40:57.765Z","closed_by":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"labels":["Category:Geo Replication","Enterprise Edition","devops::systems","group::geo","security","workflow::in review"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"}],"author":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":6,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/10540","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/10540","notes":"https://gitlab.com/api/v4/projects/278964/issues/10540/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/10540/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#10540","relative":"#10540","full":"gitlab-org/gitlab#10540"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24689807,"iid":26873,"project_id":278964,"title":"Add Webhooks for Releases","description":"### Problem to solve\n\nThere is no way of triggering something external when a new release is created. \n\nThis could also compete with the [`deployment_notfier` CI Orb](https://circleci.com/orbs/registry/orb/thekevjames/deployment-notifier) and [`webhook` CI Orb](https://circleci.com/orbs/registry/orb/eddiewebb/webhook)\n\n### Proposal\n\nIn the Settings \u003e Integrations page of a project, we have different kind of webhook triggers for push, comments, issues, pipelines, ... It would be very convenient to also have a trigger for new releases, and when they are deployed (pipeline for release tag completed \n\n- [ ] trigger webhooks when release is created.\n- [ ] add \"Releases events\" to `Settings \u003e Integrations page of a project`\n- [ ] add \"Releases events\" to group integrations setting page\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2019-02-21T09:31:05.836Z","updated_at":"2022-11-24T18:24:33.440Z","closed_at":"2020-12-03T19:45:05.473Z","closed_by":{"id":5622641,"username":"nicolewilliams","name":"Nicole Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5622641/avatar.png","web_url":"https://gitlab.com/nicolewilliams"},"labels":["Category:Release Orchestration","Category:Webhooks","Community challenge","GitLab Starter","UX","[deprecated] Accepting merge requests","backend","cicd::active","devops::release","direction","frontend","group::release","section::ops","type::feature","usability","workflow::production"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":331526,"username":"guusdegraeve","name":"Guus De Graeve","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca249062973b7c781f262b896a0950d5?s=80\u0026d=identicon","web_url":"https://gitlab.com/guusdegraeve"},"type":"ISSUE","assignee":null,"user_notes_count":38,"merge_requests_count":0,"upvotes":10,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/26873","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/26873","notes":"https://gitlab.com/api/v4/projects/278964/issues/26873/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/26873/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#26873","relative":"#26873","full":"gitlab-org/gitlab#26873"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18459493,"iid":9885,"project_id":278964,"title":"Documentation : Geo: Add necessary tracking DB configuration to HA docs","description":"We learned how to get a standalone tracking DB working in https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6247. See more up-to-date info in the comments below.\n\nAfter we fix https://gitlab.com/gitlab-org/omnibus-gitlab/issues/4134, we should add any necessary configuration to this doc section: https://docs.gitlab.com/ee/administration/geo/replication/high_availability.html#step-3-configure-the-tracking-database-on-the-secondary-node\n\nThe doc doesn't make any sense as-is.","state":"closed","created_at":"2019-02-21T00:58:08.996Z","updated_at":"2019-12-11T20:03:22.491Z","closed_at":"2019-05-01T23:18:37.977Z","closed_by":{"id":2683848,"username":"eread","name":"Evan Read","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2683848/avatar.png","web_url":"https://gitlab.com/eread"},"labels":["Enterprise Edition","Geo Administration","devops::systems","documentation","group::geo","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"user_notes_count":4,"merge_requests_count":1,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9885","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9885","notes":"https://gitlab.com/api/v4/projects/278964/issues/9885/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9885/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9885","relative":"#9885","full":"gitlab-org/gitlab#9885"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":917,"epic":{"id":5025,"iid":917,"title":"Geo: Resolve Setup Problems and Improve Documentation","url":"/groups/gitlab-org/-/epics/917","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":18441332,"iid":9873,"project_id":278964,"title":"DAST - include the list of scanned urls at the bottom of the report","description":"#### Original description: \n\u003eI would be extremely beneficial to include, at the bottom of the report, all the paths/uri that were scanned. \nThat would give everyone the piece of mind that the scan did test all the linked pages/resources.\n\n\n### Problem \n\nToday we don't include all the paths/urls that were scanned and tested with DAST in the MR. This leaves the user unaware of what exactly was scanned and if a full-scan was completed. \n\n### User Story\n\nWhen running a DAST scan, I want to know all the paths/urls scanned, so that I can have peace-of-mind that the scan tested all of my linked pages and resources. ","state":"closed","created_at":"2019-02-20T17:37:25.735Z","updated_at":"2022-04-18T19:23:50.240Z","closed_at":"2019-07-08T15:41:14.891Z","closed_by":{"id":2761888,"username":"dappelt","name":"Dennis Appelt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2761888/avatar.png","web_url":"https://gitlab.com/dappelt"},"labels":["Deliverable","Enterprise Edition","customer+","devops::secure","type::feature"],"milestone":{"id":693520,"iid":34,"group_id":9970,"title":"12.1","description":"https://about.gitlab.com/releases/2019/07/22/gitlab-12-1-released","state":"closed","created_at":"2018-10-30T16:47:58.826Z","updated_at":"2020-04-27T16:30:09.107Z","due_date":"2019-07-22","start_date":"2019-06-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/34"},"assignees":[{"id":2761888,"username":"dappelt","name":"Dennis Appelt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2761888/avatar.png","web_url":"https://gitlab.com/dappelt"}],"author":{"id":42943,"username":"lederse","name":"Constantin M.","state":"active","avatar_url":"https://secure.gravatar.com/avatar/744933760b414d33427929056f058622?s=80\u0026d=identicon","web_url":"https://gitlab.com/lederse"},"type":"ISSUE","assignee":{"id":2761888,"username":"dappelt","name":"Dennis Appelt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2761888/avatar.png","web_url":"https://gitlab.com/dappelt"},"user_notes_count":28,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9873","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9873","notes":"https://gitlab.com/api/v4/projects/278964/issues/9873/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9873/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9873","relative":"#9873","full":"gitlab-org/gitlab#9873"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18441029,"iid":9872,"project_id":278964,"title":"Serializers for Insights Data","description":"Data located by a query will need to be represented in a format that can be consumed directly (or with little modification) by chart.js\n\nWe should write a serializer that all of the actions can use to ensure the data is uniform and as expected.\n\nIt will need to cope with the different formats required for the different charts:\n\n### Bar charts\n\n- https://www.chartjs.org/samples/latest/charts/bar/vertical.html\n\nExample:\n\n```json\n{\n   \"labels\":[\n      \"January\",\n      \"February\",\n      \"March\",\n      \"April\",\n      \"May\",\n      \"June\",\n      \"July\"\n   ],\n   \"datasets\":[\n      {\n         \"label\":\"Dataset 1\",\n         \"backgroundColor\":\"red\",\n         \"borderColor\":\"red\",\n         \"borderWidth\":1,\n         \"data\":[\n            1,\n            2,\n            3,\n            4,\n            5\n         ]\n      },\n      {\n         \"label\":\"Dataset 2\",\n         \"backgroundColor\":\"blue\",\n         \"borderColor\":\"blue\",\n         \"borderWidth\":1,\n         \"data\":[\n            1,\n            2,\n            3,\n            4,\n            5\n         ]\n      }\n   ]\n}\n```\n\n### Stacked Bar\n\n- https://www.chartjs.org/samples/latest/charts/bar/stacked.html\n\n```json\n{\n   \"labels\":[\n      \"January\",\n      \"February\",\n      \"March\",\n      \"April\",\n      \"May\",\n      \"June\",\n      \"July\"\n   ],\n   \"datasets\":[\n      {\n         \"label\":\"Dataset 1\",\n         \"backgroundColor\":\"red\",\n         \"data\":[\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1\n         ]\n      },\n      {\n         \"label\":\"Dataset 2\",\n         \"backgroundColor\":\"blue\",\n         \"data\":[\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1\n         ]\n      },\n      {\n         \"label\":\"Dataset 3\",\n         \"backgroundColor\":\"green\",\n         \"data\":[\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1\n         ]\n      }\n   ]\n}\n```\n\n### Line charts\n- https://www.chartjs.org/samples/latest/charts/line/basic.html\n\n```json\n{\n   \"labels\":[\n      \"January\",\n      \"February\",\n      \"March\",\n      \"April\",\n      \"May\",\n      \"June\",\n      \"July\"\n   ],\n   \"datasets\":[\n      {\n         \"label\":\"My First dataset\",\n         \"backgroundColor\":\"red\",\n         \"borderColor\":\"red\",\n         \"data\":[\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1\n         ],\n         \"fill\":false\n      },\n      {\n         \"label\":\"My Second dataset\",\n         \"fill\":false,\n         \"backgroundColor\":\"blue\",\n         \"borderColor\":\"blue\",\n         \"data\":[\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1\n         ]\n      }\n   ]\n}\n```\n\n### Pie\n\n- https://www.chartjs.org/samples/latest/charts/pie.html\n\n```json\n{\n   \"datasets\":[\n      {\n         \"data\":[\n            1,\n            1,\n            1,\n            1,\n            1\n         ],\n         \"backgroundColor\":[\n            \"red\",\n            \"orange\",\n            \"yellow\",\n            \"green\",\n            \"blue\"\n         ],\n         \"label\":\"Dataset 1\"\n      }\n   ],\n   \"labels\":[\n      \"Red\",\n      \"Orange\",\n      \"Yellow\",\n      \"Green\",\n      \"Blue\"\n   ]\n}\n```\n\n### Combo Bar Line Chart\n\n- https://www.chartjs.org/samples/latest/charts/combo-bar-line.html\n\n```json\n{\n   \"labels\":[\n      \"January\",\n      \"February\",\n      \"March\",\n      \"April\",\n      \"May\",\n      \"June\",\n      \"July\"\n   ],\n   \"datasets\":[\n      {\n         \"type\":\"line\",\n         \"label\":\"Dataset 1\",\n         \"borderColor\":\"blue\",\n         \"borderWidth\":2,\n         \"fill\":false,\n         \"data\":[\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1\n         ]\n      },\n      {\n         \"type\":\"bar\",\n         \"label\":\"Dataset 2\",\n         \"backgroundColor\":\"red\",\n         \"data\":[\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1\n         ],\n         \"borderColor\":\"white\",\n         \"borderWidth\":2\n      },\n      {\n         \"type\":\"bar\",\n         \"label\":\"Dataset 3\",\n         \"backgroundColor\":\"green\",\n         \"data\":[\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1\n         ]\n      }\n   ]\n}\n```","state":"closed","created_at":"2019-02-20T17:24:46.533Z","updated_at":"2019-08-12T15:06:39.401Z","closed_at":"2019-03-14T16:16:18.547Z","closed_by":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Enterprise Edition","Quality","insights","type::feature"],"milestone":{"id":523180,"iid":18,"group_id":9970,"title":"11.9","description":"https://about.gitlab.com/releases/2019/03/22/gitlab-11-9-released/","state":"closed","created_at":"2018-05-09T14:56:19.024Z","updated_at":"2020-04-30T19:56:35.917Z","due_date":"2019-03-22","start_date":"2019-02-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/18"},"assignees":[{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":419655,"username":"markglenfletcher","name":"Mark Fletcher","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/419655/avatar.png","web_url":"https://gitlab.com/markglenfletcher"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":2,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9872","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9872","notes":"https://gitlab.com/api/v4/projects/278964/issues/9872/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9872/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9872","relative":"#9872","full":"gitlab-org/gitlab#9872"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":725,"epic":{"id":3055,"iid":725,"title":"Insights: Build GitLab Insights as a native GitLab feature","url":"/groups/gitlab-org/-/epics/725","group_id":9970,"human_readable_end_date":"Apr 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18438003,"iid":9871,"project_id":278964,"title":"Insights Frontend Component","description":"- Frontend will consist of a Vue component that queries the insights controller for chart data in the config file\n- Tabs for each chart will then be made available denoted by the title of the chart as governed by the config\n- Accessing a tab will initiate a query for the data to render the chart","state":"closed","created_at":"2019-02-20T15:54:01.721Z","updated_at":"2019-08-12T15:06:39.427Z","closed_at":"2019-03-27T08:01:51.045Z","closed_by":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"labels":["Enterprise Edition","Quality","insights","type::feature"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":419655,"username":"markglenfletcher","name":"Mark Fletcher","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/419655/avatar.png","web_url":"https://gitlab.com/markglenfletcher"}],"author":{"id":419655,"username":"markglenfletcher","name":"Mark Fletcher","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/419655/avatar.png","web_url":"https://gitlab.com/markglenfletcher"},"type":"ISSUE","assignee":{"id":419655,"username":"markglenfletcher","name":"Mark Fletcher","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/419655/avatar.png","web_url":"https://gitlab.com/markglenfletcher"},"user_notes_count":0,"merge_requests_count":3,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9871","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9871","notes":"https://gitlab.com/api/v4/projects/278964/issues/9871/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9871/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9871","relative":"#9871","full":"gitlab-org/gitlab#9871"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":725,"epic":{"id":3055,"iid":725,"title":"Insights: Build GitLab Insights as a native GitLab feature","url":"/groups/gitlab-org/-/epics/725","group_id":9970,"human_readable_end_date":"Apr 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24689753,"iid":26851,"project_id":278964,"title":"Templates can't be loaded if group has a dot inside the name","description":"### Summary\n\nA bug appears when a group or subgroup has a '.' (dot) inside its name. No templates can be loaded if e.g. a LICENCE is added through the webIDE.\n\n### Steps to reproduce\n\n1. Create a subgroup with a dot inside the name.\n2. Create a repository inside this group and add at least one file to enable the webIDE.\n3. Open the webIDE inside this project.\n4. Add a new file and choose LICENCE as an example.\n5. Now try to choose a template like Android from the dropdown.\n6. An error should be visible.\n\n### Example Project\n\nhttps://gitlab.com/gitlab-org/gitlab-ce/commit/0718bfe2ef8af91a5cf4ad76d2a67d10e7852109#note_141687217\n\n### What is the current *bug* behavior?\n\nThe dropdown is empty and a red error bar appears containing the text:\n\u003e  Error loading template types. Please try again\n\n### What is the expected *correct* behavior?\n\nThe dropdown should contain all the templates that are available for this type of file.\n\n### Relevant logs and/or screenshots\n\nhttps://gitlab.com/gitlab-org/gitlab-ce/commit/0718bfe2ef8af91a5cf4ad76d2a67d10e7852109#note_141687217\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n--","state":"closed","created_at":"2019-02-20T13:32:46.067Z","updated_at":"2020-05-18T07:08:01.092Z","closed_at":"2020-05-15T05:40:42.042Z","closed_by":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"labels":["Category:Web IDE","Deliverable","backend","devops::create","frontend","group::editor","priority::3","severity::3","type::bug"],"milestone":{"id":991112,"iid":42,"group_id":9970,"title":"13.0","description":"","state":"closed","created_at":"2019-09-04T15:20:39.024Z","updated_at":"2020-10-08T12:00:55.725Z","due_date":"2020-05-17","start_date":"2020-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/42"},"assignees":[{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},{"id":3199302,"username":"dmishunov","name":"Denys Mishunov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d85e45af29611ac2c1395e3c3d6ec5d6?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmishunov"}],"author":{"id":2756898,"username":"tomi","name":"Tomislav Nikić","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2756898/avatar.png","web_url":"https://gitlab.com/tomi"},"type":"ISSUE","assignee":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"user_notes_count":23,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/26851","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/26851","notes":"https://gitlab.com/api/v4/projects/278964/issues/26851/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/26851/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#26851","relative":"#26851","full":"gitlab-org/gitlab#26851"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24689718,"iid":26842,"project_id":278964,"title":"Research Spike: Use GitLab's Feature Flags for GitLab's developments","description":"# Description\n\nIn terms of ~Dogfooding, we should use GitLab's [feature flag system](https://docs.gitlab.com/ee/user/project/operations/feature_flags.html)\nin our [development](https://docs.gitlab.com/ee/development/feature_flags/).\n\nThis is preliminary work for https://gitlab.com/gitlab-org/release/framework/issues/32.\n\n# Aspects\n\nThe aspects must be addressed for dogfooding on gitlab.com:\n\n## Aspect: The new architecture is reliable enough as well as current `Feature` (`Flipper`) is. \n\nThis aspect focuses on performance, resiliency and scalability of the new architecture.\n\n### Key points\n\n- [unleash-ruby-client](https://github.com/Unleash/unleash-client-ruby) might need some improvement if we run it on  gitlab.com scale. It creates a ruby `Thread` per puma thread, sidekiq process and spring, which is hammering Feature Flag Server.\n- We'd need an efficient cache mechanism that reduces performance issue. For example, Feature Flag Client should cache the flag data into redis in order to reduce network I/O between server and client sides.\n  Flipper allows to use [multi-level cache](https://github.com/jnunemaker/flipper/blob/master/docs/Optimization.md): L1 =\u003e Process memory cache L2 =\u003e Redis cache. If the cache is not found, the client library fetches the flag data from database.\n- We need to clarify error handling and fallback policy. For example, if Feature Flag Server is not reachable, how  do the flags behave?\n- We need to make sure that flag states are reflected in a timely manner. For example, in unleash-ruby-client, you can set a polling interval, if the interval is 1 minute, the flag state won't be reflected for a minute. \n\n## Aspect: The new architecture is flexible enough to allow developers to achieve their tasks\n\nThis aspect focuses on capability of the new architecture.\n\n### Key Points\n\n- Today, we have many different usages with `Feature`. For example, `Gitlab::Experimentation` is built on top of `Feature` library and does a bunch of extra stuff that current GitLab Feature Flag cannot handle, e.g. event tracking.\n  Ideally, we should have one interface to `Feature` let developers achieve their mission, such as A/B testing, experiment and safe rollout.\n- We need to cover the most common usage - enabling a feature flag on a specific actor (e.g. project, group and user). You can read the guideline of Feature Flag For GitLab Developments in https://docs.gitlab.com/ee/development/feature_flags/development.html.\n- On-premises instances and local development instances (GDK/GCK) might need Feature Flag Server, however, this should be optional as it's cumbersome to prepare it for each GitLab instance.\n\n# Proposal: Support [Flipper schema/API](https://github.com/jnunemaker/flipper/blob/master/docs/api/README.md) in GitLab's Feature Flags\n\nToday, GitLab's feature flag only supports [Unleash schema/API](https://github.com/Unleash/unleash/blob/master/docs/api/index.md), but it can also support any schema/API such as [Flipper API](https://github.com/jnunemaker/flipper/blob/master/docs/api/README.md).\n\n## Benefits\n\n- We just need a minimal change to `Feature` class (a client library for GitLab). All we need is just adding Flipper HTTP adapter.\n- It's performant. We can continue using L1/L2 caches of `Feature` class. Most of the times, flag data are returned from cache layers, so it barely requests to Feature Flag server.\n- We can expect more active users in GitLab's feature flag as [Flipper](https://github.com/facebook/flipper) is one of the most popular feature flag system in ruby community (2.2k stars). The new API can be used by any Flipper projects regardless of the scale (Ruby projects only, for the other language, unleash APIs can be used).\n- This prevents us from building an unleash specific UI/UX, which allows us to look GitLab Feature Flag as a generic interface more than ever.\n- It can easily work with extensions (YAML, experimentation.rb, etc).\n\n## Implementation/Usage details\n\n- As an alternative approach of polling, we're going to pursue the approach to fetch each flag data every time when a flag is evaluated. (Something similar to #26842)\n- We allow administorators to choose Database adapter or HTTP adapter to control flags in GitLab. The default is database adapter. If HTTP adapter is chosen, it connects to a feature flag server, which is an external instance of GitLab.\n- We likely use HTTP adapter on dev.gitlab.org, staging.gitlab.com and gitlab.com instances only. The other instances (e.g. on-premises ones) likely keep using Database adapter.\n- To switch adapter, we provide a rake task to migrate flag data from Database to HTTP, or vice-versa. We can use  [the import feature provided by Flipper](https://github.com/jnunemaker/flipper/blob/master/docs/Adapters.md#swapping-adapters)\n- Developers can change flags via Chatops or rails console (i.e. Feature.enable). You can see the strategy vs gate mapping below.\n- Developers cannot change flags in GitLab's Feature Flag UI (i.e. readonly). This is because chatops has some extended features e.g. freeze all flags during a production incident. We'll likely follow this up.\n- As always, Feature class is the central place to control feature flags in GitLab.\n\n## Feature Flag Servers\n\n- dev.gitlab.org ... https://ops.gitlab.net/gitlab-org/feature_flags/dev \n- staging.gitlab.com ... https://ops.gitlab.net/gitlab-org/feature_flags/staging\n- gitlab.com ... https://ops.gitlab.net/gitlab-org/feature_flags/production\n\n## Adapter hierarchy\n\n- L1: Process Memory\n- L2: Redis\n- Persistent storage: Choose from 1) Active Record adapter (current) 2) HTTP adapter (GitLab's Feature Flag)\n\n## Schema Mapping\n\n|GitLab UI      | Unleash's strategy | Flipper's gate | Example |\n| ------        | ------ | ------ | ------ |\n|All users      | `default` | `boolean` | `true` |\n|User IDs       | `userWithId` | `actors` | `Project:123` |\n|Percent rollout| `gradualRolloutUserId` | `percentage_of_actors` | 50 |\n\n**Flipper**\n\n`GET /features`\n\n```\nfeatures:\n  - key:\n    state: \n    gates:\n      - key: (boolean/groups/actors/percentage_of_actors/percentage_of_time)\n        name:\n        value:\n```\n\n**Unleash**\n\n`GET features`\n\n```\nversion:\nfeatures:\n  - name:\n    description:\n    enabled:\n    strategies:\n      - name:\n        parameters:\n```\n\n## GitLab v4 public APIs\n\n```\n# Flipper\nGET /api/:version/feature_flags/flipper/:project_id/features(.:format) - \nGET /api/:version/feature_flags/flipper/:project_id/features/:feature_name(.:format) - \n\n# Unleash\nGET /api/:version/feature_flags/unleash/:project_id/features(.:format) - Get a list of features (deprecated, v2 client support)\nGET /api/:version/feature_flags/unleash/:project_id/client/features(.:format) - Get a list of features\n```\n\n# Roadmap\n\n- Support Flipper API in GitLab Feature Flag\n- Allow to configure HTTP adapter with gitlab.yml\n- Support `percentage_of_time` gate =\u003e https://gitlab.com/gitlab-org/gitlab/-/issues/36380\n- Documentation for new architecture\n- Configure HTTP apdater on dev.gitlab.org\n  - 1. Announce when we reconfigure the instance and developers cannot update feature flags during maintaince.\n  - 1. Update dev.gitlab.org to use HTTP adapter which points to a project in ops.gitlab.net.\n  - 1. Migrate data from ActiveRecordAdapter to HTTPAdapter\n  - 1. Announce that migration is done. Developers can update feature flags via chatops again.\n- Configure HTTP apdater on stanging.gitlab.com\n  - 1. Announce when we reconfigure the instance and developers cannot update feature flags during maintaince.\n  - 1. Update dev.gitlab.org to use HTTP adapter which points to a project in ops.gitlab.net.\n  - 1. Migrate data from ActiveRecordAdapter to HTTPAdapter\n  - 1. Announce that migration is done. Developers can update feature flags via chatops again.\n- Evaluate the change on dev.gitlab.org and stanging.gitlab.com for a month.\n  - Performance monitoring.\n  - Fixing issues.\n- Configure HTTP apdater on gitlab.com\n  - 1. Announce when we reconfigure the instance and developers cannot update feature flags during maintaince.\n  - 1. Update dev.gitlab.org to use HTTP adapter which points to a project in ops.gitlab.net.\n  - 1. Migrate data from ActiveRecordAdapter to HTTPAdapter\n  - 1. Announce that migration is done. Developers can update feature flags via chatops again.\n\n# Follow-up\n\n- Allow develoers to update Feature Flags in UI.\n  - Webhook to invalidate cache\n- Make Flipper API support GA\n\n# TODO\n\n- [x] Finish PoC for the latest proposal =\u003e https://gitlab.com/gitlab-org/gitlab/-/merge_requests/34152\n- [ ] Break down the issue and weight it.\n\n\u003cdetails\u003e\n\u003csummary\u003eold proposals\u003c/summary\u003e\n## Proposal: Support [Flipper schema/API](https://github.com/jnunemaker/flipper/blob/master/docs/api/README.md) in GitLab's Feature Flags\n\nToday, GitLab's feature flag only supports [Unleash schema/API](https://github.com/Unleash/unleash/blob/master/docs/api/index.md), but it can also support any schema/API such as [Flipper API](https://github.com/jnunemaker/flipper/blob/master/docs/api/README.md).\n\nThis brings some benefits that:\n\n- We don't need significant change in `Feature` class (FF-client library for GitLab). What needs to be changed is basically Flipper HTTP adapter in `Feature` class. L1/L2 caches and database as persistent store work as-is. Flag is fetched in the following order 1. Process Memory 2. Redis 3. GitLab's FF-server 4. Database. Mostly flag data are returned from redis, so it barely hits HTTP adapter.\n- We can expand user base of GitLab's feature flag as [Flipper](https://github.com/facebook/flipper) is very popular project in ruby community (7.1k stars). The new API can be used by any Flipper projects regardless of the scale (Ruby projects only, for the other language we still can provide unleash APIs).\n- This would be a great opportunity to generalize our unleash specific implementation.\n- It can easily work with extensions (YAML, experimentation.rb, etc).\n- PoC: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/33683\n\n### Adapter hierarchy\n\n- L1: Process Memory\n- L2: Redis\n- Persistent storage: Choose from 1) Active Record adapter (current) 2) HTTP adapter (GitLab's Feature Flag)\n\n### Key points\n\n- If nothing is configured, `Feature` class behaves exactly the same with the current behavior.\n- If http adapter is configured, you can _optionally_ control the flag state with GitLab Feature Flag.\n- If a flag data is persisted in both database and http adapater, http adapter takes precedence over AR adapter.\n- No migration required from AR adapter to HTTP adapter. We can gradually switch the feature flag workflow to GitLab feature flag.\n- No immediate workflow change required in daily developments. Engineers still can use `Feature` class as they do today.\n- Chatops (`Feature`) updates flag states in database. HTTP adapter is read-only mode and doesn't accept CRUD via chatops yet.\n- On-premises/local development instance still uses database as persistent store. We don't need documentation change for alpha features that hidden by a flag.\n- We need to keep maintaining schema mapping between unleash and flipper.\n- If there is an unsupported gate in GitLab Feature Flag (e.g. `percentage_of_time`), engineers should use Flipper with ActiveRecord adapter instead GitLab Feature Flag (HTTP adapter).\n- TODO: Cache isn't invalided in `Feature` if engineers updated a flag state in GitLab Feature Flag. GitLab Feature Flag must request to `Feature` to invalidate the cache on a specific feature key. (Maybe we can create a new endpoint in `API::Features`?)\n\n### Cache invalidation\n\n```\nFeature Flag Server:\n  - GET api/v4/flipper/features\n\nWorkhorse:\n  CacheInvalidation:\n    - Polling flag data from Feature Flag Server (every 15sec)\n    - If a feature state is changed, it request rails to invalidate the L1/L2 cache.\n    - New endpoints: `api/v4/features/clear_cache` or `api/v4/features/clear_cache/:name`\n\nGitLab-Rails\n  - L1 Process Memory\n  - L2 Redis\n  - HTTP adapter (which connects to GitLab Feature Flag)\n  - Active Record\n```\n\n### Classes\n\n- Flipper::Adapters::MultiPersistentLayer ... The adapter to combine multiple persistent layers and return flag data from the highest precedence.\n- Flipper::Adapters::ReadonlyHttp ... Readonly adapter for HTTP\n\n### GitLab v4 public APIs\n\n```\n# Flipper\nGET /api/:version/feature_flags/flipper/:project_id/features(.:format) - \nGET /api/:version/feature_flags/flipper/:project_id/features/:feature_name(.:format) - \n\n# Unleash\nGET /api/:version/feature_flags/unleash/:project_id/features(.:format) - Get a list of features (deprecated, v2 client support)\nGET /api/:version/feature_flags/unleash/:project_id/client/features(.:format) - Get a list of features\n```\n\n#### Schema difference\n\nFlipper\n\n`GET /features`\n\n```\nfeatures:\n  - key:\n    state: \n    gates:\n      - key: (boolean/groups/actors/percentage_of_actors/percentage_of_time)\n        name:\n        value:\n```\n\n`GET /features/{feature_name}`\n\n```\nkey:\nstate: \ngates:\n  - key:\n    name:\n    value:\n```\n\nUnleash\n\n`GET features`\n\n```\nversion:\nfeatures:\n  - name:\n    description:\n    enabled:\n    strategies:\n      - name:\n        parameters:\n```\n\n\n## Proposal: Introduce a proxy server as part of GitLab services\n\n- Single service to poll flag data\n- Server-side flag state computation (e.g. gates/strategy)\n- Reduce HTTP traffic between gitlab.com and FF server\n- LaunchDarkly provides [Relay Proxy](https://docs.launchdarkly.com/home/advanced/relay-proxy/using#using-the-proxy-in-different-modes)\n- [Unleash Proxy](https://www.unleash-hosted.com/articles/the-unleash-proxy)\n- This should be optional. Especially recommended for large scale architecture.\n- Allows frontend only flag (i.e. javascript)\n- Still we need a solution about how to create an unleash adapter in `Feature`\n\n\n```mermaid\nsequenceDiagram\n    participant FF Server\n    participant Workhorse\n\tparticipant FF Proxy\n    participant Rails\n\tNote right of FF Proxy: Proxy returns cached results\n\tRails-\u003e\u003eFF Proxy: GET /api/v4/operations/features/:id\n\tactivate FF Proxy\n\tFF Proxy--\u003e\u003eRails: Returns computed flag state (String)\n\tdeactivate FF Proxy\n\tNote left of FF Proxy: Proxy periodically fetches all flag data from FF Server\n\tFF Proxy-\u003e\u003eFF Server: GET /api/v4/operations/features\n\tactivate FF Server\n\tFF Server--\u003e\u003eFF Proxy: Returns all flag data (JSON)\n\tNote left of FF Proxy: Proxy periodically reports the metrics of flag usage\n\tFF Proxy-\u003e\u003eFF Server: POST /api/v4/operations/metrics\n\tactivate FF Server\n\tFF Server--\u003e\u003eFF Proxy: Returns all flag data (JSON)\n```\n\n## Proposal: Generalize Feature Flag system and implement unleash adapter\n\n- PoC: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/33852\n\nThis MR accomplishes the following things:\n\n* Generalize the `Feature` class. Currently, it heavily depends on `Flipper` implementation thus it's very hard to extend for the other FF tools, such as Unleash. We create adapters in `FeatureFlag::Adapters` domain to make the `Feature` class compatible with any adapters. The system chooses one of the adapters always and keeps using it until the configuration file is changed.\n* Unleash configuration is defined in gitlab.yml/gitlab.rb. This allows us to turn on Unleash-FF on any environments flexibly. You can start using it in local environment, even today.\n* Initializing Unleash clients at the initializers/unleash.rb (for Unicorn) or puma.rb (for Puma). This is the same initialization approach written in official guideline. https://github.com/Unleash/unleash-client-ruby\n* If unleash is disabled in gitlab.yml, Flipper is used always, like today.\n* Logging unleash client's activity in `unleash.log` with the structured logging.\n* Per Project/Group/User gate is capable with `userWithId` strategy (Although, it requires https://gitlab.com/gitlab-org/gitlab-ee/issues/14017 to be fixed at first). If you want to enable a particular feature on a project, then define a param in the convention `\u003cThe class of Active Record\u003e:\u003cThe id of the row\u003e` e.g. `Project:123`\n* **This still has a problem that it basically uses polling mechanizm (unleash-ruby-client), therefore it doesn't meet criteria from [the performance aspect](https://gitlab.com/gitlab-org/gitlab/-/issues/26842#aspect-the-new-architecture-is-reliable-enough-as-well-as-current-feature-flipper-is)**\n\u003c/details\u003e","state":"closed","created_at":"2019-02-20T08:55:39.985Z","updated_at":"2021-03-10T03:33:13.833Z","closed_at":"2020-06-15T09:17:33.277Z","closed_by":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"labels":["Category:Feature Flags","Dogfooding","Dogfooding::Use Existing Feature","Release::P1","cicd::active","devops::release","group::release","internal customer","missed-deliverable","missed:12.3","missed:12.4","missed:12.5","missed:12.6","needs weight","production request","team::Delivery","workflow::in dev"],"milestone":{"id":1112145,"iid":47,"group_id":9970,"title":"13.1","description":"","state":"closed","created_at":"2020-01-03T12:28:30.160Z","updated_at":"2020-10-08T12:01:07.361Z","due_date":"2020-06-17","start_date":"2020-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/47"},"assignees":[{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"}],"author":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"type":"ISSUE","assignee":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"user_notes_count":83,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/26842","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":1},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/26842","notes":"https://gitlab.com/api/v4/projects/278964/issues/26842/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/26842/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#26842","relative":"#26842","full":"gitlab-org/gitlab#26842"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3367,"epic":{"id":56567,"iid":3367,"title":"Dogfooding GitLab Feature Flag","url":"/groups/gitlab-org/-/epics/3367","group_id":9970,"human_readable_end_date":"Jun 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18429033,"iid":9869,"project_id":278964,"title":"Insights Controller action for Filtered Merge Requests By Label Category","description":"This action aims to provide data to cover the following charts:\n\n### Charts\n\n##### MRs Merged per label per category per period Stacked Bar Chart\n\n| # | Name | Example\n| ------ | ------ | ----- |\n| 6 | Throughputs for Teams               | [Link](https://quality-dashboard.gitlap.com/groups/gitlab-org/teams/plan) |\n\nThese charts require:\n- A filter label\n- A number of category labels\n\nThis chart finds:\n- Merge requests with a particular status\n- With a particular \"filter\" label attached\n- Group issuables by period merged\n- Categorises the resulting issues by category labels to produces a stacked bar chart\n\n6) Throughputs for Teams\n- Filter label\n  - Team label\n- Category labels:\n  - MR categories: ~bug ~\"Community contribution\" ~feature etc...\n- Relevant period: Weeks\n\nPossible example yml\n```\nthroughputs_for_teams:\n  title: Throughputs For Teams\n  type: stacked-bar\n  query:\n    params:\n      issuable_type: merge_request\n      issuable_state: merged\n      filter_labels: ['Create']\n      category_labels: ['bug','feature','backstage']\n```","state":"closed","created_at":"2019-02-20T05:56:54.902Z","updated_at":"2019-08-12T15:06:43.392Z","closed_at":"2019-03-27T16:50:56.486Z","closed_by":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Enterprise Edition","Quality","insights","type::feature"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":423915,"username":"godfat","name":"Lin Jen-Shin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8c73dab2ecd23d5b5627a0235ae2f9b1?s=80\u0026d=identicon","web_url":"https://gitlab.com/godfat"}],"author":{"id":2097582,"username":"meks","name":"Mek Stittri","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2097582/avatar.png","web_url":"https://gitlab.com/meks"},"type":"ISSUE","assignee":{"id":423915,"username":"godfat","name":"Lin Jen-Shin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8c73dab2ecd23d5b5627a0235ae2f9b1?s=80\u0026d=identicon","web_url":"https://gitlab.com/godfat"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9869","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9869","notes":"https://gitlab.com/api/v4/projects/278964/issues/9869/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9869/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9869","relative":"#9869","full":"gitlab-org/gitlab#9869"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":725,"epic":{"id":3055,"iid":725,"title":"Insights: Build GitLab Insights as a native GitLab feature","url":"/groups/gitlab-org/-/epics/725","group_id":9970,"human_readable_end_date":"Apr 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18427473,"iid":9867,"project_id":278964,"title":"Insights Controller action for Filtered Issues By Label Category","description":"This action aims to provide data to cover the following charts:\n\n### Charts\n\n##### Filtered Issues By Label Category Stacked Bar\n\nCharts covered:\n\n| # | Name | Example\n| ------ | ------ | ----- |\n| 1 | Bugs by Severity                    | [Link](https://quality-dashboard.gitlap.com/groups/gitlab-org/bugs_by_severity) |\n| 2 | Bugs by Priority                    | [Link](https://quality-dashboard.gitlap.com/groups/gitlab-org/bugs_by_priority) |\n\nThese charts all filter issues by a particular \"filter\" label and then collect the resulting issues into categories provided by \"category\" labels\n\n1) Bugs by Severity\n  - Filter label: ~bug\n  - Category labels:\n    - ~S1 \n    - ~S2 \n    - ~S3 \n    - ~S4 \n2) Bugs by Priority\n  - Filter label: ~bug \n  - Category labels:\n    - ~P1 \n    - ~P2 \n    - ~P3 \n    - ~P4\n\nFor example, bugs by severity\n- Finds all issues with the ~bug label\n- Counts resulting issues with the ~P1 / ~P2 etc labels\n\nPossible example yml\n```\ncharts:\n  - name: bugs_by_severity\n    title: Bugs By Severity (stacked bar)\n    chart_type: stacked_bar\n    query:\n      name: filtered_issues_by_label_category\n      params:\n        issuable_state: 'Open'\n        filter_labels: ['bug']\n        category_labels: ['S1','S2','S3','S4']\n```\n\nWe should make the filter labels and category labels configurable when defining the chart in the yml file\n\n##### Filtered Issues By Label Category Line\n\n| # | Name | Example\n| ------ | ------ | ----- |\n| 3 | Bugs by Team                        | [Link](https://quality-dashboard.gitlap.com/groups/gitlab-org/bugs_by_team) |\n\nThese charts are very similar to \"Filtered Issues By Label Category Stacked Bar\" and will likely use the same endpoint but a different chart config in the yml file\n\n3) Bugs by Team\n  - Filter label: ~bug \n  - Category labels:\n    - ~Plan \n    - ~Create \n    - etc...\n\nPossible example yml\n```\ncharts:\n  - name: bugs_by_team\n    title: Bugs By Team (line)\n    chart_type: line\n    query:\n      name: filtered_issues_by_label_category\n      params:\n        issuable_state: 'Open'\n        filter_labels: ['bug']\n        category_labels: ['Plan','Create','Manage'...]\n```\n\n##### Filtered Issues By Label Category Pie\n\n| # | Name | Example\n| ------ | ------ | ----- |\n| 4 | Bug Classification                  | [Link](https://quality-dashboard.gitlap.com/groups/gitlab-org/bug_classification) |\n\nThese charts are very similar to \"Filtered Issues By Label Category Stacked Bar\" and will likely use the same endpoint but a different chart config in the yml file\n\n4a) Bug Classification (Severity)\n  - Filter label: ~bug\n  - Category labels:\n    - ~S1 \n    - ~S2 \n    - ~S3 \n    - ~S4 \n\n4b) Bug Classification (Priority)\n  - Filter label: ~bug\n  - Category labels:\n    - ~P1 \n    - ~P2 \n    - ~P3 \n    - ~P4 \n\nPossible example yml\n```\ncharts:\n  - name: bugs_by_severity\n    title: Bugs By Severity (pie)\n    chart_type: pie\n    query:\n      name: filtered_issues_by_label_category\n      params:\n        issuable_state: 'Open'\n        filter_labels: ['bug']\n        category_labels: ['S1','S2','S3','S4']\n```","state":"closed","created_at":"2019-02-20T05:56:47.930Z","updated_at":"2019-08-12T15:06:43.399Z","closed_at":"2019-03-26T09:02:50.260Z","closed_by":{"id":423915,"username":"godfat","name":"Lin Jen-Shin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8c73dab2ecd23d5b5627a0235ae2f9b1?s=80\u0026d=identicon","web_url":"https://gitlab.com/godfat"},"labels":["Enterprise Edition","Quality","insights","type::feature"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":2097582,"username":"meks","name":"Mek Stittri","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2097582/avatar.png","web_url":"https://gitlab.com/meks"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":3,"merge_requests_count":2,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9867","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9867","notes":"https://gitlab.com/api/v4/projects/278964/issues/9867/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9867/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9867","relative":"#9867","full":"gitlab-org/gitlab#9867"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":725,"epic":{"id":3055,"iid":725,"title":"Insights: Build GitLab Insights as a native GitLab feature","url":"/groups/gitlab-org/-/epics/725","group_id":9970,"human_readable_end_date":"Apr 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18379338,"iid":9841,"project_id":278964,"title":"Geo: Unable to compare branches on secondary","description":"### Summary\n\nComparing branches on a secondary instance is not possible. When clicking the `Compare` button, the red `You cannot perform write operations on a read-only instance` banner is displayed.\n\n### Steps to reproduce\n\n1. Navigate to the branches tab of a repository on the secondary node.\n2. Click `Compare`\n3. Red `You cannot perform write operations on a read-only instance` banner is displayed.\n\n### What is the current *bug* behavior?\n\nUnable to compare branches on a Geo secondary node.\n\n### What is the expected *correct* behavior?\n\nShould be able to compare branches on Geo secondary node.\n\n### Relevant logs and/or screenshots\n\nCustomer ticket: https://gitlab.zendesk.com/agent/tickets/114646 (internal use)\n\nObserved on 11.5.4-ee and 11.7.0-ee\n\n\n/cc @rnienaber @akaemmerle","state":"closed","created_at":"2019-02-19T17:36:27.007Z","updated_at":"2019-12-16T14:47:31.301Z","closed_at":"2019-10-03T16:34:33.869Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["Category:Geo Replication","Enterprise Edition","auto updated","customer","devops::systems","group::geo","missed:11.9","priority::3","severity::3","type::bug"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"}],"author":{"id":1625112,"username":"abuerer1","name":"Aric Buerer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1625112/avatar.png","web_url":"https://gitlab.com/abuerer1"},"type":"ISSUE","assignee":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"user_notes_count":4,"merge_requests_count":1,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9841","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9841","notes":"https://gitlab.com/api/v4/projects/278964/issues/9841/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9841/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9841","relative":"#9841","full":"gitlab-org/gitlab#9841"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18375746,"iid":9838,"project_id":278964,"title":"Hide labels from issue board cards","description":"~\"internal customer\" since GitLabbers use boards and many labels so this problem is serious for GitLabbers.\n\n---\n\n### Description\n\n- Toggle on every issue board.\n- When you change the toggle, all labels are hidden/shown on all issue cards in the board. The label still appears at \n- When you go to an issue board, all labels are shown by default, and you have to click the toggle to change it. In https://gitlab.com/gitlab-org/gitlab-ee/issues/9895, we will save the choice.\n- ~\"GitLab Premium\" feature.\n\n#### Analytics\n\nAdd a structured event in Snowplow for the toggle:\n\n- `('trackStructEvent',document.body.dataset.page,'toggle','show_labels','on')`\n- `('trackStructEvent',document.body.dataset.page,'toggle','show_labels','off')`\n\n| With labels | Without |\n|-------------|---------|\n| ![Screen_Shot_2019-02-19_at_11.31.13_AM](https://gitlab.com/gitlab-org/gitlab-ee/uploads/139ba82f440c100b79b7fb661efae2e9/Screen_Shot_2019-02-19_at_11.31.13_AM.png) | ![Screen_Shot_2019-02-19_at_11.31.43_AM](https://gitlab.com/gitlab-org/gitlab-ee/uploads/03ec1e5471e17a4cb9e110b84787da54/Screen_Shot_2019-02-19_at_11.31.43_AM.png) |\n\n`Show labels` toggle:\n\n| |  |\n| ------ | ------ |\n| ![Screen_Shot_2019-02-19_at_2.49.13_PM](/uploads/d6f8b2fc31f9aa89f517c361c27fe74d/Screen_Shot_2019-02-19_at_2.49.13_PM.png) | ![Screen_Shot_2019-02-19_at_2.49.18_PM](/uploads/6d7300673c5c89e24088c999549d076e/Screen_Shot_2019-02-19_at_2.49.18_PM.png) |\n\n\n### Previous proposal\n\n\u003cdetails\u003e\nDesign from https://gitlab.com/gitlab-org/gitlab-ce/issues/47008.\n\nThere should be a toggle in every issue board. And it becomes an instance-wide setting. So that when you change the toggle in one board, it carries over whenever you visit another board.\n\nThe default is expanded so you can see all labels and their titles.\n\n![image](/uploads/95a3efca971ab893ab13fe721fa8fb4d/image.png)\n\u003c/details\u003e","state":"closed","created_at":"2019-02-19T15:22:48.609Z","updated_at":"2022-05-19T16:13:46.144Z","closed_at":"2019-11-19T15:23:33.363Z","closed_by":{"id":201566,"username":"annabeldunstone","name":"Annabel Dunstone Gray","state":"active","avatar_url":"https://secure.gravatar.com/avatar/85c0203926134720f9a9aa8c6e264c78?s=80\u0026d=identicon","web_url":"https://gitlab.com/annabeldunstone"},"labels":["Category:Team Planning","Deliverable","Enterprise Edition","GitLab Premium","UX solution validation","boards","customer","depth","devops::plan","frontend","group::project management","internal customer","labels","missed-deliverable","missed:12.4","type::feature","workflow::production"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":201566,"username":"annabeldunstone","name":"Annabel Dunstone Gray","state":"active","avatar_url":"https://secure.gravatar.com/avatar/85c0203926134720f9a9aa8c6e264c78?s=80\u0026d=identicon","web_url":"https://gitlab.com/annabeldunstone"},{"id":4545397,"username":"cngo","name":"Coung Ngo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4545397/avatar.png","web_url":"https://gitlab.com/cngo"}],"author":{"id":711023,"username":"victorwu","name":"Victor Wu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/711023/avatar.png","web_url":"https://gitlab.com/victorwu"},"type":"ISSUE","assignee":{"id":201566,"username":"annabeldunstone","name":"Annabel Dunstone Gray","state":"active","avatar_url":"https://secure.gravatar.com/avatar/85c0203926134720f9a9aa8c6e264c78?s=80\u0026d=identicon","web_url":"https://gitlab.com/annabeldunstone"},"user_notes_count":44,"merge_requests_count":0,"upvotes":5,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9838","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9838","notes":"https://gitlab.com/api/v4/projects/278964/issues/9838/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9838/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9838","relative":"#9838","full":"gitlab-org/gitlab#9838"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":849,"epic":{"id":4476,"iid":849,"title":"Displaying labels on issue boards","url":"/groups/gitlab-org/-/epics/849","group_id":9970,"human_readable_end_date":"Nov 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24689675,"iid":26823,"project_id":278964,"title":"Fix nil state_id column when importing projects from GitHub","description":"`state_id` column is being set to `nil` when importing projects from GitHub. \n\nWe should fix the import and run migrations to sync `state_id` values with `state` column before moving forward with https://gitlab.com/gitlab-org/gitlab-ce/issues/61301 which removes it. \n  \nThe complete plan to move `state` column to `state_id` can be found here: https://gitlab.com/gitlab-org/gitlab-ce/issues/51789","state":"closed","created_at":"2019-02-19T12:48:31.835Z","updated_at":"2022-05-19T16:13:56.923Z","closed_at":"2019-09-25T14:34:00.744Z","closed_by":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"labels":["backend","devops::plan","group::product planning","merge requests","missed-SLO","missed:12.3","priority::2","severity::4","type::bug","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"}],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"user_notes_count":24,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/26823","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/26823","notes":"https://gitlab.com/api/v4/projects/278964/issues/26823/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/26823/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#26823","relative":"#26823","full":"gitlab-org/gitlab#26823"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18367790,"iid":9831,"project_id":278964,"title":"Roadmap backstage enhancements","description":"Summary\n---\n\nThis issue lists enhancements that can be made to Roadmap vue app in order to make it more in line with rest of apps at GitLab.\n\n*  [x] Break [`sortEpics`](https://gitlab.com/gitlab-org/gitlab-ee/blob/master/ee/app/assets/javascripts/roadmap/utils/roadmap_utils.js#L411) method into multiple testable smaller methods.\n    * As of now, `sortEpics` is doing lot of stuff where adding tests for call combinations isn't feasible, as a result we ran into https://gitlab.com/gitlab-org/gitlab-ee/issues/9829 which could've been avoided if we had more concise test cases.\n*  [x] Convert into a Vuex app ~~and discard `eventHub`~~ (We've decided to keep `eventHub` due to simplicity of scroll events handling).\n    *  Roadmap doesn't include much of a user-interaction as of now and can be converted into Vuex app without much effort, this would be useful once we start adding more user interactions in future releases. Also, it would be a larger effort later if we don't do this now. :shrug:","state":"closed","created_at":"2019-02-19T11:14:53.187Z","updated_at":"2022-05-19T16:13:45.863Z","closed_at":"2019-03-27T13:19:42.175Z","closed_by":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"labels":["Category:Portfolio Management","Enterprise Edition","backstage [DEPRECATED]","devops::plan","epics","frontend","maintenance::refactor","roadmaps"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"}],"author":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"type":"ISSUE","assignee":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"user_notes_count":1,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9831","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":7,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9831","notes":"https://gitlab.com/api/v4/projects/278964/issues/9831/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9831/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9831","relative":"#9831","full":"gitlab-org/gitlab#9831"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24689654,"iid":26816,"project_id":278964,"title":"Jira service template can't be activated without re-entering password","description":"### Summary\n\nAt my organization we use GitLab together with Jira and have configure an instance-level service template for the Jira integration. This prevents having to reenter the URL/username/password for the Jira service user in each project.\n\nRecently this has stopped working because the form validation for a project-level service activation doesn't allow you to activate a service without a password.\n\n### Steps to reproduce\n\n1. Define an instance-level service template\n1. Attempt to activate the service in a project without re-entering the username/password\n\n### What is the current *bug* behavior?\n\nService user password has to be entered at each activation\n\n### What is the expected *correct* behavior?\n\nPassword from global service template should be reusable\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\nSystem information\nSystem:\nProxy:          no\nCurrent User:   git\nUsing RVM:      no\nRuby Version:   2.5.3p105\nGem Version:    2.7.6\nBundler Version:1.16.6\nRake Version:   12.3.2\nRedis Version:  3.2.12\nGit Version:    2.18.1\nSidekiq Version:5.2.3\nGo Version:     go1.11.4 linux/amd64\n\nGitLab information\nVersion:        11.7.5-ee\nRevision:       ed04633\nDirectory:      /opt/gitlab/embedded/service/gitlab-rails\nDB Adapter:     postgresql\nDB Version:     9.6.11\nURL:            https://gitlab.iavgroup.local\nHTTP Clone URL: https://gitlab.iavgroup.local/some-group/some-project.git\nSSH Clone URL:  git@gitlab.iavgroup.local:some-group/some-project.git\nElasticsearch:  no\nGeo:            no\nUsing LDAP:     yes\nUsing Omniauth: yes\nOmniauth Providers:\n\nGitLab Shell\nVersion:        8.4.4\nRepository storage paths:\n- default:      /var/opt/gitlab/git-data/repositories\nHooks:          /opt/gitlab/embedded/service/gitlab-shell/hooks\nGit:            /opt/gitlab/embedded/bin/git\n\u003c/pre\u003e\n\u003c/details\u003e","state":"closed","created_at":"2019-02-19T09:10:13.263Z","updated_at":"2022-11-22T20:20:09.809Z","closed_at":"2019-11-13T13:41:01.522Z","closed_by":{"id":16943,"username":"Andysoiron","name":"Andy Soiron","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/16943/avatar.png","web_url":"https://gitlab.com/Andysoiron"},"labels":["Category:Integrations","Integration::Jira","backend","customer","devops::manage","group::ecosystem [DEPRECATED]","priority::3","severity::3","type::bug"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":16943,"username":"Andysoiron","name":"Andy Soiron","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/16943/avatar.png","web_url":"https://gitlab.com/Andysoiron"}],"author":{"id":551322,"username":"bkintz","name":"Brian Kintz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/551322/avatar.png","web_url":"https://gitlab.com/bkintz"},"type":"ISSUE","assignee":{"id":16943,"username":"Andysoiron","name":"Andy Soiron","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/16943/avatar.png","web_url":"https://gitlab.com/Andysoiron"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/26816","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/26816","notes":"https://gitlab.com/api/v4/projects/278964/issues/26816/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/26816/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#26816","relative":"#26816","full":"gitlab-org/gitlab#26816"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1691,"epic":{"id":10252,"iid":1691,"title":"Improving Jira Integration Configuration","url":"/groups/gitlab-org/-/epics/1691","group_id":9970,"human_readable_end_date":"Apr 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18317810,"iid":9821,"project_id":278964,"title":"Master failing at rspec-pg-ee 2/10","description":"Master is failing: https://gitlab.com/gitlab-org/gitlab-ee/-/jobs/163081228\n\nFailures seem related to ~Geo:\n\n```\n...\n-- create_table(\"file_registry\", {:force=\u003e:cascade})\n   -\u003e 0.0719s\n-- create_table(\"job_artifact_registry\", {:force=\u003e:cascade})\n   -\u003e 0.0621s\n-- create_table(\"project_registry\", {:force=\u003e:cascade})\n   -\u003e 0.2587s\n-- initialize_schema_migrations_table()\n   -\u003e 0.0228s\n\u001b[32;1m$ date\u001b[0;m\nMon Feb 18 10:12:49 UTC 2019\n\u001b[32;1m$ JOB_NAME=( $CI_JOB_NAME )\u001b[0;m\n\u001b[32;1m$ TEST_TOOL=${JOB_NAME[0]}\u001b[0;m\n\u001b[32;1m$ export KNAPSACK_TEST_FILE_PATTERN=\"ee/spec/**{,/*/**}/*_spec.rb\" KNAPSACK_GENERATE_REPORT=true CACHE_CLASSES=true\u001b[0;m\n\u001b[32;1m$ export KNAPSACK_REPORT_PATH=knapsack/${CI_PROJECT_NAME}/${TEST_TOOL}_node_${CI_NODE_INDEX}_${CI_NODE_TOTAL}_report.json\u001b[0;m\n\u001b[32;1m$ cp ${EE_KNAPSACK_RSPEC_SUITE_REPORT_PATH} ${KNAPSACK_REPORT_PATH}\u001b[0;m\n\u001b[32;1m$ scripts/gitaly-test-spawn\u001b[0;m\nChecking gitaly-ruby bundle...\nWarning: the running version of Bundler (1.17.2) is older than the version that created the lockfile (1.17.3). We suggest you upgrade to the latest version of Bundler by running `gem install bundler`.\nThe Gemfile's dependencies are satisfied\nTrying to connect to gitaly: .... OK\n\u001b[32;1m$ knapsack rspec \"-Ispec --color --format documentation --format RspecJunitFormatter --out junit_rspec.xml --tag ~geo\"\u001b[0;m\nRSpec's reporter has already been initialized with #\u003cIO:\u003cSTDERR\u003e\u003e as the deprecation stream, so your change to `deprecation_stream` will be ignored. You should configure it earlier for it to take effect, or use the `--deprecation-out` CLI option. (Called from /builds/gitlab-org/gitlab-ee/spec/support/rspec.rb:8:in `block in \u003ctop (required)\u003e')\nKnapsack report generator started!\nRun options: exclude {:geo=\u003etrue}\n\n==\u003e Setting up GitLab Shell...\n    GitLab Shell set up in 0.799404707 seconds...\n\n==\u003e Setting up Gitaly...\n    Gitaly set up in 0.00013308 seconds...\n\nDropRepositoryStorageEventsForGeoEvents\nNOTICE:  index \"index_projects_on_lower_name\" does not exist, skipping\n  #up\n    table_name: :geo_hashed_storage_migrated_events\n      dropped the repository_storage_path column (FAILED - 1)\n    table_name: :geo_repository_created_events\nrspec_profiling couldn't collect an example: FATAL:  remaining connection slots are reserved for non-replication superuser connections\n. Further warnings suppressed.\n      dropped the repository_storage_path column (FAILED - 2)\n    table_name: :geo_repository_deleted_events\n      dropped the repository_storage_path column (FAILED - 3)\n    table_name: :geo_repository_renamed_events\n      dropped the repository_storage_path column (FAILED - 4)\n  #down\n    geo_hashed_storage_migrated_events\n      behaves like recreates the repository_storage_path column\n        creates repository_storage_path column (FAILED - 5)\n        fills in all repository_storage_path cells (FAILED - 6)\n        fills in repository_storage_path with the legacy_disk_path (FAILED - 7)\n    geo_repository_created_events\n      behaves like recreates the repository_storage_path column\n        creates repository_storage_path column (FAILED - 8)\n        fills in all repository_storage_path cells (FAILED - 9)\n        fills in repository_storage_path with the legacy_disk_path (FAILED - 10)\n    geo_repository_deleted_events\n      behaves like recreates the repository_storage_path column\n        creates repository_storage_path column (FAILED - 11)\n        fills in all repository_storage_path cells (FAILED - 12)\n        fills in repository_storage_path with the legacy_disk_path (FAILED - 13)\n    geo_repository_renamed_events\n      behaves like recreates the repository_storage_path column\n        creates repository_storage_path column (FAILED - 14)\n        fills in all repository_storage_path cells (FAILED - 15)\n        fills in repository_storage_path with the legacy_disk_path (FAILED - 16)\n\nAn error occurred in an `after(:context)` hook.\nFailure/Error: klass.reset_column_information\n\nPG::ConnectionBad:\n  FATAL:  remaining connection slots are reserved for non-replication superuser connections\n# ./spec/support/helpers/migrations_helpers.rb:64:in `reset_column_information'\n# ./ee/spec/support/helpers/ee/migrations_helpers.rb:7:in `reset_column_information'\n# ./spec/support/helpers/migrations_helpers.rb:49:in `each'\n# ./spec/support/helpers/migrations_helpers.rb:49:in `reset_column_in_all_models'\n# ./spec/support/helpers/migrations_helpers.rb:109:in `schema_migrate_up!'\n# ./ee/spec/support/helpers/ee/migrations_helpers.rb:36:in `block in schema_migrate_up!'\n# ./ee/spec/support/helpers/ee/migrations_helpers.rb:48:in `with_db_config'\n# ./ee/spec/support/helpers/ee/migrations_helpers.rb:36:in `schema_migrate_up!'\n# ./spec/spec_helper.rb:232:in `block (2 levels) in \u003ctop (required)\u003e'\n\nApprovalState\n  #approval_rules_overwritten?\n    when approval rule on the merge request does not exist\n2nd Try error in ./ee/spec/models/approval_state_spec.rb:62:\n PG::UndefinedColumn: ERROR:  column \"runners_token_encrypted\" of relation \"projects\" does not exist\nLINE 1: ...l\", \"cached_markdown_version\", \"storage_version\", \"runners_t...\n                                                             ^\n: INSERT INTO \"projects\" (\"name\", \"path\", \"created_at\", \"updated_at\", \"creator_id\", \"namespace_id\", \"runners_token\", \"has_external_issue_tracker\", \"description_html\", \"cached_markdown_version\", \"storage_version\", \"runners_token_encrypted\", \"archived\", \"visibility_level\", \"resolve_outdated_diff_discussions\", \"container_registry_enabled\", \"repository_storage\", \"shared_runners_enabled\", \"only_allow_merge_if_all_discussions_are_resolved\", \"packages_enabled\") VALUES ('project1', 'project1', '2019-02-18 10:13:21.907029', '2019-02-18 10:13:21.907029', 1, 1, 'RNozS5sphhs3KMo8sxt_', 'f', '', 917504, 2, 'yb2VK86t+gubVlFZCoj5aHt6vXOjenW8ZOP/0v0YD2UParOa', 'f', 0, 'f', 't', 'default', 't', 'f', 't') RETURNING \"id\" \n...\n```","state":"closed","created_at":"2019-02-18T11:00:47.839Z","updated_at":"2019-12-11T20:03:24.288Z","closed_at":"2019-02-19T19:57:07.726Z","closed_by":{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"},"labels":["Enterprise Edition","auto updated","devops::systems","group::geo","master:broken","priority::1","severity::1","test"],"milestone":{"id":523180,"iid":18,"group_id":9970,"title":"11.9","description":"https://about.gitlab.com/releases/2019/03/22/gitlab-11-9-released/","state":"closed","created_at":"2018-05-09T14:56:19.024Z","updated_at":"2020-04-30T19:56:35.917Z","due_date":"2019-03-22","start_date":"2019-02-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/18"},"assignees":[],"author":{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9821","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9821","notes":"https://gitlab.com/api/v4/projects/278964/issues/9821/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9821/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9821","relative":"#9821","full":"gitlab-org/gitlab#9821"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24689587,"iid":26793,"project_id":278964,"title":"Allow a list of files in CI include:file syntax","description":"\n### Release notes\n\nPreviously when adding multiple files using the [`include:file`](https://docs.gitlab.com/ee/ci/yaml/#includefile) syntax you would have to specify the project and ref for each file. In this release, we've added support to accept a list of files, so now you can specify the project and the ref once and provide a list of files, this way you save you time so you wont not need to repeat yourself and will make the pipeline configuration less verbose.\n\n```yaml\ninclude:\n  - project: devops/ci-cd/pipelines\n    ref: latest\n    file: \n      - terraform/terraform.yml\n      - terraform/deploy/continuous.yml\n      - ...\n```\n \n\n### Problem to solve\n\nGitLab 11.7 introduced the [`include:file`](https://docs.gitlab.com/ee/ci/yaml/#includefile) syntax for including a file from another project in CI configurations. It currently accepts a single file. In my GitLab instance, I have a GitLab project that holds a collection of CI configurations for all projects, and it is common for projects to include multiple files.\n\nThe `include:file` syntax only allows a single file to be included. It would be useful if it allowed multiple multiple files to be specified.\n\n### Target audience\n\n- Sasha, Software Developer, https://design.gitlab.com/research/personas#persona-sasha\n- Devon, DevOps Engineer, https://design.gitlab.com/research/personas#persona-devon\n\n### Further details\n\nHere is an example of two files being included from one common project and ref.\n\n```yaml\ninclude:\n  - project: devops/ci-cd/pipelines\n    ref: latest\n    file: terraform/terraform.yml\n  - project: devops/ci-cd/pipelines\n    ref: latest\n    file: terraform/deploy/continuous.yml\n```\n\n### Proposal\n\nThe include:file syntax should accept a list of files. That way, the project and ref don't have to be repeated, reducing the likelihood of errors and making changes easier.\n\n```yaml\ninclude:\n  - project: devops/ci-cd/pipelines\n    ref: latest\n    file: \n      - terraform/terraform.yml\n      - terraform/deploy/continuous.yml\n```\n\nThis requires refactoring of the files at: https://gitlab.com/gitlab-org/gitlab/-/tree/master/lib/gitlab/ci/config/external and we should count each file from the `project:` entry as a separate entry for [max limit of includes](https://docs.gitlab.com/ee/ci/yaml/#nested-includes)(the example above should still consume 2 entries in the list form)\n\n\n### What does success look like, and how can we measure that?\n\nWhen a GitLab project includes multiple CI files from a common source project and ref, the local `.gitlab-ci.yml` file should be [DRY](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself) by not repeating the project and ref for every single file.\n\n### Links / references\n\n[include:file](https://docs.gitlab.com/ee/ci/yaml/#includefile)\n\ngitlab-ce!24101\n\ngitlab-ce!24098","state":"closed","created_at":"2019-02-17T19:09:57.642Z","updated_at":"2022-06-15T19:15:45.891Z","closed_at":"2020-11-13T08:10:33.287Z","closed_by":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"labels":["Category:Pipeline Authoring","DEPRECATE_pipeline authoring","backend","customer","devops::verify","direction","group::pipeline authoring","pipeline","release post item::in review","section::ops","type::feature","workflow::production"],"milestone":{"id":1233755,"iid":53,"group_id":9970,"title":"13.6","description":"https://about.gitlab.com/releases/2020/11/22/gitlab-13-6-released/","state":"closed","created_at":"2020-04-09T17:39:22.328Z","updated_at":"2022-04-13T14:51:04.376Z","due_date":"2020-11-17","start_date":"2020-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/53"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":698073,"username":"kinghuang","name":"King Chung Huang","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6cf73c6b7c802f28c6be9320c2c1e5f3?s=80\u0026d=identicon","web_url":"https://gitlab.com/kinghuang"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":12,"merge_requests_count":0,"upvotes":37,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/26793","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/26793","notes":"https://gitlab.com/api/v4/projects/278964/issues/26793/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/26793/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#26793","relative":"#26793","full":"gitlab-org/gitlab#26793"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":24689558,"iid":26781,"project_id":278964,"title":"Enforce authorization checks on media uploads","description":"## IMPORTANT NOTE\n\n**The work to deliver the settings has been completed from an engineering perspective. However, this work is still not on by default or available to users - rollout of the work can be tracked in https://gitlab.com/gitlab-org/gitlab/-/issues/352291.**\n\n**We do still expect to deliver this during %\"15.1\", but the rollout issue will be the source of truth.**\n\n\n## Problem to Solve\n\nImages attached to issues, merge requests or comments do not require authentication to be viewed if someone knows the direct URL. This means that items uploaded to otherwise private projects aren't really private.\n\n### Additional Details\n\nAs discussed in https://gitlab.com/gitlab-org/gitlab-ce/issues/22657 and documented in https://gitlab.com/help/security/user_file_uploads.md, \"Images attached to issues, merge requests or comments do not require authentication to be viewed if someone knows the direct URL.\" The chances of this direct URL being leaked or guessed are small, and the associated risk of an uploaded image leaking is usually acceptable, but this is not the case in all organizations, especially those dealing with more sensitive information.\n\n## Proposal\n\n* Add setting to require authentication when viewing media URLs\n* This setting will be project level only\n* The setting will only appear when `private` or `internal` visibility has been selected\n* The setting will be `checked` by default on either of the above settings\n\n## Design\nPlease see attached design","state":"closed","created_at":"2019-02-15T19:34:41.797Z","updated_at":"2022-09-04T21:43:53.854Z","closed_at":"2022-06-02T16:22:20.534Z","closed_by":{"id":2935693,"username":"phikai","name":"Kai Armstrong","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2c5d6a63b41cbeb3ea4cccda82e758e1?s=80\u0026d=identicon","web_url":"https://gitlab.com/phikai"},"labels":["Category:Authentication and Authorization","Deliverable","SUS::Impacting","Technical Writing","UI text","authentication","bug::vulnerability","customer","design-weight::1","devops::create","frontend","frontend-weight::2","group::code review","missed-deliverable","missed:14.10","missed:14.7","priority::4","quad-planning::complete-no-action","section::dev","security","severity::4","type::bug","workflow::in review"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},{"id":201566,"username":"annabeldunstone","name":"Annabel Dunstone Gray","state":"active","avatar_url":"https://secure.gravatar.com/avatar/85c0203926134720f9a9aa8c6e264c78?s=80\u0026d=identicon","web_url":"https://gitlab.com/annabeldunstone"},{"id":5918904,"username":"marc_shaw","name":"Marc Shaw","state":"active","avatar_url":"https://secure.gravatar.com/avatar/78c946cb19e40815a2b5d97cefecec6a?s=80\u0026d=identicon","web_url":"https://gitlab.com/marc_shaw"}],"author":{"id":87854,"username":"DouweM","name":"Douwe Maan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/73d1548ae618321220679b3a4fda7fb1?s=80\u0026d=identicon","web_url":"https://gitlab.com/DouweM"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":174,"merge_requests_count":0,"upvotes":31,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/26781","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/26781","notes":"https://gitlab.com/api/v4/projects/278964/issues/26781/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/26781/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#26781","relative":"#26781","full":"gitlab-org/gitlab#26781"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24689550,"iid":26779,"project_id":278964,"title":"Better indication that an issue has been duplicated","description":"gitlab-ce~9594407 since GitLabbers often mark issues as dupes.\n\n---\n\n### Problem to solve\n\n- Introduce extended status `Closed (duplicated)` \n- This status can only live on the issue when it's closed due to duplicating the issue. When the issue is reopened the \"moved\" extended status disappears and cannot come back.\n\n### Target audience\n\nVery broad, any users of issues\n\n### Further details\n\nTBD\n\n### Proposal\n\nTBD, but can look at https://gitlab.com/gitlab-org/gitlab-ce/issues/36445 for implementation inspiration\n\n### What does success look like, and how can we measure that?\n\nPeople stop commenting on closed (duplicate) issues thinking that we closed it because we don't want to do it. :)\n\n### Links / references","state":"closed","created_at":"2019-02-15T18:19:13.855Z","updated_at":"2022-05-19T16:13:55.213Z","closed_at":"2019-09-23T13:48:58.113Z","closed_by":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"labels":["UI polish","UX","backend","devops::plan","frontend","group::project management","internal customer","missed:12.3","type::feature","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":2243533,"username":"jyavorska","name":"Jason Yavorska","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2243533/avatar.png","web_url":"https://gitlab.com/jyavorska"},"type":"ISSUE","assignee":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"user_notes_count":11,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/26779","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/26779","notes":"https://gitlab.com/api/v4/projects/278964/issues/26779/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/26779/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#26779","relative":"#26779","full":"gitlab-org/gitlab#26779"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24689536,"iid":26777,"project_id":278964,"title":"Typed AWS environment variables for access keys \u0026 region","description":"## Problem to solve\n\nPeople need to deploy to AWS, but entering the right environment variables can be confusing and error prone. By adding a new kind of typed extensible variable (https://gitlab.com/gitlab-org/gitlab-ce/issues/46806) we can make this much easier, and provide a better but still simple integration for teams doing deployments to AWS.\n\nThe AWS command line client supports a few environment variables: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.html. We can make setting these via typed variables quite easy.\n\nThe typical use case for this will be to scope this to environments, so the right values are automatically set up for the automation to a given environment. The AWS variables should be predefined and cannot be edited.\n\n## User Story\n\nAs a user, I want to have the ability to select predefined AWS Variables in my project settings, so make the this configuration in a few steps and avoid making errors while choosing which variable I want to manage.\n\n### Target audience\n\n- Delaney, Development Team Lead, https://design.gitlab.com/research/personas#persona-delaney\n- Sasha, Software Developer, https://design.gitlab.com/research/personas#persona-sasha\n- Devon, DevOps Engineer, https://design.gitlab.com/research/personas#persona-devon\n\n## Proposal\n\n### Acceptance criteria\n\nOn project `/settings/ci_cd`, under `variables:\n- When a user types a text in the Key input field that matches the pattern of an AWS variable (ie \"A\", \"AWS\", \"AWS_AC\"), display a dropdown showing the matching variables.\n  -  AWS variables   \n      - `AWS_ACCESS_KEY_ID` – Specifies an AWS access key associated with an IAM user or role.\n      - `AWS_SECRET_ACCESS_KEY` – Specifies the secret key associated with the access key. This is essentially the \"password\" for the access key.\n      - `AWS_DEFAULT_REGION` – Specifies the AWS Region to send the request to. This one may be optional.\n- If a user selects an option from the dropdown, populate the Key field with the selected value.\n- If a user enters a text value not matching a variable pattern, remove those options from the dropdown.\n- If a user enters a text value not matching any of the variables, hide the dropdown.\n- Update documentation to include a link to AWS best practices.\n\nValidation should be done only for:\n* KEYID=\"AWS-key-ID\"\nspecifies the AWS access key ID. This value is a 20-character, alphanumeric string. A sample key ID value is AKIAIOSFODNN7EXAMPLE.\n* SECRET=\"AWS-secret\"\nspecifies the AWS secret access key. This value is a 40-character string. A sample secret access value is wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY.\n\n\n| Scenario | Mock |\n| ------ | ------ |\n| User focuses on key input | ![image](/uploads/b81791df7936a32d325487660ce335c0/image.png) |\n| User types \"A\" or text value matching one of the AWS vaiables patterns | ![image](/uploads/313a9dbb04a297e069ed994f5883c106/image.png) | \n| User types text not mating an AWS variable pattern | ![image](/uploads/3691aa5def70b3cffc2cbb506e811d1c/image.png) | \n\n### What does success look like, and how can we measure that?\n\nWe want to be able to understand how many people are deploying to AWS (and other clouds) - we should have a usage ping that shows how many people are using the AWS credential creation in this way as evidence of ~Release usage, though this should of course be anonymous.\n\n### Links / references\n\nhttps://documentation.sas.com/?docsetId=proc\u0026docsetTarget=n1volodm4xnj3xn1s99poiemcha2.htm\u0026docsetVersion=9.4\u0026locale=en\n\n\n### Out of scope\n\nIn the future, we could also consider:\n\n- `AWS_DEFAULT_OUTPUT` – Specifies the output format to use.\n- `AWS_DEFAULT_PROFILE` – Specifies the name of the CLI profile with the credentials and options to use. This can be the name of a profile stored in a credentials or config file, or the value default to use the default profile. If you specify this environment variable, it overrides the behavior of using the profile named [default] in the configuration file.\n- `AWS_SESSION_TOKEN` – Specifies the session token value that is required if you are using temporary security credentials. For more information, see the Output section of the assume-role command in the AWS CLI Command Reference.\n- `AWS_CA_BUNDLE` – Specifies the path to a certificate bundle to use for HTTPS certificate validation.\n- `AWS_SHARED_CREDENTIALS_FILE` – Specifies the location of the file that the AWS CLI uses to store access keys (the default is ~/.aws/credentials).\n- `AWS_CONFIG_FILE` – Specifies the location of the file that the AWS CLI uses to store configuration profiles (the default is ~/.aws/config).\n    - The AWS Config file should be a file type (we may need to support file path in the future - to be checked)","state":"closed","created_at":"2019-02-15T15:44:24.131Z","updated_at":"2023-01-03T20:42:51.682Z","closed_at":"2020-04-22T15:39:22.911Z","closed_by":{"id":5211906,"username":"csouthard","name":"Chase Southard","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5e2adecb9fa1d32cf007754824aa358f?s=80\u0026d=identicon","web_url":"https://gitlab.com/csouthard"},"labels":["Alliances","Category:Continuous Delivery","Deliverable","Kickoff Highlight","Persona: DevOps Engineer","Persona: Development Team Lead","Persona: Software developer","Release::P1","UX","cicd::active","depth","devops::release","direction","documentation","frontend","group::release","missed-deliverable","missed:12.8","missed:12.9","type::feature","workflow::verification"],"milestone":{"id":1104429,"iid":46,"group_id":9970,"title":"12.10","description":"https://about.gitlab.com/releases/2020/04/22/gitlab-12-10-released","state":"closed","created_at":"2019-12-20T15:15:53.243Z","updated_at":"2020-10-08T12:00:39.852Z","due_date":"2020-04-17","start_date":"2020-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/46"},"assignees":[{"id":109884,"username":"sarahghp","name":"Sarah Groff Hennigh-Palermo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b3a4be73ec22c01a87b77ddc2bb6f7d?s=80\u0026d=identicon","web_url":"https://gitlab.com/sarahghp"},{"id":3719688,"username":"mnichols1","name":"Mike Nichols","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3719688/avatar.png","web_url":"https://gitlab.com/mnichols1"}],"author":{"id":424775,"username":"markpundsack","name":"Mark Pundsack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a5a32160d9357ecb21f39f630ab8c0c7?s=80\u0026d=identicon","web_url":"https://gitlab.com/markpundsack"},"type":"ISSUE","assignee":{"id":109884,"username":"sarahghp","name":"Sarah Groff Hennigh-Palermo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b3a4be73ec22c01a87b77ddc2bb6f7d?s=80\u0026d=identicon","web_url":"https://gitlab.com/sarahghp"},"user_notes_count":151,"merge_requests_count":0,"upvotes":10,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/26777","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/26777","notes":"https://gitlab.com/api/v4/projects/278964/issues/26777/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/26777/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#26777","relative":"#26777","full":"gitlab-org/gitlab#26777"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3898,"epic":{"id":80871,"iid":3898,"title":"AWS Variables","url":"/groups/gitlab-org/-/epics/3898","group_id":9970,"human_readable_end_date":"Jun 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18274977,"iid":9801,"project_id":278964,"title":"Add \"Copy link\" option in epic comment dropdown","description":"\u003e As a user of Epics,\n\n\u003e I need to be able to reference a specific comment within an Epic's discussion,\n\n\u003e So I can link it elsewhere, to share and document important conversations and decisions. \n\n### Proposal\n\nAdd \"Copy link\" option in comment dropdown, just like we have for issue/MR comments\n\n\u003cimg src=\"/uploads/a937ef864eb96432d2b60adea4bee578/Screen_Shot_2019-02-15_at_1.04.01_PM.png\" width=\"400px\"\u003e","state":"closed","created_at":"2019-02-15T15:31:40.804Z","updated_at":"2021-11-08T16:57:12.089Z","closed_at":"2019-10-04T06:18:06.353Z","closed_by":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"labels":["Category:Portfolio Management","Enterprise Edition","backend","devops::plan","epics","group::product planning","internal customer","issues","type::feature","workflow::in review"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":201566,"username":"annabeldunstone","name":"Annabel Dunstone Gray","state":"active","avatar_url":"https://secure.gravatar.com/avatar/85c0203926134720f9a9aa8c6e264c78?s=80\u0026d=identicon","web_url":"https://gitlab.com/annabeldunstone"},{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"}],"author":{"id":711023,"username":"victorwu","name":"Victor Wu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/711023/avatar.png","web_url":"https://gitlab.com/victorwu"},"type":"ISSUE","assignee":{"id":201566,"username":"annabeldunstone","name":"Annabel Dunstone Gray","state":"active","avatar_url":"https://secure.gravatar.com/avatar/85c0203926134720f9a9aa8c6e264c78?s=80\u0026d=identicon","web_url":"https://gitlab.com/annabeldunstone"},"user_notes_count":23,"merge_requests_count":1,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9801","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9801","notes":"https://gitlab.com/api/v4/projects/278964/issues/9801/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9801/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9801","relative":"#9801","full":"gitlab-org/gitlab#9801"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24689420,"iid":26743,"project_id":278964,"title":"If MR contains changes on root files, Changes Listing doesn't follow order of files from File Browser when in \"Tree view\"","description":"### Summary\n\n**Note**. It looks like this is related to MRs containing changes on `/` files only. See the screenshots below for more information.\n\nIn MR's changes review, when File Browser is set to \"List view\", the files' order in the File Browser and Changes Listing is the same. This is, however, not the case when switching to \"Tree View\": the order of the files in File Browser does get changed while the order of Changes Listing stays intact. This is confusing especially considering \"Tree View\" being the default view for File Browser.\n\n### Steps to reproduce\n\n* In an MR with changes on `/` files, go to \"Changes\" tab\n* Expand File Browser if it's collapsed\n* Switch File Browser to \"List View\"\n\n\u003cfigure\u003e\u003cimg src=\"/uploads/4bffd3cf64defd9b7496f17bc8f3b4cb/Screenshot_2019-02-14_at_09.59.16.png\" width=\"400\" alt=\"\"/\u003e\u003c/figure\u003e\n\n* Observe the order of files in File Browser on the left and changes listing on the right: the order is the same\n* Switch File Browser to \"Tree View\"\n* Observe that the order of files in File Browser has changed reflecting the folders structure of the project. However the order of files in changes listing on the right doesn't change and stays the same as for List View.\n\n### Example Project\n\nAny project with MR\n\n### What is the current *bug* behavior?\n\nFile ordering in Changes Listing doesn't follow files' ordering in the File Browser\n\n### What is the expected *correct* behavior?\n\nFile order in Changes Listing should be updated in accordance to order in File Browser\n\n### Relevant logs and/or screenshots\n\n| List View ordering | Tree View ordering |\n| ------ | ------ |\n| \u003cimg src=\"/uploads/41735947b7b9c795f006f4366aebf66a/Screenshot_2019-02-14_at_09.40.13.png\" alt=\"List View ordering\"/\u003e | \u003cimg src=\"/uploads/a4b6ccea49d01da4cad583eb7c36eb8d/Screenshot_2019-02-14_at_09.38.42.png\" alt=\"Tree View ordering\"/\u003e |\n\n### Output of checks\n\nThis bug happens on GitLab.com","state":"closed","created_at":"2019-02-14T09:45:38.278Z","updated_at":"2021-01-08T14:36:11.243Z","closed_at":"2021-01-08T14:36:10.703Z","closed_by":{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},"labels":["Category:Code Review Workflow","Create [DEPRECATED]","UX","[deprecated] Accepting merge requests","devops::create","diff","frontend","group::code review","merge requests","section::dev"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":3199302,"username":"dmishunov","name":"Denys Mishunov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d85e45af29611ac2c1395e3c3d6ec5d6?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmishunov"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/26743","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/26743","notes":"https://gitlab.com/api/v4/projects/278964/issues/26743/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/26743/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":"https://gitlab.com/api/v4/projects/278964/issues/26552"},"references":{"short":"#26743","relative":"#26743","full":"gitlab-org/gitlab#26743"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18221260,"iid":9760,"project_id":278964,"title":"Next iteration of `pipelines.json` performance improvements","description":"## Problem\n\nWe've shipped a few iterations of `pipelines.json` endpoint performance improvement so far (the endpoint is used to show a pipelines list page). \n\nA few recent improvements: \n\n* https://gitlab.com/gitlab-org/gitlab/-/merge_requests/34160\n* https://gitlab.com/gitlab-org/gitlab-ee/issues/9549\n\nThe endpoint is still slow and we need to investigate and profile it again.","state":"closed","created_at":"2019-02-14T00:46:16.691Z","updated_at":"2022-01-10T02:46:16.961Z","closed_at":"2022-01-10T02:46:16.950Z","closed_by":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"labels":["CI/CD Core Platform","Category:Continuous Integration","Enterprise Edition","FY22::Q4","OKR","backend","bug::performance","customer","devops::verify","group::pipeline execution","missed-SLO","missed-deliverable","missed:13.9","needs weight","pipeline processing","priority::2","section::ops","severity::2","type::bug","workflow::planning breakdown"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"type":"ISSUE","assignee":null,"user_notes_count":43,"merge_requests_count":0,"upvotes":4,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9760","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9760","notes":"https://gitlab.com/api/v4/projects/278964/issues/9760/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9760/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9760","relative":"#9760","full":"gitlab-org/gitlab#9760"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"needs_attention"},{"id":18231365,"iid":9768,"project_id":278964,"title":"Allow a template in a namespace which is out of the hierarchy of the Group owning the template","description":"### Problem to solve\nWe have a Group with several subgroups. One of the subgroups contains only our templates.\n\nThe structure of our group looks something like this\n\n- Group\n    - Subgroup A\n        - App A\n        - App B\n    - Subgroup B\n        - App C\n        - App D\n    - Templates\n        - App T\n\nIn the settings of `Group` I set `Group/Templates` as the custom project templates group.\n\nNow if I want to create a new project in `Group/Subgroup A` which uses a template from `Group/Templates` I get the following error\n\n\u003e The form contains the following error:\n\u003e Namespace is out of the hierarchy of the Group owning the template\n\nThis used to work, but since today (probably earlier) I am getting this error message.\n\n### Target audience\nProbably this one\n- Sidney, Systems Administrator, https://design.gitlab.com/research/personas#persona-sidney\n\n### Further details\nThe use case should be straight forward. We have a template (maybe more in the future) which should be available in each subgroup. To keep things clean we don't want to put the template repositories directly in the top level group but leave them in a separate group.\n\nAlso I don't get the point of the error. Right now I can only create the new project in the template subgroup and then transfer it manually to the desired subgroup. If you allow moving a repository between two subgroups, then you should also allow creating a repo in one subgroup using a template repo from a different subgroup (of course all within the same group).\n\n### Proposal\nRestore the old behaviour where templates from a subgroup can be used in other subgroups of the same group.","state":"closed","created_at":"2019-02-13T15:02:38.827Z","updated_at":"2020-01-02T20:58:51.745Z","closed_at":"2019-07-24T15:12:45.926Z","closed_by":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"labels":["Deliverable","Enterprise Edition","Manage [DEPRECATED]","backend","devops::manage","estimation::completed","group::import","priority::2","severity::2","type::bug","workflow::verification"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"}],"author":{"id":2144356,"username":"mschleeweiss","name":"Marc Schleeweiß","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2144356/avatar.png","web_url":"https://gitlab.com/mschleeweiss"},"type":"ISSUE","assignee":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"user_notes_count":30,"merge_requests_count":1,"upvotes":16,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9768","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9768","notes":"https://gitlab.com/api/v4/projects/278964/issues/9768/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9768/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9768","relative":"#9768","full":"gitlab-org/gitlab#9768"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24689246,"iid":26709,"project_id":278964,"title":"/admin/jobs page fails with an SQL Statement Timeout","description":"### Summary\n\n`/admin/jobs` page is failing with 500 (internally caused by SQL statement timeout) on large installations like GitLab.com. This is caused because we show pagination for all builds we have in database:\n\n```haml\n-# https://gitlab.com/gitlab-org/gitlab-ce/blob/master/app/views/projects/jobs/_table.html.haml#L25\n  = paginate_collection(builds)\n```\n\nWith a larger number of entries in `ci_builds` table (as it is at GitLab.com) such queries are failing with a timeout, e.g.:\n\n```\nActiveRecord::StatementInvalid\nPG::QueryCanceled: ERROR:  canceling statement due to statement timeout\n: SELECT COUNT(*) FROM \"ci_builds\" WHERE \"ci_builds\".\"type\" IN ('Ci::Build')\n```\n\nwhich for GitLab.com can be found at https://sentry.gitlab.net/gitlab/gitlabcom/issues/647799/ (internal only).\n\n### Steps to reproduce\n\nChose any GitLab installation with a significant number of jobs stored in `ci_builds` table (e.g. GitLab.com), login with an admin account and open `/admin/jobs` page. There is some chance, that you will see `500` error page instead of the list of Runners or at least it will take a lot of time to load.\n\n### What is the current *bug* behavior?\n\nGitLab sometimes returns 500 page, caused by a SQL Statement Timeout.\n\n### What is the expected *correct* behavior?\n\nGitLab renders list of ci jobs.\n\n### Relevant logs and/or screenshots\n\nFrom local env:\n[Screenshot_2019-02-13_at_10.13.42](/uploads/742c12ef6d1b65ba0402d4cf897dbd6e/Screenshot_2019-02-13_at_10.13.42)\n[Screenshot_2019-02-13_at_10.13.58](/uploads/c2ff54f9c5a1d3621a029e64d86f7aad/Screenshot_2019-02-13_at_10.13.58)\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n#### Results of GitLab environment info\n\nGitLab.com\n\n#### Results of GitLab application Check\n\nGitLab.com\n\n### Possible fixes\n\nOne fix could be only showing last N(1000/10000/100000) ci jobs in the table. We currently show only \"1000+\" text in the filters, but not limit counter in pagination.","state":"closed","created_at":"2019-02-13T07:15:44.730Z","updated_at":"2020-07-08T00:38:25.969Z","closed_at":"2020-07-08T00:38:25.940Z","closed_by":{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"},"labels":["Category:Continuous Integration","UX","admin dashboard","auto updated","bug::performance","depth","devops::verify","group::pipeline execution","missed-SLO","missed:12.6","onboarding","priority::2","severity::2","type::bug","workflow::production"],"milestone":{"id":1233746,"iid":49,"group_id":9970,"title":"13.2","description":"https://about.gitlab.com/releases/2020/07/22/gitlab-13-2-released/","state":"closed","created_at":"2020-04-09T17:28:01.032Z","updated_at":"2022-04-13T14:48:24.167Z","due_date":"2020-07-17","start_date":"2020-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/49"},"assignees":[{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"}],"author":{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"},"type":"ISSUE","assignee":{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"},"user_notes_count":27,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/26709","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/26709","notes":"https://gitlab.com/api/v4/projects/278964/issues/26709/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/26709/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#26709","relative":"#26709","full":"gitlab-org/gitlab#26709"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":18186532,"iid":9736,"project_id":278964,"title":"Use multi-stage Dockerfiles for Security Product analyzers","description":"All our [analyzers](https://gitlab.com/gitlab-org/security-products/analyzers/) are available through a Docker image.\nTherefore, all these repos contain a `Dockerfile` to build the image. Yet, `docker build` will fail if the developer didn't install go, and build the project entirely before. We should make that step easier and reproducible with [multi-stage builds](https://docs.docker.com/develop/develop-images/multistage-build/). \nWe'll have to update our https://gitlab.com/gitlab-org/security-products/ci-templates/raw/master/includes-dev/analyzer.yml file accordingly, but that will ensure that we use the same build process everywhere.\n\nex, with the ESLINT analyzer:\n\n```Dockerfile\nFROM golang:1.11 AS build\n# Force the go compiler to use modules\nENV GO111MODULE=on CGO_ENABLED=0 GOOS=linux\nWORKDIR /go/src/app\nCOPY . .\nRUN go build -o analyzer\n\nFROM node:11-alpine\n\nARG ESLINT_VERSION\nARG ESLINT_SECURITY_VERSION\n\nENV ESLINT_VERSION ${ESLINT_VERSION:-5.12.1}\nENV ESLINT_SECURITY_VERSION ${ESLINT_SECURITY_VERSION:-1.4.0}\n\n# --unsafe-perm is a needed workaround for  https://github.com/npm/uid-number/issues/7\n# Or else it doesn't build on gitlab-runner\nRUN npm install -g --unsafe-perm eslint@$ESLINT_VERSION eslint-plugin-html eslint-plugin-security@$ESLINT_SECURITY_VERSION\n\nUSER node\nWORKDIR /home/node\n\nCOPY --from=build --chown=root:root /go/src/app/analyzer /\nCOPY eslintrc /home/node/.eslintrc\n\nENTRYPOINT []\nCMD [\"/analyzer\", \"run\"]\n```\n\n### Implementation Plan\n\n- [x] Update all existing analyzers Dockerfiles to build go binary, ensuring that the `metadata.AnalyzerVersion` variable is automatically set at build time, as explained in [Report changelog version in Go-based analyzers](https://gitlab.com/gitlab-org/gitlab/-/issues/225301)\n  - [x] gemnasium-python/Dockerfile\n  - [x] [security-code-scan/Dockerfile](https://gitlab.com/gitlab-org/security-products/analyzers/security-code-scan/blob/03a1a9f/Dockerfile#L1-1)\n  - [x] [spotbugs/Dockerfile](https://gitlab.com/gitlab-org/security-products/analyzers/spotbugs/blob/9e5e44a/Dockerfile#L1-1)\n  - [x] [nodejs-scan/Dockerfile](https://gitlab.com/gitlab-org/security-products/analyzers/nodejs-scan/blob/0a3b24e/Dockerfile#L1-1)\n  - [x] [kubesec/Dockerfile](https://gitlab.com/gitlab-org/security-products/analyzers/kubesec/blob/caf3f71/Dockerfile#L13-13)\n  - [x] bundler-audit/Dockerfile\n  - [x] [secrets/Dockerfile](https://gitlab.com/gitlab-org/security-products/analyzers/secrets/blob/9ecdc73/Dockerfile#L1-1)\n  - [x] [tslint/Dockerfile](https://gitlab.com/gitlab-org/security-products/analyzers/tslint/blob/e4e5d70/Dockerfile#L1-1)\n  - [x] .gemnasium/Dockerfile\n  - [x] retire.js/Dockerfile\n  - [x] [bandit/Dockerfile](https://gitlab.com/gitlab-org/security-products/analyzers/bandit/blob/2df72cb/Dockerfile#L1-1)\n  - [x] [pmd-apex/Dockerfile](https://gitlab.com/gitlab-org/security-products/analyzers/pmd-apex/blob/c450eff/Dockerfile#L1-1)\n  - [x] [sobelow/Dockerfile](https://gitlab.com/gitlab-org/security-products/analyzers/sobelow/blob/e558f4f/Dockerfile#L1-1)\n  - [x] [brakeman/Dockerfile](https://gitlab.com/gitlab-org/security-products/analyzers/brakeman/blob/0372ac1/Dockerfile#L1-1)\n  - [x] common/template/Dockerfile\n  - [x] [gosec/Dockerfile](https://gitlab.com/gitlab-org/security-products/analyzers/gosec/blob/3292b0b/Dockerfile#L1-1)\n  - [x] [flawfinder/Dockerfile](https://gitlab.com/gitlab-org/security-products/analyzers/flawfinder/blob/b544796/Dockerfile#L1-1)\n  - [x] [eslint/Dockerfile](https://gitlab.com/gitlab-org/security-products/analyzers/eslint/blob/e3b06ca/Dockerfile#L3-3)\n  - [x] gemnasium-maven/Dockerfile\n  - [x] [phpcs-security-audit/Dockerfile](https://gitlab.com/gitlab-org/security-products/analyzers/phpcs-security-audit/blob/2f2ebbf/Dockerfile#L1-1)\n- [x] Remove `go build` stage from analyzer ci template](https://gitlab.com/gitlab-org/security-products/ci-templates/-/blob/c9d97ebee39479de9aba276d02f9ff138b79ccb1/includes-dev/analyzer.yml#L23)\n\n/cc @gl\\-secure","state":"closed","created_at":"2019-02-12T23:51:42.073Z","updated_at":"2021-10-28T14:11:57.233Z","closed_at":"2020-11-23T20:42:22.733Z","closed_by":{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"},"labels":["Category:SAST","Enterprise Edition","SAST: Scanner Update","SAST: Speedy Scanners","SAST: Workflow","backend","backend-weight::3","devops::secure","group::static analysis","missed:13.6","section::sec","secure experience","type::maintenance","workflow::in dev"],"milestone":{"id":1233757,"iid":54,"group_id":9970,"title":"13.7","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:43:14.893Z","updated_at":"2022-04-13T14:51:12.240Z","due_date":"2020-12-17","start_date":"2020-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/54"},"assignees":[{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"}],"author":{"id":30915,"username":"plafoucriere","name":"Philippe Lafoucrière","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/30915/avatar.png","web_url":"https://gitlab.com/plafoucriere"},"type":"ISSUE","assignee":{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"},"user_notes_count":29,"merge_requests_count":0,"upvotes":5,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9736","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":22,"completed_count":22},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"22 of 22 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9736","notes":"https://gitlab.com/api/v4/projects/278964/issues/9736/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9736/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9736","relative":"#9736","full":"gitlab-org/gitlab#9736"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3266,"epic":{"id":51945,"iid":3266,"title":"Keep SAST Scanners Updated","url":"/groups/gitlab-org/-/epics/3266","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e day remaining"},"iteration":null,"health_status":null},{"id":18185987,"iid":9732,"project_id":278964,"title":"2019 Q1 Recurity Assessment: OAuth CSRF","description":"https://gitlab.com/gitlab-com/gl-security/engineering/issues/329\n\n# Details\nThe `state` parameter used for the Oauth login flow on the secondary node is not suitable for the intended purpose within [Oauth](https://auth0.com/docs/protocols/oauth2/oauth-state). The main purpose of this parameter is to mitigate CSRF attacks. This, however, is not prevented on the secondary node,\nas the `state` parameter is not bound to any user session and might even be replayed.\n\n# Reproduction Steps\nObserve the validation of the `state` parameter in `ee/lib/gitlab/geo/oauth/login_state.rb`:\n```\ndef valid?\nreturn false unless salt.present? /\u0026 hmac.present?\nhmac == generate_hmac\nend\n```\nThe validity is not bound to any session. Therefore, previous values might be reused for CSRF attacks.\n\n# Recommendation\nRecurity Labs recommends to bind the `state` parameter to the respective user session in order to mitigate CSRF attacks in the Oauth login flow.","state":"closed","created_at":"2019-02-12T23:00:24.173Z","updated_at":"2019-12-11T20:03:30.105Z","closed_at":"2019-04-02T13:45:37.113Z","closed_by":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"labels":["Enterprise Edition","Geo Administration","Recurity Labs","auto updated","devops::systems","group::geo","priority::3","security","severity::3"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"}],"author":{"id":1895698,"username":"jritchey","name":"James Ritchey","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1895698/avatar.png","web_url":"https://gitlab.com/jritchey"},"type":"ISSUE","assignee":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"user_notes_count":7,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9732","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9732","notes":"https://gitlab.com/api/v4/projects/278964/issues/9732/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9732/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9732","relative":"#9732","full":"gitlab-org/gitlab#9732"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":526,"epic":{"id":1838,"iid":526,"title":"Geo: Security Review prior to GitLab.com deployment","url":"/groups/gitlab-org/-/epics/526","group_id":9970,"human_readable_end_date":"Apr 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18185911,"iid":9731,"project_id":278964,"title":"2019 Q1 Recurity Assessment: Open Redirect","description":"https://gitlab.com/gitlab-com/gl-security/engineering/issues/329\n\n# Details\nWithin the `Oauth/:GeoAuthController` for the secondary Geo node, a redirect is triggered after successful authentication. The redirect target is designated by th login_state in `ee/app/controllers/oauth/geo_auth_controller.rb` as follows:\n```ruby\ndef after_sign_in_with_gitlab(token)\n  session[:access_token] = token\n  # Prevent alert from popping up on the first page shown after authentication.\n  flash[:alert] = nil\n  redirect_to(login_state.return_to /| root_path)\nend\n```\nThe `login_state` is comprised of a salt, the redirect URL and an HMAC over the redirect URL (see also chapters 3.1 and 3.2). Furthermore, the `login_state` value will be used as a state parameter within the OAuth flow for login to the secondary\nnote (see chapter 3.4). The initial generation of the state parameter is taking place upon a GET request towards `/users/sign_in` on the secondary node. The open redirect issue results from the fact that a tampered HOST header will be reflected in the `login_state` 's redirect target. The secondary node will redirect to arbitrary hosts when an attacker mounts a CSRF attack using such a pre-generated state parameter (see also chapter 3.4).\n\n# Reproduction Steps\nThe following `curl` command can be utilized to verify the issue:\n`curl https://secondary.recurity.gogitlab.com/users/sign_in -H 'Host:\nthis.is.not.my.host'`\nThe redirect target can be observed in the state parameter below:\n```\n\u003chtml\u003e\u003cbody\u003eYou are being \u003ca href=\"https://this.is.not.my.host/oauth/geo/auth?\nstate=c16d2268f8f25667%3A771b6d0015a023f9ec6746b9e00bbbd49587aa5285babf77c73e5fda1d\naf9d8c%3Ahttps%3A%2F%2Fthis.is.not.my.host%2F\"\u003eredirected\u003c/a\u003e.\u003c/body\u003e\u003c/html\u003e\n```\nAlso note that, if the HOST header is not spoofable, the X-Forwarded-Host header might be utilized as well. Both vectors were available on the test environment.\n\n# Recommendation\nThis issue can be mitigated in two different places. First, the application should not generate redirect targets for other hosts. Second, the input to `redirect_to` should be sanitized in a way that no other hosts can be supplied as a target. Recurity Labs is in favor of implementing both mitigation approaches as they do not exclude each other.","state":"closed","created_at":"2019-02-12T22:53:21.721Z","updated_at":"2019-12-11T20:03:30.997Z","closed_at":"2019-04-02T13:45:16.905Z","closed_by":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"labels":["Enterprise Edition","Geo Administration","Recurity Labs","auto updated","devops::systems","group::geo","priority::3","security","severity::3"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"}],"author":{"id":1895698,"username":"jritchey","name":"James Ritchey","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1895698/avatar.png","web_url":"https://gitlab.com/jritchey"},"type":"ISSUE","assignee":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"user_notes_count":5,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9731","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9731","notes":"https://gitlab.com/api/v4/projects/278964/issues/9731/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9731/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9731","relative":"#9731","full":"gitlab-org/gitlab#9731"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":526,"epic":{"id":1838,"iid":526,"title":"Geo: Security Review prior to GitLab.com deployment","url":"/groups/gitlab-org/-/epics/526","group_id":9970,"human_readable_end_date":"Apr 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18185841,"iid":9730,"project_id":278964,"title":"2019 Q1 Recurity Assessment: LoginState HMAC Issues","description":"https://gitlab.com/gitlab-com/gl-security/engineering/issues/329\n\n# Details\nThe `Gitlab/:Geo/:Oauth/:LoginState` class generates HMAC values in order to sign a redirect URI (see also chapters 3.1 and 3.3). The derivation of the HMAC key is performed by concatenation of an 8 byte random salt and the `secret_key_base`:\n\n```ruby\ndef generate_hmac\n  digest = OpenSSL/:Digest/:SHA256.new\n  key = Gitlab/:Application.secrets.secret_key_base + salt\n  OpenSSL/:HMAC.hexdigest(digest, key, return_to.to_s)\nend\n```\n\nThis construction is not advisable as the simple concatenation of the `salt` and the `secret_key_base` ease, for instance, brute force attacks on the `secret_key_base`. Additionally, within the `generate_hmac` routine, it should be ensured that the `salt` value is of sufficient length. Otherwise, depending on the calling methods, an empty string might be used as the `salt` value, leading to `secret_key_base` being the actual HMAC key.\n\n\n# Reproduction Steps\nObserve the code at `ee/lib/gitlab/geo/oauth/login_state.rb`.\n\n# Recommendation\nA proper key derivation mechanism, such as the built-in key derivation mechanism of\n[Ruby on Rails](https://api.rubyonrails.org/classes/ActiveSupport/KeyGenerator.html), should be utilized.","state":"closed","created_at":"2019-02-12T22:47:23.538Z","updated_at":"2019-12-11T20:03:31.687Z","closed_at":"2019-04-02T13:45:22.098Z","closed_by":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"labels":["Enterprise Edition","Geo Administration","Recurity Labs","auto updated","devops::systems","group::geo","priority::3","security","severity::3"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"}],"author":{"id":1895698,"username":"jritchey","name":"James Ritchey","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1895698/avatar.png","web_url":"https://gitlab.com/jritchey"},"type":"ISSUE","assignee":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"user_notes_count":5,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9730","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9730","notes":"https://gitlab.com/api/v4/projects/278964/issues/9730/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9730/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9730","relative":"#9730","full":"gitlab-org/gitlab#9730"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":526,"epic":{"id":1838,"iid":526,"title":"Geo: Security Review prior to GitLab.com deployment","url":"/groups/gitlab-org/-/epics/526","group_id":9970,"human_readable_end_date":"Apr 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":18185740,"iid":9729,"project_id":278964,"title":"2019 Q1 Recurity Assessment: Information Exposure Through Timing Discrepancy","description":"https://gitlab.com/gitlab-com/gl-security/engineering/issues/329\n\n# Details\n\nDuring the OAuth authentication process, the application attempts to validate a parameter in an insecure way, potentially exposing data. As can be seen in the following code of `ee/lib/gitlab/geo/oauth/login_state.rb`, the non-constant time comparison operator == is used to verify the validity of the provided HMAC.\n```ruby\ndef valid?\n  return false unless salt.present? \u0026 hmac.present?\n  hmac == generate_hmac\nend\n```\nDue to the way how this operator works, the comparison `\"xecret\" == \"secret`\" is resolved significantly faster than `\"secrex\" == \"secret\"`.[Ref](http://www.eggie5.com/45-hmac-timing-attacks)\n\nSince the HMAC contains the parameter `redirect_to`, this issue could be used to guess the correct hash for an arbitrary URL of the attacker's choice, forwarding the user to an attacker-controlled URL.\nHowever, it should be noted that the amount of effort required to exploit this issue is disproportionately high compared to its impact.\n\n# Reproduction Steps\nObserve the code at `ee/lib/gitlab/geo/oauth/login_state.rb`.\n\n# Recommendation\nRecurity Labs recommends choosing a constant-time comparison, such as\n`secure_compare` from Rails `ActiveSupport` [module](https://api.rubyonrails.org/v5.2.0/classes/ActiveSupport/SecurityUtils.html)","state":"closed","created_at":"2019-02-12T22:40:01.047Z","updated_at":"2019-12-11T20:03:32.483Z","closed_at":"2019-04-02T13:45:48.367Z","closed_by":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"labels":["Enterprise Edition","Geo Administration","Recurity Labs","auto updated","devops::systems","group::geo","priority::3","security","severity::3"],"milestone":{"id":655279,"iid":27,"group_id":9970,"title":"11.10","description":"","state":"closed","created_at":"2018-09-21T19:08:16.261Z","updated_at":"2019-05-21T09:17:49.051Z","due_date":"2019-04-22","start_date":"2019-03-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/27"},"assignees":[{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"}],"author":{"id":1895698,"username":"jritchey","name":"James Ritchey","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1895698/avatar.png","web_url":"https://gitlab.com/jritchey"},"type":"ISSUE","assignee":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"user_notes_count":5,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/9729","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/9729","notes":"https://gitlab.com/api/v4/projects/278964/issues/9729/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/9729/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#9729","relative":"#9729","full":"gitlab-org/gitlab#9729"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":526,"epic":{"id":1838,"iid":526,"title":"Geo: Security Review prior to GitLab.com deployment","url":"/groups/gitlab-org/-/epics/526","group_id":9970,"human_readable_end_date":"Apr 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null}]