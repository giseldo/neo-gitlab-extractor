[{"id":25929636,"iid":34072,"project_id":278964,"title":"New project NAME disclosed through unsubscribe link","description":"**[HackerOne report #708155](https://hackerone.com/reports/708155)** by `ashish_r_padelkar` on 2019-10-05, assigned to @ankelly:\n\n### Summary\n\nHello,\n\nThis issue is similar to #650574 but this discloses project NAME and you should NOT login to Gitlab.\n\n### Steps to reproduce\n\n1. Subscribe to any public project issue/merge request.  \n2. Let anyone comment on the issue or merge request so that you receive an email.  \n3. Owner Now makes the project private.  \n4. Owner Changes the `NAME` of the project.  \n5. Now visit the unsubscribe link from email `WITHOUT LOGIN` into Gitlab. It will show you with button to unsubscribe because you are not logged in but it also discloses the new Name of the project like below\n\n![Screenshot_2019-10-05_at_16.13.48.png](https://h1.sec.gitlab.net/a/0fa901db-8897-4c0f-9133-89665a221427/Screenshot_2019-10-05_at_16.13.48.png)\n\n\n### What is the current *bug* behavior?  \nunsubscribe issue link discloses new project name if it goes from public to private\n\n### What is the expected *correct* behavior?\n\nNew project Name should not be disclosed\n\n\n### Output of checks\n\nThis bug happens on GitLab.com and might be on omnibus installations too!\n\nRegards,  \nAshish\n\n## Impact\n\nDiscloses new project NAME when project becomes private.\n\n## Attachments\n\n**Warning:** Attachments received through HackerOne, please exercise caution!\n\n* [Screenshot_2019-10-05_at_16.13.48.png](https://h1.sec.gitlab.net/a/0fa901db-8897-4c0f-9133-89665a221427/Screenshot_2019-10-05_at_16.13.48.png)","state":"closed","created_at":"2019-10-14T22:28:16.241Z","updated_at":"2021-11-24T13:03:08.723Z","closed_at":"2020-01-02T16:43:17.498Z","closed_by":{"id":5054702,"username":"vdesousa","name":"Vitor Meireles De Sousa","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f44d19f10d5b0c54a02e79c13812ff77?s=80\u0026d=identicon","web_url":"https://gitlab.com/vdesousa"},"labels":["Deliverable","HackerOne","backend","devops::plan","group::project management","priority::3","security","severity::3","workflow::in review"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/34072","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/34072","notes":"https://gitlab.com/api/v4/projects/278964/issues/34072/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/34072/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#34072","relative":"#34072","full":"gitlab-org/gitlab#34072"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25928777,"iid":34066,"project_id":278964,"title":"All-in-one include for Security Checks","description":"Users who want to get started with our security checks have to figure out that they need to include the SAST, Dependency Scanning, DAST, Container Scanning, and License Compliance templates. \nWe should make this easier, and it's actually very easy. We can create a all-in-one \"Security\" template which should include:\n\n\n```yaml\ninclude:\n  template: SAST.gitlab-ci.yml\n  template: DAST.gitlab-ci.yml\n  template: Dependency-Scanning.gitlab-ci.yml\n  template: Container-Scanning.gitlab-ci.yml\n  template: License-Management.gitlab-ci.yml\n```\n\n@twoodham @gonzoyumo @sethgitlab this issue is a good candidate for a new gitlabber.","state":"closed","created_at":"2019-10-14T21:32:00.805Z","updated_at":"2020-03-13T14:56:24.654Z","closed_at":"2020-03-13T14:55:41.175Z","closed_by":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"labels":["Enterprise Edition","GitLab Ultimate","devops::secure","group::dynamic analysis","missed:12.5","type::feature","workflow::ready for development"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"}],"author":{"id":30915,"username":"plafoucriere","name":"Philippe Lafoucri√®re","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/30915/avatar.png","web_url":"https://gitlab.com/plafoucriere"},"type":"ISSUE","assignee":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"user_notes_count":27,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/34066","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/34066","notes":"https://gitlab.com/api/v4/projects/278964/issues/34066/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/34066/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#34066","relative":"#34066","full":"gitlab-org/gitlab#34066"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25926073,"iid":34055,"project_id":278964,"title":"MergeRequest#subscribe field should be more expensive in GraphQL","description":"The `subscribed` field of merge requests need so look at notes linked to the issuable, which could be expensive.\n\nWe need to raise the complexity of the [subscribed field in `Types::MergeRequestType`](https://gitlab.com/gitlab-org/gitlab/blob/b70abe63aa7648c7c14c9d60fd5aea645d870188/app/graphql/types/merge_request_type.rb#L58).\n\n____\nGraphQL is exposing `MergeRequest#subscribed` attribute.  \n\nWe do not expose that field when fetching for issues/merge requests collections in the regular\nREST API. This is because it searches through issuable notes looking for mentions of the user which can be \nan expensive operation. Check: https://gitlab.com/gitlab-org/gitlab/blob/master/lib/api/entities.rb#L659\n\nCould this be also a problem on GraphQL? \n\nIf yes, should we do the same we do at the regular API and expose that field only when querying for single merge requests?","state":"closed","created_at":"2019-10-14T19:14:22.770Z","updated_at":"2020-12-07T16:48:10.965Z","closed_at":"2019-11-13T11:46:24.264Z","closed_by":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"labels":["Category:Code Review Workflow","GraphQL","Mechanical Sympathy","[deprecated] Accepting merge requests","bug::performance","devops::create","group::code review","merge requests"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/34055","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/34055","notes":"https://gitlab.com/api/v4/projects/278964/issues/34055/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/34055/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#34055","relative":"#34055","full":"gitlab-org/gitlab#34055"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25925550,"iid":34051,"project_id":278964,"title":"Use Same Endpoint for HTML and JSON in OperationsController","description":"We usually use the same endpoint for presenting both HTML and JSON.\n\n```\n  def environments\n    respond_to do |format|\n      format.html { ... }\n      format.json { ... }\n    end\n  end\n```\n\nIt's automatically switched by the request type, e.g. `/environments` =\u003e HTML, `/environments.js` =\u003e JSON\n\nWe don't need to introduce two endpoints for this case in the `OperationsController`.\n\nSee discussion:  https://gitlab.com/gitlab-org/gitlab/merge_requests/18357#note_229166712","state":"closed","created_at":"2019-10-14T18:44:25.525Z","updated_at":"2021-08-13T12:33:39.304Z","closed_at":"2021-08-13T12:33:39.285Z","closed_by":{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"},"labels":["Category:Release Evidence","backend","devops::release","environments","group::release","maintenance::refactor","section::ops","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"}],"author":{"id":3716529,"username":"jagood","name":"Jason Goodman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6696c95a1788e2d4bee67df636805ecc?s=80\u0026d=identicon","web_url":"https://gitlab.com/jagood"},"type":"ISSUE","assignee":{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/34051","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/34051","notes":"https://gitlab.com/api/v4/projects/278964/issues/34051/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/34051/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#34051","relative":"#34051","full":"gitlab-org/gitlab#34051"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3299,"epic":{"id":53425,"iid":3299,"title":"Environments: Technical Debt","url":"/groups/gitlab-org/-/epics/3299","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25924980,"iid":34050,"project_id":278964,"title":"Productivity Analytics: Fix when license/plan check is made","description":"### Summary\n\nTo have access to Productivity Analytics for a Group, a User must be looking at a Group that has a plan of Premium or higher on gitlab.com, or a license of Silver or higher on self-managed, and have a role of Reporter or higher.  If a User does not have access to Productivity Analytics for a Group, the frontend should display the message ‚ÄúYou don‚Äôt have access to Productivity Analytics in this group‚Äù.\n\nOn \"GL.com: As soon as you pick your filtering criteria (group) [for Productivity Analytics], we'll check if you have the license[/plan], if not: we'll show a message about [license/]plan upgrade (FE will handle it). In this case we [currently] check the license[/plan] even for the HTML request, which is wrong.\" [Source](https://gitlab.com/gitlab-org/gitlab/merge_requests/17618/#note_230091281)\n\n\"The [frontend] should adjust filtering options request and render proper error if user tries to hack the filtering by providing different group id (because API returns 403)\". [Source: Pavel via Slack, see below]\n\n### Example Project\n\n- [gitlab](https://gitlab.com/gitlab-org/gitlab)\n\n### Bug behavior\n\nWhen a User visits Productivity Analytics without a sufficient license/plan, ___?\n\n### Expected behavior\n\nWhen a User visits Productivity Analytics without a sufficient license/plan, the page loads with a message saying: \"You don‚Äôt have access to Productivity Analytics in this group. Only ‚ÄòReporter‚Äô roles and above on tiers Premium / Silver and above can see Productivity Analytics.\"\n\n### Relevant logs and/or screenshots\n\n- This was motivated by a [comment in an unrelated MR](https://gitlab.com/gitlab-org/gitlab/merge_requests/17618/#note_229875720).\n- That comment sparked a [conversation in Slack](https://gitlab.slack.com/archives/CJZR6KPB4/p1571056404020700) on 2019-10-15:\n\u003cdetails\u003e\nahegyi Yesterday at 7:33 AM\nquestion regarding to productivity analytics: should we require license for loading the initial HTML page or just for the JSON request? I think we need to enforce license check for the JSON request only.\n\nDan Jensen  1 day ago\n@ahegyi (cc @virjinia) Questions: 1) Is the link to Productivity Analytics visible without a license?  2) Is a user-friendly message displayed in Productivity Analytics if the JSON request fails?\n\nvirjinia  1 day ago\nyes, it's already the case - it already says you don't have access to the tier or the right access level. Do you have in mind something else @ahegyi?\n\nahegyi  1 day ago\nSo the idea is to show \"Productivity Analytics\" on the sidebar even if you don't have the license. Verify the license as soon as you select the group.\n\nahegyi  1 day ago\nin that case we have a bug, visiting PA page enforces the license availability.\n\nahegyi  1 day ago\nhttps://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/controllers/analytics/productivity_analytics_controller.rb#L11\n\nDan Jensen  1 day ago\n@ahegyi related:  https://gitlab.com/gitlab-org/gitlab/issues/33876\n\nahegyi  1 day ago\nThanks, but not exactly the same problem. This came up during the CR for code hotspots:\nWhen we render the sidebar (links for analytics features, PA, CA, Code Analytics), we only render the link when the specific feature is enabled. We don't check the license at all.\nWhen the user clicks the link, we do check the license and render 403 if license is missing.\n\nDan Jensen  1 day ago\nthe idea is to show ‚ÄúProductivity Analytics‚Äù on the sidebar even if you don‚Äôt have the license\nThat‚Äôs the spec?  If so then it sounds like we need to handle the 403 more gracefully, is that right?\n\nahegyi  1 day ago\nI think so\n\nDan Jensen  1 day ago\n@ahegyi can I write the issue or have you already?\n\nahegyi  1 day ago\nit only affects PA, so I guess this could be covered within the PA issues?\n\nahegyi  1 day ago\nreally small change\n\nvirjinia  1 day ago\nWell, at some point where this is more stable, we will remove the enabling as well\n\nvirjinia  1 day ago\nSo your idea is just to show everything on the side subject to checking license and having at least 1 group/correct access leve?\n\nvirjinia  1 day ago\nI think we can show everything, but still only check access when you select a group?\n\nahegyi  1 day ago\nok, the fix: disable license check on page load, and do the license check when group is selected\n\nvirjinia  1 day ago\nyes, this is what I thought we are doing, so seems like it's a bug to be fair. I am also happy to make everything visible and remove the flag for Productivity Analytics once the date fix is in. @Dan Jensen - should we do that? We can keep the flag for the scatter still on (edited) \n\nvirjinia  1 day ago\nIs the date fix for productivity analytics going to make it - I thought it's small change, but haven't followed ? What is remaining?\n\nDan Jensen  1 day ago\ndisable license check on page load, and do the license check when group is selected\n@ahegyi What happens when the backend returns a 403 for the group request?\n\nahegyi  1 day ago\nFE renders a message\n\nahegyi  1 day ago\n`You don‚Äôt have access to Productivity Analytics in this group\nOnly ‚ÄòReporter‚Äô roles and above on tiers Premium / Silver and above can see Productivity Analytics. `\n\n...\n\nDan Jensen  23 hours ago\nJust wrote a bugfix ticket:  https://gitlab.com/gitlab-org/gitlab/issues/34050\n\u003c/details\u003e\n- Another comment from @pshutsin in Slack on 2019-10-15:\n\u003cdetails\u003e\npshutsin 11:58 AM\nOk so 34050 is FE issue. They should adjust filtering options request. and render proper error if user tries to hack the filtering by providing different group id (because API returns 403)\n\u003c/details\u003e\n\nExample of the expected message for users without permission:\n\n![Screen_Shot_2019-10-14_at_5.39.14_PM](/uploads/5cb2939ce0527d26114160833184fb8c/Screen_Shot_2019-10-14_at_5.39.14_PM.png)\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\nUPDATED 2019-10-15 by @djensen to fix summary and add relevant discussions.","state":"closed","created_at":"2019-10-14T18:15:12.586Z","updated_at":"2019-10-23T10:59:47.524Z","closed_at":"2019-10-17T17:58:17.728Z","closed_by":{"id":444,"username":"dzaporozhets","name":"Dmytro Zaporozhets (DZ)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/444/avatar.png","web_url":"https://gitlab.com/dzaporozhets"},"labels":["devops::manage","group::optimize","priority::2","severity::3","type::bug","workflow::in review"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"}],"author":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"type":"ISSUE","assignee":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/34050","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/34050","notes":"https://gitlab.com/api/v4/projects/278964/issues/34050/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/34050/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#34050","relative":"#34050","full":"gitlab-org/gitlab#34050"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25913404,"iid":34032,"project_id":278964,"title":"Container registry:  bug on modal delete button and title text","description":"Currently if the user select multiple tags for delete and then uses the single delete button the modal show the wrong title and button title, see screen-capture for more details\n![screen-capture__3_](/uploads/6adfcdd54f8aa29fc8a8f7cfed1fadf6/screen-capture__3_.webm)","state":"closed","created_at":"2019-10-14T14:54:28.213Z","updated_at":"2019-10-17T16:30:54.854Z","closed_at":"2019-10-17T16:30:54.783Z","closed_by":{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"},"labels":["Category:Container Registry","devops::package","frontend","group::package registry","priority::4","severity::4","type::bug"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":4584738,"username":"nmezzopera","name":"Nicol√≤ Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"}],"author":{"id":4584738,"username":"nmezzopera","name":"Nicol√≤ Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"type":"ISSUE","assignee":{"id":4584738,"username":"nmezzopera","name":"Nicol√≤ Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/34032","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/34032","notes":"https://gitlab.com/api/v4/projects/278964/issues/34032/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/34032/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#34032","relative":"#34032","full":"gitlab-org/gitlab#34032"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25912849,"iid":34030,"project_id":278964,"title":"Project issues search times out when sorting by priority, manual, etc.","description":"https://sentry.gitlab.net/gitlab/gitlabcom/issues/958708/\n\n```\nPG::QueryCanceled: ERROR:  canceling statement due to statement timeout\n\n  active_record/connection_adapters/postgresql_adapter.rb:611:in `async_exec_params'\n    @connection.exec_params(sql, type_casted_binds)\n  active_record/connection_adapters/postgresql_adapter.rb:611:in `block (2 levels) in exec_no_cache'\n    @connection.exec_params(sql, type_casted_binds)\n  active_support/dependencies/interlock.rb:48:in `block in permit_concurrent_loads'\n    yield\n  active_support/concurrency/share_lock.rb:187:in `yield_shares'\n    yield\n  active_support/dependencies/interlock.rb:47:in `permit_concurrent_loads'\n    @lock.yield_shares(compatible: [:load]) do\n...\n(151 additional frame(s) were not displayed)\n\nActiveRecord::QueryCanceled: PG::QueryCanceled: ERROR:  canceling statement due to statement timeout\n: SELECT  \"issues\".* FROM \"issues\" WHERE \"issues\".\"project_id\" = 278964 AND (\"issues\".\"state\" IN ('opened')) AND (\"issues\".\"title\" ILIKE '%delete%' AND \"issues\".\"title\" ILIKE '%branches%' OR \"issues\".\"description\" ILIKE '%delete%' AND \"issues\".\"description\" ILIKE '%branches%') ORDER BY weight ASC NULLS LAST, \"issues\".\"id\" DESC LIMIT 20 OFFSET 0\n\nActiveRecord::QueryCanceled: PG::QueryCanceled: ERROR:  canceling statement due to statement timeout\n: SELECT  \"issues\".* FROM \"issues\" WHERE \"issues\".\"project_id\" = 278964 AND (\"issues\".\"state\" IN ('opened')) AND (\"issues\".\"title\" ILIKE '%delete%' AND \"issues\".\"title\" ILIKE '%branches%' OR \"issues\".\"description\" ILIKE '%delete%' AND \"issues\".\"description\" ILIKE '%branches%') ORDER BY weight ASC NULLS LAST, \"issues\".\"id\" DESC LIMIT 20 OFFSET 0\n```","state":"closed","created_at":"2019-10-14T14:38:01.280Z","updated_at":"2021-10-08T02:03:02.320Z","closed_at":"2020-02-10T06:33:29.353Z","closed_by":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"labels":["Deliverable","[deprecated] Accepting merge requests","backend","bug::performance","devops::plan","group::project management","issue list","issues","missed-SLO","performance-refinement","priority::2","severity::2","type::bug","workflow::planning breakdown"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[],"author":{"id":402401,"username":"jobbot","name":"Bot","state":"active","avatar_url":"https://secure.gravatar.com/avatar/aaa6738f1ebf25404010884af511b0e7?s=80\u0026d=identicon","web_url":"https://gitlab.com/jobbot"},"type":"ISSUE","assignee":null,"user_notes_count":29,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/34030","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/34030","notes":"https://gitlab.com/api/v4/projects/278964/issues/34030/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/34030/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#34030","relative":"#34030","full":"gitlab-org/gitlab#34030"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25905957,"iid":34022,"project_id":278964,"title":"Follow up: Remove Gitlab::Ci::Trace#html unused method if unused","description":"In https://gitlab.com/gitlab-org/gitlab/merge_requests/18134#note_229926553 we noticed that `html` method may not be used, hence we should remove it if not needed.","state":"closed","created_at":"2019-10-14T12:03:17.207Z","updated_at":"2022-03-02T07:54:28.500Z","closed_at":"2022-03-02T07:54:28.484Z","closed_by":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"labels":["Category:Continuous Integration","Seeking community contributions","Verify candidate","[deprecated] Accepting merge requests","backend","backstage [DEPRECATED]","devops::verify","good for new contributors","group::pipeline execution","maintenance::refactor","missed-deliverable","missed:12.5","missed:12.6","onboarding","pipeline processing","section::ops","severity::3","type::maintenance","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/34022","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/34022","notes":"https://gitlab.com/api/v4/projects/278964/issues/34022/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/34022/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#34022","relative":"#34022","full":"gitlab-org/gitlab#34022"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25898448,"iid":34005,"project_id":278964,"title":"Execute terraform code to provision staging Geo node","description":"","state":"closed","created_at":"2019-10-14T08:39:41.882Z","updated_at":"2019-12-11T19:54:28.495Z","closed_at":"2019-11-07T23:44:49.030Z","closed_by":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"labels":["Category:Disaster Recovery","[deprecated] Accepting merge requests","devops::systems","direction","group::geo"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"}],"author":{"id":2722370,"username":"rnienaber","name":"Rachel Nienaber","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2722370/avatar.png","web_url":"https://gitlab.com/rnienaber"},"type":"ISSUE","assignee":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/34005","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/34005","notes":"https://gitlab.com/api/v4/projects/278964/issues/34005/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/34005/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#34005","relative":"#34005","full":"gitlab-org/gitlab#34005"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1908,"epic":{"id":12323,"iid":1908,"title":"Rollout Geo to staging.gitlab.com","url":"/groups/gitlab-org/-/epics/1908","group_id":9970,"human_readable_end_date":"Apr 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25896385,"iid":34001,"project_id":278964,"title":"Update terraform code to include Geo for Staging","description":"- [x] Update our [staging Terraform code](https://ops.gitlab.net/gitlab-com/gitlab-com-infrastructure/tree/master/environments/gstg) to include the necessary Geo nodes\n\nMR - https://ops.gitlab.net/gitlab-com/gitlab-com-infrastructure/merge_requests/1129","state":"closed","created_at":"2019-10-14T07:59:17.096Z","updated_at":"2021-09-05T13:51:32.162Z","closed_at":"2019-11-07T23:44:28.904Z","closed_by":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"labels":["Category:Disaster Recovery","Dogfooding::Use Existing Feature","auto updated","devops::systems","group::geo","missed:12.4"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"}],"author":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"type":"ISSUE","assignee":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/34001","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/34001","notes":"https://gitlab.com/api/v4/projects/278964/issues/34001/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/34001/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#34001","relative":"#34001","full":"gitlab-org/gitlab#34001"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1908,"epic":{"id":12323,"iid":1908,"title":"Rollout Geo to staging.gitlab.com","url":"/groups/gitlab-org/-/epics/1908","group_id":9970,"human_readable_end_date":"Apr 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25893582,"iid":33998,"project_id":278964,"title":"Merge Requests in Busy Repositories Can Create Race Conditions and Allow CODEOWNERS Checks to be Bypassed","description":"### Summary\n\nCreating a merge request on a busy repository can sometimes take a few seconds to complete all the CODEOWNERS checks. Because all the functionality of the merge request is available while the checks are running, it is possible to exploit the delay to bypass the CODEOWNERS check.\n\n### Steps to reproduce\n\n1.  You'll need a monorepo with a large amount of activity, where creating a merge request can take several seconds.\n2.  Set up CODEOWNERS to have a sample file owned by somebody else in the project.\n3.  Ensure that CODEOWNERS approvals are required.\n4.  Create a sample change to an owned file on a branch other than master.\n5.  Open a second tab showing the list of merge requests outstanding for approval\n6.  Create the merge request, then switch over to the second tab and refresh until it appears.\n7.  If the conditions are correct, you'll be able to approve the request before the CODENWERS check has been completed.\n8.  The end result is a merged merge request with 0/1 CODEOWNERS approvals.\n\n### What is the current *bug* behavior?\n\nPeople are able to bypass the CODENWERS check to merge changes to owned files without the approval of the code owners.\n### What is the expected *correct* behavior?\n\nMerge requests should not have functionalities enabled until certain checks have been completed, CODEOWNERS is one of them. I would expect to see the 'Merge' button disabled, with some form of indication that the MR is still being processed or created. Once everything has been assessed, we should then be able to proceed with actions.\n\n### Relevant logs and/or screenshots\n![Screenshot_2019-10-14_at_08.21.20](/uploads/3f50df6d85cd89bef4d83fc520f0969e/Screenshot_2019-10-14_at_08.21.20.png)\n\nThe author of the merge is not an owner, but is still able to merge without their approval under the circumstances described above.","state":"closed","created_at":"2019-10-14T06:20:05.559Z","updated_at":"2020-12-07T16:48:12.127Z","closed_at":"2019-12-14T01:48:15.317Z","closed_by":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"labels":["Category:Code Review Workflow","Deliverable","approvals","backend","customer","devops::create","group::code review","merge requests","planning priority","severity::2","type::bug"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"}],"author":{"id":3620402,"username":"zane.wright","name":"Zane Wright","state":"active","avatar_url":"https://secure.gravatar.com/avatar/1dc26136b8d8398152c700cba75e37e8?s=80\u0026d=identicon","web_url":"https://gitlab.com/zane.wright"},"type":"ISSUE","assignee":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"user_notes_count":15,"merge_requests_count":1,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33998","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33998","notes":"https://gitlab.com/api/v4/projects/278964/issues/33998/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33998/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33998","relative":"#33998","full":"gitlab-org/gitlab#33998"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":306,"epic":{"id":661,"iid":306,"title":"Code owners enhancements","url":"/groups/gitlab-org/-/epics/306","group_id":9970,"human_readable_end_date":"Feb 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25869301,"iid":33943,"project_id":278964,"title":"When two_step_rebase is enabled, rebases that take longer than idle_in_transaction_session_timeout will fail","description":"### Summary\n\nHighly diverged branches on large repositories can take several minutes to rebase.  However, when using `two_step_rebase` the rebase must finish before the `idle_in_transaction_session_timeout`  limit (60 seconds by default in Omnibus) or Postgres will cancel the transaction.  As a result, rebases on very large projects can consistently fail.\n\n### Steps to reproduce\n\n  1. Clone a large project such as the Linux kernel\n  1. Set `Merge method` to `Merge commit with semi-linear history` or `Fast-forward merge` under `Settings -\u003e General -\u003e Merge requests -\u003e Merge method`\n  1. Checkout an older tag such as `v2.6.28`, old enough that rebasing will take greater than 60 seconds\n  1. Create a new branch and make a change\n  1. Make a change on master\n  1. Create an MR using the new branch\n  1. Click rebase\n  1. Eventually a `Fast-forward merge is not possible` message will be shown in the UI, in the background the `RebaseWorker` job has failed\n\n### What is the current *bug* behavior?\n\nLarge rebases fail to complete\n\n### What is the expected *correct* behavior?\n\nRebases of any size can run to completion\n\n### Relevant logs and/or screenshots\n\n```\n{\n  \"severity\": \"WARN\",\n  \"time\": \"2019-10-10T20:23:09.424Z\",\n  \"class\": \"RebaseWorker\",\n  \"retry\": 3,\n  \"queue\": \"rebase\",\n  \"jid\": \"21ff7936418b9e101c448fb1\",\n  \"created_at\": \"2019-10-10T20:21:39.114Z\",\n  \"correlation_id\": \"lGclP00Hs26\",\n  \"enqueued_at\": \"2019-10-10T20:21:39.115Z\",\n  \"pid\": 13368,\n  \"message\": \"RebaseWorker JID-21ff7936418b9e101c448fb1: fail: 90.306 sec\",\n  \"job_status\": \"fail\",\n  \"scheduling_latency_s\": 0.002,\n  \"duration\": 90.306,\n  \"system_s\": 0.979,\n  \"user_s\": 4.074,\n  \"child_s\": 0.077,\n  \"completed_at\": \"2019-10-10T20:23:09.424Z\",\n  \"error_message\": \"Sidekiq::JobRetry::Skip\",\n  \"error\": {},\n  \"error_backtrace\": [\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/job_retry.rb:127:in `rescue in local'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/job_retry.rb:108:in `local'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/processor.rb:136:in `block (5 levels) in dispatch'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/rails.rb:43:in `block in call'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-5.2.3/lib/active_support/execution_wrapper.rb:87:in `wrap'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-5.2.3/lib/active_support/reloader.rb:73:in `block in wrap'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-5.2.3/lib/active_support/execution_wrapper.rb:87:in `wrap'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-5.2.3/lib/active_support/reloader.rb:72:in `wrap'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/rails.rb:42:in `call'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/processor.rb:132:in `block (4 levels) in dispatch'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/processor.rb:250:in `stats'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/processor.rb:127:in `block (3 levels) in dispatch'\",\n    \"/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/sidekiq_logging/structured_logger.rb:16:in `call'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/processor.rb:126:in `block (2 levels) in dispatch'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/job_retry.rb:74:in `global'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/processor.rb:125:in `block in dispatch'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/logging.rb:48:in `with_context'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/logging.rb:42:in `with_job_hash_context'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/processor.rb:124:in `dispatch'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/processor.rb:163:in `process'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/processor.rb:83:in `process_one'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/processor.rb:71:in `run'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/util.rb:16:in `watchdog'\",\n    \"/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/util.rb:25:in `block in safe_thread'\"\n  ]\n}\n{\n  \"severity\": \"WARN\",\n  \"time\": \"2019-10-10T20:23:09.425Z\",\n  \"message\": \"{\\\"context\\\":\\\"Job raised exception\\\",\\\"job\\\":{\\\"class\\\":\\\"RebaseWorker\\\",\\\"args\\\":[8,1],\\\"retry\\\":3,\\\"queue\\\":\\\"rebase\\\",\\\"jid\\\":\\\"21ff7936418b9e101c448fb1\\\",\\\"created_at\\\":1570738899.1141646,\\\"correlation_id\\\":\\\"lGclP00Hs26\\\",\\\"enqueued_at\\\":1570738899.1150746},\\\"jobstr\\\":\\\"{\\\\\\\"class\\\\\\\":\\\\\\\"RebaseWorker\\\\\\\",\\\\\\\"args\\\\\\\":[8,1],\\\\\\\"retry\\\\\\\":3,\\\\\\\"queue\\\\\\\":\\\\\\\"rebase\\\\\\\",\\\\\\\"jid\\\\\\\":\\\\\\\"21ff7936418b9e101c448fb1\\\\\\\",\\\\\\\"created_at\\\\\\\":1570738899.1141646,\\\\\\\"correlation_id\\\\\\\":\\\\\\\"lGclP00Hs26\\\\\\\",\\\\\\\"enqueued_at\\\\\\\":1570738899.1150746}\\\"}\"\n}\n{\n  \"severity\": \"INFO\",\n  \"time\": \"2019-10-10T20:23:25.043Z\",\n  \"class\": \"RebaseWorker\",\n  \"retry\": 3,\n  \"queue\": \"rebase\",\n  \"jid\": \"21ff7936418b9e101c448fb1\",\n  \"created_at\": \"2019-10-10T20:21:39.114Z\",\n  \"correlation_id\": \"lGclP00Hs26\",\n  \"enqueued_at\": \"2019-10-10T20:23:25.038Z\",\n  \"error_message\": \"PG::UnableToSend: no connection to the server\\n: UPDATE \\\"merge_requests\\\" SET \\\"rebase_jid\\\" = NULL WHERE \\\"merge_requests\\\".\\\"id\\\" = 8\",\n  \"error_class\": \"ActiveRecord::StatementInvalid\",\n  \"failed_at\": 1570738989.4215744,\n  \"retry_count\": 0,\n  \"pid\": 13368,\n  \"message\": \"RebaseWorker JID-21ff7936418b9e101c448fb1: start\",\n  \"job_status\": \"start\",\n  \"scheduling_latency_s\": 0.005\n}\n```\n\n### Output of checks\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\n\nSystem information\nSystem:\t\tUbuntu 18.04\nProxy:\t\tno\nCurrent User:\tgit\nUsing RVM:\tno\nRuby Version:\t2.6.3p62\nGem Version:\t2.7.9\nBundler Version:1.17.3\nRake Version:\t12.3.2\nRedis Version:\t3.2.12\nGit Version:\t2.22.0\nSidekiq Version:5.2.7\nGo Version:\tunknown\n\nGitLab information\nVersion:\t12.3.2-ee\nRevision:\t9ae54250d64\nDirectory:\t/opt/gitlab/embedded/service/gitlab-rails\nDB Adapter:\tPostgreSQL\nDB Version:\t10.9\nGeo:\t\tno\nUsing LDAP:\tno\nUsing Omniauth:\tyes\nOmniauth Providers:\n\nGitLab Shell\nVersion:\t10.0.0\nRepository storage paths:\n- default: \t/var/opt/gitlab/git-data/repositories\nGitLab Shell path:\t\t/opt/gitlab/embedded/service/gitlab-shell\nGit:\t\t/opt/gitlab/embedded/bin/git\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\nChecking GitLab subtasks ...\n\nChecking GitLab Shell ...\n\nGitLab Shell: ... GitLab Shell version \u003e= 10.0.0 ? ... OK (10.0.0)\nRunning /opt/gitlab/embedded/service/gitlab-shell/bin/check\nCheck GitLab API access: OK\nRedis available via internal API: OK\n\ngitlab-shell self-check successful\n\nChecking GitLab Shell ... Finished\n\nChecking Gitaly ...\n\nGitaly: ... default ... OK\n\nChecking Gitaly ... Finished\n\nChecking Sidekiq ...\n\nSidekiq: ... Running? ... yes\nNumber of Sidekiq processes ... 1\n\nChecking Sidekiq ... Finished\n\nChecking Incoming Email ...\n\nIncoming Email: ... Reply by email is disabled in config/gitlab.yml\n\nChecking Incoming Email ... Finished\n\nChecking LDAP ...\n\nLDAP: ... LDAP is disabled in config/gitlab.yml\n\nChecking LDAP ... Finished\n\nChecking GitLab App ...\n\nGit configured correctly? ... yes\nDatabase config exists? ... yes\nAll migrations up? ... yes\nDatabase contains orphaned GroupMembers? ... no\nGitLab config exists? ... yes\nGitLab config up to date? ... yes\nLog directory writable? ... yes\nTmp directory writable? ... yes\nUploads directory exists? ... yes\nUploads directory has correct permissions? ... yes\nUploads directory tmp has correct permissions? ... skipped (no tmp uploads folder yet)\nInit script exists? ... skipped (omnibus-gitlab has no init script)\nInit script up-to-date? ... skipped (omnibus-gitlab has no init script)\nProjects have namespace: ...\n1/1 ... yes\n1/2 ... yes\nRedis version \u003e= 2.8.0? ... yes\nRuby version \u003e= 2.5.3 ? ... yes (2.6.3)\nGit version \u003e= 2.22.0 ? ... yes (2.22.0)\nGit user has default SSH configuration? ... yes\nActive users: ... 2\nIs authorized keys file accessible? ... yes\nElasticsearch version 5.6 - 6.x? ... skipped (elasticsearch is disabled)\n\nChecking GitLab App ... Finished\n\n\nChecking GitLab subtasks ... Finished\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\nThe problem is caused by attempting to perform large rebases in the time permitted by a `BEGIN` block in Postgres, https://gitlab.com/gitlab-org/gitlab/blob/v12.3.2-ee/app%2Fmodels%2Frepository.rb#L1044-1054.  A longer timeout for the transaction, ideally configurable by admins, would work around this issue.\n\nThe `RebaseWorker` will start the DB transaction, then execute the `UserRebaseConfirmable` Gitaly RPC.  However, when the rebase takes over 60 seconds PG releases the lock and closes the connection while the `RebaseWorker` continues to wait for Gitaly.  After `UserRebaseConfirmable` eventually returns the worker attempts to continue making DB queries, but PG returns `terminating connection due to idle-in-transaction timeout` and the job fails.\n\nIn `strace` we see:\n\n```\n27585 20:21:39.180018 sendto(102\u003cUNIX:[127187-\u003e127188]\u003e, \"Q\\0\\0\\0\\nBEGIN\\0\", 11, MSG_NOSIGNAL, NULL, 0) = 11 \u003c0.000103\u003e\n27585 20:21:39.180209 recvfrom(102\u003cUNIX:[127187-\u003e127188]\u003e, \"C\\0\\0\\0\\nBEGIN\\0Z\\0\\0\\0\\5T\", 16384, 0, NULL, NULL) = 17 \u003c0.000020\u003e\n# REBASE RUNS HERE AND RETURNS SHA\n27585 20:23:09.407970 sendto(102\u003cUNIX:[127187-\u003e127188]\u003e, \"P\\0\\0\\1q\\0SELECT  \\\"merge_requests\\\".* FROM \\\"merge_requests\\\" WHERE \\\"merge_requests\\\".\\\"target_project_id\\\" = 2 AND \\\"merge_requests\\\".\\\"source_branch\\\" = 'short-rebase' AND \\\"merge_requests\\\".\\\"target_branch\\\" = 'master' AND \\\"merge_requests\\\".\\\"source_project_id\\\" = 2 AND (\\\"merge_requests\\\".\\\"state\\\" IN ('opened')) AND \\\"merge_requests\\\".\\\"id\\\" != 8 ORDER BY \\\"merge_requests\\\".\\\"id\\\" ASC LIMIT 1\\0\\0\\0B\\0\\0\\0\\16\\0\\0\\0\\0\\0\\0\\0\\1\\0\\0D\\0\\0\\0\\6P\\0E\\0\\0\\0\\t\\0\\0\\0\\0\\0S\\0\\0\\0\\4\", 407, MSG_NOSIGNAL, NULL, 0) = -1 EPIPE (Broken pipe) \u003c0.000050\u003e\n27585 20:23:09.408160 recvfrom(102\u003cUNIX:[127187-\u003e127188]\u003e, \"E\\0\\0\\0zSFATAL\\0VFATAL\\0C25P03\\0Mterminating connection due to idle-in-transaction timeout\\0Fpostgres.c\\0L3036\\0RProcessInterrupts\\0\\0\", 16384, 0, NULL, NULL) = 123 \u003c0.000025\u003e\n```\n\n\n/cc @oswaldo","state":"closed","created_at":"2019-10-12T04:44:58.521Z","updated_at":"2021-01-21T19:03:49.029Z","closed_at":"2019-12-23T01:13:54.640Z","closed_by":{"id":1187333,"username":"jramsay-gitlab","name":"James Ramsay (ex-GitLab)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1187333/avatar.png","web_url":"https://gitlab.com/jramsay-gitlab"},"labels":["Category:Code Review Workflow","Deliverable","backend","customer","devops::create","group::code review","merge requests","planning priority","priority::1","severity::2","type::bug","workflow::verification"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":11493,"username":"oswaldo","name":"Oswaldo Ferreira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11493/avatar.png","web_url":"https://gitlab.com/oswaldo"}],"author":{"id":2578846,"username":"wchandler","name":"Will Chandler","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8b92738249753faee7055e021f8221?s=80\u0026d=identicon","web_url":"https://gitlab.com/wchandler"},"type":"ISSUE","assignee":{"id":11493,"username":"oswaldo","name":"Oswaldo Ferreira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11493/avatar.png","web_url":"https://gitlab.com/oswaldo"},"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-11-29","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33943","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33943","notes":"https://gitlab.com/api/v4/projects/278964/issues/33943/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33943/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33943","relative":"#33943","full":"gitlab-org/gitlab#33943"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25860901,"iid":33915,"project_id":278964,"title":"Remove DAST report legacy ZAProxy fields","description":"# Context\nThe DAST tool is migrating from a custom ZAProxy format to use the Common Report Format. This will enable the Secure team to reuse key parts of our codebase.\n\nThe migration has three stages:\n\n1. DAST will create a `gl-dast-report.json` report containing the legacy ZAProxy fields and the Common Report Fields. https://gitlab.com/gitlab-org/gitlab/issues/14053\n1. The GitLab Rails codebase will use the Common Report Format for DAST instead of the ZAProxy fields. https://gitlab.com/gitlab-org/gitlab/issues/33913\n1. DAST will remove the legacy ZAProxy fields from the report. https://gitlab.com/gitlab-org/gitlab/issues/33915\n\nThis issue represents step 3. of the migration.\n\nPrerequisites to removing fields:\n- [x] DAST diffs must not be performed on the [front end](https://gitlab.com/gitlab-org/gitlab/blob/6a026108a93cd7933db1f02bb5b83fba8fe1b3f2/ee/app/assets/javascripts/vue_shared/security_reports/store/utils.js#L220). This logic has been moved to the backend, but please make sure the front end code has been removed.\n- [x] ~~Some fields (e.g. `urlsInScope`) have not yet been included in the Common Report Format. This issue can only progress once all ZAP fields have been deprecated.~~ This field will not be included in the Secure Report Format.\n\n### Technical Details\n\nUse `config.dast_major_version \u003e=2` to ensure that the fields `@generated`, `@version`, `site` and `spider` are not present in reports generated by DAST 2.x","state":"closed","created_at":"2019-10-11T16:59:28.696Z","updated_at":"2021-07-31T14:54:46.467Z","closed_at":"2021-03-10T22:39:14.137Z","closed_by":{"id":5344211,"username":"craigmsmith","name":"Craig Smith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5344211/avatar.png","web_url":"https://gitlab.com/craigmsmith"},"labels":["Category:DAST","Enterprise Edition","backend","backstage [DEPRECATED]","bug::performance","devops::secure","group::dynamic analysis","maintenance::refactor","section::sec","security reports integration","workflow::production"],"milestone":{"id":1233761,"iid":57,"group_id":9970,"title":"13.10","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.646Z","updated_at":"2022-04-21T07:22:00.171Z","due_date":"2021-03-17","start_date":"2021-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/57"},"assignees":[{"id":5344211,"username":"craigmsmith","name":"Craig Smith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5344211/avatar.png","web_url":"https://gitlab.com/craigmsmith"}],"author":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"type":"ISSUE","assignee":{"id":5344211,"username":"craigmsmith","name":"Craig Smith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5344211/avatar.png","web_url":"https://gitlab.com/craigmsmith"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-04-22","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33915","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33915","notes":"https://gitlab.com/api/v4/projects/278964/issues/33915/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33915/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33915","relative":"#33915","full":"gitlab-org/gitlab#33915"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5271,"epic":{"id":188044,"iid":5271,"title":"Breaking changes for DAST 14.0","url":"/groups/gitlab-org/-/epics/5271","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25860868,"iid":33913,"project_id":278964,"title":"Rails codebase depends on DAST Common Report Format","description":"### Problem to solve\n\nThe DAST tool is migrating from a custom ZAProxy format to use the Common Report Format. This will enable the Secure team to reuse key parts of our codebase.\n\nThe migration has three stages:\n\n1. DAST will create a `gl-dast-report.json` report containing the legacy ZAProxy fields and the Common Report Fields. https://gitlab.com/gitlab-org/gitlab/issues/14053\n1. The GitLab Rails codebase will use the Common Report Format for DAST instead of the ZAProxy fields. https://gitlab.com/gitlab-org/gitlab/issues/33913\n1. DAST will remove the legacy ZAProxy fields from the report. https://gitlab.com/gitlab-org/gitlab/issues/33915\n\nThis issue represents step 2. of the migration.\n\n### Places to change\n- The backend logic to display the difference in vulnerabilities in an MR should be based on the Common Report Format","state":"closed","created_at":"2019-10-11T16:56:51.609Z","updated_at":"2020-02-04T04:43:48.128Z","closed_at":"2020-02-04T04:43:48.085Z","closed_by":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"labels":["Enterprise Edition","backend","backstage [DEPRECATED]","bug::performance","devops::secure","group::dynamic analysis","maintenance::refactor","workflow::verification"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"}],"author":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"type":"ISSUE","assignee":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"user_notes_count":9,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33913","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33913","notes":"https://gitlab.com/api/v4/projects/278964/issues/33913/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33913/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33913","relative":"#33913","full":"gitlab-org/gitlab#33913"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25859638,"iid":33907,"project_id":278964,"title":"Smartcards allow to use SAN extensions without matching emails and URI","description":"### Problem to solve\n\nThe solution as implemented in https://gitlab.com/gitlab-org/gitlab/issues/8605 got the email address from the Subject Alternative Name (SAN) field of the EMAIL cert, as anticipated. However, it also required that the SAN contain the URI that matched the hostname of the GitLab server. This won‚Äôt work for CACs that are issued globally, and so won‚Äôt be tailorable specifically to GitLab.\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\n\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n* [Dana (Data Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#dana-data-analyst)\n\nPersonas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\n\n### Proposal\n\nOnly do URI check if there's multiple email definitions\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?--\u003e\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements\nIf this feature requires changing permissions, this document https://docs.gitlab.com/ee/user/permissions.html must be updated accordingly. --\u003e\n\n### Testing\n\n* [ ] Need to check that this doesn't introduce opportunities to impersonate or deface users\n\n### What does success look like, and how can we measure that?\n\nUsers using smartcards with SAN extensions should be able to login into gitlab, on the following two scenarios:\n\n1. The user certificate only has one email entry in the SAN extensions and it should be used to login into gitlab\n1. The user certificate has multiple email entries and should only use the one that match the URI as described here https://docs.gitlab.com/ee/administration/auth/smartcard.html#authentication-against-a-local-database-with-x509-certificates-and-san-extensions-premium-only\n\n### What is the type of buyer? \n\nPremium \n\n### Links / references\n\n/label ~feature\n","state":"closed","created_at":"2019-10-11T15:58:16.339Z","updated_at":"2020-01-20T16:24:39.242Z","closed_at":"2019-11-26T09:08:21.324Z","closed_by":{"id":4412196,"username":"sarcila","name":"Sebasti√°n Arcila Valenzuela","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3a4e06d560d693fb3a842f5201df3746?s=80\u0026d=identicon","web_url":"https://gitlab.com/sarcila"},"labels":["backend","devops::manage","estimation::completed","group::authentication and authorization","missed:12.5","smartcard","type::feature","workflow::in dev"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},{"id":4412196,"username":"sarcila","name":"Sebasti√°n Arcila Valenzuela","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3a4e06d560d693fb3a842f5201df3746?s=80\u0026d=identicon","web_url":"https://gitlab.com/sarcila"}],"author":{"id":4412196,"username":"sarcila","name":"Sebasti√°n Arcila Valenzuela","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3a4e06d560d693fb3a842f5201df3746?s=80\u0026d=identicon","web_url":"https://gitlab.com/sarcila"},"type":"ISSUE","assignee":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33907","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33907","notes":"https://gitlab.com/api/v4/projects/278964/issues/33907/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33907/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33907","relative":"#33907","full":"gitlab-org/gitlab#33907"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2119,"epic":{"id":14433,"iid":2119,"title":"CAC configuration improvements","url":"/groups/gitlab-org/-/epics/2119","group_id":9970,"human_readable_end_date":"Dec 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25859504,"iid":33905,"project_id":278964,"title":"Refactor package list page from haml to Vue","description":"## Summary\n\nRefactor the Package list page from haml to Vue in preparation for the upcoming features that need to be added here. As part of this work, we could also include #31817. We could also fix #33790 as part of this refactoring.","state":"closed","created_at":"2019-10-11T15:52:01.382Z","updated_at":"2020-03-24T09:39:07.681Z","closed_at":"2020-03-19T17:20:22.324Z","closed_by":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"labels":["Category:Package Registry","Package:P2","backstage [DEPRECATED]","devops::package","feature flag","frontend","group::package registry","missed-deliverable","missed:12.5","missed:12.6","missed:12.7","missed:12.8","package:active","workflow::production"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":4087042,"username":"nkipling","name":"Nick Kipling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087042/avatar.png","web_url":"https://gitlab.com/nkipling"},{"id":4584738,"username":"nmezzopera","name":"Nicol√≤ Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"}],"author":{"id":4087042,"username":"nkipling","name":"Nick Kipling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087042/avatar.png","web_url":"https://gitlab.com/nkipling"},"type":"ISSUE","assignee":{"id":4087042,"username":"nkipling","name":"Nick Kipling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087042/avatar.png","web_url":"https://gitlab.com/nkipling"},"user_notes_count":13,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33905","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33905","notes":"https://gitlab.com/api/v4/projects/278964/issues/33905/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33905/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33905","relative":"#33905","full":"gitlab-org/gitlab#33905"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25859257,"iid":33902,"project_id":278964,"title":"Follow-up from \"Private/Internal (Sub)Group email notifications not sent when mentioned in MR description\"","description":"### Summary\n\nFollo-up for https://gitlab.com/gitlab-org/gitlab/issues/30112 to investigate point 3 in this [discussion](https://gitlab.com/gitlab-org/gitlab/issues/30112#note_227025562).\n\nAfter investigating, the missing param `current_user` is also causing a bug where extra todos are being generated.\n\n### Steps to reproduce\n\n1. In a private group and being signed in as a member, update the title or description of an issue (same for MRs and Epics) and include a mention to the group.\n2. Mark To-Dos as done.\n3. Update title or description that contained the group mention, without removing the mention.\n4. Navigate to the To-Do list, there will be a new To-Do generated by the private group mention.\n\n\n### What is the current *bug* behavior?\n\nA new To-Do is generated everytime the title or description is edited like it would be if the mention was newly included. This is wrongly notifying all group members for every edit.\n\n### What is the expected *correct* behavior?\n\nTo-do should be generated only when the group is being mentioned for the first time. All following updates, that don't modify the mention, should not generate new To-Dos.\n\n### Relevant logs and/or screenshots\n**1.**\n![Screenshot_2019-10-24_at_18.12.10](/uploads/c19fe77eb54c266367ba3675a2d28c33/Screenshot_2019-10-24_at_18.12.10.png)\n**2.**\n![Screenshot_2019-10-24_at_18.17.36](/uploads/004252ddb22bba360ba303406e524467/Screenshot_2019-10-24_at_18.17.36.png)\n**3.**\n![Screenshot_2019-10-24_at_18.20.28](/uploads/b2a0b1e2a66a88374b2798d553540342/Screenshot_2019-10-24_at_18.20.28.png)\n\n\n### Possible fixes\n\nThis is happening because the collection of mentioned used captured before the update, is empty when the mention includes a private group. We can see in [this line](https://gitlab.com/gitlab-org/gitlab/blob/master/app/services/issuable_base_service.rb#L358) that the method `#mentioned_users` is not passing the current user as a param and this results in lack of access to read the private group members.\n\nSuggested fix:\n\n```diff\ndiff --git a/app/services/issuable_base_service.rb b/app/services/issuable_base_service.rb\nindex 3e17d75c02c..8a79c5f889d 100644\n--- a/app/services/issuable_base_service.rb\n+++ b/app/services/issuable_base_service.rb\n@@ -355,7 +355,7 @@ class IssuableBaseService \u003c BaseService\n     associations =\n       {\n         labels: issuable.labels.to_a,\n-        mentioned_users: issuable.mentioned_users.to_a,\n+        mentioned_users: issuable.mentioned_users(current_user).to_a,\n         assignees: issuable.assignees.to_a\n       }\n```","state":"closed","created_at":"2019-10-11T15:41:03.554Z","updated_at":"2019-10-31T15:54:13.992Z","closed_at":"2019-10-28T23:23:27.528Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["backend","devops::plan","maintenance::refactor","type::bug","workflow::staging"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33902","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33902","notes":"https://gitlab.com/api/v4/projects/278964/issues/33902/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33902/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33902","relative":"#33902","full":"gitlab-org/gitlab#33902"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25858783,"iid":33899,"project_id":278964,"title":"Add vulnerabilities to instance security dashboard","description":"### Problem to solve\n\nVulnerabities need to be displayed on the instance security dashboard. This is the final step towards implementing the [dashboard.](https://gitlab.com/gitlab-org/gitlab/issues/6953)\n\n### Proposal\n\nIn order to reuse existing shared vulnerability logic such as the `Vulnerable` model concern and the `VulnerabilityActions` controller concern, create an `ApplicationInstance` model (without tying it to ActiveRecord) that has all the necessary features of a \"vulnerable\". More details can be found in this (slightly outdated) [comment](https://gitlab.com/gitlab-org/gitlab/issues/6953#note_205411917).\n\nNew vulnerability related routes and a controller will need to be added for this dashboard.\n\n### Permissions and Security\n\nNo one should be able to access the vulnerability endpoints who cannot access the instance security dashboard _or_ any of the projects for which vulnerabilities are being requested.\n\n### What is the type of buyer? \n\n~\"GitLab Ultimate\" \n\n### Links / references\n\nThis is a child issue of https://gitlab.com/gitlab-org/gitlab/issues/6953.","state":"closed","created_at":"2019-10-11T15:23:37.665Z","updated_at":"2020-01-10T09:47:43.100Z","closed_at":"2020-01-09T15:40:58.072Z","closed_by":{"id":15139,"username":"rspeicher","name":"Robert Speicher","state":"active","avatar_url":"https://secure.gravatar.com/avatar/73c8253932541a7b5cbc5d79493f2bea?s=80\u0026d=identicon","web_url":"https://gitlab.com/rspeicher"},"labels":["Enterprise Edition","GitLab Ultimate","backend","backend-weight::3","devops::secure","direction","feature flag","group::dynamic analysis","security dashboard","severity::3","type::feature","workflow::in review"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"}],"author":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"type":"ISSUE","assignee":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"user_notes_count":8,"merge_requests_count":3,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33899","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33899","notes":"https://gitlab.com/api/v4/projects/278964/issues/33899/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33899/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33899","relative":"#33899","full":"gitlab-org/gitlab#33899"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25858595,"iid":33896,"project_id":278964,"title":"Project selection for instance security dashboard","description":"### Problem to solve\n\nPeople need to be able to add and remove projects from their instance security dashboard.\n\n### Proposal\n\nThe [operations dashboard](https://gitlab.com/gitlab-org/gitlab/blob/988655e6de7e631baa3406ae2741c631548fd177/ee/app/controllers/operations_controller.rb) has the same functionality. It may be possible to extract and reuse some of that logic.\n\nRefer to the parent [issue](https://gitlab.com/gitlab-org/gitlab/issues/6953) for other details.\n\n### Permissions and Security\n\nPeople should only be allowed to add projects that they have access to.\n\n### What is the type of buyer? \n\n~\"GitLab Ultimate\" \n\n### Links / references\n\nThis issue is a child of https://gitlab.com/gitlab-org/gitlab/issues/6953.","state":"closed","created_at":"2019-10-11T15:15:55.957Z","updated_at":"2019-12-04T22:53:57.462Z","closed_at":"2019-12-04T22:53:57.374Z","closed_by":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"labels":["Enterprise Edition","GitLab Ultimate","Stretch","backend","backend-weight::3","devops::secure","direction","feature flag","group::dynamic analysis","missed:12.5","security dashboard","severity::3","type::feature","workflow::in review"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"}],"author":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"type":"ISSUE","assignee":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33896","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33896","notes":"https://gitlab.com/api/v4/projects/278964/issues/33896/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33896/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33896","relative":"#33896","full":"gitlab-org/gitlab#33896"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25858571,"iid":33895,"project_id":278964,"title":"Expand supported number projects on Environments Dashboard by adding pagination","description":"\u003c!--¬†The¬†first¬†four¬†sections:¬†\"Problem¬†to¬†solve\",¬†\"Intended¬†users\", \"User experience goal\",¬†and¬†\"Proposal\",¬†are¬†strongly¬†recommended,¬†while¬†the¬†rest¬†of¬†the¬†sections¬†can¬†be¬†filled¬†out¬†during the problem validation or breakdown phase. However, keep in mind that providing complete and relevant information early helps our product team validate the problem and start working on a solution.¬†--\u003e\n\n### Problem to solve.\n\nCurrently, the results on the Environment/Operation dashboard are limited to 7 projects with 3 environments. This means the dashboards are not very usable for organizations that are looking to manage many deployments from the dashboard. \n\nSee relevant discussion at https://gitlab.com/gitlab-org/gitlab/issues/33609#note_229333878\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\n\nPersonas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/\n\n* [Cameron (Compliance Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#cameron-compliance-manager)\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n* [Rachel (Release Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#rachel-release-manager) \n* [Alex (Security Operations Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#alex-security-operations-engineer)\n* [Simone (Software Engineer in Test)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#simone-software-engineer-in-test)\n* [Allison (Application Ops)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#allison-application-ops) \n* [Priyanka (Platform Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#priyanka-platform-engineer)\n* [Dana (Data Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#dana-data-analyst)\n--\u003e\n\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer) \n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Rachel (Release Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#rachel-release-manager) \n\n### User experience goal\n\n\u003c!-- What is the single user experience workflow this problem addresses? \nFor example, \"The user should be able to use the UI/API/.gitlab-ci.yml with GitLab to \u003cperform a specific task\u003e\"\nhttps://about.gitlab.com/handbook/engineering/ux/ux-research-training/user-story-mapping/ --\u003e \n\nAs a user managing 100s of deployments, I want to be able to see my active environments on the environments dashboard. I should be able to add more projects to the current view. \n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\n~frontend \n* Lists with more than 20 items require pagination which is always located below the list and takes the form of a button group.\n* If a list has less than 20 items, the pagination should not be shown.\n* The gitlab-ui pagination component should be used https://gitlab.com/gitlab-org/gitlab-ui/tree/master/components/base/pagination\n  * The component should comply with the existing Pajamas (design system) guidelines https://design.gitlab.com/components/pagination\n  * In case UX issues are identified, they should generate ~\"UX debt\" or ~enhancement for the ~\"component:pagination\" \n\n~backend \n* Add ~backend pagination with response headers to be consumed by ~frontend (e.g. https://gitlab.com/gitlab-org/gitlab/-/blob/8a7fe44ead1533d70d781ba3b09770892bc1675b/app/assets/javascripts/vue_shared/components/pagination/table_pagination.vue#L37)\n\n1. add pagination with default `per_page = 7` (weight = 1)\n1. change `per_page` to `20` behind the feature flag (weight = 2)\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?\nConsider adding checkboxes and expectations of users with certain levels of membership https://docs.gitlab.com/ee/user/permissions.html\n* [ ] Add expected impact to members with no access (0)\n* [ ] Add expected impact to Guest (10) members\n* [ ] Add expected impact to Reporter (20) members\n* [ ] Add expected impact to Developer (30) members \n* [ ] Add expected impact to Maintainer (40) members\n* [ ] Add expected impact to Owner (50) members --\u003e\n\n* [ ] Members with no access (0) should not be able to view dashboard \n* [ ] Guest (10) members should not be able to add to the dashboard \n* [ ] Reporter (20) members should not be able to add to the dashboard \n* [ ] Developer (30) members should not be able to add to the dashboard \n* [ ] Maintainer (40) members should able to add, remove and change projects on the dashboard \n* [ ] Owner (50) members  should able to add, remove and change projects on the dashboard \n\n### What is the type of buyer?\n\n\u003c!-- What¬†is¬†the¬†buyer¬†persona¬†for¬†this¬†feature?¬†See¬†https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/buyer-persona/\nIn which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\n\n~\"GitLab Premium\" , as the Environments Dashboard is premium","state":"closed","created_at":"2019-10-11T15:15:00.326Z","updated_at":"2021-04-03T08:33:44.017Z","closed_at":"2020-09-09T14:42:13.136Z","closed_by":{"id":5622641,"username":"nicolewilliams","name":"Nicole Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5622641/avatar.png","web_url":"https://gitlab.com/nicolewilliams"},"labels":["Category:Release Orchestration","Deliverable","GitLab Premium","Release::P1","UX","backend","backend-weight::3","cicd::active","devops::release","direction","environments","frontend","frontend-weight::2","missed-deliverable","missed:12.5","section::ops","workflow::staging"],"milestone":{"id":1233753,"iid":51,"group_id":9970,"title":"13.4","description":"https://about.gitlab.com/releases/2020/09/22/gitlab-13-4-released/","state":"closed","created_at":"2020-04-09T17:39:21.662Z","updated_at":"2022-04-13T14:50:33.769Z","due_date":"2020-09-17","start_date":"2020-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/51"},"assignees":[{"id":3079878,"username":"rayana","name":"Rayana Verissimo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3079878/avatar.png","web_url":"https://gitlab.com/rayana"},{"id":4391348,"username":"sean_carroll","name":"Sean Carroll","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4391348/avatar.png","web_url":"https://gitlab.com/sean_carroll"},{"id":4446737,"username":"jakeburden","name":"Jake Burden","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4446737/avatar.png","web_url":"https://gitlab.com/jakeburden"}],"author":{"id":3716529,"username":"jagood","name":"Jason Goodman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6696c95a1788e2d4bee67df636805ecc?s=80\u0026d=identicon","web_url":"https://gitlab.com/jagood"},"type":"ISSUE","assignee":{"id":3079878,"username":"rayana","name":"Rayana Verissimo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3079878/avatar.png","web_url":"https://gitlab.com/rayana"},"user_notes_count":127,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33895","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":12,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 12 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33895","notes":"https://gitlab.com/api/v4/projects/278964/issues/33895/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33895/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33895","relative":"#33895","full":"gitlab-org/gitlab#33895"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2102,"epic":{"id":14214,"iid":2102,"title":"RO: Extend Environment Dashboard Scaling","url":"/groups/gitlab-org/-/epics/2102","group_id":9970,"human_readable_end_date":"Sep 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25857640,"iid":33891,"project_id":278964,"title":"Add QueryRecorder to Specs for EnvironmentsFolder and DashboardEnvironmentsSerializer","description":"Add `ActiveRecord::QueryRecorder.new` on the specs for `EnviromentsFolder` and `DashboardEnvironmentsSerializer`.\n\nSee discussion at: https://gitlab.com/gitlab-org/gitlab/merge_requests/18353#note_229342541\n\n## Problem to Solve \nWe need to understand the performance impacts of the current number of SQL queries registered on [`EnviromentsFolder`](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/models/environment_folder.rb) and on [`DashboardEnvironmentsSerializer`](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/serializers/dashboard_environments_serializer.rb), to ensure future iterations respect this number, or even better they improve it.\n\n##  Proposal\nAdd spec on `DashboardEnviromentsSerializer` and ` EnviornmentsFolder` called  `ActiveRecord::QueryRecorder.new`, something along the lines of:\n\n```ruby\ndescribe 'number of queries' do\n  subject { environment_folder.find_for_projects(projects) }\n\n  context 'with one environment' do\n    let(:projects) { [create(:project)] }\n\n    before do\n     # we create the data here \n    end\n\n    it 'respects the expected number' do\n      recorded = ActiveRecord::QueryRecorder.new { subject }\n      expected_queries = X # number of queries so far\n\n      expect(recorded.count).to eq(expected_queries) \n    end\n  end\n\n  context 'with 20 environments' do # Assuming we paginate environments in a future iteration and we default to 20 per page\n    let(:projects) { create_list(:project, 20) }\n\n    before do\n     # we create the data here \n    end\n\n    it 'respects the expected number' \n end\nend\n```","state":"closed","created_at":"2019-10-11T14:41:48.542Z","updated_at":"2022-07-27T13:06:31.386Z","closed_at":"2022-07-27T13:06:31.362Z","closed_by":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"labels":["Category:Release Orchestration","Release::P2","[deprecated] Accepting merge requests","backend","bug::performance","devops::release","environments","group::release","maintenance::refactor","section::ops","type::maintenance"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"}],"author":{"id":3716529,"username":"jagood","name":"Jason Goodman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6696c95a1788e2d4bee67df636805ecc?s=80\u0026d=identicon","web_url":"https://gitlab.com/jagood"},"type":"ISSUE","assignee":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33891","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33891","notes":"https://gitlab.com/api/v4/projects/278964/issues/33891/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33891/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33891","relative":"#33891","full":"gitlab-org/gitlab#33891"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3295,"epic":{"id":53416,"iid":3295,"title":"Environments: Redesign Bugs and Features","url":"/groups/gitlab-org/-/epics/3295","group_id":9970,"human_readable_end_date":"Jul 31, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25855706,"iid":33887,"project_id":278964,"title":"Add license compliance to DAST pipeline","description":"Add license compliance to the DAST pipeline to dogfood and ensure that DAST is only incorporating software that is accepted by our license policies.","state":"closed","created_at":"2019-10-11T14:24:13.467Z","updated_at":"2020-03-12T19:11:43.710Z","closed_at":"2020-03-02T20:30:59.203Z","closed_by":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"labels":["backstage [DEPRECATED]","devops::secure","group::dynamic analysis"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"}],"author":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"type":"ISSUE","assignee":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33887","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33887","notes":"https://gitlab.com/api/v4/projects/278964/issues/33887/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33887/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33887","relative":"#33887","full":"gitlab-org/gitlab#33887"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25847956,"iid":33876,"project_id":278964,"title":"Productivity analytics endpoint doesn't enforce properly tier check","description":"**[HackerOne report #707375](https://hackerone.com/reports/707375)** by `rpadovani` on 2019-10-03, assigned to @cmaxim:\n\n### Summary\n\nThe new [Productivity Analytics](https://docs.gitlab.com/ee/user/analytics/productivity_analytics.html) feature should be available only to Premium or higher accounts.\n\nThe endpoint to retrieve data for the feature, however, doesn't properly authenticate the user, allowing any user to retrieve the data, making the feature easily available to anyone.\n\nHowever, there isn't any leak of confidential data, because the users retrieve only data that they could already retrieve, if they had paid.\n\nIt is just an unauthorized access to paid resources.\n\n### Steps to reproduce\n\n1. The endpoint `/-/analytics/productivity_analytics`, when queried for a JSON reply using the `Accept` header, returns data in the JSON format. If you do not specify anything, it returns the HTML page.  \n2. The endpoint authenticates the parameter `group_id` and `project_id`. That is, it checks the group or the project has at least a premium license.  \n3. If you do not specify nor the `group_id` or the `project_id`, the endpoint just executes the query.  \n4. In this way, you can access all the data needed to do the analytics. You can also access public data of other projects that are not usually easily accessible.  \n5. Since a lot of parameters are accepted, it is easy to customize the search to return only the MR of a project that is not under the premium license. E.g: using the `my_reaction_emoji` parameter.\n\nHere the list of accepted parameters:\n\n-     scope: 'created_by_me' or 'assigned_to_me' or 'all'  \n-     state: 'open', 'closed', 'merged', 'locked', or 'all'  \n-     milestone_title: string  \n-     author_id: integer  \n-     assignee_id: integer  \n-     search: string  \n-     in: 'title', 'description', or a string joining them with comma  \n-     label_name: string  \n-     sort: string  \n-     non_archived: boolean  \n-     my_reaction_emoji: string  \n-     source_branch: string  \n-     target_branch: string  \n-     created_after: datetime  \n-     created_before: datetime  \n-     updated_after: datetime  \n-     updated_before: datetime\n\n\n### Impact\n\nUsers can access a premium feature for free without any difficulty (a proxy or a browser plugin would work well enough)\n\n### Examples\n\nThis is an example of a fetch request made from the console, so with the cookies:\n\n```  \n a = await fetch(\"https://gitlab.com/-/analytics/productivity_analytics?scope=created_by_me\", {  \n    \"credentials\": \"include\",  \n    \"headers\": {  \n        \"Accept\": \"application/json, text/plain, */*\",  \n        \"X-CSRF-Token\": \"token\",  \n        \"X-Requested-With\": \"XMLHttpRequest\"  \n    },  \n    \"referrer\": \"https://gitlab.com/-/analytics/productivity_analytics\",  \n    \"method\": \"GET\",  \n    \"mode\": \"cors\"  \n});  \nawait a.json()  \n```\n\nThe response is an array of 20 objects with all the data needed by the feature\n\n### What is the current *bug* behavior?\n\nI can query the productivity_analytics endpoint without specifying group_id nor project_id\n\n### What is the expected *correct* behavior?\n\n group_id or project_id are required, and they are used to check I am allowed to access the resource\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n## Impact\n\nUsers can access a premium feature for free without any difficulty (a proxy or a browser plugin would work well enough)","state":"closed","created_at":"2019-10-11T10:59:06.779Z","updated_at":"2021-12-21T00:07:24.404Z","closed_at":"2019-10-17T17:58:18.440Z","closed_by":{"id":444,"username":"dzaporozhets","name":"Dmytro Zaporozhets (DZ)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/444/avatar.png","web_url":"https://gitlab.com/dzaporozhets"},"labels":["HackerOne","devops::manage","group::optimize","priority::3","security","severity::3","type::bug","workflow::in review"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"user_notes_count":12,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":"2020-01-07","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33876","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33876","notes":"https://gitlab.com/api/v4/projects/278964/issues/33876/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33876/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33876","relative":"#33876","full":"gitlab-org/gitlab#33876"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25845421,"iid":33870,"project_id":278964,"title":"Match and display policies to licenses that are already detected in a project","description":"### Problem to solve\n\nProblem: there is no clear way to tell if licenses detected in the project are in compliance with the policies defined.\n\nContext: this issue is based on discovery work done in https://gitlab.com/gitlab-org/gitlab-ee/issues/12941 and is a follow up to https://gitlab.com/gitlab-org/gitlab/issues/14061. Users can see licenses in a project (per scanning) and policies (per admin classifying license) separately, but not how they relate to each other. For example, in the policies section, a user may see that an LPL 1.2 license is denied, but if that same license is detected in a project, the user wouldn't know it's denied unless matching the lists (detected/policy) manually.  \n\n:film_projector: [view walkthrough with context and iteration](https://youtu.be/Qg7FmoBCDbw)\n\n### Intended users\n\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\\\n* Legal and/or person responsible for orgs compliance\n\n### Further details\n\n##### Job's to be done\n* *User that is responsible for compliance:* When my organization has policies with licenses, I want to be aware of my companies policies, so I can make sure my project licenses are in compliance with my orgs compliance.\n* *User that is accountable for compliance:* When I need to enforce our organization's licenses restrictions, I want to be able to view them and define policies, so that I can ensure a project's compliance.\n\n### Proposal ideation\nIf policies have been created for a project, match them if/when to license that exist in a project. Display the matching license classification policies in the \"detected in project\" list.\n\n##### Iteration iv: UX ready for development\n\n![uxready](/uploads/45f8094724e1192af97aa76cbe3b28bd/uxready.png) \n\n\u003cdetails\u003e\u003csummary\u003eiteration iii\u003c/summary\u003e\n![all](/uploads/75e9bd9468d342f669e6634093c228a0/all.png)\n\n* Likes version ii, surfacing licenses to the top\n* Banner is helpful; but update copy to present tense\n* Consider version iii later \n\n\u003c/details\u003e\n\n\u003cdetails\u003e\u003csummary\u003eiteration ii\u003c/summary\u003e\n![all1](/uploads/b5026aba1aeb42b207a3428ae22d1a4f/all1.png)\n\nIteration ii feedback from [UX team review](https://docs.google.com/document/d/1xwwLHLq1fW0_6tegt54n1DZseZ_IAIC0-M95n01tCs0/edit?usp=sharing) and [SCA team review](https://docs.google.com/document/d/1nmNKkWS9qmEidsqWswFZzKAQL9YVCFRitQxow5C9pbY/edit?usp=sharing):\n* Consider creating additional columns for the violation\n* Better display why a license is being surfaced  \n* Explore using the blue and/or green value for the background\n* There may be labels with text and icon in the library to use for `policy violation`\n* Let‚Äôs look at how to identify where/when this was found to show later. Related: [audit log](https://gitlab.com/gitlab-org/gitlab/issues/199228) or maybe can leverage `git-blame`. \n* Need to solve the problem of finding the particular dependency correlated with MR\n* Ideally we‚Äôd have the info for all the dependencies name/version and would know the MR where it has been introduced\n\n\u003c/details\u003e\n\n\u003cdetails\u003e\u003csummary\u003eold iteration: scoped down\u003c/summary\u003e\n\n| Developer UI (*design updated in progress*) | \n| ------ | \n| ![developer](/uploads/0ae59c6be649183a35b7ff31de4bc227/developer.png) | \n\n| Developer UI | Maintainer UI |\n| ------ | ------ |\n| ![developer](/uploads/0ae59c6be649183a35b7ff31de4bc227/developer.png) | ![maintainer](/uploads/e0a0bf72488f09f7ac541ee217545d19/maintainer.png) |\n\n* due to de-prioritization de-scoped, removed user ability to add policy to existing license  \n\n\u003c/details\u003e\n\n\n\n### Permissions and Security\n\n* Developers view may view policies, but can't adjust them\n* Public projects policy section is not visible to non-project participants (https://gitlab.com/gitlab-org/gitlab/issues/33659)\n\n### Documentation\n\n..\n\n### Testing\nToDo\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\n### What does success look like, and how can we measure that?\n* Developer lands on the page and can determine if there are denied licenses that exists in the project\n\n\n### What is the type of buyer? \n\nUltimate\n\n### Links / references\n* https://gitlab.com/gitlab-org/gitlab/issues/12941\n\n### Implementation Plan\n\n#### Backend\n\n* [x] Combine licenses from the latest scan report with the policies configured for the project.\n* [x] Serve the combined licenses from the `/projects/-/licenses.json` endpoint.\n* [ ] Add `order_by` filter to sort by `classification`. https://gitlab.com/gitlab-org/gitlab/-/issues/213592\n\n### UX\n\n* [ ] []()\n\n### Frontend - person\n\n* [ ] []()\n\n### Documentation - person\n\n* [ ] [User Documentation]()\n\n### Product Management - @NicoleSchwartz\n* [ ] [Release Post]()","state":"closed","created_at":"2019-10-11T10:03:20.933Z","updated_at":"2021-11-30T21:53:24.065Z","closed_at":"2020-04-16T19:23:52.196Z","closed_by":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"labels":["Category:License Compliance","Enterprise Edition","Secure UX::Compliance \u0026 Auditing","UX","UX scorecard-rec","devops::secure","frontend","frontend-weight::2","group::composition analysis","type::feature","workflow::production"],"milestone":{"id":1104429,"iid":46,"group_id":9970,"title":"12.10","description":"https://about.gitlab.com/releases/2020/04/22/gitlab-12-10-released","state":"closed","created_at":"2019-12-20T15:15:53.243Z","updated_at":"2020-10-08T12:00:39.852Z","due_date":"2020-04-17","start_date":"2020-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/46"},"assignees":[{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},{"id":3614383,"username":"kmann","name":"Kyle Mann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614383/avatar.png","web_url":"https://gitlab.com/kmann"}],"author":{"id":3614383,"username":"kmann","name":"Kyle Mann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614383/avatar.png","web_url":"https://gitlab.com/kmann"},"type":"ISSUE","assignee":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"user_notes_count":28,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33870","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 7 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33870","notes":"https://gitlab.com/api/v4/projects/278964/issues/33870/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33870/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33870","relative":"#33870","full":"gitlab-org/gitlab#33870"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2051,"epic":{"id":13704,"iid":2051,"title":"Licenses classification","url":"/groups/gitlab-org/-/epics/2051","group_id":9970,"human_readable_end_date":"Apr 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25839846,"iid":33864,"project_id":278964,"title":"Default branch visible despite no permissions to repository","description":"*Update:* per Michelle's comment [here](https://gitlab.com/gitlab-org/gitlab/-/issues/33864#note_346248279)\n\n\u003e The issue outlined in the description has been resolved, however, additional findings occurred during the security review: gitlab-org/security/gitlab#103 (comment 333022117)\n\n``` curl -s https://staging.gitlab.com/dcouture/norepoaccess | grep this_is_the_default_branch```\n\n```html\n\u003cinput type=\"hidden\" name=\"repository_ref\" id=\"repository_ref\" value=\"this_is_the_default_branch\" /\u003e\n\u003cdiv class=\"search-autocomplete-opts hide\" data-autocomplete-path=\"/search/autocomplete\" data-autocomplete-project-id=\"4588281\" data-autocomplete-project-ref=\"this_is_the_default_branch\"\u003e\u003c/div\u003e\n\u003c/a\u003e\u003c/li\u003e\u003cli class=\"\"\u003e\u003ca class=\"shortcuts-repository-charts\" title=\"Repository\" href=\"/dcouture/norepoaccess/-/graphs/this_is_the_default_branch/charts\"\u003e\u003cspan\u003eRepository\u003c/span\u003e\n```\n---\n\n**[HackerOne report #706361](https://hackerone.com/reports/706361)** by `ashish_r_padelkar` on 2019-10-02, assigned to @cmaxim:\n\n### Summary  \nHello,\n\nThe default branch should not be visible to guest/non-member users when they do not have any access to repository. However, default branch is still visible to such users.\n\n\nI am reporting this issue as similar report was resolved before #531694 which exposes default branch when there was no access to repository.\n\n\n### Steps to reproduce\n\n1. Create a public project with non access to repository for non members. This can be done by setting repository as `Only Project Members`.\n\n2. This should ensure that no information related to repository is visible to non members\n\n3. Now , as a non member, just visit to project details pages `https://gitlab.com/\u003cUserName\u003e/\u003cProjectName\u003e` and do the inspect element of browser. \n\n4. In `Body` html tag, you should see `data-find-file` attribute which exposes default branch. Note that default branch can be set to anything by admins.\n\n![Screenshot_2019-10-02_at_17.17.31.png](https://h1.sec.gitlab.net/a/bb91a676-4fd4-4e09-9ff2-d2bc2e98d1c2/Screenshot_2019-10-02_at_17.17.31.png)\n\n\n\n\n### Examples\n\nYou can see my project here at `https://gitlab.com/gitlabadminuser/thisispublicproject` and follow the above steps to know default branch from this project.\n\n### What is the current *bug* behavior?\n\nDefault branch is visible to non members when they do not have any access to repository\n\n### What is the expected *correct* behavior?\n\nNone of the repository related information should be visible to non members when they do not have access\n\n\n### Output of checks  \nThis bug happens on GitLab.com and might be on omnibus installations too.\n\nRegards,  \nAshish\n\n## Impact\n\nThis bug exposes default branch to\n\n1. Non members in public project when repository is `only project members`  \n2. Guest in private project can see when they do not have any access to repository  \n3. No badges setup in projects/groups  \n4. Public pipelines are disabled\n\n## Attachments\n\n**Warning:** Attachments received through HackerOne, please exercise caution!\n\n* [Screenshot_2019-10-02_at_17.17.31.png](https://h1.sec.gitlab.net/a/bb91a676-4fd4-4e09-9ff2-d2bc2e98d1c2/Screenshot_2019-10-02_at_17.17.31.png)","state":"closed","created_at":"2019-10-11T08:17:01.665Z","updated_at":"2022-01-05T08:54:31.370Z","closed_at":"2021-12-03T11:49:11.750Z","closed_by":{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"},"labels":["Category:Source Code Management","Deliverable","HackerOne","SaaS","Weakness::CWE-200","devops::create","frontend","group::source code","priority::4","quad-planning::complete-no-action","section::dev","security","security-backlog::review-complete","severity::4","workflow::ready for development"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33864","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33864","notes":"https://gitlab.com/api/v4/projects/278964/issues/33864/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33864/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33864","relative":"#33864","full":"gitlab-org/gitlab#33864"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7128,"epic":{"id":384256,"iid":7128,"title":"Security Engineering Allocation (Source Code BE): 10-NOV-2021","url":"/groups/gitlab-org/-/epics/7128","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25838148,"iid":33861,"project_id":278964,"title":"Non Member of Public Project Can Publish Drafted Reviews on Locked Merge Request","description":"**[HackerOne report #706044](https://hackerone.com/reports/706044)** by `rafiem` on 2019-10-02, assigned to @cmaxim:\n\nHi Team,\n\nI have found improper access control on comment changes in merge request section. In the change section of merge request, user can make review, add comment and reply to comment to spesific line of code that changed. In case of submitting a review, user firstly create a draft of review, and then can finish review and submit review or add comment now. In the issue i found, when non members of public project previously created a pending draft review in one of the merge request, user still able to publish and submit the drafted review even if the merge request is locked by the members of the project. This violate the rule of locked merge request, that only project members can comment on all part of the spesific merge request.\n\n### Proof of Concept  \n1.) User A have a public project , example : https://gitlab.com/bajigur/cuk1  \n2.) User B and then make a draft review on one of the merge request in https://gitlab.com/bajigur/cuk1  \n3.) User A then set the merge request that User B make a draft review to Locked  \n4.) User B still able to submit and publish the drafted review that he previously make, that allow User B to comment to part of merge request, which is forbidden when merge request is locked\n\n\u003c\u003ePoC Video Attached  \n![PoC.webm](https://h1.sec.gitlab.net/a/65f20dae-9de5-4866-b419-5cde70dbf399/PoC.webm)\n\n## Impact\n\nNon members still able to comment to merge reqeuest through darft review in changes even if merge request is locked\n\nBest Regards,  \n@rafiem\n\n## Attachments\n\n**Warning:** Attachments received through HackerOne, please exercise caution!\n\n* [PoC.webm](https://h1.sec.gitlab.net/a/65f20dae-9de5-4866-b419-5cde70dbf399/PoC.webm)","state":"closed","created_at":"2019-10-11T07:26:05.745Z","updated_at":"2020-01-30T22:42:41.899Z","closed_at":"2020-01-02T03:00:07.564Z","closed_by":null,"labels":["Deliverable","HackerOne","backend","devops::create","group::source code","priority::3","security","severity::3","workflow::in review"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-12-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33861","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33861","notes":"https://gitlab.com/api/v4/projects/278964/issues/33861/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33861/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33861","relative":"#33861","full":"gitlab-org/gitlab#33861"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25836132,"iid":33856,"project_id":278964,"title":"Operations Settings h4 =\u003e h3","description":"Change Headings on Operations Settings pages from h4 to h3. To keep font size can use `class=\"h4\"`\n\n\n\nThe following discussion from !17330 should be addressed:\n\n- [ ] @andr3 started a [discussion](https://gitlab.com/gitlab-org/gitlab/merge_requests/17330#note_229086579): \n\n    \u003e **Sidenote:** All the headings in this page seem off, since there is no `h3`, only an `h2`.\n    \u003e \n    \u003e For consistency, I'd leave this. But at certain point it would be good to correct all headings in this page to be `h3`.\n    \u003e \n    \u003e ![Screen_Shot_2019-10-10_at_20.59.50](/uploads/3a22471330bf203ddd1c3ff04273cc65/Screen_Shot_2019-10-10_at_20.59.50.png)","state":"closed","created_at":"2019-10-11T05:55:07.662Z","updated_at":"2020-02-26T16:07:00.708Z","closed_at":"2020-02-26T16:07:00.405Z","closed_by":{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"},"labels":["accessibility","devops::monitor","frontend","group::respond","maintenance::refactor","settings","workflow::in review"],"milestone":null,"assignees":[{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"}],"author":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"type":"ISSUE","assignee":{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"},"user_notes_count":0,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33856","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33856","notes":"https://gitlab.com/api/v4/projects/278964/issues/33856/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33856/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33856","relative":"#33856","full":"gitlab-org/gitlab#33856"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25832990,"iid":33851,"project_id":278964,"title":"Document how to integrate the anomaly chart to the dashboard","description":"## Goal\n\nRequires https://gitlab.com/gitlab-org/gitlab/merge_requests/16530 to be merged. We should document what kind of yml should be added to the dashboard to make use of the anomaly charts.\n\n## Example that could work in the docs:\n\n`.gitlab/dashboards/custom_dashboard.yml`\n```yaml\ndashboard: 'My Dashboard'\npanel_groups:\n  - group: 'Memory Usage Variation'\n    panels:\n      - type: anomaly-chart\n        title: \"Anomalies Chart\"\n        y_label: \"Pods\"\n        metrics:\n          - id: cpu_usage_current\n            query_range: avg(sum(rate(container_memory_usage_bytes[15m]))) /1024\n            label: \"Memory Usage Variation\"\n            unit: \"KB\" \n          - id: cpu_usage_upper\n            query_range: 30000\n            label: \"Memory Usage Max\"\n            unit: \"KB\" \n          - id: cpu_usage_lower\n            query_range: 5000\n            label: \"Memory Usage Min\"\n            unit: \"KB\"\n```\n\n![image](/uploads/bd0dc675edb59be6c5a50bd9b1ef804a/image.png)\n\n## Example (Using subqueries), not working yet:\n\nRequires: https://gitlab.com/gitlab-org/gitlab/issues/31279#note_229574331\n\n`.gitlab/dashboards/custom_dashboard_2.yml`\n```yaml\ndashboard: 'My Dashboard'\npanel_groups:\n  - group: 'Memory Usage Variation'\n    panels:\n      - type: anomaly-chart\n        title: \"Anomalies Chart\"\n        y_label: \"Pods\"\n        metrics:\n          - id: cpu_usage_current\n            query_range: avg(sum(rate(container_memory_usage_bytes[15m]))) /1024\n            label: \"Memory Usage Variation\"\n            unit: \"KB\" \n          - id: cpu_usage_upper\n            query_range: (avg_over_time(rate(container_memory_usage_bytes[15m])[1w:15m]) + stddev_over_time(rate(container_memory_usage_bytes[15m])[1w:15m])) /1024\n            label: \"Memory Usage Max\"\n            unit: \"KB\" \n          - id: cpu_usage_lower\n            query_range: (avg_over_time(rate(container_memory_usage_bytes[15m])[1w:15m]) - stddev_over_time(rate(container_memory_usage_bytes[15m])[1w:15m])) /1024\n            label: \"Memory Usage Min\"\n            unit: \"KB\"\n```\n\nhttps://gitlab.com/gitlab-org/gitlab/merge_requests/16530 should get merged first.","state":"closed","created_at":"2019-10-11T04:03:13.153Z","updated_at":"2020-11-16T12:54:49.064Z","closed_at":"2019-11-08T10:06:04.569Z","closed_by":{"id":1607849,"username":"mrincon","name":"Miguel Rincon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1607849/avatar.png","web_url":"https://gitlab.com/mrincon"},"labels":["APM","Enterprise Edition","GitLab Ultimate","design::readyforeng","devops::monitor","documentation","frontend","group::respond","missed:12.4","to schedule","workflow::verification"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":1607849,"username":"mrincon","name":"Miguel Rincon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1607849/avatar.png","web_url":"https://gitlab.com/mrincon"}],"author":{"id":1607849,"username":"mrincon","name":"Miguel Rincon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1607849/avatar.png","web_url":"https://gitlab.com/mrincon"},"type":"ISSUE","assignee":{"id":1607849,"username":"mrincon","name":"Miguel Rincon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1607849/avatar.png","web_url":"https://gitlab.com/mrincon"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33851","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33851","notes":"https://gitlab.com/api/v4/projects/278964/issues/33851/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33851/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33851","relative":"#33851","full":"gitlab-org/gitlab#33851"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25829810,"iid":33849,"project_id":278964,"title":"Number of files listed on merge request changes tab incorrect when truncated","description":"### Summary\n\nWhen merge request changes are truncated the tab displays \"nnn+ changes\" but number of files is displayed is the number of files _excluding_ those outside of the truncated changes.  This is misleading for the user who sees different output to that of their `git diff`, causing them to doubt the integrity of the merge request.\n\n![image](/uploads/c9fc7d02dcfb0334ae1fc65806879b2e/image.png)\n\nThe above should read \"177 Files displayed\", or \"177+ Files\".\n\n### Steps to reproduce\n\nCreate a merge request with a large number of files.\n\n### Example Project\n\nCreated a test project here:\nhttps://gitlab.com/amulvany/support-issues/merge_requests/5/diffs\n\n### What is the current *bug* behavior?\n\nIncorrect number of files displayed\n\n### What is the expected *correct* behavior?\n\nShow total count of all files, or be explicit to the user.\n\n### Relevant logs and/or screenshots\n\n### Output of checks\n\n(If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com)\n\n#### Results of GitLab environment info\n\n#### Results of GitLab application Check\n\n### Possible fixes\n\nCould update https://gitlab.com/gitlab-org/gitlab/blob/master/app%2Fassets%2Fjavascripts%2Fdiffs%2Fcomponents%2Fdiff_stats.vue#L24 to `return n__('File', 'Files', this.diffFilesLength + \" displayed\");`\n\n\nCustomer has reported this issue: https://gitlab.zendesk.com/agent/tickets/134702 (Internal use only)","state":"closed","created_at":"2019-10-11T00:32:02.410Z","updated_at":"2020-12-07T16:48:13.684Z","closed_at":"2020-07-28T03:58:22.831Z","closed_by":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"labels":["Category:Code Review Workflow","Deliverable","customer","devops::create","frontend","group::code review","merge requests","priority::4","severity::4","type::bug"],"milestone":{"id":1233752,"iid":50,"group_id":9970,"title":"13.3","description":"https://about.gitlab.com/releases/2020/08/22/gitlab-13-3-released/","state":"closed","created_at":"2020-04-09T17:39:21.090Z","updated_at":"2022-04-13T14:50:18.976Z","due_date":"2020-08-17","start_date":"2020-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/50"},"assignees":[{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":1147472,"username":"amulvany","name":"Adam Mulvany","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1147472/avatar.png","web_url":"https://gitlab.com/amulvany"},"type":"ISSUE","assignee":{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},"user_notes_count":4,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33849","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33849","notes":"https://gitlab.com/api/v4/projects/278964/issues/33849/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33849/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33849","relative":"#33849","full":"gitlab-org/gitlab#33849"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25828128,"iid":33831,"project_id":278964,"title":"Permissions for instance level security dashboard","description":"### Problem to solve\n\nImplement the permission scheme for the upcoming instance level security dashboard.\n\n### Intended users\n\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n\n### Further details\n\nThis is the first backend issue for implementing the instance level security dashboard. It was extracted from https://gitlab.com/gitlab-org/gitlab/issues/6953\n\n### Proposal\n\nAdd a global policy for the instance level security dashboard that forbids access to anonymous users and to anyone not on an Ultimate level instance.\n\n### Permissions and Security\n\nDeny access to:\n\n* Anyone not on an instance level security dashboard\n* Anonymous users\n\n\n### What is the type of buyer? \n\n~\"GitLab Ultimate\" \n\n### Links / references","state":"closed","created_at":"2019-10-10T21:38:15.283Z","updated_at":"2019-12-06T17:14:34.717Z","closed_at":"2019-10-11T15:00:49.056Z","closed_by":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"labels":["Enterprise Edition","GitLab Ultimate","Stretch","backend","backend-weight::2","devops::secure","direction","feature flag","group::dynamic analysis","security dashboard","severity::3","type::feature","workflow::in review"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"}],"author":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"type":"ISSUE","assignee":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33831","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33831","notes":"https://gitlab.com/api/v4/projects/278964/issues/33831/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33831/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33831","relative":"#33831","full":"gitlab-org/gitlab#33831"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25826384,"iid":33827,"project_id":278964,"title":"Container Scanning report common output: Execute clair server as a subprocess within the analyzer","description":"Sub-issue of https://gitlab.com/gitlab-org/gitlab/issues/32934\n\n### Implementation plan\n\nImplement all the functionality of [start.sh](https://gitlab.com/gitlab-org/security-products/analyzers/klar/blob/154cfb7c335dfc137fc1a9a29b6442893e71f0c6/container-scanner/start.sh) in the golang version of the klar analyzer which was implemented [here](https://gitlab.com/gitlab-org/gitlab/issues/33824):\n\n1. [x] Configure/export all the same environment variables\n1. [x] Allow overriding the postgres vulnerabilities database url used by clair\n1. [x] Start the [clair server](https://github.com/coreos/clair) as a background process and ensure that it's responsive before attempting to scan the image\n1. [x] Handle errors from the `clair server`\n1. [x] Output deprecation warning if the `CLAIR_DB_IMAGE_TAG` environment variable does not equal `latest` (see [here](https://gitlab.com/gitlab-org/gitlab/merge_requests/19161#note_235807274) for details)\n1. [x] Execute the [klar binary](https://github.com/optiopay/klar) to initiate a container scan and save the results in memory\n1. [x] Handle errors from `klar`\n1. [x] Run the `golang klar analyzer` against the output created in step `6.` to produce a `gl-container-scanning-report.json` file\n1. [x] Ensure the [new rails parser](https://gitlab.com/gitlab-org/gitlab/issues/33825) can handle the file produced by step `8.`\n1. [x] Add unit tests for the above behaviour\n1. [x] Test the new docker image using the [container scanning test project](https://gitlab.com/gitlab-org/security-products/tests/container-scanning)\n    * https://gitlab.com/gitlab-org/security-products/tests/container-scanning/pipelines/107436812\n1. [x] Update the [CI configuration](https://gitlab.com/gitlab-org/security-products/analyzers/klar/blob/154cfb7c335dfc137fc1a9a29b6442893e71f0c6/.gitlab-ci.yml) to to use the [shared CI config](https://gitlab.com/gitlab-org/security-products/ci-templates/blob/master/includes-dev/analyzer.yml) \n    * https://gitlab.com/gitlab-org/security-products/analyzers/klar/merge_requests/17\n1. [ ] ~~Remove the reference to `/container-scanner/start.sh` in the [Container-Scanning template](https://gitlab.com/gitlab-org/gitlab/blob/3d7c9f119c1154d2f1f168d5ade7f5af9978c439/lib/gitlab/ci/templates/Security/Container-Scanning.gitlab-ci.yml#L28)~~\n    - `/container-scanner/start.sh` is still needed in order to maintain backward compatibility with the previous container scanning tool","state":"closed","created_at":"2019-10-10T20:30:12.212Z","updated_at":"2020-04-15T03:48:35.865Z","closed_at":"2020-01-07T05:03:10.630Z","closed_by":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"labels":["Category:Container Scanning","Deliverable","backend","backstage [DEPRECATED]","devops::secure","group::composition analysis","maintenance::refactor","missed-deliverable","missed:12.5","missed:12.6","sub-issue"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"}],"author":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"type":"ISSUE","assignee":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33827","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":13,"completed_count":12},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"12 of 13 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33827","notes":"https://gitlab.com/api/v4/projects/278964/issues/33827/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33827/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33827","relative":"#33827","full":"gitlab-org/gitlab#33827"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25826155,"iid":33826,"project_id":278964,"title":"Add analytics for DAST on the default branch","description":"### Problem to solve\n\nWe need to validate that DAST is providing value to people when run on the default branch of their repositories.\n\n### Intended users\n\n~\"Persona: Product Manager\" ~\"Persona: Development Team Lead\"\n\n(Only Gitlab's product managers and team leads.)\n\n### Further details\n\nThis is what we want to measure:\n\n1. Number of DAST scans done on default branches in each month. Target = 1000\n2. Percentage of repos using AutoDevOps that have DAST on the default branch enabled. Target = 50%\n3. Vulnerabilities found from DAST runs on default branches.\n    * This will confirm that DAST on the default branch is providing valuable report results that either weren't visible or weren't noticed on the MR DAST results.\n\n### Proposal\n\nWe will gather the necessary data through [Snowplow](https://gitlab.com/gitlab-org/gitlab/blob/master/doc/development/event_tracking/backend.md) custom events. We will then create a Periscope dashboard to display the data.\n\nNote: the engineer who works on this issue will need to have edit [access](https://gitlab.com/gitlab-com/access-requests/issues/new?issuable_template=Single%20Person%20Access%20Request) for Periscope in order to create the dashboard.\n\nHere is an implementation plan for each item we want to measure:\n\n---\n\n\u003e 1. Number of DAST scans done on default branches in each month. Target = 1000\n\nPlace a custom tracking event in the [service](https://gitlab.com/gitlab-org/gitlab/blob/e522834794241456e77d846de9aab130d2d7ea31/ee/app/services/security/store_reports_service.rb#L14) for storing security reports that tracks when a DAST report is stored. Storage only happens on the default branch, so every time we receive one of these events it means DAST was run on the default branch.  In our tracking syntax, it will look like:\n\n```\ncategory: Security::StoreReportsService # the class from which the event originates\naction: store_dast_report\n```\n\nNote: we'll only get this event if the DAST job completes successfully.\n\n---\n\n\u003e 2. Percentage of repos using AutoDevOps that have DAST on the default branch enabled. Target = 50%\n\nTBD\n\n---\n\n3. Vulnerabilities found in DAST runs on default branches.\n    * This will confirm that DAST on the default branch is providing valuable report results that either weren't visible or weren't noticed on the MR DAST results.\n\nThis will also use Snowplow's custom events. The event will be fired from the [service](https://gitlab.com/gitlab-org/gitlab/blob/e522834794241456e77d846de9aab130d2d7ea31/ee/app/services/security/store_report_service.rb#L63) for creating vulnerabilities from a security report, and will have the following attributes:\n\n```\ncategory: Security::StoreReportService\naction: create_vulnerability_from_dast_report\n```\n\n### Open questions\n\n1. Is it okay that we only track _successful_ DAST runs on the default branch?\n2. Do we/should we have documentation for Secure team analytics that lists custom events and links to Secure team Periscope dashboards?\n3. How will we track the percentage of repos using AutoDevOps but with DAST on the default branch disabled?","state":"closed","created_at":"2019-10-10T20:22:05.085Z","updated_at":"2022-08-08T03:22:36.683Z","closed_at":"2022-08-02T22:49:52.452Z","closed_by":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"labels":["Category:Auto DevOps","Category:DAST","[deprecated] Accepting merge requests","analytics","backend-weight::5","backstage [DEPRECATED]","devops::secure","group::dynamic analysis","section::sec","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33826","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33826","notes":"https://gitlab.com/api/v4/projects/278964/issues/33826/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33826/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33826","relative":"#33826","full":"gitlab-org/gitlab#33826"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25826116,"iid":33825,"project_id":278964,"title":"Container Scanning report common output: Add rails parser for new report format","description":"Sub-issue of https://gitlab.com/gitlab-org/gitlab/issues/32934\n\nAdd a new parser in the rails backend to support the new container scanning reports implemented by https://gitlab.com/gitlab-org/gitlab/issues/33824","state":"closed","created_at":"2019-10-10T20:20:41.375Z","updated_at":"2019-12-18T11:32:54.032Z","closed_at":"2019-12-13T00:08:10.124Z","closed_by":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"labels":["Category:Container Scanning","Deliverable","backend","backstage [DEPRECATED]","devops::secure","group::composition analysis","maintenance::refactor","missed-deliverable","missed:12.5","sub-issue"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"}],"author":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"type":"ISSUE","assignee":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"user_notes_count":3,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33825","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33825","notes":"https://gitlab.com/api/v4/projects/278964/issues/33825/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33825/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33825","relative":"#33825","full":"gitlab-org/gitlab#33825"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25826039,"iid":33824,"project_id":278964,"title":"Container Scanning report common output: Re-write klar analyzer using Go","description":"Sub-issue of https://gitlab.com/gitlab-org/gitlab/issues/32934\n\n### Implementation plan\n\n1. [x] Rewrite [Klar analyzer converter](https://gitlab.com/gitlab-org/security-products/analyzers/klar/tree/master/container-scanner/converter) using `Go`\n1. [x] Output `gl-container-scanning-report.json` using the [Security Products Common Format](https://gitlab.com/gitlab-org/gitlab/issues/9610)\n1. [x] Support vulnerability whitelisting with `clair-whitelist.yml` file\n1. [x] Support [table output](https://gitlab.com/gitlab-org/security-products/tests/container-scanning/-/jobs/296491898) in CI job log, including an `approved/unapproved` status label on each vulnerability as determined by the contents of the `clair-whitelist.yml` file\n1. [x] Rewrite all tests from `node.js` to `Go`\n1. [x] Update [start.sh](https://gitlab.com/gitlab-org/security-products/analyzers/klar/blob/master/container-scanner/start.sh#L119-120) to use the new `Go` Klar analyzer converter.\n1. [x] Update [Container Scanning test project](https://gitlab.com/gitlab-org/security-products/tests/container-scanning) to use new klar analyzer and report format\n   *  https://gitlab.com/gitlab-org/security-products/tests/container-scanning/merge_requests/5","state":"closed","created_at":"2019-10-10T20:16:49.533Z","updated_at":"2019-12-20T21:35:42.730Z","closed_at":"2019-12-19T08:03:12.261Z","closed_by":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"labels":["Category:Container Scanning","Deliverable","backend","backstage [DEPRECATED]","devops::secure","group::composition analysis","maintenance::refactor","missed-deliverable","missed:12.5","sub-issue"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"}],"author":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"type":"ISSUE","assignee":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33824","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":7},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"7 of 7 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33824","notes":"https://gitlab.com/api/v4/projects/278964/issues/33824/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33824/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33824","relative":"#33824","full":"gitlab-org/gitlab#33824"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25823842,"iid":33820,"project_id":278964,"title":"Problems with adding issues and epics in an epic","description":"From https://gitlab.com/gitlab-org/gitlab/issues/9126#note_224881172:\n\n* epics autocompletion is active when adding issue (adding an epic from there actually works but is confusing)\n* when clicking epic in autocompletion, it gets added twice\n* tooltip of the epic has `\u0026` escaped twice\n* adding epic with a title that's a valid epic reference fails\n* ad an Epic form text has `#` instead of `\u0026`\n\n![Screen_Recording_2019-10-02_at_11.13.29.mp4](https://gitlab.com/gitlab-org/gitlab/uploads/1b866511cf4700b3e5b22cb511a23ef9/Screen_Recording_2019-10-02_at_11.13.29.mp4)\n\n![Screen_Recording_2019-10-02_at_11.14.04.mp4](https://gitlab.com/gitlab-org/gitlab/uploads/107971bb0851575c82cdce1485472857/Screen_Recording_2019-10-02_at_11.14.04.mp4)","state":"closed","created_at":"2019-10-10T18:30:28.980Z","updated_at":"2020-01-07T07:49:21.210Z","closed_at":"2020-01-07T07:49:21.160Z","closed_by":{"id":3236898,"username":"rajatgitlab","name":"Rajat Jain","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3236898/avatar.png","web_url":"https://gitlab.com/rajatgitlab"},"labels":["devops::plan","frontend","group::product planning","missed-SLO","missed:12.5","missed:12.6","priority::2","severity::3","type::bug","workflow::production"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":3236898,"username":"rajatgitlab","name":"Rajat Jain","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3236898/avatar.png","web_url":"https://gitlab.com/rajatgitlab"}],"author":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"type":"ISSUE","assignee":{"id":3236898,"username":"rajatgitlab","name":"Rajat Jain","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3236898/avatar.png","web_url":"https://gitlab.com/rajatgitlab"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33820","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33820","notes":"https://gitlab.com/api/v4/projects/278964/issues/33820/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33820/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33820","relative":"#33820","full":"gitlab-org/gitlab#33820"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":134,"epic":{"id":247,"iid":134,"title":"Make easier to add/remove issues/epics to/from epics","url":"/groups/gitlab-org/-/epics/134","group_id":9970,"human_readable_end_date":"Feb 29, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25821317,"iid":33814,"project_id":278964,"title":"Change state to integer for issuables, remove state column - Release 3 of 3","description":"This is the third step of the plan to deprecate state column for issues and merge requests.  \nWe should remove the `state` column from `issues` and `merge_requests` table using a migration.\n\n### Schedule\n\n#### First release: https://gitlab.com/gitlab-org/gitlab-ce/issues/51789\n\n1. Add a `state_id` column to issues and merge requests tables\n\n1. Schedule a background migration that will populate `state_id` column with new values\n\n#### Second release: https://gitlab.com/gitlab-org/gitlab/issues/28457\n\n1. Adds new indexes to `state_id` column\n\n1. Add the code which uses the new `state_id` column\n\n#### Third release: This issue\n\n1. Markes`state` column as ignored for issues and merge requests  \n\n### Fourth release: https://gitlab.com/gitlab-org/gitlab/issues/36370  \n\n1. Removes `state` column from issues and merge_requests with database migration.","state":"closed","created_at":"2019-10-10T16:50:40.217Z","updated_at":"2019-11-29T18:56:20.832Z","closed_at":"2019-11-29T18:56:20.761Z","closed_by":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"labels":["backend","database","devops::plan","group::product planning","maintenance::refactor","missed:12.5","workflow::verification"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"}],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"user_notes_count":2,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33814","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33814","notes":"https://gitlab.com/api/v4/projects/278964/issues/33814/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33814/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33814","relative":"#33814","full":"gitlab-org/gitlab#33814"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25821275,"iid":33813,"project_id":278964,"title":"Move merge request navigation tabs below title and consolidate description and widget in Overview tab","description":"## Problem to solve\n\nThe diff, commit list, and pipelines tab usability is decreased by having a long description and merge widget above them all the time because means the top of the page doesn't actually show what I am trying to look at.\n\n## Intended users\n\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n\n## Further details\n\nThe currently location of merge request navigation tabs has surfaced as sub-optimal in interviews with multiple customers, and in investigating https://gitlab.com/gitlab-org/gitlab/issues/27600, https://gitlab.com/gitlab-org/gitlab/issues/31300, and https://gitlab.com/gitlab-org/gitlab-ce/issues/62536.\n\nRecent user testing of file-by-file diff navigation https://gitlab.com/gitlab-org/ux-research/issues/341 included this change, and was positively received. Although questions about the file-by-file navigation remain, adjusting the navigation tabs was well received.\n\n## Proposal\n\nTo provide more predictable and easy to find navigation within a merge request, and to provide greater focus in each area of the merge request:\n\n- move the merge request navigation tabs above the description\n- only show the description and merge widget on the **Overview** tab (replacing the discussions tab)\n\nSince early research was very positive, we are confident that this deserves maximum exposure:\n- Add a feature flag, off by default, without a need for the user preference. We can then progressively enable the feature on GitLab.com.\n- Add an explanatory popover (see image below) with a button to dismiss (saved as a cookie?) and a link to an feedback issue.\n- To collect feedback, we can publish a blog post that links to the feedback issue and share it internally and on social media.\n\n| Top of MR | Between MR widget and activity feed |\n|---|---|\n| Notice the removal of redundant horizontal lines/borders and reduced vertical padding/margins. | The activity filter dropdown is aligned with the emoji reactions, just like in issues today. |\n| ![image](/uploads/7802ca2b9dacb71c2d0d3a35eb9ba56e/image.png) | ![image](/uploads/052569531e1b5e3863bb3ac1511763b9/image.png) |\n| `You can now find the navigation tabs of all merge requests at the top, where they‚Äôre easy to access. [More information and share feedback] [Got it!]` | |\n\n## Permissions and Security\n\nNone. This change is cosmetic only, rearranging information that is already visible.\n\n## Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements\nIf this feature requires changing permissions, this document https://docs.gitlab.com/ee/user/permissions.html must be updated accordingly. --\u003e\n\nThe hero screenshot on https://docs.gitlab.com/ee/user/project/merge_requests/ will need to be updated.\n\n## Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\n## What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\nQualitative feedback from customers will validate if usability has improved.\n\nIn combination with the real performance gains of https://gitlab.com/groups/gitlab-org/-/epics/1816, we would like the reduced visual weight to further incease perceived performance.\n\n## Links / references","state":"closed","created_at":"2019-10-10T16:48:49.078Z","updated_at":"2020-12-07T19:12:27.450Z","closed_at":"2019-12-17T11:48:46.243Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Category:Code Review Workflow","Deliverable","Technical Writing","UI text","UX","devops::create","direction","frontend","group::code review","merge requests","missed-deliverable","missed:12.5","type::feature","workflow::verification"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"}],"author":{"id":1187333,"username":"jramsay-gitlab","name":"James Ramsay (ex-GitLab)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1187333/avatar.png","web_url":"https://gitlab.com/jramsay-gitlab"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":44,"merge_requests_count":0,"upvotes":3,"downvotes":1,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33813","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":6,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33813","notes":"https://gitlab.com/api/v4/projects/278964/issues/33813/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33813/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33813","relative":"#33813","full":"gitlab-org/gitlab#33813"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1406,"epic":{"id":7882,"iid":1406,"title":"üåª Increase focus of merge request changes tab","url":"/groups/gitlab-org/-/epics/1406","group_id":9970,"human_readable_end_date":"Feb 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25809777,"iid":33793,"project_id":278964,"title":"Come up with design for visualizing DAG/hybrid DAG in pipeline view","description":"[Validation track](https://about.gitlab.com/handbook/product-development-flow/#validation-track) effort in preparation of the [build track](https://about.gitlab.com/handbook/product-development-flow/#build-track) for issue https://gitlab.com/gitlab-org/gitlab/issues/31877\n\n## Problem Statement\n\nWe have implemented the DAG and are currently just displaying it over the top of stages, which doesn't really mean anything and could be confusing. We aren't taking advantage of the DAG structure in any way to render an important view. We need to determine the problem that people need to solve when they are visualizing a DAG.\n\nSome initial discussions have taken place in https://gitlab.com/gitlab-org/gitlab/issues/31877.\n\n- Opportunity canvas: https://docs.google.com/document/d/17a3Jjzt0s69GRsN-JPeCf0rlmz9URyEZ2E9qOIpCbDY/edit\n- Discussion guide: https://docs.google.com/document/d/1TYbi--6JyB3JtWnEdbQE3ExR_xJo_fpWLxGwX7vyGwg/edit?usp=sharing\n\nDAG pipelines are currently rendered as follows:\n\n![image](/uploads/adde4ca741bd5091104d9bea7c9fd09e/image.png)\n\n![image](/uploads/5a07f3229c8211719885b14707230267/image.png)\n\nThe internal representation of the data structure is something more like the following:\n\n![image](/uploads/f6e1922d2eee838149a69d909fc997cd/image.png)\n\nAs part of discovering the problem here we should also investigate how people are using the pipeline view. There are interesting possibilities for an integrated view rather than having two modes, since a stage flow can be considered a more rigid subset of a DAG. For example, there culd be one pipeline style that supports both DAG and non-DAG pipelines, especially since GitLab's DAGs can be hybrids. We could ignore stages from the platform's perspective, and essentially make them a kind of annotation for a job. In this way we'd have a unified concept.\n\n## Reach\n\nThis impacts users who have advanced, complex pipelines and are some of the largest most sophisticated users of GitLab pipelines.\n\n3.0 = Significant reach (~25% to ~50%).\n\n## Impact\n\nWe have provided these teams with a solution that works in terms of execution, but have not given them any tools in order to visualize and understand what's actually happening. The only possibility is to look at the `.gitlab-ci.yml` to understand what's going on.\n\n2.0 = High impact\n\n## Confidence\n\nWe are very confident that this is a problem. We knew when implementing the DAG that we were doing it without any UX. This was the right decision and still a valuable capability, but we knew we needed to come back and solve this problem.\n\n100% = High confidence\n\n## Effort\n\nThis is a moderate effort requiring new frontend work to display what's actually happening in the UX, and possibly backend changes to deliver the information to the frontend. It's also a challenging problem to solve and will require some thought and careful consideration to come up with a good solution.\n\n- PM .5\n- Designer .5\n- Frontend Engineer 1\n- Backend Engineer .5\n\nTotal 2.5 (though this is highly speculative as no specific solution has been identified)\n\n### UX Weighting rubric\n\n| Size     | Score | Description                                                                                                                                                                                                                                                                                                                               |  |  |  |  |  |  |  |  |\n|----------|-------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--|--|--|--|--|--|--|--|\n| Trivial  | 1     | Mostly small to medium UI changes, smaller UX improvements, without unanswered questions. UX may need to stay involved with the issue but might not have to do work.                                                                                                                                                                      |  |  |  |  |  |  |  |  |\n| Small    | 2     | Simple UI or UX change where we understand all of the requirements, but may need to find solutions to known questions/problems.                                                                                                                                                                                                           |  |  |  |  |  |  |  |  |\n| Medium   | 3     | A medium change (lots of UI or UX changes/improvements required). Multiple pages are involved, we're starting to design/redesign small flows. Some unknown questions may arise during the work.                                                                                                                                           |  |  |  |  |  |  |  |  |\n| Large    | 5     | A complicated change where other team members will need to be involved. Spans across multiple pages, we're working on medium-sized flows. There are significant open questions that need to be answered.                                                                                                                                  |  |  |  |  |  |  |  |  |\n| Huge     | 8     | A complex change that spans across large flows and may require input from other designers. This is the largest flow design/redesign that we would take on in a single milestone.                                                                                                                                                          |  |  |  |  |  |  |  |  |\n| Gigantic | 13    | A significant change that spans across multiple flows and that would require significant input from others (teams, team members, user feedback) and there are many unknown unknowns. It's unlikely we would commit to this in a milestone, and the preference would be to further clarify requirements and/or break in to smaller issues. |  |  |  |  |  |  |  |  |","state":"closed","created_at":"2019-10-10T13:18:20.222Z","updated_at":"2020-02-26T05:37:18.638Z","closed_at":"2020-02-26T05:37:18.299Z","closed_by":{"id":489558,"username":"dimitrieh","name":"Dimitrie Hoekstra","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/489558/avatar.png","web_url":"https://gitlab.com/dimitrieh"},"labels":["Category:Continuous Integration","UX","devops::verify","group::pipeline execution","track::validation","workflow::design"],"milestone":null,"assignees":[{"id":489558,"username":"dimitrieh","name":"Dimitrie Hoekstra","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/489558/avatar.png","web_url":"https://gitlab.com/dimitrieh"},{"id":4089628,"username":"loriewhitaker","name":"Lorie Whitaker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4089628/avatar.png","web_url":"https://gitlab.com/loriewhitaker"}],"author":{"id":2243533,"username":"jyavorska","name":"Jason Yavorska","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2243533/avatar.png","web_url":"https://gitlab.com/jyavorska"},"type":"ISSUE","assignee":{"id":489558,"username":"dimitrieh","name":"Dimitrie Hoekstra","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/489558/avatar.png","web_url":"https://gitlab.com/dimitrieh"},"user_notes_count":41,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33793","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33793","notes":"https://gitlab.com/api/v4/projects/278964/issues/33793/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33793/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33793","relative":"#33793","full":"gitlab-org/gitlab#33793"},"severity":"UNKNOWN","moved_to_id":31273594,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25809776,"iid":33792,"project_id":278964,"title":"500 error when filtering group issues / MRs with search params and invalid author","description":"https://sentry.gitlab.net/gitlab/devgitlaborg/issues/1009767/\n\nThis comes from this URL: https://dev.gitlab.org/groups/gitlab/-/merge_requests?scope=all\u0026utf8=‚úì\u0026state=merged\u0026author_username=jameslopez\u0026search=cache\n\nIf it worked, this wouldn't return anything: the username is wrong. (James is `@james` on dev.)\n\nFiltering by author with the wrong username works fine: https://dev.gitlab.org/groups/gitlab/-/merge_requests?scope=all\u0026utf8=%E2%9C%93\u0026state=merged\u0026author_username=jameslopez\n\nBut when the search param is added, the CTE gets a NULL inner somehow.\n\n```sql\nWITH \"merge_requests\" AS (NULL) SELECT  \"merge_requests\".* FROM merge_requests WHERE (\"merge_requests\".\"title\" ILIKE '%cache%' OR \"merge_requests\".\"description\" ILIKE '%cache%') ORDER BY \"merge_requests\".\"updated_at\" DESC, \"merge_requests\".\"id\" DESC LIMIT 20 OFFSET 0\n```\n\nI can reproduce on GitLab.com: https://gitlab.com/groups/gitlab-org/-/issues?author_username=12345zcvb\u0026search=foo","state":"closed","created_at":"2019-10-10T13:18:17.553Z","updated_at":"2019-10-23T08:23:24.901Z","closed_at":"2019-10-23T08:23:24.857Z","closed_by":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"labels":["Community contribution","backend","devops::plan","filter bar","group::project management","issues","priority::2","severity::3","type::bug"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":294743,"username":"jessehall3","name":"Jesse Hall","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/294743/avatar.png","web_url":"https://gitlab.com/jessehall3"}],"author":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"type":"ISSUE","assignee":{"id":294743,"username":"jessehall3","name":"Jesse Hall","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/294743/avatar.png","web_url":"https://gitlab.com/jessehall3"},"user_notes_count":5,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33792","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33792","notes":"https://gitlab.com/api/v4/projects/278964/issues/33792/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33792/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33792","relative":"#33792","full":"gitlab-org/gitlab#33792"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25808836,"iid":33790,"project_id":278964,"title":"Group packages: Project value can overflow","description":"### Summary\n\nWhen displaying a group packages list, the column `Project` is shown. There is an issue for packages coming from a nested project with multiple subgroups.\n\n### Steps to reproduce\n\n1. Create a group and several nested subgroups. Example: `Root / SubGroup1 / SubGroup2 / SubGroup3 / SubGroup4 / SubGroup5`\n1. In the last subgroup, create a project and enable packages on it.\n1. Upload a package for this project.\n1. Open the root group (from the example, group `Root`) and open the tab `Packages`.\n1. Look at the `Project` column, for our package, the full namespace is written and gets overflowed into the value of the `Version` column.\n\n### What is the current *bug* behavior?\n\nValues of the `Project` column go above the values of the `Version` column. Thus, both values are mostly unreadable.\n\n### Screenshot\n![Screenshot_2019-10-10_at_14.51.05](/uploads/fd97add64834e0e60a4b569c8b8a5987/Screenshot_2019-10-10_at_14.51.05.png)\n\n### What is the expected *correct* behavior?\n\nI don't know how other columns behave and deal with values that overflow but the solution should be consistent with what has already been done. All the values should be readable no matter the values length.","state":"closed","created_at":"2019-10-10T12:55:27.220Z","updated_at":"2020-04-06T09:23:47.578Z","closed_at":"2020-04-06T09:23:47.433Z","closed_by":{"id":4087042,"username":"nkipling","name":"Nick Kipling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087042/avatar.png","web_url":"https://gitlab.com/nkipling"},"labels":["Category:Package Registry","devops::package","frontend","group::package registry","priority::4","severity::4","type::bug","workflow::production"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":4087042,"username":"nkipling","name":"Nick Kipling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087042/avatar.png","web_url":"https://gitlab.com/nkipling"}],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":{"id":4087042,"username":"nkipling","name":"Nick Kipling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087042/avatar.png","web_url":"https://gitlab.com/nkipling"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33790","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33790","notes":"https://gitlab.com/api/v4/projects/278964/issues/33790/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33790/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33790","relative":"#33790","full":"gitlab-org/gitlab#33790"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25807936,"iid":33788,"project_id":278964,"title":"Simplify NPM Registry authentication setup steps","description":"### Problem to solve\n\nOn the NPM Registry docs, when doing the setup for [authentication](https://docs.gitlab.com/ee/user/packages/npm_registry/#authenticating-to-the-gitlab-npm-registry), users are invited to edit their `.npmrc` file. Here is the [step](https://docs.gitlab.com/ee/user/packages/npm_registry/#authenticating-with-an-oauth-token). Then, next step, there is a [section](https://docs.gitlab.com/ee/user/packages/npm_registry/#using-variables-to-avoid-hard-coding-auth-token-values) on avoiding hardcoding the auth token.\n\nFor new users following along, they create/edit the `.npmrc` file first and on the next step, they have to re-edit it to avoid hardcoding. This is disturbing.\n\n### Proposal\n\nI think it would be better to have a single section [`Authenticating with an OAuth token`](https://docs.gitlab.com/ee/user/packages/npm_registry/#authenticating-with-an-oauth-token) and directly show the user that environment variables can be used.","state":"closed","created_at":"2019-10-10T12:34:39.880Z","updated_at":"2020-03-03T18:30:24.843Z","closed_at":"2020-03-03T18:20:25.497Z","closed_by":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"labels":["Category:Package Registry","devops::package","documentation","group::package registry","npm Registry"],"milestone":null,"assignees":[{"id":4087042,"username":"nkipling","name":"Nick Kipling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087042/avatar.png","web_url":"https://gitlab.com/nkipling"}],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":{"id":4087042,"username":"nkipling","name":"Nick Kipling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087042/avatar.png","web_url":"https://gitlab.com/nkipling"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33788","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33788","notes":"https://gitlab.com/api/v4/projects/278964/issues/33788/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33788/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33788","relative":"#33788","full":"gitlab-org/gitlab#33788"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25805910,"iid":33785,"project_id":278964,"title":"Check that uploaded file content matches the file extension","description":"### Problem to solve\n\nIn the past, we have had several problems when the uploaded file content doesn't match the file extension, ie different `Content-Type` and `Content-Disposition` headers.\n\nWe should check the integrity of the file before storing the file and reject the upload.\n\n### Proposal\n\nA quick fix (I haven't tested edge cases or whether there is a better approach) would be:\n\n```diff\ndiff --git a/app/uploaders/gitlab_uploader.rb b/app/uploaders/gitlab_uploader.rb\nindex 7dc211b14e4..aaf4e6ec7cf 100644\n--- a/app/uploaders/gitlab_uploader.rb\n+++ b/app/uploaders/gitlab_uploader.rb\n@@ -3,6 +3,8 @@\n class GitlabUploader \u003c CarrierWave::Uploader::Base\n   class_attribute :options\n \n+  before :cache, :check_content_type_integrity!\n+\n   class \u003c\u003c self\n     # DSL setter\n     def storage_options(options)\n@@ -136,4 +138,10 @@ class GitlabUploader \u003c CarrierWave::Uploader::Base\n   def pathname\n     @pathname ||= Pathname.new(path)\n   end\n+\n+  def check_content_type_integrity!(file)\n+    if MimeMagic.by_magic(file.read) != MimeMagic.by_path(filename).type\n+      raise CarrierWave::IntegrityError, 'Content type does not match file extension'\n+    end\n+  end\n end\n```\n\nNevertheless, we should change the FE part to handle exceptions coming from the uploader. Otherwise, the error will be displayed:\n\n![image](/uploads/e605f12181933671eecbbb178c2c7bd0/image.png)\n\nWe could also move this process to Workhorse and avoid any Rails work completely but we have had problems detecting content types in Workhorse before and the Rails libraries are more complete. However, we should consider this option.","state":"closed","created_at":"2019-10-10T11:55:15.311Z","updated_at":"2020-07-14T01:49:45.942Z","closed_at":"2020-01-09T12:39:15.499Z","closed_by":{"id":4092171,"username":"alexpooley","name":"Alex Pooley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4092171/avatar.png","web_url":"https://gitlab.com/alexpooley"},"labels":["Deliverable","backend","devops::create","frontend","frontend-weight::1","group::editor","security","type::feature","workflow::canary"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},{"id":4092171,"username":"alexpooley","name":"Alex Pooley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4092171/avatar.png","web_url":"https://gitlab.com/alexpooley"}],"author":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier L√≥pez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"type":"ISSUE","assignee":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"user_notes_count":31,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33785","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33785","notes":"https://gitlab.com/api/v4/projects/278964/issues/33785/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33785/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33785","relative":"#33785","full":"gitlab-org/gitlab#33785"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25802340,"iid":33778,"project_id":278964,"title":"Allow creation of epics using GraphQL API","description":"## Summary\n\nAllow epics to be created using GraphQL.\n\n## Improvements\n\nIn #33776 we allow the mutating of epics using the GraphQL API. This change will add the ability to create epics using GraphQL also.\n\n/cc @kokeefe","state":"closed","created_at":"2019-10-10T09:56:00.543Z","updated_at":"2021-11-08T16:55:56.349Z","closed_at":"2019-11-29T18:53:42.152Z","closed_by":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"labels":["Category:Portfolio Management","GraphQL","backend","backstage [DEPRECATED]","devops::plan","epics","group::product planning","missed:12.5","workflow::verification"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"}],"author":{"id":4418630,"username":"johnhope","name":"John Hope","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4418630/avatar.png","web_url":"https://gitlab.com/johnhope"},"type":"ISSUE","assignee":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33778","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33778","notes":"https://gitlab.com/api/v4/projects/278964/issues/33778/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33778/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33778","relative":"#33778","full":"gitlab-org/gitlab#33778"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25801977,"iid":33776,"project_id":278964,"title":"Allow the updating of epics using GraphQL API","description":"## Summary\n\nAllow epics to be mutated using GraphQL. In particular, it should be possible to update `startDate` and `dueDate`.\n\n/cc @donaldcook @kokeefe","state":"closed","created_at":"2019-10-10T09:44:14.049Z","updated_at":"2019-11-01T11:33:04.549Z","closed_at":"2019-10-23T06:50:19.971Z","closed_by":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"labels":["GraphQL","backend","backstage [DEPRECATED]","devops::plan","group::product planning","missed:12.4","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"}],"author":{"id":4418630,"username":"johnhope","name":"John Hope","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4418630/avatar.png","web_url":"https://gitlab.com/johnhope"},"type":"ISSUE","assignee":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33776","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33776","notes":"https://gitlab.com/api/v4/projects/278964/issues/33776/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33776/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33776","relative":"#33776","full":"gitlab-org/gitlab#33776"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25800515,"iid":33773,"project_id":278964,"title":"Use absolute path when unpacking command","description":"### Summary\n\nIn https://gitlab.com/gitlab-org/gitlab/commit/a5680e0270c6413b40986e8299ee0c46b00c8893 we changed the code to use only the backup file name when unpacking a backup. This was done to prevent path traversal attacks. \n\n### Steps to reproduce\n\n`BACKUP=/path/to/backup/file/../../../../backup.tar.gz rake gitlab:backup:restore`\n\n### Possible fixes\n\nInstead of using the `basename` of the file, when can use the [check_path_traversal!](https://gitlab.com/gitlab-org/gitlab/blob/master/lib/gitlab/utils.rb#L8) method and abort the process if there is path traversal.","state":"closed","created_at":"2019-10-10T09:05:14.920Z","updated_at":"2020-03-06T09:49:50.085Z","closed_at":"2020-03-06T09:49:49.975Z","closed_by":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"labels":["[deprecated] Accepting merge requests","backend","devops::create","group::editor","type::bug"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"}],"author":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier L√≥pez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"type":"ISSUE","assignee":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"user_notes_count":1,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33773","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33773","notes":"https://gitlab.com/api/v4/projects/278964/issues/33773/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33773/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33773","relative":"#33773","full":"gitlab-org/gitlab#33773"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25799063,"iid":33768,"project_id":278964,"title":"Create custom validator for file path params in the API","description":"### Problem to solve\n\nIn the past, we have had problems with invalid file paths (ie include path traversal characters)\n\nAt the moment, in the API we don't perform any validation on this kind of param.\n\n### Further details\n\nWe can prevent some security problems if we can detect and stop the request when the file path is invalid.\n\n### Proposal\n\nThe idea is to create a `Grape::Validations` object (`lib/api/helpers/custom_validators.rb`) that checks if the file path includes path traversal characters. We have a [method](https://gitlab.com/gitlab-org/gitlab/blob/master/lib/gitlab/utils.rb#L8) that does exactly that. We can just add that method to the new validator. \n\nThen we have to review the different endpoints (for example searching for `:file_path,` params) and add this validator.\n\n### What does success look like, and how can we measure that?\n\nEndpoints that accept a file path as a param should raise an error when it is invalid.","state":"closed","created_at":"2019-10-10T08:26:19.869Z","updated_at":"2020-04-08T08:26:42.720Z","closed_at":"2020-02-26T20:25:42.367Z","closed_by":{"id":438961,"username":"splattael","name":"Peter Leitzen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/97c2ff0fc99cc4eede69be9ac238c304?s=80\u0026d=identicon","web_url":"https://gitlab.com/splattael"},"labels":["Community contribution","api","backend","backstage [DEPRECATED]","devops::create","group::editor","type::feature","workflow::verification"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":756755,"username":"raju249","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/756755/avatar.png","web_url":"https://gitlab.com/raju249"},{"id":955795,"username":"fjsanpedro","name":"Francisco Javier L√≥pez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"}],"author":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier L√≥pez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"type":"ISSUE","assignee":{"id":756755,"username":"raju249","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/756755/avatar.png","web_url":"https://gitlab.com/raju249"},"user_notes_count":8,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33768","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33768","notes":"https://gitlab.com/api/v4/projects/278964/issues/33768/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33768/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33768","relative":"#33768","full":"gitlab-org/gitlab#33768"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25798526,"iid":33766,"project_id":278964,"title":"Create custom validator for revision params in the API","description":"### Problem to solve\n\nIn the past, we have had problems with revisions that starts with `-`. Gitaly has added this kind of validation in several RPC raising the error `revision can't start with '-'`.\n\nAt the moment, in the API we don't perform any validation on this kind of param. \n\n### Further details\n\nIf we stop the request when the revision is invalid, we can avoid some RPCs and unnecessary work from the platform.\n\n### Proposal\n\nThe idea is to create a `Grape::Validations` object (`lib/api/helpers/custom_validators.rb`) that checks if the revision starts with `-`. If it does, then we can raise the error: `revision can't start with '-'. Please provide the full revision path`.\n\nThen we have to review the different endpoints (for example searching for `:ref,`) and add this validator.\n\n### What does success look like, and how can we measure that?\n\nEndpoints that accept the revision of a repository as a param should raise an error when the revision is invalid.\n","state":"closed","created_at":"2019-10-10T08:11:57.642Z","updated_at":"2020-04-08T08:26:57.985Z","closed_at":"2020-03-18T13:02:43.174Z","closed_by":{"id":438961,"username":"splattael","name":"Peter Leitzen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/97c2ff0fc99cc4eede69be9ac238c304?s=80\u0026d=identicon","web_url":"https://gitlab.com/splattael"},"labels":["Community contribution","api","backend","backstage [DEPRECATED]","devops::create","group::editor","type::feature","workflow::in review"],"milestone":{"id":1104429,"iid":46,"group_id":9970,"title":"12.10","description":"https://about.gitlab.com/releases/2020/04/22/gitlab-12-10-released","state":"closed","created_at":"2019-12-20T15:15:53.243Z","updated_at":"2020-10-08T12:00:39.852Z","due_date":"2020-04-17","start_date":"2020-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/46"},"assignees":[{"id":756755,"username":"raju249","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/756755/avatar.png","web_url":"https://gitlab.com/raju249"}],"author":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier L√≥pez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"type":"ISSUE","assignee":{"id":756755,"username":"raju249","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/756755/avatar.png","web_url":"https://gitlab.com/raju249"},"user_notes_count":8,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33766","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33766","notes":"https://gitlab.com/api/v4/projects/278964/issues/33766/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33766/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33766","relative":"#33766","full":"gitlab-org/gitlab#33766"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25786655,"iid":33756,"project_id":278964,"title":"Follow-up from \"Resolve \"Undefined method `terms_of_service_url'\"\"","description":"The following discussion from !18263 should be addressed:\n\n- [ ] @ashmckenzie started a [discussion](https://gitlab.com/gitlab-org/gitlab/merge_requests/18263#note_228429812): \n\n    \u003e I feel we should add `(PDF)` to the end of the link text in the UI so as to make it clear to those who click the link that a page won't render but rather a PDF will be downloaded:\n    \u003e \n    \u003e ![Preferences___Admin_Area___GitLab_2019-10-10_12-21-37](/uploads/fee88ec25676df0fb3a62497619e5b91/Preferences___Admin_Area___GitLab_2019-10-10_12-21-37.png)","state":"closed","created_at":"2019-10-10T01:23:52.881Z","updated_at":"2021-09-30T09:07:41.558Z","closed_at":"2019-10-14T12:22:10.089Z","closed_by":{"id":2233420,"username":"pslaughter","name":"Paul Slaughter","state":"active","avatar_url":"https://secure.gravatar.com/avatar/631b25421eb206ab44cb2793ef09d881?s=80\u0026d=identicon","web_url":"https://gitlab.com/pslaughter"},"labels":["Category:Pages","backend","devops::release","devops::release::pages","group::geo","priority::2","severity::2","team::Delivery","type::bug"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"}],"author":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"type":"ISSUE","assignee":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33756","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33756","notes":"https://gitlab.com/api/v4/projects/278964/issues/33756/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33756/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33756","relative":"#33756","full":"gitlab-org/gitlab#33756"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25785697,"iid":33751,"project_id":278964,"title":"Track usage and adoption of Conan Repository","description":"### Problem to solve\nConan is an open source C/C++ package manager that was designed to help developers create and share their binaries. The GitLab Conan Repository allows users to build, publish and share Conan packages right alongside their source code and pipelines. \n\nIn order to better understand adoption and usage of this feature, we need to add tracking to key events and actions of the Conan Repository. \n\n### Intended users\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Dana (Data Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#dana-data-analyst)\n\n### Proposal\n- Add tracking for key actions for the GitLab Conan Repository. \n\nSnowplow actions:\n\nAPI actions\n1. `push_package`\n1. `pull_package`\n1. `delete_package`\n\nThese will all have a snowplow category of `API::ConanPackages`, following the convention used within the container registry API.\n\nUI actions\n1. `delete_package`\n1. `pull_package` (download the package via the UI)\n\nThese should have a snowplow category different than what is used in the API so the metrics can be viewed separately.\n","state":"closed","created_at":"2019-10-09T23:22:44.926Z","updated_at":"2020-01-15T22:21:54.652Z","closed_at":"2020-01-15T22:21:54.613Z","closed_by":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"labels":["Category:Package Registry","backend","devops::package","frontend","group::package registry","package:active","workflow::verification"],"milestone":null,"assignees":[],"author":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"type":"ISSUE","assignee":null,"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33751","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33751","notes":"https://gitlab.com/api/v4/projects/278964/issues/33751/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33751/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33751","relative":"#33751","full":"gitlab-org/gitlab#33751"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2289,"epic":{"id":15774,"iid":2289,"title":"Delicious data (package)","url":"/groups/gitlab-org/-/epics/2289","group_id":9970,"human_readable_end_date":"Oct 31, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25785192,"iid":33749,"project_id":278964,"title":"uninitialized constant EE::Gitlab::Throttle when using spring","description":"When using `spring`, after changing code, `spring` reloads and throws the error\n\n```\nNameError - uninitialized constant EE::Gitlab::Throttle:\n  ee/lib/ee/gitlab/rack/attack.rb:18:in `block in \u003cmodule:Attack\u003e'\n  lib/gitlab/middleware/read_only/controller.rb:48:in `call'\n  lib/gitlab/middleware/read_only.rb:18:in `call'\n  lib/gitlab/middleware/basic_health_check.rb:25:in `call'\n  lib/gitlab/request_context.rb:26:in `call'\n  lib/gitlab/middleware/static.rb:11:in `call'\n  lib/gitlab/webpack/dev_server_middleware.rb:27:in `perform_request'\n  lib/gitlab/metrics/requests_rack_middleware.rb:49:in `call'\n  lib/gitlab/middleware/release_env.rb:12:in `call'\n```","state":"closed","created_at":"2019-10-09T22:51:27.931Z","updated_at":"2019-10-10T16:32:51.987Z","closed_at":"2019-10-10T16:32:51.944Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["auto updated","backend","backstage [DEPRECATED]"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"}],"author":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"type":"ISSUE","assignee":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"user_notes_count":8,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33749","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33749","notes":"https://gitlab.com/api/v4/projects/278964/issues/33749/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33749/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33749","relative":"#33749","full":"gitlab-org/gitlab#33749"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25784494,"iid":33743,"project_id":278964,"title":"Graph code coverage changes over time for a project","description":"### Problem to solve\n\n\u003c!-- What problem do we solve? --\u003e\nWhile GitLab offers the ability to show the current Code Coverage value on a badge this does not provide the context of how that value is changing over time that several users need to do their jobs.\n\n![Project Details](/uploads/d402aacac802de1817d717d71290daac/Project_Details.png)\n\n**Persona:** Delaney (Development Team Lead)\n\n* I cannot tell how the code coverage value(s) of my team's projects is changing over time and need to for my job.\n\n**Persona:** QA Manager/tester\n\n* I cannot trust that code coverage means anything without context of historical changes so I test manually even after unit tests are run for any change going to production. This leads to me batching testing to save time but it can hold up things from deploying and people get mad at me. This sucks but is necessary for me to feel the feature won't break when real users get it.\n\n**Personal:** Parker (Product Manager)\n\n* I do not trust that an increase in code coverage means a less buggy product and I do not have data to prove that as code coverage changes customer found defects change in lock step.\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later. --\u003e\n\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* QA Manager/team member\n\n\u003c!-- Personas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\n\nTracking how code coverage is changing on the master branch within a project over time allows us to move our vision for unit testing forward. By showing a graph of the change in code coverage on master in a project over time users can visualize how the overall quality is changing and start to provide context to compare to other measures like customer found defects, performance and business KPIs.\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\n* Add a code coverage graph over time in the Analytics -\u003e [Repository page])(https://gitlab.com/gitlab-org/gitlab/-/graphs/master/charts). Use the value from the job(s) that include a code coverage regex.\n* If there is more than one job include those job names in the dropdown so users can see coverage for each calculation.\n  * (For example the gitlab project has a job to calculate ruby coverage and another to calculate javascript coverage).\n* For the MVC graph code coverage as defined by the user and using the name defined by the user.\n* The graph will be a fixed 3 month window.\n* For purposes of the MVC if a job name is changed historic data maybe lost (stretch to map from one to the other but not part of the acceptance criteria).\n\n**Outcomes**\n\n**Persona:** Delaney\n\n* When I am asked about how the code coverage of a project has changed in this release, I want to have a visual representation to share, so that I can be trusted as an individual who runs a team that cares about quality.\n* When I am asked about our velocity/tech debt, I want to have a visual representation to compare to bugs fixed/features shipped, so that I can be trusted as a leader running a highly performant team.\n\n**Persona:** Parker\n* When I am weighing bug fixes against features, I want a data point of code coverage over time of software my team works on, so that I can back up my choices about balancing features vs. fixes.\n\n**Persona:** QA Manager\n* When I am planning tests for a project, I want a data point of code coverage over time for the project, so I can feel confident that my test plan will find issues before customers do.\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?--\u003e\n\n### Documentation\n\n* Update code coverage to instruct how to make the graph(s) appear if need be\n* Document how the names used in code coverage definition will appear on the graph to set expectations with customers.\n* Update code coverage documentation to reflect where the graph appears and what data will appear when (eg; it will update daily for yesterday's last code coverage value for /master).\n* Note that if a job name is changed historic tracking will be lost per [discussion](https://gitlab.com/gitlab-org/gitlab/issues/33743#note_281322470) in the issue.\n* Document that data points are available and shown only on days the job to calculate the coverage is completed.\n\n### Testing\n\n* Check load time on page to ensure this is performant / doesn't slow the page load time down.\n* Check data quality / graph look.\n\n### What does success look like, and how can we measure that?\n\n\nWe want both Delaney and our QA engineer to be confident that the trajectory of the code coverage is positive with changes being made while balancing the desire of a product manager to deliver value to users through new features. This graph should deliver confidence to all 3 parties by giving Delaney a measure for engineers to write tests with new code, QA to have confidence that as changes are introduced basic unit tests are also being added and the PM to know that new features will be available / work as intended for users.\n\n* Page views of graph page. We believe this feature will result in an increase of page views on the Repository Analytics page by 10% on instances that can utilize the feature.\n\n**Acceptance Criteria**\n\n* Graph is displayed for projects with code coverage stats.\n\t* Show last data point for the day and scale of days?\n* Data displayed is accurate as compared to raw data\n* Cross browser testing / things look acceptable to design (Making it look nice on mobile is a stretch for the MVC)\n\n### What is the type of buyer? \n\nThe buyer for this feature is likely [Delaney](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead) but we see this iteration as basic functionality that belongs in our Core offering. As more features are developed on top of this MVC they may be part of a different tier.\n\n\u003c!-- Which leads to: in which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\n\n### Links / references\n\nThis is an iteration on the original Graph testing results over time MVC issue #1020.![Project_Details]","state":"closed","created_at":"2019-10-09T21:47:23.003Z","updated_at":"2021-05-24T14:54:50.688Z","closed_at":"2020-06-17T16:48:54.000Z","closed_by":{"id":4061070,"username":"rickywiens","name":"Ricky Wiens","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4061070/avatar.png","web_url":"https://gitlab.com/rickywiens"},"labels":["Category:Code Testing and Coverage","Deliverable","UX","Verify::P1","customer","devops::verify","direction","documentation","frontend","group::pipeline insights","missed-deliverable","missed:12.10","missed:12.6","missed:13.0","quad-planning::ready","type::feature","workflow::production"],"milestone":{"id":1112145,"iid":47,"group_id":9970,"title":"13.1","description":"","state":"closed","created_at":"2020-01-03T12:28:30.160Z","updated_at":"2020-10-08T12:01:07.361Z","due_date":"2020-06-17","start_date":"2020-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/47"},"assignees":[{"id":3385446,"username":"zeffmorgan","name":"Zeff Morgan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3385446/avatar.png","web_url":"https://gitlab.com/zeffmorgan"},{"id":4554255,"username":"jj-ramirez","name":"Juan J. Ramirez","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4554255/avatar.png","web_url":"https://gitlab.com/jj-ramirez"},{"id":5327378,"username":"f_caplette","name":"Fr√©d√©ric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"}],"author":{"id":4512666,"username":"jheimbuck_gl","name":"James Heimbuck","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8dd2ef9c1cacb6e80d7ca47db6f0ce22?s=80\u0026d=identicon","web_url":"https://gitlab.com/jheimbuck_gl"},"type":"ISSUE","assignee":{"id":3385446,"username":"zeffmorgan","name":"Zeff Morgan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3385446/avatar.png","web_url":"https://gitlab.com/zeffmorgan"},"user_notes_count":106,"merge_requests_count":0,"upvotes":24,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33743","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33743","notes":"https://gitlab.com/api/v4/projects/278964/issues/33743/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33743/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33743","relative":"#33743","full":"gitlab-org/gitlab#33743"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3281,"epic":{"id":52801,"iid":3281,"title":"Code Coverage Data for projects","url":"/groups/gitlab-org/-/epics/3281","group_id":9970,"human_readable_end_date":"Jul 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"at_risk"},{"id":25783755,"iid":33742,"project_id":278964,"title":"Last name validation error for users with single word full name","description":"\n### Summary\n\nThe regular sign up form accepts only `full name`. \nThere is a getter set for `first_name` and `last_name` in GL.com: https://gitlab.com/gitlab-org/gitlab/blob/master/app/models/user.rb#L915\n\nHowever, if a user enters **only single word** in `full_name`, for e.g. `full_name` = Aishwarya, then the getter method for `last_name` would return an empty string: https://gitlab.com/gitlab-org/gitlab/blob/master/app/models/user.rb#L921\n\nIf this user tries to apply trial using the new trial sign in flow, the user would get the error `Last name can't be blank`.\n\nThis happens as Last name is mandatory in `Customer` model.\n\n![last-name-bug](/uploads/8eca3c063ca1a1813eaf33a2c8ad2929/last-name-bug.mp4)\n\n\n\n### Solution\n\n| User profile settings | Suggested update |\n| ------ | ------ |\n| ![screenshot-2019-12-17-08-51-19](/uploads/5922a640d57c74095443cda0610d05d4/screenshot-2019-12-17-08-51-19.png) | ![screenshot-2019-12-16-15-04-52](/uploads/149c25c1a7f7c13ca83cd899b613bc87/screenshot-2019-12-16-15-04-52.png)  |\n\n\n\n### Steps to reproduce\n\n1. Sign up using regular sign up, enter **only** single word for full_name\n2. Sign out\n3. Use same account to sign in using Trial sign in flow - `\u003capp-url\u003e/-/trial_registrations/new`\n4. Enter Company details, click Submit\n5. The form throws error: Last name can't be blank\n6. User has no way to enter Last name\n\n\n### What is the expected *correct* behavior?\n\nFind an appropriate way to fill in `last_name`, when full name was previously entered as a single word.\n\n## Examples\n\nInternal links:\n\n- https://gitlab.zendesk.com/agent/tickets/141477","state":"closed","created_at":"2019-10-09T21:16:49.757Z","updated_at":"2020-01-13T17:01:05.901Z","closed_at":"2019-12-24T10:03:50.284Z","closed_by":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"labels":["backend","customer","devops::growth","group::acquisition","priority::3","severity::3","trials","type::bug","workflow::verification"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"}],"author":{"id":4014344,"username":"aishbuilds","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4014344/avatar.png","web_url":"https://gitlab.com/aishbuilds"},"type":"ISSUE","assignee":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"user_notes_count":13,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33742","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33742","notes":"https://gitlab.com/api/v4/projects/278964/issues/33742/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33742/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33742","relative":"#33742","full":"gitlab-org/gitlab#33742"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1902,"epic":{"id":12246,"iid":1902,"title":"Follow-up tasks and bugs for Improved Trials","url":"/groups/gitlab-org/-/epics/1902","group_id":9970,"human_readable_end_date":"Jan 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25783620,"iid":33741,"project_id":278964,"title":"N+1 queries in /-/jira/pulls","description":"### Proposal\nFor our [integration with the Jira Server Development Panel](https://docs.gitlab.com/ee/integration/jira_development_panel.html), we have to mimic the GitHub API. (See https://bitbucket.org/atlassian/jira-dvcs-connector/pull-requests/100/gitlab-support-for-jira-63x for some background on why.)\n\nThe `/-/jira/pulls` endpoint has N+1 SQL query issues when loading associations for merge requests. \n\nCurrent [SQL requests per request](https://dashboards.gitlab.net/d/api-rails-controller/api-rails-controller?orgId=1\u0026var-PROMETHEUS_DS=Global\u0026var-action=All\u0026var-controller=Grape\u0026var-environment=gprd\u0026var-stage=main\u0026from=1616526120000\u0026to=1616547779999) are `min: 36, max 4k, average: 391`.\n\n\u003cdetails\u003e\n\u003csummary\u003eClick to see original issue problem description (which was solved at some earlier point)\u003c/summary\u003e\nThe endpoint `/-/jira/pulls` has an N+1 query when checking plans on projects for merge requests: https://gitlab.com/gitlab-org/gitlab/blob/v12.3.0-ee/ee%2Flib%2Fapi%2Fv3%2Fgithub.rb#L65\n\nThis is not too bad because N is limited by the page size, but we should address it. https://gitlab.com/gitlab-org/gitlab/issues/29741 was a similar, but much worse, issue in the same API.\n\nIssue created from https://gitlab.com/gitlab-org/gitlab/merge_requests/18329#note_228030019.\n\u003c/details\u003e\n\n### Impact\n\nA significant (10x) improvement was achieved, see details below https://gitlab.com/gitlab-org/gitlab/-/issues/33741#note_545655423.\n\ncc @deuley @nhxnguyen","state":"closed","created_at":"2019-10-09T21:07:39.440Z","updated_at":"2022-11-22T20:17:31.722Z","closed_at":"2021-04-06T12:23:06.774Z","closed_by":{"id":4058309,"username":"mnohr","name":"Matt Nohr","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f2b70c7a75fd0a15ef789d4b1e620449?s=80\u0026d=identicon","web_url":"https://gitlab.com/mnohr"},"labels":["Category:Integrations","Integration::Jira","backend","bug::performance","database","devops::manage","group::ecosystem [DEPRECATED]","priority::3","section::dev","workflow::verification"],"milestone":{"id":1406669,"iid":59,"group_id":9970,"title":"13.11","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-08-13T14:23:09.688Z","updated_at":"2022-04-21T07:22:08.835Z","due_date":"2021-04-17","start_date":"2021-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/59"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":8,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33741","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33741","notes":"https://gitlab.com/api/v4/projects/278964/issues/33741/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33741/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33741","relative":"#33741","full":"gitlab-org/gitlab#33741"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5652,"epic":{"id":230613,"iid":5652,"title":"Prioritize -  Research Database queries for performance and frequency","url":"/groups/gitlab-org/-/epics/5652","group_id":9970,"human_readable_end_date":"Jul 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25783541,"iid":33740,"project_id":278964,"title":"Create new group does not work if Apply Trial gives error","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nIf Step 3 - `Apply Trial` throws an error, consequent selection of `Create group` does not allow creation of new group. The text box to enter `New group` name does not show up.\n\n![missing-add-group](/uploads/46d01cf4a7c0aed7db4f7504f9690a07/missing-add-group.mp4)\n\n\n### Steps to reproduce\n\n(How one can reproduce the issue - this is very important)\n\n1. Apply trial to a group of an existing user\n3. Sign out\n4. Sign in using the trial sign workflow - `\u003capp-url\u003e/-/trial_registrations/new`\n5. In Step 3 (`Almost there`), select the group to which trial has been applied\n6. Save fails with error: `Gl namespace can have only one trial`\n7. Click `Create group`\n8. The textbox to enter new group name does not show up\n\n### What is the current *bug* behavior?\n\nThe textbox to enter new group name does not show up when apply trial throws an error\n\n### What is the expected *correct* behavior?\n\nThe textbox to enter new group name should show up so users can create a new group to which Trial needs to be applied","state":"closed","created_at":"2019-10-09T21:02:11.359Z","updated_at":"2020-10-06T13:59:47.715Z","closed_at":"2019-10-16T10:14:05.755Z","closed_by":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"labels":["Unplanned","devops::fulfillment","frontend","group::purchase","priority::2","section::fulfillment","trials","type::bug","workflow::in review"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"}],"author":{"id":4014344,"username":"aishbuilds","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4014344/avatar.png","web_url":"https://gitlab.com/aishbuilds"},"type":"ISSUE","assignee":{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"},"user_notes_count":3,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33740","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33740","notes":"https://gitlab.com/api/v4/projects/278964/issues/33740/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33740/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33740","relative":"#33740","full":"gitlab-org/gitlab#33740"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1902,"epic":{"id":12246,"iid":1902,"title":"Follow-up tasks and bugs for Improved Trials","url":"/groups/gitlab-org/-/epics/1902","group_id":9970,"human_readable_end_date":"Jan 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25777630,"iid":33734,"project_id":278964,"title":"Webhook token leaked in project exports allowing to trigger CI pipeline","description":"**[HackerOne report #698068](https://hackerone.com/reports/698068)** by `xanbanx` on 2019-09-19, assigned to @jritchey:\n\nHi GitLab Security Team,\n\n### Summary\n\nWhen exporting a Github connect repository within GitLab, the project export contains the `external_webhook_token`. This token allows anyone in possession to forge authentic requests to trigger a CI pipeline within GitLab although the person might not be a project member anymore.\n\n### Steps to reproduce\n\nTested on GitLab Enterprise Edition 12.3.0-pre 32dae28364b\n\nBefore, create a **Github** account, create a project there, and push a valid `.gitlab-ci.yml` file.\n\n1. Create a new project. Chose `CI/CD for external repo` to import a project  \n2. Chose `Github` under `Connect repositories from`  \n3. Enter your personal access token from your GitHub account where you want to import the project from  \n4. Select the project you created before Github for sync  \n5. After importing the project, goto `https://example.gitlab.com/\u003cnamespace\u003e/\u003cproject\u003e/edit` and export the project  \n6. Download the project archive, extract it, and inspect the containing `project.json`\n\n```json  \n...  \n    \"jobs_cache_index\": null,  \n    \"external_authorization_classification_label\": \"\",  \n    \"external_webhook_token\": \"hcnPbsfximlueXxaaIkg\",  \n    \"pages_https_only\": true,  \n    \"merge_requests_author_approval\": null,  \n...  \n```\n\nNote, this is a fake token for the report.\n\nWhen looking in the code one observes the request `POST :id/mirror/pull` in https://gitlab.com/gitlab-org/gitlab/blob/master/ee/lib/api/project_mirror.rb#L59. This request is used to trigger a new pipeline for a Github connected repository. This request uses the `X-Hub-Signature` header to authenticate the request to create the pipeline. This signature is computed by computing an HMAC over the request data using `external_webhook_token` as the key.\n\nBy being in possession of `external_webhook_token` it means that you craft a request and forge a valid `X-Hub-Signature` to create a new pipeline. So anyone, who can download the project can later on, when for example he is not a project member anymore, craft such a request and thereby trigger a pipeline.\n\n### Impact\n\nThe external `external_webhook_token` is exported. This allows anyone in possession of this token to forge a valid POST request to trigger a new CI pipeline. In the worst case, an attacker can possibly create thousands of CI pipelines and thus DoS the CI infrastructure.\n\n### What is the current *bug* behavior?\n\nThe project export contains `external_webhook_token`. This allows anyone to forge a POST request to start a new pipeline.\n\n### What is the expected *correct* behavior?\n\nDo not include the `external_webhook_token` in the project export. Anyway, it is not useful because this secret is bound to one specific webhook at Github, which still points to the original GitLab project. Importing the project to a different namespace or different GitLab instance would therefore make this token not working anymore.\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\nBest regards,  \nXanbanx\n\n## Impact\n\nSee above.\n\n## Implementation plan\n\n- [x] ~backend Add `external_webhook_token` to `excluded_attributes -\u003e project` in https://gitlab.com/gitlab-org/gitlab/blob/master/lib/gitlab/import_export/project/import_export.yml#L162 and remove it from https://gitlab.com/gitlab-org/gitlab/blob/master/spec/lib/gitlab/import_export/safe_model_attributes.yml#L569,\n - [x] ~test Verify if exported project does not contain that token,","state":"closed","created_at":"2019-10-09T19:16:49.715Z","updated_at":"2021-11-30T10:11:25.861Z","closed_at":"2021-10-29T05:53:22.964Z","closed_by":{"id":5791466,"username":"ngeorge1","name":"Nikhil George","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5791466/avatar.png","web_url":"https://gitlab.com/ngeorge1"},"labels":["Category:Importers","Engineering Allocation","FY22::Q3","Github","HackerOne","Importer:Project Export/Import","Next Up","Weakness::CWE-200","backend","devops::manage","group::import","milestone::p3","priority::4","section::dev","security","security-backlog::valid","severity::4","workflow::in review"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"},"user_notes_count":28,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33734","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33734","notes":"https://gitlab.com/api/v4/projects/278964/issues/33734/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33734/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33734","relative":"#33734","full":"gitlab-org/gitlab#33734"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6619,"epic":{"id":332692,"iid":6619,"title":"Manage:Import Security","url":"/groups/gitlab-org/-/epics/6619","group_id":9970,"human_readable_end_date":"Dec 16, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25774573,"iid":33727,"project_id":278964,"title":"Discovery: air-gapped (offline) support for License Compliance","description":"### Problem to solve\n\nThe current implementation of our License Compliance feature currently requires internet connectivity to run using standard configurations. We should aim to support offline execution and provide clear documentation on how to configure it for such installations.\n\n### Intended users\n\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n\n### Proposal\n\nFrom [comment in parent epic](https://gitlab.com/groups/gitlab-org/-/epics/1359#note_174177030):\n\nLooking at source code, LicenseFinder is usually able to extract the license from the local package, like in [bundler.rb](https://github.com/pivotal/LicenseFinder/blob/v5.8.0/lib/license_finder/package_managers/bundler.rb). This is not the case for Python though, and LicenseFinder performs a GET request to get package metadata from pypi.org, see [pip.rb](https://github.com/pivotal/LicenseFinder/blob/v5.8.0/lib/license_finder/package_managers/pip.rb#L61).\n\nWe need to go through all the supported languages and define whether or not they support air-gapped, how to do it and if not what can we do to make it work (in our wrapper project or in the upstream project).\n\n\n### Conclusion\n\nI created this project to test out each of the package managers so that I can go in depth where needed. \n\n[Discovery project](https://gitlab.com/xlgmokha/lm-airgap-spike#license-scanning-airgap).\n\nI have identified the following issues that needs further investigation:\n\n* [ ] Rebar: rebar3 is not supported.\n* [ ] Gradle: Requires that the project have a plugin installed. https://gitlab.com/gitlab-org/gitlab/issues/202126 \n* [ ] Maven: Uses a plugin to download missing license info at scan time.\n* [ ] sbt: Depends on a plugin to be installed in project settings.\n\nThe following project types are currently not airgap friendly.\n\n* [ ] Cargo: requires [--offline](https://doc.rust-lang.org/cargo/commands/cargo-metadata.html) flag.\n* [ ] Gradle: plugin appears to download license info at scan time.\n* [ ] Maven: plugin appears to download license info at scan time.\n* [ ] Nuget: The current core requires that the dependencies are installed under the project root otherwise it looks airgap friendly. We need to add a `-PackagesDirectory /code/packages` to [here](https://github.com/pivotal/LicenseFinder/blob/de82cff7a99985bd95b54442479e345d83fea3a0/lib/license_finder/package_managers/nuget.rb#L81).\n* [ ] Pip: Depends on `pypi.org` API at scan time. I don't have a solution to this problem. I started some analysis on building an offline index.\n* [ ] sbt: plugin appears to download licenses at scan time.\n\n### What is the type of buyer? \n\n~\"GitLab Ultimate\" users\n\n### Links / references\n\n### End Result\n\nBlocked, alternate idea is to look at alternate scanners [epic](https://gitlab.com/groups/gitlab-org/-/epics/2713)","state":"closed","created_at":"2019-10-09T17:24:47.102Z","updated_at":"2020-03-10T01:32:51.193Z","closed_at":"2020-02-24T21:13:25.201Z","closed_by":{"id":3913516,"username":"NicoleSchwartz","name":"Nicole Schwartz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3913516/avatar.png","web_url":"https://gitlab.com/NicoleSchwartz"},"labels":["Category:License Compliance","Enterprise Edition","GitLab Ultimate","backend","customer","devops::secure","group::composition analysis","missed-deliverable","missed:12.5","missed:12.6","planning priority","product discovery [DEPRECATED]","secure offline scanning","type::feature","workflow::design"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"}],"author":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"type":"ISSUE","assignee":{"id":971158,"username":"xlgmokha","name":"mo khan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8d289bc1a24067f9af4f92452f4fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/xlgmokha"},"user_notes_count":21,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33727","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":10,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 10 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33727","notes":"https://gitlab.com/api/v4/projects/278964/issues/33727/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33727/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33727","relative":"#33727","full":"gitlab-org/gitlab#33727"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2012,"epic":{"id":13403,"iid":2012,"title":"Support air-gapped (offline) License Compliance for on-prem instances [limited languages]","url":"/groups/gitlab-org/-/epics/2012","group_id":9970,"human_readable_end_date":"Apr 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25773690,"iid":33724,"project_id":278964,"title":"Configure SAST analyzers CI to trigger blocking bridge non-DinD jobs for test projects","description":"### Background\n\nIn order to properly test and QA our analyzers and their wrapper Secure projects [we should setup multi-project pipelines to trigger downstream executions](https://docs.gitlab.com/ee/ci/multi_project_pipelines.html#triggering-a-downstream-pipeline-using-a-bridge-job) of our test projects from analyzer projects. We currently rely on either manual testing or analyzers' included `test/fixtures` to ensure there are no regressions. This is time consuming and not very efficient.\n\nWe recently introduced new jobs to [CI templates](https://gitlab.com/gitlab-org/security-products/ci-templates/) in order to trigger test project's pipelines. We done configuring those for in Dependency Scanning analyzers. We should do the same for SAST analysers. You can see how it is done in Dependency Scanning [here](https://gitlab.com/gitlab-org/security-products/analyzers/common/#how-to-tests-the-analyzers) or you can simply check [gemnasium-python](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python/)\n\n### Tasks\n\n- For each of the analyzers below with existing test projects, add CI job for master/tags to trigger downstream QA projects. Please keep current integration tests in place as that will give us test coverage on MR branches.\n- Update [release process docs](https://gitlab.com/gitlab-org/security-products/analyzers/common#versioning-and-release-process) to explicitly state that master must be passing before creating a tag to release a new version.\n\n### Current State\n\nAs of May 22, 2020, the MRs that have been created add downstream pipelines that use DinD (via the SAST orchestrator). But, the intent of this issue is to use non-DinD and avoid the SAST orchestrator.\n\nWhile the downstream DinD pipelines add coverage, this issue should not be considered closed until we have non-DinD coverage given that non-Dind is [now the default](https://gitlab.com/gitlab-org/gitlab/-/issues/37278).\n\n### No DinD implementation plan\n\n* Engineers add their name in the column(s) for projects in which they want to call dibs.\n* If a `no_dind-FREEZE` does not exist, create it via MR.\n* Create an MR against the test project's `no_dind-FREEZE` branch to add SAST to the CI, configured without DinD.\n* Add MR establishing a no-DinD configuration to the matrix.\n\n### Related issue\n\nhttps://gitlab.com/gitlab-org/gitlab/issues/10658\n\n\n---\n\n## Analyzer to test project matrix\n\n\n| Scan tool                    | Test Projects             | DinD MR | No-DinD MR | Volunteer |\n|----------------------------------------------------------------------------------------|----------------------------------------------------------------|-------- | ---------- | --------- |\n| [bandit](https://gitlab.com/gitlab-org/security-products/analyzers/bandit) | [python-pip](https://gitlab.com/gitlab-org/security-products/tests/python-pip), [python-pipenv](https://gitlab.com/gitlab-org/security-products/tests/python-pipenv) | [!29](https://gitlab.com/gitlab-org/security-products/analyzers/bandit/-/merge_requests/29) | https://gitlab.com/gitlab-org/security-products/analyzers/bandit/-/merge_requests/39 | @twoodham |\n| [brakeman](https://gitlab.com/gitlab-org/security-products/analyzers/brakeman) | [ruby-bundler-rails](https://gitlab.com/gitlab-org/security-products/tests/ruby-bundler-rails) | [!23](https://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/23) | https://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/32 | @twoodham |\n| [ESLint security plugin](https://gitlab.com/gitlab-org/security-products/analyzers/eslint) | [js](https://gitlab.com/gitlab-org/security-products/tests/js) | [!22](https://gitlab.com/gitlab-org/security-products/analyzers/eslint/-/merge_requests/22) | https://gitlab.com/gitlab-org/security-products/analyzers/eslint/-/merge_requests/39 | @dsearles |\n| [ESLint react plugin](https://gitlab.com/gitlab-org/security-products/analyzers/eslint) | https://gitlab.com/gitlab-org/gitlab/-/issues/214736 | N\\A | https://gitlab.com/gitlab-org/security-products/analyzers/eslint/-/merge_requests/39 | @dsearles |\n| [Flawfinder](https://gitlab.com/gitlab-org/security-products/analyzers/flawfinder/) | [c](https://gitlab.com/gitlab-org/security-products/tests/c), [cplusplus](https://gitlab.com/gitlab-org/security-products/tests/cplusplus) | [!20](https://gitlab.com/gitlab-org/security-products/analyzers/flawfinder/-/merge_requests/20) | https://gitlab.com/gitlab-org/security-products/analyzers/flawfinder/-/merge_requests/27 | @theoretick |\n| [Gitleaks and TruffleHog](https://gitlab.com/gitlab-org/security-products/analyzers/secrets) | [secrets](https://gitlab.com/gitlab-org/security-products/tests/secrets) |  [!41](https://gitlab.com/gitlab-org/security-products/analyzers/secrets/-/merge_requests/41) | N/A | N/A |\n| [Gosec](https://gitlab.com/gitlab-org/security-products/analyzers/gosec) | [go](https://gitlab.com/gitlab-org/security-products/tests/go), [go-modules](https://gitlab.com/gitlab-org/security-products/tests/go-modules) | [!37](https://gitlab.com/gitlab-org/security-products/analyzers/gosec/-/merge_requests/37) | https://gitlab.com/gitlab-org/security-products/analyzers/gosec/-/merge_requests/52 | @twoodham |\n| [Kubesec](https://gitlab.com/gitlab-org/security-products/analyzers/kubesec) | https://gitlab.com/gitlab-org/gitlab/-/issues/214735 | N/A | N/A | N/A |\n| [NodeJsScan](https://gitlab.com/gitlab-org/security-products/analyzers/nodejs-scan) | [big-node-js](https://gitlab.com/gitlab-org/security-products/tests/big-node-js), [node-js-disable-babel](https://gitlab.com/gitlab-org/security-products/tests/node-js-disable-babel) | [!50](https://gitlab.com/gitlab-org/security-products/analyzers/nodejs-scan/-/merge_requests/50) | https://gitlab.com/gitlab-org/security-products/analyzers/nodejs-scan/-/merge_requests/63 | @twoodham |\n| [phpcs-security-audit](https://gitlab.com/gitlab-org/security-products/analyzers/phpcs-security-audit) | [php-composer](https://gitlab.com/gitlab-org/security-products/tests/php-composer) | [!23](https://gitlab.com/gitlab-org/security-products/analyzers/phpcs-security-audit/-/merge_requests/23) | https://gitlab.com/gitlab-org/security-products/analyzers/phpcs-security-audit/-/merge_requests/30 | @theoretick |\n| [pmd](https://gitlab.com/gitlab-org/security-products/analyzers/pmd-apex) | [apex-salesforce](https://gitlab.com/gitlab-org/security-products/tests/apex-salesforce) | [!13](https://gitlab.com/gitlab-org/security-products/analyzers/pmd-apex/-/merge_requests/13) | https://gitlab.com/gitlab-org/security-products/analyzers/pmd-apex/-/merge_requests/26 | @theoretick |\n| [Security Code Scan](https://gitlab.com/gitlab-org/security-products/analyzers/security-code-scan) | [csharp-dotnetcore-multiproject](https://gitlab.com/gitlab-org/security-products/tests/csharp-dotnetcore-multiproject) | [!28](https://gitlab.com/gitlab-org/security-products/analyzers/security-code-scan/-/merge_requests/28) | https://gitlab.com/gitlab-org/security-products/analyzers/security-code-scan/-/merge_requests/40 | @theoretick |\n| [Sobelow](https://gitlab.com/gitlab-org/security-products/analyzers/sobelow) | [elixir-phoenix](https://gitlab.com/gitlab-org/security-products/tests/elixir-phoenix) | [!20](https://gitlab.com/gitlab-org/security-products/analyzers/sobelow/-/merge_requests/20) | https://gitlab.com/gitlab-org/security-products/analyzers/sobelow/-/merge_requests/27 |  @theoretick |\n| [SpotBugs](https://gitlab.com/gitlab-org/security-products/analyzers/spotbugs) with the [find-sec-bugs](https://find-sec-bugs.github.io/) plugin | [java-maven](https://gitlab.com/gitlab-org/security-products/tests/java-maven), [java-maven-multimodules](https://gitlab.com/gitlab-org/security-products/tests/java-maven-multimodules), [java-groovy](https://gitlab.com/gitlab-org/security-products/tests/java-groovy), [java-gradle](https://gitlab.com/gitlab-org/security-products/tests/java-gradle), [scala-sbt](https://gitlab.com/gitlab-org/security-products/tests/scala-sbt) | [!37](https://gitlab.com/gitlab-org/security-products/analyzers/spotbugs/-/merge_requests/37) | https://gitlab.com/gitlab-org/security-products/analyzers/spotbugs/-/merge_requests/49 | @theoretick |\n| [TSLint config security](https://gitlab.com/gitlab-org/security-products/analyzers/tslint) | [typescript-yarn](https://gitlab.com/gitlab-org/security-products/tests/typescript-yarn) | [!14](https://gitlab.com/gitlab-org/security-products/analyzers/tslint/-/merge_requests/14) | **DESCOPED** - This analyzer will be archived in %\"13.4\". |  @dsearles |","state":"closed","created_at":"2019-10-09T16:51:11.339Z","updated_at":"2021-03-22T10:50:54.976Z","closed_at":"2020-08-18T01:39:43.662Z","closed_by":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"labels":["Category:SAST","Deliverable","Enterprise Edition","Quality","backend","devops::secure","group::static analysis","maintenance::pipelines","maintenance::refactor","missed-deliverable","missed:12.10","missed:13.0","missed:13.1","missed:13.2","test","workflow::in review"],"milestone":{"id":1233752,"iid":50,"group_id":9970,"title":"13.3","description":"https://about.gitlab.com/releases/2020/08/22/gitlab-13-3-released/","state":"closed","created_at":"2020-04-09T17:39:21.090Z","updated_at":"2022-04-13T14:50:18.976Z","due_date":"2020-08-17","start_date":"2020-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/50"},"assignees":[{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"}],"author":{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"},"type":"ISSUE","assignee":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"user_notes_count":84,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33724","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33724","notes":"https://gitlab.com/api/v4/projects/278964/issues/33724/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33724/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33724","relative":"#33724","full":"gitlab-org/gitlab#33724"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2462,"epic":{"id":18047,"iid":2462,"title":"Remove Docker-in-Docker (DinD) for all secure analyzers / scans","url":"/groups/gitlab-org/-/epics/2462","group_id":9970,"human_readable_end_date":"Oct 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25772865,"iid":33720,"project_id":278964,"title":"Air-gapped (offline) support for gemnasium analyzer (Dependency Scanning)","description":"### Problem to solve\n\nOur [gemnasium](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium) analyzer currently requires internet connectivity to run using standard configuration. We should aim to support offline execution and provide clear documentation on how to configure it for such installations.\n\n### Intended users\n\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n\n### Further details\n\n\n### Proposal\n\nWe need to change the [Client](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium/blob/v2.1.2/scanner/client.go#L38) in order to switch to a git clone/checkout of [gemnasium-db](https://gitlab.com/gitlab-org/security-products/gemnasium-db) instead of connecting to the Gemnasium API.\n\n[gemnasium-python](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python) and [gemnasium-maven](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-maven) would directly benefit from the change after upgrading the `gemnasium/v2` dependency in their respective Go modules.\n\nWe also need to exhaustively test each supported languages to make sure all requirements of the corresponding analyzers are met\n\n| Language (package manager) | analyzer      | air-gap support |\n|----------------------------|---------------|-----------------|\n| Java (Gradle)             | gemnasium-maven     | :white_check_mark: [MR](https://gitlab-airgap-test.us-west1-b.c.group-secure-a89fe7.internal/ifrenkel-tests/test-gradle-1/java-gradle/-/merge_requests/1)               |\n| Java (Maven)               | gemnasium-maven     | :white_check_mark: [MR](https://gitlab-airgap-test.us-west1-b.c.group-secure-a89fe7.internal/templates/java-maven/-/merge_requests/1)                |\n| JavaScript (npm)           | gemnasium     | :white_check_mark:                 |\n| JavaScript (yarn)          | gemnasium     | :white_check_mark:                 |\n| PHP (Composer)             | gemnasium     | :white_check_mark: [MR](https://gitlab-airgap-test.us-west1-b.c.group-secure-a89fe7.internal/tests/php-composer-ds-test/-/merge_requests/1)                |\n| Python (pip)               | gemnasium-python     | :white_check_mark: [MR](https://gitlab-airgap-test.us-west1-b.c.group-secure-a89fe7.internal/tests/pip-install-private-repo/-/merge_requests/1/diffs)               |\n| Python (setuptools)        | gemnasium-python     | :white_check_mark: [MR](https://gitlab-airgap-test.us-west1-b.c.group-secure-a89fe7.internal/ifrenkel-tests/2020-04-15/python-setuptools/-/merge_requests/1)                |\n| Python (pipenv)            | gemnasium-python | :white_check_mark: [MR](https://gitlab-airgap-test.us-west1-b.c.group-secure-a89fe7.internal/tests/python-pipenv/-/merge_requests/1)                |\n| Python (Pipfile.lock)      | not available |                 |\n| Python (poetry)            | not available |                 |\n| Ruby (gem)                 | gemnasium, bundler-audit     | :white_check_mark: [MR](https://gitlab-airgap-test.us-west1-b.c.group-secure-a89fe7.internal/tests/ruby-bundler-ds-test/-/merge_requests/1)               |\n| Scala (sbt)                | gemnasium     | :white_check_mark: [MR](https://gitlab-airgap-test.us-west1-b.c.group-secure-a89fe7.internal/ifrenkel-tests/test-scala-1/scala-sbt/-/merge_requests/1)                 |\n| Go (Go Modules)             | gemnasium     | :white_check_mark: [MR](https://gitlab-airgap-test.us-west1-b.c.group-secure-a89fe7.internal/tests/go-ds-test/-/merge_requests/1)                |\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?--\u003e\n\n### Documentation\n\n- [ ] ~~Make it explicit in the dependency scanning documentation https://docs.gitlab.com/ee/user/application_security/dependency_scanning/index.html about air-gapped support and how to set it up.~~ Outside of the scope of this issue - documentation to be handled in a separate issue [Document air-gapped (offline) Dependency Scanning for on-prem instances](https://gitlab.com/gitlab-org/gitlab/issues/208254)\n- [ ] Document the changes introduced by this issue in the [dependency scanning documentation](https://docs.gitlab.com/ee/user/application_security/dependency_scanning/index.html). See https://gitlab.com/gitlab-org/gitlab/-/merge_requests/25883 for details\n\n### Testing\n\nTODO: if not already done, define a proper way to test the air-gapped environment, share it in the parent epic https://gitlab.com/groups/gitlab-org/-/epics/1359 and try to reuse it across all similar issues as much as possible.\n\n\n### What does success look like, and how can we measure that?\n\nGemnasium analyzer is able to scan a project in an air-gapped environment.\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n### What is the type of buyer? \n\n~\"GitLab Ultimate\" \n\n### Links / references","state":"closed","created_at":"2019-10-09T16:19:40.565Z","updated_at":"2020-06-09T12:06:53.321Z","closed_at":"2020-04-22T18:27:38.774Z","closed_by":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"labels":["Category:Dependency Scanning","Enterprise Edition","backend","customer","devops::secure","direction","group::composition analysis","missed:12.10","planning priority","quad-planning::complete-action","secure offline scanning","type::feature","workflow::in review"],"milestone":{"id":991112,"iid":42,"group_id":9970,"title":"13.0","description":"","state":"closed","created_at":"2019-09-04T15:20:39.024Z","updated_at":"2020-10-08T12:00:55.725Z","due_date":"2020-05-17","start_date":"2020-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/42"},"assignees":[{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"}],"author":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"type":"ISSUE","assignee":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"user_notes_count":10,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33720","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33720","notes":"https://gitlab.com/api/v4/projects/278964/issues/33720/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33720/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33720","relative":"#33720","full":"gitlab-org/gitlab#33720"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2011,"epic":{"id":13396,"iid":2011,"title":"Support air-gapped (offline) Dependency Scanning for on-prem instances","url":"/groups/gitlab-org/-/epics/2011","group_id":9970,"human_readable_end_date":"May 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25772820,"iid":33719,"project_id":278964,"title":"Support air-gapped (offline) Dependency Scanning for JavaScript (npm, yarn) through retire.js analyzer","description":"### Problem to solve\n\nSome users need to run our security scans in limited connectivity environments. Currently our [retire.js](https://gitlab.com/gitlab-org/security-products/analyzers/retire.js) analyzer requires internet connectivity to run using standard configuration. We should aim to support offline execution and provide clear documentation on how to configure it for such installations.\n\n### Intended users\n\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n\n### Further details\n\n\n### Proposal\n\nWe have to change [analyze.go](https://gitlab.com/gitlab-org/security-products/analyzers/retire.js/blob/master/analyze.go#L53) and set `--js-advisory-db` and `--node-advisory-db` to the local paths of the \"repositories\". See [option definition](https://github.com/RetireJS/retire.js/blob/2.0.2/node/bin/retire#L57) and [repository loading](https://github.com/RetireJS/retire.js/blob/2.0.2/node/bin/retire#L161).\n\n### Implementation Plan\n\n#### Backend\n\n- [x] add analyzer variables `RETIREJS_NODE_ADVISORY_DB` and `RETIREJS_JS_ADVISORY_DB` to dependency scanning template\n    - https://gitlab.com/gitlab-org/gitlab/-/merge_requests/26463\n- [x] update analyzer to pass these vars to `retirejs` if present at runtime\n    - https://gitlab.com/gitlab-org/security-products/analyzers/retire.js/-/merge_requests/28\n- [x] document these variables and how to use them (note both vars are necessary to ensure retirejs doesn't make remote calls)\n    - https://gitlab.com/gitlab-org/gitlab/-/merge_requests/25883\n- [x] add test to [js-yarn](https://gitlab.com/gitlab-org/security-products/tests/js-yarn) project to demonstrate usage of new `RETIREJS_NODE_ADVISORY_DB` and `RETIREJS_JS_ADVISORY_DB` variables\n    - https://gitlab.com/gitlab-org/security-products/tests/js-yarn/-/merge_requests/34\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?--\u003e\n\n### Documentation\n\n- [ ] ~~Make it explicit in the dependency scanning documentation https://docs.gitlab.com/ee/user/application_security/dependency_scanning/index.html about air-gapped support and how to set it up.~~ Outside of the scope of this issue - documentation to be handled in a separate issue [Document air-gapped (offline) Dependency Scanning for on-prem instances](https://gitlab.com/gitlab-org/gitlab/issues/208254)\n\n### Testing\n\n~~TODO: if not already done, define a proper way to test the air-gapped environment, share it in the parent epic https://gitlab.com/groups/gitlab-org/-/epics/1359 and try to reuse it across all similar issues as much as possible.~~ Outside of the scope of this issue - air-gap testing for dependency scanning will be described as part of [Document air-gapped (offline) Dependency Scanning for on-prem instances](https://gitlab.com/gitlab-org/gitlab/issues/208254)\n\nIn order to test _only the retire.js scanner_ in an air-gapped environment, follow these steps:\n\n1. Pull the latest version of the [GitLab retire.js](https://gitlab.com/gitlab-org/security-products/analyzers/retire.js/) analyzer\n    ```\n    docker pull registry.gitlab.com/gitlab-org/security-products/analyzers/retire.js:2\n    ```\n1. Change to the directory of the js project you want to scan\n1.  Download the following [Retire.js](https://github.com/RetireJS/retire.js/) vulnerability data files to the root of your js project:\n    - [jsrepository.json](https://raw.githubusercontent.com/RetireJS/retire.js/master/repository/jsrepository.json)\n    - [npmrepository.json](https://raw.githubusercontent.com/RetireJS/retire.js/master/repository/npmrepository.json)\n1. Run `yarn` or `npm i` on your project to populate the `node_modules` directory in your js project\n1. Unplug your internet connection\n1. Run the analyzer and reference the above files:\n    ```\n    docker run \\\n      -e RETIREJS_JS_ADVISORY_DB=\"jsrepository.json\" \\\n      -e RETIREJS_NODE_ADVISORY_DB=\"npmrepository.json\" \\\n      -e CI_PROJECT_DIR=\"/code\" \\\n      --volume \"$PWD:/code\" \\\n      --volume /var/run/docker.sock:/var/run/docker.sock \\\n      registry.gitlab.com/gitlab-org/security-products/analyzers/retire.js:2\n    ```\n1. `gl-dependency-scanning-report.json` file should be produced\n\n### What does success look like, and how can we measure that?\n\nRetire.js analyzer is able to scan a project in an air-gapped environment.\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n### What is the type of buyer? \n\n~\"GitLab Ultimate\" \n\n### Links / references\n\n### Action Items\n\n#### Product\n- We will not include a release post until the Epic is complete.","state":"closed","created_at":"2019-10-09T16:17:58.541Z","updated_at":"2020-04-02T18:43:04.744Z","closed_at":"2020-03-16T07:31:15.795Z","closed_by":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","Kickoff Highlight","backend","customer","devops::secure","direction","group::composition analysis","planning priority","secure offline scanning","type::feature"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"}],"author":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"type":"ISSUE","assignee":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"user_notes_count":8,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33719","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":4},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33719","notes":"https://gitlab.com/api/v4/projects/278964/issues/33719/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33719/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33719","relative":"#33719","full":"gitlab-org/gitlab#33719"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2011,"epic":{"id":13396,"iid":2011,"title":"Support air-gapped (offline) Dependency Scanning for on-prem instances","url":"/groups/gitlab-org/-/epics/2011","group_id":9970,"human_readable_end_date":"May 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25772675,"iid":33718,"project_id":278964,"title":"Air-gapped (offline) support for bundler-audit analyzer (Dependency Scanning)","description":"### Problem to solve\n\nOur [bundler-audit](https://gitlab.com/gitlab-org/security-products/analyzers/bundler-audit) analyzer currently requires internet connectivity to run using standard configuration. We should aim to support offline execution and provide clear documentation on how to configure it for such installations.\n\n### Intended users\n\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n\n### Further details\n\n\n### Proposal\n\nThe gem already includes a clone of [rubysec/ruby-advisory-db](https://github.com/rubysec/ruby-advisory-db), see [bundler-audit.gemspec](https://github.com/rubysec/bundler-audit/blob/v0.6.1/bundler-audit.gemspec#L32). We have to change [analyze.go](https://gitlab.com/gitlab-org/security-products/analyzers/bundler-audit/blob/master/analyze.go#L20) and remove the `--update` option. See [README](https://github.com/rubysec/bundler-audit/blob/v0.6.1/README.md) and [update!](https://github.com/rubysec/bundler-audit/blob/v0.6.1/lib/bundler/audit/database.rb#L97) function.\n\n### Implementation plan\n\n#### Backend\n\n1. [x] Update [bundler-audit  analyzer](https://gitlab.com/gitlab-org/security-products/analyzers/bundler-audit ) to use the `BUNDLER_AUDIT_NO_UPDATE` (to be defined) env variable (or cli flag) to toggle the corresponding `--update` flag on the bundler-audit cli.\n1. [x] Update the vendored template [Dependency-Scanning.gitlab-ci.yml](https://gitlab.com/gitlab-org/gitlab-foss/blob/master/lib/gitlab/ci/templates/Security/Dependency-Scanning.gitlab-ci.yml) to pass this variable down from the job to the analyzer\n\n#### Product Management - @NicoleSchwartz\n* [x] NO Release Post - epic must first be complete\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?--\u003e\n\n### Documentation\n\n- [x] Add this new option to https://docs.gitlab.com/ee/user/application_security/dependency_scanning/index.html#available-variables. It might be worth splitting analyzer specific VARS like we've done for SAST: https://docs.gitlab.com/ee/user/application_security/sast/index.html#analyzer-settings\n- [x] Make it explicit in the dependency scanning documentation https://docs.gitlab.com/ee/user/application_security/dependency_scanning/index.html about air-gapped support and how to set it up.\n\n\n### Testing\n\nTODO: if not already done, define a proper way to test the air-gapped environment, share it in the parent epic https://gitlab.com/groups/gitlab-org/-/epics/1359 and try to reuse it across all similar issues as much as possible.\n\n\n### What does success look like, and how can we measure that?\n\nBundler-Audit analyzer is able to scan a project in an air-gapped environment.\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n### What is the type of buyer? \n\n~\"GitLab Ultimate\" \n\n### Links / references","state":"closed","created_at":"2019-10-09T16:14:44.099Z","updated_at":"2020-02-24T21:17:23.360Z","closed_at":"2019-12-17T19:58:17.484Z","closed_by":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","backend","customer","devops::secure","group::composition analysis","planning priority","secure offline scanning","type::feature","workflow::verification"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"}],"author":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"type":"ISSUE","assignee":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"user_notes_count":15,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33718","time_stats":{"time_estimate":28800,"total_time_spent":0,"human_time_estimate":"8h","human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":5},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"5 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33718","notes":"https://gitlab.com/api/v4/projects/278964/issues/33718/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33718/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33718","relative":"#33718","full":"gitlab-org/gitlab#33718"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2011,"epic":{"id":13396,"iid":2011,"title":"Support air-gapped (offline) Dependency Scanning for on-prem instances","url":"/groups/gitlab-org/-/epics/2011","group_id":9970,"human_readable_end_date":"May 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25769482,"iid":33714,"project_id":278964,"title":"Group SAML test button should provide information from SAML response","description":"## What\n\nDisplay SAML response and highlight NameID when using the Test button from the Group SAML settings page.\n\nPossibly also discourage NameIDs that are emails, usernames or otherwise not randomly generated and persistent. This could be done by expecting a NameIdFormat of `persistent` with high entropy. If doing so we should also discourage changing NameID configuration if there are existing users linked.\n\n## Why\n\nExtracted from https://gitlab.com/gitlab-org/gitlab/issues/33464\n\nWe could do more to help customers during the initial setup, both to familiarize them with the relevant parts of the SAML response as well as to help them avoid NameIDs that could cause problems later on.","state":"closed","created_at":"2019-10-09T14:40:52.496Z","updated_at":"2021-04-03T08:31:08.309Z","closed_at":"2019-11-18T11:45:52.976Z","closed_by":{"id":128633,"username":"rymai","name":"R√©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["UX","backend","devops::manage","frontend","group::authentication and authorization","missed:12.5","saml","type::feature","workflow::canary"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":654619,"username":"jamedjo","name":"James Edwards-Jones","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/654619/avatar.png","web_url":"https://gitlab.com/jamedjo"}],"author":{"id":654619,"username":"jamedjo","name":"James Edwards-Jones","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/654619/avatar.png","web_url":"https://gitlab.com/jamedjo"},"type":"ISSUE","assignee":{"id":654619,"username":"jamedjo","name":"James Edwards-Jones","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/654619/avatar.png","web_url":"https://gitlab.com/jamedjo"},"user_notes_count":6,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33714","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33714","notes":"https://gitlab.com/api/v4/projects/278964/issues/33714/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33714/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33714","relative":"#33714","full":"gitlab-org/gitlab#33714"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1785,"epic":{"id":11091,"iid":1785,"title":"Group SSO: Stability, Availability, and Security","url":"/groups/gitlab-org/-/epics/1785","group_id":9970,"human_readable_end_date":"May 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25762789,"iid":33706,"project_id":278964,"title":"Warn that SAML NameID must not change","description":"## What\n\nImprove documentation for GroupSAML and possibly also for instance SAML\n\n* [ ] Document a strong bold warning that changing NameID configuration will break SAML SSO\n* [ ] Where we recommend using objectid as the NameID we should also note not to change an existing value if users have already signed in.\n* [ ] Re-arrange docs so NameID section immediately follows initial configuration instead of being after enforcement and group managed sections\n\n## Why\n\nChanging NameID configuration leads to SAML users being unable to log in as well as SCIM creating duplicate users.\n\nExtracted from https://gitlab.com/gitlab-org/gitlab/issues/33464#possible-solutions","state":"closed","created_at":"2019-10-09T12:55:02.211Z","updated_at":"2021-04-03T08:31:08.203Z","closed_at":"2019-11-07T04:22:23.933Z","closed_by":{"id":2683848,"username":"eread","name":"Evan Read","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2683848/avatar.png","web_url":"https://gitlab.com/eread"},"labels":["devops::manage","documentation","group::authentication and authorization","missed:12.4","saml"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":2454149,"username":"cynthia","name":"Cynthia \"Arty\" Ng","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2454149/avatar.png","web_url":"https://gitlab.com/cynthia"}],"author":{"id":654619,"username":"jamedjo","name":"James Edwards-Jones","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/654619/avatar.png","web_url":"https://gitlab.com/jamedjo"},"type":"ISSUE","assignee":{"id":2454149,"username":"cynthia","name":"Cynthia \"Arty\" Ng","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2454149/avatar.png","web_url":"https://gitlab.com/cynthia"},"user_notes_count":0,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33706","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33706","notes":"https://gitlab.com/api/v4/projects/278964/issues/33706/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33706/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33706","relative":"#33706","full":"gitlab-org/gitlab#33706"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1785,"epic":{"id":11091,"iid":1785,"title":"Group SSO: Stability, Availability, and Security","url":"/groups/gitlab-org/-/epics/1785","group_id":9970,"human_readable_end_date":"May 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25758374,"iid":33698,"project_id":278964,"title":"Empty Dependency list even if dependency_scanning job is set up","description":"### Summary\n\nIf `dependency_scanning` job is set up, but there are some problems with pipeline, ~\"dependency list\" page status can be flaky: for some periods of time users can see a message that Dependency list is empty and they need to set up `dependency_scanning` job first.\n\n### Steps to reproduce\n\nThis issue is flaky, sometimes it reproduced on https://gitlab.com/gitlab-org/gitlab when the master is broken.\n\n* go to Security \u0026 Compliance -\u003e Dependency list\n\n### What is the current *bug* behavior?\n\nMessage introducing Dependency List is displayed\n\n### What is the expected *correct* behavior?\n\nDependency list page displays last successfully generated report\n\n### Relevant logs and/or screenshots\n\n![Screenshot_2019-10-08_22.50.15](/uploads/662b45619e13f8eea5dcf62b9eb73cda/Screenshot_2019-10-08_22.50.15.png)\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n### Possible fixes\n\nthe reason for this behavior is needed to be investigated further but possibly the problem is how we fetch the report. We fetch it for a pipeline\n\n```\nproject.all_pipelines.latest_successful_for_ref(project.default_branch)\n```\nPossibly, `latest_successful_for_ref` is not the best choise for this query.","state":"closed","created_at":"2019-10-09T11:02:30.378Z","updated_at":"2019-11-18T07:15:23.424Z","closed_at":"2019-11-15T20:03:04.538Z","closed_by":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"labels":["Deliverable","dependency list","devops::secure","group::composition analysis","priority::1","severity::2","type::bug","workflow::verification"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"}],"author":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"type":"ISSUE","assignee":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33698","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33698","notes":"https://gitlab.com/api/v4/projects/278964/issues/33698/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33698/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33698","relative":"#33698","full":"gitlab-org/gitlab#33698"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25756570,"iid":33695,"project_id":278964,"title":"Insights frontend should be resilient to additions to the config","description":"### Problem to solve\n\nBackstage change:\n\n- The insights config contains all information about the chart within an element of the charts array. The insights frontend should store this information to easily make use of it.\n\nFor example,\n\nA `background_color` field is added to the insights chart config format. Instead of plucking individual fields from the hash we should just store the whole thing and only the frontend component needs to change to make use of the new field","state":"closed","created_at":"2019-10-09T10:00:31.296Z","updated_at":"2020-09-09T17:05:58.484Z","closed_at":"2020-09-09T17:05:58.454Z","closed_by":{"id":4303148,"username":"kwiebers","name":"Kyle Wiebers","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303148/avatar.png","web_url":"https://gitlab.com/kwiebers"},"labels":["Engineering Productivity","Enterprise Edition","Quality","backstage [DEPRECATED]","ep::metrics","group::optimize","insights","priority::4","section::dev","type::feature"],"milestone":null,"assignees":[{"id":419655,"username":"markglenfletcher","name":"Mark Fletcher","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/419655/avatar.png","web_url":"https://gitlab.com/markglenfletcher"}],"author":{"id":419655,"username":"markglenfletcher","name":"Mark Fletcher","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/419655/avatar.png","web_url":"https://gitlab.com/markglenfletcher"},"type":"ISSUE","assignee":{"id":419655,"username":"markglenfletcher","name":"Mark Fletcher","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/419655/avatar.png","web_url":"https://gitlab.com/markglenfletcher"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33695","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33695","notes":"https://gitlab.com/api/v4/projects/278964/issues/33695/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33695/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33695","relative":"#33695","full":"gitlab-org/gitlab#33695"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25755256,"iid":33693,"project_id":278964,"title":"Remove `Gitlab::Utils.system_silent` method","description":"## Summary\n\nMethod `Gitlab::Utils.system_silent` basically calls `Gitlab::Popen.popen` method. This method is not used anywhere and we can remove one\ncall to shell methods from the codebase.\n\n## Involved components\n\n- `lib/gitlab/utils.rb`","state":"closed","created_at":"2019-10-09T09:28:24.234Z","updated_at":"2019-10-22T09:22:53.148Z","closed_at":"2019-10-10T06:33:21.091Z","closed_by":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"labels":["backend","backstage [DEPRECATED]","devops::create","group::editor","workflow::in review"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":955795,"username":"fjsanpedro","name":"Francisco Javier L√≥pez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"}],"author":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier L√≥pez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"type":"ISSUE","assignee":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier L√≥pez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33693","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33693","notes":"https://gitlab.com/api/v4/projects/278964/issues/33693/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33693/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33693","relative":"#33693","full":"gitlab-org/gitlab#33693"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25749451,"iid":33685,"project_id":278964,"title":"Lift the NPM package naming convention for the project level API","description":"### Release post\n\nWhen publishing npm packages to your project's registry, you have had to name your package with `@scope/package-name`, where the scope must exactly match the root namespace of your project, including the case. For many of you, this meant using a capital letter. However, npmjs.com does not allow capital letters in the scope. So, you were forced to either change your group name, which may have several unintended side effects or to not use the GitLab Package Registry.\n\nMoving forward, we will no longer enforce this naming convention for the project-level endpoint. Huzzah. Now you can name your packages and scope whatever you want. Hopefully, this makes using GitLab and npmjs.com a little bit easier to use. \n\nIt's worth noting that using the [instance-level endpoint](https://docs.gitlab.com/ee/user/packages/npm_registry/#instance-level-npm-endpoint-1) will still require you to use the exact (case sensitive) root of your namespace as `@scope`.  \n\n\n### Problem to solve\n\nOur current `npm` API enforces a [naming convention](https://docs.gitlab.com/ee/user/packages/npm_registry/#package-naming-convention). This naming convention has some problems as it is too restrictive to some users or ~\"self-managed\" instances.\n\nThe implementation has been done before my time but I think that the naming convention is mainly used to locate the proper package when hitting the instance level API. Basically, the ~backend  receives: hey, I need package `X` and that's it, no group id, no project id. With the only information of the package name, the ~backend has to accurately locate the package within all projects accessible for the current user.\n\nThis naming convention is implemented as a [model validator](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/models/packages/package.rb#L37), which means that before a npm package is saved to the database, the package name has to be conform to the naming convention, which means that *all* npm packages need to be ok with that convention.\n\n### Proposal \n\nUse the same approach as we have in the [Maven API](https://docs.gitlab.com/12.10/ee/user/packages/maven_repository/#configuring-your-project-to-use-the-gitlab-maven-repository-url):\n\n* At the Project level\n   * Don't impose any naming restriction. Users are free to use whatever they want, including not using an `@scope` at all.\n* At the Instance level\n   * Similar to [maven](https://docs.gitlab.com/12.10/ee/user/packages/maven_repository/#instance-level-maven-endpoint), *only* the packages that follow the naming convention are exposed via this API level.\n   * If a package doesn't follow the naming convention, it can't be retrieved with the instance level API.\n\n### Other considerations\n\nIf one day, we ever implement the Group level API, I think we can follow again what we have for the [Maven api](https://docs.gitlab.com/12.10/ee/user/packages/maven_repository/#configuring-your-project-to-use-the-gitlab-maven-repository-url):\n* At the Group level\n   * Don't impose any naming convention\n   * What about duplicated package names? Use the same strategy as on the Maven API:\n\n\u003e The group level endpoint works with any package names, which means the you have the flexibility of naming compared to instance level endpoint. However, GitLab will not guarantee the uniqueness of the package names within the group. You can have two projects with the same package name and package version. As a result, GitLab will serve whichever one is more recent. \n\n### Work complexity\n\nIt should be quite low as we \"only\" have:\n* remove the model validator\n* make sure that the instance level API locate the package using the naming convention (should be already the case, so nothing to do).\n* make sure that the project level API works with any package name (rspec example)\n* make sure that the instance level API works with *only* package names that follow the naming convention (rspec example)","state":"closed","created_at":"2019-10-09T07:28:31.127Z","updated_at":"2022-11-23T07:07:44.242Z","closed_at":"2021-02-22T08:19:36.105Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Package Registry","Deliverable","Package:P1","UX","customer","devops::package","direction","group::package registry","npm Registry","package:active","quad-planning::complete-no-action","section::ops","type::feature","workflow::verification"],"milestone":{"id":1233761,"iid":57,"group_id":9970,"title":"13.10","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.646Z","updated_at":"2022-04-21T07:22:00.171Z","due_date":"2021-03-17","start_date":"2021-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/57"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":4646508,"username":"u118739","name":"Christof Leuenberger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4646508/avatar.png","web_url":"https://gitlab.com/u118739"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":79,"merge_requests_count":0,"upvotes":31,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33685","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33685","notes":"https://gitlab.com/api/v4/projects/278964/issues/33685/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33685/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33685","relative":"#33685","full":"gitlab-org/gitlab#33685"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3608,"epic":{"id":68992,"iid":3608,"title":"Virtual npm registry","url":"/groups/gitlab-org/-/epics/3608","group_id":9970,"human_readable_end_date":"Mar 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"at_risk"},{"id":25742450,"iid":33669,"project_id":278964,"title":"Error linking existing user account to new smart card","description":"### Summary\nIf smart card authentication is enabled and the \"Sign-up enabled\" box is unchecked, and a smart card is presented with the same email as an existing user, an error will be presented. The correct behavior is that the user should be linked with the existing account and logged in.\n\n### Steps to reproduce\n1) New AWS EC2 instance. T2.Medium / Amazon Linux. Ports 22,80,443,3444 open.\n2) Set hostname and install GitLab Omnibus using yum (https with let's encrypt)\n3) Bring up GitLab and set root password. \n4) Install premium license\n5) Create a new user. Use the e-mail address programmed onto the smart card. \n6) Open admin page and uncheck \"Sign-up enabled\"\n7) Edit /etc/gitlab/gitlab.rb to add\n\tgitlab_rails['smartcard_enabled'] = true\n\tgitlab_rails['smartcard_ca_file'] = \"/etc/gitlab/ssl/TanukiCA.pem\"\n\tgitlab_rails['smartcard_client_certificate_required_port'] = 3444\n8) Upload CA key to /etc/gitlab/ssl/\n9) gitlab-ctl reconfigure\n10) Insert smart card and go to login page\n11) Select \"Login with smart card\". Select certificate and enter pin\n\nAn error message will be presented that says \"Failed to signing using smart card authentication\" and the user will not be logged in.\n\nEnabling Sign-ups will resolve this issue but may not be desirable for other reasons. \n\n### Example Project\nBecause this bug involves smart card authentication, it can not be recreated on GitLab.com. I have a test server running on AWS that I used to validate the steps to reproduce. Let me know if you would like access.\n\n### What is the current *bug* behavior?\nAn error message will be presented that says \"Failed to signing using smart card authentication\" and the user will not be logged in.\n\n### What is the expected *correct* behavior?\nThe smart card should be linked to the existing user account using e-mail and the appropriate user should be logged in.\n\n### Relevant logs and/or screenshots\n![error2](/uploads/22eb7c07106ab9a73babd3b99635fd85/error2.png)\nI recreated the error and checked the logs but did not see anything that appeared to be relevant.\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\nSystem information\nSystem:\t\t\nProxy:\t\tno\nCurrent User:\tgit\nUsing RVM:\tno\nRuby Version:\t2.6.3p62\nGem Version:\t2.7.9\nBundler Version:1.17.3\nRake Version:\t12.3.2\nRedis Version:\t3.2.12\nGit Version:\t2.22.0\nSidekiq Version:5.2.7\nGo Version:\tunknown\n\nGitLab information\nVersion:\t12.3.5-ee\nRevision:\t9dbaa740018\nDirectory:\t/opt/gitlab/embedded/service/gitlab-rails\nDB Adapter:\tPostgreSQL\nDB Version:\t10.9\nURL:\t\thttps://testgl.fernlab.net\nHTTP Clone URL:\thttps://testgl.fernlab.net/some-group/some-project.git\nSSH Clone URL:\tgit@testgl.fernlab.net:some-group/some-project.git\nElasticsearch:\tno\nGeo:\t\tno\nUsing LDAP:\tno\nUsing Omniauth:\tyes\nOmniauth Providers: \n\nGitLab Shell\nVersion:\t10.0.0\nRepository storage paths:\n- default: \t/var/opt/gitlab/git-data/repositories\nGitLab Shell path:\t\t/opt/gitlab/embedded/service/gitlab-shell\nGit:\t\t/opt/gitlab/embedded/bin/git\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\nChecking GitLab subtasks ...\n\nChecking GitLab Shell ...\n\nGitLab Shell: ... GitLab Shell version \u003e= 10.0.0 ? ... OK (10.0.0)\nRunning /opt/gitlab/embedded/service/gitlab-shell/bin/check\nCheck GitLab API access: OK\nRedis available via internal API: OK\n\ngitlab-shell self-check successful\n\nChecking GitLab Shell ... Finished\n\nChecking Gitaly ...\n\nGitaly: ... default ... OK\n\nChecking Gitaly ... Finished\n\nChecking Sidekiq ...\n\nSidekiq: ... Running? ... yes\nNumber of Sidekiq processes ... 1\n\nChecking Sidekiq ... Finished\n\nChecking Incoming Email ...\n\nIncoming Email: ... Reply by email is disabled in config/gitlab.yml\n\nChecking Incoming Email ... Finished\n\nChecking LDAP ...\n\nLDAP: ... LDAP is disabled in config/gitlab.yml\n\nChecking LDAP ... Finished\n\nChecking GitLab App ...\n\nGit configured correctly? ... yes\nDatabase config exists? ... yes\nAll migrations up? ... yes\nDatabase contains orphaned GroupMembers? ... no\nGitLab config exists? ... yes\nGitLab config up to date? ... yes\nLog directory writable? ... yes\nTmp directory writable? ... yes\nUploads directory exists? ... yes\nUploads directory has correct permissions? ... yes\nUploads directory tmp has correct permissions? ... yes\nInit script exists? ... skipped (omnibus-gitlab has no init script)\nInit script up-to-date? ... skipped (omnibus-gitlab has no init script)\nProjects have namespace: ... can't check, you have no projects\nRedis version \u003e= 2.8.0? ... yes\nRuby version \u003e= 2.5.3 ? ... yes (2.6.3)\nGit version \u003e= 2.22.0 ? ... yes (2.22.0)\nGit user has default SSH configuration? ... yes\nActive users: ... 3\nIs authorized keys file accessible? ... yes\nElasticsearch version 5.6 - 6.x? ... skipped (elasticsearch is disabled)\n\nChecking GitLab App ... Finished\n\n\nChecking GitLab subtasks ... Finished\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes","state":"closed","created_at":"2019-10-09T00:13:41.692Z","updated_at":"2022-05-13T09:28:13.840Z","closed_at":"2019-11-21T12:00:13.662Z","closed_by":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"labels":["backend","devops::manage","estimation::completed","group::authentication and authorization","missed:12.5","smartcard","type::bug","workflow::in dev"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":4412196,"username":"sarcila","name":"Sebasti√°n Arcila Valenzuela","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3a4e06d560d693fb3a842f5201df3746?s=80\u0026d=identicon","web_url":"https://gitlab.com/sarcila"}],"author":{"id":4267173,"username":"SteveTerhar","name":"Steve Terhar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc6e122c4d8b5e94ce5eaab27bc7984f?s=80\u0026d=identicon","web_url":"https://gitlab.com/SteveTerhar"},"type":"ISSUE","assignee":{"id":4412196,"username":"sarcila","name":"Sebasti√°n Arcila Valenzuela","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3a4e06d560d693fb3a842f5201df3746?s=80\u0026d=identicon","web_url":"https://gitlab.com/sarcila"},"user_notes_count":2,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33669","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33669","notes":"https://gitlab.com/api/v4/projects/278964/issues/33669/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33669/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33669","relative":"#33669","full":"gitlab-org/gitlab#33669"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2119,"epic":{"id":14433,"iid":2119,"title":"CAC configuration improvements","url":"/groups/gitlab-org/-/epics/2119","group_id":9970,"human_readable_end_date":"Dec 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25741406,"iid":33663,"project_id":278964,"title":"Resolve duplication `project-feature-toggle` buttons","description":"This is a follow up issue discussed in MR https://gitlab.com/gitlab-org/gitlab/merge_requests/15862#note_227661390\n\n![image](/uploads/95838e8115f2de1df54f571f4f1d1401/image.png)\n\nResolve the duplication across there `project-feature-toggle` buttons? I'm thinking we can create a nice shared partial view for these...\n\n```\ngit grep -E \"[^-]project-feature-toggle \" -- *.haml\n\napp/views/ci/variables/_variable_row.html.haml:          class: \"js-project-feature-toggle project-feature-toggle #{'is-checked' if is_protected}\",\napp/views/ci/variables/_variable_row.html.haml:          class: \"js-project-feature-toggle project-feature-toggle qa-variable-masked #{'is-checked' if is_masked}\",\napp/views/clusters/clusters/_form.html.haml:        class: \"js-project-feature-toggle project-feature-toggle #{'is-checked' if @cluster.enabled?} #{'is-disabled' unless can?(current_user, :update_cluster, @cluster)}\",\napp/views/projects/pages_domains/_form.html.haml:          class: \"js-project-feature-toggle project-feature-toggle mt-2 #{\"is-checked\" if auto_ssl_available_and_enabled}\",\nee/app/views/groups/dependency_proxies/show.html.haml:            class: \"js-project-feature-toggle project-feature-toggle #{'is-checked' if @dependency_proxy.enabled?}\",\nee/app/views/groups/saml_providers/_form.html.haml:          class: \"js-project-feature-toggle project-feature-toggle d-inline #{'is-checked' if saml_provider.enabled?}\",\nee/app/views/groups/saml_providers/_form.html.haml:            class: \"js-project-feature-toggle js-group-saml-enforced-sso-toggle project-feature-toggle d-inline qa-enforced-sso-toggle-button #{'is-checked' if saml_provider.enforced_sso?}\",\nee/app/views/groups/saml_providers/_form.html.haml:            class: \"js-project-feature-toggle js-group-saml-enforced-group-managed-accounts-toggle project-feature-toggle d-inline #{'is-checked' if saml_provider.enforced_group_managed_accounts?}\",\nee/app/views/projects/protected_branches/ee/_code_owner_approval_form.html.haml:        class: \"js-code-owner-toggle project-feature-toggle is-checked\",\nee/app/views/projects/protected_branches/ee/_code_owner_approval_table.html.haml:      class: \"js-code-owner-toggle project-feature-toggle mr-5 #{'is-checked' if protected_branch.code_owner_approval_required}\",\n```","state":"closed","created_at":"2019-10-08T22:24:15.179Z","updated_at":"2019-12-05T12:10:50.965Z","closed_at":"2019-12-05T12:10:50.915Z","closed_by":{"id":1149402,"username":"timzallmann","name":"Tim Zallmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1149402/avatar.png","web_url":"https://gitlab.com/timzallmann"},"labels":["[deprecated] Accepting merge requests","backstage [DEPRECATED]","frontend","maintenance::refactor"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"user_notes_count":2,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33663","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33663","notes":"https://gitlab.com/api/v4/projects/278964/issues/33663/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33663/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33663","relative":"#33663","full":"gitlab-org/gitlab#33663"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25739726,"iid":33661,"project_id":278964,"title":"Alert admin that untagged images are ready for deletion (removal from storage)","description":"### Problem to solve\r\nThe GitLab Container Registry allows developers to build, push and share Docker images/tags using the Docker client and/or GitLab CI/CD.\r\n\r\nFor organizations that build many images across many projects, it is important to regularly remove old, unused images and tags. However, many users do not know that after they remove an image via the Container Registry UI that they are NOT deleted from storage. \r\n\r\nThis is problematic for self-managed customers that are surprised by storage costs for the Container Registry. \r\n\u003c!-- What problem do we solve? --\u003e\r\n\r\n### Intended users\r\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\r\n\r\n### Further details\r\n\r\n#### Self-managed vs gitlab.com\r\nSince GitLab.com users can not run garbage collection, this feature should be for self-managed users only. The goal of this issue will be to alert admin at self-managed instances that there are multiple steps required to remove unreferenced images from storage. \r\n\r\n### Proposal\r\nWhen an Admin (self-managed instances only) deletes an image(s) from the Container Registry UI, alert them that the image is ready for deletion and that they should run garbage collection to remove it from storage. \r\n\r\n### Permissions and Security\r\n- There are no permissions changes required for this issue.\r\n\r\n### Documentation\r\n- There are no documentation changes required for this change.\r\n\r\n### What does success look like, and how can we measure that?\r\n- Success looks like self-managed instance owners are aware that in order to delete an image from storage, it must be both untagged and deleted via garbage collection.","state":"closed","created_at":"2019-10-08T21:08:49.206Z","updated_at":"2020-04-18T07:09:40.808Z","closed_at":"2020-03-31T11:21:05.620Z","closed_by":{"id":4584738,"username":"nmezzopera","name":"Nicol√≤ Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"labels":["Category:Package Registry","Deliverable","Package:P1","UI text","UX","devops::package","documentation","frontend","group::package registry","self-managed","type::feature","workflow::production"],"milestone":{"id":1104429,"iid":46,"group_id":9970,"title":"12.10","description":"https://about.gitlab.com/releases/2020/04/22/gitlab-12-10-released","state":"closed","created_at":"2019-12-20T15:15:53.243Z","updated_at":"2020-10-08T12:00:39.852Z","due_date":"2020-04-17","start_date":"2020-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/46"},"assignees":[{"id":4584738,"username":"nmezzopera","name":"Nicol√≤ Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"}],"author":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"type":"ISSUE","assignee":{"id":4584738,"username":"nmezzopera","name":"Nicol√≤ Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33661","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33661","notes":"https://gitlab.com/api/v4/projects/278964/issues/33661/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33661/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33661","relative":"#33661","full":"gitlab-org/gitlab#33661"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25739459,"iid":33659,"project_id":278964,"title":"ESCALATED: Dependency List shows dependency vulnerability status as safe to not logged in users","description":"### Summary\n\nWhen a person is not logged in and views the vulnerable components list they see them all as safe\n\n### Steps to reproduce\n\nbe not logged in and view a list with vulnerable dependencies\n\n### Example Project\n\n\n### What is the current *bug* behavior?\n\nI am not logged in and can see the vulnerable dependencies\n\nhttps://gitlab.com/gitlab-org/gitlab/dependencies - click \"vulnerable components\"\n\n### What is the expected *correct* behavior?\n\nAt a minimum, they shouldn't all say safe because they are not, but also can we not show a count for that tab and also disable clicking / viewing the tab?\n\n@andyvolpe can you confirm in line with https://gitlab.com/gitlab-org/gitlab/issues/13247#note_219462485 that although we want guests to see the dependency list (though perhaps not the safe/unsafe), the vulnerable dependency list should not be available to not logged in persons?\n\n### Relevant logs and/or screenshots\n\n### Output of checks\n\n#### Results of GitLab environment info\n\n#### Results of GitLab application Check\n\n### Possible fixes\n\n","state":"closed","created_at":"2019-10-08T20:56:08.684Z","updated_at":"2021-04-03T08:35:07.582Z","closed_at":"2019-12-24T00:30:49.537Z","closed_by":{"id":4226366,"username":"ankelly","name":"Andrew Kelly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4226366/avatar.png","web_url":"https://gitlab.com/ankelly"},"labels":["Deliverable","Enterprise Edition","UX","backend","dependency list","devops::secure","frontend","group::composition analysis","missed-SLO","priority::1","security","severity::2","type::bug","workflow::verification"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},{"id":4226366,"username":"ankelly","name":"Andrew Kelly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4226366/avatar.png","web_url":"https://gitlab.com/ankelly"}],"author":{"id":3913516,"username":"NicoleSchwartz","name":"Nicole Schwartz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3913516/avatar.png","web_url":"https://gitlab.com/NicoleSchwartz"},"type":"ISSUE","assignee":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"user_notes_count":31,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33659","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33659","notes":"https://gitlab.com/api/v4/projects/278964/issues/33659/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33659/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33659","relative":"#33659","full":"gitlab-org/gitlab#33659"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25739230,"iid":33658,"project_id":278964,"title":"/api/:version/jobs/:id/trace calls are causing an increase in rails queue duration on api nodes leading to increased api latency","description":"here's a chart showing the total time spent on serving different requests on api nodes, notice `/api/:version/jobs/:id/trace` route clearly standing out:\n\n![Screenshot_2019-10-08_at_22.22.11](/uploads/211d1249c2ab6060f71d970f67f6b534/Screenshot_2019-10-08_at_22.22.11.png)\n\nsrc: https://log.gitlab.net/goto/3f558db998a361d2819dec8401340a0b\n\n\nand the resulting spikes in rails queue duration:\n\n![Screenshot_2019-10-08_at_21.51.06](/uploads/82f9f6513e79b8766c529171cdb57903/Screenshot_2019-10-08_at_21.51.06.png)\n\nsrc: https://log.gitlab.net/goto/17b213a6c8729e65702b6cc634beb5e6","state":"closed","created_at":"2019-10-08T20:45:17.677Z","updated_at":"2021-10-27T10:43:15.638Z","closed_at":"2020-01-21T07:17:58.676Z","closed_by":{"id":2243533,"username":"jyavorska","name":"Jason Yavorska","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2243533/avatar.png","web_url":"https://gitlab.com/jyavorska"},"labels":["Category:Continuous Integration","Deliverable","Eng-Consumer::Infrastructure","Eng-Producer::Development","Engineering Allocation","backend","backstage [DEPRECATED]","bug::performance","devops::verify","gitlab.com","group::pipeline execution","infradev","missed-deliverable","missed:12.6","priority::2","severity::2","workflow::production"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":39,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33658","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33658","notes":"https://gitlab.com/api/v4/projects/278964/issues/33658/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33658/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33658","relative":"#33658","full":"gitlab-org/gitlab#33658"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25734375,"iid":33648,"project_id":278964,"title":"Update documentation to accurately reflect ZAProxy version.","description":"### Problem to solve\n\n\u003c!-- What problem do we solve? --\u003e\n\nThis page does not list the correct version of ZAProxy or describe the vulnerability database correctly. \nhttps://docs.gitlab.com/ee/user/application_security/index.html#maintenance-and-update-of-the-vulnerabilities-database\n\n### Intended users\n\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security\n\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\n\n### Proposal\n\nUpdate the page with a link to the repo to pull the latest version (that way the link is always correct). Research when vulnerabilities are pulled in, and make sure the documentation is accurate.","state":"closed","created_at":"2019-10-08T17:57:53.986Z","updated_at":"2020-01-27T21:23:38.368Z","closed_at":"2020-01-27T21:23:38.317Z","closed_by":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"labels":["backstage [DEPRECATED]","devops::secure","documentation","group::dynamic analysis","workflow::ready for development"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"}],"author":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"type":"ISSUE","assignee":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33648","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33648","notes":"https://gitlab.com/api/v4/projects/278964/issues/33648/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33648/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33648","relative":"#33648","full":"gitlab-org/gitlab#33648"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25732680,"iid":33647,"project_id":278964,"title":"Remove user_id from /internal/discover call","description":"The internal API can process a `user_id` param when calling `/internal/discover` but gitlab-shell will never pass this. So we can remove it","state":"closed","created_at":"2019-10-08T16:36:50.139Z","updated_at":"2019-10-09T23:55:34.258Z","closed_at":"2019-10-09T23:55:34.202Z","closed_by":{"id":15139,"username":"rspeicher","name":"Robert Speicher","state":"active","avatar_url":"https://secure.gravatar.com/avatar/73c8253932541a7b5cbc5d79493f2bea?s=80\u0026d=identicon","web_url":"https://gitlab.com/rspeicher"},"labels":["api","devops::create","group::source code","maintenance::refactor"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"}],"author":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"type":"ISSUE","assignee":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33647","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33647","notes":"https://gitlab.com/api/v4/projects/278964/issues/33647/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33647/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33647","relative":"#33647","full":"gitlab-org/gitlab#33647"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25732252,"iid":33646,"project_id":278964,"title":"Eliminate Cycle Analytics \"Total\" stage","description":"### Problem to solve\n\nIn the [Cycle Analytics feature](https://gitlab.com/gitlab-org/gitlab/cycle_analytics), the \"Total\" stage is the sum of all stages (it represents the total time [\"from issue creation ... until deploy to production\"](https://gitlab.com/gitlab-org/gitlab-foss/issues/21170)). That is confusing. It looks like every other individual stage, but is actually a sum of all stages.  This particular kind of sum is often called [\"lead time\"](https://simplicable.com/new/lead-time-vs-cycle-time).  Lead time is being added to the top bar of Cycle Analytics under Issue #21863.  Once that is executed the \"Production\" stage will be not only misleading, but redundant.\n\n### Intended users\n\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n\n### Proposal\n\nRemove the \"Total\" stage of Cycle Analytics (after \"lead time\" is added to the top bar under #21863).\n\n![Remove_Total_stage](/uploads/47b1e49c10e71ce3bbdac1b904adc87b/Remove_Total_stage.png)\n\n### Links / references\n\nThis was prompted by some [confusion it caused in code review](https://gitlab.com/gitlab-org/gitlab/merge_requests/16775#note_227325953).\n\nUPDATED 2019-10-15 by @djensen to refine the spec per @valexieva's [suggestion](https://gitlab.com/gitlab-org/gitlab/issues/33646#note_230700340).","state":"closed","created_at":"2019-10-08T16:18:36.429Z","updated_at":"2021-10-06T15:31:29.544Z","closed_at":"2020-09-17T15:23:31.797Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["UX","backend","devops::manage","frontend","group::optimize","priority::3","section::dev","type::feature","workflow::ready for development"],"milestone":{"id":1233753,"iid":51,"group_id":9970,"title":"13.4","description":"https://about.gitlab.com/releases/2020/09/22/gitlab-13-4-released/","state":"closed","created_at":"2020-04-09T17:39:21.662Z","updated_at":"2022-04-13T14:50:33.769Z","due_date":"2020-09-17","start_date":"2020-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/51"},"assignees":[{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"}],"author":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"type":"ISSUE","assignee":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"user_notes_count":23,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33646","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33646","notes":"https://gitlab.com/api/v4/projects/278964/issues/33646/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33646/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33646","relative":"#33646","full":"gitlab-org/gitlab#33646"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25729240,"iid":33641,"project_id":278964,"title":"500 error when registering new user with smart card auth enabled","description":"### Summary\nIf smart card authentication is enabled and the \"Sign-up enabled\" box is checked, and a user attempts to use the \"Register\" tab on the login page to create a new user, a 500 error will occur. It appears that creating a new user from the admin page will also cause this to occur. \n\n### Steps to reproduce\n\t\n1) Create a new AWS EC2 instance. T2.Medium / Amazon Linux. Ports 22,80,443,3444 open.\n2) Set hostname and Install GitLab Omnibus using yum (https with let's encrypt)\n3) Bring up gitlab and set root password. \n4) Open admin page and validate that \"Sign-up enabled\" is checked.\n5) Logout\n6) On the login page, select the \"Register\" tab and attempt to create a new user. It will be successful\n7) Install premium license\n8) Edit /etc/gitlab/gitlab.rb to add\n\tgitlab_rails['smartcard_enabled'] = true\n\tgitlab_rails['smartcard_ca_file'] = \"/etc/gitlab/ssl/TanukiCA.pem\"\n\tgitlab_rails['smartcard_client_certificate_required_port'] = 3444\n\t\t\n9) Upload CA key to /etc/gitlab/ssl/\n10) gitlab-ctl reconfigure\n11) Go to login page\n12) Select register tab and attempt to create a new user.  When you click the \"Register\" button a 500 error will be presented. \n\nNote: Logging in as root and manually creating a user from the admin page appears to trigger the same issue.\n\n### Example Project\nBecause this bug involves smart card authentication, it can not be recreated on GitLab.com. I have a test server running on AWS that I used to validate the steps to reproduce. Let me know if you would like access. \n\n### What is the current *bug* behavior?\n\nWhen attempting to register a new user, a 500 error occurs.\n\n### What is the expected *correct* behavior?\n\nThe \"register\" tab on the login page should probably be disabled if smart card auth is enabled. Administrators should still be able to create new users from the admin page.\n\n### Relevant logs and/or screenshots\n![Beforeerror](/uploads/a052c5c1f092d974e1897a540a1e9f96/Beforeerror.png)\n![error](/uploads/94347a8498f869bb17a1c77a82411adf/error.png)\nProduction Log:\n````\n{{==\u003e /var/log/gitlab/gitlab-rails/production.log \u003c==\nStarted POST \"/users\" for 108.45.79.134 at 2019-10-08 13:19:20 +0000\nProcessing by RegistrationsController#create as HTML\n¬† Parameters: {\"utf8\"=\u003e\"‚úì\", \"authenticity_token\"=\u003e\"[FILTERED]\", \"new_user\"=\u003e{\"name\"=\u003e\"test user 4\", \"username\"=\u003e\"testuser4\", \"email\"=\u003e\"test4@test.com\", \"email_confirmation\"=\u003e\"test4@test.com\", \"password\"=\u003e\"[FILTERED]\"}}\nPotential spam detected for IP 108.45.79.134. Invisible Captcha timestamp not found in session.\nCompleted 500 Internal Server Error in 210ms (ActiveRecord: 10.7ms | Elasticsearch: 0.0ms)\n¬†¬†\nNoMethodError (undefined method `any?' for \u003cActionController::Parameters {} permitted: true\u003e:ActionController::Parameters):\n¬†¬†\nee/app/services/ee/users/build_service.rb:85:in `build_smartcard_identity'\nee/app/services/ee/users/build_service.rb:21:in `execute'\napp/controllers/registrations_controller.rb:119:in `resource'\napp/controllers/concerns/accepts_pending_invitations.rb:7:in `accept_pending_invitations'\napp/controllers/registrations_controller.rb:19:in `create'\nee/lib/gitlab/ip_address_state.rb:10:in `with'\nee/app/controllers/ee/application_controller.rb:43:in `set_current_ip_address'\nlib/gitlab/session.rb:11:in `with_session'\napp/controllers/application_controller.rb:450:in `set_session_storage'\nlib/gitlab/i18n.rb:55:in `with_locale'\nlib/gitlab/i18n.rb:61:in `with_user_locale'\napp/controllers/application_controller.rb:444:in `set_locale'\nlib/gitlab/middleware/rails_queue_duration.rb:27:in `call'\nlib/gitlab/metrics/rack_middleware.rb:17:in `block in call'\nlib/gitlab/metrics/transaction.rb:57:in `run'\nlib/gitlab/metrics/rack_middleware.rb:17:in `call'\nlib/gitlab/request_profiler/middleware.rb:17:in `call'\nee/lib/gitlab/jira/middleware.rb:17:in `call'\nlib/gitlab/middleware/go.rb:20:in `call'\nlib/gitlab/etag_caching/middleware.rb:13:in `call'\nlib/gitlab/middleware/correlation_id.rb:16:in `block in call'\nlib/gitlab/middleware/correlation_id.rb:15:in `call'\nlib/gitlab/middleware/multipart.rb:117:in `call'\nlib/gitlab/middleware/read_only/controller.rb:42:in `call'\nlib/gitlab/middleware/read_only.rb:18:in `call'\nlib/gitlab/middleware/basic_health_check.rb:25:in `call'\nlib/gitlab/request_context.rb:26:in `call'\nlib/gitlab/metrics/requests_rack_middleware.rb:29:in `call'\nlib/gitlab/middleware/release_env.rb:12:in `call'\n}}\n````\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\nSystem information\nSystem:\t\t\nProxy:\t\tno\nCurrent User:\tgit\nUsing RVM:\tno\nRuby Version:\t2.6.3p62\nGem Version:\t2.7.9\nBundler Version:1.17.3\nRake Version:\t12.3.2\nRedis Version:\t3.2.12\nGit Version:\t2.22.0\nSidekiq Version:5.2.7\nGo Version:\tunknown\n\nGitLab information\nVersion:\t12.3.5-ee\nRevision:\t9dbaa740018\nDirectory:\t/opt/gitlab/embedded/service/gitlab-rails\nDB Adapter:\tPostgreSQL\nDB Version:\t10.9\nURL:\t\thttps://testgl.fernlab.net\nHTTP Clone URL:\thttps://testgl.fernlab.net/some-group/some-project.git\nSSH Clone URL:\tgit@testgl.fernlab.net:some-group/some-project.git\nElasticsearch:\tno\nGeo:\t\tno\nUsing LDAP:\tno\nUsing Omniauth:\tyes\nOmniauth Providers: \n\nGitLab Shell\nVersion:\t10.0.0\nRepository storage paths:\n- default: \t/var/opt/gitlab/git-data/repositories\nGitLab Shell path:\t\t/opt/gitlab/embedded/service/gitlab-shell\nGit:\t\t/opt/gitlab/embedded/bin/git\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\nChecking GitLab subtasks ...\n\nChecking GitLab Shell ...\n\nGitLab Shell: ... GitLab Shell version \u003e= 10.0.0 ? ... OK (10.0.0)\nRunning /opt/gitlab/embedded/service/gitlab-shell/bin/check\nCheck GitLab API access: OK\nRedis available via internal API: OK\n\ngitlab-shell self-check successful\n\nChecking GitLab Shell ... Finished\n\nChecking Gitaly ...\n\nGitaly: ... default ... OK\n\nChecking Gitaly ... Finished\n\nChecking Sidekiq ...\n\nSidekiq: ... Running? ... yes\nNumber of Sidekiq processes ... 1\n\nChecking Sidekiq ... Finished\n\nChecking Incoming Email ...\n\nIncoming Email: ... Reply by email is disabled in config/gitlab.yml\n\nChecking Incoming Email ... Finished\n\nChecking LDAP ...\n\nLDAP: ... LDAP is disabled in config/gitlab.yml\n\nChecking LDAP ... Finished\n\nChecking GitLab App ...\n\nGit configured correctly? ... yes\nDatabase config exists? ... yes\nAll migrations up? ... yes\nDatabase contains orphaned GroupMembers? ... no\nGitLab config exists? ... yes\nGitLab config up to date? ... yes\nLog directory writable? ... yes\nTmp directory writable? ... yes\nUploads directory exists? ... yes\nUploads directory has correct permissions? ... yes\nUploads directory tmp has correct permissions? ... yes\nInit script exists? ... skipped (omnibus-gitlab has no init script)\nInit script up-to-date? ... skipped (omnibus-gitlab has no init script)\nProjects have namespace: ... can't check, you have no projects\nRedis version \u003e= 2.8.0? ... yes\nRuby version \u003e= 2.5.3 ? ... yes (2.6.3)\nGit version \u003e= 2.22.0 ? ... yes (2.22.0)\nGit user has default SSH configuration? ... yes\nActive users: ... 3\nIs authorized keys file accessible? ... yes\nElasticsearch version 5.6 - 6.x? ... skipped (elasticsearch is disabled)\n\nChecking GitLab App ... Finished\n\n\nChecking GitLab subtasks ... Finished\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes","state":"closed","created_at":"2019-10-08T15:09:51.126Z","updated_at":"2020-03-10T22:09:40.133Z","closed_at":"2020-03-10T22:09:40.047Z","closed_by":{"id":228150,"username":"proglottis","name":"James Fargher","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/228150/avatar.png","web_url":"https://gitlab.com/proglottis"},"labels":["Category:Authentication and Authorization","[deprecated] Accepting merge requests","backend","devops::manage","group::authentication and authorization","priority::2","smartcard","type::bug","workflow::in review"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":1315784,"username":"ifarkas","name":"Imre Farkas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b4dcfa5185b8513751b447d76b069bf6?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifarkas"}],"author":{"id":4267173,"username":"SteveTerhar","name":"Steve Terhar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc6e122c4d8b5e94ce5eaab27bc7984f?s=80\u0026d=identicon","web_url":"https://gitlab.com/SteveTerhar"},"type":"ISSUE","assignee":{"id":1315784,"username":"ifarkas","name":"Imre Farkas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b4dcfa5185b8513751b447d76b069bf6?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifarkas"},"user_notes_count":12,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33641","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33641","notes":"https://gitlab.com/api/v4/projects/278964/issues/33641/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33641/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33641","relative":"#33641","full":"gitlab-org/gitlab#33641"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2520,"epic":{"id":18542,"iid":2520,"title":"Smart Card Authentication for the Public Sector","url":"/groups/gitlab-org/-/epics/2520","group_id":9970,"human_readable_end_date":"May 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25728271,"iid":33638,"project_id":278964,"title":"N+1 in EpicsFinder due to access check","description":"In `EpicsFinder#groups_user_can_read_epics`, we iterate over all the related groups to check for access. We do a preload with `Gitlab::GroupPlansPreloader` here but there is still an N+1 due to https://gitlab.com/gitlab-org/gitlab/issues/11539.\n\nThe `read_epic` permission is basically 2 parts:\n\n1. can read group\n1. group has epics feature (license check)\n\nSince `related_groups` here is always part of the hierarchy, I think we can simplify this. We know that licenses can only be applied at the top level namespace and group access is also inherited (and you automatically get read access to parent groups when you're a member of a child group).\n\nEDIT: we are hitting this N+1 issue also when getting epic descendant counts because we need to check every group permission there too - https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/models/ee/epic.rb#L203","state":"closed","created_at":"2019-10-08T14:41:08.866Z","updated_at":"2021-11-08T16:55:56.887Z","closed_at":"2020-01-07T17:56:23.429Z","closed_by":{"id":15139,"username":"rspeicher","name":"Robert Speicher","state":"active","avatar_url":"https://secure.gravatar.com/avatar/73c8253932541a7b5cbc5d79493f2bea?s=80\u0026d=identicon","web_url":"https://gitlab.com/rspeicher"},"labels":["Category:Portfolio Management","backend","bug::performance","devops::plan","epics","group::product planning","missed:12.6","workflow::verification"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"}],"author":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"type":"ISSUE","assignee":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"user_notes_count":13,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33638","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33638","notes":"https://gitlab.com/api/v4/projects/278964/issues/33638/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33638/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33638","relative":"#33638","full":"gitlab-org/gitlab#33638"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4005,"epic":{"id":84757,"iid":4005,"title":"[GraphQL] Aim to reduce N+1 queries","url":"/groups/gitlab-org/-/epics/4005","group_id":9970,"human_readable_end_date":"Nov 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25724595,"iid":33629,"project_id":278964,"title":"Create parametrized scopes on Note to remove code duplication","description":"The following discussion from !17818 should be addressed:\n\n- [ ] @nolith started a [discussion](https://gitlab.com/gitlab-org/gitlab/merge_requests/17818#note_226895627):  (+3 comments)\n\n    \u003e Why don't we get the opportunity to get rid of this `CodeReuse/ActiveRecord`?\n    \u003e \n    \u003e The offenders are \n    \u003e \n    \u003e ```ruby\n    \u003e notes.where('(note LIKE ? OR note LIKE ?)', text, text.capitalize)\n    \u003e ```\n    \u003e \n    \u003e and\n    \u003e \n    \u003e ```ruby\n    \u003e notes.where(note: [text, text.capitalize])\n    \u003e ```\n    \u003e \n    \u003e We may consider adding a couple of parametrized scope in `Note` like the followings (naming could be improved :smile: )\n    \u003e \n    \u003e ```ruby\n    \u003e scope :for_note, -\u003e(text) { where(note: [text, text.capitalize]) }\n    \u003e scope :like_note, -\u003e(text) { where('(note LIKE ? OR note LIKE ?)', text, text.capitalize) }\n    \u003e ```","state":"closed","created_at":"2019-10-08T12:54:57.978Z","updated_at":"2022-05-19T16:06:45.793Z","closed_at":"2019-11-11T10:42:17.203Z","closed_by":{"id":3078895,"username":"pd-gitlab","name":"Patrick Derichs","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7e106768fae83577b0eec7daf082cb7d?s=80\u0026d=identicon","web_url":"https://gitlab.com/pd-gitlab"},"labels":["backend","backstage [DEPRECATED]","devops::plan","group::project management","maintenance::refactor","workflow::verification"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":3078895,"username":"pd-gitlab","name":"Patrick Derichs","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7e106768fae83577b0eec7daf082cb7d?s=80\u0026d=identicon","web_url":"https://gitlab.com/pd-gitlab"}],"author":{"id":3078895,"username":"pd-gitlab","name":"Patrick Derichs","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7e106768fae83577b0eec7daf082cb7d?s=80\u0026d=identicon","web_url":"https://gitlab.com/pd-gitlab"},"type":"ISSUE","assignee":{"id":3078895,"username":"pd-gitlab","name":"Patrick Derichs","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7e106768fae83577b0eec7daf082cb7d?s=80\u0026d=identicon","web_url":"https://gitlab.com/pd-gitlab"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33629","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33629","notes":"https://gitlab.com/api/v4/projects/278964/issues/33629/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33629/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33629","relative":"#33629","full":"gitlab-org/gitlab#33629"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25721989,"iid":33624,"project_id":278964,"title":"Single verification framework(discovery)","description":"I think we need to make some common verification framework so adding new resources won't be complex.\nWe aim to create a verification for uploads https://gitlab.com/groups/gitlab-org/-/epics/1817, for design repositories https://gitlab.com/gitlab-org/gitlab/issues/32467, and for container repositories. In the future, we will add even more resources. \n\nWhat if we just create a single scheduler for all king of resources? It would look like `Geo::RepositoryVerification::Primary::ShardWorker` but the responsibility should be broader. I propose to create a separate scheduler for Primary and Secondary. The actual worker that calculates the checksum can only receive two arguments: resource_type and id. All existing resources can be identified by this identification system, including uploads, designs, container repositories, and even wikis and repositories. Of course, the ordering system should take into account priorities and should prevent the system from clogging when one important resource takes all the capacity. \n\nI created this issue after brainstorming https://gitlab.com/gitlab-org/gitlab/issues/32467, I noticed that adding new resource is incredibly hard now.\n\nPS Sorry, It seems like I saw a similar issue somewhere but I could not find it.\n\n**UPDATE:**\nRequirements:\n* ensuring a primary checksum\n* running everything automatically at scale\n* producing metrics\n* reverifying\n* configurable rate limiting\n* optimizing checksumming of remotely stored files\n\ncc @geo-team","state":"closed","created_at":"2019-10-08T11:52:18.292Z","updated_at":"2020-12-04T22:07:10.041Z","closed_at":"2019-10-17T11:08:54.317Z","closed_by":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"labels":["devops::systems","direction","group::geo","product discovery [DEPRECATED]","workflow::solution validation"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"}],"author":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":10,"merge_requests_count":1,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33624","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33624","notes":"https://gitlab.com/api/v4/projects/278964/issues/33624/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33624/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33624","relative":"#33624","full":"gitlab-org/gitlab#33624"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2097,"epic":{"id":14196,"iid":2097,"title":"Verification Framework","url":"/groups/gitlab-org/-/epics/2097","group_id":9970,"human_readable_end_date":"Nov 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25721574,"iid":33623,"project_id":278964,"title":"Remove the broadcast messages endpoints from our internal api","description":"Those messages are now part of the `post_receive` endpoint.\n\nDone so in https://gitlab.com/gitlab-org/gitlab-foss/merge_requests/13916\n\n\n____\nThe following discussion from !18089 should be addressed:\n\n- [ ] @reprazent started a [discussion](https://gitlab.com/gitlab-org/gitlab/merge_requests/18089#note_226955226):  (+1 comment)\n\n    \u003e I think these endpoints can also be removed in a follow up issue.","state":"closed","created_at":"2019-10-08T11:35:20.390Z","updated_at":"2019-10-10T12:28:17.229Z","closed_at":"2019-10-10T12:28:17.187Z","closed_by":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"labels":["api","devops::create","group::source code","maintenance::refactor","workflow::in dev"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"}],"author":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"type":"ISSUE","assignee":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"user_notes_count":1,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33623","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33623","notes":"https://gitlab.com/api/v4/projects/278964/issues/33623/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33623/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33623","relative":"#33623","full":"gitlab-org/gitlab#33623"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25721430,"iid":33622,"project_id":278964,"title":"Investigate `review-deploy` that takes more than 15 minutes to finish","description":"As we can see in https://gitlab.com/gitlab-org/gitlab/-/jobs/314545008, `review-deploy` took 33 minutes to finish, even though the Review App was deployed successfully (i.e. in less than 15 minutes). By looking at the timestamps for the job's steps:\n\n1. The `prepare-executor` section started at `Time.at(1570529032) =\u003e 2019-10-08 12:03:52 +0200`\n1. The `prepare-script` section started at `Time.at(1570529041) =\u003e 2019-10-08 12:04:01 +0200`\n1. The `get-sources` section started at `Time.at(1570529044) =\u003e 2019-10-08 12:04:04 +0200`\n1. The `restore-cache` section started at `Time.at(1570529060) =\u003e 2019-10-08 12:04:20 +0200`\n1. The `download-artifacts` section started at `Time.at(1570529062) =\u003e 2019-10-08 12:04:22 +0200`\n1. The `build-script` section started at `Time.at(1570529065) =\u003e 2019-10-08 12:04:25 +0200`\n1. The `after-script` section started at `Time.at(1570531043) =\u003e 2019-10-08 12:37:23 +0200`\n1. The `archive-cache` section started at `Time.at(1570531045) =\u003e 2019-10-08 12:37:25 +0200`\n1. The `upload-artifacts-on-success` section started at `Time.at(1570531047) =\u003e 2019-10-08 12:37:27 +0200`\n\nSo we can see that the `build-script` section indeed took 33 minutes to complete but we don't have the detailed duration for each step. What we know is that the `deploy` step cannot take more than 15 minutes. That leaves 18 minutes for the `install_api_client_dependencies_with_apk `, `check_kube_domain `, `ensure_namespace `, `install_tiller `, `install_external_dns `, `download_chart `, and `add_license`.\n\nWe could add `date` calls between each steps...","state":"closed","created_at":"2019-10-08T11:31:02.609Z","updated_at":"2019-10-24T15:31:31.908Z","closed_at":"2019-10-24T15:31:31.858Z","closed_by":{"id":128633,"username":"rymai","name":"R√©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Engineering Productivity","needs investigation"],"milestone":null,"assignees":[{"id":128633,"username":"rymai","name":"R√©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":128633,"username":"rymai","name":"R√©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"R√©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33622","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33622","notes":"https://gitlab.com/api/v4/projects/278964/issues/33622/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33622/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33622","relative":"#33622","full":"gitlab-org/gitlab#33622"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25721268,"iid":33621,"project_id":278964,"title":"Remove /merge_request_urls from internal API","description":"We can remove `/internal/merge_request_urls` from the API as it isn't used anymore\n\nThis was added in\nhttps://gitlab.com/gitlab-org/gitlab-foss/merge_requests/5542 but has\nbeen replaced by the post receive call in https://gitlab.com/gitlab-org/gitlab-foss/merge_requests/13916\n\n___\nThe following discussion from !18089 should be addressed:\n\n- [ ] @reprazent started a [discussion](https://gitlab.com/gitlab-org/gitlab/merge_requests/18089#note_226955225):  (+1 comment)\n\n    \u003e I think we can get rid of the `/merge_request_urls` endpoint, leaving this discussion to create an issue for that.","state":"closed","created_at":"2019-10-08T11:23:35.229Z","updated_at":"2019-10-09T13:57:44.193Z","closed_at":"2019-10-09T13:57:44.146Z","closed_by":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"labels":["api","devops::create","group::source code","maintenance::refactor","workflow::in dev"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"}],"author":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"type":"ISSUE","assignee":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"user_notes_count":2,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33621","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33621","notes":"https://gitlab.com/api/v4/projects/278964/issues/33621/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33621/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33621","relative":"#33621","full":"gitlab-org/gitlab#33621"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25709889,"iid":33612,"project_id":278964,"title":"Documentation for type of work - task by type chart","description":"Issue for adding documentation for type of work, task by type chart.\n\nRelated Issue https://gitlab.com/gitlab-org/gitlab/issues/32421","state":"closed","created_at":"2019-10-08T05:34:25.319Z","updated_at":"2020-03-02T22:30:26.119Z","closed_at":"2019-11-14T19:36:22.504Z","closed_by":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"labels":["Category:Value Stream Management","devops::manage","documentation","group::optimize","missed:12.4"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[],"author":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33612","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":0,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33612","notes":"https://gitlab.com/api/v4/projects/278964/issues/33612/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33612/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33612","relative":"#33612","full":"gitlab-org/gitlab#33612"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25707357,"iid":33606,"project_id":278964,"title":"Add license list to \"Security and Compliance\" nav section - Add license list, modals, and links","description":"* This is a subissue for #13582\n\nAs part of https://gitlab.com/gitlab-org/gitlab/issues/13582 this issues covers the following tasks:\n\n![Screen_Shot_2019-10-04_at_11.17.34_AM](https://gitlab.com/gitlab-org/gitlab/uploads/ba4eadb55c30a1f4e91fa5b3aacb384d/2.png)\n\n* [ ]  Create and display license list component\n* [ ]  MVC displays licenses that exist in a project. Anchor license name to documentation URL and `?` icon by header anchors to [license compliance documentation](https://docs.gitlab.com/ee/user/application_security/license_compliance/) (both open new browser window)\n* [ ]  Flow: user clicking the component link in table or X more (using https://gitlab.com/gitlab-org/gitlab-ee/issues/10536 pattern implemented by @dpisek). Title in the modal displays the name of the license.\n* [ ]  There is an [issue with displaying component links](https://gitlab.com/gitlab-org/gitlab/issues/13582#note_220462550), as there are different configuration and supporting languages between license/dependency list. In these cases, some components will not have links (display as non-anchored text) and may not have component information at all (display `-`)\n* [ ]  Empty state display, when feature is not set up or not license discovered. Button links to [license compliance documentation](https://docs.gitlab.com/ee/user/application_security/license_compliance/) page / other issues addressing this: https://gitlab.com/gitlab-org/gitlab/issues/13992 and https://gitlab.com/gitlab-org/gitlab/issues/12685. Visual image above text is the same as used on the dependency list empty state page\n* [ ]  There is an [issue with displaying component links](https://gitlab.com/gitlab-org/gitlab/issues/13582#note_220462550), as there are different configuration and supporting languages between license/dependency list. In these cases, some components will not have links (display as non-anchored text) and may not have component information at all (display `-`)","state":"closed","created_at":"2019-10-08T02:41:32.808Z","updated_at":"2020-01-18T07:09:02.532Z","closed_at":"2020-01-07T04:49:36.292Z","closed_by":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"labels":["Category:License Compliance","Deliverable","Enterprise Edition","Secure UX::Compliance \u0026 Auditing","devops::secure","frontend","group::composition analysis","missed-deliverable","missed:12.4","missed:12.5","missed:12.6","sub-issue","type::feature","workflow::production"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"}],"author":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"type":"ISSUE","assignee":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33606","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33606","notes":"https://gitlab.com/api/v4/projects/278964/issues/33606/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33606/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33606","relative":"#33606","full":"gitlab-org/gitlab#33606"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25704744,"iid":33601,"project_id":278964,"title":"Use $CI_DEFAULT_BRANCH where relevant","description":"## Summary\n\nUpdate all references to `master` in the Auto-DevOps templates to use `$CI_DEFAULT_BRANCH`.","state":"closed","created_at":"2019-10-08T00:04:16.010Z","updated_at":"2020-08-03T18:20:54.263Z","closed_at":"2019-12-05T17:28:34.428Z","closed_by":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"labels":["backstage [DEPRECATED]","devops::secure","group::dynamic analysis","missed:12.5","workflow::in dev"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"}],"author":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"type":"ISSUE","assignee":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"user_notes_count":1,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33601","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33601","notes":"https://gitlab.com/api/v4/projects/278964/issues/33601/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33601/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33601","relative":"#33601","full":"gitlab-org/gitlab#33601"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25701795,"iid":33596,"project_id":278964,"title":"Use GitLab metadata to verify and troubleshoot packages","description":"### Problem to solve\nThe GitLab Package Registry allows users to build, publish and share images using the command line or GitLab CI/CD. GitLab also provides a user interface, where users can view, download and delete packages *(maven, npm, conan)* at the project and group level. However, the user interface does not include any information about who created a given package and how it was published.  \n\nThis is a problem because users need that metadata in order to identify that a package was built correctly and to confirm they are using the correct version of the package. \n\n#### User stories\n- I as a developer, when I am navigating to the Package Registry, need to confirm that my package was built correctly and that I am using the correct version, so that I can ship high quality code. (This user story comes from our most recent [user survey](https://gitlab.com/gitlab-org/uxr_insights/issues/623))\n\n### Intended users\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n\n### Proposal\nInclude build details, such as `pipeline_id`, `branch`, `commit` and `commit_sha` for any package being hosted in the GitLab Package Registry that has been built utilizing GitLab CI/CD. \n\n- `pipeline_id` should link to the pipeline details page to help users troubleshoot when something has gone wrong. \n- `branch` and `commit` should link to their respective repositories to help the user find/verify the code that built a specific package. \n- `commit_sha` should be easily copyably to ensure the user can leverage this information elsewhere. \n\n### Further details\n\n#### User survey results\n- Based on a [recent survey](https://gitlab.com/gitlab-org/uxr_insights/issues/611), users ranked the metadata that is most important to them:\n\n#### User interface\n![Screenshot_2020-01-08_at_10.53.40](/uploads/9b16544962262159750c6227b68f04e7/Screenshot_2020-01-08_at_10.53.40.png)\n![pipeline](/uploads/95f012ef0d84240c6107e18f2888844e/pipeline.gif)\n\n### Permissions and Security\n- There are no permissions changes required for this issue.\n\n### Documentation\n- There are no documentation changes required for this issue.\n\n### What does success look like, and how can we measure that?\n- Success looks like users are able to confirm that their package was built correctly and that they are using the correct version.\n- We can measure this by measuring engagement with the Package Registry UI\n  - Page views\n  - Links clicked in the UI\n\n### What is the type of buyer? \n- Premium","state":"closed","created_at":"2019-10-07T21:24:48.211Z","updated_at":"2021-09-13T03:45:21.718Z","closed_at":"2020-01-28T18:34:06.055Z","closed_by":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"labels":["Category:Package Registry","GitLab Premium","Package:P2","UX","backend","devops::package","direction","frontend","group::package registry","missed-deliverable","missed:12.5","missed:12.6","missed:12.7","package:active","type::feature","workflow::production"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":4087042,"username":"nkipling","name":"Nick Kipling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087042/avatar.png","web_url":"https://gitlab.com/nkipling"}],"author":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"type":"ISSUE","assignee":{"id":4087042,"username":"nkipling","name":"Nick Kipling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4087042/avatar.png","web_url":"https://gitlab.com/nkipling"},"user_notes_count":34,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33596","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33596","notes":"https://gitlab.com/api/v4/projects/278964/issues/33596/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33596/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33596","relative":"#33596","full":"gitlab-org/gitlab#33596"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1244,"epic":{"id":6541,"iid":1244,"title":"Make the Package and Container registries easier to use","url":"/groups/gitlab-org/-/epics/1244","group_id":9970,"human_readable_end_date":"Feb 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25700362,"iid":33590,"project_id":278964,"title":"Investigate adding NuGet to the GitLab Package Registry","description":"### Problem to solve\nThe goal of the Package group is to build a set of features that, within three years, will allow ninety percent of our customers to store all of their packages in GitLab. In order to achieve that goal, we must provide support for the most commonly used package managers for our users. This [ever-growing list](https://gitlab.com/groups/gitlab-org/-/epics/1245) requires that we are able to add support for new formats in a timely manner. \n\nAs a team, we have decided that in order to de-risk this work that we need time for engineers to investigate the documentation, APIs and overall feasibility of adding support for a new format.\n\n.NET developers need a mechanism to create, share, and consume packages that contain compiled code and other content in projects that consume these packages. For .NET, the Microsoft-supported mechanism for sharing code is NuGet, which defines how packages for .NET are created, hosted, and consumed, and provides the tools for each of those roles.\n\nThis issue is to investigate and familiarize ourselves with the NuGet and .NET documentation so that we can streamline the development process in the subsequent milestone. \n\n### Proposal\nReview the [NuGet MVC proposal](https://gitlab.com/gitlab-org/gitlab/issues/20050) and corresponding [NuGet](https://docs.microsoft.com/en-us/nuget/api/overview)/[.NET](https://docs.microsoft.com/en-us/dotnet/standard/) documentation to better understand the requirements and functionality. Go through the process of installing and using NuGet to gain a technical understanding of the effort involved so we have a clear path forward for development.\n\nThis work should be time-boxed into no more than a few days. If after a few days the package manager still has a high degree of unknowns, it should be noted and re-evaluated rather than consuming more time. The engineer doing this investigation should share their technical notes and findings in this issue so the engineer(s) that work on the implementation don't have to go through the same process of discovering new information.\n\n### Further details\n- One option that we are considering as an MVC is to only show the feed for users at the project level, so they can better understand which packages are being used, but not necessarily have their own NuGet registry hosted on GitLab. \n\n#### NuGet Commands (MVC)\n\n##### Configuration and Authentication\n- [`nuget config`](https://docs.microsoft.com/en-us/nuget/reference/cli-reference/cli-ref-config): Gets or sets NuGet configuration values. The user will configure NuGet based on GitLab documentation\n- [`nuget setapikey`](https://docs.microsoft.com/en-us/nuget/reference/cli-reference/cli-ref-setapikey): Saves an API key for a given package source when that package source requires a key for access. The user will use their GitLab personal access token for authentication.\n\n##### Create, publish and consume\n- [`nuget pack`](https://docs.microsoft.com/en-us/nuget/reference/cli-reference/cli-ref-pack): Creates a NuGet package from a .nuspec or project file. When running on Mono, creating a package from a project file is not supported.\n- [`nuget push`](https://docs.microsoft.com/en-us/nuget/reference/cli-reference/cli-ref-push): Publishes a package to a package source.\n- [`nuget list`](https://docs.microsoft.com/en-us/nuget/reference/cli-reference/cli-ref-list): Displays packages from a given source.\n- [`nuget delete`](https://docs.microsoft.com/en-us/nuget/reference/cli-reference/cli-ref-delete): Removes or unlists a package from a package source.\n\n##### NuGet Commands (Beyond the MVC)\n- [`nuget spec`](https://docs.microsoft.com/en-us/nuget/reference/cli-reference/cli-ref-spec): Generates a .nuspec file, using tokens if generating the file from a Visual Studio project.\n- [`nuget update`](https://docs.microsoft.com/en-us/nuget/reference/cli-reference/cli-ref-update): Updates a project's packages to the latest available versions. Not supported when running on Mono.\n- [`nuget restore`](https://docs.microsoft.com/en-us/nuget/reference/cli-reference/cli-ref-restore): Restores all packages referenced by the package management format in use. When running on Mono, restoring packages using the PackageReference format is not supported.\n\n##### Competitor Examples\n- [JFrog's NuGet Integration](https://www.jfrog.com/confluence/display/RTF/NuGet+Repositories)\n- [Sonatype's NuGet Integration](https://help.sonatype.com/repomanager3/formats/nuget-repositories)\n\n### Links / references\n- [Microsoft NuGet Docs](https://docs.microsoft.com/en-us/nuget/what-is-nuget)\n- [NuGet v3 API](https://docs.microsoft.com/en-us/nuget/api/overview)\n- [https://api.nuget.org/v3/index.json](https://api.nuget.org/v3/index.json)\n- [Mono (for running nuget.exe on mac/linux)](https://www.mono-project.com/docs/getting-started/mono-basics/)\nries)\n\n# Investigation Findings:\n\n* Vocabulary: \"Feed\" seems to be used in different way but seems to always be what we call the package registry in GitLab. The `nuget` CLI use the term \"Source\"\n* Different clients but all will call `nuget` for main functions. Also the `nuget` configuration file is used across the different clients. Example: I added my local dummy Source to `nuget` and then I opened Visual Studio. My local Source was properly listed as a NuGet Feed.\n* Packages are searched across all Sources/Feeds or the pull command can be scoped to a specific Source/Feed.\n* The [NuGet Server API](https://docs.microsoft.com/en-us/nuget/api/overview#resources-and-schema) defines 4+1 services as required: (services as in \"nuget services\". Nuget services can handle 1 or many urls)\n  * The Service Index\n  * The Search Service\n  * The Push/Delete Service\n  * The Package Metadata Service\n  * The Package Content Service\n* A total of 9 requests have to be handled. One seems to be optional.\n  * This translates to 9 Grape API endpoints to implement.\n\n## Authentication\n\n* The main authentication mechanism is a http basic auth but the Source/Feed has to be under https.\n* Should be compatible with GitLab username + token.\n* For the Push Service an additional authentication mechanism is available: an API token. This token is sent along the push request as a custom http header: `X-NuGet-ApiKey`. This could be used for the CI_JOB_TOKEN (see below).\n\n## Variables used in this comment\n\nFor a given package `MyCompany.MyPackage.1.0.0Beta.nupkg`, here are what the API docs uses:\n\n* `api_base_url`: The base url. For this API, it should be something like `/api/v4/projects/40/packages/nuget`\n* `XX_service_url`: The service url for service XXX as returned by the Service Index.\n* `ID`: `MyCompany.MyPackage`\n* `Version`: `1.0.0Beta`\n* `LOWER_ID`: `mycompany.mypackage`\n* `LOWER_VERSION`: `1.0.0beta`\n\n## The Service Index\n\n* https://docs.microsoft.com/en-us/nuget/api/service-index\n* Used as entry point when a private Source/Feed is added.\n* Aggressively cached by clients\n\n### GET {api_base_url}/index.json\n\n* Simple json describing which services are available and what are their urls.\n\n## The Search Service\n\n* https://docs.microsoft.com/en-us/nuget/api/search-query-service-resource\n* Used by Visual Studio. (search not available in `nuget`)\n\n### GET {search_service_url}?q={QUERY}\u0026skip={SKIP}\u0026take={TAKE}\u0026prerelease={PRERELEASE}\u0026semVerLevel={SEMVERLEVEL}\n\n* Parameters\n  * `q` the search term. Server implementation is free to apply this filter on any field. Example: the search term can be applied to the name **or** the name and the description of a package, etc.\n  * `skip` pagination parameter. This is the offset. Default to 0\n  * `take` pagination parameter. This is the number of entries per page. Server implementation can impose a max value\n  * `prerelease` to include prerelease packages or not\n  * `semVerLevel` to include SemVer 2.0.0 packages\n\n## The Push/Delete Service\n\n* https://docs.microsoft.com/en-us/nuget/api/package-publish-resource\n* Can be authenticated through a custom http header.\n\n### PUT {push_service_url}\n\n* The NuGet (compressed) archive is sent without any additional parameters.\n* :warning: This means that this request has no metadata available. In short, we get a compressed archive and that's it.\n* :warning: The backend will need to extract and inspect this compressed archive. Since this can take some time to do, this extraction should be done in a background job.\n\nLog excerpt:\n\n```\n$ nuget push Bananas.1.0.0.nupkg -Source \"local\"\nWARNING: No API Key was provided and no API Key could be found for 'http://localhost:4000/api/v4/projects/40/packages/nuget'. To save an API Key for a source use the 'setApiKey' command.\nPushing Bananas.1.0.0.nupkg to 'http://localhost:4000/api/v4/projects/40/packages/nuget'...\n  PUT http://localhost:4000/api/v4/projects/40/packages/nuget/\n  Created http://localhost:4000/api/v4/projects/40/packages/nuget/ 38ms\nYour package was pushed.\n```\n\n### DELETE {push_service_url}/{ID}/{VERSION}\n\n* Interpretation left to the server implementation\n  * NuGet.org and github unlists the package but archives are still available for pulling.\n  * Can be a hard delete. :warning: This can easily break project builds.\n\n### POST {push_service_url}/{ID}/{VERSION}\n\n* Relist a previously unlisted package\n* No body request\n\n## The Package Metadata Service\n\n* https://docs.microsoft.com/en-us/nuget/api/registration-base-url-resource\n* The most complex endpoint\n* Not only metadata is listed but also :warning: **dependencies**\n\n### GET {metadata_service_url}/{LOWER_ID}/index.json\n\n* bulk listing of all metadata for all available versions\n* the json for the metadata is quite complex (https://docs.microsoft.com/en-us/nuget/api/registration-base-url-resource#sample-response-1)\n* can be broken into pages. (I didn't find an example for this :/)\n* Uses the `LOWER_ID` and `LOWER_VERSION`\n\n### GET {metadata_service_url}/{LOWER_ID}/{VERSION}.json\n\n* similar response as above but for a given version\n* undocumented but implemented by github\n* not sure that this url is used by `nuget` or Visual Studio (I didn't see this request fired)\n\n## The Package Content Service\n\n* https://docs.microsoft.com/en-us/nuget/api/package-base-address-resource\n* Service to get the archive but also some metadata (see below)\n* Uses the `LOWER_ID` and `LOWER_VERSION`\n\n### GET {content_service_url}/{LOWER_ID}/index.json\n\n* Simple json to with a single array: all available versions.\n\n### GET {content_service_url}/{LOWER_ID}/{LOWER_VERSION}/{LOWER_ID}.{LOWER_VERSION}.nupkg\n\n* The archive of the given package\n* Yes LOWER_ID and LOWER_VERSION are duplicated in the url :thinking:\n\n### GET {content_service_url}/{LOWER_ID}/{LOWER_VERSION}/{LOWER_ID}.nuspec\n\n* The `nuspec` file of the archive\n* Not called during my tests but documented\n* Not implemented by github (404 Not Found)\n\n# Proposed MVC Scope\n\n* Being able to add a project NuGet registry url to `nuget` in an authenticated manner using GitLab username + token.\n* Being able to push a NuGet package (`nuget push`)\n* Being able to pull a NuGet package (`nuget install`)\n* Being able to delete a NuGet package (`nuget delete`)\n* Ideally no changes on the FE side for the first version\n\nThe 5 endpoints should be enough to implement the MVC Scope for the `nuget`, `dotnet` and Visual Studio clients.\n\n# Naming convention\n\nSince the MVC scope is for the project level, I don't think we don't need a naming convention. For future versions (if we implement the instance level access for example), we can enforce the use of `.` as a separator to identify a Group: `MyGroup.MyPackage`.\n\n# Pain points\n\n* The metadata of a package will need to be available in the database as it is heavily used by the Package Metadata Service.\n* The upload is a simple archive upload. No parameters about the metadata.\n* It looks like we will need to open the archive and extract the metadata to have it available within the GitLab database. This should be done in a background job.\n* Good news: the dependency models implemented in !14263 can be reused.\n* The Search Service uses a custom pagination parameters set. Those will need to be translated into what we use in the code.\n\n# Opportunities\n\n* We could implement this as an internal API as suggested in #35798\n* The Metadata extraction job could be implemented in a generic way to be easily ported to other package types.\n\n# Proposed MRs breakdown\n\n1. API Skeleton + The Service Index + authentication + feature flag (weight 1)\n1. Workhorse updates to handle the upload url (weight 1)\n1. The Push/Delete Service (weight 2)\n1. Nuget package metadata extraction job + db changes to support metadata and dependencies information (weight 3)\n1. The Package Metadata Service (weight 2)\n1. The Search Service (weight 2)\n1. The Package Content Service (weight 1)\n\nThe critical path would be: 1. 2. -\u003e 3. -\u003e 4. 5. 6. 7.\n\n# Work estimation\n\nFrom my initial estimation:\n\n* I don't think that it's feasible one milestone with only 1 BE.\n* With 2 BEs, it seems doable but tight.\n* Looking at the critical path above, we see that we will need at least the Service index and the upload MRs merged (MRs 1. 2. and 3.) to be able to parallelize the remaining work.\n* Since there are still some unknowns (for example, the db table design to properly store the metadata), a feature flag would be a wise path (see Questions).\n\n# Test Scenarios\n\n* Add Feed, push and pull from `nuget` (macOS + Windows)\n* Add Feed, pull and search from Visual Studio (macOS + Windows)\n* Push package from `dotnet command` (macOS + Windows)\n* (Bonus: have a quick check if chocolatey packages work with the MVC (Windows))\n\nI should be able to test the API endpoints on my Windows machine if necessary.\n\n# Future changes\n\n* CI_JOB_TOKEN job authentication so that a CI job can push a package\n* FE extracted metadata + dependencies integration (this might need some BE effort on the packages API)\n* Metadata extraction job can lead to several interesting features:\n  * Files within the archive available for scanners (Vulnerabilites, Virus Scanner, others)\n  * Open this extraction to other packages type. Example, what if we expose the dependencies of an NPM package in the UI?\n\n# References\n\n* https://docs.microsoft.com/en-us/nuget/api/overview\n* https://www.nuget.org\n* UX on nuget for a given package (for @icamacho): https://www.nuget.org/packages/Castle.Core/\n* Dummy server to inspect NuGet requests locally: https://gitlab.com/10io/nuget-api-server-faker\n\nFrom the chocolatey demo\n\n* https://chocolatey.org\n* UX on chocolatey for a given package (for @icamacho): https://chocolatey.org/packages/Firefox (notice the `Virus Scan Results`)\n* Several users mentioned Sleet: https://github.com/emgarten/Sleet\n  * Takes a collection of nupkg files, organize them and generate static json files for the endpoints.\n  * With this structure of files, users can then host them on Azure or S3 and thus have a serverless feed.","state":"closed","created_at":"2019-10-07T20:21:06.662Z","updated_at":"2021-10-26T18:05:20.045Z","closed_at":"2019-11-15T17:40:59.489Z","closed_by":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"labels":["Category:Package Registry","Deliverable","GitLab Premium","NuGet Repository","backend","customer","devops::package","group::package registry","needs investigation"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":24,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33590","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33590","notes":"https://gitlab.com/api/v4/projects/278964/issues/33590/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33590/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33590","relative":"#33590","full":"gitlab-org/gitlab#33590"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2271,"epic":{"id":15540,"iid":2271,"title":"GitLab NuGet (.NET) Repository","url":"/groups/gitlab-org/-/epics/2271","group_id":9970,"human_readable_end_date":"Jan 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25697103,"iid":33587,"project_id":278964,"title":"Show blocking  epics in the roadmap","description":"### Problem to solve\n\u003e As a User of Roadmaps,\n\n\u003e I need to see dependencies displayed on the Roadmap\n\n\u003e So I can ensure the sequence of work is being executed properly\n\n### Intended users\n\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n\n### Proposal\n\nFor an MVC, we'd mimic the behavior available in issue boards:\n\n* Display a `blocked` icon to the left of the epic title\n* Display a popover with details of the blocking item on hover/click of `blocked` icon\n\nShowing issues in the roadmap and arrows between objects can be follow on iterations.\n\n### Competitive Analysis\n\nBehavior for GitLab issue boards\n\n![Screen_Shot_2022-04-22_at_9.26.10_AM](/uploads/b3184e6b2a960606bac368763667d8a6/Screen_Shot_2022-04-22_at_9.26.10_AM.png)\n\n- Jira - https://confluence.atlassian.com/jirasoftwareserver0817/dependencies-1072472576.html\n- Aha - https://www.aha.io/support/roadmaps/strategic-roadmaps/releases-and-schedules/release-dependencies \n- Target Process - https://www.targetprocess.com/guide/working-with-entities/relations-depencencies/relations-as-arrows-on-views/ \n- Digital.ai - https://docs.digital.ai/bundle/agility-onlinehelp/page/Content/Digital.ai_Agility/Dependency_Board.htm","state":"closed","created_at":"2019-10-07T18:09:31.527Z","updated_at":"2022-12-07T13:19:50.283Z","closed_at":"2022-10-04T00:17:32.008Z","closed_by":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"labels":["#field-fyi","Category:Portfolio Management","Stretch","UX","customer","design-weight::8","devops::plan","feature::addition","frontend","group::product planning","release post item","release post item::in review","roadmaps","section::dev","type::feature","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":4478389,"username":"kokeefe","name":"Keanon O'Keefe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4478389/avatar.png","web_url":"https://gitlab.com/kokeefe"},"type":"ISSUE","assignee":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"user_notes_count":51,"merge_requests_count":0,"upvotes":15,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33587","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33587","notes":"https://gitlab.com/api/v4/projects/278964/issues/33587/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33587/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33587","relative":"#33587","full":"gitlab-org/gitlab#33587"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":757,"epic":{"id":3389,"iid":757,"title":"View epic relationships in roadmap","url":"/groups/gitlab-org/-/epics/757","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25696241,"iid":33586,"project_id":278964,"title":"Cancelling a discussion comment that has text in it should prompt user before cancelling","description":"### Problem to solve\n\nI was writing a lengthy discussion comment on a MR and accidentally hit the cancel button. I now have to retype everything I wrote. It would be fantastic if GitLab would warn a user before cancelling if the user has typed text into a discussion, especially if it's a lengthy one\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\n\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n* [Dana (Data Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#dana-data-analyst)\n\nPersonas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?--\u003e\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements\nIf this feature requires changing permissions, this document https://docs.gitlab.com/ee/user/permissions.html must be updated accordingly. --\u003e\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n### What is the type of buyer? \n\n\u003c!-- Which leads to: in which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\n\n### Links / references","state":"closed","created_at":"2019-10-07T17:43:39.215Z","updated_at":"2020-05-05T20:10:26.885Z","closed_at":"2020-05-05T20:10:26.820Z","closed_by":{"id":3199302,"username":"dmishunov","name":"Denys Mishunov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d85e45af29611ac2c1395e3c3d6ec5d6?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmishunov"},"labels":["devops::create","frontend","group::source code","missed:12.10","missed:12.5","missed:12.6","missed:12.7","missed:12.8","missed:12.9","type::feature"],"milestone":{"id":991112,"iid":42,"group_id":9970,"title":"13.0","description":"","state":"closed","created_at":"2019-09-04T15:20:39.024Z","updated_at":"2020-10-08T12:00:55.725Z","due_date":"2020-05-17","start_date":"2020-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/42"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":3,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33586","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33586","notes":"https://gitlab.com/api/v4/projects/278964/issues/33586/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33586/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33586","relative":"#33586","full":"gitlab-org/gitlab#33586"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25692985,"iid":33580,"project_id":278964,"title":"[VSA] Remove legacy backend code after deprecation","description":"## Summary\n\nMerge Request !16775 introduced a rebuilt backend for Cycle Analytics, however it included [extra code to be compatible with the legacy Cycle Analytics feature](https://gitlab.com/gitlab-org/gitlab/merge_requests/16775/diffs#6c1aff793e288e33581de3369f333b8aa888428f_0_38).  The legacy Cycle Analytics feature is being migrated to the new Analytics workspace (and new backend) under Issue #30079, so that extra code will become un-used and can be eliminated.  __This is blocked by #30079.__\n\n## Improvements\n\nRemoving the un-used code will reduce complexity and risk of bugs, and possibly also maintenance cost.\n\n## Risks\n\nThere is no known risk of breakage as a result of this change, as the code being removed is un-used.\n\n## Involved components\n\n- app/models/concerns/analytics/cycle_analytics/stage.rb\n- lib/gitlab/analytics/cycle_analytics/records_fetcher.rb\n- spec/support/shared_examples/cycle_analytics_stage_shared_examples.rb","state":"closed","created_at":"2019-10-07T16:21:53.539Z","updated_at":"2021-01-13T23:46:27.635Z","closed_at":"2021-01-07T08:20:26.840Z","closed_by":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"labels":["backend","backstage [DEPRECATED]","devops::manage","group::optimize","section::dev","workflow::blocked"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33580","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33580","notes":"https://gitlab.com/api/v4/projects/278964/issues/33580/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33580/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33580","relative":"#33580","full":"gitlab-org/gitlab#33580"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5194,"epic":{"id":180134,"iid":5194,"title":"[VSA] Refactor project-level feature to use group-level code","url":"/groups/gitlab-org/-/epics/5194","group_id":9970,"human_readable_end_date":"Sep 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25684030,"iid":33562,"project_id":278964,"title":"Blobs search API degrades with big matches count","description":"[Blobs search API's](https://docs.gitlab.com/ee/api/search.html#scope-blobs)  response time appears to be slow and becomes even slower if the number of code matches is quite big(8000+). Below the results of searching blobs against 10k environment: \n\n```\nResults summary:\n\nEnvironment:    10k (12.3.3-ee 47e969b011f)\nScenario:       60s_200rps\nDate:           2019-10-05\nRun Time:       63.34s (Start: 15:24:19 UTC, End: 15:25:22 UTC)\n\nNAME                                 | DURATION | P95        | RPS                 | SUCCESS RATE   | RESULT\n-------------------------------------|----------|------------|---------------------|----------------|-------\napi_v4_projects_project_search_blobs | 60.0s    | 18688.91ms | 10.33/s (\u003e160.00/s) | 100.00% (\u003e95%) | Failed\n```\n\n\u003cdetails\u003e  \n\u003csummary\u003eResults of the test with search query that has 300+ matches\u003c/summary\u003e \n\n```\n Results summary:\n\nEnvironment:    10k (12.3.3-ee 47e969b011f)\nScenario:       60s_200rps\nDate:           2019-10-05\nRun Time:       63.25s (Start: 15:49:00 UTC, End: 15:50:03 UTC)\n\nNAME                                 | DURATION | P95       | RPS                  | SUCCESS RATE   | RESULT\n-------------------------------------|----------|-----------|----------------------|----------------|-------\napi_v4_projects_project_search_blobs | 60.0s    | 1377.86ms | 153.75/s (\u003e160.00/s) | 100.00% (\u003e95%) | Failed\n```\n\u003c/details\u003e\n\nIn addition, this search request results in high CPU usage spike, an example of the test runs below:\n\n![Screenshot_2019-10-05_at_19.06.39](/uploads/c6a76f113b29ad84fd80f5059860f345/Screenshot_2019-10-05_at_19.06.39.png)\n\nGrafana dashboard results: http://34.73.165.75/-/grafana/d/tVdO8YIWz/server-performance?orgId=1\u0026from=1570290762899\u0026to=1570291662899\u0026refresh=10s  (To be able to see it, please sign up)\n\n\n#### Other sources of truth:\n\n - Users complaints in [Hacker News forum](https://news.ycombinator.com/item?id=20922250)\n - [Customer's logs](https://docs.google.com/spreadsheets/d/1m1Jpk6nFf4FnIp47-GwJ84iFuk1FTeLGGe2CBNR5e50/edit#gid=0) \n\n\n### Steps to reproduce\n\n1. Check out the [Performance Toolkit](https://gitlab.com/gitlab-org/quality/performance)\n1. Update `searchQuery` from ‚Äútest‚Äù(300+ matches) to ‚Äúupdate‚Äù(8,500+ matches) in ~~k6/tests/api_v4_projects_project_search_blobs.js~~ `k6/tests/api/api_v4_projects_project_search_blobs.js`\n1. Run the specific test with the `run-k6` command.  For example against the 10k environment you would run this following from the project root: `ACCESS_TOKEN=\"\" ./run-k6 -e environments/10k.json -s scenarios/60s_200rps.json -t tests/api/api_v4_projects_project_search_blobs.js`, where `ACCESS_TOKEN` is a valid GitLab Personal Access Token for the specified environment(10k in this case). The token should come from a User that has admin access for the project(s) to be tested and have API and read_repository permissions.\n1. If you're seeking to run the test against your own environment the [Toolkit's documentation has details on how to achieve this](https://gitlab.com/gitlab-org/quality/performance/blob/master/docs/k6.md).\n\n### What is the current *bug* behavior?\n\nThe API will slow depending on the number of matches in the project code.\n\n### What is the expected *correct* behavior?\n\nThe API responds quickly since the API only returns 20 results via pagination.","state":"closed","created_at":"2019-10-07T12:38:38.888Z","updated_at":"2022-05-31T11:54:25.203Z","closed_at":"2020-03-05T22:27:07.086Z","closed_by":{"id":4888751,"username":"changzhengliu","name":"Changzheng Liu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4888751/avatar.png","web_url":"https://gitlab.com/changzhengliu"},"labels":["Category:Gitaly","Category:Global Search","Quality:performance-issues","api","bug::performance","devops::data_stores","group::global search","performance-refinement","priority::3","release post item","severity::3","type::bug","workflow::verification"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":5054237,"username":"dgruzd","name":"Dmitry Gruzd","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054237/avatar.png","web_url":"https://gitlab.com/dgruzd"}],"author":{"id":4477602,"username":"niskhakova","name":"Nailia Iskhakova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477602/avatar.png","web_url":"https://gitlab.com/niskhakova"},"type":"ISSUE","assignee":{"id":5054237,"username":"dgruzd","name":"Dmitry Gruzd","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054237/avatar.png","web_url":"https://gitlab.com/dgruzd"},"user_notes_count":35,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33562","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33562","notes":"https://gitlab.com/api/v4/projects/278964/issues/33562/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33562/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33562","relative":"#33562","full":"gitlab-org/gitlab#33562"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1506,"epic":{"id":8514,"iid":1506,"title":"Search Performance","url":"/groups/gitlab-org/-/epics/1506","group_id":9970,"human_readable_end_date":"Sep 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25679950,"iid":33552,"project_id":278964,"title":"Returning reason for failed job in API response","description":"### Release Notes\n\nWhen you have setup your `.gitlab-ci.yml` to retry failed jobs and they exceed that number it can be hard to gather data about why those jobs are failing from the API.\n\nNow you can see the `failure_reason` of a job in the Jobs API to more easily gather data about jobs that are failing.\n\n### Problem to solve\n\nCurrently you can specify in `.gitlab-ci.yml` when a job needs to be [retried](https://docs.gitlab.com/ee/ci/yaml/#retry) based on the condition of why the job failed, by specifying values for `when`.\n\nWhen you look at a failed [job via the API](https://docs.gitlab.com/ee/api/jobs.html), it doesn't state why it failed, e.g. `script_failure`.\n\nThank you `@albert.vacacintora` for this contribution!\n\n### Further details\n\nIn the response from an API call to retrieve details from a failed job, it would be beneficial if the response includes the reason for failure, such as:\n\n\n* unknown_failure\n* script_failure\n* api_failure\n* stuck_or_timeout_failure\n* runner_system_failure\n* missing_dependency_failure\n* runner_unsupported\n\n### Links / references\n\n[ZD#134393](https://gitlab.zendesk.com/agent/tickets/134393)(GitLab internal)","state":"closed","created_at":"2019-10-07T10:33:44.420Z","updated_at":"2021-12-03T22:02:49.069Z","closed_at":"2021-12-02T21:36:16.367Z","closed_by":{"id":4512666,"username":"jheimbuck_gl","name":"James Heimbuck","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8dd2ef9c1cacb6e80d7ca47db6f0ce22?s=80\u0026d=identicon","web_url":"https://gitlab.com/jheimbuck_gl"},"labels":["Category:Continuous Integration","[deprecated] Accepting merge requests","customer","devops::verify","group::pipeline execution","internal customer","release post item","release post item::in review","section::ops","type::feature","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[],"author":{"id":4374685,"username":"nelbacha","name":"Nourdin el Bacha","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7ccb111fe4fc66151a0f0480e6b3bcca?s=80\u0026d=identicon","web_url":"https://gitlab.com/nelbacha"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":12,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33552","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33552","notes":"https://gitlab.com/api/v4/projects/278964/issues/33552/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33552/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33552","relative":"#33552","full":"gitlab-org/gitlab#33552"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25674557,"iid":33545,"project_id":278964,"title":"Geo: put unique constraint on design_registry.project_id","description":"In !17621 the `design_registry` table was added, but there is no unique constraint on the `project_id` index.\n\nSee the [discussion](https://gitlab.com/gitlab-org/gitlab/merge_requests/17621#note_226694192).","state":"closed","created_at":"2019-10-07T08:13:08.906Z","updated_at":"2019-12-16T14:46:54.905Z","closed_at":"2019-10-14T12:25:59.047Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://secure.gravatar.com/avatar/487c4c74f7e1714b5a270e00d4735e84?s=80\u0026d=identicon","web_url":"https://gitlab.com/abrandl"},"labels":["Category:Geo Replication","Enterprise Edition","database","devops::systems","group::geo","maintenance::refactor"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"}],"author":{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"},"type":"ISSUE","assignee":{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"},"user_notes_count":4,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33545","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33545","notes":"https://gitlab.com/api/v4/projects/278964/issues/33545/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33545/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33545","relative":"#33545","full":"gitlab-org/gitlab#33545"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1633,"epic":{"id":10057,"iid":1633,"title":"Geo supports design repository replication","url":"/groups/gitlab-org/-/epics/1633","group_id":9970,"human_readable_end_date":"Feb 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25672744,"iid":33543,"project_id":278964,"title":"Videos are not stopped when submitting comment","description":"### Steps to reproduce\n\n- add video to comment\n- open preview tab\n- start video\n- submit comment\n\n### Example Project\n\nhttps://gitlab.com/reproduction-group/test-project/issues/2#note_226671910\n\n### What is the current *bug* behavior?\n\nvideo keeps playing and there is no way to stop it (only page reload):\n\n![Screen_Recording_2019-10-07_at_09.22.07](/uploads/1b49a4d5e60dae8810296afeb245da4a/Screen_Recording_2019-10-07_at_09.22.07.mp4)\n\n### What is the expected *correct* behavior?\n\nVideo is stopped similar to switching from `preview` to `write` tab.","state":"closed","created_at":"2019-10-07T07:25:47.951Z","updated_at":"2020-01-18T07:06:00.757Z","closed_at":"2020-01-17T17:12:36.338Z","closed_by":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"labels":["Community contribution","Deliverable","devops::plan","frontend","group::project management","issues","missed-deliverable","missed:12.5","priority::4","reproduced on GitLab.com","severity::4","type::bug","workflow::verification"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33543","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33543","notes":"https://gitlab.com/api/v4/projects/278964/issues/33543/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33543/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33543","relative":"#33543","full":"gitlab-org/gitlab#33543"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25663663,"iid":33488,"project_id":278964,"title":"Remove first_class_vulnerabilities feature flag","description":"### Proposal\n\nWhen the [First Class Vulnerabilities](https://gitlab.com/gitlab-org/gitlab/issues/13561) passed the MVC stage, the `first_class_vulnerabilities` feature flag has to be removed.\n\n### Related Issues:\n* Docs: https://gitlab.com/gitlab-org/gitlab/issues/34213\n\n### Execution\n\n- [x] Remove the code branches corresponding to the \"disabled\" state of the feature flag\n- [x] Remove tests for the \"disabled\" state of the feature flag\n- [x] Remove comments from the code that have a `TODO:` reference to this issue","state":"closed","created_at":"2019-10-06T16:13:19.446Z","updated_at":"2020-06-19T11:09:56.302Z","closed_at":"2020-06-19T02:51:18.792Z","closed_by":{"id":480804,"username":"thiagocsf","name":"Thiago Figueir√≥","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"labels":["Category:Vulnerability Management","Deliverable","Enterprise Edition","[deprecated] Accepting merge requests","backend","backend-weight::5","backstage [DEPRECATED]","devops::govern","feature flag","frontend","frontend-weight::2","group::threat insights","workflow::production"],"milestone":{"id":1112145,"iid":47,"group_id":9970,"title":"13.1","description":"","state":"closed","created_at":"2020-01-03T12:28:30.160Z","updated_at":"2020-10-08T12:01:07.361Z","due_date":"2020-06-17","start_date":"2020-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/47"},"assignees":[],"author":{"id":3337413,"username":"vzagorodny","name":"Victor Zagorodny","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/56410d67aa18e03b13e1585d436bf313?s=80\u0026d=identicon","web_url":"https://gitlab.com/vzagorodny"},"type":"ISSUE","assignee":null,"user_notes_count":28,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33488","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33488","notes":"https://gitlab.com/api/v4/projects/278964/issues/33488/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33488/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":"https://gitlab.com/api/v4/projects/278964/issues/28212"},"references":{"short":"#33488","relative":"#33488","full":"gitlab-org/gitlab#33488"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3040,"epic":{"id":38749,"iid":3040,"title":"Standalone Vulnerabilities - Fast follow-up","url":"/groups/gitlab-org/-/epics/3040","group_id":9970,"human_readable_end_date":"Jun 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25637477,"iid":33466,"project_id":278964,"title":"[FE] Step 3: Add mapping version to ElasticSearch indices in the Admin UI","description":"This is a ~frontend placeholder for issue https://gitlab.com/gitlab-org/gitlab/issues/14620.","state":"closed","created_at":"2019-10-04T18:46:39.382Z","updated_at":"2022-07-14T22:15:58.850Z","closed_at":"2022-07-14T22:15:58.826Z","closed_by":{"id":4888751,"username":"changzhengliu","name":"Changzheng Liu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4888751/avatar.png","web_url":"https://gitlab.com/changzhengliu"},"labels":["Category:Global Search","Enterprise Edition","GitLab Starter","[deprecated] Accepting merge requests","advanced search","devops::data_stores","frontend","group::global search","section::enablement","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":2935693,"username":"phikai","name":"Kai Armstrong","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2c5d6a63b41cbeb3ea4cccda82e758e1?s=80\u0026d=identicon","web_url":"https://gitlab.com/phikai"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33466","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33466","notes":"https://gitlab.com/api/v4/projects/278964/issues/33466/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33466/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33466","relative":"#33466","full":"gitlab-org/gitlab#33466"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25637454,"iid":33465,"project_id":278964,"title":"[BE] Step 3: Add mapping version to ElasticSearch indices in the Admin UI","description":"This is a ~backend placeholder for issue https://gitlab.com/gitlab-org/gitlab/issues/14620.","state":"closed","created_at":"2019-10-04T18:46:04.948Z","updated_at":"2022-05-31T11:54:26.402Z","closed_at":"2020-12-29T16:22:21.849Z","closed_by":{"id":5724558,"username":"JohnMcGuire","name":"John McGuire","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5724558/avatar.png","web_url":"https://gitlab.com/JohnMcGuire"},"labels":["Category:Global Search","Enterprise Edition","GitLab Starter","[deprecated] Accepting merge requests","advanced search","backend","devops::data_stores","group::global search","section::enablement","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":2935693,"username":"phikai","name":"Kai Armstrong","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2c5d6a63b41cbeb3ea4cccda82e758e1?s=80\u0026d=identicon","web_url":"https://gitlab.com/phikai"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33465","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33465","notes":"https://gitlab.com/api/v4/projects/278964/issues/33465/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33465/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33465","relative":"#33465","full":"gitlab-org/gitlab#33465"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25635992,"iid":33460,"project_id":278964,"title":"Web IDE does not create POSIX Compliant Files","description":"### Summary\n\nThe Web IDE does not create files that are POSIX compliant with regard to line endings. The POSIX compliant definition of a line is that it is terminated with a new line. https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap03.html#tag_03_206\n\nBecause of this other features inside of GitLab (like [MR Suggestions](https://gitlab.com/gitlab-org/gitlab/issues/32079)) don't work properly on the last line of files created in the Web IDE.\n\n### Steps to reproduce\n\nCreate a file in the Web IDE ending without an explicit return in the last line. The file is saved that way and a new line is not added.\n\n### Example Project\n\nThis [file](https://gitlab.com/phikai/my-public-test-project/blob/master/line-endings.md) was created in the Web IDE without that setting.\n\n### What is the current *bug* behavior?\n\nNo new line is created\n\n### What is the expected *correct* behavior?\n\nAn additional line should be there.\n\n### Relevant logs and/or screenshots\n\nRelevant comment thread of this and a fix for VS Code - https://gitlab.com/gitlab-org/gitlab/issues/32079#note_225082403","state":"closed","created_at":"2019-10-04T17:38:36.011Z","updated_at":"2020-10-14T13:06:16.426Z","closed_at":"2019-11-19T07:53:59.244Z","closed_by":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"labels":["Category:Web IDE","Deliverable","devops::create","frontend","group::editor","internal customer","priority::2","severity::3","type::bug","workflow::verification"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"}],"author":{"id":2935693,"username":"phikai","name":"Kai Armstrong","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2c5d6a63b41cbeb3ea4cccda82e758e1?s=80\u0026d=identicon","web_url":"https://gitlab.com/phikai"},"type":"ISSUE","assignee":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"user_notes_count":8,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33460","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33460","notes":"https://gitlab.com/api/v4/projects/278964/issues/33460/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33460/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33460","relative":"#33460","full":"gitlab-org/gitlab#33460"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25634483,"iid":33457,"project_id":278964,"title":"Add \"Last Activity Date\" to the Billable Members UI","description":"### Problem to solve\n\nThere is no way to view the Last Activity Date of your group members on .com (either through the GUI or via the API)\n\n### Intended users\n\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n\n### Further details\n\nSince we don't allow Admin access on .com, Group administrators need a good way to view the Last Activity Date of members in their group. Currently, you can sort users by Last Activity, but it doesn't show an actual date of that activity.\n\n### Proposal\n\n* Add a Last Activity Date field to the Group Member page \n* Add Last Activity Date to the Group Member API (being handled via https://gitlab.com/gitlab-org/gitlab/-/issues/297291)\n\n### Permissions and Security\n\nI believe the Last Activity Date is currently restricted to the Admin API, but it would make sense to add it to the Group Member API as well.\n\n\n### What does success look like, and how can we measure that?\n\nIf .com Group Owners are able to view their user's Last Activity Date.\n\n### What is the type of buyer? \n\nThis should be a Core feature. Everyone on .com should be able to effectively manage users in their Group.\n\n## Designs\n\nFind designs for the `Last Activity Date` in the non-expanded view here: https://gitlab.com/gitlab-org/gitlab/-/issues/217851/designs/Iteration2___Seat_usage_list_v2.png#note_510397627","state":"closed","created_at":"2019-10-04T16:36:54.301Z","updated_at":"2021-04-23T21:01:10.282Z","closed_at":"2021-03-09T08:21:09.386Z","closed_by":{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"},"labels":["#field-fyi","Deliverable","Engineering","[deprecated] Category:Utilization","customer","devops::fulfillment","frontend","group::utilization","link::parent issue","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":1233761,"iid":57,"group_id":9970,"title":"13.10","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.646Z","updated_at":"2022-04-21T07:22:00.171Z","due_date":"2021-03-17","start_date":"2021-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/57"},"assignees":[{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"}],"author":{"id":1228225,"username":"jwoods06","name":"John Woods","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1228225/avatar.png","web_url":"https://gitlab.com/jwoods06"},"type":"ISSUE","assignee":{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"},"user_notes_count":45,"merge_requests_count":0,"upvotes":8,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33457","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33457","notes":"https://gitlab.com/api/v4/projects/278964/issues/33457/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33457/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":"https://gitlab.com/api/v4/projects/278964/issues/321560"},"references":{"short":"#33457","relative":"#33457","full":"gitlab-org/gitlab#33457"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4547,"epic":{"id":121875,"iid":4547,"title":"GitLab.com Billable Members List","url":"/groups/gitlab-org/-/epics/4547","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":25631952,"iid":33449,"project_id":278964,"title":"Add previously selected card to multi-select move when `command` clicking after initial click","description":"- From !16317 \n\n- Dependent on https://gitlab.com/gitlab-org/gitlab/issues/32561\n\n#### Proposal\n  \nWe need to make sure that you can select an item and _then_ `command` click to select the others. Right now it only works if you hit `command` and then click the cards you want to move. I wasn't sure if I was the only person who works in that order so I made a quick poll on Slack - https://gitlab.slack.com/archives/C0259241E/p1570121496062500\n\nThe vast majority select an item and _then_ hit `command` to choose the rest of the files/items. Some occasionally do both.\n\n#### Poll and results\n\n\n| Option | Number of responses |\n| ------ | ------ |\n| :one: Click the file and then hit command and click the rest of the files you want, or | 31 |\n| :two: Hit command and then start clicking the files you want, or | 5 | \n| :three: Maybe a bit of both? | 10 | \n\n\n\n\nHere's what it currently looks like if you select a card and then hit `command`:\n \n\u003cimg src=\"/uploads/afc9ad5c91999270f8def46a2fa62f18/move-items.gif\" width=\"600px\"\u003e","state":"closed","created_at":"2019-10-04T15:07:56.630Z","updated_at":"2021-11-08T16:13:07.756Z","closed_at":"2021-09-15T21:47:46.699Z","closed_by":{"id":201566,"username":"annabeldunstone","name":"Annabel Dunstone Gray","state":"active","avatar_url":"https://secure.gravatar.com/avatar/85c0203926134720f9a9aa8c6e264c78?s=80\u0026d=identicon","web_url":"https://gitlab.com/annabeldunstone"},"labels":["Category:Team Planning","[deprecated] Accepting merge requests","boards","devops::plan","frontend","group::project management","priority::3","section::dev","severity::3","stale","type::bug","vintage","workflow::planning breakdown"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":201566,"username":"annabeldunstone","name":"Annabel Dunstone Gray","state":"active","avatar_url":"https://secure.gravatar.com/avatar/85c0203926134720f9a9aa8c6e264c78?s=80\u0026d=identicon","web_url":"https://gitlab.com/annabeldunstone"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33449","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33449","notes":"https://gitlab.com/api/v4/projects/278964/issues/33449/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33449/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33449","relative":"#33449","full":"gitlab-org/gitlab#33449"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25629009,"iid":33446,"project_id":278964,"title":"MR - \"Changes\" View - Toggle file not working properly","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nToggle is not working properly\n\n\n1. open a Merge Request in your browser\n1. go to \"changes\" tab\n1. try toggling a few files (small arrow on top left)\n1. only the first toggle works\n\n\n### Example Project\n\nHappens on any MR. just a random example:\nhttps://gitlab.com/gitlab-org/gitlab/merge_requests/18129/diffs\n\n\nDoes not toggle file tab\n\n### What is the expected *correct* behavior?\n\nShould toggle file tab\n\n### Relevant logs and/or screenshots\n\nhttps://i.imgur.com/KpPTM0Y.gifv\n(I am actively clicking and trying to toggle a file)\n\nVideo showing clicks:\nhttps://gitlab.com/gitlab-org/gitlab/issues/33446#note_238029332\n\n### Output of checks\n\nThis bug happens on GitLab.com","state":"closed","created_at":"2019-10-04T14:09:13.045Z","updated_at":"2020-12-07T16:48:16.679Z","closed_at":"2019-12-02T19:39:06.229Z","closed_by":{"id":2709171,"username":"jayswain","name":"Jay","state":"active","avatar_url":"https://secure.gravatar.com/avatar/9425e277e593759683640b83676c911c?s=80\u0026d=identicon","web_url":"https://gitlab.com/jayswain"},"labels":["Category:Code Review Workflow","[deprecated] Accepting merge requests","devops::create","frontend","group::code review","merge requests","priority::3","severity::4","type::bug"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[],"author":{"id":727723,"username":"lobosque","name":"Lucas Lobosque","state":"active","avatar_url":"https://secure.gravatar.com/avatar/75560e33e82f925cb9b3a485de4ab6fa?s=80\u0026d=identicon","web_url":"https://gitlab.com/lobosque"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/33446","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/33446","notes":"https://gitlab.com/api/v4/projects/278964/issues/33446/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/33446/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#33446","relative":"#33446","full":"gitlab-org/gitlab#33446"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null}]