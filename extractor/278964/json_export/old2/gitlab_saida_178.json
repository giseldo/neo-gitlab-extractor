[{"id":24695906,"iid":28725,"project_id":278964,"title":"Repository mirroring paused: The LFS objects download list couldn't be imported. Error: Request Entity Too Large","description":"### Summary\n\nGetting email with error `The LFS objects download list couldn't be imported. Error: Request Entity Too Large` for github \u003c-\u003e gitlab repository mirror. (Github to GitLab). Although the repository is only 430mb in size and we have other projects that exceeds 800mb in size that mirrors fine.\n\nMore importantly, the repository is actually syncing fine as all my commits came through as well as deployed fine. The email that was sent out more likely is a false alarm.\n\n### Steps to reproduce\n\n(How one can reproduce the issue - this is very important)\n\n### What is the current *bug* behavior?\n\nGetting email with entity too large issue\n\n### What is the expected *correct* behavior?\n\nnot getting an email\n\n### Relevant logs and/or screenshots\n\n![image](/uploads/09e5bf42f577e32ca2c07749f7dfeae4/image.png)\n\n### Output of checks\n\nThis bug happens on GitLab.com","state":"closed","created_at":"2019-05-15T05:06:24.947Z","updated_at":"2023-01-09T09:15:22.794Z","closed_at":"2020-03-12T22:30:48.467Z","closed_by":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"labels":["Category:Source Code Management","Deliverable","Git LFS","backend","devops::create","group::source code","mirror","missed-SLO","priority::2","regression","regression:11.11","section::dev","severity::2","type::bug","workflow::in review"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"}],"author":{"id":2674238,"username":"samuel.lin","name":"Samuel Lin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2674238/avatar.png","web_url":"https://gitlab.com/samuel.lin"},"type":"ISSUE","assignee":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"user_notes_count":19,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28725","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28725","notes":"https://gitlab.com/api/v4/projects/278964/issues/28725/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28725/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28725","relative":"#28725","full":"gitlab-org/gitlab#28725"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695849,"iid":28703,"project_id":278964,"title":"Invalid UTF-8 is not displaying in Project and error loading commits","description":"### Summary\n\n(Summarize the bug encountered concisely)\n\n### Steps to reproduce\n\n1. Open https://gitlab.com/testpilot/invalid-utf8\n1. You will not see the **file name**\n1. Load this commit https://gitlab.com/testpilot/invalid-utf8/commit/2b4b8850381b0815e190e7c5a447a9b627762e18\n1. You will get **`500`**\n\n### Example Project\n\nhttps://gitlab.com/labpilot/invalid-utf8\n\n### Relevant logs and/or screenshots\n\n![Screenshot](https://gitlab.com/yo/issues/uploads/1280486a1b1641078a9e4371bf8ccac7/Screenshot.png)\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n### Reference\n\nhttps://github.com/cirosantilli/test-invalid-utf8  \nhttps://github.com/cirosantilli/test-invalid-utf8/commit/5351ad8011562bf39327314e81553f0976b724a3","state":"closed","created_at":"2019-05-14T14:29:36.551Z","updated_at":"2022-06-27T03:05:13.364Z","closed_at":"2022-06-27T03:05:13.313Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"ðŸ¤– GitLab Bot ðŸ¤–","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["Category:Source Code Management","Stuff that should Just Work","[deprecated] Accepting merge requests","auto closed","backend","devops::create","group::source code","missed:12.10","missed:12.6","missed:12.7","missed:12.8","missed:12.9","missed:13.0","priority::3","project","section::dev","severity::3","stale","type::bug","vintage"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":1243277,"username":"ghost1","name":"Ghost User","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4249f4df72b475e7894fabed1c5888cf?s=80\u0026d=identicon","web_url":"https://gitlab.com/ghost1"},"type":"ISSUE","assignee":null,"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28703","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28703","notes":"https://gitlab.com/api/v4/projects/278964/issues/28703/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28703/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28703","relative":"#28703","full":"gitlab-org/gitlab#28703"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695844,"iid":28701,"project_id":278964,"title":"When grouping similar environments, environments aren't shown if they share the name of the \"root\" environment","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nWhen [grouping similar environments](https://docs.gitlab.com/ee/ci/environments.html#grouping-similar-environments), environments aren't shown if they share the name of the \"root\" environment. I'm unable to determine whether this is a gitlab-ce~3630472.\n\n### Steps to reproduce\n\n1. Create an environment `foo`\n2. Create another environment `foo/bar`\n3. The environment `foo` is inaccessible through the UI\n\n### Example Project\n\nhttps://gitlab.com/deandre-test-group/environment-test/environments\n\n### What is the current *bug* behavior?\n\nThe root environment can't be accessed via UI\n\n### What is the expected *correct* behavior?\n\nThe root environment should be accessible.\n\nDisplay a \"block\" for the root environment in the Environments page. This block should be displayed on top of the the child, scoped environments, inside the accordion view.\n\nExample:\n\n- review v\n  - review environment data\n  - review/123 environment data\n  - review/456 environment data\n\n### Relevant logs and/or screenshots\n\n![](http://gitlab.deandre.wtf/zEUVMx+)\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n\n### Workaround\n\nEnvironments remain accessible from `https://gitlab.com/\u003cnamespace\u003e/\u003cproject\u003e/environments/:environment_id`. Get `environment_id` from the API: `GET /projects/:id/environments`\n\n\nZD: https://gitlab.zendesk.com/agent/tickets/121437 (internal)","state":"closed","created_at":"2019-05-14T13:45:11.071Z","updated_at":"2022-08-26T19:51:46.928Z","closed_at":"2022-08-10T19:14:25.507Z","closed_by":{"id":5622641,"username":"nicolewilliams","name":"Nicole Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5622641/avatar.png","web_url":"https://gitlab.com/nicolewilliams"},"labels":["Actionable Insight::Product change","Category:Continuous Delivery","Category:Release Orchestration","Next Up","Release::P3","SUS::Impacting","UX","backend","backend-weight::1","closed::complete","customer","devops::release","environments","group::release","priority::3","section::ops","severity::3","type::bug","workflow::in review"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"}],"author":{"id":1944308,"username":"deandre","name":"DeAndre Harris","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1944308/avatar.png","web_url":"https://gitlab.com/deandre"},"type":"ISSUE","assignee":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"user_notes_count":20,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28701","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28701","notes":"https://gitlab.com/api/v4/projects/278964/issues/28701/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28701/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28701","relative":"#28701","full":"gitlab-org/gitlab#28701"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20884049,"iid":11595,"project_id":278964,"title":"Use elasticsearch bulk indexing API for database \"index\" operations","description":"GitLab has elasticsearch integration, and we often have a need to index a whole project, rather than a single document within a project. This particularly comes up during initial indexing, but also when we want to try to repair gaps in the index, or to add a new project or namespace to be indexed (with the \"elasticsearch limited namespace/project\" feature)\n\nAll of these operations can be localised to the \"initial_index_project\" operation: https://gitlab.com/gitlab-org/gitlab-ee/blob/master/ee/app/services/elastic/index_record_service.rb#L36\n\nIf we could use the elasticsearch batch submit API here, rather than a large number of individual `import` calls, we could *significantly* reduce the cost of initial indexing. Since we have some reports of sidekiq jobs on a single project taking many hours to complete, I think this is very worth considering.\n\nWe already use batch submission for repository indexing, in both Ruby and in Go.\n\ncc @smcgivern @vsizov @mdelaossa @DouweM @jramsay","state":"closed","created_at":"2019-05-14T13:31:42.442Z","updated_at":"2019-08-12T15:00:43.106Z","closed_at":"2019-06-05T21:30:20.292Z","closed_by":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"labels":["Category:Global Search","Create [DEPRECATED]","Enterprise Edition","advanced search","backend","bug::performance","devops::create","group::editor","workflow::in review"],"milestone":{"id":693518,"iid":33,"group_id":9970,"title":"12.0","description":"https://about.gitlab.com/releases/2019/06/22/gitlab-12-0-released/","state":"closed","created_at":"2018-10-30T16:47:37.975Z","updated_at":"2020-04-22T19:51:03.475Z","due_date":"2019-06-22","start_date":"2019-05-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/33"},"assignees":[{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"}],"author":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"type":"ISSUE","assignee":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"user_notes_count":9,"merge_requests_count":1,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11595","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11595","notes":"https://gitlab.com/api/v4/projects/278964/issues/11595/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11595/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11595","relative":"#11595","full":"gitlab-org/gitlab#11595"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":153,"epic":{"id":274,"iid":153,"title":"Rollout Advanced Global Search  on GitLab.com","url":"/groups/gitlab-org/-/epics/153","group_id":9970,"human_readable_end_date":"Jul 13, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":20883961,"iid":11594,"project_id":278964,"title":"Geo: Redirect after authentication prevents access to secondary","description":"### Summary\r\n\r\nThe setup is simply two nodes: `primary` and `secondary`.\r\n\r\nWhen authenticating on the `primary` or `secondary` the unprivileged user is unable to access the `secondary`. Any attempt to access the `secondary` redirects to the `primary`. The only known way to reach the `secondary` is to login as an *administrative* user on the `primary`, navigate to the Geo admin panel and click the \"Open Projects\" button for the `secondary`.\r\n\r\nThe GitLab instance uses Okta for authentication and this may be related.\r\n\r\nThis bug prevents a customer from using Geo for anything but disaster recovery, as no unprivileged user can access the `secondary` node.\r\n\r\n### Steps to reproduce\r\n\r\n1. Log into the `primary` node and open a session in your browser.\r\n2. Open another browser tab and type in the address to the `secondary`\r\n3. The browser tab which was used to access the `secondary` is automatically redirected to the `primary`. This can be observed by inspecting the URL. As a regular user it is not possible to access the `secondary` due to this redirect loop.\r\n\r\nIt is possible to access the `secondary` if a user has admin privileges. In this case, a user can navigate to the Admin Area -\u003e Geo -\u003e Open projects (for the `secondary`) button and move from there to the `secondary`. No redirect is triggered. Occasionally, a notification is displayed on the `secondary` that the user is not logged in.\r\n\r\n### Example Project\r\n\r\nN/A\r\n\r\n### What is the current *bug* behavior?\r\n\r\nA redirect loop from `secondary` to `primary` that prevents users from accessing the `secondary` node.\r\n\r\n### What is the expected *correct* behavior?\r\n\r\nA login attempt on the `secondary` results in a user being logged in to the `secondary` node.\r\n\r\n### Relevant logs and/or screenshots\r\nGeo configuration from customer:\r\n\r\n```\r\nexternal_url 'removed'\r\ngitlab_rails['lfs_enabled'] = true\r\ngitlab_rails['lfs_storage_path'] = \"/var/opt/gitlab/gitlab-rails/shared/lfs-objects\"\r\ngitlab_rails['backup_path'] = \"/var/opt/gitlab/backups\"\r\ngit_data_dirs({\r\n\"default\" =\u003e {\r\n\"path\" =\u003e \"/var/opt/gitlab/git-data\"\r\n}\r\n})\r\ngitlab_rails['db_password'] = 'removed'\r\npostgresql['listen_address'] = '1.1.1.1'\r\npostgresql['shared_buffers'] = \"6GB\"\r\npostgresql['sql_user_password'] = 'removed'\r\npostgresql['md5_auth_cidr_addresses'] = ['1.1.1.1/32']\r\ngitlab_pages['dir'] = \"/nfsdata/gitlab-pages\"\r\ngeo_secondary_role['enable'] = true\r\ngeo_secondary['db_fdw'] = true\r\n```\r\n\r\n### Output of checks\r\n\r\n#### Results of GitLab environment info\r\n\r\n\u003cdetails\u003e\r\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\r\n\u003cpre\u003e\r\n\r\n(For installations with omnibus-gitlab package run and paste the output of:\r\n`sudo gitlab-rake gitlab:env:info`)\r\n\r\n(For installations from source run and paste the output of:\r\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\r\n\r\n\u003c/pre\u003e\r\n\u003c/details\u003e\r\n\r\n#### Results of GitLab application Check\r\n\r\n- Gitlab 11.8\r\n- Okta used for login\r\n\r\n\u003cdetails\u003e\r\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\r\n\u003cpre\u003e\r\n\r\n(For installations with omnibus-gitlab package run and paste the output of:\r\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\r\n\r\n(For installations from source run and paste the output of:\r\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\r\n\r\n(we will only investigate if the tests are passing)\r\n\r\n\u003c/pre\u003e\r\n\u003c/details\u003e\r\n\r\n### Possible fixes\r\n\r\n(If you can, link to the line of code that might be responsible for the problem)","state":"closed","created_at":"2019-05-14T13:28:59.127Z","updated_at":"2022-05-19T00:40:16.254Z","closed_at":"2019-05-28T19:04:17.018Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["Enterprise Edition","Geo Administration","auto updated","customer","devops::systems","group::geo","priority::2","severity::3","type::bug","workflow::in review"],"milestone":{"id":693518,"iid":33,"group_id":9970,"title":"12.0","description":"https://about.gitlab.com/releases/2019/06/22/gitlab-12-0-released/","state":"closed","created_at":"2018-10-30T16:47:37.975Z","updated_at":"2020-04-22T19:51:03.475Z","due_date":"2019-06-22","start_date":"2019-05-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/33"},"assignees":[{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"}],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"user_notes_count":32,"merge_requests_count":1,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11594","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11594","notes":"https://gitlab.com/api/v4/projects/278964/issues/11594/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11594/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11594","relative":"#11594","full":"gitlab-org/gitlab#11594"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695836,"iid":28698,"project_id":278964,"title":"Migrate spec/javascripts/frequent_items/ to Jest","description":"The following frontend tests should be migrated to Jest (\u0026895):\n\n* [x]  spec/javascripts/frequent_items/components/app_spec.js https://gitlab.com/gitlab-org/gitlab/-/merge_requests/32498\n* [x]  spec/javascripts/frequent_items/components/frequent_items_search_input_spec.js https://gitlab.com/gitlab-org/gitlab/-/merge_requests/26114\n* [x]  spec/javascripts/frequent_items/components/frequent_items_list_spec.js https://gitlab.com/gitlab-org/gitlab/-/merge_requests/26114\n* [x]  spec/javascripts/frequent_items/components/frequent_items_list_item_spec.js https://gitlab.com/gitlab-org/gitlab/-/merge_requests/26114\n* [x]  spec/javascripts/frequent_items/store/actions_spec.js https://gitlab.com/gitlab-org/gitlab/-/merge_requests/32498\n* [x]  spec/javascripts/frequent_items/store/mutations_spec.js https://gitlab.com/gitlab-org/gitlab/-/merge_requests/32498\n* [x]  spec/javascripts/frequent_items/mock_data.js https://gitlab.com/gitlab-org/gitlab/-/merge_requests/32498\n* [x]  spec/javascripts/frequent_items/utils_spec.js https://gitlab.com/gitlab-org/gitlab/-/merge_requests/32498\n","state":"closed","created_at":"2019-05-14T12:12:09.156Z","updated_at":"2020-05-19T07:38:37.239Z","closed_at":"2020-05-19T07:38:37.184Z","closed_by":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"labels":["Category:Authentication and Authorization","backstage [DEPRECATED]","devops::manage","frontend","group::authentication and authorization","parking-lot","test","workflow::in dev"],"milestone":{"id":1112145,"iid":47,"group_id":9970,"title":"13.1","description":"","state":"closed","created_at":"2020-01-03T12:28:30.160Z","updated_at":"2020-10-08T12:01:07.361Z","due_date":"2020-06-17","start_date":"2020-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/47"},"assignees":[{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"user_notes_count":11,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28698","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":8},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"8 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28698","notes":"https://gitlab.com/api/v4/projects/278964/issues/28698/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28698/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28698","relative":"#28698","full":"gitlab-org/gitlab#28698"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":895,"epic":{"id":4891,"iid":895,"title":"Jest migration","url":"/groups/gitlab-org/-/epics/895","group_id":9970,"human_readable_end_date":"Jun 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24695806,"iid":28686,"project_id":278964,"title":"Update logos for built-in project templates","description":"### Overview \n\nThe built-in templates on the [create from template](https://gitlab.com/projects/new#create-from-template-pane) tab are more attractive and easier to find with the appropriate logo.\n\nWe should update any built-in templates with the default GitLab logo with more specific logos.\n\n### Proposal\n\nUpdate/create logos for:\n* iOS (Swift)\n* Go Micro (https://micro.mu/)\n* Pages/Hugo (https://gohugo.io/)\n* Pages/Jekyll (https://jekyllrb.com)\n* Pages/GitBook (https://www.gitbook.com/)\n\n\nThe logos we use for Hugo/Jekyll/HTML/GitBook might also be used to update the Netlify logos.\n\nWe should also update our review procedures to make logo inclusion a part of review.\n\n@dennis \n\n# SVG\n\n| Hugo | GitBook | Swift | GoMicro | Jekyll |\n| ------ | ------ | ------ | ------ | ------ | \n| ![hugo-logo-wide.svg](/uploads/e365a5cf6d59b6b3b837a4b26cfa4ed9/hugo-logo-wide.svg)| ![GitBook.svg](/uploads/997454d04539d45b390907aa609a67aa/GitBook.svg) | ![Swift_logo_color.svg](/uploads/da451e3e32e966f9ac84a341b7b8f342/Swift_logo_color.svg) | ![GoMicro.svg](/uploads/e92c082766a7b14ddcab754146aad74d/GoMicro.svg) | ![Jekyll.svg](https://raw.githubusercontent.com/jekyll/brand/master/jekyll-test-tube.svg) |\n","state":"closed","created_at":"2019-05-14T03:16:04.570Z","updated_at":"2021-02-03T01:04:33.839Z","closed_at":"2020-06-05T13:22:10.255Z","closed_by":{"id":750946,"username":"dennis","name":"Dennis Tang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/750946/avatar.png","web_url":"https://gitlab.com/dennis"},"labels":["UX","devops::manage","frontend","group::import","missed-deliverable","missed:12.4","missed:12.5","workflow::verification"],"milestone":{"id":1112145,"iid":47,"group_id":9970,"title":"13.1","description":"","state":"closed","created_at":"2020-01-03T12:28:30.160Z","updated_at":"2020-10-08T12:01:07.361Z","due_date":"2020-06-17","start_date":"2020-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/47"},"assignees":[{"id":750946,"username":"dennis","name":"Dennis Tang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/750946/avatar.png","web_url":"https://gitlab.com/dennis"},{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},{"id":4584545,"username":"dmoraBerlin","name":"Daniel Mora","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0604ecfb7035e409af09d4a3b6d7dcb2?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmoraBerlin"}],"author":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"type":"ISSUE","assignee":{"id":750946,"username":"dennis","name":"Dennis Tang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/750946/avatar.png","web_url":"https://gitlab.com/dennis"},"user_notes_count":50,"merge_requests_count":5,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28686","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28686","notes":"https://gitlab.com/api/v4/projects/278964/issues/28686/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28686/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28686","relative":"#28686","full":"gitlab-org/gitlab#28686"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20852211,"iid":11588,"project_id":278964,"title":"Geo: Percentage larger than 100% in /admin/geo/nodes screen","description":"### Summary\n\nWhen displaying the sync status in Sync settings in the `/admin/geo/nodes` screen, the percentage bar can display valuaes larger than 100%. \n\n### Steps to reproduce\nN/A\n### Example Project\nN/A\n\n### What is the current *bug* behavior?\n\nWhen syncing, the percentage bar gitters around +1/-1% and can display a total larger than 100%\n\n### What is the expected *correct* behavior?\n\nWhen not all repositories are synced, the percentage should be lower than 100%. When complete percentage should be exactly 100%. The percentage should never be larger than 100%\n### Relevant logs and/or screenshots\n![image001](/uploads/a5546f497dac9563ef10be30e5a0cffb/image001.png)\n### Output of checks\n\n#### Results of GitLab environment info\nN/A\n#### Results of GitLab application Check\nN/A\n### Possible fixes","state":"closed","created_at":"2019-05-13T17:55:52.631Z","updated_at":"2019-12-11T20:03:06.462Z","closed_at":"2019-07-30T10:45:40.796Z","closed_by":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"labels":["Enterprise Edition","Geo Administration","devops::systems","group::geo","missed-SLO","priority::2","severity::3","type::bug","workflow::in dev"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"}],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":23,"merge_requests_count":1,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11588","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11588","notes":"https://gitlab.com/api/v4/projects/278964/issues/11588/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11588/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11588","relative":"#11588","full":"gitlab-org/gitlab#11588"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":369,"epic":{"id":1104,"iid":369,"title":"Geo: Improve UI/UX on Administrator Panel","url":"/groups/gitlab-org/-/epics/369","group_id":9970},"iteration":null,"health_status":null},{"id":24695787,"iid":28678,"project_id":278964,"title":"Missing validation for expires at","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nThe [Expirable](https://gitlab.com/gitlab-org/gitlab-ce/tree/master/app/models/concerns/expirable.rb) concern doesn't validate the date value provided as input.\n\n### Steps to reproduce\n\nTwo different scenarios are observed when creating any object/relation that supports expire (includes the Expirable concern):\n\n- `expires_at` date is invalid:\n  1. Create a new Personal Access/Deploy Token with expire at value \"invalid\"\n  1. The Personal Access/Deploy Token is create without expire date (Never)\n\n- `expires_at` date is in the past:\n  1. Create Personal Access/Deploy Token with expire at value representing yesterdays date\n  1. The Personal Access/Deploy Token is create in the DB\n  1. The Personal Access/Deploy Token is not listed in the valid tokens list (already expired).\n\n### What is the current *bug* behavior?\n\n1. It is possible to create already expired token when the provided expire at value is in the past\n1. It possible to create a token that never expires when an expires at value was provided\n\n### What is the expected *correct* behavior?\n\nThe creation of tokens should be denied if provided expires at is invalid or in the past.\n\n### Output of checks\n\nThis bug happens on GitLab.com","state":"closed","created_at":"2019-05-13T10:54:32.449Z","updated_at":"2021-12-23T19:34:54.144Z","closed_at":"2021-09-29T13:37:31.821Z","closed_by":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"labels":["Category:Authentication and Authorization","Epic 6340","FY22::Q3","[deprecated] Accepting merge requests","backend","devops::manage","group::authentication and authorization","priority::4","section::dev","security","severity::4"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"}],"author":{"id":384663,"username":"hvlad","name":"Horatiu Eugen Vlad","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/384663/avatar.png","web_url":"https://gitlab.com/hvlad"},"type":"ISSUE","assignee":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28678","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28678","notes":"https://gitlab.com/api/v4/projects/278964/issues/28678/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28678/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28678","relative":"#28678","full":"gitlab-org/gitlab#28678"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20823623,"iid":11582,"project_id":278964,"title":"Use the Dependency Proxy with private GitLab projects","description":"### Problem to solve\n\nWe introduced the dependency proxy for containers with https://gitlab.com/gitlab-org/gitlab-ee/issues/7934. The MVC feature is only enabled for public projects because the caching proxy does not yet support authentication. In order to make it available to all projects, we need to add authentication in order to avoid a potential DDoS where someone is making unauthorized requests against a private proxy.\n\n### Intended users\n\n- [Software Developer](https://design.gitlab.com/getting-started/personas#persona-sasha)\n- [DevOps Engineer](https://design.gitlab.com/getting-started/personas#persona-devon)\n- [Systems Administrator](https://design.gitlab.com/getting-started/personas#persona-sidney)\n\n### Proposal\nAdd authentication for private projects, based on appropriate credentials for that project.\n\n1. When user executes `docker pull` command it will make a request to GitLab Dependency proxy URL.\n1. When the request hits `DependencyProxyForContainersController` for private group we return 401. With `WWW-Authenticate` header realm pointing toward some `auth` route.\n1. This will make docker client send a request to provided `auth` route with username and password (or PAT).\n1. We check user/password combination and return OAuth2 token if OK.\n1. This will make docker client send a repeating request to `DependencyProxyForContainersController` but now with OAuth2 token added to header. We use OAuth2 token for to set `current_user` variable and check for access to private group. Then we proceed with the request like we do for a public group.\n\n### Further details\n![v2-registry-auth](/uploads/c0f18e215ce86292a03f59a443375f85/v2-registry-auth.png)\n\n### Permissions and Security\n- The proxy will require authentication to avoid utilization of bandwidth or storage resources by an unauthorized user in a denial-of-service scenario, in particular for gitlab.com where everything is publicly routable. This could be achieved through asking the proxy to fetch remote resources until the storage is full. \n- The feature belongs at the group level, but complicates authentication because a group can contain a mix of public and private projects, with different permissions. One straightforward option here is to allow usage of a project token from any project that is a member of the group to authenticate.\n\n\n### Documentation\nWe will update the [Dependency Proxy Documentation](https://docs.gitlab.com/ee/user/group/dependency_proxy/) to include details about authentication.\n\n### Testing\n- Test authentication for private projects, groups and sub-groups\n- Test private projects that haven't authenticated\n- Automate the [feature test to use of dependency proxy with a private project](https://gitlab.com/gitlab-org/quality/testcases/-/issues/222)\n\n### What does success look like, and how can we measure that?\nSuccess looks like we have made the dependency proxy available for private and public projects. \n\nWe do not currently have the ability to track this data, however https://gitlab.com/gitlab-org/gitlab-ce/issues/61583 will help us to start tracking and measuring this data so we can make better predictions about usage and adoption.\n\n### What is the type of buyer? \nFor now, the dependency proxy is focused on premium and ultimate customers. \n\nIn order to expand to additional buyer types we need to improve performance and support Unicorn. This issue details those efforts: https://gitlab.com/gitlab-org/gitlab-ee/issues/11548 \n\n### Links / references\n- [Docker Registry Authentication Documentation](https://github.com/docker/distribution/blob/c192a281f8ac6f2a351fe729c8a56108f8edb377/docs/spec/auth/token.md#how-to-authenticate)\n- [GitLab Container Registry Documentation](https://docs.gitlab.com/ee/user/project/container_registry.html)\n- [Dependency Proxy Documentation](https://docs.gitlab.com/ee/user/group/dependency_proxy/)","state":"closed","created_at":"2019-05-13T09:33:42.399Z","updated_at":"2022-04-05T07:42:39.042Z","closed_at":"2020-12-10T17:29:01.015Z","closed_by":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"labels":["Category:Dependency Proxy","Deliverable","Package:P1","backend","customer","devops::package","direction","group::package registry","maturity::viable","package:active","quad-planning::complete-action","ruby","section::ops","type::feature","workflow::production"],"milestone":{"id":1233757,"iid":54,"group_id":9970,"title":"13.7","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:43:14.893Z","updated_at":"2022-04-13T14:51:12.240Z","due_date":"2020-12-17","start_date":"2020-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/54"},"assignees":[{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"}],"author":{"id":444,"username":"dzaporozhets","name":"Dmytro Zaporozhets (DZ)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/444/avatar.png","web_url":"https://gitlab.com/dzaporozhets"},"type":"ISSUE","assignee":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"user_notes_count":79,"merge_requests_count":0,"upvotes":19,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11582","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11582","notes":"https://gitlab.com/api/v4/projects/278964/issues/11582/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11582/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11582","relative":"#11582","full":"gitlab-org/gitlab#11582"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2920,"epic":{"id":33177,"iid":2920,"title":"Make the Dependency Proxy 'Complete'","url":"/groups/gitlab-org/-/epics/2920","group_id":9970,"human_readable_end_date":"Dec 21, 2023","human_readable_timestamp":"\u003cstrong\u003e11\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":24695775,"iid":28673,"project_id":278964,"title":"Update outdated Jira configuration instructions in doc/integration/jira_development_panel.md","description":"\u003c!--\n\n* Use this issue template for suggesting new docs or updates to existing docs.\n  Note: Doc work as part of feature development is covered in the Feature Request template.\n  \n* For issues related to features of the docs.gitlab.com site, see\n     https://gitlab.com/gitlab-com/gitlab-docs/issues/       \n\n* For information about documentation content and process, see\n     https://docs.gitlab.com/ee/development/documentation/ --\u003e\n\n\u003c!-- Type of issue --\u003e\n\n\u003c!-- Un-comment the line for the applicable doc issue type to add its label.\n     Note that all text on that line is deleted upon issue creation. --\u003e\n\u003c!-- /label gitlab-ce~9444929 - New doc needed to cover a new topic or use case. --\u003e\n\u003c!-- /label gitlab-ce~9444930 - Improving an existing doc; e.g. adding a diagram, adding or rewording text, resolving redundancies, cross-linking, etc. --\u003e\n\u003c!-- /label gitlab-ce~9444931 - Review a page or group of pages in order to plan and implement major improvements/rewrites. --\u003e\n\u003c!-- /label gitlab-ce~9444932 - Anything else. --\u003e\n\n### Problem to solve\n\nThe Jira instructions and screenshot in `doc/integration/jira_development_panel.md` (https://docs.gitlab.com/ee/integration/jira_development_panel.html) is outdated.\n\nhttps://docs.gitlab.com/ee/integration/img/jira_dev_panel_jira_setup_1.png shows a very old version of Jira","state":"closed","created_at":"2019-05-13T03:45:45.138Z","updated_at":"2022-11-22T20:19:20.760Z","closed_at":"2020-07-22T19:23:46.656Z","closed_by":{"id":1999552,"username":"mikelewis","name":"Mike Lewis","state":"active","avatar_url":"https://secure.gravatar.com/avatar/1535b3b1cfe99b719f72455dbc7e4a15?s=80\u0026d=identicon","web_url":"https://gitlab.com/mikelewis"},"labels":["Category:Integrations","Integration::Jira","Technical Writing","backend","devops::manage","docs::improvement","documentation","group::ecosystem [DEPRECATED]","missed:13.2"],"milestone":null,"assignees":[{"id":1999552,"username":"mikelewis","name":"Mike Lewis","state":"active","avatar_url":"https://secure.gravatar.com/avatar/1535b3b1cfe99b719f72455dbc7e4a15?s=80\u0026d=identicon","web_url":"https://gitlab.com/mikelewis"}],"author":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"type":"ISSUE","assignee":{"id":1999552,"username":"mikelewis","name":"Mike Lewis","state":"active","avatar_url":"https://secure.gravatar.com/avatar/1535b3b1cfe99b719f72455dbc7e4a15?s=80\u0026d=identicon","web_url":"https://gitlab.com/mikelewis"},"user_notes_count":29,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28673","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28673","notes":"https://gitlab.com/api/v4/projects/278964/issues/28673/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28673/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28673","relative":"#28673","full":"gitlab-org/gitlab#28673"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1826,"epic":{"id":11488,"iid":1826,"title":"Restructure GitLab\u003c-\u003eJira integration docs","url":"/groups/gitlab-org/-/epics/1826","group_id":9970,"human_readable_end_date":"Sep 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":20812940,"iid":11570,"project_id":278964,"title":"Support group filtering for Vulnerabilities API endpoint","description":"### Problem to solve\n\nWe should allow users to easily retrieve vulnerability occurrences by group from our API.\n\n### Intended users\n\n~\"Persona: Software developer\" \n\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\n\n### Proposal\n\nAdd route for retrieving vulnerability occurrences by group and supporting `:group_id:` URL param within Vulnerability API.\n\n### Permissions and Security\n\nNo changes to permissions\n\n### Documentation\n\nNo changes to docs\n\n### Testing\n\nAdd tests to ensure retrieving all project vulnerability occurrences for shared group works as expected.\n\n### What does success look like, and how can we measure that?\n\nUsers are easily able to retrieve all vulnerability occurrences within a group.\n\n### What is the type of buyer? \n\n~\"GitLab Ultimate\" \n\n### Links / references","state":"closed","created_at":"2019-05-12T21:11:48.047Z","updated_at":"2020-07-09T19:30:57.646Z","closed_at":"2020-06-16T17:31:32.526Z","closed_by":{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"},"labels":["Category:Vulnerability Management","Enterprise Edition","api","backend","backend-weight::3","customer","devops::govern","group::threat insights","missed:12.3","missed:12.4","missed:12.7","type::feature","workflow::problem validation"],"milestone":{"id":427853,"iid":10,"group_id":9970,"title":"Next 3-4 releases","description":"Bigger issues we plan to ship in the next 3-4 releases, but don't have a designated release yet. \r\n\r\n\u003e \"An easy way to look at it for me it's translating to months. Since our iterations are 1 month, I look at it as 'within the next 4 months'.\" - @dgruesso [via slack]\r\n\r\nDO NOT add small changes, bugs, regressions to this milestone.","state":"active","created_at":"2017-12-11T16:26:33.141Z","updated_at":"2020-07-14T18:21:29.639Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/10"},"assignees":[{"id":4708748,"username":"matt_wilson","name":"Matt Wilson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4708748/avatar.png","web_url":"https://gitlab.com/matt_wilson"}],"author":{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"},"type":"ISSUE","assignee":{"id":4708748,"username":"matt_wilson","name":"Matt Wilson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4708748/avatar.png","web_url":"https://gitlab.com/matt_wilson"},"user_notes_count":35,"merge_requests_count":1,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11570","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11570","notes":"https://gitlab.com/api/v4/projects/278964/issues/11570/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11570/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11570","relative":"#11570","full":"gitlab-org/gitlab#11570"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1765,"epic":{"id":10900,"iid":1765,"title":"Vulnerability Management - Minimal to Viable","url":"/groups/gitlab-org/-/epics/1765","group_id":9970,"human_readable_end_date":"Sep 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24695753,"iid":28665,"project_id":278964,"title":"Loading profile popover is sending two requests","description":"### Problem to solve\n\nLoading profile popover is sending two requests which looks little weird!\n\nCurrently, User Popover is loading with two requests\n\n1. **User** API Endpoint\n1. **User Status** API Endpoint\n\n### Intended users\n\nAll Users of GitLab and GitLab CE, EE\n\n### Proposal\n\nLoad user status and user details from the same API endpoint\n\n### Video\n\nI tested this with **3G Connection from Chrome**\n\nhttps://www.loom.com/share/2c95bbfb22414a349db3d673ae104bb9","state":"closed","created_at":"2019-05-11T16:50:35.896Z","updated_at":"2020-04-17T03:26:17.627Z","closed_at":"2020-04-17T03:26:17.575Z","closed_by":{"id":2580049,"username":"yo-old","name":"Old Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/de17d0c8ff4177878820b74de658b457?s=80\u0026d=identicon","web_url":"https://gitlab.com/yo-old"},"labels":["UI polish","UX","[deprecated] Accepting merge requests","devops::manage","frontend","group::spaces DEPRECATED","user profile"],"milestone":null,"assignees":[],"author":{"id":1243277,"username":"ghost1","name":"Ghost User","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4249f4df72b475e7894fabed1c5888cf?s=80\u0026d=identicon","web_url":"https://gitlab.com/ghost1"},"type":"ISSUE","assignee":null,"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28665","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28665","notes":"https://gitlab.com/api/v4/projects/278964/issues/28665/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28665/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28665","relative":"#28665","full":"gitlab-org/gitlab#28665"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695729,"iid":28654,"project_id":278964,"title":"Expose all git push options in Push and Tag Event Webhooks","description":"### Problem to solve\n\nWe want to allow customers to receive all git push options passed in during a git push via Push and Tag Event Webhooks.\n\nPresently, only git push options that are recognised by `Gitlab::PushOptions` will be present in the Push and Tag Event Webhook payloads. This means that customers cannot build systems around their own customised git push options.\n\nFor example, the following two push options:\n\n`git push -u origin -o 'foo' -o 'bar'`\n\nShould become exposed in the Push and Tag Event Webhooks payloads as:\n\n```\n\"push_options\": [\"foo\", \"bar\"]\n```\n\n### Further details\n\nThis feature was previously added in 11.7 as part of https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/15643, but was unintentionally removed in 11.10 https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/26752. \n\nThe regression was raised and discussed in https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/26752#note_164043657.\n\n**What caused the regression?**\n\nhttps://gitlab.com/gitlab-org/gitlab-ce/merge_requests/26752 introduced a class `Gitlab::PushOptions` to parse push options passed to the `post_receive` API endpoint to make it easier for GitLab to extract their namespaced push option values. At the same time, the `Gitlab::PushOptions` class also filters out unrecognised push options. In the `post_receive` API endpoint the `PostReceive` worker class receives the push options, which eventually are passed to classes that execute the push webhooks. Any unrecognised push options will have been removed.\n\n**What should be fixed?**\n\nThe git push option data exposed in the Push and Tag Event Webhooks needs to be the unparsed data.\n\nThe parsed data from `Gitlab::PushOptions` is a Hash. The `push_options` data in the webhook payloads will need to be reverted back to being an Array of the raw push options,  which the `post_receive` API endpoint receives as `params[:push_options]`.\n\n### What does success look like?\n\nAll Git push options passed via the command line should be exposed in the Push and Tag Event Webhook payloads (without any filtering or manipulation of the data).\n\n### Documentation\n\nThese docs should be updated with the new : \n\n- https://docs.gitlab.com/ee/user/project/integrations/webhooks.html#push-events\n- https://docs.gitlab.com/ee/user/project/integrations/webhooks.html#tag-events\n\n### Testing\n\nAn integration test for this feature should be added to the `post_receive` internal API endpoint.\n\n### Links / references","state":"closed","created_at":"2019-05-10T21:23:21.055Z","updated_at":"2022-11-24T18:24:18.212Z","closed_at":"2020-04-22T00:49:41.749Z","closed_by":{"id":1187333,"username":"jramsay-gitlab","name":"James Ramsay (ex-GitLab)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1187333/avatar.png","web_url":"https://gitlab.com/jramsay-gitlab"},"labels":["Category:Webhooks","Create [DEPRECATED]","[deprecated] Accepting merge requests","backend","devops::create","group::source code","priority::4","regression","regression:11.10","severity::4","type::bug"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":null,"user_notes_count":8,"merge_requests_count":0,"upvotes":4,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28654","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28654","notes":"https://gitlab.com/api/v4/projects/278964/issues/28654/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28654/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":"https://gitlab.com/api/v4/projects/278964/issues/18049"},"references":{"short":"#28654","relative":"#28654","full":"gitlab-org/gitlab#28654"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695718,"iid":28649,"project_id":278964,"title":"ActionView::Template::Error: undefined method `merge_commit?' for nil:NilClass","description":"This was @bbodenmiller first merge request that was not merged. It came from a fork that was deleted, so it's likely this commit got garbage collected.\n\n\nhttps://sentry.gitlab.net/gitlab/gitlabcom/issues/739769/\n\n```\nNoMethodError: undefined method `merge_commit?' for nil:NilClass\n  batch_loader.rb:124:in `public_send'\n    value.public_send(method_name, *args, \u0026block)\n  batch_loader.rb:124:in `public_send'\n    value.public_send(method_name, *args, \u0026block)\n  batch_loader.rb:124:in `block (3 levels) in __replace_with!'\n    value.public_send(method_name, *args, \u0026block)\n  batch_loader.rb:73:in `method_missing'\n    __sync!.public_send(method_name, *args, \u0026block)\n  commit_collection.rb:33:in `reject'\n    enrich!.commits.reject(\u0026:merge_commit?)\n...\n(200 additional frame(s) were not displayed)\n\nActionView::Template::Error: undefined method `merge_commit?' for nil:NilClass\n\nActionView::Template::Error: undefined method `merge_commit?' for nil:NilClass\n```","state":"closed","created_at":"2019-05-10T17:44:50.298Z","updated_at":"2019-12-06T22:50:08.252Z","closed_at":"2019-10-08T18:38:28.518Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["Deliverable","backend","customer","customer+","devops::create","group::source code","missed-SLO","priority::2","severity::2","type::bug"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"}],"author":{"id":402401,"username":"jobbot","name":"Bot","state":"active","avatar_url":"https://secure.gravatar.com/avatar/aaa6738f1ebf25404010884af511b0e7?s=80\u0026d=identicon","web_url":"https://gitlab.com/jobbot"},"type":"ISSUE","assignee":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"user_notes_count":19,"merge_requests_count":0,"upvotes":8,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28649","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28649","notes":"https://gitlab.com/api/v4/projects/278964/issues/28649/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28649/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28649","relative":"#28649","full":"gitlab-org/gitlab#28649"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20763178,"iid":11558,"project_id":278964,"title":"Redirect to SSO page when access to SAML resources is denied","description":"## What\n\nWhen SSO enforcement prevents access to a group or project we should redirect to the SSO page for the user to sign in.\n\nWe might also want to consider a more general redirect when a user visits a SAML resource without enforcement being enabled. This would make it more convenient for signed out users to access resources without having to remember the long SSO URL for that group.\n\n## Why\n\nShowing a 404 is confusing, especially if the user is signed in but has been denied access because they used password sign in instead of the specific SAML provider required by a group","state":"closed","created_at":"2019-05-10T15:10:53.699Z","updated_at":"2019-08-12T15:00:49.712Z","closed_at":"2019-05-15T12:31:55.793Z","closed_by":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Enterprise Edition","Manage [DEPRECATED]","authentication","backend","devops::manage","group::authentication and authorization","type::feature","workflow::in review"],"milestone":{"id":693518,"iid":33,"group_id":9970,"title":"12.0","description":"https://about.gitlab.com/releases/2019/06/22/gitlab-12-0-released/","state":"closed","created_at":"2018-10-30T16:47:37.975Z","updated_at":"2020-04-22T19:51:03.475Z","due_date":"2019-06-22","start_date":"2019-05-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/33"},"assignees":[{"id":654619,"username":"jamedjo","name":"James Edwards-Jones","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/654619/avatar.png","web_url":"https://gitlab.com/jamedjo"}],"author":{"id":654619,"username":"jamedjo","name":"James Edwards-Jones","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/654619/avatar.png","web_url":"https://gitlab.com/jamedjo"},"type":"ISSUE","assignee":{"id":654619,"username":"jamedjo","name":"James Edwards-Jones","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/654619/avatar.png","web_url":"https://gitlab.com/jamedjo"},"user_notes_count":3,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11558","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11558","notes":"https://gitlab.com/api/v4/projects/278964/issues/11558/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11558/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11558","relative":"#11558","full":"gitlab-org/gitlab#11558"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695707,"iid":28644,"project_id":278964,"title":"adding a MR comment on a part of the file not in diff corrupts comments and triggers a 500 error","description":"# Steps to reproduce\n\n - Open a MR with a small diff on a large file\n - From `changes` tab, click on `show full file`\n - Add a comment on a line far from the MR diffs\n\n## Result\n - Comment is not saved (error on top of page)\n - Reloading the MR page triggers an Unable to load comments message\n\nIn the logs:\n\n```\nNoMethodError (undefined method `index' for nil:NilClass):\napp/models/concerns/discussion_on_diff.rb:48:in `truncated_diff_lines'\napp/serializers/base_serializer.rb:16:in `represent'\napp/controllers/concerns/issuable_actions.rb:118:in `discussions'\napp/controllers/projects/merge_requests_controller.rb:214:in `discussions'\nlib/gitlab/i18n.rb:55:in `with_locale'\nlib/gitlab/i18n.rb:61:in `with_user_locale'\napp/controllers/application_controller.rb:434:in `set_locale'\nlib/gitlab/middleware/multipart.rb:103:in `call'\nlib/gitlab/request_profiler/middleware.rb:16:in `call'\nlib/gitlab/middleware/go.rb:20:in `call'\nlib/gitlab/etag_caching/middleware.rb:13:in `call'\nlib/gitlab/middleware/correlation_id.rb:16:in `block in call'\nlib/gitlab/correlation_id.rb:15:in `use_id'\nlib/gitlab/middleware/correlation_id.rb:15:in `call'\nlib/gitlab/middleware/read_only/controller.rb:40:in `call'\nlib/gitlab/middleware/read_only.rb:18:in `call'\nlib/gitlab/middleware/basic_health_check.rb:25:in `call'\nlib/gitlab/request_context.rb:26:in `call'\nlib/gitlab/metrics/requests_rack_middleware.rb:29:in `call'\nlib/gitlab/middleware/release_env.rb:13:in `call'\n```\n\nTrying to expand comments shows an unable to load diff message:\n\n![Screen_Shot_2019-05-10_at_8.09.30_AM](/uploads/1a91dadd7f403953692aa078796d197a/Screen_Shot_2019-05-10_at_8.09.30_AM.png)\n\n## Workaround to be able to complete MR\n\nI had to create an issue to resolve comments later to have comments resolved. Then I was able to merge the MR.\n\n## Environment\n\nGitlab on docker\n\n```\nGitLab 11.10.4 (62c464651d2)\nGitLab Shell 9.0.0\nGitLab Workhorse v8.5.2\nGitLab API v4\nRuby 2.5.3p105\nRails 5.0.7.2\nPostgreSQL 9.6.11\nGitaly unix:/var/opt/gitlab/gitaly/gitaly.socket 1.34.1 -- Git version 2.18.1\n```","state":"closed","created_at":"2019-05-10T12:12:29.139Z","updated_at":"2022-02-03T16:39:23.581Z","closed_at":"2020-01-15T19:53:10.325Z","closed_by":{"id":4554599,"username":"m_gill","name":"Michelle Gill","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4554599/avatar.png","web_url":"https://gitlab.com/m_gill"},"labels":["Category:Code Review Workflow","Deliverable","backend","customer","devops::create","group::code review","merge requests","missed-SLO","priority::2","regression","regression:12.5","severity::2","type::bug","workflow::blocked"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"}],"author":{"id":1276509,"username":"blackholegalaxy","name":"blackholegalaxy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1276509/avatar.png","web_url":"https://gitlab.com/blackholegalaxy"},"type":"ISSUE","assignee":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"user_notes_count":16,"merge_requests_count":0,"upvotes":6,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28644","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28644","notes":"https://gitlab.com/api/v4/projects/278964/issues/28644/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28644/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28644","relative":"#28644","full":"gitlab-org/gitlab#28644"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695660,"iid":28627,"project_id":278964,"title":"Commit Statistics shows wrong commits count","description":"### Summary\r\n\r\nCommit Statistics shows wrong commits count which is limited to 2000 Commits\r\n\r\nI tested GitLab by Pushing 1 Million Commits in my Instance https://lab.yoginth.com/yoginth/many-commits, I caught this error!\r\n\r\n### Steps to reproduce\r\n\r\n* Push **2000+** Commits in a day\r\n* Load the **Contribution Charts** page\r\n* You will get only **2000 Commits**\r\n\r\n### Example Project\r\n\r\nhttps://lab.yoginth.com/yoginth/many-commits/graphs/master/charts\r\n\r\n### Relevant logs and/or screenshots\r\n\r\n![Screenshot](https://gitlab.com/yo/issues/uploads/8b1bab265f67ecc641ddec221f79787e/Screenshot.png)\r\n\r\n#### Results of GitLab environment info\r\n\r\n\u003cdetails\u003e\r\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\r\n\u003cpre\u003e\r\n\r\nSystem information\r\nSystem:         Ubuntu 18.04\r\nCurrent User:   git\r\nUsing RVM:      no\r\nRuby Version:   2.5.3p105\r\nGem Version:    2.7.6\r\nBundler Version:1.17.3\r\nRake Version:   12.3.2\r\nRedis Version:  3.2.12\r\nGit Version:    2.18.1\r\nSidekiq Version:5.2.5\r\nGo Version:     unknown\r\n\r\nGitLab information\r\nVersion:        11.10.4\r\nRevision:       62c464651d2\r\nDirectory:      /opt/gitlab/embedded/service/gitlab-rails\r\nDB Adapter:     PostgreSQL\r\nDB Version:     9.6.11\r\nURL:            https://lab.yoginth.com\r\nHTTP Clone URL: https://lab.yoginth.com/some-group/some-project.git\r\nSSH Clone URL:  git@lab.yoginth.com:some-group/some-project.git\r\nUsing LDAP:     no\r\nUsing Omniauth: yes\r\nOmniauth Providers: \r\n\r\nGitLab Shell\r\nVersion:        9.0.0\r\nRepository storage paths:\r\n- default:      /var/opt/gitlab/git-data/repositories\r\nGitLab Shell path:              /opt/gitlab/embedded/service/gitlab-shell\r\nGit:            /opt/gitlab/embedded/bin/git\r\n\r\n\u003c/pre\u003e\r\n\u003c/details\u003e\r\n\r\n#### Results of GitLab application Check\r\n\r\n\u003cdetails\u003e\r\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\r\n\u003cpre\u003e\r\n\r\nChecking GitLab subtasks ...\r\n\r\nChecking GitLab Shell ...\r\n\r\nGitLab Shell: ... GitLab Shell version \u003e= 9.0.0 ? ... OK (9.0.0)\r\nRunning /opt/gitlab/embedded/service/gitlab-shell/bin/check\r\nCheck GitLab API access: OK\r\nRedis available via internal API: OK\r\n\r\nAccess to /var/opt/gitlab/.ssh/authorized_keys: OK\r\ngitlab-shell self-check successful\r\n\r\nChecking GitLab Shell ... Finished\r\n\r\nChecking Gitaly ...\r\n\r\nGitaly: ... default ... OK\r\n\r\nChecking Gitaly ... Finished\r\n\r\nChecking Sidekiq ...\r\n\r\nSidekiq: ... Running? ... yes\r\nNumber of Sidekiq processes ... 1\r\n\r\nChecking Sidekiq ... Finished\r\n\r\nChecking Incoming Email ...\r\n\r\nIncoming Email: ... Reply by email is disabled in config/gitlab.yml\r\n\r\nChecking Incoming Email ... Finished\r\n\r\nChecking LDAP ...\r\n\r\nLDAP: ... LDAP is disabled in config/gitlab.yml\r\n\r\nChecking LDAP ... Finished\r\n\r\nChecking GitLab App ...\r\n\r\nGit configured correctly? ... yes\r\nDatabase config exists? ... yes\r\nAll migrations up? ... yes\r\nDatabase contains orphaned GroupMembers? ... no\r\nGitLab config exists? ... yes\r\nGitLab config up to date? ... yes\r\nLog directory writable? ... yes\r\nTmp directory writable? ... yes\r\nUploads directory exists? ... yes\r\nUploads directory has correct permissions? ... yes\r\nUploads directory tmp has correct permissions? ... yes\r\nInit script exists? ... skipped (omnibus-gitlab has no init script)\r\nInit script up-to-date? ... skipped (omnibus-gitlab has no init script)\r\nProjects have namespace: ... \r\n1/1 ... yes\r\n2/2 ... yes\r\nRedis version \u003e= 2.8.0? ... yes\r\nRuby version \u003e= 2.5.3 ? ... yes (2.5.3)\r\nGit version \u003e= 2.18.0 ? ... yes (2.18.1)\r\nGit user has default SSH configuration? ... yes\r\nActive users: ... 2\r\n\r\nChecking GitLab App ... Finished\r\n\r\n\r\nChecking GitLab subtasks ... Finished\r\n\r\n\u003c/pre\u003e\r\n\u003c/details\u003e\r\n\r\n### Proposal\r\n\r\n[For the time being, let's simply change what we displayed to \"2000+ commits\" if there are more than 2000 commits. This would apply to the daily average as well.](https://gitlab.com/gitlab-org/gitlab/issues/28627#note_242551667)\r\n\r\n","state":"closed","created_at":"2019-05-09T15:19:41.990Z","updated_at":"2020-02-24T08:12:33.473Z","closed_at":"2020-02-24T08:12:33.414Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["devops::manage","graphs","group::optimize","missed-SLO","priority::2","severity::4","type::bug","workflow::in review"],"milestone":{"id":427853,"iid":10,"group_id":9970,"title":"Next 3-4 releases","description":"Bigger issues we plan to ship in the next 3-4 releases, but don't have a designated release yet. \r\n\r\n\u003e \"An easy way to look at it for me it's translating to months. Since our iterations are 1 month, I look at it as 'within the next 4 months'.\" - @dgruesso [via slack]\r\n\r\nDO NOT add small changes, bugs, regressions to this milestone.","state":"active","created_at":"2017-12-11T16:26:33.141Z","updated_at":"2020-07-14T18:21:29.639Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/10"},"assignees":[{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"}],"author":{"id":1243277,"username":"ghost1","name":"Ghost User","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4249f4df72b475e7894fabed1c5888cf?s=80\u0026d=identicon","web_url":"https://gitlab.com/ghost1"},"type":"ISSUE","assignee":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"user_notes_count":5,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28627","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28627","notes":"https://gitlab.com/api/v4/projects/278964/issues/28627/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28627/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28627","relative":"#28627","full":"gitlab-org/gitlab#28627"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695639,"iid":28616,"project_id":278964,"title":"Delete BoardService","description":"This is part of refactoring issue boards to Vuex (\u00261278) and needs to happen after https://gitlab.com/gitlab-org/gitlab-foss/issues/61620.\n\nAll references to `BoardService` / `BoardServiceEE` need to be deleted and replaced by the [`boardsStore`](https://gitlab.com/gitlab-org/gitlab-ce/blob/746531373d25bd99d2d3272d7da6fe2079a3fde7/app/assets/javascripts/boards/stores/boards_store.js).\n\n```shell\ngrep -ir BoardService {ee/,}app/assets/javascripts\nee/app/assets/javascripts/boards/services/board_service.js:import BoardService from '~/boards/services/board_service';\nee/app/assets/javascripts/boards/services/board_service.js:export default class BoardServiceEE extends BoardService {\napp/assets/javascripts/boards/index.js:import BoardService from 'ee_else_ce/boards/services/board_service';\napp/assets/javascripts/boards/index.js:      gl.boardService = new BoardService();\napp/assets/javascripts/boards/index.js:      gl.boardService\napp/assets/javascripts/boards/index.js:          BoardService.getIssueInfo(sidebarInfoEndpoint)\napp/assets/javascripts/boards/index.js:          BoardService.toggleIssueSubscription(issue.toggleSubscriptionEndpoint)\napp/assets/javascripts/boards/models/list.js:    return gl.boardService\napp/assets/javascripts/boards/models/list.js:    gl.boardService.destroyList(this.id).catch(() =\u003e {\napp/assets/javascripts/boards/models/list.js:    return gl.boardService.updateList(this.id, this.position, collapsed).catch(() =\u003e {\napp/assets/javascripts/boards/models/list.js:    return gl.boardService\napp/assets/javascripts/boards/models/list.js:    return gl.boardService\napp/assets/javascripts/boards/models/list.js:    gl.boardService.moveIssue(issue.id, null, null, moveBeforeId, moveAfterId).catch(() =\u003e {\napp/assets/javascripts/boards/models/list.js:    gl.boardService\napp/assets/javascripts/boards/models/list.js:    gl.boardService\napp/assets/javascripts/boards/models/list.js:    gl.boardService\napp/assets/javascripts/boards/models/list.js:      gl.boardService.moveIssue(issue.id, null, null, null, moveBeforeId);\napp/assets/javascripts/boards/components/boards_selector.vue:        gl.boardService\napp/assets/javascripts/boards/components/boards_selector.vue:      Promise.all([gl.boardService.allBoards(), recentBoardsPromise])\napp/assets/javascripts/boards/components/modal/index.vue:      return gl.boardService\napp/assets/javascripts/boards/components/board_form.vue:        gl.boardService\napp/assets/javascripts/boards/components/board_form.vue:        gl.boardService\napp/assets/javascripts/boards/services/board_service.js:export default class BoardService {\napp/assets/javascripts/boards/services/board_service.js:window.BoardService = BoardService;\n```\n\n```shell\ngrep -irl BoardService {ee/,}app/assets/javascripts\nee/app/assets/javascripts/boards/services/board_service.js\napp/assets/javascripts/boards/index.js\napp/assets/javascripts/boards/models/list.js\napp/assets/javascripts/boards/components/boards_selector.vue\napp/assets/javascripts/boards/components/modal/index.vue\napp/assets/javascripts/boards/components/board_form.vue\napp/assets/javascripts/boards/services/board_service.js\n```\n\nAs part of this we also need to move tests from `spec/frontend/boards/services/board_service_spec.js` to `spec/javascripts/boards/boards_store_spec.js`.","state":"closed","created_at":"2019-05-09T09:21:01.716Z","updated_at":"2022-05-19T16:09:20.059Z","closed_at":"2019-12-05T13:52:59.862Z","closed_by":{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"},"labels":["Category:Team Planning","Community contribution","Deliverable","backstage [DEPRECATED]","boards","devops::plan","frontend","group::project management","maintenance::refactor","workflow::in dev"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":583919,"username":"nuwe1","name":"Marvin Karegyeya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/583919/avatar.png","web_url":"https://gitlab.com/nuwe1"},{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":583919,"username":"nuwe1","name":"Marvin Karegyeya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/583919/avatar.png","web_url":"https://gitlab.com/nuwe1"},"user_notes_count":25,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28616","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28616","notes":"https://gitlab.com/api/v4/projects/278964/issues/28616/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28616/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28616","relative":"#28616","full":"gitlab-org/gitlab#28616"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1278,"epic":{"id":6771,"iid":1278,"title":"Refactor issue boards store to Vuex","url":"/groups/gitlab-org/-/epics/1278","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":20718610,"iid":11548,"project_id":278964,"title":"Update the Dependency Proxy to use workhorse","description":"### Problem to solve\n\nThe Dependency Proxy allows users to reduce risk and reliance on external dependencies by caching frequently used packages for fast, reliable access. However, since the Rails app downloads the blobs from upstream sources, it's possible that while downloading is in progress, it will block other requests. In other words, heavy use of the dependency proxy can cause [Unicorn](https://docs.gitlab.com/omnibus/settings/unicorn.html) to be busy and delayed in serving other user requests. \n\nTo mitigate that risk we decided to enable the dependency proxy, only for users that are using the [Puma web server](https://docs.gitlab.com/omnibus/settings/puma.html). \n\nThe problem is that Puma support is experimental at this time and not recommended for production yet. In order to drive adoption, increase our user base and allow our users to take advantage of the dependency proxy, we need to remove the reliance on Unicorn for downloading dependencies so that we can ensure fast response times of the GitLab application. \n\n### Intended users\n\n- [Software Developer](https://design.gitlab.com/getting-started/personas#persona-sasha)\n- [DevOps Engineer](https://design.gitlab.com/getting-started/personas#persona-devon)\n- [Systems Administrator](https://design.gitlab.com/getting-started/personas#persona-sidney)\n\n### Proposal\n\nWe will move the download logic to workhorse and off of unicorn/puma web servers. This will ensure that we don't waste unicorn workers while downloading blobs from upstream.\n\n### Further details\n\n#### Background\n\nSee [here](https://gitlab.com/gitlab-org/gitlab-workhorse/merge_requests/379#note_156137660) for background and how we decided to only enable the feature for the Puma web server. to enable feature only for Puma web server.\n\n### Permissions and Security\n\n- There are no changes to permissions required for this change. \n- There is a separate issue to add authentication for the dependency proxy: https://gitlab.com/gitlab-org/gitlab-ee/issues/11582\n\n### Documentation\n- We will update the documentation for enabling and configuring the dependency proxy to remove the note about Puma and add any necessary clarifying details.\n\n### Testing\n- Test downloading of blobs works as expected\n- Performance testing at scale\n\n### What does success look like, and how can we measure that?\n\nSuccess looks like we agree as a team that we can roll out the dependency proxy to gitlab.com. Once live, we can track adoption of the dependency proxy by the following metrics over time:\n- `# of groups with the feature on/off`\n- `median # of items in the proxy per` \n\n### What is the type of buyer? \n\nThe goal of this project will be to bring this feature to all types of buyers. Currently the feature is limited to Premium and Ultimate customers, but rolling it out to GitLab will allow us to bring value to all customer tiers. \n\n### Links / references\n- [Dependency Proxy Docs](https://docs.gitlab.com/ee/user/group/dependency_proxy/)\n- [Container Registry Admin Docs](https://docs.gitlab.com/ee/administration/container_registry)\n- [Container Registry User Docs](https://docs.gitlab.com/ee/user/project/container_registry.html)\n- [Original workhorse conversation](https://gitlab.com/gitlab-org/gitlab-workhorse/merge_requests/379)","state":"closed","created_at":"2019-05-09T07:55:40.391Z","updated_at":"2022-08-09T12:16:57.604Z","closed_at":"2021-07-20T20:43:42.102Z","closed_by":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"labels":["Category:Dependency Proxy","GitLab Core","Package:P1","backend","customer","devops::package","golang","group::package registry","kubernetes-migration-blocker","maintenance::refactor","maturity::viable","section::ops","wg_k8s-migration","workhorse"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":3913904,"username":"dcroft","name":"Daniel Croft","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2af6159fa5cd9659356041c6a9b9ce62?s=80\u0026d=identicon","web_url":"https://gitlab.com/dcroft"}],"author":{"id":444,"username":"dzaporozhets","name":"Dmytro Zaporozhets (DZ)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/444/avatar.png","web_url":"https://gitlab.com/dzaporozhets"},"type":"ISSUE","assignee":{"id":3913904,"username":"dcroft","name":"Daniel Croft","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2af6159fa5cd9659356041c6a9b9ce62?s=80\u0026d=identicon","web_url":"https://gitlab.com/dcroft"},"user_notes_count":52,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11548","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11548","notes":"https://gitlab.com/api/v4/projects/278964/issues/11548/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11548/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11548","relative":"#11548","full":"gitlab-org/gitlab#11548"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695604,"iid":28608,"project_id":278964,"title":"CI Uploading artifacts output error 500","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n```\nUploading artifacts...\nmain: found 1 matching files                       \nWARNING: Uploading artifacts to coordinator... failed  id=60 responseStatus=500 Internal Server Error status=500 Internal Server Error token=epPn7Ash\nWARNING: Retrying...                                error=invalid argument\nWARNING: Uploading artifacts to coordinator... failed  id=60 responseStatus=500 Internal Server Error status=500 Internal Server Error token=epPn7Ash\nWARNING: Retrying...                                error=invalid argument\nWARNING: Uploading artifacts to coordinator... failed  id=60 responseStatus=500 Internal Server Error status=500 Internal Server Error token=epPn7Ash\n```\n\n### Example Project\n\n[Repo imported here](https://gitlab.com/misaka00251/Virus-Detect-Using-String). The docker image I used in the runner is \"ubuntu:latest\", which tagged as \"ubuntu\".\n\n### What is the current *bug* behavior?\n\nRequest returns `500 Internal server error`\n\n### What is the expected *correct* behavior?\n\nUpload success maybe?\n\n### Relevant logs and/or screenshots\n\n```\nNoMethodError (undefined method `exists?' for nil:NilClass):\n/opt/gitlab/embedded/service/gitlab-rails/lib/api/helpers.rb:452:in `present_carrierwave_file!'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/instrumentation.rb:161:in `block in present_carrierwave_file!'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/method_call.rb:36:in `measure'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/instrumentation.rb:161:in `present_carrierwave_file!'\n/opt/gitlab/embedded/service/gitlab-rails/lib/api/runner.rb:311:in `block (2 levels) in \u003cclass:Runner\u003e'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/endpoint.rb:57:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/endpoint.rb:57:in `block (2 levels) in generate_api_method'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/activesupport-5.0.7.2/lib/active_support/notifications.rb:166:in `instrument'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/endpoint.rb:56:in `block in generate_api_method'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/endpoint.rb:262:in `block in run'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/activesupport-5.0.7.2/lib/active_support/notifications.rb:166:in `instrument'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/endpoint.rb:243:in `run'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/endpoint.rb:313:in `block in build_stack'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/middleware/base.rb:31:in `call!'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/middleware/base.rb:24:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/middleware/base.rb:31:in `call!'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/middleware/base.rb:24:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/rack-oauth2-1.9.3/lib/rack/oauth2/server/resource.rb:20:in `_call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/rack-oauth2-1.9.3/lib/rack/oauth2/server/resource/bearer.rb:8:in `_call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/rack-oauth2-1.9.3/lib/rack/oauth2/server/abstract/handler.rb:17:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/middleware/error.rb:38:in `block in call!'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/middleware/error.rb:37:in `catch'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/middleware/error.rb:37:in `call!'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/middleware/base.rb:24:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape_logging-1.7.0/lib/grape_logging/middleware/request_logger.rb:60:in `block in call!'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape_logging-1.7.0/lib/grape_logging/middleware/request_logger.rb:58:in `catch'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape_logging-1.7.0/lib/grape_logging/middleware/request_logger.rb:58:in `call!'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/middleware/base.rb:24:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/endpoint.rb:227:in `call!'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/endpoint.rb:221:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/router/route.rb:72:in `exec'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/router.rb:121:in `process_route'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/router.rb:74:in `block in identity'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/router.rb:93:in `transaction'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/router.rb:72:in `identity'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/router.rb:57:in `block in call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/router.rb:137:in `with_optimization'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/router.rb:56:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/api.rb:119:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/api.rb:45:in `call!'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/grape-1.1.0/lib/grape/api.rb:40:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/actionpack-5.0.7.2/lib/action_dispatch/routing/mapper.rb:17:in `block in \u003cclass:Constraints\u003e'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/actionpack-5.0.7.2/lib/action_dispatch/routing/mapper.rb:46:in `serve'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/actionpack-5.0.7.2/lib/action_dispatch/journey/router.rb:39:in `block in serve'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/actionpack-5.0.7.2/lib/action_dispatch/journey/router.rb:26:in `each'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/actionpack-5.0.7.2/lib/action_dispatch/journey/router.rb:26:in `serve'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/actionpack-5.0.7.2/lib/action_dispatch/routing/route_set.rb:727:in `call'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/middleware/rails_queue_duration.rb:27:in `call'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/rack_middleware.rb:17:in `block in call'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/transaction.rb:57:in `run'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/rack_middleware.rb:17:in `call'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/middleware/multipart.rb:103:in `call'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/request_profiler/middleware.rb:16:in `call'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/middleware/go.rb:20:in `call'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/etag_caching/middleware.rb:13:in `call'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/middleware/correlation_id.rb:16:in `block in call'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/correlation_id.rb:15:in `use_id'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/middleware/correlation_id.rb:15:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/batch-loader-1.2.2/lib/batch_loader/middleware.rb:11:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/rack-attack-4.4.1/lib/rack/attack.rb:107:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/warden-1.2.7/lib/warden/manager.rb:36:in `block in call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/warden-1.2.7/lib/warden/manager.rb:35:in `catch'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/warden-1.2.7/lib/warden/manager.rb:35:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/rack-cors-1.0.2/lib/rack/cors.rb:97:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/middleware/read_only/controller.rb:40:in `call'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/middleware/read_only.rb:18:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/cookies.rb:613:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/activesupport-5.0.7.2/lib/active_support/callbacks.rb:97:in `__run_callbacks__'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/activesupport-5.0.7.2/lib/active_support/callbacks.rb:750:in `_run_call_callbacks'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/activesupport-5.0.7.2/lib/active_support/callbacks.rb:90:in `run_callbacks'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/callbacks.rb:36:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/remote_ip.rb:79:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/middleware/basic_health_check.rb:25:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/railties-5.0.7.2/lib/rails/rack/logger.rb:36:in `call_app'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/railties-5.0.7.2/lib/rails/rack/logger.rb:24:in `block in call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/activesupport-5.0.7.2/lib/active_support/tagged_logging.rb:69:in `block in tagged'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/activesupport-5.0.7.2/lib/active_support/tagged_logging.rb:26:in `tagged'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/activesupport-5.0.7.2/lib/active_support/tagged_logging.rb:69:in `tagged'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/railties-5.0.7.2/lib/rails/rack/logger.rb:24:in `call'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/request_context.rb:26:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/request_store-1.3.1/lib/request_store/middleware.rb:9:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/request_id.rb:24:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/executor.rb:12:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/requests_rack_middleware.rb:29:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/sentry-raven-2.9.0/lib/raven/integrations/rack.rb:51:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/railties-5.0.7.2/lib/rails/engine.rb:522:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/railties-5.0.7.2/lib/rails/railtie.rb:193:in `public_send'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/railties-5.0.7.2/lib/rails/railtie.rb:193:in `method_missing'\n/opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/middleware/release_env.rb:13:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/unicorn-5.4.1/lib/unicorn/http_server.rb:606:in `process_client'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/unicorn-worker-killer-0.4.4/lib/unicorn/worker_killer.rb:52:in `process_client'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/unicorn-5.4.1/lib/unicorn/http_server.rb:701:in `worker_loop'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/unicorn-5.4.1/lib/unicorn/http_server.rb:549:in `spawn_missing_workers'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/unicorn-5.4.1/lib/unicorn/http_server.rb:563:in `maintain_worker_count'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/unicorn-5.4.1/lib/unicorn/http_server.rb:293:in `join'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/unicorn-5.4.1/bin/unicorn:126:in `\u003ctop (required)\u003e'\n/opt/gitlab/embedded/bin/unicorn:23:in `load'\n/opt/gitlab/embedded/bin/unicorn:23:in `\u003ctop (required)\u003e'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/bundler-1.17.3/lib/bundler/cli/exec.rb:74:in `load'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/bundler-1.17.3/lib/bundler/cli/exec.rb:74:in `kernel_load'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/bundler-1.17.3/lib/bundler/cli/exec.rb:28:in `run'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/bundler-1.17.3/lib/bundler/cli.rb:463:in `exec'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/bundler-1.17.3/lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/bundler-1.17.3/lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/bundler-1.17.3/lib/bundler/vendor/thor/lib/thor.rb:387:in `dispatch'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/bundler-1.17.3/lib/bundler/cli.rb:27:in `dispatch'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/bundler-1.17.3/lib/bundler/vendor/thor/lib/thor/base.rb:466:in `start'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/bundler-1.17.3/lib/bundler/cli.rb:18:in `start'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/bundler-1.17.3/exe/bundle:30:in `block in \u003ctop (required)\u003e'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/bundler-1.17.3/lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/bundler-1.17.3/exe/bundle:22:in `\u003ctop (required)\u003e'\n/opt/gitlab/embedded/bin/bundle:23:in `load'\n/opt/gitlab/embedded/bin/bundle:23:in `\u003cmain\u003e'\nStarted GET \"/-/metrics\" for 127.0.0.1 at 2019-05-08 23:18:04 +0800\nProcessing by MetricsController#index as HTML\nCompleted 200 OK in 54ms (Views: 0.3ms | ActiveRecord: 0.0ms)\nStarted PATCH \"/api/v4/jobs/54/trace\" for 127.0.0.1 at 2019-05-08 23:18:04 +0800\nStarted GET \"/api/v4/jobs/54/artifacts?artifact_format=zip\u0026artifact_type=archive\" for \u003cServer_IP_Here\u003e at 2019-05-08 23:18:05 +0800\nProcessing by Gitlab::RequestForgeryProtection::Controller#index as HTML\nParameters: {\"artifact_format\"=\u003e\"zip\", \"artifact_type\"=\u003e\"archive\"}\nCompleted 200 OK in 0ms (ActiveRecord: 0.0ms)\n```\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\n\n```\nSystem information\nSystem:         Debian 9.8\nCurrent User:   git\nUsing RVM:      no\nRuby Version:   2.5.3p105\nGem Version:    2.7.6\nBundler Version:1.17.3\nRake Version:   12.3.2\nRedis Version:  3.2.12\nGit Version:    2.18.1\nSidekiq Version:5.2.5\nGo Version:     unknown\n\nGitLab information\nVersion:        11.10.4\nRevision:       62c464651d2\nDirectory:      /opt/gitlab/embedded/service/gitlab-rails\nDB Adapter:     PostgreSQL\nDB Version:     9.6.11\nURL:            http://gite\nHTTP Clone URL: http://git.example.com/some-group/some-project.git\nSSH Clone URL:  ssh://git@git.example.com:10777/some-group/some-project.git\nUsing LDAP:     no\nUsing Omniauth: yes\nOmniauth Providers:\n\nGitLab Shell\nVersion:        9.0.0\nRepository storage paths:\n- default:      /var/opt/gitlab/git-data/repositories\nGitLab Shell path:              /opt/gitlab/embedded/service/gitlab-shell\nGit:            /opt/gitlab/embedded/bin/git\n```\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab application info\u003c/summary\u003e\n\u003cpre\u003e\n\n```\nChecking GitLab subtasks ...\n\nChecking GitLab Shell ...\n\nGitLab Shell: ... GitLab Shell version \u003e= 9.0.0 ? ... OK (9.0.0)\nRunning /opt/gitlab/embedded/service/gitlab-shell/bin/check\nCheck GitLab API access: OK\nRedis available via internal API: OK\n\nAccess to /var/opt/gitlab/.ssh/authorized_keys: OK\ngitlab-shell self-check successful\n\nChecking GitLab Shell ... Finished\n\nChecking Gitaly ...\n\nGitaly: ... default ... OK\n\nChecking Gitaly ... Finished\n\nChecking Sidekiq ...\n\nSidekiq: ... Running? ... yes\nNumber of Sidekiq processes ... 1\n\nChecking Sidekiq ... Finished\n\nChecking Incoming Email ...\n\nIncoming Email: ... Reply by email is disabled in config/gitlab.yml\n\nChecking Incoming Email ... Finished\n\nChecking LDAP ...\n\nLDAP: ... LDAP is disabled in config/gitlab.yml\n\nChecking LDAP ... Finished\n\nChecking GitLab App ...\n\nGit configured correctly? ... yes\nDatabase config exists? ... yes\nAll migrations up? ... yes\nDatabase contains orphaned GroupMembers? ... no\nGitLab config exists? ... yes\nGitLab config up to date? ... yes\nLog directory writable? ... yes\nTmp directory writable? ... yes\nUploads directory exists? ... yes\nUploads directory has correct permissions? ... yes\nUploads directory tmp has correct permissions? ... yes\nInit script exists? ... skipped (omnibus-gitlab has no init script)\nInit script up-to-date? ... skipped (omnibus-gitlab has no init script)\nProjects have namespace: ...\n1/1 ... yes\n1/2 ... yes\n3/5 ... yes\n3/6 ... yes\n1/8 ... yes\n5/9 ... yes\n1/11 ... yes\n1/12 ... yes\nRedis version \u003e= 2.8.0? ... yes\nRuby version \u003e= 2.5.3 ? ... yes (2.5.3)\nGit version \u003e= 2.18.0 ? ... yes (2.18.1)\nGit user has default SSH configuration? ... yes\nActive users: ... 2\n\nChecking GitLab App ... Finished\n\n\nChecking GitLab subtasks ... Finished\n```\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n;(","state":"closed","created_at":"2019-05-08T16:16:21.992Z","updated_at":"2019-12-17T15:42:21.734Z","closed_at":"2019-10-30T15:07:17.795Z","closed_by":{"id":722076,"username":"matteeyah","name":"Matija ÄŒupiÄ‡","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8bc04cc15e0adba406cf56fecd9d910a?s=80\u0026d=identicon","web_url":"https://gitlab.com/matteeyah"},"labels":["Category:Continuous Integration","awaiting feedback","devops::verify","group::pipeline execution","missed-SLO","priority::2","severity::2","type::bug"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":722076,"username":"matteeyah","name":"Matija ÄŒupiÄ‡","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8bc04cc15e0adba406cf56fecd9d910a?s=80\u0026d=identicon","web_url":"https://gitlab.com/matteeyah"}],"author":{"id":42827,"username":"misaka00251","name":"misaka00251","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d42048840d764b5c7c0a50a836183692?s=80\u0026d=identicon","web_url":"https://gitlab.com/misaka00251"},"type":"ISSUE","assignee":{"id":722076,"username":"matteeyah","name":"Matija ÄŒupiÄ‡","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8bc04cc15e0adba406cf56fecd9d910a?s=80\u0026d=identicon","web_url":"https://gitlab.com/matteeyah"},"user_notes_count":19,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28608","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":0,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28608","notes":"https://gitlab.com/api/v4/projects/278964/issues/28608/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28608/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28608","relative":"#28608","full":"gitlab-org/gitlab#28608"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20686345,"iid":11540,"project_id":278964,"title":"Support emails as ID in SCIM","description":"See https://gitlab.com/gitlab-org/gitlab-ee/issues/5014#note_167732947\n\nWe should support emails as the ID in SCIM. This could be a simple fix (adding requirements to the ID param in the API).","state":"closed","created_at":"2019-05-08T08:19:11.391Z","updated_at":"2019-08-12T15:00:53.432Z","closed_at":"2019-07-10T13:01:05.503Z","closed_by":{"id":273486,"username":"jameslopez","name":"James Lopez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/273486/avatar.png","web_url":"https://gitlab.com/jameslopez"},"labels":["Enterprise Edition","Manage [DEPRECATED]","backend","customer","devops::manage","estimation::completed","group::authentication and authorization","priority::1","saml","scim","severity::2","type::bug","workflow::in dev"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"}],"author":{"id":273486,"username":"jameslopez","name":"James Lopez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/273486/avatar.png","web_url":"https://gitlab.com/jameslopez"},"type":"ISSUE","assignee":{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"},"user_notes_count":2,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11540","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11540","notes":"https://gitlab.com/api/v4/projects/278964/issues/11540/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11540/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11540","relative":"#11540","full":"gitlab-org/gitlab#11540"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20668909,"iid":11532,"project_id":278964,"title":"New issue in issue board shows weight only after page refresh","description":"### Steps to reproduce\n\n- create issue board scoped to some weight (for example `weight: 4`)\n- add new list to issue board\n- create new issue in list\n\n### What is the current *bug* behavior?\n\nweight of the board scope is persisted on the issue but not immediately visible:\n\n![Screen_Recording_2019-05-07_at_22.41.32](/uploads/391f042975cc5137ae20170365692666/Screen_Recording_2019-05-07_at_22.41.32.mp4)\n\n### What is the expected *correct* behavior?\n\nweight is immediately visible\n\n### Possible fixes\n\nUse the `ListIssueEE` model in `board_new_issue.vue` and pass the weight:\n\n```diff\ndiff --git a/app/assets/javascripts/boards/components/board_new_issue.vue b/app/assets/javascripts/boards/components/board_new_issue.vue\nindex dc1bdc23b5e..0636b33b33a 100644\n--- a/app/assets/javascripts/boards/components/board_new_issue.vue\n+++ b/app/assets/javascripts/boards/components/board_new_issue.vue\n@@ -2,9 +2,9 @@\n import $ from 'jquery';\n import { GlButton } from '@gitlab/ui';\n import { getMilestone } from 'ee_else_ce/boards/boards_util';\n+import ListIssue from 'ee_else_ce/boards/models/issue';\n import eventHub from '../eventhub';\n import ProjectSelect from './project_select.vue';\n-import ListIssue from '../models/issue';\n import boardsStore from '../stores/boards_store';\n\n export default {\n@@ -54,6 +54,10 @@ export default {\n       const assignees = this.list.assignee ? [this.list.assignee] : [];\n       const milestone = getMilestone(this.list);\n\n+      const { weightFeatureAvailable } = boardsStore;\n+      const { weight } = weightFeatureAvailable ? boardsStore.state.currentBoard : {};\n+\n       const issue = new ListIssue({\n         title: this.title,\n         labels,\n@@ -61,6 +65,7 @@ export default {\n         assignees,\n         milestone,\n         project_id: this.selectedProject.id,\n+        weight,\n       });\n\n       eventHub.$emit(`scroll-board-list-${this.list.id}`);\n```","state":"closed","created_at":"2019-05-07T20:55:12.798Z","updated_at":"2022-05-19T16:09:04.635Z","closed_at":"2019-09-11T05:26:07.775Z","closed_by":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"labels":["Category:Team Planning","Community contribution","Enterprise Edition","boards","devops::plan","frontend","group::project management","priority::4","reproduced on GitLab.com","severity::3","type::bug"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11532","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11532","notes":"https://gitlab.com/api/v4/projects/278964/issues/11532/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11532/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11532","relative":"#11532","full":"gitlab-org/gitlab#11532"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20667849,"iid":11529,"project_id":278964,"title":"Not possible to set weight of board scope to None or 0","description":"### Steps to reproduce\n\n- open issue board\n- click edit board\n- select `none` or `0` as weight\n\n### What is the current *bug* behavior?\n\nselected weight is not persisted, `any weight` is shown instead:\n\n![Screen_Recording_2019-05-07_at_21.37.49](/uploads/32a04413e67fa32833c205f135f8ce99/Screen_Recording_2019-05-07_at_21.37.49.mp4)\n\n### What is the expected *correct* behavior?\n\n- issues with no weight set are shown for `none`\n- issues with weight set to `0` are shown for `0`\n\n**Blocked by: https://gitlab.com/gitlab-org/gitlab/issues/12588**","state":"closed","created_at":"2019-05-07T19:48:51.220Z","updated_at":"2022-05-19T16:09:04.208Z","closed_at":"2020-04-22T22:16:00.001Z","closed_by":{"id":636429,"username":"mikegreiling","name":"Mike Greiling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/636429/avatar.png","web_url":"https://gitlab.com/mikegreiling"},"labels":["Category:Team Planning","Enterprise Edition","backend","boards","customer","devops::plan","frontend","group::project management","missed-SLO","missed-deliverable","missed:12.1","missed:12.10","missed:12.9","priority::2","regression","regression:11.0","reproduced on GitLab.com","severity::2","type::bug","workflow::verification"],"milestone":{"id":991112,"iid":42,"group_id":9970,"title":"13.0","description":"","state":"closed","created_at":"2019-09-04T15:20:39.024Z","updated_at":"2020-10-08T12:00:55.725Z","due_date":"2020-05-17","start_date":"2020-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/42"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},{"id":4554611,"username":"hollyreynolds","name":"Holly Reynolds","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4554611/avatar.png","web_url":"https://gitlab.com/hollyreynolds"},{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":34,"merge_requests_count":2,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11529","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11529","notes":"https://gitlab.com/api/v4/projects/278964/issues/11529/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11529/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11529","relative":"#11529","full":"gitlab-org/gitlab#11529"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20659642,"iid":11527,"project_id":278964,"title":"Clicking on Suggested Approvers when creating and editing a merge request does nothing","description":"### Summary\n\nZendesk ticket: https://gitlab.zendesk.com/agent/tickets/120395 (internal-only link)\n\nClicking on suggested approvers when creating and editing a merger request does nothing.\n\nReproduced on 11.10.2-ee and GitLab.com running 11.11.0-rc1-ee.\n\n### Steps to reproduce\n\n- Create a new project as `user1` and author some files, e.g. a README.\n- Add another user, `user2`, as a member of the project with at least Developer access.\n- Set required approvals to `1`\n- Create a new merge request as `user2` updating the README.\n- *Suggested approvers:* shows approvers based on the previous authors of the files affected by the merge request. In my test case, this was `user1`.\n- Click on `user2` and observe nothing happens.\n\n### Example Project\n\n#### Reproduced on GitLab.com\n\nhttps://gitlab.com/dummy-projects/ticket-120395/merge_requests/1\n\n### What is the current *bug* behavior?\n\n- Clicking on the suggested approver(s) does nothing.\n\n### What is the expected *correct* behavior?\n\n- Clicking on the suggested approver should add the approver.\n\n### Relevant logs and/or screenshots\n\n- I observed no errors in the logs on my local test instance.\n- No errors in Chrome DevTools\n- Once the merge request is submitted, click on edit and click on any suggested approver and nothing happens\n - Hover on a user and the URL goes to `http://collen-gitlab-test/my-group/some-project/merge_requests/5/edit#` on my test instance and to `https://gitlab.com/dummy-projects/ticket-120395/merge_requests/1/edit#` on the GitLab.com project above.","state":"closed","created_at":"2019-05-07T15:50:09.459Z","updated_at":"2021-03-02T15:15:28.430Z","closed_at":"2021-03-02T13:21:46.178Z","closed_by":{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},"labels":["Category:Code Review Workflow","Category:Source Code Management","UX","[deprecated] Accepting merge requests","approvals","customer","devops::create","frontend","group::code review","merge requests","needs investigation","priority::2","regression","regression:11.10","reviewers","section::dev","severity::3","type::bug"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":729699,"username":"collen","name":"Collen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/851083251c4f8fbbe1baa52c98fd0707?s=80\u0026d=identicon","web_url":"https://gitlab.com/collen"},"type":"ISSUE","assignee":null,"user_notes_count":17,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11527","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11527","notes":"https://gitlab.com/api/v4/projects/278964/issues/11527/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11527/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11527","relative":"#11527","full":"gitlab-org/gitlab#11527"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4560,"epic":{"id":123080,"iid":4560,"title":"ðŸ‘ Merge request reviewers improvements","url":"/groups/gitlab-org/-/epics/4560","group_id":9970,"human_readable_end_date":"Sep 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24695556,"iid":28589,"project_id":278964,"title":"Emoji status popover doesn't show emoji when it's in the message","description":"When using an emoji only status message it does not get displayed correctly in the gray popover.\n![Screenshot_2019-05-07_at_14.42.30](/uploads/f04803320285ea389aa9c626b2a6d215/Screenshot_2019-05-07_at_14.42.30.png)\n\n![emoji](/uploads/e6ed9a64f77ef4150fe0332cc95099c0/emoji.png)\n\n![code](/uploads/43b88bbcfe76a5a8ed8a91bcdfd2daf0/code.png)\n\nAlso the title is using the HTML\n\n![Screenshot_2019-05-07_at_14.42.05](/uploads/6f66ed7ec5fa324809483998f8abb712/Screenshot_2019-05-07_at_14.42.05.png)\n\n\nMight be related to https://gitlab.com/gitlab-org/gitlab-ce/issues/55876 or https://gitlab.com/gitlab-org/gitlab-ce/issues/53998","state":"closed","created_at":"2019-05-07T12:52:17.342Z","updated_at":"2020-05-25T09:08:43.195Z","closed_at":"2020-05-22T18:26:32.956Z","closed_by":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"labels":["Category:Authentication and Authorization","Manage [DEPRECATED]","devops::manage","estimation::completed","frontend","group::authentication and authorization","priority::4","reproduced on GitLab.com","severity::4","type::bug","workflow::verification"],"milestone":{"id":1112145,"iid":47,"group_id":9970,"title":"13.1","description":"","state":"closed","created_at":"2020-01-03T12:28:30.160Z","updated_at":"2020-10-08T12:01:07.361Z","due_date":"2020-06-17","start_date":"2020-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/47"},"assignees":[{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"}],"author":{"id":3953171,"username":"hell1","name":"Jannis Hell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2f612ae0b96210481e1c49996d80794b?s=80\u0026d=identicon","web_url":"https://gitlab.com/hell1"},"type":"ISSUE","assignee":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"user_notes_count":7,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28589","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28589","notes":"https://gitlab.com/api/v4/projects/278964/issues/28589/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28589/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28589","relative":"#28589","full":"gitlab-org/gitlab#28589"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20652033,"iid":11522,"project_id":278964,"title":"Run Code Quality offline","description":"### Summary\n\nCodeclimate can't run offline at all. The job template has a hardcoded image repository, but even hacking around that, it attempts to pull other images to do the scanning that are not configurable at all (probably baked into the code upstream?).\n\nReferences:\n\n* https://gitlab.com/gitlab-org/gitlab-ce/blob/master/lib/gitlab/ci/templates/Jobs/Code-Quality.gitlab-ci.yml#L19\n\n### Steps to reproduce\n\nInstall GitLab in a closed network with no internet access and try to get the security scans to work.\n\n### Example Project\n\nCannot since it is on a closed network\n\n### What is the current *bug* behavior?\n\nThe Code Quality job cannot run when in an offline instance of GitLab.\n\n### What is the expected *correct* behavior?\n\nThe Code Quality Job can utilize a local docker image to run with an offline instance of GitLab.\n\n### Relevant logs and/or screenshots\n\nLogs cannot be copied off closed network\n\n### Output of checks\n\nLogs cannot be copied off closed network\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\nLatest Omnibus was used, output cannot be shared due to being on a closed network.\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\nLatest Omnibus was used, output cannot be shared due to being on a closed network.\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\nThis is possibly fixed with https://gitlab.com/gitlab-org/gitlab/merge_requests/20604/diffs#f38c8f542eca884bb12d93e0d20bd06b1774c6fe_10_10. This change will be to update docs to reflect how to implement this with that change.","state":"closed","created_at":"2019-05-07T12:28:50.289Z","updated_at":"2020-07-14T13:33:31.363Z","closed_at":"2020-02-18T23:08:50.255Z","closed_by":{"id":2469083,"username":"erushton","name":"Elliot Rushton","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4194662ce4a5b5f53e61689fd7a2daf9?s=80\u0026d=identicon","web_url":"https://gitlab.com/erushton"},"labels":["Category:Code Quality","Enterprise Edition","backend","customer","depth","devops::verify","group::pipeline insights","type::feature","workflow::verification"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":1758950,"username":"iamricecake","name":"Erick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1758950/avatar.png","web_url":"https://gitlab.com/iamricecake"}],"author":{"id":3417091,"username":"kevinchasse","name":"Kevin Chasse","state":"active","avatar_url":"https://secure.gravatar.com/avatar/9ec5dcdd804e303a83506bbe634e1faa?s=80\u0026d=identicon","web_url":"https://gitlab.com/kevinchasse"},"type":"ISSUE","assignee":{"id":1758950,"username":"iamricecake","name":"Erick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1758950/avatar.png","web_url":"https://gitlab.com/iamricecake"},"user_notes_count":42,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11522","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11522","notes":"https://gitlab.com/api/v4/projects/278964/issues/11522/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11522/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11522","relative":"#11522","full":"gitlab-org/gitlab#11522"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20651557,"iid":11520,"project_id":278964,"title":"Document steps to run offline SAST for self-hosted instances","description":"\n### Problem to solve\n\nOur ~\"sast\" tools currently require internet connectivity to run using standard configurations. We should aim to provide clear documentation on how to configure scanners for offline runs.\n\n### Intended users\n\n~\"Persona: Software developer\" \n~\"Persona: Development Team Lead\" \n\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\n\nWe will verify testing does not come up with any SAST scans that do not work, with the documented work arounds, offline.\n\n### Proposal\n\nThis [is currently possible and supported](https://gitlab.com/gitlab-org/gitlab-ee/issues/11520#note_189614087) with our ~sast tools but requires custom configuration. We should improve the documentation around this setup to make it easier for our customers to set this up themselves.\n\n### Permissions and Security\n\nno changes\n\n### Documentation\n\nTo document:\n\n- [x] how to create a CI config based on SAST vendored template and specify a `sast` image from local Docker registry in the `script` section\n- [x] how to leverage `SAST_ANALYZER_IMAGE_PREFIX` to fetch the analyzers' images from a local registry\n- [x] How many separate analyzer images are required for full functionality offline?\n- [x] Is there a list of all the required analyzer images (full list and per language)?\n- [x] How can a customer pull or build all required images and push them to the registry of an air-gapped machine? (Maybe a script (in Ruby) can be handy for making this a one-off action.) https://gitlab.com/gitlab-org/gitlab/-/merge_requests/27535\n\n### Testing\n\nVerify with documented work around all SAST scanners work. If any do not work make specific issues to work that problem.\n\n### What does success look like, and how can we measure that?\n\nall sast scans can be run offline after following the documentation.\n\n### What is the type of buyer? \n\n~\"GitLab Ultimate\" \n\n### Links / references\n\n-----\n\n\u003cdetails\u003e\n\u003csummary\u003eOriginal Description.\u003c/summary\u003e\n\n### Problem to solve\n\nFor our security scanning templated jobs such as [Sast](https://gitlab.com/gitlab-org/gitlab-ce/blob/c342c07899ef6637eef7c1df2534f0c5ea67d7bd/lib/gitlab/ci/templates/Security/Dependency-Scanning.gitlab-ci.yml) we use an image from GitLab.com registry inside of the `script` which forces the user to download images from the internet, which in certain environments is not allowed.\n\nExamples:\n\nhttps://gitlab.com/gitlab-org/gitlab-ce/blob/c342c07899ef6637eef7c1df2534f0c5ea67d7bd/lib/gitlab/ci/templates/Security/Dependency-Scanning.gitlab-ci.yml#L46\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\nPersonas can be found at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\n- [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer) which works on a GitLab instance that is in a closed network which does not have access to the internet.\n\n### Further details\n\nhttps://gitlab.com/gitlab-org/gitlab-ee/issues/11520#note_167683976\n\n### Proposal\n\nAllow user to specify which image to use.\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements --\u003e\n\nUpdate https://gitlab.com/gitlab-org/security-products/sast#settings\n\n\u003c/details\u003e\n\n## Product\n- [ ] [release post](https://gitlab.com/gitlab-com/www-gitlab-com/merge_requests/38081)\n- [ ] [user documentation](https://gitlab.com/gitlab-org/gitlab/merge_requests/22713)\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2019-05-07T12:19:12.157Z","updated_at":"2022-03-25T21:50:15.107Z","closed_at":"2020-03-23T17:49:48.276Z","closed_by":{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"},"labels":["Category:SAST","Enterprise Edition","GitLab Ultimate","SAST: Advanced Config","Stretch","backend","backend-weight::2","customer","customer+","devops::secure","direction","feature::enhancement","group::static analysis","missed:12.5","missed:12.8","planning priority","release post item","secure offline scanning","type::feature","workflow::verification"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"}],"author":{"id":3417091,"username":"kevinchasse","name":"Kevin Chasse","state":"active","avatar_url":"https://secure.gravatar.com/avatar/9ec5dcdd804e303a83506bbe634e1faa?s=80\u0026d=identicon","web_url":"https://gitlab.com/kevinchasse"},"type":"ISSUE","assignee":{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"},"user_notes_count":86,"merge_requests_count":1,"upvotes":8,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11520","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":5},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"5 of 7 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11520","notes":"https://gitlab.com/api/v4/projects/278964/issues/11520/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11520/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11520","relative":"#11520","full":"gitlab-org/gitlab#11520"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2338,"epic":{"id":16333,"iid":2338,"title":"Support air-gapped (offline) SAST \u0026 Secret Detection for on-prem instances","url":"/groups/gitlab-org/-/epics/2338","group_id":9970,"human_readable_end_date":"Apr 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24695519,"iid":28572,"project_id":278964,"title":"Fix to-do assignment for subsequent approvals required on same MR","description":"### Summary\nWhen an approver is initially assigned on a MR, it creates a to-do for the approval (expected), however if they approve the MR the to-do is removed and a new one is not created when new approval is required.\n\n\n### Steps to reproduce\nAs a developer, I open MR. Tag people for review, I require 2 approvals. Person A approves it, which removes it as a to-do for person A. Person B asks for a change. I make the change, which clears the approval from person A but does not re-add it as a to-do for them.\n\n### Feature flag\n\nThe change in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/26077 is default-on behind the following feature flag:\n\n```\n:create_approval_todos_on_mr_update\n```","state":"closed","created_at":"2019-05-07T00:21:43.911Z","updated_at":"2022-09-13T14:26:14.528Z","closed_at":"2020-03-27T12:41:02.183Z","closed_by":{"id":4554599,"username":"m_gill","name":"Michelle Gill","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4554599/avatar.png","web_url":"https://gitlab.com/m_gill"},"labels":["Category:Code Review Workflow","Deliverable","approvals","backend","customer","devops::create","group::code review","merge requests","missed-SLO","notifications","priority::2","severity::2","type::bug","workflow::verification"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":2167502,"username":"robotmay_gitlab","name":"Robert May","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2167502/avatar.png","web_url":"https://gitlab.com/robotmay_gitlab"}],"author":{"id":1871222,"username":"pharlan","name":"Patrick Harlan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1871222/avatar.png","web_url":"https://gitlab.com/pharlan"},"type":"ISSUE","assignee":{"id":2167502,"username":"robotmay_gitlab","name":"Robert May","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2167502/avatar.png","web_url":"https://gitlab.com/robotmay_gitlab"},"user_notes_count":11,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28572","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28572","notes":"https://gitlab.com/api/v4/projects/278964/issues/28572/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28572/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28572","relative":"#28572","full":"gitlab-org/gitlab#28572"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20634271,"iid":11515,"project_id":278964,"title":"Persistent XSS via e-mail when adding an approver to a merge request","description":"**[HackerOne report #496973](https://hackerone.com/reports/496973)** by `mario-areias` on 2019-02-16, assigned to `asaba`:\n\n**Summary:**  \nThe vulnerability consists in the ability to create branch names that contain characters such as `\u003c\u003e/`. This branch name is sent via e-mail which is rendered as HTML.\n\n**Description:**  \nOne way to exploit this is by forking a repository. Then an attacker would create a branch called `\u003cscript\u003ealert(1)\u003c/script\u003e` and make a simple change. Now the attacker creates a merge request to the original repository and assign a reviewer to it. The reviewer will receive the e-mail with the branch name not sanitised. \n\nAnother way to exploit is to by adding Gitlab users to a repository the attacker controls and assign them to review merge requests.\n\n## Steps To Reproduce:\n\nNote: These instructions work on GDK with the latest version. I wasn't sure if it is allowed to test something like on gitlab.com\n\n  1.  Choose a public repository and fork it (let's say HTML5 boilerplate)  \n  2. Go through the repository main page http://yourserver:3000/root/html5-boilerplate  \n  3. Click on the button + button and select New File  \n  4. Create any file but choose a different target branch (something like `\u003cscript\u003ealert(1)\u003c/script\u003e`\n  5. Gitlab will direct you to a page to create a new merge request from your recently create branch to master. Ignore that.  \n  6. Open a New Merge Request  \n  7. Select Source Branch as your fork and the recently created branch  \n  8. As for Target branch select the original repo and master  \n  9. Click submit  \n10. Select one the maintainers of the original repo   \n11. Submit  \n12. Go to letter opener (/rails/letter_opener/)  \n13. See the alert popping up.\n\nThe steps above only require UI, but an attacker can create a branch name through git client as well. The create branch option UI protects against this attack.\n\nThere is also another version of the attack, where a repository owner can add any Gitlab users to become members of her repo. The attacker now create a Merge Request in his own repo and assign the new member to it. Same result. \n\n## Supporting Material/References:\n\n* Vulnerable code at `gitlab-ce/app/views/notify/new_merge_request_email.html.haml` line 6. This is the exploit above.  \n* Vulnerable code at `gitlab-ce/app/views/notify/repository_push_email.text.haml` line 49. I haven't created an exploit for this one, but I would assume it should be similar.\n\n## Impact\n\nE-mail clients nowadays are well protected against XSS. However, a malicious user could use Gitlab's name to mislead users. The problem with this vulnerability is the reach. It is my understanding, an attacker can add whoever is a Gitlab user as a member of her own repo. So she could send malicious e-mails to them. I would usually say that is a low vulnerability, however, given the number of users that could be affected I would say is a medium","state":"closed","created_at":"2019-05-06T21:29:12.383Z","updated_at":"2019-08-30T22:55:43.914Z","closed_at":"2019-07-30T10:25:09.709Z","closed_by":{"id":4056133,"username":"jeremymatos","name":"Jeremy Matos","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7c972d878793ca2302186e5d8c0c0dd8?s=80\u0026d=identicon","web_url":"https://gitlab.com/jeremymatos"},"labels":["Create [DEPRECATED]","Deliverable","Enterprise Edition","HackerOne","backend","devops::create","group::source code","priority::2","security","severity::3","workflow::verification"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-06-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11515","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11515","notes":"https://gitlab.com/api/v4/projects/278964/issues/11515/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11515/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11515","relative":"#11515","full":"gitlab-org/gitlab#11515"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695496,"iid":28560,"project_id":278964,"title":"Fix Rails optimistic locking when value in column is NULL for Issuables","description":"We've had issues with optimistic locking in issues and MRs because our `lock_version` columns can contain NULLs. https://gitlab.com/gitlab-com/gl-infra/production/issues/821 is one of these, and there are some links from there to previous cases.\n\nhttps://github.com/rails/rails/pull/26050 was intended to fix this, but didn't. @engwan pointed out a bug here: https://github.com/rails/rails/blob/v5.1.7/activerecord/lib/active_record/locking/optimistic.rb#L83\n\n```ruby\nprevious_lock_value = read_attribute_before_type_cast(locking_column)\n```\n\nThis is reading the value from the attribute on the model, which is already dirtied. So if `lock_version` was `NULL` in the DB, and the user passed `0`, this would return `0`, not `NULL`. The update would then fail as the column doesn't have `0`: https://github.com/rails/rails/blob/v5.1.7/activerecord/lib/active_record/locking/optimistic.rb#L91\n\n\n\n### UPDATE\n\nThis issue will track Issuables (Issues, Merge Requests, Epics) only, while https://gitlab.com/gitlab-org/gitlab/issues/207306 has been created for the rest of the tables, since we want to wait until after running the required migrations to see the impact in the system to run the rest. We've also created https://gitlab.com/gitlab-org/gitlab/issues/207312 to actually wrap this up after the migrations are done","state":"closed","created_at":"2019-05-06T19:02:58.035Z","updated_at":"2022-05-19T16:09:18.272Z","closed_at":"2020-03-12T19:23:49.008Z","closed_by":{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"},"labels":["backend","devops::plan","group::project management","missed-deliverable","missed:12.3","missed:12.4","missed:12.5","missed:12.6","missed:12.7","missed:12.8","priority::3","severity::4","type::bug","upstream deps","workflow::verification"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"}],"author":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"type":"ISSUE","assignee":{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28560","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28560","notes":"https://gitlab.com/api/v4/projects/278964/issues/28560/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28560/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28560","relative":"#28560","full":"gitlab-org/gitlab#28560"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20626319,"iid":11504,"project_id":278964,"title":"Improve Geo selective sync worker to avoid repeated individual SELECTs on project registry","description":"The following discussion from !11998 should be addressed:\n\n- [ ] @nick.thomas started a [discussion](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/11998#note_166474152):  (+4 comments)\n\n    \u003e I'm not sure we need this extra check, given we've *only just* pulled the list of projects from the database, and the `Geo::RepositoryCleanupWorker` operates fine even if the project has been removed.\n    \u003e \n    \u003e What's the thinking behind it?\n\nAt present, the `Geo::RepositoriesCleanupWorker` first looks up a set of projects, then performs a lot of `exists?` queries for individual `geo_project_registry` rows when scheduling project destruction. It does this to avoid scheduling destructions for projects that have not been tracked yet.\n\nIf we move from, say, all repository shards being tracked, to just a single shard being tracked, this could easily be on the order of 7 million lookups.\n\nWe should improve this by joining the two tables and only returning projects that have a registry entry in the first place. This isn't possible at the moment due to fdw vs. non-fdw concerns, but should be possible from %12.0 when FDW will be mandatory.","state":"closed","created_at":"2019-05-06T16:33:41.802Z","updated_at":"2019-12-16T11:56:38.654Z","closed_at":"2019-07-30T00:01:05.632Z","closed_by":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"labels":["Enterprise Edition","bug::performance","devops::systems","group::geo","workflow::in review"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"}],"author":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":1,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11504","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11504","notes":"https://gitlab.com/api/v4/projects/278964/issues/11504/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11504/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11504","relative":"#11504","full":"gitlab-org/gitlab#11504"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":576,"epic":{"id":2208,"iid":576,"title":"Geo: Selective Sync Enhancements","url":"/groups/gitlab-org/-/epics/576","group_id":9970,"human_readable_end_date":"Aug 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24695480,"iid":28553,"project_id":278964,"title":"MR: When target branch is deleted, sidebar in MR is not loaded","description":"MR: When target branch is deleted, sidebar in MR is not loaded:\n\n![Screenshot_2019-05-06_at_16.29.54](/uploads/ee6ea749329726c6fcc0361ee4a42a31/Screenshot_2019-05-06_at_16.29.54.png)","state":"closed","created_at":"2019-05-06T15:30:30.265Z","updated_at":"2021-04-21T16:21:15.522Z","closed_at":"2020-02-13T22:20:44.000Z","closed_by":{"id":853414,"username":"andr3","name":"AndrÃ© LuÃ­s","state":"active","avatar_url":"https://secure.gravatar.com/avatar/241e39726efb512a29621070ccf26a90?s=80\u0026d=identicon","web_url":"https://gitlab.com/andr3"},"labels":["Category:Code Review Workflow","Deliverable","[deprecated] Accepting merge requests","devops::create","frontend","group::code review","merge requests","missed-SLO","priority::2","severity::2","type::bug","workflow::ready for development"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[],"author":{"id":482476,"username":"filipa","name":"Filipa Lacerda","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/482476/avatar.png","web_url":"https://gitlab.com/filipa"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28553","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28553","notes":"https://gitlab.com/api/v4/projects/278964/issues/28553/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28553/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28553","relative":"#28553","full":"gitlab-org/gitlab#28553"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20622886,"iid":11501,"project_id":278964,"title":"Geo Docs: Explicitly set node name instead of relying on backward-compatibility logic","description":"Follow up for https://gitlab.com/gitlab-org/gitlab/merge_requests/12252. This MR proved that even the Geo developer that added GeoNode name (me) can forget that it needs a trailing slash if the setting wasn't set (and was left to default to external_url).\n\n## Proposal\n\nThe Geo setup docs should instruct you to set `gitlab_rails['geo_node_name']`. We shouldn't expose people to the confusing backwards-compatibility rule: \"add a trailing slash if you're letting it default to external_url\".\n\n- [ ] Modify [Add the secondary node](https://docs.gitlab.com/ee/administration/geo/replication/configuration.html#step-3-add-the-secondary-node) section. Add a step to set `geo_node_name`. And check out https://gitlab.com/gitlab-org/gitlab-development-kit/blob/master/doc/howto/geo.md#add-secondary-node for some ideas.\n\nThe primary node record is created by a command, which is reliable. But setting `geo_node_name` on the primary would avoid confusion when sysadmins are modifying nodes or failing over. So let's also:\n\n- [ ] Modify [Configure the primary server](https://docs.gitlab.com/ee/administration/geo/replication/database.html#step-1-configure-the-primary-server) section. E.g.:\n  1. Set `geo_node_name` in gitlab.rb\n  2. Run `gitlab-ctl set-geo-primary-node`\n\nSimilarly for Geo HA docs:\n\n- [ ] Modify https://docs.gitlab.com/ee/administration/geo/replication/high_availability.html#step-1-configure-the-primary-frontend-servers (set `geo_node_name` on frontend servers)\n- [ ] Modify https://docs.gitlab.com/ee/administration/geo/replication/high_availability.html#step-4-configure-the-frontend-application-servers-on-the-secondary-node (set `geo_node_name` on frontend servers)","state":"closed","created_at":"2019-05-06T14:44:35.844Z","updated_at":"2019-12-11T20:03:08.269Z","closed_at":"2019-10-15T00:13:13.679Z","closed_by":{"id":2683848,"username":"eread","name":"Evan Read","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2683848/avatar.png","web_url":"https://gitlab.com/eread"},"labels":["Enterprise Edition","Geo Administration","devops::systems","documentation","group::geo"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"user_notes_count":15,"merge_requests_count":1,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11501","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11501","notes":"https://gitlab.com/api/v4/projects/278964/issues/11501/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11501/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11501","relative":"#11501","full":"gitlab-org/gitlab#11501"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":913,"epic":{"id":4998,"iid":913,"title":"Geo: Improve Administrator Experience","url":"/groups/gitlab-org/-/epics/913","group_id":9970,"human_readable_end_date":"Oct 31, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":20615989,"iid":11496,"project_id":278964,"title":"Graphql: N+1 in IssueType","description":"This is a follow-up from https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/11575#note_167036203).\n\nWhen listing issues with assignees and labels, then N+1 SQL queries are done. The problem is that these associations use only the basic `connection_type`:\nhttps://gitlab.com/gitlab-org/gitlab-ce/blob/11-11-stable/app/graphql/types/issue_type.rb#L23\n\nTo avoid N+1 issue, we should use a batchloader or a resolver to load assignees/labels.\n\nYou can reproduce this by running following query in locally using graphql-explorer:\n\n```\nquery{\n  project(fullPath:\"flightjs/flight\") {\n    name\n    issues {\n      edges {\n        node {\n          labels {\n            edges {\n              node {\n                title\n              }\n            }\n          }\n          assignees {\n            edges {\n              node {\n                name\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```","state":"closed","created_at":"2019-05-06T11:29:10.069Z","updated_at":"2022-05-19T16:09:03.391Z","closed_at":"2020-09-10T21:07:29.279Z","closed_by":{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"},"labels":["Enterprise Edition","GraphQL","backend","bug::performance","devops::plan","group::project management","section::dev","workflow::verification"],"milestone":{"id":1233753,"iid":51,"group_id":9970,"title":"13.4","description":"https://about.gitlab.com/releases/2020/09/22/gitlab-13-4-released/","state":"closed","created_at":"2020-04-09T17:39:21.662Z","updated_at":"2022-04-13T14:50:33.769Z","due_date":"2020-09-17","start_date":"2020-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/51"},"assignees":[{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"}],"author":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"type":"ISSUE","assignee":{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"},"user_notes_count":22,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11496","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11496","notes":"https://gitlab.com/api/v4/projects/278964/issues/11496/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11496/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11496","relative":"#11496","full":"gitlab-org/gitlab#11496"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4005,"epic":{"id":84757,"iid":4005,"title":"[GraphQL] Aim to reduce N+1 queries","url":"/groups/gitlab-org/-/epics/4005","group_id":9970,"human_readable_end_date":"Nov 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24695448,"iid":28542,"project_id":278964,"title":"Can't make issue public if spam check fails","description":"I made https://gitlab.com/gitlab-org/gitlab-ce/issues/61457 confidential because the spam checks were annoying me, and spam checks don't apply to confidential issues.\n\nHowever, we do run spam checks when changing an issue from confidential to public. I now can't make it public, because I don't get presented with a captcha when I try to do so.","state":"closed","created_at":"2019-05-06T08:50:20.945Z","updated_at":"2022-05-19T16:09:18.087Z","closed_at":"2019-10-14T16:06:41.304Z","closed_by":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"labels":["devops::plan","frontend","group::project management","missed-SLO","priority::3","severity::3","type::bug","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"}],"author":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":41,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28542","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28542","notes":"https://gitlab.com/api/v4/projects/278964/issues/28542/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28542/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28542","relative":"#28542","full":"gitlab-org/gitlab#28542"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20584150,"iid":11477,"project_id":278964,"title":"Remove deprecated event_log_count field","description":"See https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/12146 for details\n\nWe kept this field for smooth application updates.","state":"closed","created_at":"2019-05-04T16:48:06.042Z","updated_at":"2019-12-16T14:49:43.550Z","closed_at":"2019-05-21T21:43:14.429Z","closed_by":{"id":15139,"username":"rspeicher","name":"Robert Speicher","state":"active","avatar_url":"https://secure.gravatar.com/avatar/73c8253932541a7b5cbc5d79493f2bea?s=80\u0026d=identicon","web_url":"https://gitlab.com/rspeicher"},"labels":["Category:Geo Replication","Enterprise Edition","[deprecated] Accepting merge requests","devops::systems","group::geo","workflow::in review"],"milestone":{"id":693518,"iid":33,"group_id":9970,"title":"12.0","description":"https://about.gitlab.com/releases/2019/06/22/gitlab-12-0-released/","state":"closed","created_at":"2018-10-30T16:47:37.975Z","updated_at":"2020-04-22T19:51:03.475Z","due_date":"2019-06-22","start_date":"2019-05-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/33"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"}],"author":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":"2019-06-07","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11477","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11477","notes":"https://gitlab.com/api/v4/projects/278964/issues/11477/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11477/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11477","relative":"#11477","full":"gitlab-org/gitlab#11477"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20569232,"iid":11470,"project_id":278964,"title":"Snowplow tracking for notes does not work in Firefox","description":"https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/10104 added tracking for notes. However the used `event.path` does not seem to exist in Firefox resulting to the tracking not working there and `TypeError: event.path is undefined` shown in the browser console for every click on a note.","state":"closed","created_at":"2019-05-03T18:44:57.438Z","updated_at":"2022-05-19T16:09:03.185Z","closed_at":"2019-07-12T21:05:38.746Z","closed_by":{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"},"labels":["Enterprise Edition","devops::plan","frontend","missed-SLO","priority::2","regression","regression:11.1","severity::3","snowplow tracking events","type::bug","workflow::in review"],"milestone":{"id":693520,"iid":34,"group_id":9970,"title":"12.1","description":"https://about.gitlab.com/releases/2019/07/22/gitlab-12-1-released","state":"closed","created_at":"2018-10-30T16:47:58.826Z","updated_at":"2020-04-27T16:30:09.107Z","due_date":"2019-07-22","start_date":"2019-06-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/34"},"assignees":[{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"user_notes_count":2,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11470","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11470","notes":"https://gitlab.com/api/v4/projects/278964/issues/11470/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11470/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11470","relative":"#11470","full":"gitlab-org/gitlab#11470"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20563830,"iid":11466,"project_id":278964,"title":"Follow-up to Common library update that need to be applied to all analyzers","description":"After pushing some changes to the [common](https://gitlab.com/gitlab-org/security-products/analyzers/common) library, we need to bump this dependency in all [analyzers](https://gitlab.com/gitlab-org/security-products/analyzers) and adapt the code accordingly.\n\nRelated issue: https://gitlab.com/gitlab-org/gitlab-ee/issues/10030#note_166534869\n\nThings covered in this issue:\n* Implement an automatic process to create MRs for all analyzers if version of `common` library is bumped up. For example, currently, 20 analyzers that are using `common`. If we bump up the version of `common`, we should have a process that is able to create 20 MRs(one for each analyzer) automatically.\n* Predefined title, description, labels of all generated MRs.\n\nAll the work related to changelog is addressed in this [issue](https://gitlab.com/gitlab-org/gitlab/-/issues/215546).\n\n## Implementation Plan\n\n### Work in \u003chttps://gitlab.com/gitlab-org/security-products/ci-templates/blob/master/includes-dev/analyzer.yml\u003e\n\n- [ ] Add job that can be triggered to update to a specific version of common in the test container and run tests\n- [ ] Add job that can be triggered to create an MR if the analyzer isn't using the latest version of common\n\n### Work in \u003chttps://gitlab.com/gitlab-org/security-products/analyzers/common/blob/master/.gitlab-ci.yml\u003e\n\n- [ ] Add CI stage to run tests on all analyzers with the current version of common. The analyzer tests should be non blocking in case we need to introduce breaking changes in common. Having this will make it clear how many analyzers will be broken by an MR. It also makes it clear the amount of work to required for all the MRs that will be auto generated. (enumerate the list of analyzers below this checkbox)\n- [ ] Add the stages that only get added if the CI run is for a release that will create an MR that needs to update to the newly released version of common (enumerate the list of analyzers below this checkbox)","state":"closed","created_at":"2019-05-03T15:45:53.445Z","updated_at":"2020-11-17T07:54:23.852Z","closed_at":"2020-06-01T19:11:31.525Z","closed_by":{"id":5427309,"username":"ssarka","name":"Saikat Sarkar","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/097feebc1eb82b858a9046fe9b6d9176?s=80\u0026d=identicon","web_url":"https://gitlab.com/ssarka"},"labels":["Category:Container Scanning","Category:Dependency Scanning","Category:SAST","Deliverable","Enterprise Edition","backend","backstage [DEPRECATED]","devops::secure","group::static analysis","missed-deliverable","missed:12.0","missed:12.1","missed:12.10","missed:12.2","missed:12.3","missed:12.4","missed:12.5","missed:13.0","workflow::production"],"milestone":{"id":1112145,"iid":47,"group_id":9970,"title":"13.1","description":"","state":"closed","created_at":"2020-01-03T12:28:30.160Z","updated_at":"2020-10-08T12:01:07.361Z","due_date":"2020-06-17","start_date":"2020-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/47"},"assignees":[{"id":5427309,"username":"ssarka","name":"Saikat Sarkar","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/097feebc1eb82b858a9046fe9b6d9176?s=80\u0026d=identicon","web_url":"https://gitlab.com/ssarka"}],"author":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"type":"ISSUE","assignee":{"id":5427309,"username":"ssarka","name":"Saikat Sarkar","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/097feebc1eb82b858a9046fe9b6d9176?s=80\u0026d=identicon","web_url":"https://gitlab.com/ssarka"},"user_notes_count":48,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11466","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11466","notes":"https://gitlab.com/api/v4/projects/278964/issues/11466/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11466/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11466","relative":"#11466","full":"gitlab-org/gitlab#11466"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3266,"epic":{"id":51945,"iid":3266,"title":"Keep SAST Scanners Updated","url":"/groups/gitlab-org/-/epics/3266","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":24695397,"iid":28513,"project_id":278964,"title":"\"Git repository URL\" field shows \"This field is required\" validation error when the URL is provided but not the correct format","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nWhen setting up repository mirroring, the \"Git repository URL\" field contains misleading validation text - when the field is filled in, but is not formatted correctly, the validation message says \"This field is required.\":\n\n![image](/uploads/2940188301840d3f6ce7d3c88527507a/image.png)\n\n### Steps to reproduce\n\n1. Navigate to a project on GitLab.com\n1. Settings \u003e Repository \u003e Mirroring repositories\n1. In the \"Git repository URL\" field, paste in `git@github.com:nfriend/qmk_firmware.git`\n\n### What is the current *bug* behavior?\n\nThe validation message reads \"This field is required.\"\n\n### What is the expected *correct* behavior?\n\nThe validation message reads \"This is not a valid git repository URL.\" (Or something similar.)\n\n### Output of checks\n\nThis bug happens on GitLab.com.\n\n### Possible fixes\n\nMake the validation a bit smarter:\n\nNo input = \"This field is required.\"\u003cbr /\u003e\nBad input = \"This is not a valid git repository URL.\"","state":"closed","created_at":"2019-05-03T14:53:46.770Z","updated_at":"2021-10-25T03:04:05.176Z","closed_at":"2021-10-25T03:04:05.170Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"ðŸ¤– GitLab Bot ðŸ¤–","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["[deprecated] Accepting merge requests","[deprecated] low hanging fruit","auto closed","internal customer","stale","type::bug","vintage"],"milestone":null,"assignees":[],"author":{"id":493585,"username":"nfriend","name":"Nathan Friend","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cd23f74a33fc7d8dfe081948696551a5?s=80\u0026d=identicon","web_url":"https://gitlab.com/nfriend"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28513","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28513","notes":"https://gitlab.com/api/v4/projects/278964/issues/28513/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28513/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28513","relative":"#28513","full":"gitlab-org/gitlab#28513"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695390,"iid":28510,"project_id":278964,"title":"Remove Vue Resource from Markdown field preview","description":"The [Markdown Field component](app/assets/javascripts/vue_shared/components/markdown/field.vue) uses Vue Resource. We want to replace it with axios (https://gitlab.com/groups/gitlab-org/-/epics/1281).","state":"closed","created_at":"2019-05-03T13:14:24.440Z","updated_at":"2022-05-19T16:09:17.003Z","closed_at":"2019-09-11T16:58:54.400Z","closed_by":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"labels":["Community contribution","devops::plan","frontend","group::project management","maintenance::refactor","markdown"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28510","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28510","notes":"https://gitlab.com/api/v4/projects/278964/issues/28510/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28510/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28510","relative":"#28510","full":"gitlab-org/gitlab#28510"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1281,"epic":{"id":6829,"iid":1281,"title":"Replace vue-resource calls with Axios","url":"/groups/gitlab-org/-/epics/1281","group_id":9970,"human_readable_end_date":"Sep 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24695379,"iid":28505,"project_id":278964,"title":"Change HTTP status to 422 if submitting comment fails","description":"In some cases the notes endpoint sends an HTTP status of 200 for a response like this:\n\n```json\n{\"commands_changes\":null,\"valid\":false,\"errors\":{\"project\":[\"can't be blank\",\"does not match noteable project\"]}}\n```\n\nIf an error occurred, we should set the HTTP status accordingly (in this case probably 422).","state":"closed","created_at":"2019-05-03T09:35:40.673Z","updated_at":"2022-05-19T16:09:16.527Z","closed_at":"2019-11-19T02:08:04.889Z","closed_by":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"labels":["Category:Portfolio Management","Community contribution","Deliverable","backend","backstage [DEPRECATED]","devops::plan","epics","group::project management","issues","maintenance::refactor","merge requests","missed-deliverable","missed:12.3","missed:12.4","missed:12.5","workflow::in dev"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":756755,"username":"raju249","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/756755/avatar.png","web_url":"https://gitlab.com/raju249"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":756755,"username":"raju249","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/756755/avatar.png","web_url":"https://gitlab.com/raju249"},"user_notes_count":22,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28505","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28505","notes":"https://gitlab.com/api/v4/projects/278964/issues/28505/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28505/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28505","relative":"#28505","full":"gitlab-org/gitlab#28505"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20548267,"iid":11457,"project_id":278964,"title":"11.11.0-rc1.ee.0 upgrade on selective-sync-test-secondary broke node type","description":"Upgrading `selective-sync-test-secondary` to `11.11.0-rc1.ee.0` has caused it to believe it's no longer a secondary node?\n\n```shell\namckenzie@selective-sync-test-secondary:~$ sudo gitlab-rake gitlab:geo:check\nChecking Geo ...\nGitLab Geo is available ... yes\nGitLab Geo is enabled ... yes\nGitLab Geo secondary database is correctly configured ... not a secondary node\nDatabase replication enabled? ... not a secondary node\nDatabase replication working? ... not a secondary node\nGitLab Geo tracking database is configured to use Foreign Data Wrapper? ... not a secondary node\nGitLab Geo tracking database Foreign Data Wrapper schema is up-to-date? ... not a secondary node\nGitLab Geo HTTP(S) connectivity ... not a secondary node\nHTTP/HTTPS repository cloning is enabled ... yes\nMachine clock is synchronized ... yes\nGit user has default SSH configuration? ... yes\nOpenSSH configured to use AuthorizedKeysCommand ... yes\nGitLab configured to disable writing to authorized_keys file ... yes\nGitLab configured to store new projects in hashed storage? ... yes\nAll projects are in hashed storage? ... no\n  Try fixing it:\n  Please migrate all projects to hashed storage\n  to avoid security issues and ensure data integrity.\n  For more information see:\n  doc/administration/repository_storage_types.md\nChecking Geo ... Finished\n```\n\n/cc @geo\\-team ","state":"closed","created_at":"2019-05-03T07:23:19.942Z","updated_at":"2019-12-11T20:18:11.995Z","closed_at":"2019-05-03T07:35:16.201Z","closed_by":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"labels":["Enterprise Edition","Geo Administration","devops::systems","group::geo","type::bug"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"}],"author":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"type":"ISSUE","assignee":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11457","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11457","notes":"https://gitlab.com/api/v4/projects/278964/issues/11457/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11457/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11457","relative":"#11457","full":"gitlab-org/gitlab#11457"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695355,"iid":28495,"project_id":278964,"title":"Markdown rendering of mermaid inside of detail view mangles the html","description":"### Summary\n\nWhen using the mermaid graphs inside of the detail view, GitLab markdown does not correctly render the html, leaving the graph in an undecipherable state.\n\n### Steps to reproduce\n\u003cdetails\u003e\n\u003csummary\u003eClick this to see a poor rendering\u003c/summary\u003e\nThis is some text\n\n```mermaid\ngraph LR\nA --\u003e B\nB --\u003e C\n```\n\nThis is more text.\n\u003c/details\u003e\n\n### What is the expected *correct* behavior?\n\nI would expect the above, when expanded to look like this:\n\nThis is some text\n\n```mermaid\ngraph LR\nA --\u003e B\nB --\u003e C\n```\n\nThis is more text.\n\n### Example Code\n\nThis code example is not entirely complex either:\n\n\n    This is some text\n    ```mermaid\n    graph LR\n    A --\u003e B\n    B --\u003e C\n    ```\n    This is more text.","state":"closed","created_at":"2019-05-03T01:04:55.471Z","updated_at":"2022-05-19T16:09:15.779Z","closed_at":"2020-02-19T10:09:15.565Z","closed_by":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"labels":["devops::plan","frontend","group::project management","markdown","missed:12.7","priority::3","regression","regression:11.0","severity::3","type::bug","workflow::verification"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"user_notes_count":13,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28495","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28495","notes":"https://gitlab.com/api/v4/projects/278964/issues/28495/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28495/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28495","relative":"#28495","full":"gitlab-org/gitlab#28495"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20543843,"iid":11451,"project_id":278964,"title":"Geo: Primary unable to update GeoNodeStatus on 11.11.0 RC1","description":"After updating to 11.11.0-rc1-ee, the primary is unable to update its GeoNodeStatus.\n\n```\nmkozono@selective-sync-test-primary:~$ sudo gitlab-rails console\n-------------------------------------------------------------------------------------\n GitLab:       11.11.0-rc1-ee (fe49e763214)\n GitLab Shell: 9.0.0\n PostgreSQL:   9.6.11\n Geo enabled:  yes\n Geo server:   primary\n-------------------------------------------------------------------------------------\nLoading production environment (Rails 5.1.7)\nirb(main):001:0\u003e GeoNodeStatus.current_node_status\nTraceback (most recent call last):\n       12: from (irb):1\n       11: from ee/app/models/geo_node_status.rb:100:in `current_node_status'\n       10: from ee/app/models/geo_node_status.rb:163:in `load_data_from_current_node'\n        9: from ee/app/finders/geo/lfs_object_registry_finder.rb:6:in `count_syncable'\n        8: from ee/app/finders/geo/lfs_object_registry_finder.rb:26:in `syncable'\n        7: from ee/app/finders/geo/registry_finder.rb:30:in `use_legacy_queries_for_selective_sync?'\n        6: from ee/app/finders/geo/registry_finder.rb:26:in `use_legacy_queries?'\n        5: from ee/lib/gitlab/geo/fdw.rb:23:in `disabled?'\n        4: from ee/lib/gitlab/geo/fdw.rb:15:in `enabled?'\n        3: from ee/lib/gitlab/geo/fdw.rb:64:in `fdw_capable?'\n        2: from ee/lib/gitlab/geo/fdw.rb:71:in `has_foreign_server?'\n        1: from ee/app/models/geo/tracking_base.rb:20:in `connection'\nGeo::TrackingBase::SecondaryNotConfigured (Geo secondary database is not configured)\n```\n\nI was able to workaround that by manually patching `ee/app/finders/geo/lfs_object_registry_finder.rb` with:\n\n```ruby\ndef syncable\n  if Gitlab::Geo.secondary? \u0026\u0026 use_legacy_queries_for_selective_sync?\n    legacy_finder.syncable\n  elsif Gitlab::Geo.secondary? \u0026\u0026 selective_sync?\n    fdw_geo_node.lfs_objects.syncable\n  else\n    LfsObject.syncable\n  end\nend\n```\n\nAnd similar for `attachment_registry_finder.rb`.\n\nAfter that it worked:\n\n```\nmkozono@selective-sync-test-primary:~$ sudo gitlab-rails console\n-------------------------------------------------------------------------------------\n GitLab:       11.11.0-rc1-ee (fe49e763214)\n GitLab Shell: 9.0.0\n PostgreSQL:   9.6.11\n Geo enabled:  yes\n Geo server:   primary\n-------------------------------------------------------------------------------------\nLoading production environment (Rails 5.1.7)\nirb(main):001:0\u003e \nirb(main):002:0\u003e GeoNodeStatus.current_node_status\n=\u003e #\u003cGeoNodeStatus id: 1, geo_node_id: 1, db_replication_lag_seconds: nil, repositories_synced_count: nil, repositories_failed_count: nil, lfs_objects_count: 4, lfs_objects_synced_count: nil, lfs_objects_failed_count: nil, attachments_count: 3, attachments_synced_count: nil, attachments_failed_count: nil,...\n...\n```","state":"closed","created_at":"2019-05-03T00:12:50.064Z","updated_at":"2019-12-11T20:19:23.579Z","closed_at":"2019-05-03T08:13:46.904Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["Enterprise Edition","Geo Administration","devops::systems","group::geo","regression","regression:master","type::bug"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"user_notes_count":2,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11451","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11451","notes":"https://gitlab.com/api/v4/projects/278964/issues/11451/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11451/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11451","relative":"#11451","full":"gitlab-org/gitlab#11451"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20537649,"iid":11445,"project_id":278964,"title":"Cannot reply to discussion on promoted epic","description":"### Steps to reproduce\n\n- create issue\n- start discussion\n- promote issue to epic\n- reply to discussion (on the epic)\n\n### Example Project\n\nhttps://gitlab.com/groups/issue-reproduce/public_issues/-/epics/1\n\n### What is the current *bug* behavior?\n\nreply is lost\n\n### What is the expected *correct* behavior?\n\nreply is stored and if that cannot happen an error is shown","state":"closed","created_at":"2019-05-02T18:19:00.273Z","updated_at":"2022-05-19T16:09:02.954Z","closed_at":"2019-09-19T10:02:05.572Z","closed_by":{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"},"labels":["Enterprise Edition","backend","devops::plan","group::product planning","missed-SLO","missed:12.1","priority::2","reproduced on GitLab.com","severity::2","type::bug","workflow::production"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"},"user_notes_count":41,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11445","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11445","notes":"https://gitlab.com/api/v4/projects/278964/issues/11445/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11445/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11445","relative":"#11445","full":"gitlab-org/gitlab#11445"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695325,"iid":28483,"project_id":278964,"title":"Project search result links don't pass WCAG color audit","description":"Identified in color audit https://gitlab.com/gitlab-org/gitlab-design/issues/286\n\nProject search results links to forks, merge requests, and issues use the same color of non-links, so it's difficult to distinguish them:\n\n![screenshot](https://gitlab.com/gitlab-org/gitlab-design/uploads/aba6b1b63cdacb065a2a24fca384a9ce/image.png)","state":"closed","created_at":"2019-05-02T16:30:23.462Z","updated_at":"2019-10-18T12:21:04.950Z","closed_at":"2019-09-27T17:36:27.745Z","closed_by":{"id":2233420,"username":"pslaughter","name":"Paul Slaughter","state":"active","avatar_url":"https://secure.gravatar.com/avatar/631b25421eb206ab44cb2793ef09d881?s=80\u0026d=identicon","web_url":"https://gitlab.com/pslaughter"},"labels":["Category:Global Search","Create [DEPRECATED]","Deliverable","UI polish","accessibility","devops::create","frontend","group::editor"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":2233420,"username":"pslaughter","name":"Paul Slaughter","state":"active","avatar_url":"https://secure.gravatar.com/avatar/631b25421eb206ab44cb2793ef09d881?s=80\u0026d=identicon","web_url":"https://gitlab.com/pslaughter"},{"id":3688647,"username":"mvanremmerden","name":"Marcel van Remmerden","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4f46ed49b87eab9e74f20e0e25b36d0f?s=80\u0026d=identicon","web_url":"https://gitlab.com/mvanremmerden"}],"author":{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},"type":"ISSUE","assignee":{"id":2233420,"username":"pslaughter","name":"Paul Slaughter","state":"active","avatar_url":"https://secure.gravatar.com/avatar/631b25421eb206ab44cb2793ef09d881?s=80\u0026d=identicon","web_url":"https://gitlab.com/pslaughter"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28483","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28483","notes":"https://gitlab.com/api/v4/projects/278964/issues/28483/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28483/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28483","relative":"#28483","full":"gitlab-org/gitlab#28483"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":989,"epic":{"id":5551,"iid":989,"title":"Beautifying our UI","url":"/groups/gitlab-org/-/epics/989","group_id":9970,"human_readable_end_date":"Feb 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":20963726,"iid":11625,"project_id":278964,"title":"Can't delete related issues if it has more than 3 links","description":"### Summary\n\nCan't delete related issues if it has more than 3 links\n\n### Steps to reproduce\n\n1. Open any issue that you own\n1. Click on **Related Issues** ![Screenshot](/uploads/e2ab97735d0b03c008a27139c06b2d72/Screenshot.png)\n1. Add 3 Links `#1 #2 #3`\n1. Delete the links one by one\n1. You will get stuck\n\n### Example Project\n\n(If possible, please create an example project here on GitLab.com that exhibits the problematic behaviour, and link to it here in the bug report)\n\n(If you are using an older version of GitLab, this will also determine whether the bug has been fixed in a more recent version)\n\n### What is the expected *correct* behavior?\n\nAll links must get cleared\n\n### Relevant logs and/or screenshots\n\nhttps://www.loom.com/share/ecd75cfeb39644c9a5eba71ba2c1ac36","state":"closed","created_at":"2019-05-02T16:21:23.229Z","updated_at":"2022-05-19T16:09:07.355Z","closed_at":"2019-05-21T15:56:59.606Z","closed_by":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"labels":["Enterprise Edition","devops::plan","frontend","priority::2","reproduced on GitLab.com","severity::2","type::bug","workflow::in review"],"milestone":{"id":693518,"iid":33,"group_id":9970,"title":"12.0","description":"https://about.gitlab.com/releases/2019/06/22/gitlab-12-0-released/","state":"closed","created_at":"2018-10-30T16:47:37.975Z","updated_at":"2020-04-22T19:51:03.475Z","due_date":"2019-06-22","start_date":"2019-05-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/33"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},{"id":3135433,"username":"arthanzel","name":"Martin Hanzel","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3135433/avatar.png","web_url":"https://gitlab.com/arthanzel"}],"author":{"id":1243277,"username":"ghost1","name":"Ghost User","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4249f4df72b475e7894fabed1c5888cf?s=80\u0026d=identicon","web_url":"https://gitlab.com/ghost1"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":6,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11625","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11625","notes":"https://gitlab.com/api/v4/projects/278964/issues/11625/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11625/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11625","relative":"#11625","full":"gitlab-org/gitlab#11625"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695256,"iid":28460,"project_id":278964,"title":"Change empty state message for prioritized labels","description":"In https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/27307, we allowed Guests to view prioritized labels.\n\nGuests are not allowed to star labels so the empty state message can be confusing.\n\n![Screen_Shot_2019-05-02_at_11.36.18_PM](/uploads/ed791e7a136e5a7a214899c792043903/Screen_Shot_2019-05-02_at_11.36.18_PM.png)","state":"closed","created_at":"2019-05-02T15:41:23.274Z","updated_at":"2022-05-19T16:09:15.230Z","closed_at":"2019-09-11T19:09:24.395Z","closed_by":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"labels":["Community contribution","UX","devops::plan","frontend","group::project management","labels","priority::3","severity::3","type::bug"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"}],"author":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28460","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28460","notes":"https://gitlab.com/api/v4/projects/278964/issues/28460/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28460/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28460","relative":"#28460","full":"gitlab-org/gitlab#28460"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695255,"iid":28459,"project_id":278964,"title":"Add Pagination to Notifications Settings Page","description":"### Problem to solve\n\nCurrently https://gitlab.com/profile/notifications this page is little bit laggy, I have 140 Project which takes little time to load, this might cause some performance issue to Database. \n\n\nFor those who have membership to even more projects and groups, it takes ~ 1 minute before the page loads:\n\n![Screen_Shot_2020-08-13_at_4.04.06_PM](/uploads/e6fc7d19fc284ce92bcd0441e77dcc72/Screen_Shot_2020-08-13_at_4.04.06_PM.png)\n\n### Proposal\n\n- Use Tabs to segment Project and Group notifications into their own lists\n- Add Pagination via [infinite scroll](https://design.gitlab.com/components/infinite-scroll) to the notifications settings page.\n- Default to 40 Per page","state":"closed","created_at":"2019-05-02T15:26:54.097Z","updated_at":"2020-09-03T00:12:50.585Z","closed_at":"2020-09-03T00:12:50.512Z","closed_by":{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"},"labels":["auto updated","backend","backend-weight::3","customer","devops::plan","direction","feature::enhancement","frontend","gitlab.com","group::project management","internal customer","notifications","potential proposal","section::dev","severity::3","type::feature","user profile","workflow::verification"],"milestone":{"id":1233753,"iid":51,"group_id":9970,"title":"13.4","description":"https://about.gitlab.com/releases/2020/09/22/gitlab-13-4-released/","state":"closed","created_at":"2020-04-09T17:39:21.662Z","updated_at":"2022-04-13T14:50:33.769Z","due_date":"2020-09-17","start_date":"2020-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/51"},"assignees":[{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"}],"author":{"id":1243277,"username":"ghost1","name":"Ghost User","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4249f4df72b475e7894fabed1c5888cf?s=80\u0026d=identicon","web_url":"https://gitlab.com/ghost1"},"type":"ISSUE","assignee":{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"},"user_notes_count":34,"merge_requests_count":0,"upvotes":18,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28459","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28459","notes":"https://gitlab.com/api/v4/projects/278964/issues/28459/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28459/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28459","relative":"#28459","full":"gitlab-org/gitlab#28459"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695249,"iid":28457,"project_id":278964,"title":"Change state to integer for issuables - Release 2 of 3","description":"This issue covers the second release in the process of moving issuable states to integer. After the new column  \n`state_id` has been added on the [first release](https://gitlab.com/gitlab-org/gitlab-ce/issues/51789) we now need\nto move forward with the following tasks to complete the migration:  \n\n1. Add new indexes to `state_id` column \n2. Add model code that uses `state_id` column instead of `state`\n3. Removes old `state` column with a post deployment migration\n\n## Schedule\n\n### First release: https://gitlab.com/gitlab-org/gitlab-ce/issues/51789\n\n1. Add a `state_id` column to issues and merge requests tables\n\n1. Schedule a background migration that will populate `state_id` column with new values\n\n### Second release: This issue\n\n1. Adds new indexes to `state_id` column\n\n1. Add the code which uses the new `state_id` column\n\n### Third release: https://gitlab.com/gitlab-org/gitlab/issues/33814\n\n1. Removes old `state` column","state":"closed","created_at":"2019-05-02T14:52:32.727Z","updated_at":"2022-05-19T16:09:14.968Z","closed_at":"2019-10-22T18:04:20.451Z","closed_by":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"labels":["backend","database","devops::plan","group::product planning","maintenance::refactor","missed:12.4","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"}],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28457","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28457","notes":"https://gitlab.com/api/v4/projects/278964/issues/28457/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28457/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28457","relative":"#28457","full":"gitlab-org/gitlab#28457"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695245,"iid":28456,"project_id":278964,"title":"Delete old issue boards store","description":"This is part of refactoring issue boards to Vuex (https://gitlab.com/groups/gitlab-org/-/epics/1278) and needs to happen after https://gitlab.com/gitlab-org/gitlab/issues/28455.\n\nDelete `app/assets/javascripts/boards/stores/boards_store.js`, replace them by calls to Vuex store (requires updating the components)","state":"closed","created_at":"2019-05-02T13:11:12.045Z","updated_at":"2022-05-19T16:09:14.782Z","closed_at":"2021-09-06T23:56:09.297Z","closed_by":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"labels":["Category:Team Planning","Community contribution","backstage [DEPRECATED]","boards","devops::plan","frontend","group::project management","maintenance::refactor","missed:12.6","section::dev","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":583919,"username":"nuwe1","name":"Marvin Karegyeya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/583919/avatar.png","web_url":"https://gitlab.com/nuwe1"},{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":583919,"username":"nuwe1","name":"Marvin Karegyeya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/583919/avatar.png","web_url":"https://gitlab.com/nuwe1"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28456","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28456","notes":"https://gitlab.com/api/v4/projects/278964/issues/28456/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28456/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28456","relative":"#28456","full":"gitlab-org/gitlab#28456"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1278,"epic":{"id":6771,"iid":1278,"title":"Refactor issue boards store to Vuex","url":"/groups/gitlab-org/-/epics/1278","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24695242,"iid":28455,"project_id":278964,"title":"Migrate issue board store logic to Vuex","description":"This is part of refactoring issue boards to Vuex (https://gitlab.com/groups/gitlab-org/-/epics/1278) and needs to happen after https://gitlab.com/gitlab-org/gitlab/issues/28453 and https://gitlab.com/gitlab-org/gitlab-foss/issues/61622\n\nMove any logic that happens in `app/assets/javascripts/boards/stores/boards_store.js` to the newVuex store (ideally one function at a time).\n\n## Example\n\n```diff\n  addList(listObj, defaultAvatar) {\n-   this.state.lists.push(list);\n+   this.vuexStore.dispatch('addList', list);\n```\n\n (https://gitlab.com/gitlab-org/gitlab-ce/blob/b15a78dfdd497848a0fd763185e79b0361da1dbb/app/assets/javascripts/boards/stores/boards_store.js#L36)","state":"closed","created_at":"2019-05-02T13:09:55.244Z","updated_at":"2022-05-19T16:09:14.580Z","closed_at":"2020-09-16T00:19:06.043Z","closed_by":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"labels":["Category:Team Planning","backstage [DEPRECATED]","boards","devops::plan","frontend","group::project management","maintenance::refactor","section::dev","workflow::planning breakdown"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":null,"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28455","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28455","notes":"https://gitlab.com/api/v4/projects/278964/issues/28455/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28455/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28455","relative":"#28455","full":"gitlab-org/gitlab#28455"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1278,"epic":{"id":6771,"iid":1278,"title":"Refactor issue boards store to Vuex","url":"/groups/gitlab-org/-/epics/1278","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24695240,"iid":28453,"project_id":278964,"title":"Delete issue board model classes","description":"This is part of refactoring issue boards to Vuex (https://gitlab.com/groups/gitlab-org/-/epics/1278) and needs to happen after https://gitlab.com/gitlab-org/gitlab/issues/28452.\n\nAll references to classes in `app/assets/javascripts/boards/models/` need to be deleted and replaced by using the store directly (this requires updating components).\n\n```shell\n$ grep -r '/models/' {ee/,}app/assets/javascripts/boards\nee/app/assets/javascripts/boards/models/list.js:import List from '~/boards/models/list';\nee/app/assets/javascripts/boards/models/list.js:import ListAssignee from '~/vue_shared/models/assignee';\nee/app/assets/javascripts/boards/models/list.js:import ListMilestone from '~/boards/models/milestone';\nee/app/assets/javascripts/boards/models/issue.js:import ListIssue from '~/boards/models/issue';\napp/assets/javascripts/boards/index.js:import '~/vue_shared/models/label';\napp/assets/javascripts/boards/index.js:import '~/vue_shared/models/assignee';\napp/assets/javascripts/boards/index.js:import './models/milestone';\napp/assets/javascripts/boards/index.js:import './models/project';\napp/assets/javascripts/boards/index.js:import 'ee/boards/models/list';\napp/assets/javascripts/boards/index.js:import 'ee/boards/models/issue';\napp/assets/javascripts/boards/index.js:import 'ee/boards/models/project';\napp/assets/javascripts/boards/models/list.js:import ListLabel from '~/vue_shared/models/label';\napp/assets/javascripts/boards/models/list.js:import ListAssignee from '~/vue_shared/models/assignee';\napp/assets/javascripts/boards/models/issue.js:import '~/vue_shared/models/label';\napp/assets/javascripts/boards/components/board_new_issue.vue:import ListIssue from '../models/issue';\n```\n\n```shell\n$ grep -Er '/\\* global .* \\*/' {ee/,}app/assets/javascripts/boards\nee/app/assets/javascripts/boards/components/board_form.vue:/* global ListLabel */\napp/assets/javascripts/boards/mixins/sortable_default_options.js:/* global DocumentTouch */\napp/assets/javascripts/boards/stores/boards_store.js:/* global List */\napp/assets/javascripts/boards/models/list.js:/* global ListIssue */\napp/assets/javascripts/boards/models/issue.js:/* global ListLabel */\napp/assets/javascripts/boards/models/issue.js:/* global ListMilestone */\napp/assets/javascripts/boards/models/issue.js:/* global ListAssignee */\napp/assets/javascripts/boards/components/board_blank_state.vue:/* global ListLabel */\napp/assets/javascripts/boards/components/modal/index.vue:/* global ListIssue */\n```","state":"closed","created_at":"2019-05-02T13:06:44.890Z","updated_at":"2022-05-19T16:09:14.321Z","closed_at":"2021-09-06T23:58:32.830Z","closed_by":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"labels":["Category:Team Planning","Community contribution","backstage [DEPRECATED]","boards","devops::plan","frontend","group::product planning","maintenance::refactor","missed:12.6","section::dev","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":583919,"username":"nuwe1","name":"Marvin Karegyeya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/583919/avatar.png","web_url":"https://gitlab.com/nuwe1"},{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":583919,"username":"nuwe1","name":"Marvin Karegyeya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/583919/avatar.png","web_url":"https://gitlab.com/nuwe1"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28453","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28453","notes":"https://gitlab.com/api/v4/projects/278964/issues/28453/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28453/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28453","relative":"#28453","full":"gitlab-org/gitlab#28453"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3900,"epic":{"id":80936,"iid":3900,"title":"Refactor Issue Boards to use GraphQL + VueX","url":"/groups/gitlab-org/-/epics/3900","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24695236,"iid":28452,"project_id":278964,"title":"Remove store logic from issue board models","description":"This is part of refactoring issue boards to Vuex (https://gitlab.com/groups/gitlab-org/-/epics/1278) and needs to happen after https://gitlab.com/gitlab-org/gitlab-foss/issues/61293 and https://gitlab.com/gitlab-org/gitlab/issues/28616.\n\nMove any logic that happens in `app/assets/javascripts/boards/models/` to the boards store (ideally one function at a time)\n\n## Example\n\n### Before\n\n```javascript\n  save() {\n    const entity = this.label || this.assignee || this.milestone;\n    let entityType = '';\n    if (this.label) {\n      entityType = 'label_id';\n    } else if (this.assignee) {\n      entityType = 'assignee_id';\n    } else if (IS_EE \u0026\u0026 this.milestone) {\n      entityType = 'milestone_id';\n    }\n\n    return boardsStore\n      .createList(entity.id, entityType)\n      .then(res =\u003e res.data)\n      .then(data =\u003e {\n        this.id = data.id;\n        this.type = data.list_type;\n        this.position = data.position;\n        this.label = data.label;\n\n        return this.getIssues();\n      });\n  }\n```\n\n([app/assets/javascripts/boards/models/list.js](https://gitlab.com/gitlab-org/gitlab-foss/blob/c4038d4bdff93b260cbdcd69f9a6c0b07a849457/app/assets/javascripts/boards/models/list.js#L85-107))\n\n### After\n\n```javascript\n  save() {\n    return boardsStore.saveList(this);\n  }\n```\n\n(app/assets/javascripts/boards/models/list.js)\n\nnew function in boards store:\n\n```javascript\n  saveList(list) {    \n    const entity = list.label || list.assignee || list.milestone;\n    let entityType = '';\n    if (list.label) {\n      entityType = 'label_id';\n    } else if (list.assignee) {\n      entityType = 'assignee_id';\n    } else if (IS_EE \u0026\u0026 list.milestone) {\n      entityType = 'milestone_id';\n    }\n\n    return this.createList(entity.id, entityType)\n      .then(res =\u003e res.data)\n      .then(data =\u003e {\n        list.id = data.id;\n        list.type = data.list_type;\n        list.position = data.position;\n        list.label = data.label;\n\n        return list.getIssues();\n      });\n  }\n```\n\n(app/assets/javascripts/boards/stores/boards_store.js)","state":"closed","created_at":"2019-05-02T12:59:33.872Z","updated_at":"2021-11-08T16:15:55.816Z","closed_at":"2020-07-22T12:09:30.962Z","closed_by":{"id":4545397,"username":"cngo","name":"Coung Ngo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4545397/avatar.png","web_url":"https://gitlab.com/cngo"},"labels":["Category:Team Planning","Community contribution","boards","devops::plan","frontend","group::project management","maintenance::refactor","missed:12.10","missed:12.6","missed:12.7","missed:12.9","missed:13.0","missed:13.1","missed:13.2","type::maintenance","workflow::production"],"milestone":{"id":1233752,"iid":50,"group_id":9970,"title":"13.3","description":"https://about.gitlab.com/releases/2020/08/22/gitlab-13-3-released/","state":"closed","created_at":"2020-04-09T17:39:21.090Z","updated_at":"2022-04-13T14:50:18.976Z","due_date":"2020-08-17","start_date":"2020-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/50"},"assignees":[{"id":583919,"username":"nuwe1","name":"Marvin Karegyeya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/583919/avatar.png","web_url":"https://gitlab.com/nuwe1"},{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":583919,"username":"nuwe1","name":"Marvin Karegyeya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/583919/avatar.png","web_url":"https://gitlab.com/nuwe1"},"user_notes_count":21,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28452","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28452","notes":"https://gitlab.com/api/v4/projects/278964/issues/28452/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28452/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28452","relative":"#28452","full":"gitlab-org/gitlab#28452"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1278,"epic":{"id":6771,"iid":1278,"title":"Refactor issue boards store to Vuex","url":"/groups/gitlab-org/-/epics/1278","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":20515642,"iid":11431,"project_id":278964,"title":"IDOR in epic notes api, also reveals historical information if it was promoted from issue","description":"**[HackerOne report #538109](https://hackerone.com/reports/538109)** by `ashish_r_padelkar` on 2019-04-14, assigned to `hackerjuan`:\n\n### Summary\n\nHello,\n\nThere are couple of issues here in EPIC notes api  \n`https://docs.gitlab.com/ee/api/notes.html#list-all-epic-notes`\n\n**Issue1**\n\nThe API `GET /groups/:id/epics/:epic_id/notes` has an IDOR issue. ie. It lists the notes of EPIC without checking the groups.\n\nFor eg, `https://gitlab.com/api/v4/groups/\u003cREDACTED public_group_id/epics/\u003cREDACTED epic_id\u003e/notes`\n\nAbove will list notes from `REDACTED epic_id` EPIC where as `REDACTED public_group_id` is a group that doesnt belong to this EPIC. So if you just sequentially run the IDs of epic, it will work. \n\nNote that `REDACTED epic_id` is the internal ID of EPIC \n\nHowever, this only discloses notes from PUBLIC groups only but this need fixing\n\n**Issue2**\n\nThis is more of a security issue because it leaks information which ideally not visible publicly.\n\nFor eg, if a EPIC is promoted from issue which belongs to private project, it may contain private information like milestone, labels applied to the issue before promoting to an epic. This API response disclose everything!\n\n### Steps to reproduce\n\n1. Go to `https://gitlab.com/api/v4/groups/\u003cAnyPublicGroupID\u003e/epics/\u003cEPIC_IID\u003e/notes`\n\n2. Just keep changing `\u003cEPIC_IID\u003e` in above requests and you will see notes belongs to other groups.\n\n3. Also see the responses, This discloses more information of epic historical activities from timeline if it was promoted from issues\n\n\n\n### Examples POC\n\n1. Go to `https://gitlab.com/groups/\u003cREDACTED private group\u003e/-/epics/\u003cREDACTED epic ID\u003e`   \n2. You will see few activities there and not much information . But there is a information there which you can not see because this epic was promoted from private project.  \n3. Now go to `https://gitlab.com/api/v4/groups/\u003cREDACTED public_group_id\u003e/epics/\u003cREDACTED epic_id\u003e/notes`  \n4. In response, you will see more information which you cant see in UI. The information includes milestone, labels from private project that was applied before it was promoted to EPIC from issue!\n\n\n### What is the current *bug* behavior?  \nIDOR+Info disclosure in EPIC note api\n\n\n### What is the expected *correct* behavior?  \nEPIC note api should only work for EPIC that belong to that group and should not disclose historical information if it was promoted from private project issue\n\n\nThis bug happens on GitLab.com\n\nRegards,  \nAshish\n\n## Impact\n\nEPIC note api works for any group (works for public groups only)\n\nEPIC notes API response discloses historical information when it was promoted from private project issue\n\n-------------------------\n\nRelated Security Issue: https://dev.gitlab.org/gitlab/gitlabhq/issues/2875","state":"closed","created_at":"2019-05-02T00:26:49.548Z","updated_at":"2022-05-19T16:09:01.743Z","closed_at":"2019-08-29T22:53:10.333Z","closed_by":{"id":4226366,"username":"ankelly","name":"Andrew Kelly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4226366/avatar.png","web_url":"https://gitlab.com/ankelly"},"labels":["Enterprise Edition","HackerOne","backend","devops::plan","group::project management","priority::3","security","severity::3","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":3078895,"username":"pd-gitlab","name":"Patrick Derichs","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7e106768fae83577b0eec7daf082cb7d?s=80\u0026d=identicon","web_url":"https://gitlab.com/pd-gitlab"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3078895,"username":"pd-gitlab","name":"Patrick Derichs","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7e106768fae83577b0eec7daf082cb7d?s=80\u0026d=identicon","web_url":"https://gitlab.com/pd-gitlab"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-07-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11431","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11431","notes":"https://gitlab.com/api/v4/projects/278964/issues/11431/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11431/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11431","relative":"#11431","full":"gitlab-org/gitlab#11431"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695202,"iid":28440,"project_id":278964,"title":"Import pending members from public projects or private projects (if you have guest role)","description":"**[HackerOne report #542539](https://hackerone.com/reports/542539)** by `ashish_r_padelkar` on 2019-04-19, assigned to `asaba`:\n\n### Summary\n\nHello,\n\nAs per documentation here `https://docs.gitlab.com/ee/user/project/members/#import-users-from-another-project` ,\n\n`In the dropdown menu, you can see only the projects you are Maintainer on`.\n\nThis is NOT true. You can also see the projects where you have just `Guest` access to. \n\nThe problem with this is, once you import members from such projects, a guest can see all pending members who are invited using emails but havent joined the project yet! i.e guests will be able to see all the email ids of the members who are invited using email by Admins but not yet joined gitlab.\n\nIf they just visit the url directly in UI, they dont see these members who have not joined gitlab yet!\n\n\n### Steps to reproduce  \n1. As a Owner in your project, navigate to `https://gitlab.com/\u003cYourUserName\u003e/\u003cYourProject\u003e/project_members/import`\n\n2. When you click on the dropdown, you will not only see the projects where you are maintainer on, but you will see all the projects where you just have `Guest` role too.\n\n3. Select the project where you have `Guest` role and click on `Import Project Members`.\n\nThe Request responsible for this is \n\n```  \nPOST /\u003cYourUserName\u003e/\u003cYourProject\u003e/project_members/apply_import HTTP/1.1  \nHost: gitlab.com  \nConnection: close  \nContent-Length: 157  \nCache-Control: max-age=0  \nOrigin: https://gitlab.com  \nUpgrade-Insecure-Requests: 1  \nContent-Type: application/x-www-form-urlencoded  \nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36  \nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3  \nReferer: 1  \nAccept-Encoding: gzip, deflate  \nAccept-Language: en-GB,en-US;q=0.9,en;q=0.8  \nCookie: 1\n\nutf8=%E2%9C%93\u0026authenticity_token=1\u0026source_project_id=10776018  \n```\n\n\n4. You can also replace the `source_project_id` parameter in above request with public projects too, and it will import from public projects too!\n\n\n5. This will import the email ids of member who have not joined the selected project which you dont see when you navigate to member url from UI!\n\n\n\n\n### Examples POC\n\nNavigate to my public project here `https://gitlab.com/gitlabadminrsspl1111/thisispublicproject/project_members`\n\nYou will just see one member there.\n\nNow follow the above reproduction steps, and replace the `source_project_id` parameter in above request to `10776018` and send the request\n\nNow check the member list. You will see an email there . This is an invited email which guest users cant see normally as the invited member has not yet joined the gitlab/project!\n\n\n### What is the current *bug* behavior?\n\nAllows you to import pending members from public projects as well as private projects where you just have guest role\n\n### What is the expected *correct* behavior?\n\nOnly members from project which you have maintainers role should be allowed to import\n\n\n### Output of checks\n\nThis bug happens on GitLab.com and might be on omnibus installations too\n\n## Impact\n\nAllows you to import pending members from public projects as well as private projects where you just have guest role.\n\n## Proposal\n\nThe `Import` feature should only allow users to import members from projects where the user has a `Maintainer` role. This should address issues called out under steps 2 and 4 under **Steps to Reproduce** section.","state":"closed","created_at":"2019-05-01T23:18:43.593Z","updated_at":"2022-06-03T22:01:08.084Z","closed_at":"2021-09-30T18:38:38.601Z","closed_by":{"id":4554599,"username":"m_gill","name":"Michelle Gill","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4554599/avatar.png","web_url":"https://gitlab.com/m_gill"},"labels":["Category:Authentication and Authorization","Category:Subgroups","Epic 6340","FY22::Q3","HackerOne","Weakness::CWE-285","backend","devops::manage","estimation::completed","group::authentication and authorization","priority::4","project","section::dev","security","security-backlog::valid","severity::4","workflow::in review"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"user_notes_count":21,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-07-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28440","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28440","notes":"https://gitlab.com/api/v4/projects/278964/issues/28440/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28440/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28440","relative":"#28440","full":"gitlab-org/gitlab#28440"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20513936,"iid":11424,"project_id":278964,"title":"Update the `maven-metdata.xml`when a package is deleted","description":"\n### Summary\n\nDeleting a package from a project's maven repository doesn't remove it from the `maven-metadata.xml`. This can cause problems with how dependencies are resolved. \n\n### Steps to reproduce\n\n1. Publish a version of an artifact to a project's maven repository.\n2. Verify that it appears in the output of these commands:\n    \n   ```sh\n   curl -H \"Private-Token: $PAT\" \\\n     https://gitlab.com/api/v4/projects/$PROJ_ID/packages/maven/com/example/artifact_id/maven-metadata.xml\n   curl -H \"Private-Token: $PAT\" \\\n     https://gitlab.com/api/v4/groups/$GROUP_ID/-/packages/maven/com/exaple/artifact_id/maven-metadata.xml\n   ```\n\n   Note that:\n\n   - `$PAT` is a private access token that can access the maven repository.\n   - `$PROJ_ID` is the numeric project ID.\n   - `$GROUP_ID` is the group ID.\n   - `com/example` is the slashified maven group ID (for `com.example` in this example)\n   - `artifact_id` is the maven artifact ID\n\n3. Verify that it also appears on the page `https://gitlab.com/$GROUP_ID/$PROJECT_SLUG/-/packages` in your browser.\n4. Delete that version of the artifact.\n\nIt will now be removed from the UI, but will still appear in the output of the above curl commands.\n\n### Proposal\n\n#### Update the existing metadata xml file\n\n* When a destructive operation is done, enqueue a background job to update the existing `maven-metadata.xml` files\n  * This solves issue (1.)\n\nThe background job will need to search for the versionless packages, fetch the proper `maven-metadata.xml` file and update it accordingly.\n\nFor maven packages\n\n* Update the `\u003clatest\u003e`, `\u003crelease\u003e` and `\u003cversions\u003e` sections\n* Update the `\u003clastUpdated\u003e` accordingly.\n  * We can take `time.now` for this.\n\nFor maven plugins\n\n* Do the above for the `maven-metadata.xml` at the `groupId` + `artifactId` level\n* Update the `\u003cplugins\u003e` sectopm for the `maven-metadata.xml` at the `groupId` level\n\nUpsides:\n\n* Relatively simple solution to implement: a single background job\n  * The background job can handle both packagings: maven packages and maven plugins.\n* No performance concerns here, as we would work at the project level all the times\n* Short MR plan\n  | MR | Weight |\n  |----|--------|\n  | Background worker to update the maven metadata xml file | 2 |\n\nDownsides:\n\n* Changes are not available right after the destructive action: the background job has to run\n  * The background job has to\n    1. download the xml file (:zap: network request)\n    1. update its contents\n    1. upload the updated content (:zap: network request)","state":"closed","created_at":"2019-05-01T21:05:59.784Z","updated_at":"2022-10-18T06:53:32.789Z","closed_at":"2021-03-16T22:35:22.498Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Package Registry","Deliverable","Maven Repository","Package:P1","backend","customer","devops::package","group::package registry","missed-SLO","package:active","priority::2","quad-planning::complete-no-action","ruby","section::ops","severity::2","type::bug","workflow::production"],"milestone":{"id":1233761,"iid":57,"group_id":9970,"title":"13.10","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.646Z","updated_at":"2022-04-21T07:22:00.171Z","due_date":"2021-03-17","start_date":"2021-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/57"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":2408029,"username":"xenomachina","name":"Laurence Gonsalves","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2408029/avatar.png","web_url":"https://gitlab.com/xenomachina"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":86,"merge_requests_count":0,"upvotes":9,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11424","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11424","notes":"https://gitlab.com/api/v4/projects/278964/issues/11424/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11424/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11424","relative":"#11424","full":"gitlab-org/gitlab#11424"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20513804,"iid":11423,"project_id":278964,"title":"Override approvers and approvals required per merge request despite no permissions","description":"**[HackerOne report #544756](https://hackerone.com/reports/544756)** by `ashish_r_padelkar` on 2019-04-21, assigned to `estrike`:\n\n### Summary\n\nHello,\n\nOwner/Maintainer of the project may prevent overriding of approvers and approvals required per merge request by having the below settings in project settings\n\n![Screenshot_2019-04-22_at_00.28.49.png](https://h1.sec.gitlab.net/a/544756/473362/Screenshot_2019-04-22_at_00.28.49.png)\n\nHowever, `Developer` users can still create new approval rules per merge request! \n\n### Steps to reproduce  \n1. As a project owner , set a settings like below for merge request approval rule\n\n![Screenshot_2019-04-22_at_00.28.49.png](https://h1.sec.gitlab.net/a/544756/473362/Screenshot_2019-04-22_at_00.28.49.png)\n\n2. As a `Developer` user in a project, go to any merge request and EDIT it. once it reloads, you see that you can not EDIT or Create new approval rules.\n\n3. Without doing anything else, just click on save and capture the below request\n\n```  \nPOST /PrivateGroupofGuest/project2/merge_requests/2 HTTP/1.1  \nHost: gitlab.com  \nConnection: close  \nContent-Length: 542  \nCache-Control: max-age=0  \nOrigin: https://gitlab.com  \nUpgrade-Insecure-Requests: 1  \nContent-Type: application/x-www-form-urlencoded  \nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36  \nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3  \nReferer: https://gitlab.com/PrivateGroupofGuest/project2/merge_requests/2/edit  \nAccept-Encoding: gzip, deflate  \nAccept-Language: en-GB,en-US;q=0.9,en;q=0.8  \nCookie: _gitlab_session=1; event_filter=all; sidebar_collapsed=false\n\nutf8=%E2%9C%93\u0026_method=patch\u0026authenticity_token=1\u0026merge_request%5Btitle%5D=ExampleMergeRequest\u0026merge_request%5Bdescription%5D=Closes+%233\u0026merge_request%5Bassignee_id%5D=\u0026merge_request%5Bmilestone_id%5D=847953\u0026merge_request%5Blabel_ids%5D%5B%5D=\u0026merge_request%5Blabel_ids%5D%5B%5D=10328587\u0026merge_request%5Btarget_branch%5D=master\u0026merge_request%5Bforce_remove_source_branch%5D=0\u0026merge_request%5Bsquash%5D=0\u0026merge_request%5Block_version%5D=  \n```\n\n4. Append below parameters in the above request \n\n```  \n\u0026merge_request[approval_rules_attributes][][name]=ThisIsCreatedDespiteSettingsByOnwer\u0026merge_request[approval_rules_attributes][][user_ids][]=3148078\u0026merge_request[approval_rules_attributes][][approvals_required]=1\n\n```\n\nWhere as `3148078` is my user ID, you may try adding yours if mine doesnt work for you.\n\n5. So the final request would be like \n\n```  \nPOST /PrivateGroupofGuest/project2/merge_requests/2 HTTP/1.1  \nHost: gitlab.com  \nConnection: close  \nContent-Length: 542  \nCache-Control: max-age=0  \nOrigin: https://gitlab.com  \nUpgrade-Insecure-Requests: 1  \nContent-Type: application/x-www-form-urlencoded  \nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36  \nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3  \nReferer: https://gitlab.com/PrivateGroupofGuest/project2/merge_requests/2/edit  \nAccept-Encoding: gzip, deflate  \nAccept-Language: en-GB,en-US;q=0.9,en;q=0.8  \nCookie: _gitlab_session=1; event_filter=all; sidebar_collapsed=false\n\nutf8=%E2%9C%93\u0026_method=patch\u0026authenticity_token=1\u0026merge_request%5Btitle%5D=WIP%3A+Resolve+%22yyyy%22\u0026merge_request%5Bdescription%5D=Closes+%233\u0026merge_request%5Bassignee_id%5D=\u0026merge_request%5Bmilestone_id%5D=847953\u0026merge_request%5Blabel_ids%5D%5B%5D=\u0026merge_request%5Blabel_ids%5D%5B%5D=10328587\u0026merge_request%5Btarget_branch%5D=master\u0026merge_request%5Bforce_remove_source_branch%5D=0\u0026merge_request%5Bsquash%5D=0\u0026merge_request%5Block_version%5D=\u0026merge_request[approval_rules_attributes][][name]=ThisIsCreatedDespiteSettingsByOnwer\u0026merge_request[approval_rules_attributes][][user_ids][]=3148078\u0026merge_request[approval_rules_attributes][][approvals_required]=1  \n```\n\n6. Send this request. Once done, click on EDIT merge request again and scroll down to approval rules.\n\n7. Now you should see the approval rule created despite it was not allowed by owners!  \n![Screenshot_2019-04-22_at_00.31.04.png](https://h1.sec.gitlab.net/a/544756/473363/Screenshot_2019-04-22_at_00.31.04.png)\n\n\n\n### What is the current *bug* behavior?\n\nDeveloper can override the merge request approval rules despite settings by owner!\n\n### What is the expected *correct* behavior?\n\nDeveloper should not be allowed to create approval rule when owner isnt allowing to create\n\n\n\n### Output of checks\n\nThis bug happens on GitLab.com and probably on omnibus installations too!\n\nRegards,  \nAshish\n\n## Impact\n\nDevelopers can override approval rule settings\n\n## Attachments\n**Warning:** Attachments received through HackerOne, please exercise caution!\n* [Screenshot_2019-04-22_at_00.28.49.png](https://h1.sec.gitlab.net/a/544756/473362/Screenshot_2019-04-22_at_00.28.49.png)\n* [Screenshot_2019-04-22_at_00.31.04.png](https://h1.sec.gitlab.net/a/544756/473363/Screenshot_2019-04-22_at_00.31.04.png)","state":"closed","created_at":"2019-05-01T20:55:07.670Z","updated_at":"2019-08-30T22:50:35.876Z","closed_at":"2019-07-29T09:39:24.831Z","closed_by":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"labels":["Create [DEPRECATED]","Deliverable","Enterprise Edition","HackerOne","backend","devops::create","group::source code","priority::3","security","severity::3","workflow::in review"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-07-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11423","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11423","notes":"https://gitlab.com/api/v4/projects/278964/issues/11423/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11423/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11423","relative":"#11423","full":"gitlab-org/gitlab#11423"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20513743,"iid":11422,"project_id":278964,"title":"Developers are not allowed to create a protected branch","description":"### Summary\n\nDevelopers are unable to create protected branches in the UI as outlined in the documentation here: https://docs.gitlab.com/ee/user/project/protected_branches.html#creating-a-protected-branch. \n\n### Steps to reproduce\n\n1. Have a maintainer or owner protect a wildcard branch and set `Allowed to push` to `No one`.\n2. Developer is unable to create a protected branch that matches the wildcard.\n3. Developer sees red banner with `You are not allowed to create branches from this project`\n4. `production_json.log` show a 200 response\n\n### What is the current *bug* behavior?\n\nDevelopers are not able to create protected branches in accordance with the documentation: https://docs.gitlab.com/ee/user/project/protected_branches.html#creating-a-protected-branch.\n\n### What is the expected *correct* behavior?\n\nDevelopers should be able to create protected branches.\n\n### Relevant logs and/or screenshots\n\nCustomer ticket: https://gitlab.zendesk.com/agent/tickets/120302 (internal use)\n\nI was able to reproduce this on 11.10.0\n\nSeems to be a regression since the functionality was introduced in 11.9","state":"closed","created_at":"2019-05-01T20:50:31.706Z","updated_at":"2019-11-05T12:25:32.106Z","closed_at":"2019-11-05T12:25:31.671Z","closed_by":{"id":236961,"username":"marcia","name":"Marcia Ramos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/236961/avatar.png","web_url":"https://gitlab.com/marcia"},"labels":["Enterprise Edition","backend","customer","devops::create","documentation","group::source code","missed-SLO","priority::2","regression","regression:11.10","severity::2","type::bug","workflow::in review"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"}],"author":{"id":1625112,"username":"abuerer1","name":"Aric Buerer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1625112/avatar.png","web_url":"https://gitlab.com/abuerer1"},"type":"ISSUE","assignee":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"user_notes_count":11,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11422","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11422","notes":"https://gitlab.com/api/v4/projects/278964/issues/11422/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11422/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11422","relative":"#11422","full":"gitlab-org/gitlab#11422"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20503639,"iid":11419,"project_id":278964,"title":"Self-serve elasticsearch for the gitlab-org group on staging.gitlab.com and gitlab.com","description":"@mwasilewski\\-gitlab and the production team have been doing some great work getting elasticsearch enabled and working on staging.gitlab.com so far - their infrastructure issues: https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6587#note_165268577\n\nIn %12.0, we (the ~Create) team are hopeful that we can begin to self-serve administration of this feature. Production would be on top of the elasticsearch cluster itself, and have clear [runbooks](https://gitlab.com/gitlab-com/runbooks/merge_requests/1059) about how to turn it off and prevent it from monopolizing sidekiq, but we would be in charge of actually getting the content into the cluster, testing the feature, and eventually enabling and maintaining it, in a manner analogous to how the Gitaly rollout was performed, or the GCP migration.\n\nIn service of that, I'll be investigating the two outstanding things @mwasilewski\\-gitlab identifies in his issue:\n\n- [x] Elasticsearch indexing and Elasticsearch search settings not being completely respected\n    - This is fixed in 12.0, I validated search with indexing on, but ES off, at instance, group, and project level\n    - [x] Create an issue for \"Project dropdown at global scope only shows personal projects\" https://gitlab.com/gitlab-org/gitlab-ce/issues/50981\n- [x] Very long-lived `ElasticIndexerWorker` jobs\n     - Fixed in 12.0, indexing gitlab-ce takes just 30 minutes. Should be sufficient.\n- [x] Broken group-level search for projects needs fixing: https://gitlab.com/gitlab-org/gitlab-ee/issues/12091\n\nI'll also be investigating the index more thoroughly, performing a thorough audit to make sure that:\n\n- [ ] All documents that should be indexed, are\n    - Some large snippets don't import: https://gitlab.com/gitlab-org/gitlab-ee/issues/12111\n- [x] All documents that should not be indexed, are not\n    - The only documents outside the gitlab-ce project that were indexed, were personal snippets. This is expected.\n- [x] Total document numbers are within expectations\n    - Around 743K documents for the gitlab-org group, dominated by gitlab-ce and gitlab-ee.\n    - Notes and commits dominate.\n- [x] Total index size is within expectations\n    - The gitlab-org group takes ~3.2GiB of index size\n    - The gitlab-ce project by itself takes ~450MiB\n- [x] Indexing wikis works\n    - [x] Create an issue to improve rake task performance, or simply integrate into `IndexRecordService`\n- [x] Search performance is improved at both group and project level\n- [x] Advanced search syntax works as expected\n- [x] Code and commit search works at group level\n- [x] Searches at global level still include items from the `gitlab-org` group\n- [x] Removing data from the index works\n    - [x] Create an issue for making `ElasticIndexedProject` work correctly when search is disabled https://gitlab.com/gitlab-org/gitlab-ee/issues/12113\n    - [x] Create an issue to resolve the on-delete conflicts problem https://gitlab.com/gitlab-org/gitlab-ee/issues/12114\n    - [x] Personal snippets are not removed, but are currently unmanaged \n- [x] All search tabs work at group and project scope\n- [x] Page 2 of searches work https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14258\n- [ ] ... other things to check ...\n\nA lot of this will be free exploration - just making sure I look at every aspect of operation of the feature, and searching for things that seem out of place or unusual.\n\ncc @DouweM @mdelaossa","state":"closed","created_at":"2019-05-01T16:35:36.612Z","updated_at":"2019-08-12T15:01:20.331Z","closed_at":"2019-06-25T16:41:52.720Z","closed_by":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"labels":["Create [DEPRECATED]","Deliverable","Enterprise Edition","backend","backstage [DEPRECATED]","devops::create","group::editor","missed-deliverable","missed:12.0","requires production access","workflow::in review"],"milestone":{"id":693520,"iid":34,"group_id":9970,"title":"12.1","description":"https://about.gitlab.com/releases/2019/07/22/gitlab-12-1-released","state":"closed","created_at":"2018-10-30T16:47:58.826Z","updated_at":"2020-04-27T16:30:09.107Z","due_date":"2019-07-22","start_date":"2019-06-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/34"},"assignees":[{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"}],"author":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"type":"ISSUE","assignee":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"user_notes_count":49,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":"2019-06-24","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11419","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":21,"completed_count":19},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"19 of 21 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11419","notes":"https://gitlab.com/api/v4/projects/278964/issues/11419/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11419/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11419","relative":"#11419","full":"gitlab-org/gitlab#11419"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":853,"epic":{"id":4555,"iid":853,"title":"Elasticsearch on GitLab.com MVC","url":"/groups/gitlab-org/-/epics/853","group_id":9970,"human_readable_end_date":"Jul 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24695158,"iid":28429,"project_id":278964,"title":"Git over HTTP LFS requests should generate an authorization header token","description":"The [Git LFS Deep Dive](https://docs.google.com/presentation/d/1E-aw6-z0rYd0346YhIWE7E9A65zISL9iIMAOq2zaw9E/edit#slide=id.g50cdd5255c_0_793) notes that we should be generating an authorization header for authenticating the download of LFS objects. However, a customer noticed their LDAP server was being hammered with bind queries. As we dug in we began to suspect that LFS object downloads were repeatedly authenticating. \n\nI confirmed this in my local environment with GDK. I added some debug logging to `GitLab::Auth` at line https://gitlab.com/gitlab-org/gitlab-ce/blob/0aca6d56ca1b948e6dc4f9f29ba982a16a015438/lib/gitlab/auth.rb#L91. The output would look something like `Authenticating john via #\u003cGitlab::Auth::Database::Authentication:0x00007ff07e5fb330\u003e`. \n\nThe result was that there were numerous authentications when cloning a small repository with 6 LFS objects:\n\n```\nAuthenticating john via #\u003cGitlab::Auth::Database::Authentication:0x00007ff07e5fb330\u003e\nAuthenticating john via #\u003cGitlab::Auth::LDAP::Authentication:0x00007ff07e5e6ca0\u003e\nAuthenticating john via #\u003cGitlab::Auth::Database::Authentication:0x00007ff082a3e538\u003e\nAuthenticating john via #\u003cGitlab::Auth::LDAP::Authentication:0x00007ff082a0f670\u003e\nAuthenticating john via #\u003cGitlab::Auth::Database::Authentication:0x00007ff088d36668\u003e\nAuthenticating john via #\u003cGitlab::Auth::LDAP::Authentication:0x00007ff088bf6b18\u003e\nAuthenticating john via #\u003cGitlab::Auth::Database::Authentication:0x00007ff088812e20\u003e\nAuthenticating john via #\u003cGitlab::Auth::LDAP::Authentication:0x00007ff0888076d8\u003e\nAuthenticating john via #\u003cGitlab::Auth::Database::Authentication:0x00007ff0900f5928\u003e\nAuthenticating john via #\u003cGitlab::Auth::Database::Authentication:0x00007ff0822fc180\u003e\nAuthenticating john via #\u003cGitlab::Auth::LDAP::Authentication:0x00007ff082b49e28\u003e\nAuthenticating john via #\u003cGitlab::Auth::LDAP::Authentication:0x00007ff080c6b358\u003e\nAuthenticating john via #\u003cGitlab::Auth::Database::Authentication:0x00007ff097af1218\u003e\nAuthenticating john via #\u003cGitlab::Auth::Database::Authentication:0x00007ff07e4485b0\u003e\nAuthenticating john via #\u003cGitlab::Auth::LDAP::Authentication:0x00007ff07b826a18\u003e\nAuthenticating john via #\u003cGitlab::Auth::LDAP::Authentication:0x00007ff07e42b280\u003e\nAuthenticating john via #\u003cGitlab::Auth::Database::Authentication:0x00007ff087fe38d0\u003e\nAuthenticating john via #\u003cGitlab::Auth::LDAP::Authentication:0x00007ff087847748\u003e\n```\n\nThe Git trace output for the same clone is:\n\n```\n10:32 $ GIT_TRACE=1 git clone http://john@localhost:3001/root/test-lfs.git test-lfs3\n10:41:11.569733 git.c:415               trace: built-in: git clone http://john@localhost:3001/root/test-lfs.git test-lfs3\nCloning into 'test-lfs3'...\n10:41:11.576886 run-command.c:637       trace: run_command: git-remote-http origin http://john@localhost:3001/root/test-lfs.git\n10:41:11.893372 run-command.c:637       trace: run_command: 'git credential-osxkeychain get'\n10:41:11.901380 git.c:659               trace: exec: git-credential-osxkeychain get\n10:41:11.901909 run-command.c:637       trace: run_command: git-credential-osxkeychain get\n10:41:14.478314 run-command.c:637       trace: run_command: 'git credential-osxkeychain store'\n10:41:14.485532 git.c:659               trace: exec: git-credential-osxkeychain store\n10:41:14.485992 run-command.c:637       trace: run_command: git-credential-osxkeychain store\n10:41:14.521592 run-command.c:637       trace: run_command: git fetch-pack --stateless-rpc --stdin --lock-pack --thin --check-self-contained-and-connected --cloning http://john@localhost:3001/root/test-lfs.git/\n10:41:14.526407 git.c:415               trace: built-in: git fetch-pack --stateless-rpc --stdin --lock-pack --thin --check-self-contained-and-connected --cloning http://john@localhost:3001/root/test-lfs.git/\nremote: Enumerating objects: 13, done.\nremote: Counting objects: 100% (13/13), done.\nremote: Compressing objects: 100% (12/12), done.\nremote: Total 13 (delta 2), reused 0 (delta 0)\n10:41:17.067367 run-command.c:637       trace: run_command: git unpack-objects --pack_header=2,13\n10:41:17.072396 git.c:415               trace: built-in: git unpack-objects --pack_header=2,13\nUnpacking objects: 100% (13/13), done.\n10:41:17.081296 run-command.c:637       trace: run_command: git rev-list --objects --stdin --not --all --quiet '--progress=Checking connectivity'\n10:41:17.086352 git.c:415               trace: built-in: git rev-list --objects --stdin --not --all --quiet '--progress=Checking connectivity'\n10:41:17.094258 run-command.c:637       trace: run_command: 'git-lfs filter-process'\n10:41:17.109266 trace git-lfs: exec: git 'version'\n10:41:17.118641 trace git-lfs: exec: git 'config' '-l'\n10:41:17.123731 trace git-lfs: Install hook: pre-push, force=false, path=/private/tmp/test-lfs3/.git/hooks/pre-push\n10:41:17.123938 trace git-lfs: Install hook: post-checkout, force=false, path=/private/tmp/test-lfs3/.git/hooks/post-checkout\n10:41:17.124105 trace git-lfs: Install hook: post-commit, force=false, path=/private/tmp/test-lfs3/.git/hooks/post-commit\n10:41:17.124259 trace git-lfs: Install hook: post-merge, force=false, path=/private/tmp/test-lfs3/.git/hooks/post-merge\n10:41:17.124390 trace git-lfs: Initialize filter-process\n10:41:17.124560 trace git-lfs: exec: git '-c' 'filter.lfs.smudge=' '-c' 'filter.lfs.clean=' '-c' 'filter.lfs.process=' '-c' 'filter.lfs.required=false' 'rev-parse' 'HEAD' '--symbolic-full-name' 'HEAD'\n10:41:17.129997 trace git-lfs: tq: running as batched queue, batch size of 100\n10:41:17.135603 trace git-lfs: filepathfilter: rejecting \"Screen Shot 2018-10-09 at 10.06.42 AM.png\" via []\n10:41:17.135627 trace git-lfs: filepathfilter: accepting \"Screen Shot 2018-10-09 at 10.06.42 AM.png\"\n10:41:17.135996 trace git-lfs: filepathfilter: rejecting \"Screen Shot 2019-03-14 at 1.18.01 PM.png\" via []\n10:41:17.136007 trace git-lfs: filepathfilter: accepting \"Screen Shot 2019-03-14 at 1.18.01 PM.png\"\n10:41:17.136371 trace git-lfs: filepathfilter: rejecting \"Screen Shot 2019-03-15 at 10.52.44 AM.png\" via []\n10:41:17.136381 trace git-lfs: filepathfilter: accepting \"Screen Shot 2019-03-15 at 10.52.44 AM.png\"\n10:41:17.136732 trace git-lfs: filepathfilter: rejecting \"Screen Shot 2019-03-21 at 9.53.18 AM.png\" via []\n10:41:17.136742 trace git-lfs: filepathfilter: accepting \"Screen Shot 2019-03-21 at 9.53.18 AM.png\"\n10:41:17.137054 trace git-lfs: filepathfilter: rejecting \"Screen Shot 2019-04-11 at 12.48.17 PM.png\" via []\n10:41:17.137065 trace git-lfs: filepathfilter: accepting \"Screen Shot 2019-04-11 at 12.48.17 PM.png\"\n10:41:17.137376 trace git-lfs: filepathfilter: rejecting \"Screen Shot 2019-04-29 at 9.02.19 PM.png\" via []\n10:41:17.137386 trace git-lfs: filepathfilter: accepting \"Screen Shot 2019-04-29 at 9.02.19 PM.png\"\n10:41:17.137536 trace git-lfs: tq: sending batch of size 6\n10:41:17.137796 trace git-lfs: api: batch 6 files\n10:41:17.219589 trace git-lfs: HTTP: POST http://john@localhost:3001/root/test-lfs.git/info/lfs/objects/batch\n10:41:17.389505 trace git-lfs: HTTP: 401\n10:41:17.389596 trace git-lfs: setting repository access to basic\n10:41:17.389604 trace git-lfs: exec: git 'config' '--replace-all' 'lfs.http://localhost:3001/root/test-lfs.git/info/lfs.access' 'basic'\n10:41:17.395174 trace git-lfs: api: http response indicates \"basic\" authentication. Resubmitting...\n10:41:17.395273 trace git-lfs: creds: git credential fill (\"http\", \"localhost:3001\", \"\")\n10:41:17.399530 git.c:415               trace: built-in: git credential fill\n10:41:17.400215 run-command.c:637       trace: run_command: 'git credential-osxkeychain get'\n10:41:17.406730 git.c:659               trace: exec: git-credential-osxkeychain get\n10:41:17.407274 run-command.c:637       trace: run_command: git-credential-osxkeychain get\n10:41:17.434036 trace git-lfs: Filled credentials for http://john@localhost:3001/root/test-lfs.git\n10:41:17.434075 trace git-lfs: HTTP: POST http://john@localhost:3001/root/test-lfs.git/info/lfs/objects/batch\n10:41:19.931640 trace git-lfs: HTTP: 200\n10:41:19.931659 trace git-lfs: creds: git credential approve (\"http\", \"localhost:3001\", \"\")\n10:41:19.936153 git.c:415               trace: built-in: git credential approve\n10:41:19.936781 run-command.c:637       trace: run_command: 'git credential-osxkeychain store'\n10:41:19.943858 git.c:659               trace: exec: git-credential-osxkeychain store\n10:41:19.944324 run-command.c:637       trace: run_command: git-credential-osxkeychain store\n10:41:19.978276 trace git-lfs: HTTP: {\"objects\":[{\"oid\":\"140a047e9cd3e91b32676e131a2a8ba762a1b6c163d4e1b83f8453b3da374555\",\"size\":840718,\"actions\":{\"download\":{\"href\":\"http://localhost:3001/root/test-lfs.git/gitlab-lfs/objects/140a047e9cd3e91b32676e131a2a8ba762a1b6c163d4e1b83f8453b3da374555\",\"header\":{\"Authorization\":\"Basic am9objpwYXNzd29yZA==\"}}}},{\"oid\":\"9bcf7d95051b3e096e8efd29606b1683a1c7f0aa7b136bad803a0b576d96722c\",\"size\":321356,\"actions\":{\"download\":{\"href\":\"http://localhost:3001/root/test-lfs.git/gitlab-lfs/objects/9bcf7d95051b3e096e8\n10:41:19.978320 trace git-lfs: HTTP: efd29606b1683a1c7f0aa7b136bad803a0b576d96722c\",\"header\":{\"Authorization\":\"Basic am9objpwYXNzd29yZA==\"}}}},{\"oid\":\"b90259106fea485c9a2ef311fc24d5a67d093a0f1971f8540ab9c0328aeecb1f\",\"size\":74525,\"actions\":{\"download\":{\"href\":\"http://localhost:3001/root/test-lfs.git/gitlab-lfs/objects/b90259106fea485c9a2ef311fc24d5a67d093a0f1971f8540ab9c0328aeecb1f\",\"header\":{\"Authorization\":\"Basic am9objpwYXNzd29yZA==\"}}}},{\"oid\":\"6cb9391ceebd4cff2e12707e034920c2ef83be9911c0a25d2003d1a4b018acc6\",\"size\":58896,\"actions\":{\"download\":{\"href\":\"http://localhost:3001/root/test-lfs.git/gitlab-lfs/objects/6cb9391ceebd4cff2e12707e034920c2ef83be9911c0a25d2003d1a4b018acc6\",\"header\":{\"Authorization\":\"Basic am9objpwYXNzd29yZA==\"}}}},{\"oid\":\"542a87984acab2d4387f00b6d63dbc533cde1734f2286dce63ee293d04794164\",\"size\":49742,\"actions\":{\"download\":{\"href\":\"http://localhost:3001/root/test-lfs.git/gitlab-lfs/objects/542a87984acab2d4387f00b6d63dbc533cde1734f2286dce63ee293d04794164\",\"header\":{\"Authorization\":\"Basic am9objpwYXNzd29yZA==\"}}}},{\"oid\":\"f3d9\n10:41:19.978466 trace git-lfs: HTTP: ed5edea66a89e7033ca1e4b9df1bdf8e5a656aeafdf3880481064cfa0285\",\"size\":16778,\"actions\":{\"download\":{\"href\":\"http://localhost:3001/root/test-lfs.git/gitlab-lfs/objects/f3d9ed5edea66a89e7033ca1e4b9df1bdf8e5a656aeafdf3880481064cfa0285\",\"header\":{\"Authorization\":\"Basic am9objpwYXNzd29yZA==\"}}}}]}\n10:41:19.978641 trace git-lfs: tq: starting transfer adapter \"basic\"\n10:41:19.979008 trace git-lfs: HTTP: GET http://localhost:3001/root/test-lfs.git/gitlab-lfs/objects/140a047e9cd3e91b32676e131a2a8ba762a1b6c163d4e1b83f8453b3da374555\n10:41:22.445444 trace git-lfs: HTTP: 200\n10:41:22.445690 trace git-lfs: HTTP: GET http://localhost:3001/root/test-lfs.git/gitlab-lfs/objects/9bcf7d95051b3e096e8efd29606b1683a1c7f0aa7b136bad803a0b576d96722c\n10:41:22.445858 trace git-lfs: HTTP: GET http://localhost:3001/root/test-lfs.git/gitlab-lfs/objects/b90259106fea485c9a2ef311fc24d5a67d093a0f1971f8540ab9c0328aeecb1f\n10:41:22.445897 trace git-lfs: HTTP: GET http://localhost:3001/root/test-lfs.git/gitlab-lfs/objects/6cb9391ceebd4cff2e12707e034920c2ef83be9911c0a25d2003d1a4b018acc6\n10:41:22.445913 trace git-lfs: HTTP: GET http://localhost:3001/root/test-lfs.git/gitlab-lfs/objects/542a87984acab2d4387f00b6d63dbc533cde1734f2286dce63ee293d04794164\n10:41:22.446055 trace git-lfs: HTTP: GET http://localhost:3001/root/test-lfs.git/gitlab-lfs/objects/f3d9ed5edea66a89e7033ca1e4b9df1bdf8e5a656aeafdf3880481064cfa0285\n10:41:22.450564 trace git-lfs: filepathfilter: rejecting \"Screen Shot 2019-03-15 at 10.52.44 AM.png\" via []\n10:41:22.450580 trace git-lfs: filepathfilter: accepting \"Screen Shot 2019-03-15 at 10.52.44 AM.png\"\n10:41:25.044367 trace git-lfs: HTTP: 200\n10:41:25.045295 trace git-lfs: filepathfilter: rejecting \"Screen Shot 2019-04-11 at 12.48.17 PM.png\" via []\n10:41:25.045306 trace git-lfs: filepathfilter: accepting \"Screen Shot 2019-04-11 at 12.48.17 PM.png\"\n10:41:25.047362 trace git-lfs: HTTP: 200B | 6.00 KiB/s\n10:41:25.048088 trace git-lfs: filepathfilter: rejecting \"Screen Shot 2019-03-21 at 9.53.18 AM.png\" via []\n10:41:25.048101 trace git-lfs: filepathfilter: accepting \"Screen Shot 2019-03-21 at 9.53.18 AM.png\"\n10:41:27.618504 trace git-lfs: HTTP: 200B | 6.00 KiB/s\n10:41:27.619402 trace git-lfs: filepathfilter: rejecting \"Screen Shot 2019-04-29 at 9.02.19 PM.png\" via []\n10:41:27.619449 trace git-lfs: filepathfilter: accepting \"Screen Shot 2019-04-29 at 9.02.19 PM.png\"\n10:41:27.632659 trace git-lfs: HTTP: 200B | 23.00 KiB/s\n10:41:27.633604 trace git-lfs: filepathfilter: rejecting \"Screen Shot 2019-03-14 at 1.18.01 PM.png\" via []\n10:41:27.633614 trace git-lfs: filepathfilter: accepting \"Screen Shot 2019-03-14 at 1.18.01 PM.png\"\n10:41:30.086076 trace git-lfs: HTTP: 200B | 23.00 KiB/s\n10:41:30.087712 trace git-lfs: filepathfilter: rejecting \"Screen Shot 2018-10-09 at 10.06.42 AM.png\" via []\n10:41:30.087723 trace git-lfs: filepathfilter: accepting \"Screen Shot 2018-10-09 at 10.06.42 AM.png\"\nFiltering content: 100% (6/6), 1.30 MiB | 102.00 KiB/s, done.\n10:41:30.089287 run-command.c:637       trace: run_command: /private/tmp/test-lfs3/.git/hooks/post-checkout 0000000000000000000000000000000000000000 d0a8790da07265f7cc9bc06ccf8242d421cae1da 1\n10:41:30.096896 git.c:659               trace: exec: git-lfs post-checkout 0000000000000000000000000000000000000000 d0a8790da07265f7cc9bc06ccf8242d421cae1da 1\n10:41:30.097334 run-command.c:637       trace: run_command: git-lfs post-checkout 0000000000000000000000000000000000000000 d0a8790da07265f7cc9bc06ccf8242d421cae1da 1\n10:41:30.109334 trace git-lfs: exec: git 'version'\n10:41:30.118753 trace git-lfs: exec: git 'config' '-l'\n10:41:30.123519 trace git-lfs: exec: git '-c' 'filter.lfs.smudge=' '-c' 'filter.lfs.clean=' '-c' 'filter.lfs.process=' '-c' 'filter.lfs.required=false' 'rev-parse' 'HEAD' '--symbolic-full-name' 'HEAD'\n10:41:30.128391 trace git-lfs: filepathfilter: rewrite \".git\" as \"**/.git/**\"\n10:41:30.128418 trace git-lfs: filepathfilter: rewrite \"**/.git\" as \"**/.git\"\n10:41:30.128487 trace git-lfs: filepathfilter: rejecting \"test-lfs3\" via []\n10:41:30.128499 trace git-lfs: filepathfilter: accepting \"test-lfs3\"\n10:41:30.128633 trace git-lfs: filepathfilter: rejecting \"Screen Shot 2019-04-29 at 9.02.19 PM.png\" via []\n10:41:30.128655 trace git-lfs: filepathfilter: accepting \"Screen Shot 2019-04-29 at 9.02.19 PM.png\"\n10:41:30.128663 trace git-lfs: filepathfilter: rejecting \"Screen Shot 2019-03-21 at 9.53.18 AM.png\" via []\n10:41:30.128667 trace git-lfs: filepathfilter: accepting \"Screen Shot 2019-03-21 at 9.53.18 AM.png\"\n10:41:30.128674 trace git-lfs: filepathfilter: rejecting \"Screen Shot 2018-10-09 at 10.06.42 AM.png\" via []\n10:41:30.128678 trace git-lfs: filepathfilter: accepting \"Screen Shot 2018-10-09 at 10.06.42 AM.png\"\n10:41:30.128683 trace git-lfs: filepathfilter: rejecting \"Screen Shot 2019-03-14 at 1.18.01 PM.png\" via []\n10:41:30.128689 trace git-lfs: filepathfilter: accepting \"Screen Shot 2019-03-14 at 1.18.01 PM.png\"\n10:41:30.128692 trace git-lfs: filepathfilter: rejecting \"Screen Shot 2019-04-11 at 12.48.17 PM.png\" via []\n10:41:30.128696 trace git-lfs: filepathfilter: accepting \"Screen Shot 2019-04-11 at 12.48.17 PM.png\"\n10:41:30.128702 trace git-lfs: filepathfilter: rejecting \".gitattributes\" via []\n10:41:30.128707 trace git-lfs: filepathfilter: accepting \".gitattributes\"\n10:41:30.128713 trace git-lfs: filepathfilter: rejecting \"Screen Shot 2019-03-15 at 10.52.44 AM.png\" via []\n10:41:30.128719 trace git-lfs: filepathfilter: accepting \"Screen Shot 2019-03-15 at 10.52.44 AM.png\"\n10:41:30.128727 trace git-lfs: filepathfilter: rejecting \".git\" via []\n10:41:30.128733 trace git-lfs: filepathfilter: rejecting \".git\" via \".git\"\n10:41:30.130201 run-command.c:46        trace: run_command: running exit handler for pid 39746\n10:41:30.130341 trace git-lfs: filepathfilter: rewrite \".git\" as \"**/.git/**\"\n10:41:30.130360 trace git-lfs: filepathfilter: rewrite \"**/.git\" as \"**/.git\"\n10:41:30.130400 trace git-lfs: filepathfilter: rejecting \"tmp\" via []\n10:41:30.130407 trace git-lfs: filepathfilter: accepting \"tmp\"\n```\n\nNo wonder the customer is having trouble with larger repositories. \n\nAs I expected, using a Personal Access Token eliminates all of this. In the meantime, I've suggested the customer move to using a PAT but they use this service user in many locations so it's taking time to update from the password to PAT. \n\nIs this a regression? Am I misunderstanding the Git LFS Deep Dive and we don't use an authorization header here?","state":"closed","created_at":"2019-05-01T15:44:34.921Z","updated_at":"2023-01-09T09:15:38.328Z","closed_at":"2019-09-27T21:21:19.560Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["Category:Source Code Management","Create [DEPRECATED]","Git LFS","Stretch","backend","bug::performance","customer","devops::create","group::source code","ldap","priority::3","section::dev","severity::3","type::bug","workflow::in review"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":955795,"username":"fjsanpedro","name":"Francisco Javier LÃ³pez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"}],"author":{"id":13356,"username":"dblessing","name":"Drew Blessing","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b5bf44866b4eeafa2d8114bfe15da02f?s=80\u0026d=identicon","web_url":"https://gitlab.com/dblessing"},"type":"ISSUE","assignee":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier LÃ³pez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"user_notes_count":13,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28429","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28429","notes":"https://gitlab.com/api/v4/projects/278964/issues/28429/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28429/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28429","relative":"#28429","full":"gitlab-org/gitlab#28429"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695152,"iid":28426,"project_id":278964,"title":"Projects can be transferred to groups where you have developer role only","description":"**[HackerOne report #542685](https://hackerone.com/reports/542685)** by `ashish_r_padelkar` on 2019-04-19, assigned to `estrike`:\n\n### Summary  \nHello,\n\nAgain, not sure if its documentation error or a security issue but though i should report it anyways.\n\nThe documentation here at `https://docs.gitlab.com/ee/user/project/settings/#transferring-an-existing-project-into-another-namespace` states \n\n```  \nYou can transfer an existing project into a group if:\n\n1. you have at least Maintainer permissions to that group  \n2. you are an Owner of the project.  \n```\n\nThe first case is NOT true because you can transfer the project into any group where you have `Developer` role too.\n\nWhen you go to transfer project settings in any of your owner project  at  `https://gitlab.com/\u003cUserName\u003e/\u003cProjectName\u003e/edit` , You will only see the groups that you either own or have maintainers permissions in a dropdown which is true as per documentation.\n\nHowever, when you capture the request and change the `new_namespace_id` parameter ID in below request to a group where you have `Developer` role, it goes through and move the project into the group.\n\n```  \nPOST /\u003cUserName\u003e/\u003cProjectName\u003e/transfer HTTP/1.1  \nHost: gitlab.com  \nConnection: close  \nContent-Length: 75  \nAccept: */*;q=0.5, text/javascript, application/javascript, application/ecmascript, application/x-ecmascript  \nOrigin: https://gitlab.com  \nX-CSRF-Token: 1  \nX-Requested-With: XMLHttpRequest  \nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36  \nContent-Type: application/x-www-form-urlencoded; charset=UTF-8  \nReferer: 1  \nAccept-Encoding: gzip, deflate  \nAccept-Language: en-GB,en-US;q=0.9,en;q=0.8  \nCookie: 1\n\nutf8=%E2%9C%93\u0026_method=put\u0026new_namespace_id=4962333\u0026commit=Transfer+project  \n```\n\n\nThis probably happens when you have a setting at target group level which allows `Developers` to create projects \n\n![Screenshot_2019-04-19_at_20.37.09.png](https://h1.sec.gitlab.net/a/542685/472180/Screenshot_2019-04-19_at_20.37.09.png)\n\nThe document was updated as a result of #446683. \n\n### Steps to reproduce  \n1. As a project owner, go to your settings at `https://gitlab.com/\u003cUserName\u003e/\u003cProjectName\u003e/edit` where transfer projects is available.\n\n2. You will find list of groups that you own or have maintainer role in a dropdown. This works fine as per documentation.\n\n3. Now select any group and click `Transfer Project` and at this point capture the request in burp suit.\n\nThe request looks like shown above.\n\n4. You can see that there is a `new_namespace_id` parameter in request. Change it to a Group ID where you have only `Developer` role. and send the request.\n\n5. Projects will be transferred to the group where you have developer role which contradicts the documentation!\n\n\n\n### What is the current *bug* behavior?\n\nAllows you to transfer the project to groups where you have developer role.\n\n### What is the expected *correct* behavior?\n\nAs per documentation and UI, Projects should be transferred to groups which you own or have Maintainer permissions!\n\n\n\n### Output of checks\n\nThis bug happens on GitLab.com and probably on omnibus installations too!\n\nRegards,  \nAshish\n\n## Impact\n\nAllows you to transfer the projects to groups where you have developer permissions!\n\n## Attachments\n**Warning:** Attachments received through HackerOne, please exercise caution!\n* [Screenshot_2019-04-19_at_20.37.09.png](https://h1.sec.gitlab.net/a/542685/472180/Screenshot_2019-04-19_at_20.37.09.png)","state":"closed","created_at":"2019-05-01T14:51:03.836Z","updated_at":"2019-11-27T22:56:17.595Z","closed_at":"2019-11-07T11:34:59.742Z","closed_by":{"id":4086191,"username":"cmaxim","name":"Costel Maxim","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4086191/avatar.png","web_url":"https://gitlab.com/cmaxim"},"labels":["Category:Subgroups","Deliverable","HackerOne","backend","devops::manage","estimation::needed","group::authentication and authorization","priority::2","project","security","severity::2","workflow::in review"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-07-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28426","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28426","notes":"https://gitlab.com/api/v4/projects/278964/issues/28426/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28426/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28426","relative":"#28426","full":"gitlab-org/gitlab#28426"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695116,"iid":28412,"project_id":278964,"title":"Merge Request Approval Rules Still Create Todos for Non-Project Members After Paid Plans Expire","description":"### Summary\n\nMerge request approvals still assign Todos to non-project members after a paid plan expires.\n\nThis bug was originally reported by a user (GitLab internal): https://gitlab.zendesk.com/agent/tickets/119661\n\n### Steps to reproduce\n\n1. Sign up for a Bronze Subscription.\n1. Create a project.\n1. Add a user as a Developer, called \"TestUser\" for example.\n1. Set a Merge Request Approval rule and add \"TestUser\".\n1. Remove or let the paid plan expire.\n1. Remove \"TestUser\" from the project.\n1. Create a new Merge Request. A Todo with the MR details will be assigned to \"TestUser\".  The rendered link to the MR will 404 when clicked.\n\n### What is the current *bug* behavior?\n\nThe Todo is assigned to the non-member. The title of merge request is available in the tooltip of the rendered link.\n\n### What is the expected *correct* behavior?\n\nNo Todo should be assigned. All existing Todos should expire (this may be a separate bug).\n\n### Relevant logs and/or screenshots\n\n![Todos___Dashboard___GitLab](/uploads/acf8cbe107082cdbddc0159089e6ac73/Todos___Dashboard___GitLab.png)\n\n### Output of checks\n\nThis bug happens on GitLab.com.","state":"closed","created_at":"2019-04-30T22:19:06.754Z","updated_at":"2020-12-07T16:51:08.749Z","closed_at":"2019-11-27T22:33:03.162Z","closed_by":{"id":4226366,"username":"ankelly","name":"Andrew Kelly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4226366/avatar.png","web_url":"https://gitlab.com/ankelly"},"labels":["Category:Code Review Workflow","Deliverable","approvals","backend","customer","devops::create","group::code review","merge requests","missed-SLO","priority::2","security","severity::3","type::bug","workflow::verification"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"}],"author":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"type":"ISSUE","assignee":{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-11-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28412","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28412","notes":"https://gitlab.com/api/v4/projects/278964/issues/28412/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28412/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28412","relative":"#28412","full":"gitlab-org/gitlab#28412"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20478858,"iid":11403,"project_id":278964,"title":"Board list capacity controls (WIP Limits MVC)","description":"### Problem To Solve\nThe more issues in progress in a given workflow stage, the longer it takes to complete any one given issue. That fact, coupled with the cost of context switching being a 15-40% negative drain on productivity, makes having multiple issues in progress incredibly inefficient. The goal of continuous delivery is to break customer value down into [small vertical feature slices](https://www.jamesshore.com/images/art-of-agile/figs/release_planning__horizontal_and_vertical_stripes.gif) that can be iteratively and incrementally deployed. [This article](https://www.jamesshore.com/Agile-Book/release_planning.html) describes the problem from a quantitative standpoint and can be applied to the concept of both a broader release and a single unit of functionality capable of producing customer value.\n\n### Intended Users\nDev Managers, Execs, Team Leads, Product Managers, Project Managers\n\n### Proposal\nLists within Issue Boards need to be able to support a basic primitive such as \"Work in Progress\" (WIP) so teams have the flexibility to manually adjust the number of items in progress at any point in time for a given workflow stage. Teams need quick visual feedback on whether or not they are working within the limits. \n\nFor this MVC, we will only support WIP limits by issue count. Future iterations will include the ability to configure WIP Limits by other means such as total weight, issue type, etc. \n\nThe [Issue Board WIP Limits Epic](https://gitlab.com/groups/gitlab-org/-/epics/1628) contains more context, user research, and information on why we are prioritizing WIP Limits vs. a capacity line.  \n\n### What does success look like and how can we measure that?\n\n* **Adoption:** What percentage of boards are using WIP limits?\n* **Impact:** What is the throughput improvement for teams that adopt WIP Limits? (we will have to figure out how to track this, but theoretically we should be able to in a fairly straightforward manner).  \n\n### Acceptance Criteria\n* A user can add, update, remove a `Max` work in progress limit per Issue List.\n* The visual appearance of the List changes in accordance with the List States below, and remains in effect when a List is in the collapsed state. \n* Sufficient telemetry implemented such that we can measure the \"success criteria\" outlined in the above section. \n\n**List States:**\n\n| State | Severity |\n| ------ | ------ |\n| `\u003c Max` | None |\n| `= Max` | Medium |\n| `\u003e Max` | High |\n\n### Design\n\nView specs here: https://gitlab-org.gitlab.io/gitlab-design/hosted/alexis/ee%2311403-WIP-limits-spec-previews/\n\n\n#### General flow\n![Flow](https://gitlab.com/gitlab-org/gitlab/uploads/788ed3c4d8758cbce21c9f7613fc941c/Flow.png)\n\n#### Interactions\n![wipinteractions](https://gitlab.com/gitlab-org/gitlab/uploads/61fd11b2ddfab6f1c358f0d6a36589b3/wipinteractions.mov)\n\n\n#### Design requirements\n\n**Column List**\n\n*  Remove 1px border from the list weight and list issue count display.\n\u003cimg src=\"/uploads/e39cb734633b0889cd7a190701d5d6bb/image.png\"  width=\"300\" height=\"80\"\u003e\n\n*  Separate tooltips in the count by \"weight\" and \"issue count\" so they now read \"## total weight\" and \"## issues\". These can be triggered by hovering over the icon or the numbers. If a column has a WIP limit it reads \"## issues with a limit of ##\". \n*  Add new \"list settings\" button as a button-group to the list navigation. Use the settings icon for MVC.\n*  On hover of \"list settings\" icon trigger a tooltip that read \"List settings\"\n*  When a WIP limit is applied, display this after and next to the issue count, ie: 2 (ISSUES) /2 (WIP)\n   *  If the WIP limit is not maxed, the issue count in the list will be the same color as it is currently and match the WIP limit count.\n   *  If the WIP limit is maxed, the issue count in the list will change to our alert color red-500 (#db3b21)\n*  If WIP limit is maxed:\n   *  The background fill of the list changes to red-100 (#fbe5e1) to match our alert banner styling.\n*  When the List settings button in the list menu has been clicked:\n   *  Trigger a \"list selected state\" of the column:\n      *  Border shadow styling of column: x:0, y:1, blur:2, spread:0\n         *  Border shadow color of column: #000000, alpha/opacity 10% (this styling is the same as on our issue card box)\n      *  Add background fill to the list top menu- Background fill color: Inherit the label color with an opacity of 10% (you can see in the mocks it inherits the green label color)\n   *  Trigger List Setting sidebar. This interaction is similar to clicking on an issue card in a board.\n\n**List Settings Sidebar**\n\n*  Sidebar includes (EE) :\n   *  The list category with that corresponding label. These could be Label (displays the label), Milestone (displays the milestone), and Assignee (displays the assignee). *User can't edit*\n   *  Total issue count. *User can't edit*\n   *  Total weight. *User can't edit*\n   *  Work in Progress limit\n      *  Reuse the pattern for adding weight for MVC.\n   *  Position. *Future scope/stretch*\n   *  Delete list\n      *  Reuse the pattern for \"move issue\" for MVC.\n*  Reuse current sidebar patterns and interactions for MVC.\n\n*  Sidebar includes (CE) :\n   *  The list category with that corresponding label. These could be Label (displays the label), Milestone (displays the milestone), and Assignee (displays the assignee). *User can't edit*\n   *  Total issue count. *User can't edit*\n   *  Total weight. *User can't edit*\n   *  Position. *Future scope/stretch*\n   *  Delete list\n      *  Reuse the pattern for \"move issue\" for MVC.\n*  Reuse current sidebar patterns and interactions for MVC.\n\n### Previous Issue Description:\n\u003cdetails\u003e\n### Problem to solve\n\nUsers of boards should be able to quickly and visually indicate what's \"above or below the line\" with respect to capacity planning. The use cases are numerous including sprint planning, but also for teams who use boards for tracking agenda items.\n\nThis issue is the MVC of more holistic [board capacity planning](https://gitlab.com/gitlab-org/gitlab-ee/issues/6765) functionality.\n\n### Intended users\n\nDev Managers, Execs, Team Leads, Product Managers\n\n### Proposal\n\nImplement a UI element to create a line break for each column in a board. If a line is created, it appears at the top and can be dragged to any point in a column. Lines can also be deleted. Issues on a board should be draggable above and below the line and the line should adjust visually as needed. Issues should only move above or below the line if manually dragged, they should not be automatically adjusted.\n\nFor this MVC, we will not allow naming of the line, nor multiple lines per list.\n\n![image](/uploads/a70b38585c76ecd452b5556ce6fd8c8a/image.png)\n\n### What does success look like, and how can we measure that?\n\nNumber of lines created, in use, deleted should be measured to understand adoption of the feature.\n\n\n### Solution\n\n| Interaction flow | Anatomy |\n| ------ | ------ |\n| ![General_interactions](/uploads/4496081164e5aa10acbb65f6e7757eb0/General_interactions.png) |![Anatomy](/uploads/5415ba6b044d0e4e560abdb3eaf1cf17/Anatomy.png)| \n\n**Requirements**\n\n*  Move `remove list` option to the button group and use the associated button group button state behavior. I notice we use a different icon for the trash can than I see in the design pattern library. Can we investigate this?\n*  Remove 1px border from the list weight and list issue count display.\n\u003cimg src=\"/uploads/e39cb734633b0889cd7a190701d5d6bb/image.png\"  width=\"300\" height=\"80\"\u003e\n\n*  Add \"List line\" icon to button group (this icon is being created by the awesome @jeldergl to replace my mock but I will update this with the icon when we complete that)\n*  For MVC- let's treat this line almost as if it is a new issue card (interaction wise)\n     * A. User sees a new option within the button group.\n     * B. User sees list line tool tip on hover. Copy is: \"Add list line\".\n     * C. When the user clicks to add a list line, they see the line appear at the top of their list. There is an indicator that they can drag the line up and down (@jeldergl is working for an icon for us here to replace my mock, I will update when we complete that) as well as an option to remove the line.\n     * D. When a user clicks anywhere on the line (except for remove), the line becomes a card to further indicate it can be dragged and help with visibility when the line is overlapping other elements. We can hone this behavior (especially remove states) in future iterations.\n     * E. The line dragging behavior is similar to that of dragging an issue card for MVC.\n     * F. Once dropped, the line is back to its original styling.\n*  User sees tooltip \"Remove line\" when they hover over the remove icon in the line.\n*  User sees tooltip \"Move line\" when they hover over the drag and drop indication icon in the line.\n*  If a user moves all cards out of the list, the line remains. Lines remain under they are removed for MVC.\n*  If a user tries to move a line out of its list- preferred behavior would be that they are not able to do this and can only move the card up and down. For MVC, I think it should be fine if they can move a line out of a list and into another list *as long as a user is able to have multiple lines per list.*\n*  Stacking behavior: If a user has:\n\n```\nIssue A\nIssue B\n\n- line list -\n\nIssue C\n```\n\nWhen they add `Issue D` to the top of the list, their list now looks like:\n\n```\nIssue D\nIssue A\nIssue B\n\n- line list -\n\nIssue C\n```\n\u003c/details\u003e\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2019-04-30T16:29:42.166Z","updated_at":"2022-05-19T16:09:01.068Z","closed_at":"2020-02-14T17:01:01.212Z","closed_by":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"labels":["Category:Team Planning","Enterprise Edition","GitLab Starter","Technical Writing","backend","boards","breadth","customer","customer+","devops::plan","direction","documentation","frontend","group::project management","internal customer","missed-deliverable","missed:12.4","missed:12.5","researched [DEPRECATED]","type::feature","workflow::verification"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":3617348,"username":"uhlexsis","name":"Alexis Ginsberg","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3617348/avatar.png","web_url":"https://gitlab.com/uhlexsis"},{"id":3658061,"username":"rdickenson","name":"Russell Dickenson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3658061/avatar.png","web_url":"https://gitlab.com/rdickenson"},{"id":4447636,"username":"sstern","name":"Scott Stern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4447636/avatar.png","web_url":"https://gitlab.com/sstern"}],"author":{"id":3225050,"username":"ebrinkman","name":"Eric Brinkman","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3225050/avatar.png","web_url":"https://gitlab.com/ebrinkman"},"type":"ISSUE","assignee":{"id":3617348,"username":"uhlexsis","name":"Alexis Ginsberg","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3617348/avatar.png","web_url":"https://gitlab.com/uhlexsis"},"user_notes_count":150,"merge_requests_count":0,"upvotes":11,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11403","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11403","notes":"https://gitlab.com/api/v4/projects/278964/issues/11403/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11403/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11403","relative":"#11403","full":"gitlab-org/gitlab#11403"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1628,"epic":{"id":10009,"iid":1628,"title":"Issue Board WIP Limits","url":"/groups/gitlab-org/-/epics/1628","group_id":9970,"human_readable_end_date":"Jan 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24695084,"iid":28404,"project_id":278964,"title":"Remove done callbacks from spec/frontend/vue_shared/components/markdown/","description":"The following discussion from gitlab-ce!27779 should be addressed:\n\n- [ ] @winh started a [discussion](https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/27779#note_165626885):  (+1 comment)\n\n    \u003e @epenance Sorryâ€”only now realized we can do some more cleanup here:\n    \u003e \n    \u003e For example\n    \u003e \n    \u003e ```javascript\n    \u003e       it('converts a line', done =\u003e {\n    \u003e         const textarea = vm.$el.querySelector('textarea');\n    \u003e \n    \u003e         textarea.setSelectionRange(0, 0);\n    \u003e         vm.$el.querySelectorAll('.js-md')[5].click();\n    \u003e \n    \u003e         Vue.nextTick(() =\u003e {\n    \u003e           expect(textarea.value).toContain('*  testing');\n    \u003e \n    \u003e           done();\n    \u003e         });\n    \u003e       });\n    \u003e ```\n    \u003e \n    \u003e can become\n    \u003e \n    \u003e ```javascript\n    \u003e       it('converts a line', () =\u003e {\n    \u003e         const textarea = vm.$el.querySelector('textarea');\n    \u003e \n    \u003e         textarea.setSelectionRange(0, 0);\n    \u003e         vm.$el.querySelectorAll('.js-md')[5].click();\n    \u003e \n    \u003e         return Vue.nextTick()\n    \u003e           .then(() =\u003e {\n    \u003e             expect(textarea.value).toContain('*  testing');\n    \u003e           });\n    \u003e       });\n    \u003e ```\n    \u003e \n    \u003e because Jest supports waiting for Promises.\n    \u003e \n    \u003e Do you think you could go through the test files migrated here and get rid of the `done` callbacks?\n    \u003e \n    \u003e We can make that a separate merge request though if you prefer.\n\n**Blocked by: https://gitlab.com/gitlab-org/gitlab/issues/27262**","state":"closed","created_at":"2019-04-30T15:08:20.474Z","updated_at":"2022-05-19T16:09:13.225Z","closed_at":"2019-11-19T13:34:09.092Z","closed_by":{"id":502136,"username":"fatihacet","name":"Fatih Acet","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/502136/avatar.png","web_url":"https://gitlab.com/fatihacet"},"labels":["Community contribution","backstage [DEPRECATED]","devops::plan","frontend","group::project management","maintenance::refactor","missed:12.4","missed:12.5","test","workflow::in review"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},{"id":1933526,"username":"leetickett","name":"Lee Tickett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1933526/avatar.png","web_url":"https://gitlab.com/leetickett"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":8,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28404","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28404","notes":"https://gitlab.com/api/v4/projects/278964/issues/28404/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28404/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28404","relative":"#28404","full":"gitlab-org/gitlab#28404"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20464986,"iid":11394,"project_id":278964,"title":"Geo: Update existing ansible playbook to create a basic Geo setup","description":"Stan has created an awesome playbooks https://gitlab.com/stanhu/ansible-gitlab-geo. It creates an HA cluster, we will need it later but for now, we need a basic Geo setup. Let's inspect it and modify. We need to be able to spin up a basic Geo setup with one command on GCP. With no data yet.","state":"closed","created_at":"2019-04-30T10:04:58.588Z","updated_at":"2019-12-16T14:49:45.486Z","closed_at":"2019-07-15T15:28:59.478Z","closed_by":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"labels":["Category:Geo Replication","Enterprise Edition","devops::systems","group::geo"],"milestone":null,"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"}],"author":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11394","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11394","notes":"https://gitlab.com/api/v4/projects/278964/issues/11394/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11394/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11394","relative":"#11394","full":"gitlab-org/gitlab#11394"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1264,"epic":{"id":6615,"iid":1264,"title":"Make it incredibly easy to provision GitLab with Geo enabled for the Geo team","url":"/groups/gitlab-org/-/epics/1264","group_id":9970,"human_readable_end_date":"Jun 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":20458036,"iid":11391,"project_id":278964,"title":"After moving Service Desk issue, email comes in at original (closed) issue","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nAfter moving a Service Desk issue to another project, new email sent to the `incoming+...@incoming.gitlab.com` address will still come in at the original (closed) issue instead of the newly created (moved) issue.\n\nZD: https://gitlab.zendesk.com/agent/tickets/119876 (internal)\n\n### Steps to reproduce\n\n1. Send an email to the Service Desk's incoming email address; this opens a SD issue\n2. Move the issue to a different project\n3. Email a response to the original Service Desk email; the reply shows in the closed issue in the old project\n\n### Example Project\n\nhttps://gitlab.com/dotcom-support-testing/sd-project-a/issues/1\n\n### What is the current *bug* behavior?\n\nA note is added to the closed issue (and the issue isn't reopened)\n\n### What is the expected *correct* behavior?\n\nA note is added to the new (moved) issue\n\n### Output of checks\n\nThis bug happens on GitLab.com","state":"closed","created_at":"2019-04-30T06:15:32.750Z","updated_at":"2023-01-12T00:35:23.868Z","closed_at":"2020-04-01T11:04:16.115Z","closed_by":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"labels":["Category:Service Desk","Enterprise Edition","backend","customer","devops::plan","group::respond","priority::4","severity::4","type::bug","type::feature","workflow::verification"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"}],"author":{"id":1944308,"username":"deandre","name":"DeAndre Harris","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1944308/avatar.png","web_url":"https://gitlab.com/deandre"},"type":"ISSUE","assignee":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11391","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11391","notes":"https://gitlab.com/api/v4/projects/278964/issues/11391/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11391/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11391","relative":"#11391","full":"gitlab-org/gitlab#11391"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24695025,"iid":28376,"project_id":278964,"title":"Merge Request comments have stopped appearing for the whole project","description":"For example, consider the private repository https://gitlab.com/musedev/muse/merge_requests/192\n\nComments are not appearing even though some MRs have 10 notes attached.   These comments were made by a bot and are likely somewhat long (thousands of bytes)... but I wouldn't know for sure because I can't see them.\n\nI also experienced this issue with gitlab-ee but was unable to provide a reproduceable test to the team, hopefully now being on gitlab.com makes that unnecessary.","state":"closed","created_at":"2019-04-30T00:21:37.341Z","updated_at":"2020-12-07T16:51:10.126Z","closed_at":"2020-02-11T10:58:36.965Z","closed_by":{"id":2167502,"username":"robotmay_gitlab","name":"Robert May","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2167502/avatar.png","web_url":"https://gitlab.com/robotmay_gitlab"},"labels":["Category:Code Review Workflow","Deliverable","backend","customer","devops::create","group::code review","merge requests","missed-SLO","priority::2","severity::1","type::bug"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":2167502,"username":"robotmay_gitlab","name":"Robert May","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2167502/avatar.png","web_url":"https://gitlab.com/robotmay_gitlab"}],"author":{"id":516019,"username":"tommd","name":"Thomas DuBuisson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/516019/avatar.png","web_url":"https://gitlab.com/tommd"},"type":"ISSUE","assignee":{"id":2167502,"username":"robotmay_gitlab","name":"Robert May","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2167502/avatar.png","web_url":"https://gitlab.com/robotmay_gitlab"},"user_notes_count":29,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28376","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28376","notes":"https://gitlab.com/api/v4/projects/278964/issues/28376/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28376/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28376","relative":"#28376","full":"gitlab-org/gitlab#28376"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20445782,"iid":11384,"project_id":278964,"title":"Link to customers portal in renewal banner","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\nSelf-managed customer suggested adding the link to the customers portal in the warning banner on their instance, because they only go to the portal once a year and often forget where to go and sometimes go to gitlab.com instead. Several customers have mentioned they share this confusion.\n\n### Proposal\n\nAdd a link to the customers portal in the renewal banner.\n\n### Result\n\nCustomers have a clear understanding of where to go to manage their license.\n\n### Next steps (if any)","state":"closed","created_at":"2019-04-29T17:16:05.070Z","updated_at":"2019-09-25T21:22:05.567Z","closed_at":"2019-09-11T22:13:28.952Z","closed_by":{"id":4068412,"username":"mkarampalas","name":"Michael Karampalas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b1427f54773954af4d75c5514504229b?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkarampalas"},"labels":["Enterprise Edition","UX","[deprecated] ðŸŽ","devops::fulfillment","devops::growth","retention"],"milestone":null,"assignees":[{"id":3354144,"username":"timnoah","name":"Tim Noah","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3354144/avatar.png","web_url":"https://gitlab.com/timnoah"}],"author":{"id":1223858,"username":"chloe","name":"Chloe Whitestone","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1223858/avatar.png","web_url":"https://gitlab.com/chloe"},"type":"ISSUE","assignee":{"id":3354144,"username":"timnoah","name":"Tim Noah","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3354144/avatar.png","web_url":"https://gitlab.com/timnoah"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11384","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11384","notes":"https://gitlab.com/api/v4/projects/278964/issues/11384/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11384/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11384","relative":"#11384","full":"gitlab-org/gitlab#11384"},"severity":"UNKNOWN","moved_to_id":24707692,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20443236,"iid":11381,"project_id":278964,"title":"Public Group owners/Maintainers can not delete comments posted on epics","description":"**[HackerOne report #538101](https://hackerone.com/reports/538101)** by `ashish_r_padelkar` on 2019-04-14, assigned to `estrike`:\n\n### Summary  \nHello,\n\nI havent found any documentation as such but looks like comments posted on `Epics` in any public group can not be deleted by even `Group owners/maintainers`. This looks like a bug as comments posted on issues/merge requests are editable and deletable by Admins.\n\n\n### Steps to reproduce  \n1. Create a public group and then create an epic inside it (Use GOLD membership).\n\n2. As it is public epic, anyone can comment on it by navigating on epic like `https://gitlab.com/groups/PrivateGroupofGuest/-/epics/1`. So just post a comment as any user.\n\n3. When, group owners/maintainer visits this epic, they see the comment which is posted by random user from gitlab. They dont find an option to EDIT/DELETE the comment!.\n\n4. This way any random users may spam the epic comment box and Group Owners/Maintainers cant even delete those comments!.\n\n\n\n\n### What is the current *bug* behavior?  \nGroup owners/Maintainers can not delete comments posted on EPIC\n\n### What is the expected *correct* behavior?\n\nGroup owner/Maintainers should be able to delete/edit anyones comment like it is in issues and merge requests\n\n\n### Output of checks\n\nThis bug happens on GitLab.com and probably on omnibus installations too\n\n\nRegards,  \nAshish\n\n## Impact\n\nAnyone can spam the comments on `EPIC` from public groups and then group owners/maintainers can not even edit/delete the comments posted by others","state":"closed","created_at":"2019-04-29T15:26:15.329Z","updated_at":"2022-05-19T16:09:00.090Z","closed_at":"2019-07-30T10:19:09.547Z","closed_by":{"id":4056133,"username":"jeremymatos","name":"Jeremy Matos","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7c972d878793ca2302186e5d8c0c0dd8?s=80\u0026d=identicon","web_url":"https://gitlab.com/jeremymatos"},"labels":["Enterprise Edition","HackerOne","backend","devops::plan","group::project management","priority::3","security","severity::3","type::bug","workflow::verification"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-07-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11381","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11381","notes":"https://gitlab.com/api/v4/projects/278964/issues/11381/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11381/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11381","relative":"#11381","full":"gitlab-org/gitlab#11381"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20442905,"iid":11379,"project_id":278964,"title":"Stored XSS in Child Epics via ancestor Epic name","description":"**[HackerOne report #549747](https://hackerone.com/reports/549747)** by `near_` on 2019-04-28, assigned to `estrike`:\n\n## Background\n\nGitLab 11.7 [introduced](https://gitlab.com/gitlab-org/gitlab-ee/issues/8333) the ability to nest Epics with a maximum depth of 5. The \"Ancestors\" panel does not sanitize parent Epic titles correctly leading to stored XSS when a child Epic is loaded.  \n\n## Issue\n\n### Proof of concept\n\n1. As an authenticated GitLab.com user on a Gold plan, create a new group \n\n2. Within the group, create a new Epic (\"parent\") with the title `test'\u003e{{4-1}}\u003c/select\u003e\u003c/script\u003e\u0026lt;img src=x onerror=alert(document.domain)\u0026gt;\u003cimg src=x onerror=alert(document.domain)\u003e`\n\n3. Create another Epic (\"child\") with any title and take note of the URL. \n\n4. Return to the parent Epic \u003e click the plus button inside the \"Epics\" pane \u003e add the child epic URL\n\n5. Finally, browse to the child Epic and observe that `alert(document.domain)` is executed.\n\n![child_epic_xss.png](https://h1.sec.gitlab.net/a/549747/477480/child_epic_xss.png)\n\n### Â Context\n\nIt looks like the unsanitized HTML is being injected into a hidden sidebar `\u003cdiv\u003e` within the Ancestors pane:\n\n```  \n\u003cdiv aria-hidden=\"true\" class=\"d-none\" style=\"display: none;\"\u003e\u003cdiv\u003e\u003cspan\u003etest'\u0026gt;{{4-1}}\u0026lt;img src=x onerror=alert(document.domain)\u0026gt;\u003cimg src=\"x\" onerror=\"alert(document.domain)\"\u003e\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e  \n```  \nI used https://gitlab.com/groups/near_h1_group_a/-/epics/7 as the parent Epic and https://gitlab.com/groups/near_h1_group_a/-/epics/8 as the child Epic (both are located within a private Group).\n\n## Impact\n\nAn attacker could use this stored XSS on GitLab.com and self-hosted CE/EE instances to execute arbitrary JavaScript (e.g. for info theft / taking malicious actions) in victims' sessions with minimal user interaction.\n\n## Attachments\n**Warning:** Attachments received through HackerOne, please exercise caution!\n* [child_epic_xss.png](https://h1.sec.gitlab.net/a/549747/477480/child_epic_xss.png)","state":"closed","created_at":"2019-04-29T15:16:02.301Z","updated_at":"2022-05-19T16:08:59.769Z","closed_at":"2019-06-03T14:42:30.826Z","closed_by":{"id":3619903,"username":"jbroullon","name":"Juan Broullon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3619903/avatar.png","web_url":"https://gitlab.com/jbroullon"},"labels":["Enterprise Edition","HackerOne","devops::plan","frontend","priority::2","security","severity::2"],"milestone":{"id":693518,"iid":33,"group_id":9970,"title":"12.0","description":"https://about.gitlab.com/releases/2019/06/22/gitlab-12-0-released/","state":"closed","created_at":"2018-10-30T16:47:37.975Z","updated_at":"2020-04-22T19:51:03.475Z","due_date":"2019-06-22","start_date":"2019-05-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/33"},"assignees":[{"id":3236898,"username":"rajatgitlab","name":"Rajat Jain","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3236898/avatar.png","web_url":"https://gitlab.com/rajatgitlab"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3236898,"username":"rajatgitlab","name":"Rajat Jain","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3236898/avatar.png","web_url":"https://gitlab.com/rajatgitlab"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-06-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11379","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11379","notes":"https://gitlab.com/api/v4/projects/278964/issues/11379/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11379/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11379","relative":"#11379","full":"gitlab-org/gitlab#11379"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20442768,"iid":11367,"project_id":278964,"title":"Expose design blobs through a new controller","description":"We should expose design blobs through a new controller, similar to the [`Projects::RawController`](https://gitlab.com/gitlab-org/gitlab-ee/blob/748340f3fab69eeb8f6dd65bae7e5126721becb4/app/controllers/projects/raw_controller.rb#L15).\n\nThe path for a raw blob should be exposed inside a `DesignType` in GraphQL","state":"closed","created_at":"2019-04-29T15:11:55.813Z","updated_at":"2020-12-10T19:00:45.465Z","closed_at":"2019-05-30T15:19:00.027Z","closed_by":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"labels":["Category:Design Management","Create [DEPRECATED]","Deliverable","Enterprise Edition","GitLab Premium","backend","breadth","devops::plan","group::product planning","type::feature","workflow::in review"],"milestone":{"id":693518,"iid":33,"group_id":9970,"title":"12.0","description":"https://about.gitlab.com/releases/2019/06/22/gitlab-12-0-released/","state":"closed","created_at":"2018-10-30T16:47:37.975Z","updated_at":"2020-04-22T19:51:03.475Z","due_date":"2019-06-22","start_date":"2019-05-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/33"},"assignees":[{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"type":"ISSUE","assignee":{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},"user_notes_count":3,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11367","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11367","notes":"https://gitlab.com/api/v4/projects/278964/issues/11367/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11367/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11367","relative":"#11367","full":"gitlab-org/gitlab#11367"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":660,"epic":{"id":2542,"iid":660,"title":"Versioned designs with point of interest discussions","url":"/groups/gitlab-org/-/epics/660","group_id":9970,"human_readable_end_date":"Mar 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24694964,"iid":28352,"project_id":278964,"title":"Group Issues API searches archived projects","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nCalling the API to list a group's issues[1] I get also all issues from archived projects within that group. On the other hand,  such issues are not displayed in the group's issues overview UI.\n\n[1] https://docs.gitlab.com/ee/api/issues.html#list-group-issues\n\n### Steps to reproduce\n\n1. Archive a project\n2. Call `GET /groups/:id/issues`\n3. Notice that issues in archived projects appear\n\n### What is the current *bug* behavior?\n\nIssues from archived projects return\n\n### What is the expected *correct* behavior?\n\nThere should be no issues from archived projects, or at least, a way to filter them from the results.\n\n### Output of checks\n\nThis bug happens on GitLab.com","state":"closed","created_at":"2019-04-29T10:19:12.503Z","updated_at":"2022-05-19T16:09:11.949Z","closed_at":"2020-02-05T17:29:29.295Z","closed_by":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"labels":["Deliverable","api","backend","customer","devops::plan","group::project management","issues","missed-deliverable","missed:12.6","priority::3","severity::4","type::bug","workflow::in dev"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":1944308,"username":"deandre","name":"DeAndre Harris","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1944308/avatar.png","web_url":"https://gitlab.com/deandre"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":2,"merge_requests_count":2,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28352","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28352","notes":"https://gitlab.com/api/v4/projects/278964/issues/28352/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28352/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28352","relative":"#28352","full":"gitlab-org/gitlab#28352"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24694897,"iid":28326,"project_id":278964,"title":"Full name change does not affect page title of forked repo.","description":"Hello,\n### Summary\n \nSo i recently registered to a gitlab using my real name in the \"Full name\" field.\nAfter forking a repo i realized that my real name was used everywhere, so i changed it.\n\nIt seems to kinda work and my real isn't displayed anymore, **except** on the title of the page (on the browser tab) of my forked repository, which still displays my real name.\n\n### Steps to reproduce\n\n1.  Create a new user with a real name like \"MYREALNAME\"\n2.  Fork a repo, look at that forked repo's page.\n3.  In your profile, change your real name to \"MYNICKNAME\"\n4.  Go back to your forked repo's page, which still displays \"MYREALNAME\" in it's title.\n\n### Example Project\n\nI won't put the example since it contains the name i wanted to remove.\n\n### What is the current *bug* behavior?\n\nThe old \"Full name\" stays displayed on that forked repo's page title. \n\n### What is the expected *correct* behavior?\n\nIt should display the new \"Full name\"\n\nThis should not happen, **for privacy's sake.**\n\nHave a good day!","state":"closed","created_at":"2019-04-28T00:38:53.487Z","updated_at":"2023-01-13T14:04:30.832Z","closed_at":"2023-01-04T09:00:11.413Z","closed_by":{"id":11991798,"username":"khanmansoor","name":"Mansoor Khan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11991798/avatar.png","web_url":"https://gitlab.com/khanmansoor"},"labels":["Deliverable","backend","devops::manage","group::organization","milestone::p2","missed-SLO","priority::3","section::dev","severity::2","type::bug","vintage","workflow::complete"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":11991798,"username":"khanmansoor","name":"Mansoor Khan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11991798/avatar.png","web_url":"https://gitlab.com/khanmansoor"}],"author":{"id":3907648,"username":"xse1","name":"Elouan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/9eea228e3d4a508e1277aa67545540f5?s=80\u0026d=identicon","web_url":"https://gitlab.com/xse1"},"type":"ISSUE","assignee":{"id":11991798,"username":"khanmansoor","name":"Mansoor Khan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11991798/avatar.png","web_url":"https://gitlab.com/khanmansoor"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28326","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28326","notes":"https://gitlab.com/api/v4/projects/278964/issues/28326/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28326/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28326","relative":"#28326","full":"gitlab-org/gitlab#28326"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22488939,"iid":12595,"project_id":278964,"title":"Data improvements for contribution analytics","description":"### Summary\n\nWhen looking at a group's Contribution Analytics, the data is not displaying properly...\n\n![image__4___4_](/uploads/fb85d5fba710597273adce0d977ee4a6/image__4___4_.png)\n\n![image__5___5_](/uploads/4bbe04afb2f3177a8e31718b6a2250b1/image__5___5_.png)\n\n![image__5___6_](/uploads/1686200e015e1850a447fffab5d219d3/image__5___6_.png)\n\nBut if you look at the activity feed for the project...\n\n![image__6___6_](/uploads/1f2f83916f94c46f72195c3cfca28e54/image__6___6_.png)\n\nThere are plenty of commits that aren't displaying in the analytics.\n\n### Proposal\n\n__Tactical goals__\n\n - Ensure that we expose the correct information in this dashboard - the totals on the top don't seem to match with what's in the graph and what we see in the tool as per John's picture. (please also see my last comment on this issue) Let's review together that the calculations make sense.\n\n__Strategic goals__ \n\n- Review back-end architecture and make a decision as to whether to use the same architecture going forward given the loads and functionality of the analytical product will be much larger and more complex from both backend and front end perspective (ex: are the processes running real time or batch, should we be using https://graphql.org, etc). We are planning to have all contribution, cycle analytics, CI/CD analytics in 1 dashboard.\n\n### What is the current *bug* behavior?\n\nNot displaying proper information.\n\n### What is the expected *correct* behavior?\n\nShould be able to see all contribution analytics.\n\n#### Results of GitLab environment info\n\nServer version 11.8.0","state":"closed","created_at":"2019-04-26T23:27:42.472Z","updated_at":"2019-08-14T14:18:17.360Z","closed_at":"2019-08-14T14:18:17.278Z","closed_by":{"id":3511154,"username":"valexieva","name":"Virjinia Alexieva","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/bc036fa2e7b6fa926a175324a948169f?s=80\u0026d=identicon","web_url":"https://gitlab.com/valexieva"},"labels":["Deliverable","Enterprise Edition","GitLab Starter","Manage [DEPRECATED]","analytics","backend","customer","customer+","devops::manage","estimation::completed","group::optimize","missed-SLO","missed-deliverable","missed:12.0","priority::1","severity::3","type::bug"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"}],"author":{"id":1228225,"username":"jwoods06","name":"John Woods","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1228225/avatar.png","web_url":"https://gitlab.com/jwoods06"},"type":"ISSUE","assignee":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"user_notes_count":29,"merge_requests_count":0,"upvotes":4,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12595","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12595","notes":"https://gitlab.com/api/v4/projects/278964/issues/12595/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12595/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12595","relative":"#12595","full":"gitlab-org/gitlab#12595"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1753,"epic":{"id":10748,"iid":1753,"title":"Improvement to Current Analytics Components","url":"/groups/gitlab-org/-/epics/1753","group_id":9970,"human_readable_end_date":"Aug 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24694803,"iid":28321,"project_id":278964,"title":"GitLab reads from Vault for CI Variables","description":"### Problem to solve\n\nSecrets stored in HashiCorp [Vault](https://www.vaultproject.io/) are currently not easily read by GitLab for CI Jobs. We want to support a user that has secret stored in Vault and have it used by GitLab. \n\n### Intended users\n\nThis feature will be used by automation developers who need to access secrets as part of their build and deploy process, providing a new and more secure way to do so.\n\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n\n### Proposal\n\nWe are supporting the leanest approach for GitLab read a secret from Vault and bring that into a CI Job, using the JWT as an authentication method. The secret would be stored in Vault and retrieved from Vault via the yaml. \n\nWe'll add support for the following syntax to `.gitlab-ci.yml` in order to define Vault servers and secrets from the syntax in https://gitlab.com/gitlab-org/gitlab/-/issues/218746. We will also be delivering the Runner configuration as described in https://gitlab.com/gitlab-org/gitlab/-/issues/212252. \n\n```yaml\nsecrets:\n  # production/s3 is a `path:`, where `secret-key` is a fieldname\n  # @path/to/engine indicates a path used by `kv-v2` which we consider to be a default engine\n  VAULT_SIMPLE_SECRET:\n    vault: production/s3/secret-key\n\n  VAULT_SIMPLE2_SECRET:\n    vault: production/s3/secret-key@path/to/engine\n\n  VAULT_COMPLEX_SECRET:\n    vault:\n      engine:\n        name: kv-v2\n        path: path/to/engine\n      path: production/s3\n      field: secret-key\n```\n\nGitLab will parse this section and provide the data to the Runner as part of the job request response. Runner will then authenticate with Vault, fetch the secrets and save them under a path that will be stored in the specified ENV variable (similar to how \"File\" type CI variables work).\n\nIn the first iteration the Vault server definition (url and auth method path) will be defined with CI variables, later we'll add UI for this with https://gitlab.com/gitlab-org/gitlab/-/issues/218677.\n\n### Other considerations \n* Start with YAML --\u003e in the future move this into a group or project settings like the Variables framework - will always need to have a section in the YAML \n* Once we have the section in the job YAML, we should continue to expand the YAML  \n\n### Permissions and Security\n\nPermissions are configured at Vault by using policies, roles, and when configuring the auth method. This should be documented with example, similar to https://docs.gitlab.com/ee/ci/examples/authenticating-with-hashicorp-vault.\n\n### Documentation\n\n- This will need documentation on how this works \n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further guidelines: https://about.gitlab.com/handbook/engineering/quality/guidelines/test-engineering/ --\u003e\n\n- Most of the secret management will be contained on the Vault side. For example, secrets expiration and storage will be handled on the Vault Side \n\n_ We'll need vault instance accessible over the internet in order to test this\n\n### Links / references\n\n- [Vault POC](https://gitlab.com/gitlab-org/gitlab-ee/issues/9981)\n- Slack Channel (Internal Link only) [#f_vault_integration_secrets_mgmt](https://gitlab.slack.com/app_redirect?channel=f_vault_integration_secrets_mgmt)\n- [Inject dynamic environment variables](https://gitlab.com/gitlab-org/gitlab-runner/issues/3699)\n- https://gitlab.my.salesforce.com/0016100000K9Bgw\n- https://gitlab.my.salesforce.com/0064M00000VMjeP","state":"closed","created_at":"2019-04-26T21:07:28.572Z","updated_at":"2022-03-08T08:00:20.723Z","closed_at":"2020-09-18T05:45:19.610Z","closed_by":{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"},"labels":["Alliances","Alliances - Hashicorp","CEO Interest","CI variables","Category:Continuous Integration","Category:Secrets Management","Deliverable","GitLab Premium","Product Vision FY20","Release::P1","[Deprecated] Category:Runner","backend","breadth","cicd::active","customer","customer+","devops::release","direction","group::release","section::ops","type::feature","workflow::production"],"milestone":{"id":1233753,"iid":51,"group_id":9970,"title":"13.4","description":"https://about.gitlab.com/releases/2020/09/22/gitlab-13-4-released/","state":"closed","created_at":"2020-04-09T17:39:21.662Z","updated_at":"2022-04-13T14:50:33.769Z","due_date":"2020-09-17","start_date":"2020-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/51"},"assignees":[{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"}],"author":{"id":1514779,"username":"brendan","name":"Brendan O'Leary ðŸ¢","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b5a575069d12106f79c0c97dfb3ef917?s=80\u0026d=identicon","web_url":"https://gitlab.com/brendan"},"type":"ISSUE","assignee":{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"},"user_notes_count":228,"merge_requests_count":0,"upvotes":60,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28321","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28321","notes":"https://gitlab.com/api/v4/projects/278964/issues/28321/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28321/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28321","relative":"#28321","full":"gitlab-org/gitlab#28321"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2875,"epic":{"id":30992,"iid":2875,"title":"Fetch \u0026 Configure Secrets","url":"/groups/gitlab-org/-/epics/2875","group_id":9970,"human_readable_end_date":"Jul 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24694690,"iid":28307,"project_id":278964,"title":"Unable to view Settings -\u003e Repository after adding Mirror Repository (Error 500)","description":"Hi all! I've tried looking at all the related issues I could find, but it seems like in the rest of them people could at least actually go in to Settings -\u003e Repository and remove the Mirror Repository they'd added.\n\nI'm running Gitlab CE 11.9.7.\n\nI added a Mirror Repository to one of my repos, and since then I am unable to access the repository's **Settings -\u003e Repository**. I get the nice page with the 500 error.\n\nThe only think that is shown in the logs when I load the page is the following:\n\n`ActionView::Template::Error (bad URI(is not URI?): ssh://user:password@destination.internal.server.com/storage/Git Folder/project.git):`\n\nI have a feeling the issue is caused by the fact that **/Git Folder/** contains a whitespace that should have been escaped. How can I remove the mirrored repository? `gitlab-rails console`? What's the best thing to do here?\n\nThank you in advance!","state":"closed","created_at":"2019-04-26T09:50:03.925Z","updated_at":"2020-02-19T16:23:49.143Z","closed_at":"2019-12-03T15:26:49.786Z","closed_by":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"labels":["[deprecated] Accepting merge requests","devops::create","group::source code","mirror","missed-SLO","priority::2","severity::2","type::bug"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":1429413,"username":"ludd.it","name":"Oleg Blecher","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a007dd34001208bf887835e4d32fefe2?s=80\u0026d=identicon","web_url":"https://gitlab.com/ludd.it"},"type":"ISSUE","assignee":null,"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28307","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28307","notes":"https://gitlab.com/api/v4/projects/278964/issues/28307/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28307/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28307","relative":"#28307","full":"gitlab-org/gitlab#28307"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20360956,"iid":11333,"project_id":278964,"title":"Support custom gitleaks configs for Secret Detection","description":"### Summary\n\n~~Attempts to exclude a path from the processing of gitleaks and TruffleHog are ignored or not possible.\nIn the case of NodeJS the node_modules directory should be ignored, but is processed regardless of exclude rules added.~~\n\nWhen a custom `gitleaks.toml` file is provided to our `secrets` analyzer it is ignored as we do not provide a mechanism to load custom configuration. In certain cases it can be beneficial to allow users to customize the detector and providing method of specifying the configuration would be useful.\n\nWe should support passing a `GITLEAKS_CONFIG_PATH` to the analyzer, allowing users to provide their own configuration and [override the built-in one](https://gitlab.com/gitlab-org/security-products/analyzers/secrets/blob/master/scanner/gitleaks/gitleaks.toml).\n\n### Steps to reproduce\n\nThe following gitleaks.toml file does not allow the exclusion of a path such as node_modules;\n```\n[whitelist]\nfiles = [\n  \"node_modules\"\n]\n```\nLooking at the secrets Dockerfile a pre-baked gitleaks.toml is provided.  \n\nHow to add to this without building our own analyzer?\n\nTruffleHog doesn't appear to have a way of passing a similar configuration to the analyzer.\n\n### What is the current *bug* behavior?\n\nStill processes an excluded path by ignoring project-provided `gitleaks.toml`\n\n### What is the expected *correct* behavior?\n\nIgnore the excluded path by using project-provided `gitleaks.toml`\n\n### Relevant logs and/or screenshots\n\n```\n2019/04/26 02:36:30 [secrets] Detect project using plugin\n2019/04/26 02:36:30 [secrets] Project is compatible\n2019/04/26 02:36:30 [secrets] Starting analyzer...\nlatest: Pulling from gitlab-org/security-products/analyzers/secrets\nbdf0201b3a05: Pulling fs layer\n2b95ad226aea: Pulling fs layer\n5b39a804479c: Pulling fs layer\ndf2fe20a49c1: Pulling fs layer\ndf2fe20a49c1: Waiting\nbdf0201b3a05: Verifying Checksum\nbdf0201b3a05: Download complete\nbdf0201b3a05: Pull complete\n5b39a804479c: Verifying Checksum\n5b39a804479c: Download complete\n2b95ad226aea: Verifying Checksum\n2b95ad226aea: Download complete\ndf2fe20a49c1: Verifying Checksum\ndf2fe20a49c1: Download complete\n2b95ad226aea: Pull complete\n5b39a804479c: Pull complete\ndf2fe20a49c1: Pull complete\nDigest: sha256:f66cf0d899ed3666abdd3da7341adc7e6f5f552dbf992cf4fd8ef5b0ed59c0be\nStatus: Downloaded newer image for registry.gitlab.com/gitlab-org/security-products/analyzers/secrets:latest\n```\n\n### Output of checks\n\nThis is from the Ultimate version of GitLab (ie not GitLab.com).\n\n#### Results of GitLab environment info\n\nv11.9.8-ee\n\n#### Results of GitLab application Check\n\nSee logs above for a date of the latest application used.\n```\nregistry.gitlab.com/gitlab-org/security-products/analyzers/secrets:latest\n```\n\n### Possible fixes\n\nNone.","state":"closed","created_at":"2019-04-26T05:12:39.554Z","updated_at":"2019-11-18T15:57:43.177Z","closed_at":"2019-08-19T15:20:51.412Z","closed_by":{"id":4376883,"username":"stkerr","name":"Sam Kerr","state":"active","avatar_url":"https://secure.gravatar.com/avatar/591c8b969464f7b4fb97b6f2f654f11a?s=80\u0026d=identicon","web_url":"https://gitlab.com/stkerr"},"labels":["Enterprise Edition","[deprecated] Accepting merge requests","backend","devops::secure","group::static analysis","priority::4","severity::4","type::feature"],"milestone":null,"assignees":[],"author":{"id":3633357,"username":"mrdevnull","name":"Martin Rowe","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d712a83d770f4d379821ec55e7ab9f31?s=80\u0026d=identicon","web_url":"https://gitlab.com/mrdevnull"},"type":"ISSUE","assignee":null,"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11333","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11333","notes":"https://gitlab.com/api/v4/projects/278964/issues/11333/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11333/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11333","relative":"#11333","full":"gitlab-org/gitlab#11333"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20354542,"iid":11326,"project_id":278964,"title":"Geo: Add Geo Name as Display name field on Node Card","description":"Follow up for https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/10755.\n\nI think it's ok for this to not make 11.11 since https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/10755 is functionally complete.\n\nBut there are a couple UX/frontend things that I'm separating out here to keep smaller iterations.\n\n- [x] [@toon suggested](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/10755#note_164177417) to also validate max length in browser, which makes sense to me, though I don't know if we have a standard practice regarding this. =\u003e Already happening based on the `models/geo_node.rb`\n\n- [x] Display the geo node name field on each node in the Admin \u003e Geo \u003e Nodes index page. It's as important as the geo node URL. =\u003e !21876 \n\n@kushalpandya @undefined \n\n## Proposed design\n![image](/uploads/b531c1982cccc11352aa0a609a50a33d/image.png)","state":"closed","created_at":"2019-04-25T21:39:41.945Z","updated_at":"2020-02-24T22:29:08.104Z","closed_at":"2020-01-08T22:40:56.068Z","closed_by":{"id":2233420,"username":"pslaughter","name":"Paul Slaughter","state":"active","avatar_url":"https://secure.gravatar.com/avatar/631b25421eb206ab44cb2793ef09d881?s=80\u0026d=identicon","web_url":"https://gitlab.com/pslaughter"},"labels":["Enterprise Edition","Geo Administration","UX","devops::systems","frontend","group::geo"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"user_notes_count":27,"merge_requests_count":2,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11326","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11326","notes":"https://gitlab.com/api/v4/projects/278964/issues/11326/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11326/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11326","relative":"#11326","full":"gitlab-org/gitlab#11326"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":369,"epic":{"id":1104,"iid":369,"title":"Geo: Improve UI/UX on Administrator Panel","url":"/groups/gitlab-org/-/epics/369","group_id":9970},"iteration":null,"health_status":null},{"id":20337846,"iid":11314,"project_id":278964,"title":"Elasticsearch rake tasks should respect new elasticsearch limited namespaces / projects functionality","description":"### Summary\n\nRunning rake tasks like `rake gitlab:elastic:index_database` or `rake gitlab:elastic:index_repositories` with \"elasticsearch limited namespaces / projects\" enabled will index *every* project, rather than just those restricted ones\n\n### Steps to reproduce\n\nEnable elasticsearch limited projects, set to a single project, run the indexing rake tasks\n\n### What is the current *bug* behavior?\n\nAll projects are indexed\n\n### What is the expected *correct* behavior?\n\nWith limiting enabled, only those projects that are in the approved set should be indexed.\n\nRemoval / emptying can still operate on the entire set, though.\n\n### Output of checks\n\nThis bug happens on staging.GitLab.com\n\n### Possible fixes\n\nhttps://gitlab.com/gitlab-org/gitlab-ee/blob/master/ee/lib/tasks/gitlab/elastic.rake\n\n\n/cc @mdelaossa @DouweM @mwasilewski\\-gitlab @jramsay","state":"closed","created_at":"2019-04-25T10:43:30.661Z","updated_at":"2019-08-12T15:01:41.738Z","closed_at":"2019-06-06T13:11:30.303Z","closed_by":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"labels":["Create [DEPRECATED]","Deliverable","Enterprise Edition","GitLab Starter","advanced search","backend","devops::create","group::editor","priority::3","severity::3","type::bug","workflow::in review"],"milestone":{"id":693518,"iid":33,"group_id":9970,"title":"12.0","description":"https://about.gitlab.com/releases/2019/06/22/gitlab-12-0-released/","state":"closed","created_at":"2018-10-30T16:47:37.975Z","updated_at":"2020-04-22T19:51:03.475Z","due_date":"2019-06-22","start_date":"2019-05-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/33"},"assignees":[{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"}],"author":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"type":"ISSUE","assignee":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11314","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11314","notes":"https://gitlab.com/api/v4/projects/278964/issues/11314/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11314/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11314","relative":"#11314","full":"gitlab-org/gitlab#11314"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":853,"epic":{"id":4555,"iid":853,"title":"Elasticsearch on GitLab.com MVC","url":"/groups/gitlab-org/-/epics/853","group_id":9970,"human_readable_end_date":"Jul 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":20323728,"iid":11307,"project_id":278964,"title":"Use empty state region component for design management empty state","description":"### Problem to solve\n\nThe empty state added in design management (see https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/10599) could _not_ use the [empty state](https://design.gitlab.com/regions/empty-states) region component because the component could not support custom actions (see https://gitlab.com/gitlab-org/gitlab-ui/issues/223). See also discussion in https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/10599#note_157867305.\n\n### Further details\n\nCustom actions are now supported (see https://gitlab.com/gitlab-org/gitlab-ui/merge_requests/242).\n\n### Proposal\n\nReplace the empty state code in https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/10599/diffs#8af096d5d214672087329886074c9ee082ad0487_0_27 with the empty state region component.","state":"closed","created_at":"2019-04-24T20:41:23.436Z","updated_at":"2020-12-10T19:00:46.173Z","closed_at":"2019-09-17T11:18:18.781Z","closed_by":{"id":853414,"username":"andr3","name":"AndrÃ© LuÃ­s","state":"active","avatar_url":"https://secure.gravatar.com/avatar/241e39726efb512a29621070ccf26a90?s=80\u0026d=identicon","web_url":"https://gitlab.com/andr3"},"labels":["Category:Design Management","Create [DEPRECATED]","Deliverable","Enterprise Edition","UI component","devops::plan","frontend","group::product planning","maintenance::refactor","pajamas::integrate","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"}],"author":{"id":1474048,"username":"gtsiolis","name":"George Tsiolis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1474048/avatar.png","web_url":"https://gitlab.com/gtsiolis"},"type":"ISSUE","assignee":{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"},"user_notes_count":6,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11307","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11307","notes":"https://gitlab.com/api/v4/projects/278964/issues/11307/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11307/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11307","relative":"#11307","full":"gitlab-org/gitlab#11307"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20321365,"iid":11302,"project_id":278964,"title":"Bypassing push rules via MRs created by Email","description":"**[HackerOne report #526570](https://hackerone.com/reports/526570)** by `xanbanx` on 2019-04-04, assigned to `hackerjuan`:\n\nHi GitLab Security Team,\n\nGitLab EE has the feature of so-called push rules. An administrator, or more fine-grained per project, the owner can create certain push rules. The goal of these push rules is avoiding to push certain commits to the repository, which violate one of the push rules. If a commit violating one of the push rules is pushed to the repository, a pre-check gets executed, which decides a commit attempt should be rejected. Therefore, the user gets an error message indicating the commit does not follow the rules.\n\nOn the other hand, GitLab supports creating merge requests by writing an email address to a special address. If the email contains a `.patch` file as an attachment, the commits from this patch file are applied and pushed to the Repo. \n\nHowever, this step does not check for the push rules. This allows creating commits with content, that violates the configured push rules. It allows for example to push commits violating the commit message syntax, pushing an unsigned commit, pushing unwanted content (blacklisted secret files or bypassing regex), commits from unverified users, ...\n\n## Steps to reproduce\n\nTested on GitLab.com 11.9.4-ee with a Gold Trial.\n\n1. Create a repository with a Readme initialized  \n2. You then have to create one dummy merge request, e.g, by pushing some branch and create a new MR. The only purpose is that the empty state of `https://example.gitlab.com/\u003cnamespace\u003e/\u003cproject\u003e/merge_requests` does not show the incoming merge request email, which is required for the later steps.  \n3. Go to `https://example.gitlab.com/\u003cnamespace\u003e/\u003cproject\u003e/merge_requests`. At the bottom, there is a link opening a modal, which shows you the incoming merge request email. This email address looks similar to `incoming+\u003cnamespace\u003e-\u003cproject-name\u003e-\u003cproject-id\u003e-\u003ctoken\u003e-request@incoming.example.gitlab.com`  \n4. Configure the push rules of the project under `https://example.gitlab.com/\u003cnamespace\u003e/\u003cproject\u003e/settings/repository`  \n   * Check `Committer restriction`  \n   * Check `Reject unsigned commits`  \n   * Check `Check whether author is a GitLab user`  \n   * Check `Prevent committing secrets to Git`  \n   * Change `Commit message` to `Fixes \\d+\\..*`  \n   * Change `Commit message negative match` to `ssh\\:\\/\\`  \n   * Change `Commit author's email` to `@example.com$`  \n   * Change `Prohibited file names` to `(jar|exe)$`  \n5. Now clone the repo locally  \n6. In the local repo, create a branch named `bypass`, create a new file `test.exe` and a new file `id_dsa`  \n7. Add all created file to the git repo and commit it (unsigned) with the commit message `Bypassing push rules ssh://foo.bar`  \n8. Create a git patch of the last commit by using the command `git format-patch -n HEAD^`  \n9. Open the patch file and change the `From` line to e.g. `Lin Jen \u003clin@yen.com\u003e`. Of course, you could also change the commit auther and commiter email git before.   \n10. Create and send a new Email with the following content  \n  * Recipient address: Merge email address from above (Step 3)  \n  * Subject: bypass  \n  * Body: MR bypassing the push rules  \n  * Attachment: The patch file created before  \n11. The email created a new merge request with  \n  * a commit, which is unsigned \u003c- violating the rule that othe commit message rulere accepted  \n  * a commit from Lin Jen (lin@yen.com) \u003c- violating the author's email rule  \n  * a commit from Lin Jen (lin@yen.com) \u003c- violating the rule that only verified emails can be used in pushed commits  \n  * a commit from Lin Jen (lin@yen.com) \u003c- violating the rule whether the author is a GitLab user  \n  * a commit with message `Bypassing push rules ssh://foo.bar` \u003c- violating the commit message rule  \n  * a commit with message `Bypassing push rules ssh://foo.bar` \u003c- violating the commit message negative match  \n  * a file `test.exe` \u003c- violating the prohibited file names rule  \n  * a file `id_dsa` \u003c- violating the secrets rule\n\nThe only push rule, which seems to be enforced is the branch name push rule.\n\n## Expected behavior\n\nPush rules are enforced also for commits created by an email. The email should be rejected since it violates at least one push rule.\n\nBest regards,  \nXanbanx\n\n## Impact\n\nThis allows anyone to bypass push rules set up by an administrator or project owner. This can lead to secrets being pushed to the repo, commits created by unknown users, etc","state":"closed","created_at":"2019-04-24T18:27:25.070Z","updated_at":"2019-10-01T09:14:45.036Z","closed_at":"2019-08-29T22:53:42.855Z","closed_by":{"id":4226366,"username":"ankelly","name":"Andrew Kelly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4226366/avatar.png","web_url":"https://gitlab.com/ankelly"},"labels":["Create [DEPRECATED]","Deliverable","Enterprise Edition","HackerOne","backend","devops::create","group::source code","priority::3","security","severity::3","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"user_notes_count":27,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-07-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11302","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11302","notes":"https://gitlab.com/api/v4/projects/278964/issues/11302/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11302/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11302","relative":"#11302","full":"gitlab-org/gitlab#11302"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20321171,"iid":11301,"project_id":278964,"title":"Validate Domains when performing DAST full scans","description":"### Problem to solve\n\nThe DAST job can be run anywhere, including GitLab.com. Since we will allow [active scans soon](https://gitlab.com/gitlab-org/gitlab-ee/issues/7182#note_163953546), it means users can accidentally hit live webservers and potentially damage them.\n\nMany customers have asked for this feature because they are afraid of accidentally taking down their production environment.\n\n# Proposal\n\nIf the user has set `DAST_FULL_SCAN_ENABLED=\"true\"`, the URL specified by `DAST_WEBSITE` must respond to a `GET` request that has a `Gitlab-DAST-Request` header with the header `Gitlab-DAST-Confirmation`. The headers do not need a value.\n\nIn this issue, we have to implement that `GET` request.\n\nDon't forget to add instructions to our DAST docs! We should have a few sample configurations for how to add headers to an app.\n\n## Acceptance Criteria\n\n**Given** I am a customer setting up DAST  \n**When** I look at the setup instructions  \n**Then** I am informed that I need to configure my app to respond to the full scan permissions request before I can run a full scan.\n**And** I am warned to make sure that the configuration only exists in my test environments (NOT production).\n\n**Given** I am a customer with DAST full scan enabled  \n**When** I launch a DAST scan through CI or another means  \n**And** my application responds to the DAST full scan permissions request  \n**Then** I see my DAST scan run successfully.\n\n**Given** I am a customer with DAST full scan enabled  \n**When** I launch a DAST scan through CI or another means  \n**And** my application _does not_ respond to the DAST full scan permissions request  \n**Then** I see a message that I must configure my application to respond to the permissions request  \n**And** I see a link to the docs on how to do so.\n\n## Rollout\n\nThis is a breaking change, so it must have a **feature flag**.\n\nIn %\"12.2\" we want the feature to be enabled if a customer:\n* sets up DAST full scan after the release (determined by the `created_at` for the `DAST_FULL_SCAN_ENABLED` variable in the `ci_variables` table)\n* if administrators explicitly flip the feature flag\n\nWe will make a future decision on when to make this behavior the default for all users, based on what we learn from and feedback we receive on this issue.\n\n/cc @kencjohnston @twoodham @dappelt","state":"closed","created_at":"2019-04-24T18:19:43.534Z","updated_at":"2020-09-25T21:17:22.367Z","closed_at":"2019-09-23T13:44:52.519Z","closed_by":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"labels":["Deliverable","Enterprise Edition","backend","devops::secure","direction","group::dynamic analysis","priority::1","security","type::feature"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"}],"author":{"id":30915,"username":"plafoucriere","name":"Philippe LafoucriÃ¨re","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/30915/avatar.png","web_url":"https://gitlab.com/plafoucriere"},"type":"ISSUE","assignee":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"user_notes_count":54,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11301","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11301","notes":"https://gitlab.com/api/v4/projects/278964/issues/11301/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11301/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11301","relative":"#11301","full":"gitlab-org/gitlab#11301"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20318584,"iid":11298,"project_id":278964,"title":"Flaky spec: \"API::Namespaces PUT :id/gitlab_subscription when authenticated as an admin when namespace is not found returns a 404 error\" / ee/spec/requests/api/namespaces_spec.rb:272","description":"Job [#201684272](https://gitlab.com/gitlab-org/gitlab-ee/-/jobs/201684272) failed for 138afd05ee571dd7c901987c5ea58dd9aaa2391b:\n\n```\n  1) API::Namespaces PUT :id/gitlab_subscription when authenticated as an admin when namespace is not found returns a 404 error\n     Failure/Error: expect(response).to have_gitlab_http_status(404)\n       expected the response to have status code 404 but it was 200. The response was: {\"plan\":{\"code\":\"silver\",\"name\":\"Silver\",\"trial\":false},\"usage\":{\"seats_in_subscription\":150,\"seats_in_use\":0,\"max_seats_used\":0,\"seats_owed\":0},\"billing\":{\"subscription_start_date\":\"2018-01-01\",\"subscription_end_date\":\"2019-01-01\",\"trial_ends_on\":null}}\n     # ./ee/spec/requests/api/namespaces_spec.rb:272:in `block (5 levels) in \u003ctop (required)\u003e'\n```","state":"closed","created_at":"2019-04-24T16:19:55.612Z","updated_at":"2022-07-13T14:34:56.375Z","closed_at":"2022-06-30T12:29:43.248Z","closed_by":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"labels":["Enterprise Edition","Quality","[deprecated] Category:Fulfillment Platform","devops::fulfillment","failure::flaky-test","group::fulfillment platform","missed-SLO","onboarding","priority::2","quarantined test","section::fulfillment","severity::2","test","type::bug","vintage","workflow::in review"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"}],"author":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"type":"ISSUE","assignee":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11298","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11298","notes":"https://gitlab.com/api/v4/projects/278964/issues/11298/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11298/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11298","relative":"#11298","full":"gitlab-org/gitlab#11298"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20317389,"iid":11297,"project_id":278964,"title":"Broken master with Geo specs","description":"Most probably introduced by https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/11399.\n\n- https://gitlab.com/gitlab-org/gitlab-ee/-/jobs/201673055:\n\n```\n  1) GeoNode#projects_include? selective sync by namespaces returns true when project belongs to one of the namespaces\n     Failure/Error: expect(node.projects_include?(project_in_synced_group.id)).to be_truthy\n\n     ActiveRecord::StatementInvalid:\n       Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespac' at line 1: SELECT  1 AS one FROM `projects` WHERE `projects`.`namespace_id` IN (WITH RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespace_id` AS id FROM `geo_node_namespace_links` WHERE `geo_node_namespace_links`.`geo_node_id` = 61\n       UNION\n       SELECT `namespaces`.`id` FROM `namespaces`, `base_and_descendants` WHERE `namespaces`.`parent_id` = `base_and_descendants`.`id`) SELECT `id` FROM `base_and_descendants` AS `namespaces`) AND `projects`.`id` = 330 LIMIT 1\n     # ./config/initializers/connection_fix.rb:20:in `execute'\n     # ./ee/app/models/geo_node.rb:218:in `projects_include?'\n     # ./ee/spec/models/geo_node_spec.rb:589:in `block (4 levels) in \u003ctop (required)\u003e'\n     # ------------------\n     # --- Caused by: ---\n     # Mysql2::Error:\n     #   You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespac' at line 1\n     #   ./config/initializers/connection_fix.rb:20:in `execute'\n\n  2) GeoNode#projects_include? selective sync by namespaces returns false when project does not belong to one of the namespaces\n     Failure/Error: expect(node.projects_include?(unsynced_project.id)).to be_falsy\n\n     ActiveRecord::StatementInvalid:\n       Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespac' at line 1: SELECT  1 AS one FROM `projects` WHERE `projects`.`namespace_id` IN (WITH RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespace_id` AS id FROM `geo_node_namespace_links` WHERE `geo_node_namespace_links`.`geo_node_id` = 65\n       UNION\n       SELECT `namespaces`.`id` FROM `namespaces`, `base_and_descendants` WHERE `namespaces`.`parent_id` = `base_and_descendants`.`id`) SELECT `id` FROM `base_and_descendants` AS `namespaces`) AND `projects`.`id` = 334 LIMIT 1\n     # ./config/initializers/connection_fix.rb:20:in `execute'\n     # ./ee/app/models/geo_node.rb:218:in `projects_include?'\n     # ./ee/spec/models/geo_node_spec.rb:593:in `block (4 levels) in \u003ctop (required)\u003e'\n     # ------------------\n     # --- Caused by: ---\n     # Mysql2::Error:\n     #   You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespac' at line 1\n     #   ./config/initializers/connection_fix.rb:20:in `execute'\n\n  3) GeoNode#projects returns projects that belong to the namespaces with selective sync by namespace\n     Failure/Error: expect(node.projects).to match_array([project_1, project_2])\n\n     ActiveRecord::StatementInvalid:\n       Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespac' at line 1: SELECT `projects`.* FROM `projects` WHERE `projects`.`namespace_id` IN (WITH RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespace_id` AS id FROM `geo_node_namespace_links` WHERE `geo_node_namespace_links`.`geo_node_id` = 72\n       UNION\n       SELECT `namespaces`.`id` FROM `namespaces`, `base_and_descendants` WHERE `namespaces`.`parent_id` = `base_and_descendants`.`id`) SELECT `id` FROM `base_and_descendants` AS `namespaces`)\n     # ./config/initializers/connection_fix.rb:20:in `execute'\n     # ./ee/spec/models/geo_node_spec.rb:629:in `block (3 levels) in \u003ctop (required)\u003e'\n     # ------------------\n     # --- Caused by: ---\n     # Mysql2::Error:\n     #   You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespac' at line 1\n     #   ./config/initializers/connection_fix.rb:20:in `execute'\n\nFinished in 11 minutes 42 seconds (files took 17.61 seconds to load)\n749 examples, 3 failures, 54 pending\n\nFailed examples:\n\nrspec ./ee/spec/models/geo_node_spec.rb:586 # GeoNode#projects_include? selective sync by namespaces returns true when project belongs to one of the namespaces\nrspec ./ee/spec/models/geo_node_spec.rb:592 # GeoNode#projects_include? selective sync by namespaces returns false when project does not belong to one of the namespaces\nrspec ./ee/spec/models/geo_node_spec.rb:626 # GeoNode#projects returns projects that belong to the namespaces with selective sync by namespace\n```\n\n- https://gitlab.com/gitlab-org/gitlab-ee/-/jobs/201673059\n\n```\n  1) Geo::RepositoriesCleanUpWorker#perform when node has selective sync enabled legacy storage performs Geo::RepositoryCleanupWorker for each project that does not belong to selected namespaces to replicate\n     Failure/Error: yield lease\n\n     ActiveRecord::StatementInvalid:\n       Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespac' at line 1: SELECT  `projects`.* FROM `projects` WHERE (`projects`.`id` NOT IN (SELECT `projects`.`id` FROM `projects` WHERE `projects`.`namespace_id` IN (WITH RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespace_id` AS id FROM `geo_node_namespace_links` WHERE `geo_node_namespace_links`.`geo_node_id` = 5\n       UNION\n       SELECT `namespaces`.`id` FROM `namespaces`, `base_and_descendants` WHERE `namespaces`.`parent_id` = `base_and_descendants`.`id`) SELECT `id` FROM `base_and_descendants` AS `namespaces`))) ORDER BY `projects`.`id` ASC LIMIT 250\n     # ./config/initializers/connection_fix.rb:20:in `execute'\n     # ./ee/app/workers/geo/repositories_clean_up_worker.rb:21:in `block in perform'\n     # ./app/services/concerns/exclusive_lease_guard.rb:29:in `try_obtain_lease'\n     # ./ee/app/workers/geo/repositories_clean_up_worker.rb:17:in `perform'\n     # ./ee/spec/workers/geo/repositories_clean_up_worker_spec.rb:32:in `block (5 levels) in \u003ctop (required)\u003e'\n     # ------------------\n     # --- Caused by: ---\n     # Mysql2::Error:\n     #   You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespac' at line 1\n     #   ./config/initializers/connection_fix.rb:20:in `execute'\n\n  2) Geo::RepositoriesCleanUpWorker#perform when node has selective sync enabled hashed storage performs Geo::RepositoryCleanupWorker for each project that does not belong to selected namespaces to replicate\n     Failure/Error: yield lease\n\n     ActiveRecord::StatementInvalid:\n       Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespac' at line 1: SELECT  `projects`.* FROM `projects` WHERE (`projects`.`id` NOT IN (SELECT `projects`.`id` FROM `projects` WHERE `projects`.`namespace_id` IN (WITH RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespace_id` AS id FROM `geo_node_namespace_links` WHERE `geo_node_namespace_links`.`geo_node_id` = 9\n       UNION\n       SELECT `namespaces`.`id` FROM `namespaces`, `base_and_descendants` WHERE `namespaces`.`parent_id` = `base_and_descendants`.`id`) SELECT `id` FROM `base_and_descendants` AS `namespaces`))) ORDER BY `projects`.`id` ASC LIMIT 250\n     # ./config/initializers/connection_fix.rb:20:in `execute'\n     # ./ee/app/workers/geo/repositories_clean_up_worker.rb:21:in `block in perform'\n     # ./app/services/concerns/exclusive_lease_guard.rb:29:in `try_obtain_lease'\n     # ./ee/app/workers/geo/repositories_clean_up_worker.rb:17:in `perform'\n     # ./ee/spec/workers/geo/repositories_clean_up_worker_spec.rb:55:in `block (5 levels) in \u003ctop (required)\u003e'\n     # ------------------\n     # --- Caused by: ---\n     # Mysql2::Error:\n     #   You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespac' at line 1\n     #   ./config/initializers/connection_fix.rb:20:in `execute'\n\n  3) Geo::RepositoriesCleanUpWorker#perform when node has selective sync enabled when the project repository does not exist on disk performs Geo::RepositoryCleanupWorker\n     Failure/Error: yield lease\n\n     ActiveRecord::StatementInvalid:\n       Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespac' at line 1: SELECT  `projects`.* FROM `projects` WHERE (`projects`.`id` NOT IN (SELECT `projects`.`id` FROM `projects` WHERE `projects`.`namespace_id` IN (WITH RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespace_id` AS id FROM `geo_node_namespace_links` WHERE `geo_node_namespace_links`.`geo_node_id` = 13\n       UNION\n       SELECT `namespaces`.`id` FROM `namespaces`, `base_and_descendants` WHERE `namespaces`.`parent_id` = `base_and_descendants`.`id`) SELECT `id` FROM `base_and_descendants` AS `namespaces`))) ORDER BY `projects`.`id` ASC LIMIT 250\n     # ./config/initializers/connection_fix.rb:20:in `execute'\n     # ./ee/app/workers/geo/repositories_clean_up_worker.rb:21:in `block in perform'\n     # ./app/services/concerns/exclusive_lease_guard.rb:29:in `try_obtain_lease'\n     # ./ee/app/workers/geo/repositories_clean_up_worker.rb:17:in `perform'\n     # ./ee/spec/workers/geo/repositories_clean_up_worker_spec.rb:68:in `block (5 levels) in \u003ctop (required)\u003e'\n     # ------------------\n     # --- Caused by: ---\n     # Mysql2::Error:\n     #   You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespac' at line 1\n     #   ./config/initializers/connection_fix.rb:20:in `execute'\n\n  4) Geo::RepositoriesCleanUpWorker#perform when node has selective sync enabled when the project repository does not exist on disk does not leave orphaned entries in the project_registry table\n     Failure/Error: yield lease\n\n     ActiveRecord::StatementInvalid:\n       Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespac' at line 1: SELECT  `projects`.* FROM `projects` WHERE (`projects`.`id` NOT IN (SELECT `projects`.`id` FROM `projects` WHERE `projects`.`namespace_id` IN (WITH RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespace_id` AS id FROM `geo_node_namespace_links` WHERE `geo_node_namespace_links`.`geo_node_id` = 17\n       UNION\n       SELECT `namespaces`.`id` FROM `namespaces`, `base_and_descendants` WHERE `namespaces`.`parent_id` = `base_and_descendants`.`id`) SELECT `id` FROM `base_and_descendants` AS `namespaces`))) ORDER BY `projects`.`id` ASC LIMIT 250\n     # ./config/initializers/connection_fix.rb:20:in `execute'\n     # ./ee/app/workers/geo/repositories_clean_up_worker.rb:21:in `block in perform'\n     # ./app/services/concerns/exclusive_lease_guard.rb:29:in `try_obtain_lease'\n     # ./ee/app/workers/geo/repositories_clean_up_worker.rb:17:in `perform'\n     # ./ee/spec/workers/geo/repositories_clean_up_worker_spec.rb:75:in `block (6 levels) in \u003ctop (required)\u003e'\n     # ./ee/spec/workers/geo/repositories_clean_up_worker_spec.rb:74:in `block (5 levels) in \u003ctop (required)\u003e'\n     # ------------------\n     # --- Caused by: ---\n     # Mysql2::Error:\n     #   You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespac' at line 1\n     #   ./config/initializers/connection_fix.rb:20:in `execute'\n\nFinished in 13 minutes 7 seconds (files took 17.76 seconds to load)\n1329 examples, 4 failures, 36 pending\n\nFailed examples:\n\nrspec ./ee/spec/workers/geo/repositories_clean_up_worker_spec.rb:20 # Geo::RepositoriesCleanUpWorker#perform when node has selective sync enabled legacy storage performs Geo::RepositoryCleanupWorker for each project that does not belong to selected namespaces to replicate\nrspec ./ee/spec/workers/geo/repositories_clean_up_worker_spec.rb:41 # Geo::RepositoriesCleanUpWorker#perform when node has selective sync enabled hashed storage performs Geo::RepositoryCleanupWorker for each project that does not belong to selected namespaces to replicate\nrspec ./ee/spec/workers/geo/repositories_clean_up_worker_spec.rb:62 # Geo::RepositoriesCleanUpWorker#perform when node has selective sync enabled when the project repository does not exist on disk performs Geo::RepositoryCleanupWorker\nrspec ./ee/spec/workers/geo/repositories_clean_up_worker_spec.rb:71 # Geo::RepositoriesCleanUpWorker#perform when node has selective sync enabled when the project repository does not exist on disk does not leave orphaned entries in the project_registry table\n! Generating reports is disabled. To enable it, please set the `FLAKY_RSPEC_GENERATE_REPORT=1` !\n```\n\n- https://gitlab.com/gitlab-org/gitlab-ee/-/jobs/201673085\n\n```\n  1) Geo::RepositoryCleanupWorker#perform when node has selective sync restriction does not delegate project removal for projects that belong to selected namespaces to replicate\n     Failure/Error: described_class.new.perform(project.id, project.name, project.path, 'default')\n\n     ActiveRecord::StatementInvalid:\n       Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespac' at line 1: SELECT  1 AS one FROM `projects` WHERE `projects`.`namespace_id` IN (WITH RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespace_id` AS id FROM `geo_node_namespace_links` WHERE `geo_node_namespace_links`.`geo_node_id` = 17\n       UNION\n       SELECT `namespaces`.`id` FROM `namespaces`, `base_and_descendants` WHERE `namespaces`.`parent_id` = `base_and_descendants`.`id`) SELECT `id` FROM `base_and_descendants` AS `namespaces`) AND `projects`.`id` = 971 LIMIT 1\n     # ./config/initializers/connection_fix.rb:20:in `execute'\n     # ./ee/app/models/geo_node.rb:218:in `projects_include?'\n     # ./ee/app/workers/geo/repository_cleanup_worker.rb:25:in `can_clean_up?'\n     # ./ee/app/workers/geo/repository_cleanup_worker.rb:13:in `perform'\n     # ./ee/spec/workers/geo/repository_cleanup_worker_spec.rb:46:in `block (4 levels) in \u003ctop (required)\u003e'\n     # ------------------\n     # --- Caused by: ---\n     # Mysql2::Error:\n     #   You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespac' at line 1\n     #   ./config/initializers/connection_fix.rb:20:in `execute'\n\n  2) Geo::RepositoryCleanupWorker#perform when node has selective sync restriction delegates project removal for projects that do not belong to selected namespaces to replicate\n     Failure/Error: described_class.new.perform(project.id, project.name, project.path, 'default')\n\n     ActiveRecord::StatementInvalid:\n       Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespac' at line 1: SELECT  1 AS one FROM `projects` WHERE `projects`.`namespace_id` IN (WITH RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespace_id` AS id FROM `geo_node_namespace_links` WHERE `geo_node_namespace_links`.`geo_node_id` = 17\n       UNION\n       SELECT `namespaces`.`id` FROM `namespaces`, `base_and_descendants` WHERE `namespaces`.`parent_id` = `base_and_descendants`.`id`) SELECT `id` FROM `base_and_descendants` AS `namespaces`) AND `projects`.`id` = 975 LIMIT 1\n     # ./config/initializers/connection_fix.rb:20:in `execute'\n     # ./ee/app/models/geo_node.rb:218:in `projects_include?'\n     # ./ee/app/workers/geo/repository_cleanup_worker.rb:25:in `can_clean_up?'\n     # ./ee/app/workers/geo/repository_cleanup_worker.rb:13:in `perform'\n     # ./ee/spec/workers/geo/repository_cleanup_worker_spec.rb:54:in `block (4 levels) in \u003ctop (required)\u003e'\n     # ------------------\n     # --- Caused by: ---\n     # Mysql2::Error:\n     #   You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RECURSIVE `base_and_descendants` AS (SELECT `geo_node_namespace_links`.`namespac' at line 1\n     #   ./config/initializers/connection_fix.rb:20:in `execute'\n\nFinished in 12 minutes 17 seconds (files took 19.04 seconds to load)\n1405 examples, 2 failures, 35 pending\n\nFailed examples:\n\nrspec ./ee/spec/workers/geo/repository_cleanup_worker_spec.rb:41 # Geo::RepositoryCleanupWorker#perform when node has selective sync restriction does not delegate project removal for projects that belong to selected namespaces to replicate\nrspec ./ee/spec/workers/geo/repository_cleanup_worker_spec.rb:49 # Geo::RepositoryCleanupWorker#perform when node has selective sync restriction delegates project removal for projects that do not belong to selected namespaces to replicate\n! Generating reports is disabled. To enable it, please set the `FLAKY_RSPEC_GENERATE_REPORT=1` !\n! Generating reports is disabled. To enable it, please set the `FLAKY_RSPEC_GENERATE_REPORT=1` !\n```\n\nAlso, these specs shouldn't run in these jobs, I think they're  missing the `:geo` metadata? :thinking:","state":"closed","created_at":"2019-04-24T15:43:35.250Z","updated_at":"2019-12-11T20:19:30.629Z","closed_at":"2019-04-24T16:36:47.673Z","closed_by":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Enterprise Edition","Quality","ci-build","group::geo","master:broken","priority::1","severity::1","type::bug"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"}],"author":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":6,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11297","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11297","notes":"https://gitlab.com/api/v4/projects/278964/issues/11297/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11297/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11297","relative":"#11297","full":"gitlab-org/gitlab#11297"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24694286,"iid":28243,"project_id":278964,"title":"Check for docker images before renaming group","description":"### Problem to solve\nThe GitLab Container Registry allows users to build, push and pull Docker images/tags using GitLab. However, since GitLab uses the Docker API, we run into problems where updating a group or projects path will break the connection to Docker. \n\nWe've solved this problem for projects by checking to see if the project has any images/tags before allowing the user to change the project name/path. If there are images/tags, the user is alerted that they cannot rename their project because registry tags exist. [Example video](https://www.youtube.com/watch?v=WM-TS-mbw30\u0026feature=youtu.be)\n\nHowever, for groups we do not do the same check and prevent users from breaking their container registry. \n\n### Intended users\n- [Software Developer](https://design.gitlab.com/getting-started/personas#persona-sasha)\n- [DevOps Engineer](https://design.gitlab.com/getting-started/personas#persona-devon)\n- [Systems Administrator](https://design.gitlab.com/getting-started/personas#persona-sidney)\n\n### Further details\n- More details about renaming/transferring groups [here](https://gitlab.com/help/user/group/index#transferring-groups)\n- GitLab does provide [redirect for path changes](https://docs.gitlab.com/ee/user/project/index.html#redirects-when-changing-repository-paths), but that does not apply to the container registry. In order to address the core issue of allowing users to move groups/projects, we will need to do something similar. \n\n### Proposal\nWhen a user attempts to rename their group by: \n\n1. navigating to their group's settings \u003e General page.\n2. Expanding the Path, transfer, remove section.\n3. Entering a new name under Change group path.\n4. Clicking Change group path.\n\nCheck to see if there are any images/tags within the group and prevent the user from making the change with the same warning modal we use for projects. \n\n**Copy: **\n\"Cannot update the path because it contains images in the container registry. Click [here](https://docs.gitlab.com/ee/api/container_registry.html#delete-repository-tags-in-bulk) for details about how to remove images.\"\n\n![Screen_Shot_2019-08-07_at_3.16.04_PM](/uploads/402e59607aaf9096adab214b96f12a4c/Screen_Shot_2019-08-07_at_3.16.04_PM.png)\n\n### Permissions and Security\nThere are no permissions updates required for this issue.\n\n### Documentation\n- \n\n### Testing\n- Test groups and subgroups\n\n### What does success look like, and how can we measure that?\nSuccess looks like users are warned before updating their group path and avoid disabling their container registry. \n\n### Links / references\n- [Issue to allow updating group/project path](https://gitlab.com/gitlab-org/gitlab-ce/issues/57782)\n- [Transferring groups](https://gitlab.com/help/user/group/index#transferring-groups)\n- [Redirects when changing paths](https://docs.gitlab.com/ee/user/project/index.html#redirects-when-changing-repository-paths)\n- [API endpoint for group-level view of the container registry](https://gitlab.com/gitlab-org/gitlab-ce/issues/26866)\n","state":"closed","created_at":"2019-04-24T11:10:29.488Z","updated_at":"2021-06-04T19:30:44.617Z","closed_at":"2019-11-21T11:01:53.943Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Container Registry","Deliverable","UX","backend","devops::package","frontend","group::package registry","missed-deliverable","missed:12.5","priority::3","severity::3","type::bug","workflow::production"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":163557,"username":"glensc","name":"Elan RuusamÃ¤e","state":"active","avatar_url":"https://secure.gravatar.com/avatar/00756b6c4989540e24c627c904dd461f?s=80\u0026d=identicon","web_url":"https://gitlab.com/glensc"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":16,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28243","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28243","notes":"https://gitlab.com/api/v4/projects/278964/issues/28243/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28243/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28243","relative":"#28243","full":"gitlab-org/gitlab#28243"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20281688,"iid":11280,"project_id":278964,"title":"Geo: Find SELECT COUNT(*) and remove it if we don't need it","description":"Find `SELECT COUNT(*) FROM \"geo_event_log\"` and remove it if we don't need it. It's causing timeouts on dr.gitlab.com because PostgreSQL scans each row.\n\nhttps://gitlab.slack.com/archives/C32LCGC1H/p1556037749095000","state":"closed","created_at":"2019-04-23T18:51:39.785Z","updated_at":"2019-12-11T20:19:32.373Z","closed_at":"2019-05-04T18:50:39.763Z","closed_by":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"labels":["Enterprise Edition","Geo Administration","devops::systems","group::geo","workflow::in review"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"}],"author":{"id":2722370,"username":"rnienaber","name":"Rachel Nienaber","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2722370/avatar.png","web_url":"https://gitlab.com/rnienaber"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":3,"merge_requests_count":1,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11280","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11280","notes":"https://gitlab.com/api/v4/projects/278964/issues/11280/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11280/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11280","relative":"#11280","full":"gitlab-org/gitlab#11280"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20272490,"iid":11274,"project_id":278964,"title":"The geo:db:test:prepare rake task is broken after upgrade to Rails 5.1","description":"The `geo:db:test:prepare` rake task is broken after the Rails 5.1 upgrade has been merged to master:\n\n```shell\nâ¯ bin/rake geo:db:test:prepare\nrake aborted!\nNoMethodError: undefined method `load_schema_for' for ActiveRecord::Tasks::DatabaseTasks:Module\nDid you mean?  load_schema\n/Users/dbalexandre/Workspace/gdk-ee/gitlab/ee/lib/gitlab/geo/database_tasks.rb:131:in `block in load'\n/Users/dbalexandre/Workspace/gdk-ee/gitlab/ee/lib/gitlab/geo/database_tasks.rb:181:in `with_geo_db'\n/Users/dbalexandre/Workspace/gdk-ee/gitlab/ee/lib/gitlab/geo/database_tasks.rb:128:in `load'\n/Users/dbalexandre/Workspace/gdk-ee/gitlab/ee/lib/tasks/geo.rake:148:in `block (4 levels) in \u003cmain\u003e'\n/Users/dbalexandre/Workspace/gdk-ee/gitlab/ee/lib/tasks/geo.rake:143:in `block (4 levels) in \u003cmain\u003e'\nTasks: TOP =\u003e geo:db:test:load\n(See full trace by running task with --trace)\n```","state":"closed","created_at":"2019-04-23T14:30:34.483Z","updated_at":"2019-12-11T20:19:33.247Z","closed_at":"2019-04-23T16:56:42.623Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["Enterprise Edition","devops::systems","group::geo","rails5.1","type::bug"],"milestone":{"id":655280,"iid":28,"group_id":9970,"title":"11.11","description":"","state":"closed","created_at":"2018-09-21T19:08:37.027Z","updated_at":"2019-06-10T14:39:00.009Z","due_date":"2019-05-22","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/28"},"assignees":[{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"}],"author":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"type":"ISSUE","assignee":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11274","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11274","notes":"https://gitlab.com/api/v4/projects/278964/issues/11274/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11274/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11274","relative":"#11274","full":"gitlab-org/gitlab#11274"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24694196,"iid":28211,"project_id":278964,"title":"Gitlab::DiscussionsDiff::FileCollection#load_highlight does too much work when passed an empty array","description":"Try this script on a production console:\n\n```ruby\nmr = MergeRequest.find(16141050) # https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/7341/discussions.json\nmr.note_diff_files.for_commit_or_unresolved.pluck(:id)\n#=\u003e []\ndd = Gitlab::DiscussionsDiff::FileCollection.new(mr.note_diff_files.to_a)\nBenchmark.realtime { dd.load_highlight([]) }\n#=\u003e 1.0429975129663944\n```\n\nThat's 1 second to load highlights for no discussions :slight\\_smile: \n\nThis is a simplified version of what happens from `Projects::MergeRequestsController#discussions` -\u003e `MergeRequest#preload_discussions_diff_highlight`, which happens on every request to a discussions endpoint.\n\nThere are two places in `Gitlab::DiscussionsDiff::FileCollection#preload_highlighted_lines` where we can call Gitaly, which I've annotated below:\n\n```ruby\ndef preload_highlighted_lines(ids)\n  cached_content = read_cache(ids)\n\n  uncached_ids = ids.select.each_with_index { |_, i| cached_content[i].nil? }\n  # Gitaly call\n  mapping = highlighted_lines_by_ids(uncached_ids)\n\n  HighlightCache.write_multiple(mapping)\n\n  # Gitaly call\n  diffs = diff_files_indexed_by_id.values_at(*ids)\n\n  diffs.zip(cached_content).each do |diff, cached_lines|\n    next unless diff \u0026\u0026 cached_lines\n\n    diff.highlighted_diff_lines = cached_lines\n  end\nend\n```\n\nI think adding a `return if highlightable_ids.empty?` to `load_highlight` should take this, but there might also be other cases where we spend time fetching files we don't need.","state":"closed","created_at":"2019-04-23T11:15:32.601Z","updated_at":"2021-03-18T11:46:25.711Z","closed_at":"2019-10-18T10:52:42.369Z","closed_by":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"labels":["Category:Code Review Workflow","[deprecated] Accepting merge requests","backend","bug::performance","devops::create","diff","group::code review","merge requests"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[],"author":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"type":"ISSUE","assignee":null,"user_notes_count":8,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28211","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28211","notes":"https://gitlab.com/api/v4/projects/278964/issues/28211/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28211/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28211","relative":"#28211","full":"gitlab-org/gitlab#28211"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1577,"epic":{"id":9297,"iid":1577,"title":"â³ Progressively load merge request discussions","url":"/groups/gitlab-org/-/epics/1577","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":20263308,"iid":11269,"project_id":278964,"title":"elasticsearch: Index wikis using the external indexer","description":"### Problem to solve\n\nCurrently, gitlab-ee unconditionally indexes wiki repository **blobs only**, using code from the Ruby indexer. Commits don't get indexed. However, the ruby indexer implementation is slated for removal: https://gitlab.com/gitlab-org/gitlab-ee/issues/6481 (scheduled for %12.1),  and doesn't work in non-NFS deployments anyway. \n\nElasticsearch wiki indexing is **currently broken** for non-NFS deployments. If we've advertised that scenario as working, then we need to upgrade this to an ~S2 ~bug, I think.\n\n### Intended users\n\nInstance administrators\n\n### Proposal\n\nEnhance gitlab-elasticsearch-indexer so that it can handle the wiki case. In practice, this means re-using the existing repository parsing code, and writing the content to slightly different field names.\n\nWe'll need to modify gitlab-ee so that - instead of directly calling `project.wiki.index_blobs`: https://gitlab.com/gitlab-org/gitlab-ee/blob/master/ee/app/models/concerns/elastic/wiki_repositories_search.rb#L26 - it enqueues an `ElasticCommitIndexerWorker` for the **wiki project**, instead.\n\n### Permissions and Security\n\nNo changes required\n\n### Documentation\n\nNo changes required\n\n### Testing\n\nWe have existing tests for searching a wiki repository. We could prevent regressions by making them use `gitlab-elasticsearch-indexer` - it's work that's implicitly scheduled for %12.1 anyway, so a headstart would be nice.\n\n### What does success look like, and how can we measure that?\n\nIn a gitlab-ee HA deployment that doesn't have NFS / shared filesystems enabled, wikis can be successfully indexed and searched\n\n### What is the type of buyer? \n\n~\"GitLab Starter\" ~\"GitLab.com Priority\" \n\n### Links / references\n\n\ncc @vsizov @mdelaossa @smcgivern @DouweM @bcupini","state":"closed","created_at":"2019-04-23T09:37:16.196Z","updated_at":"2022-05-19T17:39:09.633Z","closed_at":"2019-06-07T08:15:47.380Z","closed_by":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"labels":["Deliverable","Enterprise Edition","advanced search","backend","customer","devops::create","group::editor","priority::2","severity::2","type::bug","type::feature","workflow::in review"],"milestone":{"id":693518,"iid":33,"group_id":9970,"title":"12.0","description":"https://about.gitlab.com/releases/2019/06/22/gitlab-12-0-released/","state":"closed","created_at":"2018-10-30T16:47:37.975Z","updated_at":"2020-04-22T19:51:03.475Z","due_date":"2019-06-22","start_date":"2019-05-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/33"},"assignees":[{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"}],"author":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"type":"ISSUE","assignee":{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"},"user_notes_count":9,"merge_requests_count":1,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11269","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11269","notes":"https://gitlab.com/api/v4/projects/278964/issues/11269/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11269/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11269","relative":"#11269","full":"gitlab-org/gitlab#11269"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":853,"epic":{"id":4555,"iid":853,"title":"Elasticsearch on GitLab.com MVC","url":"/groups/gitlab-org/-/epics/853","group_id":9970,"human_readable_end_date":"Jul 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":20262979,"iid":11268,"project_id":278964,"title":"Make it able to pick a project under a subgroup for Insights config","description":"We just realized that we cannot set the insights config for gitlab-org to [gitlab-org/quality/insights-config](https://gitlab.com/gitlab-org/quality/insights-config), and for now we're using [gitlab-org/gitlab-insights](https://gitlab.com/gitlab-org/gitlab-insights)\n\nWe should make it possible to pick projects under a subgroup.","state":"closed","created_at":"2019-04-23T09:26:41.326Z","updated_at":"2020-02-18T15:46:37.654Z","closed_at":"2020-02-18T11:39:35.566Z","closed_by":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Engineering Productivity","Enterprise Edition","Quality","ep::metrics","feature::enhancement","frontend","insights","type::feature","workflow::verification"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":423915,"username":"godfat","name":"Lin Jen-Shin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8c73dab2ecd23d5b5627a0235ae2f9b1?s=80\u0026d=identicon","web_url":"https://gitlab.com/godfat"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":7,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11268","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11268","notes":"https://gitlab.com/api/v4/projects/278964/issues/11268/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11268/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11268","relative":"#11268","full":"gitlab-org/gitlab#11268"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1196,"epic":{"id":6133,"iid":1196,"title":"Future Improvements for GitLab Insights","url":"/groups/gitlab-org/-/epics/1196","group_id":9970,"human_readable_end_date":"Jul 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":20259952,"iid":11265,"project_id":278964,"title":"Investigate removal of GlobalLabel","description":"`GlobalLabel` is used only by global milestone, we could probably remove this model (as it's used only for grouping labels by title), we could remove also dashboard label controller.\n\nThe following discussion from !10862 should be addressed:\n\n- [ ] @engwan started a [discussion](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/10862#note_163128520):  (+1 comment)\n\n    \u003e Is this model still being used? Should we create a follow-up to clean this up?\n\nAlso briefly discussed in https://gitlab.slack.com/archives/C72HPNV97/p1555997520092800","state":"closed","created_at":"2019-04-23T07:40:04.102Z","updated_at":"2022-05-19T16:08:59.377Z","closed_at":"2020-10-15T02:17:31.261Z","closed_by":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"labels":["Enterprise Edition","backend","backstage [DEPRECATED]","devops::plan","group::project management","maintenance::refactor","section::dev","workflow::in review"],"milestone":{"id":1233754,"iid":52,"group_id":9970,"title":"13.5","description":"https://about.gitlab.com/releases/2020/10/22/gitlab-13-5-released/","state":"closed","created_at":"2020-04-09T17:39:21.990Z","updated_at":"2022-04-21T07:21:12.213Z","due_date":"2020-10-17","start_date":"2020-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/52"},"assignees":[{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"}],"author":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"type":"ISSUE","assignee":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11265","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11265","notes":"https://gitlab.com/api/v4/projects/278964/issues/11265/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11265/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11265","relative":"#11265","full":"gitlab-org/gitlab#11265"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20254394,"iid":11261,"project_id":278964,"title":"Geo OAuth session authorize_url may not handle relative_url_root","description":"## Problem\n\nI ran into this during another MR.\n\nWhen the primary node `url` has a `relative_url_root` like `http://node_url51/gitlab`, `Session#authorize_url` drops the `/gitlab`. And `Session#authenticate` raises `ArgumentError: invalid address`.\n\nIt looks like our OAuth gem is doing this, so perhaps this is necessary and expected behavior for OAuth; I don't know at this time. If so, then Geo cannot support primaries with a `relative_url_root`.\n\nIf not, then we may need to fix the gem?\n\nhttps://gitlab.com/gitlab-org/gitlab-ee/-/jobs/199696206:\n\n```ruby\nFailures:\n\n  1) Gitlab::Geo::Oauth::Session#authorized_url returns a valid url to the primary node\n     Failure/Error: expect(subject.authorize_url).to start_with(primary_node.internal_url)\n       expected \"http://node_url51/oauth/authorize?client_id=4330c65a6d16c91b5a8643b3d02257d08df3619154770ca6fae278ff0aa1d894\u0026response_type=code\" to start with \"http://node_url51/gitlab/\"\n     # ./ee/spec/lib/gitlab/geo/oauth/session_spec.rb:19:in `block (3 levels) in \u003ctop (required)\u003e'\n\n  2) Gitlab::Geo::Oauth::Session#authenticate on success returns hashed user data\n     Failure/Error: expect(subject.authenticate(access_token.token)).to eq(parsed_json)\n\n     ArgumentError:\n       invalid address\n     # ./ee/lib/gitlab/geo/oauth/session.rb:17:in `authenticate'\n     # ./ee/spec/lib/gitlab/geo/oauth/session_spec.rb:38:in `block (4 levels) in \u003ctop (required)\u003e'\n\n  3) Gitlab::Geo::Oauth::Session#authenticate on invalid token raises exception\n     Failure/Error: expect { subject.authenticate(access_token.token) }.to raise_error(OAuth2::Error)\n\n       expected OAuth2::Error, got #\u003cArgumentError: invalid address\u003e with backtrace:\n         # ./ee/lib/gitlab/geo/oauth/session.rb:17:in `authenticate'\n         # ./ee/spec/lib/gitlab/geo/oauth/session_spec.rb:48:in `block (5 levels) in \u003ctop (required)\u003e'\n         # ./ee/spec/lib/gitlab/geo/oauth/session_spec.rb:48:in `block (4 levels) in \u003ctop (required)\u003e'\n     # ./ee/spec/lib/gitlab/geo/oauth/session_spec.rb:48:in `block (4 levels) in \u003ctop (required)\u003e'\n\nFinished in 13 minutes 58 seconds (files took 16.3 seconds to load)\n1484 examples, 3 failures, 3 pending\n\nFailed examples:\n\nrspec ./ee/spec/lib/gitlab/geo/oauth/session_spec.rb:18 # Gitlab::Geo::Oauth::Session#authorized_url returns a valid url to the primary node\nrspec ./ee/spec/lib/gitlab/geo/oauth/session_spec.rb:35 # Gitlab::Geo::Oauth::Session#authenticate on success returns hashed user data\nrspec ./ee/spec/lib/gitlab/geo/oauth/session_spec.rb:47 # Gitlab::Geo::Oauth::Session#authenticate on invalid token raises exception\n```\n\nI think this is low priority because I assume `relative_url_root` usage is rare, and as a result, we haven't seen any reports of Geo problems with `relative_url_root` even though there are some.\n\n## Proposal\n\n- [ ] Set up Geo with a relative URL root\n- [ ] Try to use the secondary web UI\n- [ ] If there are errors, create issues for them","state":"closed","created_at":"2019-04-22T23:52:04.987Z","updated_at":"2020-07-28T18:38:57.503Z","closed_at":"2020-07-23T21:39:53.006Z","closed_by":{"id":1315784,"username":"ifarkas","name":"Imre Farkas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b4dcfa5185b8513751b447d76b069bf6?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifarkas"},"labels":["Enterprise Edition","Geo Administration","devops::systems","group::geo","priority::4","severity::3","type::bug","workflow::in review"],"milestone":{"id":1233752,"iid":50,"group_id":9970,"title":"13.3","description":"https://about.gitlab.com/releases/2020/08/22/gitlab-13-3-released/","state":"closed","created_at":"2020-04-09T17:39:21.090Z","updated_at":"2022-04-13T14:50:18.976Z","due_date":"2020-08-17","start_date":"2020-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/50"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":9,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11261","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11261","notes":"https://gitlab.com/api/v4/projects/278964/issues/11261/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11261/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11261","relative":"#11261","full":"gitlab-org/gitlab#11261"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24694173,"iid":28201,"project_id":278964,"title":"registry-garbage-collect blows up on moved projects (failed to retrieve tags unknown repository)","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nRunning `gitlab-ctl registry-garbage-collect -m` fails with an error `failed to garbage collect: failed to mark: gcs: gcs: failed to retrieve tags unknown repository name=anthony-ldap/customer-portal/feature-container` referring to the old name of a renamed project. This is using Google Cloud Storage for the registry.\n\n### Steps to reproduce\n\nHappens each run of `gitlab-ctl registry-garbage-collect -m`\n\nThat project was (a while ago) renamed to services/customer-portal via project settingsâ†’advancedâ†’rename repository.\n\nAlso, at one point registry storage was migrated from local disk to Google Cloud Storage by copying all the files to objects (using `rclone sync`), and changing the GitLab settings.\n\n### Example Project\n\nN/A\n\n### What is the current *bug* behavior?\n\nError message.\n\n### What is the expected *correct* behavior?\n\nA bunch of old, obsolete images deleted.\n\n### Relevant logs and/or screenshots\n\n```\nroot@git:~# gitlab-ctl registry-garbage-collect -m\nok: down: registry: 0s, normally up\nRunning garbage-collect using configuration [\"/opt/gitlab/embedded/bin/registry\", \"garbage-collect\", \"/var/opt/gitlab/registry/config.yml\", \"-m\"], this might take a while...\nanthony-ldap/customer-portal/feature-container\nmanifest eligible for deletion: sha256:1aa45b60b2bbba67c1b33f3ed4c764e8737c49731e934beeb051231b3ed4d4e1\nfailed to garbage collect: failed to mark: gcs: gcs: failed to retrieve tags unknown repository name=anthony-ldap/customer-portal/feature-container\nFailed to run garbage-collect command, starting registry service.\nok: run: registry: (pid 28110) 0s\n\n```\n\n### Output of checks\n\n(If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com)\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\nroot@git:~# gitlab-rake gitlab:env:info\n\nSystem information\nSystem:         Debian 9.8\nCurrent User:   git\nUsing RVM:      no\nRuby Version:   2.5.3p105\nGem Version:    2.7.6\nBundler Version:1.17.3\nRake Version:   12.3.2\nRedis Version:  3.2.12\nGit Version:    2.18.1\nSidekiq Version:5.2.5\nGo Version:     unknown\n\nGitLab information\nVersion:        11.10.0\nRevision:       8a802d1c6b7\nDirectory:      /opt/gitlab/embedded/service/gitlab-rails\nDB Adapter:     PostgreSQL\nDB Version:     9.6.11\nURL:            https://git.Â«REDACTEDÂ».net\nHTTP Clone URL: https://git.Â«REDACTEDÂ».net/some-group/some-project.git\nSSH Clone URL:  git@git.Â«REDACTEDÂ».net:some-group/some-project.git\nUsing LDAP:     yes\nUsing Omniauth: yes\nOmniauth Providers: \n\nGitLab Shell\nVersion:        9.0.0\nRepository storage paths:\n- default:      /var/opt/gitlab/git-data/repositories\nGitLab Shell path:              /opt/gitlab/embedded/service/gitlab-shell\nGit:            /opt/gitlab/embedded/bin/git\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\nChecking GitLab subtasks ...\n\nChecking GitLab Shell ...\n\nGitLab Shell: ... GitLab Shell version \u003e= 9.0.0 ? ... OK (9.0.0)\nRunning /opt/gitlab/embedded/service/gitlab-shell/bin/check\nCheck GitLab API access: OK\nRedis available via internal API: OK\n\nAccess to /var/opt/gitlab/.ssh/authorized_keys: OK\ngitlab-shell self-check successful\n\nChecking GitLab Shell ... Finished\n\nChecking Gitaly ...\n\nGitaly: ... default ... OK\n\nChecking Gitaly ... Finished\n\nChecking Sidekiq ...\n\nSidekiq: ... Running? ... yes\nNumber of Sidekiq processes ... 1\n\nChecking Sidekiq ... Finished\n\nChecking Incoming Email ...\n\nIncoming Email: ... Reply by email is disabled in config/gitlab.yml\n\nChecking Incoming Email ... Finished\n\nChecking LDAP ...\n\nLDAP: ... Server: ldapmain\nLDAP authentication... Success\nLDAP users with access to your GitLab server (only showing the first 100 results)\n        DN: cn=Â«REDACTEDÂ»     uid: Â«REDACTEDÂ»\n        â‹® Â«REDACTEDÂ»\n\nChecking LDAP ... Finished\n\nChecking GitLab App ...\n\nGit configured correctly? ... yes\nDatabase config exists? ... yes\nAll migrations up? ... yes\nDatabase contains orphaned GroupMembers? ... no\nGitLab config exists? ... yes\nGitLab config up to date? ... yes\nLog directory writable? ... yes\nTmp directory writable? ... yes\nUploads directory exists? ... yes\nUploads directory has correct permissions? ... yes\nUploads directory tmp has correct permissions? ... yes\nInit script exists? ... skipped (omnibus-gitlab has no init script)\nInit script up-to-date? ... skipped (omnibus-gitlab has no init script)\nProjects have namespace: ... \n\n5/2 ... yes\n5/3 ... yes\n5/4 ... yes\n5/5 ... yes\n6/6 ... yes\n6/7 ... yes\n6/8 ... yes\n6/9 ... yes\n6/10 ... yes\n6/11 ... yes\n6/12 ... yes\n6/13 ... yes\n6/14 ... yes\n6/15 ... yes\n6/16 ... yes\n6/17 ... yes\n6/18 ... yes\n6/19 ... yes\n6/20 ... yes\n6/21 ... yes\n6/22 ... yes\n6/23 ... yes\n6/24 ... yes\n6/25 ... yes\n6/26 ... yes\n6/27 ... yes\n6/28 ... yes\n6/29 ... yes\n6/30 ... yes\n6/31 ... yes\n6/32 ... yes\n6/33 ... yes\n6/34 ... yes\n6/35 ... yes\n6/36 ... yes\n6/37 ... yes\n4/38 ... yes\n49/39 ... yes\n49/40 ... yes\n5/41 ... yes\n4/42 ... yes\n5/43 ... yes\n6/44 ... yes\n6/45 ... yes\n6/46 ... yes\n6/47 ... yes\n4/50 ... yes\n6/52 ... yes\n6/53 ... yes\n57/54 ... yes\n4/55 ... yes\n57/56 ... yes\n57/57 ... yes\n4/58 ... yes\n6/59 ... yes\n59/61 ... yes\n49/62 ... yes\n4/63 ... yes\n5/64 ... yes\n5/65 ... yes\n6/66 ... yes\n5/67 ... yes\n4/68 ... yes\n62/69 ... yes\n66/70 ... yes\n6/71 ... yes\n62/72 ... yes\n62/73 ... yes\n6/74 ... yes\n6/75 ... yes\n66/76 ... yes\n6/77 ... yes\n6/78 ... yes\n6/79 ... yes\n6/80 ... yes\n6/81 ... yes\n6/82 ... yes\n66/83 ... yes\n6/84 ... yes\n6/85 ... yes\n66/86 ... yes\n74/87 ... yes\n59/88 ... yes\n74/89 ... yes\n74/91 ... yes\n74/92 ... yes\nRedis version \u003e= 2.8.0? ... yes\nRuby version \u003e= 2.3.5 ? ... yes (2.5.3)\nGit version \u003e= 2.18.0 ? ... yes (2.18.1)\nGit user has default SSH configuration? ... yes\nActive users: ... 53\n\nChecking GitLab App ... Finished\n\n\nChecking GitLab subtasks ... Finished\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n(If you can, link to the line of code that might be responsible for the problem)","state":"closed","created_at":"2019-04-22T19:15:04.181Z","updated_at":"2020-03-18T17:39:56.338Z","closed_at":"2020-03-18T17:39:56.290Z","closed_by":{"id":3913904,"username":"dcroft","name":"Daniel Croft","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2af6159fa5cd9659356041c6a9b9ce62?s=80\u0026d=identicon","web_url":"https://gitlab.com/dcroft"},"labels":["Category:Container Registry","[deprecated] Accepting merge requests","customer","devops::package","group::package registry","priority::3","severity::3","type::bug","workflow::production"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":3913904,"username":"dcroft","name":"Daniel Croft","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2af6159fa5cd9659356041c6a9b9ce62?s=80\u0026d=identicon","web_url":"https://gitlab.com/dcroft"}],"author":{"id":153708,"username":"derobert","name":"Anthony DeRobertis","state":"active","avatar_url":"https://secure.gravatar.com/avatar/05b48b72766177b3b0a6ff4afdb70790?s=80\u0026d=identicon","web_url":"https://gitlab.com/derobert"},"type":"ISSUE","assignee":{"id":3913904,"username":"dcroft","name":"Daniel Croft","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2af6159fa5cd9659356041c6a9b9ce62?s=80\u0026d=identicon","web_url":"https://gitlab.com/dcroft"},"user_notes_count":13,"merge_requests_count":1,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/28201","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/28201","notes":"https://gitlab.com/api/v4/projects/278964/issues/28201/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/28201/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#28201","relative":"#28201","full":"gitlab-org/gitlab#28201"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20238345,"iid":11254,"project_id":278964,"title":"Scoped labels icon is misaligned in markdown","description":"### Summary\n\nScoped labels icon is misaligned in markdown.\n\n![scoped-labels-in-markdown](/uploads/b97d204a34eb55d3c957651eff2d5518/scoped-labels-in-markdown.png)","state":"closed","created_at":"2019-04-22T11:47:48.729Z","updated_at":"2022-05-19T16:08:58.913Z","closed_at":"2020-12-15T21:20:49.550Z","closed_by":{"id":1474048,"username":"gtsiolis","name":"George Tsiolis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1474048/avatar.png","web_url":"https://gitlab.com/gtsiolis"},"labels":["Enterprise Edition","[deprecated] Accepting merge requests","devops::plan","frontend","group::project management","labels","priority::4","section::dev","severity::4","stale","type::bug","vintage"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":1474048,"username":"gtsiolis","name":"George Tsiolis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1474048/avatar.png","web_url":"https://gitlab.com/gtsiolis"},"type":"ISSUE","assignee":null,"user_notes_count":12,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11254","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11254","notes":"https://gitlab.com/api/v4/projects/278964/issues/11254/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11254/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11254","relative":"#11254","full":"gitlab-org/gitlab#11254"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20218793,"iid":11244,"project_id":278964,"title":"Support setup.py in Dependency Scanning","description":"### Problem to solve\r\n\r\nRight now (AFAICT) `dependency_scanning` requires a project to have a `requirements.txt` present. However, `requirements.txt` doesnâ€™t make sense for all projects (e.g., libraries) to have since they donâ€™t need the absolute dependency resolution but can make do just fine with the relative dependencies as given in `setup.py`.\r\n\r\n### Intended users\r\n\r\n~\"Persona: Software developer\" \r\n\r\n### Further details\r\n\r\nPython support for Dependency Scanning is implemented in [gemnasium-python](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python), which only supports pip and pipenv at the moment.\r\n\r\nIn [main.go](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python/blob/v2.2.4/analyze.go), gemnasium-python [detects the `PackageManager`](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python/blob/v2.2.4/analyze.go#L54), then delegates the [installation of the dependencies](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python/blob/v2.2.4/analyze.go#L59) and the [generation of the dependency graph](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python/blob/v2.2.4/analyze.go#L63).\r\n\r\n### Proposal\r\n\r\nCreate a new package manager handler in `gemnasium-python`:\r\n\r\n- update [gemnasium-python](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python)\r\n  - create a new package manager handler\r\n    - create a new Go file in [pkgmgr](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python/blob/v2.2.4/pkgmngr)\r\n    - declare a Go struct implementing [`PackageManager`](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python/blob/v2.2.4/pkgmngr/pkgmngr.go#L10)\r\n    - implement `InstallDependencies` by calling `python setup.py`\r\n    - reuse code from [pkgmngr/pip.go](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python/blob/v2.2.4/pkgmngr/pip.go) to generate the dependency graph\r\n  - change the detection logic implemented in [NewPackageManager](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python/blob/v2.2.4/pkgmngr/pkgmngr.go#L23), return the new package manager handler when there's a `setup.py` but no file pip or pipenv can handle\r\n  - change [plugin/plugin.go](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python/blob/v2.2.4/plugin/plugin.go) to respond to `setup.py`\r\n  - optionally, introduce a plugin architecture for the package managers\r\n    - iterate and delegate in [plugin/plugin.go](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python/blob/v2.2.4/plugin/plugin.go)\r\n    - iterate and delegate in [NewPackageManager](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python/blob/v2.2.4/pkgmngr/pkgmngr.go#L23)\r\n  - publish new release\r\n- update [dependency-scanning](https://gitlab.com/gitlab-org/security-products/analyzers/dependency-scanning)\r\n  - update Go dependency `gemnasium-python`, so that Dependency Scanning responds to `setup.py`\r\n  - publish new release\r\n- create new test project, or add specific branch to existing one\r\n- update GitLab documentation\r\n\r\n### Permissions and Security\r\n\r\nNo changes to current behavior.\r\n\r\n### Documentation\r\n\r\n[Documentation](https://docs.gitlab.com/ee/user/application_security/dependency_scanning/index.html#supported-languages-and-package-managers) should be changed to denote that `setup.py` will be supported in addition to `requirements.txt`.\r\n\r\n### Testing\r\n\r\nIt needs to test correct behavior in cases where more than one of `setup.py` and `requirements.txt` exist and possibly give conflicting dependency information. (`requirements.txt` being the description of a full environment at a specific version should probably take precedence, followed by whatever order of `setup.py` that `pip` does.)\r\n\r\n### What does success look like, and how can we measure that?\r\n\r\nSuccess would be that a project that has a `setup.py` specified but no `requirements.txt` is still able to utilize the Dependency Scanning CI security feature.\r\n\r\n### What is the type of buyer?\r\n\r\n~\"GitLab Ultimate\" \r\n\r\n### Links / references\r\n\r\n* https://docs.gitlab.com/ee/user/application_security/dependency_scanning/index.html#supported-languages-and-package-managers\r\n* https://caremad.io/posts/2013/07/setup-vs-requirement/","state":"closed","created_at":"2019-04-21T08:57:45.868Z","updated_at":"2020-04-17T15:34:21.229Z","closed_at":"2019-09-16T11:52:52.860Z","closed_by":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","backend","backend-weight::3","devops::secure","group::composition analysis","type::feature"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"}],"author":{"id":55717,"username":"Freso","name":"Freso","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/55717/avatar.png","web_url":"https://gitlab.com/Freso"},"type":"ISSUE","assignee":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"user_notes_count":10,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11244","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11244","notes":"https://gitlab.com/api/v4/projects/278964/issues/11244/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11244/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11244","relative":"#11244","full":"gitlab-org/gitlab#11244"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1400,"epic":{"id":7868,"iid":1400,"title":"Improve Dependency Scanning support for Python","url":"/groups/gitlab-org/-/epics/1400","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":20213361,"iid":11241,"project_id":278964,"title":"Epic API missing `web_url` field","description":"### Problem to solve\n\nThis is a really helpful field for any kind of scripting so that the API consumer can easily print a link to the epic in the Web UI. Without this the client must manually create this information :cry: \n\nThis information is available in the Issues API.\n\n### Proposal\n\nAdd `web_url` (`string`) field to the Epics API  \nAdding that field could potentially create a N+1 query, for more information check: https://gitlab.com/gitlab-org/gitlab/issues/11241#note_217819177\n\n### Links / references\n\nhttps://docs.gitlab.com/ee/api/epics.html","state":"closed","created_at":"2019-04-20T17:10:50.387Z","updated_at":"2022-05-19T16:08:58.506Z","closed_at":"2019-10-10T13:16:42.075Z","closed_by":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"labels":["Enterprise Edition","GitLab Ultimate","api","backend","devops::plan","group::product planning","type::feature","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"}],"author":{"id":1187333,"username":"jramsay-gitlab","name":"James Ramsay (ex-GitLab)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1187333/avatar.png","web_url":"https://gitlab.com/jramsay-gitlab"},"type":"ISSUE","assignee":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"user_notes_count":14,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11241","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11241","notes":"https://gitlab.com/api/v4/projects/278964/issues/11241/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11241/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11241","relative":"#11241","full":"gitlab-org/gitlab#11241"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20213330,"iid":11240,"project_id":278964,"title":"Epic API missing `subscribed` field","description":"### Problem to solve\n\nIt's helpful to know if I'm subscribed to an Epic via the API.\n\nThis information is available in the Issues API.\n\n### Proposal\n\nAdd `subscribed` (`boolean`) field to the Epics API\n\n### Links / references\n\nhttps://docs.gitlab.com/ee/api/epics.html","state":"closed","created_at":"2019-04-20T17:06:31.458Z","updated_at":"2020-01-24T15:09:55.582Z","closed_at":"2019-10-22T18:43:03.467Z","closed_by":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"labels":["Enterprise Edition","GitLab Ultimate","api","backend","devops::plan","group::product planning","missed:12.4","type::feature","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"}],"author":{"id":1187333,"username":"jramsay-gitlab","name":"James Ramsay (ex-GitLab)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1187333/avatar.png","web_url":"https://gitlab.com/jramsay-gitlab"},"type":"ISSUE","assignee":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"user_notes_count":5,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11240","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11240","notes":"https://gitlab.com/api/v4/projects/278964/issues/11240/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11240/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11240","relative":"#11240","full":"gitlab-org/gitlab#11240"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20213320,"iid":11239,"project_id":278964,"title":"Epic API missing `closed_at` field","description":"### Problem to solve\n\nIt's helpful to know when an issue was closed, but this information is not available in the API.\n\nThis information is available in the Issues API.\n\n### Proposal\n\nAdd `closed_at` field to the Epics API\n\n### Links / references\n\nhttps://docs.gitlab.com/ee/api/epics.html","state":"closed","created_at":"2019-04-20T17:05:08.451Z","updated_at":"2022-05-19T16:08:58.264Z","closed_at":"2019-10-10T13:17:01.403Z","closed_by":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"labels":["Enterprise Edition","GitLab Ultimate","api","backend","devops::plan","group::product planning","type::feature","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"}],"author":{"id":1187333,"username":"jramsay-gitlab","name":"James Ramsay (ex-GitLab)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1187333/avatar.png","web_url":"https://gitlab.com/jramsay-gitlab"},"type":"ISSUE","assignee":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/11239","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/11239","notes":"https://gitlab.com/api/v4/projects/278964/issues/11239/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/11239/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#11239","relative":"#11239","full":"gitlab-org/gitlab#11239"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null}]